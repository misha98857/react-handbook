[{"key": "\u5b89\u88c5", "values": [{"key": "\u5f00\u59cb", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u8fd9\u662f\u4e00\u4e2a React \u6587\u6863\u53ca\u76f8\u5173\u8d44\u6e90\u7684\u6982\u89c8\u9875\u9762\u3002</p>\n<p><strong>React</strong> \u662f\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u7528\u6237\u754c\u9762\u7684 JavaScript \u5e93\u3002\u4f60\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//\">\u9996\u9875</a>\u6216<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//tutorial/tutorial.html\">\u6559\u7a0b</a>\u4e2d\u5b66\u4e60\u4ec0\u4e48\u662f React\u3002</p>\n\n<ul>\n<li><a href=\"/react/getting-started#try-react\">\u4f53\u9a8c React</a></li>\n<li><a href=\"/react/getting-started#learn-react\">\u5b66\u4e60 React</a></li>\n<li><a href=\"/react/getting-started#staying-informed\">\u83b7\u53d6\u6700\u65b0\u6d88\u606f</a></li>\n<li><a href=\"/react/getting-started#versioned-documentation\">\u7248\u672c\u5316\u6587\u6863</a></li>\n<li><a href=\"/react/getting-started#something-missing\">\u627e\u4e0d\u5230\u60f3\u8981\u7684\uff1f</a></li>\n</ul>\n<h2 id=\"try-react\"><a class=\"anchor\" href=\"/react/getting-started#try-react\"></a>\u4f53\u9a8c React </h2>\n<p>React \u4ece\u8bde\u751f\u4e4b\u521d\u5c31\u662f\u53ef\u88ab\u9010\u6b65\u91c7\u7528\u7684\uff0c\u56e0\u800c<strong>\u4f60\u53ef\u4ee5\u6309\u9700\u5f15\u5165\u6216\u591a\u6216\u5c11\u7684 React \u7279\u6027</strong>\u3002\u4e0d\u7ba1\u4f60\u662f\u60f3\u4f53\u9a8c\u4e0b React\uff0c\u7528\u5b83\u7ed9\u7b80\u5355\u7684 HTML \u9875\u9762\u589e\u52a0\u4e00\u70b9\u4ea4\u4e92\uff0c\u8fd8\u662f\u8981\u5f00\u59cb\u4e00\u4e2a\u5b8c\u5168\u7531 React \u9a71\u52a8\u7684\u590d\u6742\u5e94\u7528\uff0c\u8be5\u7ae0\u8282\u5185\u5bb9\u91cc\u7684\u94fe\u63a5\u90fd\u80fd\u5e2e\u4f60\u5feb\u901f\u5f00\u59cb\u3002</p>\n<h3 id=\"online-playgrounds\"><a class=\"anchor\" href=\"/react/getting-started#online-playgrounds\"></a>\u5728\u7ebf\u4f53\u9a8c </h3>\n<p>\u5982\u679c\u4f60\u5bf9\u4f53\u9a8c React \u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5728\u7ebf\u4ee3\u7801\u7f16\u8f91\u5668\u3002\u4ece <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//redirect-to-codepen/hello-world\">CodePen</a>\uff0c<a class=\"external-link\" href=\"https://codesandbox.io/s/new\">CodeSandbox</a>\uff0c\u6216\u8005 <a class=\"external-link\" href=\"https://stackblitz.com/fork/react\">Stackblitz</a> \u5f00\u59cb\u4e00\u4e2a React \u7248\u672c\u7684 Hello World \u6a21\u677f\u3002</p>\n<p>\u5982\u679c\u4f60\u559c\u6b22\u4f7f\u7528\u81ea\u5df1\u7684\u6587\u672c\u7f16\u8f91\u5668\uff0c\u4e5f\u53ef\u4ee5<a class=\"external-link\" href=\"https://raw.githubusercontent.com/reactjs/reactjs.org/main/static/html/single-file-example.html\">\u4e0b\u8f7d\u8fd9\u4e2a HTML \u6587\u4ef6</a>\uff0c\u7136\u540e\u7f16\u8f91\u6587\u4ef6\u5185\u5bb9\uff0c\u6700\u540e\u518d\u7528\u6d4f\u89c8\u5668\u4ece\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6253\u5f00\u6587\u4ef6\uff0c\u9884\u89c8\u9875\u9762\u6548\u679c\u3002\u6ce8\u610f\uff1a\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u5305\u542b\u4e00\u4e2a\u4f4e\u6548\u7387\u7684\u8fd0\u884c\u65f6\u4ee3\u7801\u8f6c\u6362\u811a\u672c\uff0c\u6240\u4ee5\u6211\u4eec\u63a8\u8350\u4ec5\u5728\u7b80\u5355\u7684\u6f14\u793a\u9879\u76ee\u4e2d\u4f7f\u7528\u3002</p>\n<h3 id=\"add-react-to-a-website\"><a class=\"anchor\" href=\"/react/getting-started#add-react-to-a-website\"></a>\u5728\u7f51\u7ad9\u4e2d\u6dfb\u52a0 React </h3>\n<p>\u4f60\u53ef\u4ee5<a href=\"/react/add-react-to-a-website\">\u7acb\u5373\u5728 HTML \u6587\u4ef6\u4e2d\u6dfb\u52a0 React</a>\uff0c\u7136\u540e\u9009\u62e9\u9010\u6e10\u62d3\u5c55\u5b83\u7684\u5e94\u7528\u8303\u56f4\uff0c\u6216\u53ea\u5728\u4e00\u4e9b\u52a8\u6001\u5c0f\u90e8\u4ef6\u4e2d\u4f7f\u7528\u5b83\u3002</p>\n<h3 id=\"create-a-new-react-app\"><a class=\"anchor\" href=\"/react/getting-started#create-a-new-react-app\"></a>\u521b\u5efa\u65b0\u7684 React \u5e94\u7528 </h3>\n<p>\u5f53\u4f60\u521a\u5f00\u59cb\u4e00\u4e2a React \u5e94\u7528\u65f6\uff0c<a href=\"/react/add-react-to-a-website\">\u901a\u8fc7 HTML \u7684 script \u6807\u7b7e\u5f15\u5165 React</a> \u4f9d\u7136\u662f\u6700\u597d\u7684\u9009\u9879\uff0c\u56e0\u4e3a\u8fd9\u80fd\u8ba9\u4f60\u7684\u9879\u76ee\u7acb\u5373\u542f\u52a8\u3002</p>\n<p>\u4f46\u968f\u7740\u5e94\u7528\u8d8a\u6765\u8d8a\u5927\uff0c\u4f60\u53ef\u80fd\u4f1a\u9700\u8981\u66f4\u52a0\u96c6\u6210\u5316\u7684\u5b89\u88c5\u65b9\u5f0f\u3002\u6211\u4eec\u63a8\u8350\u4e86\u4e00\u4e9b JavaScript \u5de5\u5177\u94fe\uff0c\u5b83\u4eec\u9002\u5408\u5927\u578b\u5e94\u7528\u3002\u5b83\u4eec\u53ea\u9700\u5f88\u5c11\u751a\u81f3\u96f6\u914d\u7f6e\uff0c\u5c31\u80fd\u8ba9\u4f60\u5145\u5206\u5229\u7528\u4e30\u5bcc\u7684 React \u751f\u6001\u3002<a href=\"/react/create-a-new-react-app\">\u7acb\u5373\u5c1d\u8bd5</a>\u3002</p>\n<h2 id=\"learn-react\"><a class=\"anchor\" href=\"/react/getting-started#learn-react\"></a>\u5b66\u4e60 React </h2>\n<p>\u5b66\u4e60 React \u7684\u4eba\u6709\u7740\u4e0d\u540c\u7684\u77e5\u8bc6\u80cc\u666f\u548c\u5b66\u4e60\u65b9\u5f0f\uff0c\u4e0d\u7ba1\u4f60\u662f\u7406\u8bba\u6d3e\u8fd8\u662f\u5b9e\u8df5\u6d3e\uff0c\u6211\u4eec\u5e0c\u671b\u8be5\u7ae0\u8282\u5185\u5bb9\u5bf9\u4f60\u6709\u5e2e\u52a9\u3002</p>\n<ul>\n<li>\u5982\u679c\u4f60\u559c\u6b22<strong>\u8fb9\u505a\u8fb9\u5b66</strong>\uff0c\u8bf7\u4ece<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//tutorial/tutorial.html\">\u5b9e\u8df5\u6559\u7a0b</a>\u5f00\u59cb\u3002</li>\n<li>\u5982\u679c\u4f60\u559c\u6b22<strong>\u4e00\u6b65\u6b65\u5b66\u4e60\u6982\u5ff5</strong>\uff0c\u8bf7\u4ece <a href=\"/react/hello-world\">Hello World</a> \u5f00\u59cb\u3002</li>\n</ul>\n<p>\u548c\u6240\u6709\u65b0\u6280\u672f\u4e00\u6837\uff0cReact \u4e5f\u6709\u4e00\u6761\u5b66\u4e60\u66f2\u7ebf\u3002\u4f46\u53ea\u8981\u591a\u591a\u5b9e\u8df5\u548c\u4fdd\u6709\u4e00\u70b9\u70b9\u8010\u5fc3\uff0c\u4f60<em>\u7ec8\u5c06</em>\u638c\u63e1\u5b83\u3002</p>\n<h3 id=\"first-examples\"><a class=\"anchor\" href=\"/react/getting-started#first-examples\"></a>\u7b2c\u4e00\u4e2a\u793a\u4f8b </h3>\n<p><a class=\"external-link\" href=\"https://zh-hans.reactjs.org//\">React \u9996\u9875</a>\u5305\u542b\u4e86\u4e00\u4e9b\u53ef\u5728\u7ebf\u7f16\u8f91\u7684\u5c0f\u793a\u4f8b\u3002\u5373\u4f7f\u4f60\u5bf9 React \u5c1a\u4e00\u65e0\u6240\u77e5\uff0c\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u4fee\u6539\u4ee3\u7801\uff0c\u770b\u770b\u7ed3\u679c\u4f1a\u600e\u6837\u3002</p>\n<h3 id=\"react-for-beginners\"><a class=\"anchor\" href=\"/react/getting-started#react-for-beginners\"></a>\u521d\u5b66\u8005\u7684 React </h3>\n<p>\u5982\u679c\u4f60\u89c9\u5f97 React \u5b98\u65b9\u6587\u6863\u8282\u594f\u592a\u5feb\uff0c\u4e0d\u592a\u9002\u5e94\uff0c\u53ef\u4ee5\u5148\u53bb\u770b\u770b\u8fd9\u7bc7 <a class=\"external-link\" href=\"https://www.taniarascia.com/getting-started-with-react/\">Tania Rascia \u7684 React \u6982\u89c8</a>\u3002\u5b83\u4ee5\u65b0\u624b\u53cb\u597d\u7684\u65b9\u5f0f\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u6700\u91cd\u8981\u7684 React \u6982\u5ff5\uff0c\u770b\u5b8c\u8fd9\u7bc7\u6982\u89c8\uff0c\u518d\u56de\u6765\u8bd5\u8bd5\u770b\u5b98\u65b9\u6587\u6863\u5427\uff01</p>\n<h3 id=\"react-for-designers\"><a class=\"anchor\" href=\"/react/getting-started#react-for-designers\"></a>\u8bbe\u8ba1\u5e08\u7684 React </h3>\n<p>\u5982\u679c\u4f60\u6709\u8bbe\u8ba1\u80cc\u666f\uff0c<a class=\"external-link\" href=\"http://reactfordesigners.com/\">\u8fd9\u4e9b\u8d44\u6e90</a>\u662f\u5f88\u597d\u7684\u5f00\u59cb\u3002</p>\n<h3 id=\"javascript-resources\"><a class=\"anchor\" href=\"/react/getting-started#javascript-resources\"></a>JavaScript \u8d44\u6e90 </h3>\n<p>\u9605\u8bfb React \u5b98\u65b9\u6587\u6863\u9700\u8981\u5bf9\u4f7f\u7528 JavaScript \u8bed\u8a00\u7f16\u7a0b\u6709\u4e00\u5b9a\u57fa\u7840\u3002\u4f60\u4e0d\u9700\u8981\u662f\u4e00\u4e2a JavaScript \u7f16\u7a0b\u4e13\u5bb6\uff0c\u4f46\u540c\u65f6\u5b66\u4e60 React \u548c JavaScript \u7f16\u7a0b\u5c06\u4f1a\u6bd4\u8f83\u56f0\u96be\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u4f60\u6d4f\u89c8 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript\">JavaScript \u6982\u89c8</a>\u6765\u8bc4\u4f30\u81ea\u5df1\u7684\u77e5\u8bc6\u6c34\u5e73\u3002\u8fd9\u5c06\u82b1\u8d39\u4f60\u5927\u7ea6 30 \u5206\u949f\u5230 1 \u4e2a\u5c0f\u65f6\uff0c\u4f46\u4e4b\u540e\u5b66\u4e60 React \u4f60\u4f1a\u611f\u89c9\u66f4\u52a0\u81ea\u4fe1\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u5f53\u4f60\u5bf9\u4e00\u4e9b JavaScript \u77e5\u8bc6\u611f\u5230\u7591\u60d1\u65f6\uff0c<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript\">MDN</a> \u548c <a class=\"external-link\" href=\"http://javascript.info/\">javascript.info</a> \u662f\u5f88\u68d2\u7684\u8d44\u6e90\u7f51\u7ad9\u3002\u4f60\u4e5f\u53ef\u4ee5\u53bb<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//community/support.html\">\u793e\u533a\u652f\u6301\u8bba\u575b</a>\u5bfb\u6c42\u5e2e\u52a9\u3002</p>\n</div>\n<h3 id=\"practical-tutorial\"><a class=\"anchor\" href=\"/react/getting-started#practical-tutorial\"></a>\u5b9e\u8df5\u6559\u7a0b </h3>\n<p>\u5982\u679c\u4f60\u559c\u6b22<strong>\u8fb9\u505a\u8fb9\u5b66</strong>\uff0c\u8bf7\u53c2\u8003\u6211\u4eec\u7684<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//tutorial/tutorial.html\">\u5b9e\u8df5\u6559\u7a0b</a>\u3002\u5728\u8fd9\u7bc7\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u7528 React \u6784\u5efa\u4e86\u4e00\u4e2a\u4e95\u5b57\u68cb\u6e38\u620f\u3002\u5373\u4f7f\u4f60\u5bf9\u6e38\u620f\u5f00\u53d1\u5e76\u4e0d\u611f\u5174\u8da3\u800c\u60f3\u8981\u8df3\u8fc7\u8fd9\u90e8\u5206\uff0c\u4f46\u8fd8\u8bf7\u7ed9\u5b83\u4e00\u6b21\u673a\u4f1a\u3002\u8fd9\u7bc7\u6559\u7a0b\u4e2d\u6240\u6d89\u53ca\u7684\u6280\u672f\u662f\u6784\u5efa<em>\u4efb\u4f55</em> React \u5e94\u7528\u7684\u57fa\u7840\uff0c\u638c\u63e1\u5b83\u4eec\u5c06\u8ba9\u4f60\u5bf9 React \u6709\u66f4\u6df1\u7684\u7406\u89e3\u3002</p>\n<h3 id=\"step-by-step-guide\"><a class=\"anchor\" href=\"/react/getting-started#step-by-step-guide\"></a>\u4e00\u6b65\u6b65\u5b66\u4e60\u6307\u5357 </h3>\n<p>\u5982\u679c\u4f60\u559c\u6b22<strong>\u4e00\u6b65\u6b65\u5b66\u4e60\u6982\u5ff5</strong>\uff0c\u6211\u4eec\u7684 <a href=\"/react/hello-world\">\u6838\u5fc3\u6982\u5ff5\u7b80\u4ecb</a> \u662f\u6700\u597d\u7684\u5f00\u59cb\u3002\u6307\u5357\u91cc\u7684\u6bcf\u4e00\u7ae0\u8282\u90fd\u57fa\u4e8e\u524d\u4e00\u7ae0\u8282\u5df2\u5b66\u7684\u5185\u5bb9\uff0c\u8fd9\u6837\u4e00\u6b65\u6b65\u8fc7\u6765\u4f60\u4e0d\u4f1a\u9519\u8fc7\u4efb\u4f55\u77e5\u8bc6\u3002</p>\n<h3 id=\"thinking-in-react\"><a class=\"anchor\" href=\"/react/getting-started#thinking-in-react\"></a>React \u54f2\u5b66 </h3>\n<p>\u5f88\u591a\u7528\u6237\u8ba4\u4e3a\u9605\u8bfb <a href=\"/react/thinking-in-react\">React \u54f2\u5b66</a>\u662f\u4ed6\u4eec\u6700\u7ec8\u5bf9 React \u604d\u7136\u5927\u609f\u7684\u65f6\u523b\u3002\u5b83\u53ef\u80fd\u662f\u6700\u8001\u7684 React \u6559\u7a0b\uff0c\u4f46\u5b83\u4f9d\u7136\u6781\u5177\u4ef7\u503c\u3002</p>\n<h3 id=\"recommended-courses\"><a class=\"anchor\" href=\"/react/getting-started#recommended-courses\"></a>\u63a8\u8350\u8bfe\u7a0b </h3>\n<p>\u76f8\u6bd4\u5b98\u65b9\u6587\u6863\uff0c\u6709\u65f6\u4eba\u4eec\u66f4\u559c\u6b22\u7b2c\u4e09\u65b9\u7684\u4e66\u7c4d\u6216\u89c6\u9891\u8bfe\u7a0b\u3002\u6211\u4eec\u7ef4\u62a4\u4e86\u4e00\u4e2a<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//community/courses.html\">\u63a8\u8350\u8d44\u6e90\u6e05\u5355</a>\uff0c\u5176\u4e2d\u6709\u4e00\u4e9b\u8d44\u6e90\u662f\u514d\u8d39\u7684\u3002</p>\n<h3 id=\"advanced-concepts\"><a class=\"anchor\" href=\"/react/getting-started#advanced-concepts\"></a>\u9ad8\u7ea7\u6982\u5ff5 </h3>\n<p>\u4e00\u65e6\u4f60\u5df2\u7ecf\u719f\u77e5 React \u7684<a href=\"/react/hello-world\">\u4e3b\u8981\u6982\u5ff5</a>\uff0c\u5e76\u4e14\u5df2\u7ecf\u5728\u9879\u76ee\u4e2d\u5c0f\u8bd5\u725b\u5200\uff0c\u4f60\u53ef\u80fd\u4f1a\u5bf9\u66f4\u9ad8\u7ea7\u7684\u8bdd\u9898\u611f\u5174\u8da3\u3002\u8be5\u7ae0\u8282\u5185\u5bb9\u5c06\u4f1a\u4ecb\u7ecd\u4e00\u4e9b\u5f3a\u5927\u4f46\u5e76\u4e0d\u5e38\u7528\u7684 React \u7279\u6027\uff0c\u6bd4\u5982\uff1a<a href=\"/react/context\">context</a> \u548c <a href=\"/react/refs-and-the-dom\">refs</a>\u3002</p>\n<h3 id=\"api-reference\"><a class=\"anchor\" href=\"/react/getting-started#api-reference\"></a>API \u53c2\u8003 </h3>\n<p>\u5f53\u4f60\u60f3\u6df1\u5165\u5b66\u4e60\u7279\u5b9a React API \u7ec6\u8282\u65f6\uff0c\u8be5\u7ae0\u8282\u5c06\u4f1a\u53d8\u5f97\u975e\u5e38\u6709\u7528\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a<a href=\"/react/react-component\"><code class=\"language-javascript\">React.Component</code> API \u53c2\u8003</a>\u80fd\u591f\u4ecb\u7ecd <code class=\"language-javascript\">setState()</code> \u65b9\u6cd5\u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u4ee5\u53ca\u4e0d\u540c\u751f\u547d\u5468\u671f\u65b9\u6cd5\u7684\u4f7f\u7528\u573a\u666f\u3002</p>\n<h3 id=\"glossary-and-faq\"><a class=\"anchor\" href=\"/react/getting-started#glossary-and-faq\"></a>\u672f\u8bed\u8868\u4e0e\u5e38\u89c1\u95ee\u9898 </h3>\n<p><a href=\"/react/glossary\">\u672f\u8bed\u8868</a>\u4e2d\u5305\u542b\u4e86 React \u6587\u6863\u4e2d\u6700\u5e38\u89c1\u672f\u8bed\u7684\u6982\u89c8\u3002\u5e38\u89c1\u95ee\u9898\u7ae0\u8282\u81f4\u529b\u4e8e\u7b80\u77ed\u89e3\u7b54\u4e00\u4e9b\u5927\u5bb6\u666e\u904d\u9047\u5230\u7684\u95ee\u9898\uff0c\u5305\u62ec<a href=\"/react/faq-ajax\">\u53d1\u9001 AJAX \u8bf7\u6c42</a>\uff0c<a href=\"/react/faq-state\">\u7ec4\u4ef6\u72b6\u6001</a>\u4ee5\u53ca<a href=\"/react/faq-structure\">\u6587\u4ef6\u7ed3\u6784</a> \u7b49\u3002</p>\n<h2 id=\"staying-informed\"><a class=\"anchor\" href=\"/react/getting-started#staying-informed\"></a>\u83b7\u53d6\u6700\u65b0\u6d88\u606f </h2>\n<p><a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/\">React \u535a\u5ba2</a>\u662f React \u56e2\u961f\u53d1\u5e03\u66f4\u65b0\u7684\u5b98\u65b9\u6e20\u9053\u3002\u4e00\u5207\u91cd\u8981\u7684\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\u66f4\u65b0\u65e5\u5fd7\uff0c\u5e9f\u5f03\u901a\u77e5\u7b49\uff0c\u90fd\u4f1a\u9996\u5148\u5728\u8fd9\u91cc\u53d1\u5e03\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u5728 Twitter \u4e0a\u5173\u6ce8 <a class=\"external-link\" href=\"https://twitter.com/reactjs\">@reactjs \u8d26\u53f7</a>\u83b7\u53d6\u66f4\u65b0\uff0c\u4f46\u5373\u4f7f\u4e0d\u8fd9\u6837\u505a\uff0c\u4ec5\u901a\u8fc7\u5b98\u65b9\u535a\u5ba2\u4f60\u4e5f\u4e0d\u4f1a\u9519\u8fc7\u4efb\u4f55\u5fc5\u8981\u7684\u4fe1\u606f\u3002</p>\n<p>\u5e76\u975e\u6bcf\u4e00\u4e2a React \u7248\u672c\u90fd\u503c\u5f97\u6211\u4eec\u5728\u535a\u5ba2\u4e0a\u53d1\u5e03\u6587\u7ae0\uff0c\u4f46\u4f60\u53ef\u4ee5\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react/blob/main/CHANGELOG.md\">React \u4ee3\u7801\u4ed3\u5e93\u4e2d\u7684 <code class=\"language-javascript\">CHANGELOG.md</code> \u6587\u4ef6</a>\u6216<a class=\"external-link\" href=\"https://github.com/facebook/react/releases\">\u66f4\u65b0\u65e5\u5fd7\u9875\u9762</a>\u627e\u5230\u6bcf\u4e2a\u7248\u672c\u7684\u66f4\u65b0\u65e5\u5fd7\u3002</p>\n<h2 id=\"versioned-documentation\"><a class=\"anchor\" href=\"/react/getting-started#versioned-documentation\"></a>\u7248\u672c\u5316\u6587\u6863 </h2>\n<p>\u5b98\u65b9\u6587\u6863\u4f1a\u548c\u6700\u65b0\u7a33\u5b9a\u7248\u7684 React \u4fdd\u6301\u540c\u6b65\u3002\u4ece React 16 \u5f00\u59cb\uff0c\u4f60\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//versions\">\u5386\u53f2\u7248\u672c\u9875\u9762</a>\u627e\u5230\u8001\u7248\u672c\u7684 React \u6587\u6863\u3002\u6ce8\u610f\uff0c\u8001\u7248\u672c\u7684\u6587\u6863\u662f\u8be5\u7248\u672c\u53d1\u5e03\u65f6\u7684\u5feb\u7167\uff0c\u5e76\u4e0d\u4f1a\u6301\u7eed\u5730\u66f4\u65b0\u3002</p>\n<h2 id=\"something-missing\"><a class=\"anchor\" href=\"/react/getting-started#something-missing\"></a>\u627e\u4e0d\u5230\u60f3\u8981\u7684\uff1f </h2>\n<p>\u5982\u679c\u4f60\u627e\u4e0d\u5230\u60f3\u8981\u7684\u5185\u5bb9\u6216\u89c9\u5f97\u6587\u6863\u67d0\u4e9b\u5730\u65b9\u8ba9\u4eba\u7591\u60d1\uff0c\u8bf7<a class=\"external-link\" href=\"https://github.com/reactjs/reactjs.org/issues/new\">\u79fb\u6b65\u6587\u6863\u4ed3\u5e93\u63d0\u4ea4 issue</a> \u6216\u5728 Twitter \u4e0a\u63d0\u53ca <a class=\"external-link\" href=\"https://twitter.com/reactjs\">@reactjs \u8d26\u53f7</a>\u3002\u6211\u4eec\u671f\u5f85\u4f60\u7684\u53cd\u9988\uff01</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/getting-started.md\">Edit this page</a></p></div></article>", "path": "/react/getting-started", "nav": ["/react", "/react/add-react-to-a-website"]}, {"key": "\u5728\u7f51\u7ad9\u4e2d\u6dfb\u52a0 React", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u6839\u636e\u9700\u8981\u9009\u62e9\u6027\u5730\u4f7f\u7528 React\u3002</p>\n<p>React \u5728\u8bbe\u8ba1\u4e4b\u521d\u5c31\u53ef\u4ee5\u88ab\u6e10\u8fdb\u5f0f\u9002\u914d\uff0c\u5e76\u4e14<strong>\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u6027\u5730\u4f7f\u7528 React</strong>\u3002\u53ef\u80fd\u4f60\u53ea\u60f3\u5728\u73b0\u6709\u9875\u9762\u4e2d\u201c\u5c40\u90e8\u5730\u6dfb\u52a0\u4ea4\u4e92\u6027\u201d\u3002\u4f7f\u7528 React \u7ec4\u4ef6\u662f\u4e00\u79cd\u4e0d\u9519\u7684\u65b9\u5f0f\u3002</p>\n<p>\u5927\u591a\u6570\u7f51\u7ad9\u4e0d\u662f\u3001\u4e5f\u4e0d\u9700\u8981\u662f\u5355\u9875\u5e94\u7528\u7a0b\u5e8f\u3002\u901a\u8fc7<strong>\u4ec5\u4ec5\u51e0\u884c\u4ee3\u7801\u5e76\u4e14\u65e0\u9700\u4f7f\u7528\u6784\u5efa\u5de5\u5177</strong>\uff0c\u8bd5\u8bd5\u5728\u4f60\u7684\u7f51\u7ad9\u7684\u4e00\u5c0f\u90e8\u5206\u4e2d\u4f7f\u7528 React\u3002\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u9010\u6b65\u6269\u5c55\u5b83\u7684\u5b58\u5728\uff0c\u6216\u53ea\u5c06\u5176\u6db5\u76d6\u5728\u5c11\u6570\u52a8\u6001\u90e8\u4ef6\u4e2d\u3002</p>\n\n<ul>\n<li><a href=\"/react/add-react-to-a-website#add-react-in-one-minute\">\u4e00\u5206\u949f\u7528\u4e0a React</a></li>\n<li><a href=\"/react/add-react-to-a-website#optional-try-react-with-jsx\">\u53ef\u9009\uff1a\u4f7f\u7528 React \u548c JSX</a> (\u4e0d\u9700\u8981\u6253\u5305\u5de5\u5177\uff01)</li>\n</ul>\n<h2 id=\"add-react-in-one-minute\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#add-react-in-one-minute\"></a>\u4e00\u5206\u949f\u7528\u4e0a React </h2>\n<p>\u5728\u672c\u5c0f\u8282\u4e2d\uff0c\u6211\u4eec\u4f1a\u5c55\u793a\u5982\u4f55\u5c06 React \u7ec4\u4ef6\u6dfb\u52a0\u5230\u73b0\u6709\u7684 HTML \u9875\u9762\u4e2d\u3002\u4f60\u53ef\u4ee5\u57fa\u4e8e\u81ea\u5df1\u73b0\u6709\u7684\u7f51\u7ad9\uff0c\u6216\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684 HTML \u6587\u4ef6\u6765\u7ec3\u4e60\u3002</p>\n<p>\u4e0d\u4f1a\u6d89\u53ca\u590d\u6742\u7684\u5de5\u5177\u6216\u5b89\u88c5\u9700\u6c42 \u2014\u2014 <strong>\u5b8c\u6210\u8fd9\u4e00\u8282\u7684\u5185\u5bb9\uff0c\u4f60\u53ea\u9700\u8981\u8fde\u63a5\u5230\u7f51\u7edc\uff0c\u4ee5\u53ca\u4e00\u5206\u949f\u7684\u65f6\u95f4\u3002</strong></p>\n<p>\u53ef\u9009\uff1a<a class=\"external-link\" href=\"https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605/archive/87f0b6f34238595b44308acfb86df6ea43669c08.zip\">\u4e0b\u8f7d\u5b8c\u6574\u793a\u4f8b\uff082KB \u538b\u7f29\u5305\uff09</a></p>\n<h3 id=\"step-1-add-a-dom-container-to-the-html\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#step-1-add-a-dom-container-to-the-html\"></a>\u6b65\u9aa4 1\uff1a \u6dfb\u52a0\u4e00\u4e2a DOM \u5bb9\u5668\u5230 HTML </h3>\n<p>\u9996\u5148\uff0c\u6253\u5f00\u4f60\u60f3\u8981\u7f16\u8f91\u7684 HTML \u9875\u9762\u3002\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u7684 <code class=\"language-javascript\">&lt;div&gt;</code> \u6807\u7b7e\u4f5c\u4e3a\u6807\u8bb0\u4f60\u60f3\u8981\u7528 React \u663e\u793a\u5185\u5bb9\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token comment\">&lt;!-- ... \u5176\u5b83 HTML ... --&gt;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>like_button_container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span>\n<span class=\"token comment\">&lt;!-- ... \u5176\u5b83 HTML ... --&gt;</span></code></pre></div>\n<p>\u6211\u4eec\u7ed9\u8fd9\u4e2a <code class=\"language-javascript\">&lt;div&gt;</code> \u52a0\u4e0a\u552f\u4e00\u7684 <code class=\"language-javascript\">id</code> HTML \u5c5e\u6027\u3002\u8fd9\u5c06\u5141\u8bb8\u6211\u4eec\u7a0d\u540e\u7528 JavaScript \u4ee3\u7801\u627e\u5230\u5b83\uff0c\u5e76\u5728\u5176\u4e2d\u663e\u793a\u4e00\u4e2a React \u7ec4\u4ef6\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u4f60\u53ef\u4ee5\u50cf\u8fd9\u6837\u5728 <code class=\"language-javascript\">&lt;body&gt;</code> \u6807\u7b7e\u5185\u7684<strong>\u4efb\u610f\u4f4d\u7f6e</strong>\u653e\u7f6e\u4e00\u4e2a\u201c\u5bb9\u5668\u201d <code class=\"language-javascript\">&lt;div&gt;</code>\u3002\u6839\u636e\u9700\u8981\uff0c\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u9875\u9762\u4e0a\u653e\u7f6e\u591a\u4e2a\u72ec\u7acb\u7684 DOM \u5bb9\u5668\u3002\u5b83\u4eec\u901a\u5e38\u662f\u7a7a\u6807\u7b7e \u2014\u2014 React \u4f1a\u66ff\u6362 DOM \u5bb9\u5668\u5185\u7684\u4efb\u4f55\u5df2\u6709\u5185\u5bb9\u3002</p>\n</div>\n<h3 id=\"step-2-add-the-script-tags\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#step-2-add-the-script-tags\"></a>\u6b65\u9aa4 2\uff1a\u6dfb\u52a0 Script \u6807\u7b7e </h3>\n<p>\u63a5\u4e0b\u6765\uff0c\u5728 <code class=\"language-javascript\">&lt;/body&gt;</code> \u7ed3\u675f\u6807\u7b7e\u4e4b\u524d\uff0c\u5411 HTML \u9875\u9762\u4e2d\u6dfb\u52a0\u4e09\u4e2a <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\">  <span class=\"token comment\">&lt;!-- ... \u5176\u5b83 HTML ... --&gt;</span>\n\n  <span class=\"token comment\">&lt;!-- \u52a0\u8f7d React\u3002--&gt;</span>\n  <span class=\"token comment\">&lt;!-- \u6ce8\u610f: \u90e8\u7f72\u65f6\uff0c\u5c06 \"development.js\" \u66ff\u6362\u4e3a \"production.min.js\"\u3002--&gt;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react@18/umd/react.development.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react-dom@18/umd/react-dom.development.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></span>\n  <span class=\"token comment\">&lt;!-- \u52a0\u8f7d\u6211\u4eec\u7684 React \u7ec4\u4ef6\u3002--&gt;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>like_button.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u524d\u4e24\u4e2a\u6807\u7b7e\u52a0\u8f7d React\u3002\u7b2c\u4e09\u4e2a\u5c06\u52a0\u8f7d\u4f60\u7684\u7ec4\u4ef6\u4ee3\u7801\u3002</p>\n<h3 id=\"step-3-create-a-react-component\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#step-3-create-a-react-component\"></a>\u6b65\u9aa4 3\uff1a\u521b\u5efa\u4e00\u4e2a React \u7ec4\u4ef6 </h3>\n<p>\u5728 HTML \u9875\u9762\u6587\u4ef6\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">like_button.js</code> \u7684\u6587\u4ef6\u3002</p>\n<p>\u67e5\u770b<strong><a class=\"external-link\" href=\"https://gist.github.com/gaearon/0b180827c190fe4fd98b4c7f570ea4a8/raw/b9157ce933c79a4559d2aa9ff3372668cce48de7/LikeButton.js\">\u8fd9\u6bb5\u6a21\u677f\u4ee3\u7801</a></strong>\u5e76\u628a\u5b83\u7c98\u8d34\u5230\u4f60\u521b\u5efa\u7684\u6587\u4ef6\u4e2d\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">LikeButton</code> \u7684 React \u7ec4\u4ef6\u3002\u5982\u679c\u4f60\u8fd8\u4e0d\u660e\u767d\u8fd9\u6bb5\u4ee3\u7801\u7684\u610f\u601d\uff0c\u4e0d\u7528\u62c5\u5fc3 \u2014\u2014 \u6211\u4eec\u5c06\u5728\u540e\u7eed\u7684<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//tutorial/tutorial.html\">\u5165\u95e8\u6559\u7a0b</a>\u548c<a href=\"/react/hello-world\">\u6838\u5fc3\u6982\u5ff5</a>\u4e2d\u4ecb\u7ecd React \u7684\u6784\u5efa\u5757\u3002\u76ee\u524d\uff0c\u6211\u4eec\u5148\u53ea\u505a\u5230\u663e\u793a\uff01</p>\n</div>\n<p>\u5728 <code class=\"language-javascript\">like_button.js</code> \u7684\u5e95\u90e8\uff0c\u5728<strong><a class=\"external-link\" href=\"https://gist.github.com/gaearon/0b180827c190fe4fd98b4c7f570ea4a8/raw/b9157ce933c79a4559d2aa9ff3372668cce48de7/LikeButton.js\">\u6a21\u677f\u4ee3\u7801</a></strong>\u4e4b\u540e\uff0c\u52a0\u5165\u4ee5\u4e0b\u4e09\u884c\u4ee3\u7801\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// ... \u6b64\u524d\u7c98\u8d34\u7684\u4ee3\u7801 ...</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> domContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#like_button_container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>domContainer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span>LikeButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>\u8fd9\u4e09\u884c\u4ee3\u7801\u4f1a\u627e\u5230\u6211\u4eec\u5728\u6b65\u9aa4 1 \u4e2d\u6dfb\u52a0\u5728 HTML \u91cc\u7684 <code class=\"language-javascript\">&lt;div&gt;</code>\uff0c\u7528\u5b83\u521b\u5efa\u4e00\u4e2a React \u5e94\u7528\uff0c\u7136\u540e\u5728\u5176\u5185\u90e8\u663e\u793a\u6211\u4eec \u201cLike\u201d \u6309\u94ae\u7684 React \u7ec4\u4ef6\u3002</p>\n<h3 id=\"thats-it\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#thats-it\"></a>\u5c31\u662f\u8fd9\u4e48\u7b80\u5355\uff01 </h3>\n<p>\u6ca1\u6709\u7b2c\u56db\u6b65\u4e86\u3002<strong>\u4f60\u521a\u521a\u5df2\u7ecf\u5c06\u7b2c\u4e00\u4e2a React \u7ec4\u4ef6\u6dfb\u52a0\u5230\u4f60\u7684\u7f51\u7ad9\u4e2d\u3002</strong></p>\n<p>\u67e5\u770b\u540e\u7eed\u5c0f\u8282\uff0c\u4ee5\u4fbf\u67e5\u770b\u5173\u4e8e\u96c6\u6210 React \u7684\u66f4\u591a\u63d0\u793a\u3002</p>\n<p><strong><a class=\"external-link\" href=\"https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605\">\u67e5\u770b\u5b8c\u6574\u7684\u793a\u4f8b\u6e90\u7801</a></strong></p>\n<p><strong><a class=\"external-link\" href=\"https://gist.github.com/gaearon/6668a1f6986742109c00a581ce704605/archive/87f0b6f34238595b44308acfb86df6ea43669c08.zip\">\u4e0b\u8f7d\u5b8c\u6574\u793a\u4f8b\uff082KB \u538b\u7f29\u5305\uff09</a></strong></p>\n<h3 id=\"tip-reuse-a-component\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#tip-reuse-a-component\"></a>\u63d0\u793a\uff1a\u91cd\u7528\u4e00\u4e2a\u7ec4\u4ef6 </h3>\n<p>\u901a\u5e38\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5728 HTML \u9875\u9762\u7684\u591a\u4e2a\u4f4d\u7f6e\u5c55\u793a React \u7ec4\u4ef6\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5b83\u663e\u793a\u4e86\u4e09\u6b21 \u201cLike\u201d \u6309\u94ae\uff0c\u5e76\u5411\u5404\u81ea\u4f20\u5165\u4e86\u4e00\u4e9b\u6570\u636e\uff1a</p>\n<p><a class=\"external-link\" href=\"https://gist.github.com/gaearon/faa67b76a6c47adbab04f739cba7ceda\">\u67e5\u770b\u5b8c\u6574\u7684\u793a\u4f8b\u6e90\u7801</a></p>\n<p><a class=\"external-link\" href=\"https://gist.github.com/gaearon/faa67b76a6c47adbab04f739cba7ceda/archive/279839cb9891bd41802ebebc5365e9dec08eeb9f.zip\">\u4e0b\u8f7d\u5b8c\u6574\u793a\u4f8b\uff082KB \u538b\u7f29\u5305\uff09</a></p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5f53\u9875\u9762\u4e2d\u4ee5 React \u9a71\u52a8\u7684\u4e0d\u540c\u90e8\u5206\u662f\u76f8\u4e92\u72ec\u7acb\u7684\u65f6\u5019\uff0c\u8fd9\u79cd\u7b56\u7565\u901a\u5e38\u975e\u5e38\u6709\u7528\u3002\u5728 React \u4ee3\u7801\u4e2d\uff0c\u4f7f\u7528<a href=\"/react/components-and-props#composing-components\">\u7ec4\u4ef6\u7ec4\u5408\uff08component composition\uff09</a> \u6765\u5b9e\u73b0\u4f1a\u66f4\u5bb9\u6613\u3002</p>\n</div>\n<h3 id=\"tip-minify-javascript-for-production\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#tip-minify-javascript-for-production\"></a>\u63d0\u793a\uff1a\u4e3a\u751f\u4ea7\u73af\u5883\u538b\u7f29 JavaScript \u4ee3\u7801 </h3>\n<p>\u5728\u5c06\u4f60\u7684\u7f51\u7ad9\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u4e4b\u524d\uff0c\u8981\u6ce8\u610f\u672a\u7ecf\u538b\u7f29\u7684 JavaScript \u53ef\u80fd\u4f1a\u663e\u8457\u964d\u4f4e\u7528\u6237\u7684\u8bbf\u95ee\u901f\u5ea6\u3002</p>\n<p>\u5982\u679c\u4f60\u5df2\u7ecf\u538b\u7f29\u4e86\u5e94\u7528\u4ee3\u7801\uff0c\u5982\u679c\u4f60\u786e\u4fdd\u5df2\u90e8\u7f72\u7684 HTML \u52a0\u8f7d\u4e86\u4ee5 <code class=\"language-javascript\">production.min.js</code> \u7ed3\u5c3e\u7684 React \u7248\u672c\uff0c\u90a3\u4e48<strong>\u4f60\u7684\u7f51\u7ad9\u662f\u751f\u4ea7\u5c31\u7eea\uff08production-ready\uff09\u7684</strong>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react@18/umd/react.production.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react-dom@18/umd/react-dom.production.min.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5982\u679c\u4f60\u6ca1\u6709\u4e00\u4e2a\u4ee3\u7801\u538b\u7f29\u7684\u6b65\u9aa4\uff0c<a class=\"external-link\" href=\"https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3\">\u8fd9\u6709\u4e00\u4e2a\u914d\u7f6e\u5b83\u7684\u65b9\u5f0f</a>\u3002</p>\n<h2 id=\"optional-try-react-with-jsx\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#optional-try-react-with-jsx\"></a>\u53ef\u9009\uff1a\u4f7f\u7528 React \u548c JSX </h2>\n<p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u53ea\u4f9d\u8d56\u4e86\u6d4f\u89c8\u5668\u539f\u751f\u652f\u6301\u7684\u7279\u6027\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u4f7f\u7528\u4e86 JavaScript \u51fd\u6570\u8c03\u7528\u6765\u544a\u8bc9 React \u8981\u663e\u793a\u4ec0\u4e48\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> e <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span>createElement<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u663e\u793a\u4e00\u4e2a \"Like\" &lt;button&gt;</span>\n<span class=\"token keyword\">return</span> <span class=\"token function\">e</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token function-variable function\">onClick</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">liked</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'Like'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7136\u800c\uff0cReact \u8fd8\u63d0\u4f9b\u4e86\u4e00\u79cd\u4f7f\u7528 <a href=\"/react/introducing-jsx\">JSX</a> \u7f16\u5199\u754c\u9762\u7684\u65b9\u5f0f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u663e\u793a\u4e00\u4e2a \"Like\" &lt;button&gt;</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">liked</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    Like\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u4e24\u6bb5\u4ee3\u7801\u662f\u7b49\u4ef7\u7684\u3002\u867d\u7136 <strong>JSX <a href=\"/react/react-without-jsx\">\u5b8c\u5168\u662f\u53ef\u9009\u7684</a></strong>\uff0c\u4f46\u662f\u591a\u6570\u4eba\u89c9\u5f97\u8fd9\u6837\u7f16\u5199 UI \u4ee3\u7801\u66f4\u65b9\u4fbf \u2014\u2014 \u65e0\u8bba\u662f\u4f7f\u7528 React \u8fd8\u662f\u5176\u5b83\u5e93\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7<a class=\"external-link\" href=\"https://babeljs.io/en/repl#?babili=false&amp;browsers=&amp;build=&amp;builtIns=false&amp;spec=false&amp;loose=false&amp;code_lz=DwIwrgLhD2B2AEcDCAbAlgYwNYF4DeAFAJTw4B88EAFmgM4B0tAphAMoQCGETBe86WJgBMAXJQBOYJvAC-RGWQBQ8FfAAyaQYuAB6cFDhkgA&amp;debug=false&amp;forceAllTransforms=false&amp;shippedProposals=false&amp;circleciRepo=&amp;evaluate=false&amp;fileSize=false&amp;timeTravel=false&amp;sourceType=module&amp;lineWrap=true&amp;presets=es2015%2Creact%2Cstage-2&amp;prettier=false&amp;targets=&amp;version=7.15.7\">\u5728\u7ebf\u7f16\u8bd1\u5668</a>\u8bd5\u7528 JSX\u3002</p>\n<h3 id=\"quickly-try-jsx\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#quickly-try-jsx\"></a>\u5feb\u901f\u5c1d\u8bd5 JSX </h3>\n<p>\u5728\u9879\u76ee\u4e2d\u5c1d\u8bd5 JSX \u6700\u5feb\u7684\u65b9\u6cd5\u662f\u5728\u9875\u9762\u4e2d\u6dfb\u52a0\u8fd9\u4e2a <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u73b0\u5728\uff0c\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u5185\u4f7f\u7528 JSX\uff0c\u65b9\u6cd5\u662f\u5728\u4e3a\u5176\u6dfb\u52a0 <code class=\"language-javascript\">type=\"text/babel\"</code> \u5c5e\u6027\u3002\u8fd9\u662f<a class=\"external-link\" href=\"https://raw.githubusercontent.com/reactjs/reactjs.org/main/static/html/single-file-example.html\">\u4e00\u4e2a\u4f7f\u7528\u4e86 JSX \u7684 HTML \u6587\u4ef6\u7684\u4f8b\u5b50</a>\uff0c\u4f60\u53ef\u4ee5\u4e0b\u8f7d\u5e76\u5c1d\u8bd5\u4f7f\u7528\u3002</p>\n<p>\u8fd9\u79cd\u65b9\u5f0f\u9002\u5408\u4e8e\u5b66\u4e60\u548c\u521b\u5efa\u7b80\u5355\u7684\u793a\u4f8b\u3002\u7136\u800c\uff0c\u5b83\u4f1a\u4f7f\u4f60\u7684\u7f51\u7ad9\u53d8\u6162\uff0c\u5e76\u4e14<strong>\u4e0d\u9002\u7528\u4e8e\u751f\u4ea7\u73af\u5883</strong>\u3002\u5f53\u4f60\u51c6\u5907\u597d\u66f4\u8fdb\u4e00\u6b65\u65f6\uff0c\u5220\u9664\u4f60\u6dfb\u52a0\u7684\u8fd9\u4e2a\u65b0\u7684 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u4ee5\u53ca<code class=\"language-javascript\">type=\"text/babel\"</code> \u5c5e\u6027\u3002\u53d6\u800c\u4ee3\u4e4b\u7684\uff0c\u5728\u4e0b\u4e00\u5c0f\u8282\u4e2d\uff0c\u4f60\u5c06\u8bbe\u7f6e\u4e00\u4e2a JSX \u9884\u5904\u7406\u5668\u6765\u81ea\u52a8\u8f6c\u6362\u6240\u6709 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u7684\u5185\u5bb9\u3002</p>\n<h3 id=\"add-jsx-to-a-project\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#add-jsx-to-a-project\"></a>\u5c06 JSX \u6dfb\u52a0\u5230\u9879\u76ee </h3>\n<p>\u5c06 JSX \u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\u5e76\u4e0d\u9700\u8981\u8bf8\u5982\u6253\u5305\u5de5\u5177\u6216\u5f00\u53d1\u670d\u52a1\u5668\u90a3\u6837\u590d\u6742\u7684\u5de5\u5177\u3002\u672c\u8d28\u4e0a\uff0c\u6dfb\u52a0 JSX <strong>\u5c31\u50cf\u6dfb\u52a0 CSS \u9884\u5904\u7406\u5668\u4e00\u6837</strong>\u3002\u552f\u4e00\u7684\u8981\u6c42\u662f\u4f60\u5728\u8ba1\u7b97\u673a\u4e0a\u5b89\u88c5\u4e86 <a class=\"external-link\" href=\"https://nodejs.org/\">Node.js</a>\u3002</p>\n<p>\u5728\u7ec8\u7aef\u4e0a\u8df3\u8f6c\u5230\u4f60\u7684\u9879\u76ee\u6587\u4ef6\u5939\uff0c\u7136\u540e\u7c98\u8d34\u8fd9\u4e24\u4e2a\u547d\u4ee4\uff1a</p>\n<ol>\n<li><strong>\u6b65\u9aa4 1\uff1a</strong> \u6267\u884c <code class=\"language-javascript\">npm init -y</code> \uff08\u5982\u679c\u5931\u8d25\uff0c<a class=\"external-link\" href=\"https://gist.github.com/gaearon/246f6380610e262f8a648e3e51cad40d\">\u8fd9\u662f\u4fee\u590d\u529e\u6cd5</a>\uff09</li>\n<li><strong>\u6b65\u9aa4 2\uff1a</strong> \u6267\u884c <code class=\"language-javascript\">npm install babel-cli@6 babel-preset-react-app@3</code></li>\n</ol>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u6211\u4eec<strong>\u5728\u8fd9\u91cc\u4f7f\u7528 npm \u53ea\u662f\u7528\u6765\u5b89\u88c5 JSX \u9884\u5904\u7406\u5668</strong>\uff0c\u4e4b\u540e\u4f60\u4e0d\u518d\u9700\u8981\u5b83\u3002React \u548c\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u90fd\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u800c\u4e0d\u505a\u4efb\u4f55\u66f4\u6539\u3002</p>\n</div>\n<p>\u606d\u559c\uff01\u4f60\u521a\u521a\u4e3a\u4f60\u7684\u9879\u76ee\u52a0\u5165\u4e86\u4e00\u4e2a<strong>\u751f\u4ea7\u5c31\u7eea\uff08production-ready\uff09\u7684 JSX \u914d\u7f6e\u73af\u5883</strong>\u3002</p>\n<h3 id=\"run-jsx-preprocessor\"><a class=\"anchor\" href=\"/react/add-react-to-a-website#run-jsx-preprocessor\"></a>\u8fd0\u884c JSX \u9884\u5904\u7406\u5668 </h3>\n<p>\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">src</code> \u7684\u6587\u4ef6\u5939\u5e76\u6267\u884c\u8fd9\u4e2a\u7ec8\u7aef\u547d\u4ee4\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-console\"><code class=\"language-javascript\">npx babel --watch src --out-dir . --presets react-app/prod</code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">npx</code> \u4e0d\u662f\u62fc\u5199\u9519\u8bef \u2014\u2014 \u5b83\u662f <a class=\"external-link\" href=\"https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b\">npm 5.2+ \u9644\u5e26\u7684 package \u8fd0\u884c\u5de5\u5177</a>\u3002</p>\n<p>\u5982\u679c\u4f60\u770b\u5230\u4e00\u4e2a\u9519\u8bef\u6d88\u606f\u663e\u793a\u4e3a\uff1a\u201cYou have mistakenly installed the <code class=\"language-javascript\">babel</code> package\u201d\uff0c\u4f60\u53ef\u80fd\u9519\u8fc7\u4e86<a href=\"/react/add-react-to-a-website#add-jsx-to-a-project\">\u4e0a\u4e00\u6b65</a>\u3002\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e2d\u6267\u884c\u5b83\uff0c\u7136\u540e\u91cd\u8bd5\u3002</p>\n</div>\n<p>\u4e0d\u8981\u7b49\u5f85\u5b83\u8fd0\u884c\u7ed3\u675f \u2014\u2014 \u8fd9\u4e2a\u547d\u4ee4\u542f\u52a8\u4e86\u4e00\u4e2a\u5bf9 JSX \u7684\u81ea\u52a8\u76d1\u542c\u5668\u3002</p>\n<p>\u5982\u679c\u6b64\u65f6\u4f60\u7528\u8fd9\u6bb5 <strong><a class=\"external-link\" href=\"https://gist.github.com/gaearon/c8e112dc74ac44aac4f673f2c39d19d1/raw/09b951c86c1bf1116af741fa4664511f2f179f0a/like_button.js\">JSX \u5165\u95e8\u4ee3\u7801</a></strong>\u521b\u5efa\u4e00\u4e2a <code class=\"language-javascript\">src/like_button.js</code> \u6587\u4ef6\uff0c\u76d1\u542c\u5668\u4f1a\u521b\u5efa\u4e00\u4e2a\u9884\u5904\u7406\u8fc7\u7684 <code class=\"language-javascript\">like_button.js</code> \u6587\u4ef6\uff0c\u5b83\u5305\u542b\u4e86\u9002\u7528\u4e8e\u6d4f\u89c8\u5668\u7684\u666e\u901a JavaScript \u4ee3\u7801\u3002\u5f53\u4f60\u7f16\u8f91\u5e26\u6709 JSX \u7684\u6e90\u6587\u4ef6\u65f6\uff0c\u8f6c\u6362\u8fc7\u7a0b\u5c06\u81ea\u52a8\u91cd\u65b0\u6267\u884c\u3002</p>\n<p>\u8fd9\u6837\uff0c\u5728\u65e7\u6d4f\u89c8\u5668\u4e0a\u4e5f\u80fd\u591f\u4f7f\u7528\u73b0\u4ee3 JavaScript \u7684\u8bed\u6cd5\u7279\u6027\uff0c\u6bd4\u5982 class\u3002\u6211\u4eec\u521a\u624d\u4f7f\u7528\u7684\u5de5\u5177\u53eb Babel\uff0c\u4f60\u53ef\u4ee5\u4ece<a class=\"external-link\" href=\"https://babeljs.io/docs/en/babel-cli/\">\u5b83\u7684\u6587\u6863</a>\u4e2d\u4e86\u89e3\u66f4\u591a\u3002</p>\n<p>\u5982\u679c\u4f60\u8ba4\u4e3a\u4f60\u5df2\u7ecf\u4e60\u60ef\u4e86\u6784\u5efa\u5de5\u5177\uff0c\u5e76\u5e0c\u671b\u5b83\u4eec\u80fd\u4e3a\u4f60\u505a\u66f4\u591a\u4e8b\uff0c<a href=\"/react/create-a-new-react-app\">\u4e0b\u4e00\u7ae0\u8282</a>\u63cf\u8ff0\u4e86\u4e00\u4e9b\u6700\u6d41\u884c\u548c\u6613\u4e0a\u624b\u7684\u5de5\u5177\u94fe\u3002\u5982\u679c\u4e0d\u4f7f\u7528\u6784\u5efa\u5de5\u5177 \u2014\u2014 \u76f4\u63a5\u4ee5 scripts \u6807\u7b7e\u7684\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u5f88\u597d\u5730\u5b8c\u6210\u5de5\u4f5c\uff01</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/add-react-to-a-website.md\">Edit this page</a></p></div></article>", "path": "/react/add-react-to-a-website", "nav": ["/react/getting-started", "/react/create-a-new-react-app"]}, {"key": "\u521b\u5efa\u65b0\u7684 React \u5e94\u7528", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u4f7f\u7528\u96c6\u6210\u7684\u5de5\u5177\u94fe\uff0c\u4ee5\u5b9e\u73b0\u6700\u4f73\u7684\u7528\u6237\u548c\u5f00\u53d1\u4eba\u5458\u4f53\u9a8c\u3002</p>\n<p>\u672c\u9875\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u6d41\u884c\u7684 React \u5de5\u5177\u94fe\uff0c\u5b83\u4eec\u6709\u52a9\u4e8e\u5b8c\u6210\u5982\u4e0b\u4efb\u52a1\uff1a</p>\n<ul>\n<li>\u6269\u5c55\u6587\u4ef6\u548c\u7ec4\u4ef6\u7684\u89c4\u6a21\u3002</li>\n<li>\u4f7f\u7528\u6765\u81ea npm \u7684\u7b2c\u4e09\u65b9\u5e93\u3002</li>\n<li>\u5c3d\u65e9\u53d1\u73b0\u5e38\u89c1\u9519\u8bef\u3002</li>\n<li>\u5728\u5f00\u53d1\u4e2d\u5b9e\u65f6\u7f16\u8f91 CSS \u548c JS\u3002</li>\n<li>\u4f18\u5316\u751f\u4ea7\u8f93\u51fa\u3002</li>\n</ul>\n<p>\u672c\u9875\u63a8\u8350\u7684\u5de5\u5177\u94fe<strong>\u65e0\u9700\u914d\u7f6e\u5373\u53ef\u5f00\u59cb\u4f7f\u7528</strong>\u3002</p>\n<h2 id=\"you-might-not-need-a-toolchain\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#you-might-not-need-a-toolchain\"></a>\u4f60\u53ef\u80fd\u4e0d\u9700\u8981\u5de5\u5177\u94fe </h2>\n<p>\u5982\u679c\u4f60\u6ca1\u6709\u78b0\u5230\u4e0a\u8ff0\u7684\u95ee\u9898\uff0c\u6216\u8005\u8fd8\u4e0d\u4e60\u60ef\u4f7f\u7528 JavaScript \u5de5\u5177\uff0c\u53ef\u4ee5\u8003\u8651<a href=\"/react/add-react-to-a-website\">\u628a React \u4f5c\u4e3a\u666e\u901a\u7684 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u8bb0\u6dfb\u52a0\u5230 HTML \u9875\u9762\u4e0a</a>\uff0c\u4ee5\u53ca<a href=\"/react/add-react-to-a-website#optional-try-react-with-jsx\">\u4f7f\u7528\u53ef\u9009\u7684 JSX</a>\u3002</p>\n<p>\u8fd9\u4e5f\u662f<strong>\u5c06 React \u96c6\u6210\u5230\u73b0\u6709\u7f51\u7ad9\u6700\u7b80\u5355\u7684\u65b9\u5f0f</strong>\u3002\u5982\u679c\u4f60\u8ba4\u4e3a\u66f4\u5927\u7684\u5de5\u5177\u94fe\u6709\u6240\u5e2e\u52a9\uff0c\u53ef\u4ee5\u968f\u65f6\u6dfb\u52a0\uff01</p>\n<h2 id=\"recommended-toolchains\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#recommended-toolchains\"></a>\u63a8\u8350\u7684\u5de5\u5177\u94fe </h2>\n<p>React \u56e2\u961f\u4e3b\u8981\u63a8\u8350\u8fd9\u4e9b\u89e3\u51b3\u65b9\u6848\uff1a</p>\n<ul>\n<li>\u5982\u679c\u4f60\u662f\u5728<strong>\u5b66\u4e60 React</strong> \u6216<strong>\u521b\u5efa\u4e00\u4e2a\u65b0\u7684<a href=\"/react/glossary#single-page-application\">\u5355\u9875</a>\u5e94\u7528</strong>\uff0c\u8bf7\u4f7f\u7528 <a href=\"/react/create-a-new-react-app#create-react-app\">Create React App</a>\u3002</li>\n<li>\u5982\u679c\u4f60\u662f\u5728<strong>\u7528 Node.js \u6784\u5efa\u670d\u52a1\u7aef\u6e32\u67d3\u7684\u7f51\u7ad9</strong>\uff0c\u8bd5\u8bd5 <a href=\"/react/create-a-new-react-app#nextjs\">Next.js</a>\u3002</li>\n<li>\u5982\u679c\u4f60\u662f\u5728\u6784\u5efa<strong>\u5185\u5bb9\u4e3b\u5bfc\u7684\u9759\u6001\u7f51\u7ad9</strong>\uff0c\u8bd5\u8bd5 <a href=\"/react/create-a-new-react-app#gatsby\">Gatsby</a>\u3002</li>\n<li>\u5982\u679c\u4f60\u662f\u5728\u6253\u9020<strong>\u7ec4\u4ef6\u5e93</strong>\u6216<strong>\u5c06 React \u96c6\u6210\u5230\u73b0\u6709\u4ee3\u7801\u4ed3\u5e93</strong>\uff0c\u5c1d\u8bd5<a href=\"/react/create-a-new-react-app#more-flexible-toolchains\">\u66f4\u7075\u6d3b\u7684\u5de5\u5177\u94fe</a>\u3002</li>\n</ul>\n<h3 id=\"create-react-app\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#create-react-app\"></a>Create React App </h3>\n<p><a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> \u662f\u4e00\u4e2a\u7528\u4e8e<strong>\u5b66\u4e60 React</strong> \u7684\u8212\u9002\u73af\u5883\uff0c\u4e5f\u662f\u7528 React \u521b\u5efa<strong>\u65b0\u7684<a href=\"/react/glossary#single-page-application\">\u5355\u9875</a>\u5e94\u7528</strong>\u7684\u6700\u4f73\u65b9\u5f0f\u3002</p>\n<p>\u5b83\u4f1a\u914d\u7f6e\u4f60\u7684\u5f00\u53d1\u73af\u5883\uff0c\u4ee5\u4fbf\u4f7f\u4f60\u80fd\u591f\u4f7f\u7528\u6700\u65b0\u7684 JavaScript \u7279\u6027\uff0c\u63d0\u4f9b\u826f\u597d\u7684\u5f00\u53d1\u4f53\u9a8c\uff0c\u5e76\u4e3a\u751f\u4ea7\u73af\u5883\u4f18\u5316\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u4f60\u9700\u8981\u5728\u4f60\u7684\u673a\u5668\u4e0a\u5b89\u88c5 <a class=\"external-link\" href=\"https://nodejs.org/en/\">Node &gt;= 14.0.0 \u548c npm &gt;= 5.6</a>\u3002\u8981\u521b\u5efa\u9879\u76ee\uff0c\u8bf7\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\">npx create-react-app my-app\n<span class=\"token builtin class-name\">cd</span> my-app\n<span class=\"token function\">npm</span> start</code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u7b2c\u4e00\u884c\u7684 <code class=\"language-javascript\">npx</code> \u4e0d\u662f\u62fc\u5199\u9519\u8bef \u2014\u2014 \u5b83\u662f <a class=\"external-link\" href=\"https://medium.com/@maybekatz/introducing-npx-an-npm-package-runner-55f7d4bd282b\">npm 5.2+ \u9644\u5e26\u7684 package \u8fd0\u884c\u5de5\u5177</a>\u3002</p>\n</div>\n<p>Create React App \u4e0d\u4f1a\u5904\u7406\u540e\u7aef\u903b\u8f91\u6216\u64cd\u7eb5\u6570\u636e\u5e93\uff1b\u5b83\u53ea\u662f\u521b\u5efa\u4e00\u4e2a\u524d\u7aef\u6784\u5efa\u6d41\u6c34\u7ebf\uff08build pipeline\uff09\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u914d\u5408\u4efb\u4f55\u4f60\u60f3\u4f7f\u7528\u7684\u540e\u7aef\u3002\u5b83\u5728\u5185\u90e8\u4f7f\u7528 <a class=\"external-link\" href=\"https://babeljs.io/\">Babel</a> \u548c <a class=\"external-link\" href=\"https://webpack.js.org/\">webpack</a>\uff0c\u4f46\u4f60\u65e0\u9700\u4e86\u89e3\u5b83\u4eec\u7684\u4efb\u4f55\u7ec6\u8282\u3002</p>\n<p>\u5f53\u4f60\u51c6\u5907\u597d\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u65f6\uff0c\u6267\u884c <code class=\"language-javascript\">npm run build</code> \u4f1a\u5728 <code class=\"language-javascript\">build</code> \u6587\u4ef6\u5939\u5185\u751f\u6210\u4f60\u5e94\u7528\u7684\u4f18\u5316\u7248\u672c\u3002\u4f60\u80fd<a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app#create-react-app--\">\u4ece\u5b83\u7684 README</a> \u548c<a class=\"external-link\" href=\"https://facebook.github.io/create-react-app/\">\u7528\u6237\u6307\u5357</a>\u4e86\u89e3 Create React App \u7684\u66f4\u591a\u4fe1\u606f\u3002</p>\n<h3 id=\"nextjs\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#nextjs\"></a>Next.js </h3>\n<p><a class=\"external-link\" href=\"https://nextjs.org/\">Next.js</a> \u662f\u4e00\u4e2a\u6d41\u884c\u7684\u3001\u8f7b\u91cf\u7ea7\u7684\u6846\u67b6\uff0c\u7528\u4e8e\u914d\u5408 React \u6253\u9020<strong>\u9759\u6001\u5316\u548c\u670d\u52a1\u7aef\u6e32\u67d3\u5e94\u7528</strong>\u3002\u5b83\u5305\u62ec\u5f00\u7bb1\u5373\u7528\u7684<strong>\u6837\u5f0f\u548c\u8def\u7531\u65b9\u6848</strong>\uff0c\u5e76\u4e14\u5047\u5b9a\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://nodejs.org/\">Node.js</a> \u4f5c\u4e3a\u670d\u52a1\u5668\u73af\u5883\u3002</p>\n<p>\u4ece <a class=\"external-link\" href=\"https://nextjs.org/learn/\">Next.js \u7684\u5b98\u65b9\u6307\u5357</a>\u4e86\u89e3\u66f4\u591a\u3002</p>\n<h3 id=\"gatsby\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#gatsby\"></a>Gatsby </h3>\n<p><a class=\"external-link\" href=\"https://www.gatsbyjs.org/\">Gatsby</a> \u662f\u7528 React \u521b\u5efa<strong>\u9759\u6001\u7f51\u7ad9</strong>\u7684\u6700\u4f73\u65b9\u5f0f\u3002\u5b83\u8ba9\u4f60\u80fd\u4f7f\u7528 React \u7ec4\u4ef6\uff0c\u4f46\u8f93\u51fa\u9884\u6e32\u67d3\u7684 HTML \u548c CSS \u4ee5\u4fdd\u8bc1\u6700\u5feb\u7684\u52a0\u8f7d\u901f\u5ea6\u3002</p>\n<p>\u4ece Gatsby \u7684<a class=\"external-link\" href=\"https://www.gatsbyjs.org/docs/\">\u5b98\u65b9\u6307\u5357</a>\u548c<a class=\"external-link\" href=\"https://www.gatsbyjs.org/docs/gatsby-starters/\">\u5165\u95e8\u793a\u4f8b\u96c6</a>\u4e86\u89e3\u66f4\u591a\u3002</p>\n<h3 id=\"more-flexible-toolchains\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#more-flexible-toolchains\"></a>\u66f4\u7075\u6d3b\u7684\u5de5\u5177\u94fe </h3>\n<p>\u4ee5\u4e0b\u5de5\u5177\u94fe\u4e3a React \u63d0\u4f9b\u66f4\u591a\u66f4\u5177\u7075\u6d3b\u6027\u7684\u65b9\u6848\u3002\u63a8\u8350\u7ed9\u66f4\u6709\u7ecf\u9a8c\u7684\u4f7f\u7528\u8005\uff1a</p>\n<ul>\n<li><strong><a class=\"external-link\" href=\"https://neutrinojs.org/\">Neutrino</a></strong> \u628a <a class=\"external-link\" href=\"https://webpack.js.org/\">webpack</a> \u7684\u5f3a\u5927\u529f\u80fd\u548c\u7b80\u5355\u9884\u8bbe\u7ed3\u5408\u5728\u4e00\u8d77\u3002\u5e76\u4e14\u5305\u62ec\u4e86 <a class=\"external-link\" href=\"https://neutrinojs.org/packages/react/\">React \u5e94\u7528</a>\u548c <a class=\"external-link\" href=\"https://neutrinojs.org/packages/react-components/\">React \u7ec4\u4ef6</a>\u7684\u9884\u8bbe\u3002</li>\n<li><strong><a class=\"external-link\" href=\"https://nx.dev/react\">Nx</a></strong> \u662f\u9488\u5bf9\u5168\u6808 monorepo \u7684\u5f00\u53d1\u5de5\u5177\u5305\uff0c\u5176\u5185\u7f6e\u4e86 React\uff0cNext.js\uff0c<a class=\"external-link\" href=\"https://expressjs.com/\">Express</a> \u7b49\u3002</li>\n<li><strong><a class=\"external-link\" href=\"https://parceljs.org/\">Parcel</a></strong> \u662f\u4e00\u4e2a\u5feb\u901f\u7684\u3001\u96f6\u914d\u7f6e\u7684\u7f51\u9875\u5e94\u7528\u6253\u5305\u5668\uff0c\u5e76\u4e14\u53ef\u4ee5<a class=\"external-link\" href=\"https://parceljs.org/recipes/react/\">\u642d\u914d React \u4e00\u8d77\u5de5\u4f5c</a>\u3002</li>\n<li><strong><a class=\"external-link\" href=\"https://github.com/jaredpalmer/razzle\">Razzle</a></strong> \u662f\u4e00\u4e2a\u65e0\u9700\u914d\u7f6e\u7684\u670d\u52a1\u7aef\u6e32\u67d3\u6846\u67b6\uff0c\u4f46\u5b83\u63d0\u4f9b\u4e86\u6bd4 Next.js \u66f4\u591a\u7684\u7075\u6d3b\u6027\u3002</li>\n</ul>\n<h2 id=\"creating-a-toolchain-from-scratch\"><a class=\"anchor\" href=\"/react/create-a-new-react-app#creating-a-toolchain-from-scratch\"></a>\u4ece\u5934\u5f00\u59cb\u6253\u9020\u5de5\u5177\u94fe </h2>\n<p>\u4e00\u7ec4 JavaScript \u6784\u5efa\u5de5\u5177\u94fe\u901a\u5e38\u7531\u8fd9\u4e9b\u7ec4\u6210\uff1a</p>\n<ul>\n<li>\u4e00\u4e2a <strong>package \u7ba1\u7406\u5668</strong>\uff0c\u6bd4\u5982 <a class=\"external-link\" href=\"https://yarnpkg.com/\">Yarn</a> \u6216 <a class=\"external-link\" href=\"https://www.npmjs.com/\">npm</a>\u3002\u5b83\u80fd\u8ba9\u4f60\u5145\u5206\u5229\u7528\u5e9e\u5927\u7684\u7b2c\u4e09\u65b9 package \u7684\u751f\u6001\u7cfb\u7edf\uff0c\u5e76\u4e14\u8f7b\u677e\u5730\u5b89\u88c5\u6216\u66f4\u65b0\u5b83\u4eec\u3002</li>\n<li>\u4e00\u4e2a<strong>\u6253\u5305\u5668</strong>\uff0c\u6bd4\u5982 <a class=\"external-link\" href=\"https://webpack.js.org/\">webpack</a> \u6216 <a class=\"external-link\" href=\"https://parceljs.org/\">Parcel</a>\u3002\u5b83\u80fd\u8ba9\u4f60\u7f16\u5199\u6a21\u5757\u5316\u4ee3\u7801\uff0c\u5e76\u5c06\u5b83\u4eec\u7ec4\u5408\u5728\u4e00\u8d77\u6210\u4e3a\u5c0f\u7684 package\uff0c\u4ee5\u4f18\u5316\u52a0\u8f7d\u65f6\u95f4\u3002</li>\n<li>\u4e00\u4e2a<strong>\u7f16\u8bd1\u5668</strong>\uff0c\u4f8b\u5982 <a class=\"external-link\" href=\"https://babeljs.io/\">Babel</a>\u3002\u5b83\u80fd\u8ba9\u4f60\u7f16\u5199\u7684\u65b0\u7248\u672c JavaScript \u4ee3\u7801\uff0c\u5728\u65e7\u7248\u6d4f\u89c8\u5668\u4e2d\u4f9d\u7136\u80fd\u591f\u5de5\u4f5c\u3002</li>\n</ul>\n<p>\u5982\u679c\u4f60\u503e\u5411\u4e8e\u4ece\u5934\u5f00\u59cb\u6253\u9020\u4f60\u81ea\u5df1\u7684 JavaScript \u5de5\u5177\u94fe\uff0c\u53ef\u4ee5<a class=\"external-link\" href=\"https://blog.usejournal.com/creating-a-react-app-from-scratch-f3c693b84658\">\u67e5\u770b\u8fd9\u4e2a\u6307\u5357</a>\uff0c\u5b83\u91cd\u65b0\u521b\u5efa\u4e86\u4e00\u4e9b Create React App \u7684\u529f\u80fd\u3002</p>\n<p>\u522b\u5fd8\u4e86\u786e\u4fdd\u4f60\u81ea\u5b9a\u4e49\u7684\u5de5\u5177\u94fe<a href=\"/react/optimizing-performance#use-the-production-build\">\u9488\u5bf9\u751f\u4ea7\u73af\u5883\u8fdb\u884c\u4e86\u6b63\u786e\u914d\u7f6e</a>\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/create-a-new-react-app.md\">Edit this page</a></p></div></article>", "path": "/react/create-a-new-react-app", "nav": ["/react/add-react-to-a-website", "/react/cdn-links"]}, {"key": "CDN \u94fe\u63a5", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u53ef\u4ee5\u901a\u8fc7 CDN \u83b7\u5f97 React \u548c ReactDOM \u7684 UMD \u7248\u672c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">crossorigin</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react@18/umd/react.development.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">crossorigin</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react-dom@18/umd/react-dom.development.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4e0a\u8ff0\u7248\u672c\u4ec5\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u4e0d\u9002\u5408\u7528\u4e8e\u751f\u4ea7\u73af\u5883\u3002\u538b\u7f29\u4f18\u5316\u540e\u53ef\u7528\u4e8e\u751f\u4ea7\u7684 React \u7248\u672c\u53ef\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u5f15\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">crossorigin</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react@18/umd/react.production.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">crossorigin</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react-dom@18/umd/react-dom.production.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5982\u679c\u9700\u8981\u52a0\u8f7d\u6307\u5b9a\u7248\u672c\u7684 <code class=\"language-javascript\">react</code> \u548c <code class=\"language-javascript\">react-dom</code>\uff0c\u53ef\u4ee5\u628a <code class=\"language-javascript\">18</code> \u66ff\u6362\u6210\u6240\u9700\u52a0\u8f7d\u7684\u7248\u672c\u53f7\u3002</p>\n<h3 id=\"why-the-crossorigin-attribute\"><a class=\"anchor\" href=\"/react/cdn-links#why-the-crossorigin-attribute\"></a>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528 <code class=\"language-javascript\">crossorigin</code> \u5c5e\u6027? </h3>\n<p>\u5982\u679c\u4f60\u901a\u8fc7 CDN \u7684\u65b9\u5f0f\u5f15\u5165 React\uff0c\u6211\u4eec\u5efa\u8bae\u4f60\u8bbe\u7f6e <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes\"><code class=\"language-javascript\">crossorigin</code></a> \u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">crossorigin</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u6211\u4eec\u540c\u65f6\u5efa\u8bae\u4f60\u9a8c\u8bc1\u4f7f\u7528\u7684 CDN \u662f\u5426\u8bbe\u7f6e\u4e86 <code class=\"language-javascript\">Access-Control-Allow-Origin: *</code> HTTP \u8bf7\u6c42\u5934\uff1a</p>\n<p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/89baed0a6540f29e954065ce04661048/13ae7/cdn-cors-header.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/89baed0a6540f29e954065ce04661048/13ae7/cdn-cors-header.png\">Image link</a>\n</span>\n</span>\n</a>\n</p>\n<p>\u8fd9\u6837\u80fd\u5728 React 16 \u53ca\u4ee5\u4e0a\u7684\u7248\u672c\u4e2d\u6709\u66f4\u597d\u7684<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2017/07/26/error-handling-in-react-16.html\">\u9519\u8bef\u5904\u7406\u4f53\u9a8c</a>\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/cdn-links.md\">Edit this page</a></p></div></article>", "path": "/react/cdn-links", "nav": ["/react/create-a-new-react-app", "/react/release-channels"]}, {"key": "\u53d1\u5e03\u6e20\u9053", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u4f9d\u9760\u5f3a\u5927\u7684\u5f00\u6e90\u793e\u533a\u6536\u96c6 bug \u62a5\u544a\uff0c\u53d1\u8d77 pull request \u548c <a class=\"external-link\" href=\"https://github.com/reactjs/rfcs\">\u63d0\u4ea4 RFC</a>\u3002\u4e3a\u4e86\u9f13\u52b1\u5927\u5bb6\u53cd\u9988\uff0c\u6211\u4eec\u6253\u7b97\u5171\u4eab\u4e00\u4e9b\u7279\u6b8a\u7684 React \u7248\u672c\uff0c\u5176\u4e2d\u5305\u62ec\u672a\u53d1\u5e03\u7684\u529f\u80fd\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6b64\u6587\u7ae0\u4e0e\u4ece\u4e8b\u6846\u67b6\uff0c\u5e93\u6216\u5f00\u53d1\u5de5\u5177\u7684\u5f00\u53d1\u4eba\u5458\u606f\u606f\u76f8\u5173\u3002\u800c\u4e3b\u8981\u4f7f\u7528 React \u6765\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u8005\u65e0\u9700\u62c5\u5fc3\u6b64\u9884\u53d1\u5e03\u6e20\u9053\u3002</strong>\n</div>\n<p>React \u7684\u6bcf\u4e2a\u53d1\u5e03\u6e20\u9053\u90fd\u662f\u9488\u5bf9\u4e0d\u540c\u7684\u7528\u4f8b\u8fdb\u884c\u8bbe\u8ba1\u7684\uff1a</p>\n<ul>\n<li><a href=\"/react/release-channels#latest-channel\"><strong>\u6700\u65b0</strong></a>\u7248\u672c\u7528\u4e8e\u7a33\u5b9a\u7684 semver React \u7248\u672c\u3002\u6b64\u7248\u672c\u53ef\u901a\u8fc7 npm \u5b89\u88c5\u83b7\u53d6\u3002\u6b64\u6e20\u9053\u4e3a\u76ee\u524d\u5927\u5bb6\u5df2\u7ecf\u5728\u7528\u7684\u65b9\u5f0f\u3002<strong>\u5176\u4e3b\u8981\u7528\u4e8e\u6240\u6709\u9762\u5411\u7528\u6237\u7684 React \u5e94\u7528\u7a0b\u5e8f\u3002</strong></li>\n<li><a href=\"/react/release-channels#next-channel\"><strong>Next</strong></a> \u7248\u672c\u4e3b\u8981\u7528\u4e8e\u8ffd\u8e2a React \u6e90\u7801\u4ed3\u5e93\u7684 main \u5206\u652f\u3002\u6211\u4eec\u4f1a\u5c06\u5176\u89c6\u4e3a\u4e0b\u4e00\u4e2a\u6b21\u8981\u7248\u672c\u53d1\u5e03\u7684\u5019\u9009\u7248\u672c\u3002\u4f7f\u7528\u5b83\u53ef\u4ee5\u8fdb\u884c React \u4e0e\u7b2c\u4e09\u65b9\u9879\u76ee\u95f4\u7684\u96c6\u6210\u6d4b\u8bd5\u3002</li>\n<li><a href=\"/react/release-channels#experimental-channel\"><strong>\u5b9e\u9a8c\u9636\u6bb5</strong></a>\u7248\u672c\u5305\u542b\u7a33\u5b9a\u7248\u672c\u4e2d\u4e0d\u63d0\u4f9b\u7684\u5b9e\u9a8c\u9636\u6bb5\u7684 API \u4e0e\u529f\u80fd\u3002\u540c\u65f6\u5b83\u4e5f\u8ffd\u8e2a\u4e86 main \u5206\u652f\uff0c\u4f46\u542f\u7528\u4e86\u9644\u52a0\u65b0\u529f\u80fd\u7684\u6807\u5fd7\u3002\u4f7f\u7528\u6b64\u6e20\u9053\u53ef\u4ee5\u5c1d\u8bd5\u5373\u5c06\u53d1\u5e03\u7684\u529f\u80fd\u3002</li>\n</ul>\n<p>\u6240\u6709\u7248\u672c\u90fd\u5c06\u53d1\u5e03\u5230 npm\uff0c\u4f46\u53ea\u6709\u6700\u65b0\u7248\u672c\u9075\u5faa<a href=\"/react/faq-versioning\">\u8bed\u4e49\u7248\u672c\u63a7\u5236</a>\u3002\u9884\u53d1\u5e03\u7248\u672c\uff08\u5e94\u7528\u4e8e Next \u548c\u5b9e\u9a8c\u6e20\u9053\u7684\u7248\u672c\uff09\u4f1a\u6839\u636e\u5176\u5185\u5bb9\u7684\u54c8\u5e0c\u503c\u548c\u63d0\u4ea4\u65e5\u671f\u751f\u6210\u7248\u672c\u53f7\uff0c\u4f8b\u5982\uff0cNext \u7684\u7248\u672c\u4e3a <code class=\"language-javascript\">0.0.0-68053d940-20210623</code>\uff0c\u5b9e\u9a8c\u7248\u5219\u4e3a <code class=\"language-javascript\">0.0.0-experimental-68053d940-20210623</code>\u3002</p>\n<p><strong>\u6700\u65b0\u7248\u662f\u9762\u5411\u7528\u6237\u5e94\u7528\u7a0b\u5e8f\u7684\u552f\u4e00\u5b98\u65b9\u652f\u6301\u53d1\u5e03\u6e20\u9053</strong>\u3002\u63d0\u4f9b Next \u548c\u5b9e\u9a8c\u7248\u672c\u7684\u76ee\u7684\u662f\u7528\u4e8e\u6d4b\u8bd5\uff0c\u6211\u4eec\u5e76\u4e0d\u4fdd\u8bc1\u529f\u80fd\u5728\u8fd9\u4e24\u4e2a\u7248\u672c\u4e2d\u4e0d\u53d1\u751f\u53d8\u5316\u3002\u56e0\u4e3a\u5b83\u4eec\u5e76\u4e0d\u9075\u5faa\u7528\u4e8e\u6700\u65b0\u7248\u53d1\u5e03\u7684 semver \u534f\u8bae\u3002</p>\n<p>\u5c06\u9884\u53d1\u5e03\u7248\u672c\u53d1\u5e03\u5230\u4e0e\u7a33\u5b9a\u7248\u672c\u76f8\u540c\u7684\u6ce8\u518c\u8868\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8bb8\u591a\u652f\u6301 npm \u5de5\u4f5c\u6d41\u7684\u5de5\u5177\uff0c\u6bd4\u5982\uff1a<a class=\"external-link\" href=\"https://unpkg.com\">unpkg</a> \u548c <a class=\"external-link\" href=\"https://codesandbox.io\">CodeSandbox</a>\u3002</p>\n<h3 id=\"latest-channel\"><a class=\"anchor\" href=\"/react/release-channels#latest-channel\"></a>\u6700\u65b0\u7248\u6e20\u9053 </h3>\n<p>\u6700\u65b0\u7248\u662f\u7528\u4e8e\u7a33\u5b9a React \u7248\u672c\u7684\u6e20\u9053\u3002\u5b83\u5bf9\u5e94\u662f npm \u4e2d <code class=\"language-javascript\">latest</code> \u6807\u7b7e\u3002\u6b64\u7248\u672c\u662f\u6240\u6709\u4ea4\u4ed8\u7ed9\u771f\u5b9e\u7528\u6237\u7684 React \u5e94\u7528\u7a0b\u5e8f\u7684\u63a8\u8350\u7248\u672c\u3002</p>\n<p><strong>\u5982\u679c\u4f60\u4e0d\u786e\u5b9a\u5e94\u8be5\u4f7f\u7528\u54ea\u4e2a\u7248\u672c\uff0c\u90a3\u5c31\u7528\u6700\u65b0\u7248</strong>\u3002\u5982\u679c\u4f60\u662f React \u5f00\u53d1\u4eba\u5458\uff0c\u90a3\u4e48\u8fd9\u5c31\u662f\u4f60\u6b63\u786e\u7684\u9009\u62e9\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u8ba4\u4e3a\u6700\u65b0\u7248\u7684\u66f4\u65b0\u662f\u975e\u5e38\u7a33\u5b9a\u7684\u3002\u7248\u672c\u9075\u5faa\u8bed\u4e49\u7248\u672c\u63a7\u5236\u65b9\u6848\u3002\u5728<a href=\"/react/faq-versioning\">\u7248\u672c\u653f\u7b56</a>\u4e2d\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u6211\u4eec\u5bf9\u7a33\u5b9a\u6027\u548c\u589e\u91cf\u8fc1\u79fb\u7684\u627f\u8bfa\u3002</p>\n<h3 id=\"next-channel\"><a class=\"anchor\" href=\"/react/release-channels#next-channel\"></a>Next \u6e20\u9053 </h3>\n<p>Next \u5c5e\u4e8e\u9884\u53d1\u5e03\u6e20\u9053\uff0c\u7528\u4e8e\u8ffd\u8e2a React \u4ed3\u5e93\u7684 main \u5206\u652f\u3002\u6211\u4eec\u4f7f\u7528\u5728 Next \u6e20\u9053\u7684\u9884\u53d1\u5e03\u7248\u672c\u4f5c\u4e3a\u6700\u65b0\u7248\u53d1\u5e03\u6e20\u9053\u7684\u5019\u9009\u7248\u672c\u3002\u4f60\u53ef\u4ee5\u5c06 Next \u89c6\u4e3a\u6700\u65b0\u7248\u7684\u8d85\u96c6\uff0c\u5b83\u7684\u66f4\u65b0\u9891\u7387\u66f4\u9ad8\u3002</p>\n<p>\u6700\u8fd1\u7684 Next \u7248\u672c\u548c\u6700\u8fd1\u7684\u6700\u65b0\u7248\u672c\u4e4b\u95f4\u7684\u53d8\u5316\u7a0b\u5ea6\uff0c\u4e0e\u4e24\u4e2a\u6b21\u8981\u7684 semver \u7248\u672c\u4e4b\u95f4\u7684\u53d8\u5316\u7a0b\u5ea6\u5927\u81f4\u76f8\u540c\u3002\u4f46\u662f\uff0c<strong>Next \u6e20\u9053\u4e0d\u9075\u5faa\u8bed\u4e49\u7248\u672c\u63a7\u5236\u3002</strong>\u5728 Next \u6e20\u9053\u4e2d\uff0c\u4f60\u5e94\u8be5\u9884\u671f\u5230\u540e\u7eed\u7684\u7248\u672c\u4e2d\u5076\u5c14\u4f1a\u6709\u4e0d\u517c\u5bb9\u7684\u6539\u52a8\u3002</p>\n<p><strong>\u4e0d\u8981\u5728\u9762\u5411\u7528\u6237\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u9884\u53d1\u5e03\u7248\u672c\u3002</strong></p>\n<p>Next \u6e20\u9053\u4e2d\u7684\u9884\u53d1\u5e03\u7248\u672c\u5728 npm \u4e2d\u643a\u5e26\u00a0<code class=\"language-javascript\">next</code>\u00a0\u6807\u7b7e\u53d1\u5e03\u3002\u7248\u672c\u53f7\u662f\u6839\u636e\u5176\u6784\u5efa\u5185\u5bb9\u7684\u54c8\u5e0c\u503c\u548c\u63d0\u4ea4\u65e5\u671f\u751f\u6210\u7684\uff0c\u4f8b\u5982\uff1a<code class=\"language-javascript\">0.0.0-68053d940-20210623</code>\u3002</p>\n<h4 id=\"using-the-next-channel-for-integration-testing\"><a class=\"anchor\" href=\"/react/release-channels#using-the-next-channel-for-integration-testing\"></a>\u4f7f\u7528 Next \u6e20\u9053\u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5 </h4>\n<p>Next \u6e20\u9053\u7528\u4e8e\u652f\u6301 React \u4e0e\u5176\u4ed6\u9879\u76ee\u4e4b\u95f4\u7684\u96c6\u6210\u6d4b\u8bd5\u3002</p>\n<p>React \u7684\u6240\u6709\u66f4\u6539\u5728\u53d1\u5e03\u4e4b\u524d\u90fd\u8981\u7ecf\u8fc7\u5927\u91cf\u7684\u5185\u90e8\u6d4b\u8bd5\u3002\u7136\u800c\uff0cReact \u7684\u6574\u4e2a\u751f\u6001\u7cfb\u7edf\u4f7f\u7528\u4e86\u65e0\u6570\u7684\u73af\u5883\u548c\u914d\u7f6e\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u9488\u5bf9\u6bcf\u4e00\u9879\u8fdb\u884c\u6d4b\u8bd5\u3002</p>\n<p>\u5982\u679c\u4f60\u662f React \u7b2c\u4e09\u65b9\u6846\u67b6\uff0c\u5e93\uff0c\u5f00\u53d1\u8005\u5de5\u5177\u6216\u7c7b\u4f3c\u57fa\u7840\u8bbe\u65bd\u9879\u76ee\u7684\u4f5c\u8005\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5b9a\u671f\u9488\u5bf9\u6700\u65b0\u7248\u672c\u8fd0\u884c\u7684\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5e2e\u52a9\u6211\u4eec\u4e00\u8d77\u7ef4\u6301 React \u7a33\u5b9a\uff0c\u4e3a\u4f60\u7684\u7528\u6237\u548c\u6574\u4e2a React \u793e\u533a\u4fdd\u9a7e\u62a4\u822a\u3002\u5982\u679c\u4f60\u5bf9\u6b64\u6709\u5174\u8da3\uff0c\u8bf7\u6309\u7167\u4e0b\u5217\u6b65\u9aa4\u8fdb\u884c\u64cd\u4f5c\uff1a</p>\n<ul>\n<li>\u5728\u4f60\u559c\u6b22\u7684\u6301\u7eed\u96c6\u6210\u5e73\u53f0\u4e0a\u8bbe\u7f6e cron job\u3002<a class=\"external-link\" href=\"https://circleci.com/docs/2.0/triggers/#scheduled-builds\">CircleCI</a> \u548c <a class=\"external-link\" href=\"https://docs.travis-ci.com/user/cron-jobs/\">Travis CI</a> \u5747\u652f\u6301 cron job\u3002</li>\n<li>\n<p>\u5728 cron job \u4e2d\uff0c\u4f7f\u7528 npm \u7684 <code class=\"language-javascript\">next</code> \u6807\u7b7e\u5c06 React \u7248\u672c\u66f4\u65b0\u81f3 Next \u6e20\u9053\u4e2d\u7684\u6700\u65b0\u7248\u672c\u3002\u4f7f\u7528 npm cli\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-console\"><code class=\"language-javascript\">npm update react@next react-dom@next</code></pre></div>\n<p>\u6216\u8005 yarn\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-console\"><code class=\"language-javascript\">yarn upgrade react@next react-dom@next</code></pre></div>\n</li>\n<li>\u9488\u5bf9\u66f4\u65b0\u7684 packages \u8fd0\u884c\u4f60\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002</li>\n<li>\u5982\u679c\u5747\u901a\u8fc7\uff0c\u90a3\u4e48\u606d\u559c\u4f60\uff01\u4f60\u7684\u9879\u76ee\u53ef\u4ee5\u4e0e\u4e0b\u4e2a\u5c0f\u7248\u672c\u7684 React \u4e00\u8d77\u4f7f\u7528\u3002</li>\n<li>\u5982\u679c\u53d1\u751f\u610f\u5916\u4e2d\u65ad\uff0c\u8bf7\u901a\u8fc7<a class=\"external-link\" href=\"https://github.com/facebook/react/issues\">\u63d0\u4ea4 issues</a> \u544a\u77e5\u6211\u4eec\u3002</li>\n</ul>\n<p>Next.js \u9879\u76ee\u4f7f\u7528\u4e86\u8fd9\u4e2a\u5de5\u4f5c\u6d41\u3002\u4f60\u53ef\u4ee5\u53c2\u8003\u4ed6\u4eec\u7684 <a class=\"external-link\" href=\"https://github.com/zeit/next.js/blob/c0a1c0f93966fe33edd93fb53e5fafb0dcd80a9e/.circleci/config.yml\">CircleCI \u914d\u7f6e</a>\u4f5c\u4e3a\u793a\u4f8b\u3002</p>\n<h3 id=\"experimental-channel\"><a class=\"anchor\" href=\"/react/release-channels#experimental-channel\"></a>\u5b9e\u9a8c\u7248\u6e20\u9053 </h3>\n<p>\u4e0e Next \u76f8\u4f3c\uff0c\u5b9e\u9a8c\u7248\u6e20\u9053\u662f\u4e00\u4e2a\u9884\u53d1\u5e03\u6e20\u9053\uff0c\u7528\u4e8e\u8ffd\u8e2a React \u4ed3\u5e93 main \u5206\u652f\u3002\u4f46\u4e0d\u540c\u4e8e Next \u7684\u662f\uff0c\u5b9e\u9a8c\u7248\u5305\u542b\u5c1a\u672a\u51c6\u5907\u597d\u5e7f\u6cdb\u63a8\u5e7f\u7684\u529f\u80fd\u53ca API\u3002</p>\n<p>\u901a\u5e38\uff0c\u5bf9 Next \u66f4\u65b0\u65f6\u4e5f\u4f1a\u5bf9\u5b9e\u9a8c\u7248\u672c\u8fdb\u884c\u66f4\u65b0\u3002\u5b83\u4eec\u57fa\u4e8e\u76f8\u540c\u7684\u6e90\uff0c\u4f46\u662f\u6784\u5efa\u65f6\u4f1a\u4f7f\u7528\u4e0d\u540c\u7684\u529f\u80fd\u6807\u8bb0\u3002</p>\n<p>\u5b9e\u9a8c\u9636\u6bb5\u53d1\u5e03\u7684\u7248\u672c\u53ef\u80fd\u4e0e Next \u548c\u6700\u65b0\u7248\u672c\u7684\u53d1\u5e03\u5747\u4e0d\u76f8\u540c\u3002<strong>\u4e0d\u8981\u5728\u9762\u5411\u7528\u6237\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u5b9e\u9a8c\u7248\u3002</strong> \u4f60\u5e94\u8be5\u80fd\u591f\u60f3\u8c61\u5230\u5b9e\u9a8c\u6e20\u9053\u4e2d\u53d1\u5e03\u7684\u7248\u672c\u4f1a\u9891\u7e41\u8fdb\u884c\u7834\u574f\u6027\u7684\u66f4\u65b0\u3002</p>\n<p>\u5b9e\u9a8c\u7248\u672c\u4f1a\u5728 npm \u4e0a\u4f1a\u4ee5 <code class=\"language-javascript\">experimental</code> \u6807\u7b7e\u7684\u5f62\u5f0f\u53d1\u5e03\u3002\u7248\u672c\u4f1a\u6839\u636e\u6784\u5efa\u5185\u5bb9\u7684\u54c8\u5e0c\u503c\u548c\u63d0\u4ea4\u65e5\u671f\u751f\u6210\uff0c\u4f8b\u5982\uff0c<code class=\"language-javascript\">0.0.0-experimental-68053d940-20210623</code>\u3002</p>\n<h4 id=\"what-goes-into-an-experimental-release\"><a class=\"anchor\" href=\"/react/release-channels#what-goes-into-an-experimental-release\"></a>\u5b9e\u9a8c\u9636\u6bb5\u53d1\u5e03\u5305\u542b\u54ea\u4e9b\u5185\u5bb9\uff1f</h4>\n<p>\u5b9e\u9a8c\u9636\u6bb5\u7684\u529f\u80fd\u5e76\u672a\u6253\u7b97\u516c\u5f00\u53d1\u5e03\uff0c\u5728\u6700\u7ec8\u786e\u5b9a\u4e4b\u524d\u53ef\u80fd\u4f1a\u53d1\u751f\u91cd\u5927\u53d8\u5316\u3002\u6709\u4e9b\u5b9e\u9a8c\u529f\u80fd\u53ef\u80fd\u6c38\u8fdc\u4e0d\u4f1a\u5b8c\u6210 \u2014\u2014 \u6211\u4eec\u8fdb\u884c\u5b9e\u9a8c\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u6d4b\u8bd5\u53d8\u66f4\u63d0\u6848\u7684\u53ef\u884c\u6027\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u5728\u5ba3\u5e03\u53d1\u5e03 Hook \u65f6\uff0c\u5176\u5df2\u7ecf\u5728\u5b9e\u9a8c\u6e20\u9053\u4e2d\u5b58\u5728\uff0c\u6211\u4eec\u4f1a\u5728\u6700\u65b0\u7248\u672c\u53d1\u5e03 Hook \u7684\u524d\u51e0\u5468\uff0c\u5c06\u5176\u53d1\u5e03\u5230\u5b9e\u9a8c\u6e20\u9053\u4e2d\u3002</p>\n<p>\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\u5728\u5b9e\u9a8c\u9636\u6bb5\u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5\u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002\u4f46\u662f\uff0c\u8bf7\u6ce8\u610f\uff0c\u5b9e\u9a8c\u9636\u6bb5\u7248\u672c\u7684\u7a33\u5b9a\u6027\u4e0d\u5982 Next \u7248\u672c\u3002<strong>\u6211\u4eec\u5e76\u4e0d\u4fdd\u8bc1\u5b9e\u9a8c\u7248\u672c\u4e4b\u95f4\u7684\u7a33\u5b9a\u6027\u3002</strong></p>\n<h4 id=\"how-can-i-learn-more-about-experimental-features\"><a class=\"anchor\" href=\"/react/release-channels#how-can-i-learn-more-about-experimental-features\"></a>\u5982\u4f55\u4e86\u89e3\u6709\u5173\u5b9e\u9a8c\u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f\uff1f </h4>\n<p>\u5b9e\u9a8c\u6027\u7684\u529f\u80fd\u53ef\u80fd\u4f1a\u6709\u6587\u6863\uff0c\u4e5f\u53ef\u80fd\u4e0d\u4f1a\u6709\u6587\u6863\u3002\u901a\u5e38\uff0c\u5728\u5b9e\u9a8c\u6e20\u9053\u7684\u5185\u5bb9\u53d1\u5e03\u5230 Next \u6216 Latest \u4e2d\u4e4b\u524d\uff0c\u624d\u4f1a\u7f16\u5199\u6587\u6863\u3002</p>\n<p>\u5982\u679c\u627e\u4e0d\u5230\u6587\u6863\uff0c\u5219\u53ef\u80fd\u4f1a\u9644\u6709 <a class=\"external-link\" href=\"https://github.com/reactjs/rfcs\">RFC</a> \u8bf4\u660e\u3002</p>\n<p>\u5f53\u6211\u4eec\u51c6\u5907\u53d1\u5e03\u65b0\u7684\u5b9e\u9a8c\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u4f1a\u53d1\u5e03\u5230 <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog\">React \u535a\u5ba2</a>\u4e2d\uff0c\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u6211\u4eec\u5c06\u516c\u5f00\u53d1\u5e03\u6bcf\u4e2a\u5b9e\u9a8c\u7684\u5185\u5bb9\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u53c2\u8003 Github \u516c\u5f00\u4ed3\u5e93\u7684<a class=\"external-link\" href=\"https://github.com/facebook/react/commits/main\">\u5386\u53f2\u8bb0\u5f55</a>\u4ee5\u67e5\u770b\u5b8c\u6574\u7684\u53d8\u66f4\u5217\u8868\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/release-channels.md\">Edit this page</a></p></div></article>", "path": "/react/release-channels", "nav": ["/react/cdn-links", "/react/hello-world"]}]}, {"key": "\u6838\u5fc3\u6982\u5ff5", "values": [{"key": "1. Hello World", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u6700\u7b80\u6613\u7684 React \u793a\u4f8b\u5982\u4e0b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5b83\u5c06\u5728\u9875\u9762\u4e0a\u5c55\u793a\u4e00\u4e2a \u201cHello, world!\u201d \u7684\u6807\u9898\u3002</p>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/rrpgNB?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u70b9\u51fb\u94fe\u63a5\u6253\u5f00\u5728\u7ebf\u7f16\u8f91\u5668\u3002\u968f\u610f\u66f4\u6539\u5185\u5bb9\uff0c\u67e5\u770b\u5b83\u4eec\u4f1a\u600e\u6837\u5f71\u54cd\u5c55\u793a\u3002\u672c\u6307\u5357\u4e2d\u7684\u5927\u591a\u6570\u9875\u9762\u90fd\u6709\u50cf\u8fd9\u6837\u7684\u53ef\u7f16\u8f91\u7684\u793a\u4f8b\u3002</p>\n<h2 id=\"how-to-read-this-guide\"><a class=\"anchor\" href=\"/react/hello-world#how-to-read-this-guide\"></a>\u5982\u4f55\u9605\u8bfb\u672c\u6307\u5357 </h2>\n<p>\u5728\u672c\u6307\u5357\u4e2d\uff0c\u6211\u4eec\u5c06\u7814\u7a76 React \u5e94\u7528\u7a0b\u5e8f\u7684\u7ec4\u6210\u90e8\u5206\uff1a\u5143\u7d20\u548c\u7ec4\u4ef6\u3002\u4e00\u65e6\u4f60\u638c\u63e1\u4e86\u5b83\u4eec\uff0c\u4fbf\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u53ef\u590d\u7528\u7684\u5c0f\u7247\u6bb5\u7ec4\u6210\u590d\u6742\u7684\u5e94\u7528\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u672c\u6307\u5357\u4e13\u4e3a\u559c\u6b22<strong>\u9010\u6b65\u5b66\u4e60\u6982\u5ff5</strong>\u7684\u4eba\u58eb\u8bbe\u8ba1\u3002\u5982\u679c\u4f60\u60f3\u8fb9\u5b66\u8fb9\u505a\uff0c\u8bf7\u67e5\u9605\u6211\u4eec\u7684<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//tutorial/tutorial.html\">\u5b9e\u7528\u6559\u7a0b</a>\u3002\u4f60\u4f1a\u53d1\u73b0\u8be5\u6307\u5357\u4e0e\u6559\u7a0b\u662f\u76f8\u4e92\u8865\u5145\u7684\u3002</p>\n</div>\n<p>\u672c\u6587\u662f React \u6838\u5fc3\u6982\u5ff5\u5206\u6b65\u6307\u5357\u7684\u7b2c\u4e00\u7ae0\u3002\u4f60\u53ef\u4ee5\u5728\u4fa7\u8fb9\u5bfc\u822a\u680f\u4e2d\u627e\u5230\u6240\u6709\u7ae0\u8282\u7684\u5217\u8868\u3002\u5982\u679c\u4f60\u662f\u901a\u8fc7\u79fb\u52a8\u8bbe\u5907\u9605\u8bfb\u6b64\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb\u5c4f\u5e55\u53f3\u4e0b\u89d2\u7684\u6309\u94ae\u6765\u67e5\u770b\u5bfc\u822a\u680f\u3002</p>\n<p>\u672c\u6307\u5357\u4e2d\u7684\u6bcf\u4e00\u7ae0\u8282\u90fd\u4ee5\u5176\u524d\u8ff0\u7ae0\u8282\u4e2d\u4ecb\u7ecd\u7684\u77e5\u8bc6\u70b9\u4e3a\u57fa\u7840\u3002<strong>\u4f60\u53ef\u4ee5\u6309\u7167\u4fa7\u8fb9\u5bfc\u822a\u680f\u4e2d\u663e\u793a\u7684\u987a\u5e8f\u9605\u8bfb\u6d4f\u89c8 \u201c\u6838\u5fc3\u6982\u5ff5\u201d \u7684\u6307\u5357\u7ae0\u8282\u3002\u4ee5\u4e86\u89e3 React \u7684\u5927\u90e8\u5206\u5185\u5bb9\u3002</strong> \u4f8b\u5982\uff0c<a href=\"/react/introducing-jsx\">\u201cJSX \u7b80\u4ecb\u201d</a>\u5c31\u662f\u672c\u6587\u7684\u4e0b\u4e00\u7ae0\u8282\u3002</p>\n<h2 id=\"knowledge-level-assumptions\"><a class=\"anchor\" href=\"/react/hello-world#knowledge-level-assumptions\"></a>\u9884\u5907\u77e5\u8bc6 </h2>\n<p>React \u662f\u4e00\u4e2a JavaScript \u5e93\uff0c\u6240\u4ee5\u6211\u4eec\u5047\u8bbe\u4f60\u5bf9 JavaScript \u8bed\u8a00\u5df2\u6709\u57fa\u672c\u7684\u4e86\u89e3\u3002<strong>\u5982\u679c\u4f60\u5bf9\u81ea\u5df1\u7684\u57fa\u7840\u4e0d\u81ea\u4fe1\uff0c\u6211\u4eec\u63a8\u8350<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript\">\u901a\u8fc7 JavaScript \u6559\u7a0b</a>\u68c0\u67e5\u4f60\u7684\u57fa\u7840\u77e5\u8bc6\u50a8\u5907\u6c34\u5e73</strong>\uff0c\u4f7f\u5f97\u4f60\u80fd\u591f\u65e0\u538b\u529b\u7684\u9605\u8bfb\u672c\u6307\u5357\u3002\u8fd9\u53ef\u80fd\u4f1a\u82b1\u8d39\u4f60 30 \u5206\u949f\u5230 1 \u4e2a\u5c0f\u65f6\u7684\u65f6\u95f4\uff0c\u4f46\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\u4f60\u4e0d\u4f1a\u89c9\u5f97\u540c\u65f6\u5728\u5b66\u4e60 React \u548c JavaScript\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u672c\u6307\u5357\u7684\u793a\u4f8b\u4e2d\u5076\u5c14\u4f1a\u4f7f\u7528\u4e00\u4e9b JavaScript \u65b0\u8bed\u6cd5\u3002\u5982\u679c\u4f60\u5728\u8fc7\u53bb\u51e0\u5e74\u4e2d\u5e76\u6ca1\u6709\u4f7f\u7528\u8fc7 JavaScript\uff0c\u5927\u591a\u6570\u60c5\u51b5\u4e0b<a class=\"external-link\" href=\"https://gist.github.com/gaearon/683e676101005de0add59e8bb345340c\">\u8fd9\u4e09\u70b9</a>\u5e94\u8be5\u80fd\u5e2e\u5230\u4f60\u3002</p>\n</div>\n<h2 id=\"lets-get-started\"><a class=\"anchor\" href=\"/react/hello-world#lets-get-started\"></a>\u8ba9\u6211\u4eec\u5f00\u59cb\u5427\uff01 </h2>\n<p>\u7ee7\u7eed\u5411\u4e0b\u6eda\u52a8\uff0c\u4f60\u5c06\u5728\u7f51\u7ad9\u9875\u811a\u53f3\u4fa7\u627e\u5230<a href=\"/react/introducing-jsx\">\u4e0b\u4e00\u7bc7\u6307\u5357</a>\u7684\u94fe\u63a5\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hello-world.md\">Edit this page</a></p></div></article>", "path": "/react/hello-world", "nav": ["/react/release-channels", "/react/introducing-jsx"]}, {"key": "2. JSX \u7b80\u4ecb", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u8bbe\u60f3\u5982\u4e0b\u53d8\u91cf\u58f0\u660e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u4e2a\u6709\u8da3\u7684\u6807\u7b7e\u8bed\u6cd5\u65e2\u4e0d\u662f\u5b57\u7b26\u4e32\u4e5f\u4e0d\u662f HTML\u3002</p>\n<p>\u5b83\u88ab\u79f0\u4e3a JSX\uff0c\u662f\u4e00\u4e2a JavaScript \u7684\u8bed\u6cd5\u6269\u5c55\u3002\u6211\u4eec\u5efa\u8bae\u5728 React \u4e2d\u914d\u5408\u4f7f\u7528 JSX\uff0cJSX \u53ef\u4ee5\u5f88\u597d\u5730\u63cf\u8ff0 UI \u5e94\u8be5\u5448\u73b0\u51fa\u5b83\u5e94\u6709\u4ea4\u4e92\u7684\u672c\u8d28\u5f62\u5f0f\u3002JSX \u53ef\u80fd\u4f1a\u4f7f\u4eba\u8054\u60f3\u5230\u6a21\u677f\u8bed\u8a00\uff0c\u4f46\u5b83\u5177\u6709 JavaScript \u7684\u5168\u90e8\u529f\u80fd\u3002</p>\n<p>JSX \u53ef\u4ee5\u751f\u6210 React \u201c\u5143\u7d20\u201d\u3002\u6211\u4eec\u5c06\u5728<a href=\"/react/rendering-elements\">\u4e0b\u4e00\u7ae0\u8282</a>\u4e2d\u63a2\u8ba8\u5982\u4f55\u5c06\u8fd9\u4e9b\u5143\u7d20\u6e32\u67d3\u4e3a DOM\u3002\u4e0b\u9762\u6211\u4eec\u770b\u4e0b\u5b66\u4e60 JSX \u6240\u9700\u7684\u57fa\u7840\u77e5\u8bc6\u3002</p>\n<h3 id=\"why-jsx\"><a class=\"anchor\" href=\"/react/introducing-jsx#why-jsx\"></a>\u4e3a\u4ec0\u4e48\u4f7f\u7528 JSX\uff1f </h3>\n<p>React \u8ba4\u4e3a\u6e32\u67d3\u903b\u8f91\u672c\u8d28\u4e0a\u4e0e\u5176\u4ed6 UI \u903b\u8f91\u5185\u5728\u8026\u5408\uff0c\u6bd4\u5982\uff0c\u5728 UI \u4e2d\u9700\u8981\u7ed1\u5b9a\u5904\u7406\u4e8b\u4ef6\u3001\u5728\u67d0\u4e9b\u65f6\u523b\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u9700\u8981\u901a\u77e5\u5230 UI\uff0c\u4ee5\u53ca\u9700\u8981\u5728 UI \u4e2d\u5c55\u793a\u51c6\u5907\u597d\u7684\u6570\u636e\u3002</p>\n<p>React \u5e76\u6ca1\u6709\u91c7\u7528\u5c06<em>\u6807\u8bb0\u4e0e\u903b\u8f91\u5206\u79bb\u5230\u4e0d\u540c\u6587\u4ef6</em>\u8fd9\u79cd\u4eba\u4e3a\u7684\u5206\u79bb\u65b9\u5f0f\uff0c\u800c\u662f\u901a\u8fc7\u5c06\u4e8c\u8005\u5171\u540c\u5b58\u653e\u5728\u79f0\u4e4b\u4e3a\u201c\u7ec4\u4ef6\u201d\u7684\u677e\u6563\u8026\u5408\u5355\u5143\u4e4b\u4e2d\uff0c\u6765\u5b9e\u73b0<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\"><em>\u5173\u6ce8\u70b9\u5206\u79bb</em></a>\u3002\u6211\u4eec\u5c06\u5728<a href=\"/react/components-and-props\">\u540e\u9762\u7ae0\u8282</a>\u4e2d\u6df1\u5165\u5b66\u4e60\u7ec4\u4ef6\u3002\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u9002\u5e94\u5728 JS \u4e2d\u4f7f\u7528\u6807\u8bb0\u8bed\u8a00\uff0c\u8fd9\u4e2a<a class=\"external-link\" href=\"https://www.youtube.com/watch?v=x7cQ3mrcKaY\">\u4f1a\u8bae\u8ba8\u8bba</a>\u5e94\u8be5\u53ef\u4ee5\u8bf4\u670d\u4f60\u3002</p>\n<p>React <a href=\"/react/react-without-jsx\">\u4e0d\u5f3a\u5236\u8981\u6c42</a>\u4f7f\u7528 JSX\uff0c\u4f46\u662f\u5927\u591a\u6570\u4eba\u53d1\u73b0\uff0c\u5728 JavaScript \u4ee3\u7801\u4e2d\u5c06 JSX \u548c UI \u653e\u5728\u4e00\u8d77\u65f6\uff0c\u4f1a\u5728\u89c6\u89c9\u4e0a\u6709\u8f85\u52a9\u4f5c\u7528\u3002\u5b83\u8fd8\u53ef\u4ee5\u4f7f React \u663e\u793a\u66f4\u591a\u6709\u7528\u7684\u9519\u8bef\u548c\u8b66\u544a\u6d88\u606f\u3002</p>\n<p>\u641e\u6e05\u695a\u8fd9\u4e2a\u95ee\u9898\u540e\uff0c\u6211\u4eec\u5c31\u5f00\u59cb\u5b66\u4e60 JSX \u5427\uff01</p>\n<h3 id=\"embedding-expressions-in-jsx\"><a class=\"anchor\" href=\"/react/introducing-jsx#embedding-expressions-in-jsx\"></a>\u5728 JSX \u4e2d\u5d4c\u5165\u8868\u8fbe\u5f0f </h3>\n<p>\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">name</code> \u7684\u53d8\u91cf\uff0c\u7136\u540e\u5728 JSX \u4e2d\u4f7f\u7528\u5b83\uff0c\u5e76\u5c06\u5b83\u5305\u88f9\u5728\u5927\u62ec\u53f7\u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Josh Perez'</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>\u5728 JSX \u8bed\u6cd5\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728\u5927\u62ec\u53f7\u5185\u653e\u7f6e\u4efb\u4f55\u6709\u6548\u7684 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions\">JavaScript \u8868\u8fbe\u5f0f</a>\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">2 + 2</code>\uff0c<code class=\"language-javascript\">user.firstName</code> \u6216 <code class=\"language-javascript\">formatName(user)</code> \u90fd\u662f\u6709\u6548\u7684 JavaScript \u8868\u8fbe\u5f0f\u3002</p>\n<p>\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u8c03\u7528 JavaScript \u51fd\u6570 <code class=\"language-javascript\">formatName(user)</code> \u7684\u7ed3\u679c\uff0c\u5e76\u5c06\u7ed3\u679c\u5d4c\u5165\u5230 <code class=\"language-javascript\">&lt;h1&gt;</code> \u5143\u7d20\u4e2d\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">formatName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> <span class=\"token string\">'Harper'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">lastName</span><span class=\"token operator\">:</span> <span class=\"token string\">'Perez'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    Hello, </span><span class=\"token punctuation\">{</span><span class=\"token function\">formatName</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">!</span></span><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/PGEjdG?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u4e3a\u4e86\u4fbf\u4e8e\u9605\u8bfb\uff0c\u6211\u4eec\u4f1a\u5c06 JSX \u62c6\u5206\u4e3a\u591a\u884c\u3002\u540c\u65f6\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u5185\u5bb9\u5305\u88f9\u5728\u62ec\u53f7\u4e2d\uff0c\u867d\u7136\u8fd9\u6837\u505a\u4e0d\u662f\u5f3a\u5236\u8981\u6c42\u7684\uff0c\u4f46\u662f\u8fd9\u53ef\u4ee5\u907f\u514d\u9047\u5230<a class=\"external-link\" href=\"http://stackoverflow.com/q/2846283\">\u81ea\u52a8\u63d2\u5165\u5206\u53f7</a>\u9677\u9631\u3002</p>\n<h3 id=\"jsx-is-an-expression-too\"><a class=\"anchor\" href=\"/react/introducing-jsx#jsx-is-an-expression-too\"></a>JSX \u4e5f\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f </h3>\n<p>\u5728\u7f16\u8bd1\u4e4b\u540e\uff0cJSX \u8868\u8fbe\u5f0f\u4f1a\u88ab\u8f6c\u4e3a\u666e\u901a JavaScript \u51fd\u6570\u8c03\u7528\uff0c\u5e76\u4e14\u5bf9\u5176\u53d6\u503c\u540e\u5f97\u5230 JavaScript \u5bf9\u8c61\u3002</p>\n<p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u53ef\u4ee5\u5728 <code class=\"language-javascript\">if</code> \u8bed\u53e5\u548c <code class=\"language-javascript\">for</code> \u5faa\u73af\u7684\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528 JSX\uff0c\u5c06 JSX \u8d4b\u503c\u7ed9\u53d8\u91cf\uff0c\u628a JSX \u5f53\u4f5c\u53c2\u6570\u4f20\u5165\uff0c\u4ee5\u53ca\u4ece\u51fd\u6570\u4e2d\u8fd4\u56de JSX\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getGreeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token function\">formatName</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, Stranger.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"specifying-attributes-with-jsx\"><a class=\"anchor\" href=\"/react/introducing-jsx#specifying-attributes-with-jsx\"></a>JSX \u4e2d\u6307\u5b9a\u5c5e\u6027 </h3>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u5f15\u53f7\uff0c\u6765\u5c06\u5c5e\u6027\u503c\u6307\u5b9a\u4e3a\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.reactjs.org<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"> link </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5927\u62ec\u53f7\uff0c\u6765\u5728\u5c5e\u6027\u503c\u4e2d\u63d2\u5165\u4e00\u4e2a JavaScript \u8868\u8fbe\u5f0f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>avatarUrl<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>img</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u5c5e\u6027\u4e2d\u5d4c\u5165 JavaScript \u8868\u8fbe\u5f0f\u65f6\uff0c\u4e0d\u8981\u5728\u5927\u62ec\u53f7\u5916\u9762\u52a0\u4e0a\u5f15\u53f7\u3002\u4f60\u5e94\u8be5\u4ec5\u4f7f\u7528\u5f15\u53f7\uff08\u5bf9\u4e8e\u5b57\u7b26\u4e32\u503c\uff09\u6216\u5927\u62ec\u53f7\uff08\u5bf9\u4e8e\u8868\u8fbe\u5f0f\uff09\u4e2d\u7684\u4e00\u4e2a\uff0c\u5bf9\u4e8e\u540c\u4e00\u5c5e\u6027\u4e0d\u80fd\u540c\u65f6\u4f7f\u7528\u8fd9\u4e24\u79cd\u7b26\u53f7\u3002</p>\n<div class=\"blockquote\">\n<strong>\u8b66\u544a\uff1a</strong>\n<p>\u56e0\u4e3a JSX \u8bed\u6cd5\u4e0a\u66f4\u63a5\u8fd1 JavaScript \u800c\u4e0d\u662f HTML\uff0c\u6240\u4ee5 React DOM \u4f7f\u7528 <code class=\"language-javascript\">camelCase</code>\uff08\u5c0f\u9a7c\u5cf0\u547d\u540d\uff09\u6765\u5b9a\u4e49\u5c5e\u6027\u7684\u540d\u79f0\uff0c\u800c\u4e0d\u4f7f\u7528 HTML \u5c5e\u6027\u540d\u79f0\u7684\u547d\u540d\u7ea6\u5b9a\u3002</p>\n<p>\u4f8b\u5982\uff0cJSX \u91cc\u7684 <code class=\"language-javascript\">class</code> \u53d8\u6210\u4e86 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/className\"><code class=\"language-javascript\">className</code></a>\uff0c\u800c <code class=\"language-javascript\">tabindex</code> \u5219\u53d8\u4e3a <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/tabIndex\"><code class=\"language-javascript\">tabIndex</code></a>\u3002</p>\n</div>\n<h3 id=\"specifying-children-with-jsx\"><a class=\"anchor\" href=\"/react/introducing-jsx#specifying-children-with-jsx\"></a>\u4f7f\u7528 JSX \u6307\u5b9a\u5b50\u5143\u7d20 </h3>\n<p>\u5047\u5982\u4e00\u4e2a\u6807\u7b7e\u91cc\u9762\u6ca1\u6709\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">/&gt;</code> \u6765\u95ed\u5408\u6807\u7b7e\uff0c\u5c31\u50cf XML \u8bed\u6cd5\u4e00\u6837\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>avatarUrl<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>JSX \u6807\u7b7e\u91cc\u80fd\u591f\u5305\u542b\u5f88\u591a\u5b50\u5143\u7d20:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Good to see you here.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"jsx-prevents-injection-attacks\"><a class=\"anchor\" href=\"/react/introducing-jsx#jsx-prevents-injection-attacks\"></a>JSX \u9632\u6b62\u6ce8\u5165\u653b\u51fb </h3>\n<p>\u4f60\u53ef\u4ee5\u5b89\u5168\u5730\u5728 JSX \u5f53\u4e2d\u63d2\u5165\u7528\u6237\u8f93\u5165\u5185\u5bb9\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> title <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>potentiallyMaliciousInput<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \u76f4\u63a5\u4f7f\u7528\u662f\u5b89\u5168\u7684\uff1a</span>\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>React DOM \u5728\u6e32\u67d3\u6240\u6709\u8f93\u5165\u5185\u5bb9\u4e4b\u524d\uff0c\u9ed8\u8ba4\u4f1a\u8fdb\u884c<a class=\"external-link\" href=\"https://stackoverflow.com/questions/7381974/which-characters-need-to-be-escaped-on-html\">\u8f6c\u4e49</a>\u3002\u5b83\u53ef\u4ee5\u786e\u4fdd\u5728\u4f60\u7684\u5e94\u7528\u4e2d\uff0c\u6c38\u8fdc\u4e0d\u4f1a\u6ce8\u5165\u90a3\u4e9b\u5e76\u975e\u81ea\u5df1\u660e\u786e\u7f16\u5199\u7684\u5185\u5bb9\u3002\u6240\u6709\u7684\u5185\u5bb9\u5728\u6e32\u67d3\u4e4b\u524d\u90fd\u88ab\u8f6c\u6362\u6210\u4e86\u5b57\u7b26\u4e32\u3002\u8fd9\u6837\u53ef\u4ee5\u6709\u6548\u5730\u9632\u6b62 <a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\">XSS\uff08cross-site-scripting, \u8de8\u7ad9\u811a\u672c\uff09</a>\u653b\u51fb\u3002</p>\n<h3 id=\"jsx-represents-objects\"><a class=\"anchor\" href=\"/react/introducing-jsx#jsx-represents-objects\"></a>JSX \u8868\u793a\u5bf9\u8c61 </h3>\n<p>Babel \u4f1a\u628a JSX \u8f6c\u8bd1\u6210\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">React.createElement()</code> \u51fd\u6570\u8c03\u7528\u3002</p>\n<p>\u4ee5\u4e0b\u4e24\u79cd\u793a\u4f8b\u4ee3\u7801\u5b8c\u5168\u7b49\u6548\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>greeting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    Hello, world!\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">'greeting'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'Hello, world!'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">React.createElement()</code> \u4f1a\u9884\u5148\u6267\u884c\u4e00\u4e9b\u68c0\u67e5\uff0c\u4ee5\u5e2e\u52a9\u4f60\u7f16\u5199\u65e0\u9519\u4ee3\u7801\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u521b\u5efa\u4e86\u4e00\u4e2a\u8fd9\u6837\u7684\u5bf9\u8c61\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u6ce8\u610f\uff1a\u8fd9\u662f\u7b80\u5316\u8fc7\u7684\u7ed3\u6784</span>\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'h1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">'greeting'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello, world!'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u4e9b\u5bf9\u8c61\u88ab\u79f0\u4e3a \u201cReact \u5143\u7d20\u201d\u3002\u5b83\u4eec\u63cf\u8ff0\u4e86\u4f60\u5e0c\u671b\u5728\u5c4f\u5e55\u4e0a\u770b\u5230\u7684\u5185\u5bb9\u3002React \u901a\u8fc7\u8bfb\u53d6\u8fd9\u4e9b\u5bf9\u8c61\uff0c\u7136\u540e\u4f7f\u7528\u5b83\u4eec\u6765\u6784\u5efa DOM \u4ee5\u53ca\u4fdd\u6301\u968f\u65f6\u66f4\u65b0\u3002</p>\n<p>\u6211\u4eec\u5c06\u5728<a href=\"/react/rendering-elements\">\u4e0b\u4e00\u7ae0\u8282</a>\u4e2d\u63a2\u8ba8\u5982\u4f55\u5c06 React \u5143\u7d20\u6e32\u67d3\u4e3a DOM\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a\uff1a</strong>\n<p>\u6211\u4eec\u63a8\u8350\u5728\u4f60\u4f7f\u7528\u7684\u7f16\u8f91\u5668\u4e2d\uff0c\u4f7f\u7528 <a class=\"external-link\" href=\"https://babeljs.io/docs/en/next/editors\">\u201cBabel\u201d \u63d0\u4f9b\u7684\u8bed\u8a00\u5b9a\u4e49</a>\uff0c\u6765\u6b63\u786e\u5730\u9ad8\u4eae\u663e\u793a ES6 \u548c JSX \u4ee3\u7801\u3002</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/introducing-jsx.md\">Edit this page</a></p></div></article>", "path": "/react/introducing-jsx", "nav": ["/react/hello-world", "/react/rendering-elements"]}, {"key": "3. \u5143\u7d20\u6e32\u67d3", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u5143\u7d20\u662f\u6784\u6210 React \u5e94\u7528\u7684\u6700\u5c0f\u7816\u5757\u3002</p>\n<p>\u5143\u7d20\u63cf\u8ff0\u4e86\u4f60\u5728\u5c4f\u5e55\u4e0a\u60f3\u770b\u5230\u7684\u5185\u5bb9\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e0e\u6d4f\u89c8\u5668\u7684 DOM \u5143\u7d20\u4e0d\u540c\uff0cReact \u5143\u7d20\u662f\u521b\u5efa\u5f00\u9500\u6781\u5c0f\u7684\u666e\u901a\u5bf9\u8c61\u3002React DOM \u4f1a\u8d1f\u8d23\u66f4\u65b0 DOM \u6765\u4e0e React \u5143\u7d20\u4fdd\u6301\u4e00\u81f4\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4f60\u53ef\u80fd\u4f1a\u5c06\u5143\u7d20\u4e0e\u53e6\u4e00\u4e2a\u88ab\u719f\u77e5\u7684\u6982\u5ff5\u2014\u2014\u201c\u7ec4\u4ef6\u201d\u6df7\u6dc6\u8d77\u6765\u3002\u6211\u4eec\u4f1a\u5728<a href=\"/react/components-and-props\">\u4e0b\u4e00\u4e2a\u7ae0\u8282</a>\u4ecb\u7ecd\u7ec4\u4ef6\u3002\u7ec4\u4ef6\u662f\u7531\u5143\u7d20\u6784\u6210\u7684\u3002\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u4f60\u4e0d\u8981\u89c9\u5f97\u7e41\u7410\u800c\u8df3\u8fc7\u672c\u7ae0\u8282\uff0c\u5e94\u5f53\u6df1\u5165\u9605\u8bfb\u8fd9\u4e00\u7ae0\u8282\u3002</p>\n</div>\n<h2 id=\"rendering-an-element-into-the-dom\"><a class=\"anchor\" href=\"/react/rendering-elements#rendering-an-element-into-the-dom\"></a>\u5c06\u4e00\u4e2a\u5143\u7d20\u6e32\u67d3\u4e3a DOM </h2>\n<p>\u5047\u8bbe\u4f60\u7684 HTML \u6587\u4ef6\u67d0\u5904\u6709\u4e00\u4e2a <code class=\"language-javascript\">&lt;div&gt;</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u6211\u4eec\u5c06\u5176\u79f0\u4e3a\u201c\u6839\u201d DOM \u8282\u70b9\uff0c\u56e0\u4e3a\u8be5\u8282\u70b9\u5185\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5c06\u7531 React DOM \u7ba1\u7406\u3002</p>\n<p>\u4ec5\u4f7f\u7528 React \u6784\u5efa\u7684\u5e94\u7528\u901a\u5e38\u53ea\u6709\u5355\u4e00\u7684\u6839 DOM \u8282\u70b9\u3002\u5982\u679c\u4f60\u5728\u5c06 React \u96c6\u6210\u8fdb\u4e00\u4e2a\u5df2\u6709\u5e94\u7528\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u5728\u5e94\u7528\u4e2d\u5305\u542b\u4efb\u610f\u591a\u7684\u72ec\u7acb\u6839 DOM \u8282\u70b9\u3002</p>\n<p>\u60f3\u8981\u5c06\u4e00\u4e2a React \u5143\u7d20\u6e32\u67d3\u5230\u6839 DOM \u8282\u70b9\u4e2d\uff0c\u53ea\u9700\u628a\u5b83\u4eec\u4e00\u8d77\u4f20\u5165 <a href=\"/react/react-dom-client#createroot\"><code class=\"language-javascript\">ReactDOM.createRoot()</code></a>\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/ZpvBNJ?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u9875\u9762\u4e0a\u4f1a\u5c55\u793a\u51fa \u201cHello, world\u201d\u3002</p>\n<h2 id=\"updating-the-rendered-element\"><a class=\"anchor\" href=\"/react/rendering-elements#updating-the-rendered-element\"></a>\u66f4\u65b0\u5df2\u6e32\u67d3\u7684\u5143\u7d20 </h2>\n<p>React \u5143\u7d20\u662f<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Immutable_object\">\u4e0d\u53ef\u53d8\u5bf9\u8c61</a>\u3002\u4e00\u65e6\u88ab\u521b\u5efa\uff0c\u4f60\u5c31\u65e0\u6cd5\u66f4\u6539\u5b83\u7684\u5b50\u5143\u7d20\u6216\u8005\u5c5e\u6027\u3002\u4e00\u4e2a\u5143\u7d20\u5c31\u50cf\u7535\u5f71\u7684\u5355\u5e27\uff1a\u5b83\u4ee3\u8868\u4e86\u67d0\u4e2a\u7279\u5b9a\u65f6\u523b\u7684 UI\u3002</p>\n<p>\u6839\u636e\u6211\u4eec\u5df2\u6709\u7684\u77e5\u8bc6\uff0c\u66f4\u65b0 UI \u552f\u4e00\u7684\u65b9\u5f0f\u662f\u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u5143\u7d20\uff0c\u5e76\u5c06\u5176\u4f20\u5165 <code class=\"language-javascript\">root.render()</code>\u3002</p>\n<p>\u8003\u8651\u4e00\u4e2a\u8ba1\u65f6\u5668\u7684\u4f8b\u5b50\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/gwoJZk?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u8fd9\u4e2a\u4f8b\u5b50\u4f1a\u5728 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval\"><code class=\"language-javascript\">setInterval()</code></a> \u56de\u8c03\u51fd\u6570\uff0c\u6bcf\u79d2\u90fd\u8c03\u7528 <a href=\"/react/react-dom#render\"><code class=\"language-javascript\">root.render()</code></a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u5927\u591a\u6570 React \u5e94\u7528\u53ea\u4f1a\u8c03\u7528\u4e00\u6b21 <code class=\"language-javascript\">root.render()</code>\u3002\u5728\u4e0b\u4e00\u4e2a\u7ae0\u8282\uff0c\u6211\u4eec\u5c06\u5b66\u4e60\u5982\u4f55\u5c06\u8fd9\u4e9b\u4ee3\u7801\u5c01\u88c5\u5230<a href=\"/react/state-and-lifecycle\">\u6709\u72b6\u6001\u7ec4\u4ef6</a>\u4e2d\u3002</p>\n<p>\u6211\u4eec\u5efa\u8bae\u4f60\u4e0d\u8981\u8df3\u8dc3\u7740\u9605\u8bfb\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u8bdd\u9898\u90fd\u662f\u7d27\u5bc6\u8054\u7cfb\u7684\u3002</p>\n</div>\n<h2 id=\"react-only-updates-whats-necessary\"><a class=\"anchor\" href=\"/react/rendering-elements#react-only-updates-whats-necessary\"></a>React \u53ea\u66f4\u65b0\u5b83\u9700\u8981\u66f4\u65b0\u7684\u90e8\u5206 </h2>\n<p>React DOM \u4f1a\u5c06\u5143\u7d20\u548c\u5b83\u7684\u5b50\u5143\u7d20\u4e0e\u5b83\u4eec\u4e4b\u524d\u7684\u72b6\u6001\u8fdb\u884c\u6bd4\u8f83\uff0c\u5e76\u53ea\u4f1a\u8fdb\u884c\u5fc5\u8981\u7684\u66f4\u65b0\u6765\u4f7f DOM \u8fbe\u5230\u9884\u671f\u7684\u72b6\u6001\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u67e5\u770b <a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/gwoJZk?editors=1010\">\u4e0a\u4e00\u4e2a\u4f8b\u5b50</a> \u6765\u786e\u8ba4\u8fd9\u4e00\u70b9\u3002</p>\n<p><a class=\"external-link\" href=\"https://zh-hans.reactjs.org//c158617ed7cc0eac8f58330e49e48224/granular-dom-updates.gif\">Image link</a></p>\n<p>\u5c3d\u7ba1\u6bcf\u4e00\u79d2\u6211\u4eec\u90fd\u4f1a\u65b0\u5efa\u4e00\u4e2a\u63cf\u8ff0\u6574\u4e2a UI \u6811\u7684\u5143\u7d20\uff0cReact DOM \u53ea\u4f1a\u66f4\u65b0\u5b9e\u9645\u6539\u53d8\u4e86\u7684\u5185\u5bb9\uff0c\u4e5f\u5c31\u662f\u4f8b\u5b50\u4e2d\u7684\u6587\u672c\u8282\u70b9\u3002</p>\n<p>\u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u5e94\u8be5\u4e13\u6ce8\u4e8e UI \u5728\u4efb\u610f\u7ed9\u5b9a\u65f6\u523b\u7684\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u4e00\u89c6\u540c\u4ec1\u5730\u968f\u7740\u65f6\u95f4\u4fee\u6539\u6574\u4e2a\u754c\u9762\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/rendering-elements.md\">Edit this page</a></p></div></article>", "path": "/react/rendering-elements", "nav": ["/react/introducing-jsx", "/react/components-and-props"]}, {"key": "4. \u7ec4\u4ef6 & Props", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u7ec4\u4ef6\u5141\u8bb8\u4f60\u5c06 UI \u62c6\u5206\u4e3a\u72ec\u7acb\u53ef\u590d\u7528\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u5e76\u5bf9\u6bcf\u4e2a\u7247\u6bb5\u8fdb\u884c\u72ec\u7acb\u6784\u601d\u3002\u672c\u6307\u5357\u65e8\u5728\u4ecb\u7ecd\u7ec4\u4ef6\u7684\u76f8\u5173\u7406\u5ff5\u3002\u4f60\u53ef\u4ee5<a href=\"/react/react-component\">\u53c2\u8003\u8be6\u7ec6\u7ec4\u4ef6 API</a>\u3002</p>\n<p>\u7ec4\u4ef6\uff0c\u4ece\u6982\u5ff5\u4e0a\u7c7b\u4f3c\u4e8e JavaScript \u51fd\u6570\u3002\u5b83\u63a5\u53d7\u4efb\u610f\u7684\u5165\u53c2\uff08\u5373 \u201cprops\u201d\uff09\uff0c\u5e76\u8fd4\u56de\u7528\u4e8e\u63cf\u8ff0\u9875\u9762\u5c55\u793a\u5185\u5bb9\u7684 React \u5143\u7d20\u3002</p>\n<h2 id=\"function-and-class-components\"><a class=\"anchor\" href=\"/react/components-and-props#function-and-class-components\"></a>\u51fd\u6570\u7ec4\u4ef6\u4e0e class \u7ec4\u4ef6 </h2>\n<p>\u5b9a\u4e49\u7ec4\u4ef6\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u7f16\u5199 JavaScript \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Welcome</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8be5\u51fd\u6570\u662f\u4e00\u4e2a\u6709\u6548\u7684 React \u7ec4\u4ef6\uff0c\u56e0\u4e3a\u5b83\u63a5\u6536\u552f\u4e00\u5e26\u6709\u6570\u636e\u7684 \u201cprops\u201d\uff08\u4ee3\u8868\u5c5e\u6027\uff09\u5bf9\u8c61\u4e0e\u5e76\u8fd4\u56de\u4e00\u4e2a React \u5143\u7d20\u3002\u8fd9\u7c7b\u7ec4\u4ef6\u88ab\u79f0\u4e3a\u201c\u51fd\u6570\u7ec4\u4ef6\u201d\uff0c\u56e0\u4e3a\u5b83\u672c\u8d28\u4e0a\u5c31\u662f JavaScript \u51fd\u6570\u3002</p>\n<p>\u4f60\u540c\u65f6\u8fd8\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes\">ES6 \u7684 class</a> \u6765\u5b9a\u4e49\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Welcome</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e0a\u8ff0\u4e24\u4e2a\u7ec4\u4ef6\u5728 React \u91cc\u662f\u7b49\u6548\u7684\u3002</p>\n<p>\u6211\u4eec\u5c06\u5728<a href=\"/react/state-and-lifecycle\">\u4e0b\u4e00\u7ae0\u8282</a>\u4e2d\u8ba8\u8bba\u5173\u4e8e\u51fd\u6570\u7ec4\u4ef6\u548c class \u7ec4\u4ef6\u7684\u989d\u5916\u7279\u6027\u3002</p>\n<h2 id=\"rendering-a-component\"><a class=\"anchor\" href=\"/react/components-and-props#rendering-a-component\"></a>\u6e32\u67d3\u7ec4\u4ef6 </h2>\n<p>\u4e4b\u524d\uff0c\u6211\u4eec\u9047\u5230\u7684 React \u5143\u7d20\u90fd\u53ea\u662f DOM \u6807\u7b7e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e0d\u8fc7\uff0cReact \u5143\u7d20\u4e5f\u53ef\u4ee5\u662f\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Welcome</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Sara<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5f53 React \u5143\u7d20\u4e3a\u7528\u6237\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u65f6\uff0c\u5b83\u4f1a\u5c06 JSX \u6240\u63a5\u6536\u7684\u5c5e\u6027\uff08attributes\uff09\u4ee5\u53ca\u5b50\u7ec4\u4ef6\uff08children\uff09\u8f6c\u6362\u4e3a\u5355\u4e2a\u5bf9\u8c61\u4f20\u9012\u7ed9\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u88ab\u79f0\u4e4b\u4e3a \u201cprops\u201d\u3002</p>\n<p>\u4f8b\u5982\uff0c\u8fd9\u6bb5\u4ee3\u7801\u4f1a\u5728\u9875\u9762\u4e0a\u6e32\u67d3 \u201cHello, Sara\u201d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">Welcome</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Welcome</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Sara<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/YGYmEG?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u8ba9\u6211\u4eec\u6765\u56de\u987e\u4e00\u4e0b\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u53d1\u751f\u4e86\u4ec0\u4e48\uff1a</p>\n<ol>\n<li>\u6211\u4eec\u8c03\u7528 <code class=\"language-javascript\">root.render()</code> \u51fd\u6570\uff0c\u5e76\u4f20\u5165 <code class=\"language-javascript\">&lt;Welcome name=\"Sara\" /&gt;</code> \u4f5c\u4e3a\u53c2\u6570\u3002</li>\n<li>React \u8c03\u7528 <code class=\"language-javascript\">Welcome</code> \u7ec4\u4ef6\uff0c\u5e76\u5c06 <code class=\"language-javascript\">{name: 'Sara'}</code> \u4f5c\u4e3a props \u4f20\u5165\u3002</li>\n<li><code class=\"language-javascript\">Welcome</code> \u7ec4\u4ef6\u5c06 <code class=\"language-javascript\">&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> \u5143\u7d20\u4f5c\u4e3a\u8fd4\u56de\u503c\u3002</li>\n<li>React DOM \u5c06 DOM \u9ad8\u6548\u5730\u66f4\u65b0\u4e3a <code class=\"language-javascript\">&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>\u3002</li>\n</ol>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a \u7ec4\u4ef6\u540d\u79f0\u5fc5\u987b\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u3002</strong>\n<p>React \u4f1a\u5c06\u4ee5\u5c0f\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u7ec4\u4ef6\u89c6\u4e3a\u539f\u751f DOM \u6807\u7b7e\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">&lt;div /&gt;</code> \u4ee3\u8868 HTML \u7684 div \u6807\u7b7e\uff0c\u800c <code class=\"language-javascript\">&lt;Welcome /&gt;</code> \u5219\u4ee3\u8868\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5e76\u4e14\u9700\u5728\u4f5c\u7528\u57df\u5185\u4f7f\u7528 <code class=\"language-javascript\">Welcome</code>\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728<a href=\"/react/jsx-in-depth#user-defined-components-must-be-capitalized\">\u6df1\u5165 JSX</a> \u4e2d\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u6b64\u89c4\u8303\u7684\u539f\u56e0\u3002</p>\n</div>\n<h2 id=\"composing-components\"><a class=\"anchor\" href=\"/react/components-and-props#composing-components\"></a>\u7ec4\u5408\u7ec4\u4ef6 </h2>\n<p>\u7ec4\u4ef6\u53ef\u4ee5\u5728\u5176\u8f93\u51fa\u4e2d\u5f15\u7528\u5176\u4ed6\u7ec4\u4ef6\u3002\u8fd9\u5c31\u53ef\u4ee5\u8ba9\u6211\u4eec\u7528\u540c\u4e00\u7ec4\u4ef6\u6765\u62bd\u8c61\u51fa\u4efb\u610f\u5c42\u6b21\u7684\u7ec6\u8282\u3002\u6309\u94ae\uff0c\u8868\u5355\uff0c\u5bf9\u8bdd\u6846\uff0c\u751a\u81f3\u6574\u4e2a\u5c4f\u5e55\u7684\u5185\u5bb9\uff1a\u5728 React \u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u8fd9\u4e9b\u901a\u5e38\u90fd\u4f1a\u4ee5\u7ec4\u4ef6\u7684\u5f62\u5f0f\u8868\u793a\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u591a\u6b21\u6e32\u67d3 <code class=\"language-javascript\">Welcome</code> \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">App</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Welcome</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Welcome</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Sara<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Welcome</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Cahal<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Welcome</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Edite<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/KgQKPr?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u901a\u5e38\u6765\u8bf4\uff0c\u6bcf\u4e2a\u65b0\u7684 React \u5e94\u7528\u7a0b\u5e8f\u7684\u9876\u5c42\u7ec4\u4ef6\u90fd\u662f <code class=\"language-javascript\">App</code> \u7ec4\u4ef6\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f60\u5c06 React \u96c6\u6210\u5230\u73b0\u6709\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u50cf <code class=\"language-javascript\">Button</code> \u8fd9\u6837\u7684\u5c0f\u7ec4\u4ef6\uff0c\u5e76\u81ea\u4e0b\u800c\u4e0a\u5730\u5c06\u8fd9\u7c7b\u7ec4\u4ef6\u9010\u6b65\u5e94\u7528\u5230\u89c6\u56fe\u5c42\u7684\u6bcf\u4e00\u5904\u3002</p>\n<h2 id=\"extracting-components\"><a class=\"anchor\" href=\"/react/components-and-props#extracting-components\"></a>\u63d0\u53d6\u7ec4\u4ef6 </h2>\n<p>\u5c06\u7ec4\u4ef6\u62c6\u5206\u4e3a\u66f4\u5c0f\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u4f8b\u5982\uff0c\u53c2\u8003\u5982\u4e0b <code class=\"language-javascript\">Comment</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Comment</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Avatar<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">.</span>avatarUrl<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserInfo-name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment-date<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token function\">formatDate</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/VKQwEo?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u8be5\u7ec4\u4ef6\u7528\u4e8e\u63cf\u8ff0\u4e00\u4e2a\u793e\u4ea4\u5a92\u4f53\u7f51\u7ad9\u4e0a\u7684\u8bc4\u8bba\u529f\u80fd\uff0c\u5b83\u63a5\u6536 <code class=\"language-javascript\">author</code>\uff08\u5bf9\u8c61\uff09\uff0c<code class=\"language-javascript\">text</code> \uff08\u5b57\u7b26\u4e32\uff09\u4ee5\u53ca <code class=\"language-javascript\">date</code>\uff08\u65e5\u671f\uff09\u4f5c\u4e3a props\u3002</p>\n<p>\u8be5\u7ec4\u4ef6\u7531\u4e8e\u5d4c\u5957\u7684\u5173\u7cfb\uff0c\u53d8\u5f97\u96be\u4ee5\u7ef4\u62a4\uff0c\u4e14\u5f88\u96be\u590d\u7528\u5b83\u7684\u5404\u4e2a\u90e8\u5206\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u4ece\u4e2d\u63d0\u53d6\u4e00\u4e9b\u7ec4\u4ef6\u51fa\u6765\u3002</p>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u5c06\u63d0\u53d6 <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Avatar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Avatar<span class=\"token punctuation\">\"</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>avatarUrl<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">/&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">Avatar</code> \u4e0d\u9700\u77e5\u9053\u5b83\u5728 <code class=\"language-javascript\">Comment</code> \u7ec4\u4ef6\u5185\u90e8\u662f\u5982\u4f55\u6e32\u67d3\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u7ed9\u5b83\u7684 props \u8d77\u4e86\u4e00\u4e2a\u66f4\u901a\u7528\u7684\u540d\u5b57\uff1a<code class=\"language-javascript\">user</code>\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">author</code>\u3002</p>\n<p>\u6211\u4eec\u5efa\u8bae\u4ece\u7ec4\u4ef6\u81ea\u8eab\u7684\u89d2\u5ea6\u547d\u540d props\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u4e8e\u8c03\u7528\u7ec4\u4ef6\u7684\u4e0a\u4e0b\u6587\u547d\u540d\u3002</p>\n<p>\u6211\u4eec\u73b0\u5728\u9488\u5bf9 <code class=\"language-javascript\">Comment</code> \u505a\u4e9b\u5fae\u5c0f\u8c03\u6574\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Comment</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Avatar</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserInfo-name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment-date<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token function\">formatDate</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u63d0\u53d6 <code class=\"language-javascript\">UserInfo</code> \u7ec4\u4ef6\uff0c\u8be5\u7ec4\u4ef6\u5728\u7528\u6237\u540d\u65c1\u6e32\u67d3 <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">UserInfo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Avatar</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserInfo-name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fdb\u4e00\u6b65\u7b80\u5316 <code class=\"language-javascript\">Comment</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Comment</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserInfo</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Comment-date<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token function\">formatDate</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/rrJNJY?editors=1010\">\u5728 CodePen \u4e0a\u8bd5\u8bd5</a></strong></p>\n<p>\u6700\u521d\u770b\u4e0a\u53bb\uff0c\u63d0\u53d6\u7ec4\u4ef6\u53ef\u80fd\u662f\u4e00\u4ef6\u7e41\u91cd\u7684\u5de5\u4f5c\uff0c\u4f46\u662f\uff0c\u5728\u5927\u578b\u5e94\u7528\u4e2d\uff0c\u6784\u5efa\u53ef\u590d\u7528\u7ec4\u4ef6\u5e93\u662f\u5b8c\u5168\u503c\u5f97\u7684\u3002\u6839\u636e\u7ecf\u9a8c\u6765\u770b\uff0c\u5982\u679c UI \u4e2d\u6709\u4e00\u90e8\u5206\u88ab\u591a\u6b21\u4f7f\u7528\uff08<code class=\"language-javascript\">Button</code>\uff0c<code class=\"language-javascript\">Panel</code>\uff0c<code class=\"language-javascript\">Avatar</code>\uff09\uff0c\u6216\u8005\u7ec4\u4ef6\u672c\u8eab\u5c31\u8db3\u591f\u590d\u6742\uff08<code class=\"language-javascript\">App</code>\uff0c<code class=\"language-javascript\">FeedStory</code>\uff0c<code class=\"language-javascript\">Comment</code>\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u4e00\u4e2a\u53ef\u63d0\u53d6\u51fa\u72ec\u7acb\u7ec4\u4ef6\u7684\u5019\u9009\u9879\u3002</p>\n<h2 id=\"props-are-read-only\"><a class=\"anchor\" href=\"/react/components-and-props#props-are-read-only\"></a>Props \u7684\u53ea\u8bfb\u6027 </h2>\n<p>\u7ec4\u4ef6\u65e0\u8bba\u662f\u4f7f\u7528<a href=\"/react/components-and-props#function-and-class-components\">\u51fd\u6570\u58f0\u660e\u8fd8\u662f\u901a\u8fc7 class \u58f0\u660e</a>\uff0c\u90fd\u7edd\u4e0d\u80fd\u4fee\u6539\u81ea\u8eab\u7684 props\u3002\u6765\u770b\u4e0b\u8fd9\u4e2a <code class=\"language-javascript\">sum</code> \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u6837\u7684\u51fd\u6570\u88ab\u79f0\u4e3a<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Pure_function\">\u201c\u7eaf\u51fd\u6570\u201d</a>\uff0c\u56e0\u4e3a\u8be5\u51fd\u6570\u4e0d\u4f1a\u5c1d\u8bd5\u66f4\u6539\u5165\u53c2\uff0c\u4e14\u591a\u6b21\u8c03\u7528\u4e0b\u76f8\u540c\u7684\u5165\u53c2\u59cb\u7ec8\u8fd4\u56de\u76f8\u540c\u7684\u7ed3\u679c\u3002</p>\n<p>\u76f8\u53cd\uff0c\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\u5219\u4e0d\u662f\u7eaf\u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u66f4\u6539\u4e86\u81ea\u5df1\u7684\u5165\u53c2\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">account<span class=\"token punctuation\">,</span> amount</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  account<span class=\"token punctuation\">.</span>total <span class=\"token operator\">-=</span> amount<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React \u975e\u5e38\u7075\u6d3b\uff0c\u4f46\u5b83\u4e5f\u6709\u4e00\u4e2a\u4e25\u683c\u7684\u89c4\u5219\uff1a</p>\n<p><strong>\u6240\u6709 React \u7ec4\u4ef6\u90fd\u5fc5\u987b\u50cf\u7eaf\u51fd\u6570\u4e00\u6837\u4fdd\u62a4\u5b83\u4eec\u7684 props \u4e0d\u88ab\u66f4\u6539\u3002</strong></p>\n<p>\u5f53\u7136\uff0c\u5e94\u7528\u7a0b\u5e8f\u7684 UI \u662f\u52a8\u6001\u7684\uff0c\u5e76\u4f1a\u4f34\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u53d8\u5316\u3002\u5728<a href=\"/react/state-and-lifecycle\">\u4e0b\u4e00\u7ae0\u8282</a>\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u4e00\u79cd\u65b0\u7684\u6982\u5ff5\uff0c\u79f0\u4e4b\u4e3a \u201cstate\u201d\u3002\u5728\u4e0d\u8fdd\u53cd\u4e0a\u8ff0\u89c4\u5219\u7684\u60c5\u51b5\u4e0b\uff0cstate \u5141\u8bb8 React \u7ec4\u4ef6\u968f\u7528\u6237\u64cd\u4f5c\u3001\u7f51\u7edc\u54cd\u5e94\u6216\u8005\u5176\u4ed6\u53d8\u5316\u800c\u52a8\u6001\u66f4\u6539\u8f93\u51fa\u5185\u5bb9\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/components-and-props.md\">Edit this page</a></p></div></article>", "path": "/react/components-and-props", "nav": ["/react/rendering-elements", "/react/state-and-lifecycle"]}, {"key": "5. State & \u751f\u547d\u5468\u671f", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u672c\u9875\u9762\u4ecb\u7ecd\u4e86 React \u7ec4\u4ef6\u4e2d state \u548c\u751f\u547d\u5468\u671f\u7684\u6982\u5ff5\u3002\u4f60\u53ef\u4ee5\u67e5\u9605<a href=\"/react/react-component\">\u8be6\u7ec6\u7684\u7ec4\u4ef6 API \u53c2\u8003\u6587\u6863</a>\u3002</p>\n<p>\u8bf7\u53c2\u8003<a href=\"/react/rendering-elements#updating-the-rendered-element\">\u524d\u4e00\u7ae0\u8282</a>\u4e2d\u65f6\u949f\u7684\u4f8b\u5b50\u3002\u5728<a href=\"/react/rendering-elements#rendering-an-element-into-the-dom\">\u5143\u7d20\u6e32\u67d3</a>\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u53ea\u4e86\u89e3\u4e86\u4e00\u79cd\u66f4\u65b0 UI \u754c\u9762\u7684\u65b9\u6cd5\u3002\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">root.render()</code> \u6765\u4fee\u6539\u6211\u4eec\u60f3\u8981\u6e32\u67d3\u7684\u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n<span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/gwoJZk?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u5728\u672c\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u5b66\u4e60\u5982\u4f55\u5c01\u88c5\u771f\u6b63\u53ef\u590d\u7528\u7684 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u3002\u5b83\u5c06\u8bbe\u7f6e\u81ea\u5df1\u7684\u8ba1\u65f6\u5668\u5e76\u6bcf\u79d2\u66f4\u65b0\u4e00\u6b21\u3002</p>\n<p>\u6211\u4eec\u53ef\u4ee5\u4ece\u5c01\u88c5\u65f6\u949f\u7684\u5916\u89c2\u5f00\u59cb\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Clock</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token attr-name\">date</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/dpdoYR?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u7136\u800c\uff0c\u5b83\u5ffd\u7565\u4e86\u4e00\u4e2a\u5173\u952e\u7684\u6280\u672f\u7ec6\u8282\uff1a<code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u8ba1\u65f6\u5668\uff0c\u5e76\u4e14\u9700\u8981\u6bcf\u79d2\u66f4\u65b0 UI\u3002</p>\n<p>\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u53ea\u7f16\u5199\u4e00\u6b21\u4ee3\u7801\uff0c\u4fbf\u53ef\u4ee5\u8ba9 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u81ea\u6211\u66f4\u65b0\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6211\u4eec\u9700\u8981\u5728 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u4e2d\u6dfb\u52a0 \u201cstate\u201d \u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002</p>\n<p>State \u4e0e props \u7c7b\u4f3c\uff0c\u4f46\u662f state \u662f\u79c1\u6709\u7684\uff0c\u5e76\u4e14\u5b8c\u5168\u53d7\u63a7\u4e8e\u5f53\u524d\u7ec4\u4ef6\u3002</p>\n<h2 id=\"converting-a-function-to-a-class\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#converting-a-function-to-a-class\"></a>\u5c06\u51fd\u6570\u7ec4\u4ef6\u8f6c\u6362\u6210 class \u7ec4\u4ef6 </h2>\n<p>\u901a\u8fc7\u4ee5\u4e0b\u4e94\u6b65\u5c06 <code class=\"language-javascript\">Clock</code> \u7684\u51fd\u6570\u7ec4\u4ef6\u8f6c\u6210 class \u7ec4\u4ef6\uff1a</p>\n<ol>\n<li>\u521b\u5efa\u4e00\u4e2a\u540c\u540d\u7684 <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes\">ES6 class</a>\uff0c\u5e76\u4e14\u7ee7\u627f\u4e8e <code class=\"language-javascript\">React.Component</code>\u3002</li>\n<li>\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u7684 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u3002</li>\n<li>\u5c06\u51fd\u6570\u4f53\u79fb\u52a8\u5230 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4e4b\u4e2d\u3002</li>\n<li>\u5728 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">this.props</code> \u66ff\u6362 <code class=\"language-javascript\">props</code>\u3002</li>\n<li>\u5220\u9664\u5269\u4f59\u7684\u7a7a\u51fd\u6570\u58f0\u660e\u3002</li>\n</ol>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/zKRGpo?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u73b0\u5728 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u88ab\u5b9a\u4e49\u4e3a class\uff0c\u800c\u4e0d\u662f\u51fd\u6570\u3002</p>\n<p>\u6bcf\u6b21\u7ec4\u4ef6\u66f4\u65b0\u65f6 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\u90fd\u4f1a\u88ab\u8c03\u7528\uff0c\u4f46\u53ea\u8981\u5728\u76f8\u540c\u7684 DOM \u8282\u70b9\u4e2d\u6e32\u67d3 <code class=\"language-javascript\">&lt;Clock /&gt;</code> \uff0c\u5c31\u4ec5\u6709\u4e00\u4e2a <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u7684 class \u5b9e\u4f8b\u88ab\u521b\u5efa\u4f7f\u7528\u3002\u8fd9\u5c31\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5982 state \u6216\u751f\u547d\u5468\u671f\u65b9\u6cd5\u7b49\u5f88\u591a\u5176\u4ed6\u7279\u6027\u3002</p>\n<h2 id=\"adding-local-state-to-a-class\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#adding-local-state-to-a-class\"></a>\u5411 class \u7ec4\u4ef6\u4e2d\u6dfb\u52a0\u5c40\u90e8\u7684 state </h2>\n<p>\u6211\u4eec\u901a\u8fc7\u4ee5\u4e0b\u4e09\u6b65\u5c06 <code class=\"language-javascript\">date</code> \u4ece props \u79fb\u52a8\u5230 state \u4e2d\uff1a</p>\n<ol>\n<li>\u628a <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4e2d\u7684 <code class=\"language-javascript\">this.props.date</code> \u66ff\u6362\u6210 <code class=\"language-javascript\">this.state.date</code> \uff1a</li>\n</ol>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>\u6dfb\u52a0\u4e00\u4e2a <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes#Constructor\">class \u6784\u9020\u51fd\u6570</a>\uff0c\u7136\u540e\u5728\u8be5\u51fd\u6570\u4e2d\u4e3a <code class=\"language-javascript\">this.state</code> \u8d4b\u521d\u503c\uff1a</li>\n</ol>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5c06 <code class=\"language-javascript\">props</code> \u4f20\u9012\u5230\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Class \u7ec4\u4ef6\u5e94\u8be5\u59cb\u7ec8\u4f7f\u7528 <code class=\"language-javascript\">props</code> \u53c2\u6570\u6765\u8c03\u7528\u7236\u7c7b\u7684\u6784\u9020\u51fd\u6570\u3002</p>\n<ol>\n<li>\u79fb\u9664 <code class=\"language-javascript\">&lt;Clock /&gt;</code> \u5143\u7d20\u4e2d\u7684 <code class=\"language-javascript\">date</code> \u5c5e\u6027\uff1a</li>\n</ol>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6211\u4eec\u4e4b\u540e\u4f1a\u5c06\u8ba1\u65f6\u5668\u76f8\u5173\u7684\u4ee3\u7801\u6dfb\u52a0\u5230\u7ec4\u4ef6\u4e2d\u3002</p>\n<p>\u4ee3\u7801\u5982\u4e0b\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/KgQpJd?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4f1a\u8bbe\u7f6e <code class=\"language-javascript\">Clock</code> \u7684\u8ba1\u65f6\u5668\u5e76\u6bcf\u79d2\u66f4\u65b0\u5b83\u3002</p>\n<h2 id=\"adding-lifecycle-methods-to-a-class\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#adding-lifecycle-methods-to-a-class\"></a>\u5c06\u751f\u547d\u5468\u671f\u65b9\u6cd5\u6dfb\u52a0\u5230 Class \u4e2d </h2>\n<p>\u5728\u5177\u6709\u8bb8\u591a\u7ec4\u4ef6\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u5f53\u7ec4\u4ef6\u88ab\u9500\u6bc1\u65f6\u91ca\u653e\u6240\u5360\u7528\u7684\u8d44\u6e90\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p>\n<p>\u5f53 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u7b2c\u4e00\u6b21\u88ab\u6e32\u67d3\u5230 DOM \u4e2d\u7684\u65f6\u5019\uff0c\u5c31\u4e3a\u5176<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval\">\u8bbe\u7f6e\u4e00\u4e2a\u8ba1\u65f6\u5668</a>\u3002\u8fd9\u5728 React \u4e2d\u88ab\u79f0\u4e3a\u201c\u6302\u8f7d\uff08mount\uff09\u201d\u3002</p>\n<p>\u540c\u65f6\uff0c\u5f53 DOM \u4e2d <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u88ab\u5220\u9664\u7684\u65f6\u5019\uff0c\u5e94\u8be5<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval\">\u6e05\u9664\u8ba1\u65f6\u5668</a>\u3002\u8fd9\u5728 React \u4e2d\u88ab\u79f0\u4e3a\u201c\u5378\u8f7d\uff08unmount\uff09\u201d\u3002</p>\n<p>\u6211\u4eec\u53ef\u4ee5\u4e3a class \u7ec4\u4ef6\u58f0\u660e\u4e00\u4e9b\u7279\u6b8a\u7684\u65b9\u6cd5\uff0c\u5f53\u7ec4\u4ef6\u6302\u8f7d\u6216\u5378\u8f7d\u65f6\u5c31\u4f1a\u53bb\u6267\u884c\u8fd9\u4e9b\u65b9\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u4e9b\u65b9\u6cd5\u53eb\u505a\u201c\u751f\u547d\u5468\u671f\u65b9\u6cd5\u201d\u3002</p>\n<p><code class=\"language-javascript\">componentDidMount()</code> \u65b9\u6cd5\u4f1a\u5728\u7ec4\u4ef6\u5df2\u7ecf\u88ab\u6e32\u67d3\u5230 DOM \u4e2d\u540e\u8fd0\u884c\uff0c\u6240\u4ee5\uff0c\u6700\u597d\u5728\u8fd9\u91cc\u8bbe\u7f6e\u8ba1\u65f6\u5668\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token number\">1000</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u63a5\u4e0b\u6765\u628a\u8ba1\u65f6\u5668\u7684 ID \u4fdd\u5b58\u5728 <code class=\"language-javascript\">this</code> \u4e4b\u4e2d\uff08<code class=\"language-javascript\">this.timerID</code>\uff09\u3002</p>\n<p>\u5c3d\u7ba1 <code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">this.state</code> \u662f React \u672c\u8eab\u8bbe\u7f6e\u7684\uff0c\u4e14\u90fd\u62e5\u6709\u7279\u6b8a\u7684\u542b\u4e49\uff0c\u4f46\u662f\u5176\u5b9e\u4f60\u53ef\u4ee5\u5411 class \u4e2d\u968f\u610f\u6dfb\u52a0\u4e0d\u53c2\u4e0e\u6570\u636e\u6d41\uff08\u6bd4\u5982\u8ba1\u65f6\u5668 ID\uff09\u7684\u989d\u5916\u5b57\u6bb5\u3002</p>\n<p>\u6211\u4eec\u4f1a\u5728 <code class=\"language-javascript\">componentWillUnmount()</code> \u751f\u547d\u5468\u671f\u65b9\u6cd5\u4e2d\u6e05\u9664\u8ba1\u65f6\u5668\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6700\u540e\uff0c\u6211\u4eec\u4f1a\u5b9e\u73b0\u4e00\u4e2a\u53eb <code class=\"language-javascript\">tick()</code> \u7684\u65b9\u6cd5\uff0c<code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u6bcf\u79d2\u90fd\u4f1a\u8c03\u7528\u5b83\u3002</p>\n<p>\u4f7f\u7528 <code class=\"language-javascript\">this.setState()</code> \u6765\u65f6\u523b\u66f4\u65b0\u7ec4\u4ef6 state\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">date</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/amqdNA?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u73b0\u5728\u65f6\u949f\u6bcf\u79d2\u90fd\u4f1a\u5237\u65b0\u3002</p>\n<p>\u8ba9\u6211\u4eec\u6765\u5feb\u901f\u6982\u62ec\u4e00\u4e0b\u53d1\u751f\u4e86\u4ec0\u4e48\u548c\u8fd9\u4e9b\u65b9\u6cd5\u7684\u8c03\u7528\u987a\u5e8f\uff1a</p>\n<ol>\n<li>\u5f53 <code class=\"language-javascript\">&lt;Clock /&gt;</code> \u88ab\u4f20\u7ed9 <code class=\"language-javascript\">root.render()</code>\u7684\u65f6\u5019\uff0cReact \u4f1a\u8c03\u7528 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\u3002\u56e0\u4e3a <code class=\"language-javascript\">Clock</code> \u9700\u8981\u663e\u793a\u5f53\u524d\u7684\u65f6\u95f4\uff0c\u6240\u4ee5\u5b83\u4f1a\u7528\u4e00\u4e2a\u5305\u542b\u5f53\u524d\u65f6\u95f4\u7684\u5bf9\u8c61\u6765\u521d\u59cb\u5316 <code class=\"language-javascript\">this.state</code>\u3002\u6211\u4eec\u4f1a\u5728\u4e4b\u540e\u66f4\u65b0 state\u3002</li>\n<li>\u4e4b\u540e React \u4f1a\u8c03\u7528\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u3002\u8fd9\u5c31\u662f React \u786e\u5b9a\u8be5\u5728\u9875\u9762\u4e0a\u5c55\u793a\u4ec0\u4e48\u7684\u65b9\u5f0f\u3002\u7136\u540e React \u66f4\u65b0 DOM \u6765\u5339\u914d <code class=\"language-javascript\">Clock</code> \u6e32\u67d3\u7684\u8f93\u51fa\u3002</li>\n<li>\u5f53 <code class=\"language-javascript\">Clock</code> \u7684\u8f93\u51fa\u88ab\u63d2\u5165\u5230 DOM \u4e2d\u540e\uff0cReact \u5c31\u4f1a\u8c03\u7528 <code class=\"language-javascript\">ComponentDidMount()</code> \u751f\u547d\u5468\u671f\u65b9\u6cd5\u3002\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e2d\uff0c<code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u5411\u6d4f\u89c8\u5668\u8bf7\u6c42\u8bbe\u7f6e\u4e00\u4e2a\u8ba1\u65f6\u5668\u6765\u6bcf\u79d2\u8c03\u7528\u4e00\u6b21\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">tick()</code> \u65b9\u6cd5\u3002</li>\n<li>\u6d4f\u89c8\u5668\u6bcf\u79d2\u90fd\u4f1a\u8c03\u7528\u4e00\u6b21 <code class=\"language-javascript\">tick()</code> \u65b9\u6cd5\u3002 \u5728\u8fd9\u65b9\u6cd5\u4e4b\u4e2d\uff0c<code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u4f1a\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">setState()</code> \u6765\u8ba1\u5212\u8fdb\u884c\u4e00\u6b21 UI \u66f4\u65b0\u3002\u5f97\u76ca\u4e8e <code class=\"language-javascript\">setState()</code> \u7684\u8c03\u7528\uff0cReact \u80fd\u591f\u77e5\u9053 state \u5df2\u7ecf\u6539\u53d8\u4e86\uff0c\u7136\u540e\u4f1a\u91cd\u65b0\u8c03\u7528 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u6765\u786e\u5b9a\u9875\u9762\u4e0a\u8be5\u663e\u793a\u4ec0\u4e48\u3002\u8fd9\u4e00\u6b21\uff0c<code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4e2d\u7684 <code class=\"language-javascript\">this.state.date</code> \u5c31\u4e0d\u4e00\u6837\u4e86\uff0c\u5982\u6b64\u4e00\u6765\u5c31\u4f1a\u6e32\u67d3\u8f93\u51fa\u66f4\u65b0\u8fc7\u7684\u65f6\u95f4\u3002React \u4e5f\u4f1a\u76f8\u5e94\u7684\u66f4\u65b0 DOM\u3002</li>\n<li>\u4e00\u65e6 <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u4ece DOM \u4e2d\u88ab\u79fb\u9664\uff0cReact \u5c31\u4f1a\u8c03\u7528 <code class=\"language-javascript\">componentWillUnmount()</code> \u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u8fd9\u6837\u8ba1\u65f6\u5668\u5c31\u505c\u6b62\u4e86\u3002</li>\n</ol>\n<h2 id=\"using-state-correctly\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#using-state-correctly\"></a>\u6b63\u786e\u5730\u4f7f\u7528 State </h2>\n<p>\u5173\u4e8e <code class=\"language-javascript\">setState()</code> \u4f60\u5e94\u8be5\u4e86\u89e3\u4e09\u4ef6\u4e8b\uff1a</p>\n<h3 id=\"do-not-modify-state-directly\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#do-not-modify-state-directly\"></a>\u4e0d\u8981\u76f4\u63a5\u4fee\u6539 State </h3>\n<p>\u4f8b\u5982\uff0c\u6b64\u4ee3\u7801\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Wrong</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>comment <span class=\"token operator\">=</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u800c\u662f\u5e94\u8be5\u4f7f\u7528 <code class=\"language-javascript\">setState()</code>:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Correct</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">comment</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6784\u9020\u51fd\u6570\u662f\u552f\u4e00\u53ef\u4ee5\u7ed9 <code class=\"language-javascript\">this.state</code> \u8d4b\u503c\u7684\u5730\u65b9\u3002</p>\n<h3 id=\"state-updates-may-be-asynchronous\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#state-updates-may-be-asynchronous\"></a>State \u7684\u66f4\u65b0\u53ef\u80fd\u662f\u5f02\u6b65\u7684 </h3>\n<p>\u51fa\u4e8e\u6027\u80fd\u8003\u8651\uff0cReact \u53ef\u80fd\u4f1a\u628a\u591a\u4e2a <code class=\"language-javascript\">setState()</code> \u8c03\u7528\u5408\u5e76\u6210\u4e00\u4e2a\u8c03\u7528\u3002</p>\n<p>\u56e0\u4e3a <code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">this.state</code> \u53ef\u80fd\u4f1a\u5f02\u6b65\u66f4\u65b0\uff0c\u6240\u4ee5\u4f60\u4e0d\u8981\u4f9d\u8d56\u4ed6\u4eec\u7684\u503c\u6765\u66f4\u65b0\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6b64\u4ee3\u7801\u53ef\u80fd\u4f1a\u65e0\u6cd5\u66f4\u65b0\u8ba1\u6570\u5668\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Wrong</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u8ba9 <code class=\"language-javascript\">setState()</code> \u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u800c\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61\u3002\u8fd9\u4e2a\u51fd\u6570\u7528\u4e0a\u4e00\u4e2a state \u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5c06\u6b64\u6b21\u66f4\u65b0\u88ab\u5e94\u7528\u65f6\u7684 props \u505a\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Correct</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>increment\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e0a\u9762\u4f7f\u7528\u4e86<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\">\u7bad\u5934\u51fd\u6570</a>\uff0c\u4e0d\u8fc7\u4f7f\u7528\u666e\u901a\u7684\u51fd\u6570\u4e5f\u540c\u6837\u53ef\u4ee5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Correct</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>increment\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"state-updates-are-merged\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#state-updates-are-merged\"></a>State \u7684\u66f4\u65b0\u4f1a\u88ab\u5408\u5e76 </h3>\n<p>\u5f53\u4f60\u8c03\u7528 <code class=\"language-javascript\">setState()</code> \u7684\u65f6\u5019\uff0cReact \u4f1a\u628a\u4f60\u63d0\u4f9b\u7684\u5bf9\u8c61\u5408\u5e76\u5230\u5f53\u524d\u7684 state\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4f60\u7684 state \u5305\u542b\u51e0\u4e2a\u72ec\u7acb\u7684\u53d8\u91cf\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">comments</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7136\u540e\u4f60\u53ef\u4ee5\u5206\u522b\u8c03\u7528 <code class=\"language-javascript\">setState()</code> \u6765\u5355\u72ec\u5730\u66f4\u65b0\u5b83\u4eec\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>posts</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">fetchComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token literal-property property\">comments</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>comments</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u91cc\u7684\u5408\u5e76\u662f\u6d45\u5408\u5e76\uff0c\u6240\u4ee5 <code class=\"language-javascript\">this.setState({comments})</code> \u5b8c\u6574\u4fdd\u7559\u4e86 <code class=\"language-javascript\">this.state.posts</code>\uff0c \u4f46\u662f\u5b8c\u5168\u66ff\u6362\u4e86 <code class=\"language-javascript\">this.state.comments</code>\u3002</p>\n<h2 id=\"the-data-flows-down\"><a class=\"anchor\" href=\"/react/state-and-lifecycle#the-data-flows-down\"></a>\u6570\u636e\u662f\u5411\u4e0b\u6d41\u52a8\u7684 </h2>\n<p>\u4e0d\u7ba1\u662f\u7236\u7ec4\u4ef6\u6216\u662f\u5b50\u7ec4\u4ef6\u90fd\u65e0\u6cd5\u77e5\u9053\u67d0\u4e2a\u7ec4\u4ef6\u662f\u6709\u72b6\u6001\u7684\u8fd8\u662f\u65e0\u72b6\u6001\u7684\uff0c\u5e76\u4e14\u5b83\u4eec\u4e5f\u5e76\u4e0d\u5173\u5fc3\u5b83\u662f\u51fd\u6570\u7ec4\u4ef6\u8fd8\u662f class \u7ec4\u4ef6\u3002</p>\n<p>\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u79f0 state \u4e3a\u5c40\u90e8\u7684\u6216\u662f\u5c01\u88c5\u7684\u7684\u539f\u56e0\u3002\u9664\u4e86\u62e5\u6709\u5e76\u8bbe\u7f6e\u4e86\u5b83\u7684\u7ec4\u4ef6\uff0c\u5176\u4ed6\u7ec4\u4ef6\u90fd\u65e0\u6cd5\u8bbf\u95ee\u3002</p>\n<p>\u7ec4\u4ef6\u53ef\u4ee5\u9009\u62e9\u628a\u5b83\u7684 state \u4f5c\u4e3a props \u5411\u4e0b\u4f20\u9012\u5230\u5b83\u7684\u5b50\u7ec4\u4ef6\u4e2d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FormattedDate</span></span> <span class=\"token attr-name\">date</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p><code class=\"language-javascript\">FormattedDate</code> \u7ec4\u4ef6\u4f1a\u5728\u5176 props \u4e2d\u63a5\u6536\u53c2\u6570 <code class=\"language-javascript\">date</code>\uff0c\u4f46\u662f\u7ec4\u4ef6\u672c\u8eab\u65e0\u6cd5\u77e5\u9053\u5b83\u662f\u6765\u81ea\u4e8e <code class=\"language-javascript\">Clock</code> \u7684 state\uff0c\u6216\u662f <code class=\"language-javascript\">Clock</code> \u7684 props\uff0c\u8fd8\u662f\u624b\u52a8\u8f93\u5165\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FormattedDate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/zKRqNB?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u8fd9\u901a\u5e38\u4f1a\u88ab\u53eb\u505a\u201c\u81ea\u4e0a\u800c\u4e0b\u201d\u6216\u662f\u201c\u5355\u5411\u201d\u7684\u6570\u636e\u6d41\u3002\u4efb\u4f55\u7684 state \u603b\u662f\u6240\u5c5e\u4e8e\u7279\u5b9a\u7684\u7ec4\u4ef6\uff0c\u800c\u4e14\u4ece\u8be5 state \u6d3e\u751f\u7684\u4efb\u4f55\u6570\u636e\u6216 UI \u53ea\u80fd\u5f71\u54cd\u6811\u4e2d\u201c\u4f4e\u4e8e\u201d\u5b83\u4eec\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u5982\u679c\u4f60\u628a\u4e00\u4e2a\u4ee5\u7ec4\u4ef6\u6784\u6210\u7684\u6811\u60f3\u8c61\u6210\u4e00\u4e2a props \u7684\u6570\u636e\u7011\u5e03\u7684\u8bdd\uff0c\u90a3\u4e48\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\u7684 state \u5c31\u50cf\u662f\u5728\u4efb\u610f\u4e00\u70b9\u4e0a\u7ed9\u7011\u5e03\u589e\u52a0\u989d\u5916\u7684\u6c34\u6e90\uff0c\u4f46\u662f\u5b83\u53ea\u80fd\u5411\u4e0b\u6d41\u52a8\u3002</p>\n<p>\u4e3a\u4e86\u8bc1\u660e\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u662f\u771f\u6b63\u72ec\u7acb\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u6e32\u67d3\u4e09\u4e2a <code class=\"language-javascript\">Clock</code> \u7684 <code class=\"language-javascript\">App</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/vXdGmd?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u6bcf\u4e2a <code class=\"language-javascript\">Clock</code> \u7ec4\u4ef6\u90fd\u4f1a\u5355\u72ec\u8bbe\u7f6e\u5b83\u81ea\u5df1\u7684\u8ba1\u65f6\u5668\u5e76\u4e14\u66f4\u65b0\u5b83\u3002</p>\n<p>\u5728 React \u5e94\u7528\u4e2d\uff0c\u7ec4\u4ef6\u662f\u6709\u72b6\u6001\u7ec4\u4ef6\u8fd8\u662f\u65e0\u72b6\u6001\u7ec4\u4ef6\u5c5e\u4e8e\u7ec4\u4ef6\u5b9e\u73b0\u7684\u7ec6\u8282\uff0c\u5b83\u53ef\u80fd\u4f1a\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u6539\u53d8\u3002\u4f60\u53ef\u4ee5\u5728\u6709\u72b6\u6001\u7684\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u65e0\u72b6\u6001\u7684\u7ec4\u4ef6\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/state-and-lifecycle.md\">Edit this page</a></p></div></article>", "path": "/react/state-and-lifecycle", "nav": ["/react/components-and-props", "/react/handling-events"]}, {"key": "6. \u4e8b\u4ef6\u5904\u7406", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u5143\u7d20\u7684\u4e8b\u4ef6\u5904\u7406\u548c DOM \u5143\u7d20\u7684\u5f88\u76f8\u4f3c\uff0c\u4f46\u662f\u6709\u4e00\u70b9\u8bed\u6cd5\u4e0a\u7684\u4e0d\u540c\uff1a</p>\n<ul>\n<li>React \u4e8b\u4ef6\u7684\u547d\u540d\u91c7\u7528\u5c0f\u9a7c\u5cf0\u5f0f\uff08camelCase\uff09\uff0c\u800c\u4e0d\u662f\u7eaf\u5c0f\u5199\u3002</li>\n<li>\u4f7f\u7528 JSX \u8bed\u6cd5\u65f6\u4f60\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\u4f5c\u4e3a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002</li>\n</ul>\n<p>\u4f8b\u5982\uff0c\u4f20\u7edf\u7684 HTML\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">activateLasers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n  Activate Lasers\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728 React \u4e2d\u7565\u5fae\u4e0d\u540c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>activateLasers<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">  Activate Lasers</span>\n<span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728 React \u4e2d\u53e6\u4e00\u4e2a\u4e0d\u540c\u70b9\u662f\u4f60\u4e0d\u80fd\u901a\u8fc7\u8fd4\u56de <code class=\"language-javascript\">false</code> \u7684\u65b9\u5f0f\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a\u3002\u4f60\u5fc5\u987b\u663e\u5f0f\u5730\u4f7f\u7528 <code class=\"language-javascript\">preventDefault</code>\u3002\u4f8b\u5982\uff0c\u4f20\u7edf\u7684 HTML \u4e2d\u963b\u6b62\u8868\u5355\u7684\u9ed8\u8ba4\u63d0\u4ea4\u884c\u4e3a\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onsubmit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked submit.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728 React \u4e2d\uff0c\u53ef\u80fd\u662f\u8fd9\u6837\u7684\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked submit.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u91cc\uff0c<code class=\"language-javascript\">e</code> \u662f\u4e00\u4e2a\u5408\u6210\u4e8b\u4ef6\u3002React \u6839\u636e <a class=\"external-link\" href=\"https://www.w3.org/TR/DOM-Level-3-Events/\">W3C \u89c4\u8303</a>\u6765\u5b9a\u4e49\u8fd9\u4e9b\u5408\u6210\u4e8b\u4ef6\uff0c\u6240\u4ee5\u4f60\u4e0d\u9700\u8981\u62c5\u5fc3\u8de8\u6d4f\u89c8\u5668\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002React \u4e8b\u4ef6\u4e0e\u539f\u751f\u4e8b\u4ef6\u4e0d\u5b8c\u5168\u76f8\u540c\u3002\u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\uff0c\u8bf7\u67e5\u770b <a href=\"/react/events\"><code class=\"language-javascript\">SyntheticEvent</code></a> \u53c2\u8003\u6307\u5357\u3002</p>\n<p>\u4f7f\u7528 React \u65f6\uff0c\u4f60\u4e00\u822c\u4e0d\u9700\u8981\u4f7f\u7528 <code class=\"language-javascript\">addEventListener</code> \u4e3a\u5df2\u521b\u5efa\u7684 DOM \u5143\u7d20\u6dfb\u52a0\u76d1\u542c\u5668\u3002\u4e8b\u5b9e\u4e0a\uff0c\u4f60\u53ea\u9700\u8981\u5728\u8be5\u5143\u7d20\u521d\u59cb\u6e32\u67d3\u7684\u65f6\u5019\u6dfb\u52a0\u76d1\u542c\u5668\u5373\u53ef\u3002</p>\n<p>\u5f53\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes\">ES6 class</a> \u8bed\u6cd5\u5b9a\u4e49\u4e00\u4e2a\u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u5c06\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u58f0\u660e\u4e3a class \u4e2d\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\u4e0b\u9762\u7684 <code class=\"language-javascript\">Toggle</code> \u7ec4\u4ef6\u4f1a\u6e32\u67d3\u4e00\u4e2a\u8ba9\u7528\u6237\u5207\u6362\u5f00\u5173\u72b6\u6001\u7684\u6309\u94ae\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Toggle</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">isToggleOn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u4e3a\u4e86\u5728\u56de\u8c03\u4e2d\u4f7f\u7528 `this`\uff0c\u8fd9\u4e2a\u7ed1\u5b9a\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevState</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">isToggleOn</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span>prevState<span class=\"token punctuation\">.</span>isToggleOn</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isToggleOn <span class=\"token operator\">?</span> <span class=\"token string\">'ON'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'OFF'</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/xEmzGg?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u4f60\u5fc5\u987b\u8c28\u614e\u5bf9\u5f85 JSX \u56de\u8c03\u51fd\u6570\u4e2d\u7684 <code class=\"language-javascript\">this</code>\uff0c\u5728 JavaScript \u4e2d\uff0cclass \u7684\u65b9\u6cd5\u9ed8\u8ba4\u4e0d\u4f1a<a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind\">\u7ed1\u5b9a</a> <code class=\"language-javascript\">this</code>\u3002\u5982\u679c\u4f60\u5fd8\u8bb0\u7ed1\u5b9a <code class=\"language-javascript\">this.handleClick</code> \u5e76\u628a\u5b83\u4f20\u5165\u4e86 <code class=\"language-javascript\">onClick</code>\uff0c\u5f53\u4f60\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u7684\u65f6\u5019 <code class=\"language-javascript\">this</code> \u7684\u503c\u4e3a <code class=\"language-javascript\">undefined</code>\u3002</p>\n<p>\u8fd9\u5e76\u4e0d\u662f React \u7279\u6709\u7684\u884c\u4e3a\uff1b\u8fd9\u5176\u5b9e\u4e0e <a class=\"external-link\" href=\"https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/\">JavaScript \u51fd\u6570\u5de5\u4f5c\u539f\u7406</a>\u6709\u5173\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f60\u6ca1\u6709\u5728\u65b9\u6cd5\u540e\u9762\u6dfb\u52a0 <code class=\"language-javascript\">()</code>\uff0c\u4f8b\u5982 <code class=\"language-javascript\">onClick={this.handleClick}</code>\uff0c\u4f60\u5e94\u8be5\u4e3a\u8fd9\u4e2a\u65b9\u6cd5\u7ed1\u5b9a <code class=\"language-javascript\">this</code>\u3002</p>\n<p>\u5982\u679c\u89c9\u5f97\u4f7f\u7528 <code class=\"language-javascript\">bind</code> \u5f88\u9ebb\u70e6\uff0c\u8fd9\u91cc\u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u89e3\u51b3\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Public_class_fields#public_instance_fields\">public class fields \u8bed\u6cd5</a> to correctly bind callbacks:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">LoggingButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// This syntax ensures `this` is bound within handleClick.</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is:'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span>  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> \u9ed8\u8ba4\u542f\u7528\u6b64\u8bed\u6cd5\u3002</p>\n<p>\u5982\u679c\u4f60\u6ca1\u6709\u4f7f\u7528 class fields \u8bed\u6cd5\uff0c\u4f60\u53ef\u4ee5\u5728\u56de\u8c03\u4e2d\u4f7f\u7528<a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions\">\u7bad\u5934\u51fd\u6570</a>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">LoggingButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is:'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u6b64\u8bed\u6cd5\u786e\u4fdd `handleClick` \u5185\u7684 `this` \u5df2\u88ab\u7ed1\u5b9a\u3002</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6b64\u8bed\u6cd5\u95ee\u9898\u5728\u4e8e\u6bcf\u6b21\u6e32\u67d3 <code class=\"language-javascript\">LoggingButton</code> \u65f6\u90fd\u4f1a\u521b\u5efa\u4e0d\u540c\u7684\u56de\u8c03\u51fd\u6570\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u4f46\u5982\u679c\u8be5\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a prop \u4f20\u5165\u5b50\u7ec4\u4ef6\u65f6\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u8fdb\u884c\u989d\u5916\u7684\u91cd\u65b0\u6e32\u67d3\u3002\u6211\u4eec\u901a\u5e38\u5efa\u8bae\u5728\u6784\u9020\u5668\u4e2d\u7ed1\u5b9a\u6216\u4f7f\u7528 class fields \u8bed\u6cd5\u6765\u907f\u514d\u8fd9\u7c7b\u6027\u80fd\u95ee\u9898\u3002</p>\n<h2 id=\"passing-arguments-to-event-handlers\"><a class=\"anchor\" href=\"/react/handling-events#passing-arguments-to-event-handlers\"></a>\u5411\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u4f20\u9012\u53c2\u6570 </h2>\n<p>\u5728\u5faa\u73af\u4e2d\uff0c\u901a\u5e38\u6211\u4eec\u4f1a\u4e3a\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4f20\u9012\u989d\u5916\u7684\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u82e5 <code class=\"language-javascript\">id</code> \u662f\u4f60\u8981\u5220\u9664\u90a3\u4e00\u884c\u7684 ID\uff0c\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u90fd\u53ef\u4ee5\u5411\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4f20\u9012\u53c2\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">deleteRow</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Delete Row</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">deleteRow</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Delete Row</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4e0a\u8ff0\u4e24\u79cd\u65b9\u5f0f\u662f\u7b49\u4ef7\u7684\uff0c\u5206\u522b\u901a\u8fc7<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\">\u7bad\u5934\u51fd\u6570</a>\u548c <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Function/bind\"><code class=\"language-javascript\">Function.prototype.bind</code></a> \u6765\u5b9e\u73b0\u3002</p>\n<p>\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\uff0cReact \u7684\u4e8b\u4ef6\u5bf9\u8c61 <code class=\"language-javascript\">e</code> \u4f1a\u88ab\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u9012\u3002\u5982\u679c\u901a\u8fc7\u7bad\u5934\u51fd\u6570\u7684\u65b9\u5f0f\uff0c\u4e8b\u4ef6\u5bf9\u8c61\u5fc5\u987b\u663e\u5f0f\u7684\u8fdb\u884c\u4f20\u9012\uff0c\u800c\u901a\u8fc7 <code class=\"language-javascript\">bind</code> \u7684\u65b9\u5f0f\uff0c\u4e8b\u4ef6\u5bf9\u8c61\u4ee5\u53ca\u66f4\u591a\u7684\u53c2\u6570\u5c06\u4f1a\u88ab\u9690\u5f0f\u7684\u8fdb\u884c\u4f20\u9012\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/handling-events.md\">Edit this page</a></p></div></article>", "path": "/react/handling-events", "nav": ["/react/state-and-lifecycle", "/react/conditional-rendering"]}, {"key": "7. \u6761\u4ef6\u6e32\u67d3", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u5728 React \u4e2d\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u7ec4\u4ef6\u6765\u5c01\u88c5\u5404\u79cd\u4f60\u9700\u8981\u7684\u884c\u4e3a\u3002\u7136\u540e\uff0c\u4f9d\u636e\u5e94\u7528\u7684\u4e0d\u540c\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u53ea\u6e32\u67d3\u5bf9\u5e94\u72b6\u6001\u4e0b\u7684\u90e8\u5206\u5185\u5bb9\u3002</p>\n<p>React \u4e2d\u7684\u6761\u4ef6\u6e32\u67d3\u548c JavaScript \u4e2d\u7684\u4e00\u6837\uff0c\u4f7f\u7528 JavaScript \u8fd0\u7b97\u7b26 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else\"><code class=\"language-javascript\">if</code></a> \u6216\u8005<a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Conditional_Operator\">\u6761\u4ef6\u8fd0\u7b97\u7b26</a>\u53bb\u521b\u5efa\u5143\u7d20\u6765\u8868\u73b0\u5f53\u524d\u7684\u72b6\u6001\uff0c\u7136\u540e\u8ba9 React \u6839\u636e\u5b83\u4eec\u6765\u66f4\u65b0 UI\u3002</p>\n<p>\u89c2\u5bdf\u8fd9\u4e24\u4e2a\u7ec4\u4ef6:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">UserGreeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Welcome back!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">GuestGreeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Please sign up.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u518d\u521b\u5efa\u4e00\u4e2a <code class=\"language-javascript\">Greeting</code> \u7ec4\u4ef6\uff0c\u5b83\u4f1a\u6839\u636e\u7528\u6237\u662f\u5426\u767b\u5f55\u6765\u51b3\u5b9a\u663e\u793a\u4e0a\u9762\u7684\u54ea\u4e00\u4e2a\u7ec4\u4ef6\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> isLoggedIn <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>isLoggedIn<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoggedIn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserGreeting</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GuestGreeting</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// Try changing to isLoggedIn={true}:</span>\n<span class=\"gatsby-highlight-code-line\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token attr-name\">isLoggedIn</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/ZpVxNq?editors=0011\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u8fd9\u4e2a\u793a\u4f8b\u6839\u636e <code class=\"language-javascript\">isLoggedIn</code> \u7684\u503c\u6765\u6e32\u67d3\u4e0d\u540c\u7684\u95ee\u5019\u8bed\u3002</p>\n<h3 id=\"element-variables\"><a class=\"anchor\" href=\"/react/conditional-rendering#element-variables\"></a>\u5143\u7d20\u53d8\u91cf </h3>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf\u6765\u50a8\u5b58\u5143\u7d20\u3002 \u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u6709\u6761\u4ef6\u5730\u6e32\u67d3\u7ec4\u4ef6\u7684\u4e00\u90e8\u5206\uff0c\u800c\u5176\u4ed6\u7684\u6e32\u67d3\u90e8\u5206\u5e76\u4e0d\u4f1a\u56e0\u6b64\u800c\u6539\u53d8\u3002</p>\n<p>\u89c2\u5bdf\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\uff0c\u5b83\u4eec\u5206\u522b\u4ee3\u8868\u4e86\u6ce8\u9500\u548c\u767b\u5f55\u6309\u94ae\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">LoginButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      Login\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">LogoutButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      Logout\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u540d\u53eb <code class=\"language-javascript\">LoginControl</code> \u7684<a href=\"/react/state-and-lifecycle#adding-local-state-to-a-class\">\u6709\u72b6\u6001\u7684\u7ec4\u4ef6</a>\u3002</p>\n<p>\u5b83\u5c06\u6839\u636e\u5f53\u524d\u7684\u72b6\u6001\u6765\u6e32\u67d3 <code class=\"language-javascript\">&lt;LoginButton /&gt;</code> \u6216\u8005 <code class=\"language-javascript\">&lt;LogoutButton /&gt;</code>\u3002\u540c\u65f6\u5b83\u8fd8\u4f1a\u6e32\u67d3\u4e0a\u4e00\u4e2a\u793a\u4f8b\u4e2d\u7684 <code class=\"language-javascript\">&lt;Greeting /&gt;</code>\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginControl</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleLoginClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleLoginClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleLogoutClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleLogoutClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">isLoggedIn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleLoginClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">isLoggedIn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleLogoutClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">isLoggedIn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> isLoggedIn <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isLoggedIn<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> button<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLoggedIn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      button <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogoutButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleLogoutClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      button <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoginButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleLoginClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token attr-name\">isLoggedIn</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isLoggedIn<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>button<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoginControl</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/QKzAgB?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf\u5e76\u4f7f\u7528 <code class=\"language-javascript\">if</code> \u8bed\u53e5\u8fdb\u884c\u6761\u4ef6\u6e32\u67d3\u662f\u4e0d\u9519\u7684\u65b9\u5f0f\uff0c\u4f46\u6709\u65f6\u4f60\u53ef\u80fd\u4f1a\u60f3\u4f7f\u7528\u66f4\u4e3a\u7b80\u6d01\u7684\u8bed\u6cd5\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u51e0\u79cd\u5728 JSX \u4e2d\u5185\u8054\u6761\u4ef6\u6e32\u67d3\u7684\u65b9\u6cd5\u3002</p>\n<h3 id=\"inline-if-with-logical--operator\"><a class=\"anchor\" href=\"/react/conditional-rendering#inline-if-with-logical--operator\"></a>\u4e0e\u8fd0\u7b97\u7b26 &amp;&amp; </h3>\n<p>\u901a\u8fc7\u82b1\u62ec\u53f7\u5305\u88f9\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5<a href=\"/react/introducing-jsx#embedding-expressions-in-jsx\">\u5728 JSX \u4e2d\u5d4c\u5165\u8868\u8fbe\u5f0f</a>\u3002\u8fd9\u4e5f\u5305\u62ec JavaScript \u4e2d\u7684\u903b\u8f91\u4e0e (&amp;&amp;) \u8fd0\u7b97\u7b26\u3002\u5b83\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u8fdb\u884c\u5143\u7d20\u7684\u6761\u4ef6\u6e32\u67d3\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Mailbox</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> unreadMessages <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>unreadMessages<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>unreadMessages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          You have </span><span class=\"token punctuation\">{</span>unreadMessages<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> unread messages.</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> messages <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'React'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Re: React'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Re:Re: React'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mailbox</span></span> <span class=\"token attr-name\">unreadMessages</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>messages<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/ozJddz?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u4e4b\u6240\u4ee5\u80fd\u8fd9\u6837\u505a\uff0c\u662f\u56e0\u4e3a\u5728 JavaScript \u4e2d\uff0c<code class=\"language-javascript\">true &amp;&amp; expression</code> \u603b\u662f\u4f1a\u8fd4\u56de <code class=\"language-javascript\">expression</code>, \u800c <code class=\"language-javascript\">false &amp;&amp; expression</code> \u603b\u662f\u4f1a\u8fd4\u56de <code class=\"language-javascript\">false</code>\u3002</p>\n<p>\u56e0\u6b64\uff0c\u5982\u679c\u6761\u4ef6\u662f <code class=\"language-javascript\">true</code>\uff0c<code class=\"language-javascript\">&amp;&amp;</code> \u53f3\u4fa7\u7684\u5143\u7d20\u5c31\u4f1a\u88ab\u6e32\u67d3\uff0c\u5982\u679c\u662f <code class=\"language-javascript\">false</code>\uff0cReact \u4f1a\u5ffd\u7565\u5e76\u8df3\u8fc7\u5b83\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Glossary/Falsy\">falsy \u8868\u8fbe\u5f0f</a> \u4f1a\u4f7f <code class=\"language-javascript\">&amp;&amp;</code> \u540e\u9762\u7684\u5143\u7d20\u88ab\u8df3\u8fc7\uff0c\u4f46\u4f1a\u8fd4\u56de falsy \u8868\u8fbe\u5f0f\u7684\u503c\u3002\u5728\u4e0b\u9762\u793a\u4f8b\u4e2d\uff0crender \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662f <code class=\"language-javascript\">&lt;div&gt;0&lt;/div&gt;</code>\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>count <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Messages: </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"inline-if-else-with-conditional-operator\"><a class=\"anchor\" href=\"/react/conditional-rendering#inline-if-else-with-conditional-operator\"></a>\u4e09\u76ee\u8fd0\u7b97\u7b26 </h3>\n<p>\u53e6\u4e00\u79cd\u5185\u8054\u6761\u4ef6\u6e32\u67d3\u7684\u65b9\u6cd5\u662f\u4f7f\u7528 JavaScript \u4e2d\u7684\u4e09\u76ee\u8fd0\u7b97\u7b26 <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Conditional_Operator\"><code class=\"language-javascript\">condition ? true : false</code></a>\u3002</p>\n<p>\u5728\u4e0b\u9762\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7528\u5b83\u6765\u6761\u4ef6\u6e32\u67d3\u4e00\u5c0f\u6bb5\u6587\u672c</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> isLoggedIn <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isLoggedIn<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      The user is </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>isLoggedIn <span class=\"token operator\">?</span> <span class=\"token string\">'currently'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'not'</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"> logged in.</span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u540c\u6837\u7684\uff0c\u5b83\u4e5f\u53ef\u4ee5\u7528\u4e8e\u8f83\u4e3a\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u4e2d\uff0c\u867d\u7136\u770b\u8d77\u6765\u4e0d\u662f\u5f88\u76f4\u89c2\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> isLoggedIn <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isLoggedIn<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>isLoggedIn</span>        <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogoutButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleLogoutClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoginButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleLoginClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>      <span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5c31\u50cf\u5728 JavaScript \u4e2d\u4e00\u6837\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u56e2\u961f\u7684\u4e60\u60ef\u6765\u9009\u62e9\u53ef\u8bfb\u6027\u66f4\u9ad8\u7684\u4ee3\u7801\u98ce\u683c\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6761\u4ef6\u53d8\u5f97\u8fc7\u4e8e\u590d\u6742\uff0c\u90a3\u4f60\u5e94\u8be5\u8003\u8651\u5982\u4f55<a href=\"/react/components-and-props#extracting-components\">\u63d0\u53d6\u7ec4\u4ef6</a>\u3002</p>\n<h3 id=\"preventing-component-from-rendering\"><a class=\"anchor\" href=\"/react/conditional-rendering#preventing-component-from-rendering\"></a>\u963b\u6b62\u7ec4\u4ef6\u6e32\u67d3 </h3>\n<p>\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u80fd\u9690\u85cf\u7ec4\u4ef6\uff0c\u5373\u4f7f\u5b83\u5df2\u7ecf\u88ab\u5176\u4ed6\u7ec4\u4ef6\u6e32\u67d3\u3002\u82e5\u8981\u5b8c\u6210\u6b64\u64cd\u4f5c\uff0c\u4f60\u53ef\u4ee5\u8ba9 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\u76f4\u63a5\u8fd4\u56de <code class=\"language-javascript\">null</code>\uff0c\u800c\u4e0d\u8fdb\u884c\u4efb\u4f55\u6e32\u67d3\u3002</p>\n<p>\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c<code class=\"language-javascript\">&lt;WarningBanner /&gt;</code> \u4f1a\u6839\u636e prop \u4e2d <code class=\"language-javascript\">warn</code> \u7684\u503c\u6765\u8fdb\u884c\u6761\u4ef6\u6e32\u67d3\u3002\u5982\u679c <code class=\"language-javascript\">warn</code> \u7684\u503c\u662f <code class=\"language-javascript\">false</code>\uff0c\u90a3\u4e48\u7ec4\u4ef6\u5219\u4e0d\u4f1a\u6e32\u67d3:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">WarningBanner</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>props<span class=\"token punctuation\">.</span>warn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>warning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      Warning!</span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Page</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">showWarning</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleToggleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleToggleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleToggleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">showWarning</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>showWarning\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WarningBanner</span></span> <span class=\"token attr-name\">warn</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>showWarning<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleToggleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>showWarning <span class=\"token operator\">?</span> <span class=\"token string\">'Hide'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Show'</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/Xjoqwm?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u5728\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\u4e2d\u8fd4\u56de <code class=\"language-javascript\">null</code> \u5e76\u4e0d\u4f1a\u5f71\u54cd\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u3002\u4f8b\u5982\uff0c\u4e0a\u9762\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code class=\"language-javascript\">componentDidUpdate</code> \u4f9d\u7136\u4f1a\u88ab\u8c03\u7528\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/conditional-rendering.md\">Edit this page</a></p></div></article>", "path": "/react/conditional-rendering", "nav": ["/react/handling-events", "/react/lists-and-keys"]}, {"key": "8. \u5217\u8868 & Key", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u770b\u4e0b\u5728 Javascript \u4e2d\u5982\u4f55\u8f6c\u5316\u5217\u8868\u3002</p>\n<p>\u5982\u4e0b\u4ee3\u7801\uff0c\u6211\u4eec\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\"><code class=\"language-javascript\">map()</code></a> \u51fd\u6570\u8ba9\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e00\u9879\u53d8\u53cc\u500d\uff0c\u7136\u540e\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u65b0\u7684\u5217\u8868 <code class=\"language-javascript\">doubled</code> \u5e76\u6253\u5370\u51fa\u6765\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> doubled <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> number <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>doubled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4ee3\u7801\u6253\u5370\u51fa <code class=\"language-javascript\">[2, 4, 6, 8, 10]</code>\u3002</p>\n<p>\u5728 React \u4e2d\uff0c\u628a\u6570\u7ec4\u8f6c\u5316\u4e3a<a href=\"/react/rendering-elements\">\u5143\u7d20</a>\u5217\u8868\u7684\u8fc7\u7a0b\u662f\u76f8\u4f3c\u7684\u3002</p>\n<h3 id=\"rendering-multiple-components\"><a class=\"anchor\" href=\"/react/lists-and-keys#rendering-multiple-components\"></a>\u6e32\u67d3\u591a\u4e2a\u7ec4\u4ef6 </h3>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 <code class=\"language-javascript\">{}</code> \u5728 JSX \u5185\u6784\u5efa\u4e00\u4e2a<a href=\"/react/introducing-jsx#embedding-expressions-in-jsx\">\u5143\u7d20\u96c6\u5408</a>\u3002</p>\n<p>\u4e0b\u9762\uff0c\u6211\u4eec\u4f7f\u7528 Javascript \u4e2d\u7684 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\"><code class=\"language-javascript\">map()</code></a> \u65b9\u6cd5\u6765\u904d\u5386 <code class=\"language-javascript\">numbers</code> \u6570\u7ec4\u3002\u5c06\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u53d8\u6210 <code class=\"language-javascript\">&lt;li&gt;</code> \u6807\u7b7e\uff0c\u6700\u540e\u6211\u4eec\u5c06\u5f97\u5230\u7684\u6570\u7ec4\u8d4b\u503c\u7ed9 <code class=\"language-javascript\">listItems</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6574\u4e2a <code class=\"language-javascript\">listItems</code> \u63d2\u5165\u5230 <code class=\"language-javascript\">&lt;ul&gt;</code> \u5143\u7d20\u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>listItems<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/GjPyQr?editors=0011\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u8fd9\u6bb5\u4ee3\u7801\u751f\u6210\u4e86\u4e00\u4e2a 1 \u5230 5 \u7684\u9879\u76ee\u7b26\u53f7\u5217\u8868\u3002</p>\n<h3 id=\"basic-list-component\"><a class=\"anchor\" href=\"/react/lists-and-keys#basic-list-component\"></a>\u57fa\u7840\u5217\u8868\u7ec4\u4ef6 </h3>\n<p>\u901a\u5e38\u4f60\u9700\u8981\u5728\u4e00\u4e2a<a href=\"/react/components-and-props\">\u7ec4\u4ef6</a>\u4e2d\u6e32\u67d3\u5217\u8868\u3002</p>\n<p>\u6211\u4eec\u53ef\u4ee5\u628a\u524d\u9762\u7684\u4f8b\u5b50\u91cd\u6784\u6210\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u63a5\u6536 <code class=\"language-javascript\">numbers</code> \u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u5e76\u8f93\u51fa\u4e00\u4e2a\u5143\u7d20\u5217\u8868\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NumberList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>numbers<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>listItems<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NumberList</span></span> <span class=\"token attr-name\">numbers</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>numbers<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>\u5f53\u6211\u4eec\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5c06\u4f1a\u770b\u5230\u4e00\u4e2a\u8b66\u544a <code class=\"language-javascript\">a key should be provided for list items</code>\uff0c\u610f\u601d\u662f\u5f53\u4f60\u521b\u5efa\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u5fc5\u987b\u5305\u62ec\u4e00\u4e2a\u7279\u6b8a\u7684 <code class=\"language-javascript\">key</code> \u5c5e\u6027\u3002\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u8282\u8ba8\u8bba\u8fd9\u662f\u4e3a\u4ec0\u4e48\u3002</p>\n<p>\u8ba9\u6211\u4eec\u6765\u7ed9\u6bcf\u4e2a\u5217\u8868\u5143\u7d20\u5206\u914d\u4e00\u4e2a <code class=\"language-javascript\">key</code> \u5c5e\u6027\u6765\u89e3\u51b3\u4e0a\u9762\u7684\u90a3\u4e2a\u8b66\u544a\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NumberList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>numbers<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>listItems<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/jrXYRR?editors=0011\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<h2 id=\"keys\"><a class=\"anchor\" href=\"/react/lists-and-keys#keys\"></a>key </h2>\n<p>key \u5e2e\u52a9 React \u8bc6\u522b\u54ea\u4e9b\u5143\u7d20\u6539\u53d8\u4e86\uff0c\u6bd4\u5982\u88ab\u6dfb\u52a0\u6216\u5220\u9664\u3002\u56e0\u6b64\u4f60\u5e94\u5f53\u7ed9\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u8d4b\u4e88\u4e00\u4e2a\u786e\u5b9a\u7684\u6807\u8bc6\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e00\u4e2a\u5143\u7d20\u7684 key \u6700\u597d\u662f\u8fd9\u4e2a\u5143\u7d20\u5728\u5217\u8868\u4e2d\u62e5\u6709\u7684\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u5b57\u7b26\u4e32\u3002\u901a\u5e38\uff0c\u6211\u4eec\u4f7f\u7528\u6570\u636e\u4e2d\u7684 id \u6765\u4f5c\u4e3a\u5143\u7d20\u7684 key\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> todoItems <span class=\"token operator\">=</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5f53\u5143\u7d20\u6ca1\u6709\u786e\u5b9a id \u7684\u65f6\u5019\uff0c\u4e07\u4e0d\u5f97\u5df2\u4f60\u53ef\u4ee5\u4f7f\u7528\u5143\u7d20\u7d22\u5f15 index \u4f5c\u4e3a key\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> todoItems <span class=\"token operator\">=</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Only do this if items have no stable IDs</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u5217\u8868\u9879\u76ee\u7684\u987a\u5e8f\u53ef\u80fd\u4f1a\u53d8\u5316\uff0c\u6211\u4eec\u4e0d\u5efa\u8bae\u4f7f\u7528\u7d22\u5f15\u6765\u7528\u4f5c key \u503c\uff0c\u56e0\u4e3a\u8fd9\u6837\u505a\u4f1a\u5bfc\u81f4\u6027\u80fd\u53d8\u5dee\uff0c\u8fd8\u53ef\u80fd\u5f15\u8d77\u7ec4\u4ef6\u72b6\u6001\u7684\u95ee\u9898\u3002\u53ef\u4ee5\u770b\u770b Robin Pokorny \u7684<a class=\"external-link\" href=\"https://robinpokorny.com/blog/index-as-a-key-is-an-anti-pattern/\">\u6df1\u5ea6\u89e3\u6790\u4f7f\u7528\u7d22\u5f15\u4f5c\u4e3a key \u7684\u8d1f\u9762\u5f71\u54cd</a>\u8fd9\u4e00\u7bc7\u6587\u7ae0\u3002\u5982\u679c\u4f60\u9009\u62e9\u4e0d\u6307\u5b9a\u663e\u5f0f\u7684 key \u503c\uff0c\u90a3\u4e48 React \u5c06\u9ed8\u8ba4\u4f7f\u7528\u7d22\u5f15\u7528\u4f5c\u4e3a\u5217\u8868\u9879\u76ee\u7684 key \u503c\u3002</p>\n<p>\u8981\u662f\u4f60\u6709\u5174\u8da3\u4e86\u89e3\u66f4\u591a\u7684\u8bdd\uff0c\u8fd9\u91cc\u6709\u4e00\u7bc7\u6587\u7ae0<a href=\"/react/reconciliation#recursing-on-children\">\u6df1\u5165\u89e3\u6790\u4e3a\u4ec0\u4e48 key \u662f\u5fc5\u987b\u7684</a>\u53ef\u4ee5\u53c2\u8003\u3002</p>\n<h3 id=\"extracting-components-with-keys\"><a class=\"anchor\" href=\"/react/lists-and-keys#extracting-components-with-keys\"></a>\u7528 key \u63d0\u53d6\u7ec4\u4ef6 </h3>\n<p>\u5143\u7d20\u7684 key \u53ea\u6709\u653e\u5728\u5c31\u8fd1\u7684\u6570\u7ec4\u4e0a\u4e0b\u6587\u4e2d\u624d\u6709\u610f\u4e49\u3002</p>\n<p>\u6bd4\u65b9\u8bf4\uff0c\u5982\u679c\u4f60<a href=\"/react/components-and-props#extracting-components\">\u63d0\u53d6</a>\u51fa\u4e00\u4e2a <code class=\"language-javascript\">ListItem</code> \u7ec4\u4ef6\uff0c\u4f60\u5e94\u8be5\u628a key \u4fdd\u7559\u5728\u6570\u7ec4\u4e2d\u7684\u8fd9\u4e2a <code class=\"language-javascript\">&lt;ListItem /&gt;</code> \u5143\u7d20\u4e0a\uff0c\u800c\u4e0d\u662f\u653e\u5728 <code class=\"language-javascript\">ListItem</code> \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">&lt;li&gt;</code> \u5143\u7d20\u4e0a\u3002</p>\n<p><strong>\u4f8b\u5b50\uff1a\u4e0d\u6b63\u786e\u7684\u4f7f\u7528 key \u7684\u65b9\u5f0f</strong></p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u9519\u8bef\uff01\u4f60\u4e0d\u9700\u8981\u5728\u8fd9\u91cc\u6307\u5b9a key\uff1a</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">NumberList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>numbers<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u9519\u8bef\uff01\u5143\u7d20\u7684 key \u5e94\u8be5\u5728\u8fd9\u91cc\u6307\u5b9a\uff1a</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>listItems<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u4f8b\u5b50\uff1a\u6b63\u786e\u7684\u4f7f\u7528 key \u7684\u65b9\u5f0f</strong></p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6b63\u786e\uff01\u8fd9\u91cc\u4e0d\u9700\u8981\u6307\u5b9a key\uff1a</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">NumberList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>numbers<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u6b63\u786e\uff01key \u5e94\u8be5\u5728\u6570\u7ec4\u7684\u4e0a\u4e0b\u6587\u4e2d\u88ab\u6307\u5b9a</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>listItems<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/ZXeOGM?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u4e00\u4e2a\u597d\u7684\u7ecf\u9a8c\u6cd5\u5219\u662f\uff1a\u5728 <code class=\"language-javascript\">map()</code> \u65b9\u6cd5\u4e2d\u7684\u5143\u7d20\u9700\u8981\u8bbe\u7f6e key \u5c5e\u6027\u3002</p>\n<h3 id=\"keys-must-only-be-unique-among-siblings\"><a class=\"anchor\" href=\"/react/lists-and-keys#keys-must-only-be-unique-among-siblings\"></a>key \u503c\u5728\u5144\u5f1f\u8282\u70b9\u4e4b\u95f4\u5fc5\u987b\u552f\u4e00 </h3>\n<p>\u6570\u7ec4\u5143\u7d20\u4e2d\u4f7f\u7528\u7684 key \u5728\u5176\u5144\u5f1f\u8282\u70b9\u4e4b\u95f4\u5e94\u8be5\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\u3002\u7136\u800c\uff0c\u5b83\u4eec\u4e0d\u9700\u8981\u662f\u5168\u5c40\u552f\u4e00\u7684\u3002\u5f53\u6211\u4eec\u751f\u6210\u4e24\u4e2a\u4e0d\u540c\u7684\u6570\u7ec4\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684 key \u503c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Blog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> sidebar <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>posts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">          </span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>posts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>sidebar<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello World'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'Welcome to learning React!'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'Installation'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">'You can install React from npm.'</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Blog</span></span> <span class=\"token attr-name\">posts</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>posts<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/NRZYGN?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>key \u4f1a\u4f20\u9012\u4fe1\u606f\u7ed9 React \uff0c\u4f46\u4e0d\u4f1a\u4f20\u9012\u7ed9\u4f60\u7684\u7ec4\u4ef6\u3002\u5982\u679c\u4f60\u7684\u7ec4\u4ef6\u4e2d\u9700\u8981\u4f7f\u7528 <code class=\"language-javascript\">key</code> \u5c5e\u6027\u7684\u503c\uff0c\u8bf7\u7528\u5176\u4ed6\u5c5e\u6027\u540d\u663e\u5f0f\u4f20\u9012\u8fd9\u4e2a\u503c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> posts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Post</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span></span>    <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0c<code class=\"language-javascript\">Post</code> \u7ec4\u4ef6\u53ef\u4ee5\u8bfb\u51fa <code class=\"language-javascript\">props.id</code>\uff0c\u4f46\u662f\u4e0d\u80fd\u8bfb\u51fa <code class=\"language-javascript\">props.key</code>\u3002</p>\n<h3 id=\"embedding-map-in-jsx\"><a class=\"anchor\" href=\"/react/lists-and-keys#embedding-map-in-jsx\"></a>\u5728 JSX \u4e2d\u5d4c\u5165 map() </h3>\n<p>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u5355\u72ec\u7684 <code class=\"language-javascript\">listItems</code> \u53d8\u91cf\u5e76\u5c06\u5176\u5305\u542b\u5728 JSX \u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NumberList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>numbers<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> listItems <span class=\"token operator\">=</span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">              <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>listItems<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>JSX \u5141\u8bb8\u5728\u5927\u62ec\u53f7\u4e2d<a href=\"/react/introducing-jsx#embedding-expressions-in-jsx\">\u5d4c\u5165\u4efb\u4f55\u8868\u8fbe\u5f0f</a>\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5185\u8054 <code class=\"language-javascript\">map()</code> \u8fd4\u56de\u7684\u7ed3\u679c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NumberList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>numbers<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>numbers<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">                  <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>number<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/BLvYrB?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u8fd9\u4e48\u505a\u6709\u65f6\u53ef\u4ee5\u4f7f\u4f60\u7684\u4ee3\u7801\u66f4\u6e05\u6670\uff0c\u4f46\u6709\u65f6\u8fd9\u79cd\u98ce\u683c\u4e5f\u4f1a\u88ab\u6ee5\u7528\u3002\u5c31\u50cf\u5728 JavaScript \u4e2d\u4e00\u6837\uff0c\u4f55\u65f6\u9700\u8981\u4e3a\u4e86\u53ef\u8bfb\u6027\u63d0\u53d6\u51fa\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u5b8c\u5168\u53d6\u51b3\u4e8e\u4f60\u3002\u4f46\u8bf7\u8bb0\u4f4f\uff0c\u5982\u679c\u4e00\u4e2a <code class=\"language-javascript\">map()</code> \u5d4c\u5957\u4e86\u592a\u591a\u5c42\u7ea7\uff0c\u90a3\u53ef\u80fd\u5c31\u662f\u4f60<a href=\"/react/components-and-props#extracting-components\">\u63d0\u53d6\u7ec4\u4ef6</a>\u7684\u4e00\u4e2a\u597d\u65f6\u673a\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/lists-and-keys.md\">Edit this page</a></p></div></article>", "path": "/react/lists-and-keys", "nav": ["/react/conditional-rendering", "/react/forms"]}, {"key": "9. \u8868\u5355", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u5728 React \u91cc\uff0cHTML \u8868\u5355\u5143\u7d20\u7684\u5de5\u4f5c\u65b9\u5f0f\u548c\u5176\u4ed6\u7684 DOM \u5143\u7d20\u6709\u4e9b\u4e0d\u540c\uff0c\u8fd9\u662f\u56e0\u4e3a\u8868\u5355\u5143\u7d20\u901a\u5e38\u4f1a\u4fdd\u6301\u4e00\u4e9b\u5185\u90e8\u7684 state\u3002\u4f8b\u5982\u8fd9\u4e2a\u7eaf HTML \u8868\u5355\u53ea\u63a5\u53d7\u4e00\u4e2a\u540d\u79f0\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n    \u540d\u5b57:\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\u63d0\u4ea4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u6b64\u8868\u5355\u5177\u6709\u9ed8\u8ba4\u7684 HTML \u8868\u5355\u884c\u4e3a\uff0c\u5373\u5728\u7528\u6237\u63d0\u4ea4\u8868\u5355\u540e\u6d4f\u89c8\u5230\u65b0\u9875\u9762\u3002\u5982\u679c\u4f60\u5728 React \u4e2d\u6267\u884c\u76f8\u540c\u7684\u4ee3\u7801\uff0c\u5b83\u4f9d\u7136\u6709\u6548\u3002\u4f46\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 JavaScript \u51fd\u6570\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5904\u7406\u8868\u5355\u7684\u63d0\u4ea4\uff0c \u540c\u65f6\u8fd8\u53ef\u4ee5\u8bbf\u95ee\u7528\u6237\u586b\u5199\u7684\u8868\u5355\u6570\u636e\u3002\u5b9e\u73b0\u8fd9\u79cd\u6548\u679c\u7684\u6807\u51c6\u65b9\u5f0f\u662f\u4f7f\u7528\u201c\u53d7\u63a7\u7ec4\u4ef6\u201d\u3002</p>\n<h2 id=\"controlled-components\"><a class=\"anchor\" href=\"/react/forms#controlled-components\"></a>\u53d7\u63a7\u7ec4\u4ef6 </h2>\n<p>\u5728 HTML \u4e2d\uff0c\u8868\u5355\u5143\u7d20\uff08\u5982<code class=\"language-javascript\">&lt;input&gt;</code>\u3001 <code class=\"language-javascript\">&lt;textarea&gt;</code> \u548c <code class=\"language-javascript\">&lt;select&gt;</code>\uff09\u901a\u5e38\u81ea\u5df1\u7ef4\u62a4 state\uff0c\u5e76\u6839\u636e\u7528\u6237\u8f93\u5165\u8fdb\u884c\u66f4\u65b0\u3002\u800c\u5728 React \u4e2d\uff0c\u53ef\u53d8\u72b6\u6001\uff08mutable state\uff09\u901a\u5e38\u4fdd\u5b58\u5728\u7ec4\u4ef6\u7684 state \u5c5e\u6027\u4e2d\uff0c\u5e76\u4e14\u53ea\u80fd\u901a\u8fc7\u4f7f\u7528 <a href=\"/react/react-component#setstate\"><code class=\"language-javascript\">setState()</code></a>\u6765\u66f4\u65b0\u3002</p>\n<p>\u6211\u4eec\u53ef\u4ee5\u628a\u4e24\u8005\u7ed3\u5408\u8d77\u6765\uff0c\u4f7f React \u7684 state \u6210\u4e3a\u201c\u552f\u4e00\u6570\u636e\u6e90\u201d\u3002\u6e32\u67d3\u8868\u5355\u7684 React \u7ec4\u4ef6\u8fd8\u63a7\u5236\u7740\u7528\u6237\u8f93\u5165\u8fc7\u7a0b\u4e2d\u8868\u5355\u53d1\u751f\u7684\u64cd\u4f5c\u3002\u88ab React \u4ee5\u8fd9\u79cd\u65b9\u5f0f\u63a7\u5236\u53d6\u503c\u7684\u8868\u5355\u8f93\u5165\u5143\u7d20\u5c31\u53eb\u505a\u201c\u53d7\u63a7\u7ec4\u4ef6\u201d\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8ba9\u524d\u4e00\u4e2a\u793a\u4f8b\u5728\u63d0\u4ea4\u65f6\u6253\u5370\u51fa\u540d\u79f0\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8868\u5355\u5199\u4e3a\u53d7\u63a7\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">NameForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\u63d0\u4ea4\u7684\u540d\u5b57: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          \u540d\u5b57:</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\u63d0\u4ea4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/VmmPgp?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u7531\u4e8e\u5728\u8868\u5355\u5143\u7d20\u4e0a\u8bbe\u7f6e\u4e86 <code class=\"language-javascript\">value</code> \u5c5e\u6027\uff0c\u56e0\u6b64\u663e\u793a\u7684\u503c\u5c06\u59cb\u7ec8\u4e3a <code class=\"language-javascript\">this.state.value</code>\uff0c\u8fd9\u4f7f\u5f97 React \u7684 state \u6210\u4e3a\u552f\u4e00\u6570\u636e\u6e90\u3002\u7531\u4e8e <code class=\"language-javascript\">handlechange</code> \u5728\u6bcf\u6b21\u6309\u952e\u65f6\u90fd\u4f1a\u6267\u884c\u5e76\u66f4\u65b0 React \u7684 state\uff0c\u56e0\u6b64\u663e\u793a\u7684\u503c\u5c06\u968f\u7740\u7528\u6237\u8f93\u5165\u800c\u66f4\u65b0\u3002</p>\n<p>\u5bf9\u4e8e\u53d7\u63a7\u7ec4\u4ef6\u6765\u8bf4\uff0c\u8f93\u5165\u7684\u503c\u59cb\u7ec8\u7531 React \u7684 state \u9a71\u52a8\u3002\u4f60\u4e5f\u53ef\u4ee5\u5c06 value \u4f20\u9012\u7ed9\u5176\u4ed6 UI \u5143\u7d20\uff0c\u6216\u8005\u901a\u8fc7\u5176\u4ed6\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u91cd\u7f6e\uff0c\u4f46\u8fd9\u610f\u5473\u7740\u4f60\u9700\u8981\u7f16\u5199\u66f4\u591a\u7684\u4ee3\u7801\u3002</p>\n<h2 id=\"the-textarea-tag\"><a class=\"anchor\" href=\"/react/forms#the-textarea-tag\"></a>textarea \u6807\u7b7e </h2>\n<p>\u5728 HTML \u4e2d, <code class=\"language-javascript\">&lt;textarea&gt;</code> \u5143\u7d20\u901a\u8fc7\u5176\u5b50\u5143\u7d20\u5b9a\u4e49\u5176\u6587\u672c:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span><span class=\"token punctuation\">&gt;</span></span>\n  \u4f60\u597d\uff0c \u8fd9\u662f\u5728 text area \u91cc\u7684\u6587\u672c\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u800c\u5728 React \u4e2d\uff0c<code class=\"language-javascript\">&lt;textarea&gt;</code> \u4f7f\u7528 <code class=\"language-javascript\">value</code> \u5c5e\u6027\u4ee3\u66ff\u3002\u8fd9\u6837\uff0c\u53ef\u4ee5\u4f7f\u5f97\u4f7f\u7528 <code class=\"language-javascript\">&lt;textarea&gt;</code> \u7684\u8868\u5355\u548c\u4f7f\u7528\u5355\u884c input \u7684\u8868\u5355\u975e\u5e38\u7c7b\u4f3c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">EssayForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'\u8bf7\u64b0\u5199\u4e00\u7bc7\u5173\u4e8e\u4f60\u559c\u6b22\u7684 DOM \u5143\u7d20\u7684\u6587\u7ae0.'</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\u63d0\u4ea4\u7684\u6587\u7ae0: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          \u6587\u7ae0:</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\u63d0\u4ea4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0c<code class=\"language-javascript\">this.state.value</code> \u521d\u59cb\u5316\u4e8e\u6784\u9020\u51fd\u6570\u4e2d\uff0c\u56e0\u6b64\u6587\u672c\u533a\u57df\u9ed8\u8ba4\u6709\u521d\u503c\u3002</p>\n<h2 id=\"the-select-tag\"><a class=\"anchor\" href=\"/react/forms#the-select-tag\"></a>select \u6807\u7b7e </h2>\n<p>\u5728 HTML \u4e2d\uff0c<code class=\"language-javascript\">&lt;select&gt;</code> \u521b\u5efa\u4e0b\u62c9\u5217\u8868\u6807\u7b7e\u3002\u4f8b\u5982\uff0c\u5982\u4e0b HTML \u521b\u5efa\u4e86\u6c34\u679c\u76f8\u5173\u7684\u4e0b\u62c9\u5217\u8868\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>grapefruit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\u8461\u8404\u67da<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lime<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\u9178\u6a59<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">selected</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>coconut<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\u6930\u5b50<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mango<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\u8292\u679c<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0c\u7531\u4e8e <code class=\"language-javascript\">selected</code> \u5c5e\u6027\u7684\u7f18\u6545\uff0c\u6930\u5b50\u9009\u9879\u9ed8\u8ba4\u88ab\u9009\u4e2d\u3002React \u5e76\u4e0d\u4f1a\u4f7f\u7528 <code class=\"language-javascript\">selected</code> \u5c5e\u6027\uff0c\u800c\u662f\u5728\u6839 <code class=\"language-javascript\">select</code> \u6807\u7b7e\u4e0a\u4f7f\u7528 <code class=\"language-javascript\">value</code> \u5c5e\u6027\u3002\u8fd9\u5728\u53d7\u63a7\u7ec4\u4ef6\u4e2d\u66f4\u4fbf\u6377\uff0c\u56e0\u4e3a\u60a8\u53ea\u9700\u8981\u5728\u6839\u6807\u7b7e\u4e2d\u66f4\u65b0\u5b83\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FlavorForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">'coconut'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'\u4f60\u559c\u6b22\u7684\u98ce\u5473\u662f: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          \u9009\u62e9\u4f60\u559c\u6b22\u7684\u98ce\u5473:</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>grapefruit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u8461\u8404\u67da</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>lime<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u9178\u6a59</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>coconut<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u6930\u5b50</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mango<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u8292\u679c</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\u63d0\u4ea4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/JbbEzX?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u603b\u7684\u6765\u8bf4\uff0c\u8fd9\u4f7f\u5f97 <code class=\"language-javascript\">&lt;input type=\"text\"&gt;</code>, <code class=\"language-javascript\">&lt;textarea&gt;</code> \u548c <code class=\"language-javascript\">&lt;select&gt;</code> \u4e4b\u7c7b\u7684\u6807\u7b7e\u90fd\u975e\u5e38\u76f8\u4f3c\u2014\u5b83\u4eec\u90fd\u63a5\u53d7\u4e00\u4e2a <code class=\"language-javascript\">value</code> \u5c5e\u6027\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u5b9e\u73b0\u53d7\u63a7\u7ec4\u4ef6\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4f60\u53ef\u4ee5\u5c06\u6570\u7ec4\u4f20\u9012\u5230 <code class=\"language-javascript\">value</code> \u5c5e\u6027\u4e2d\uff0c\u4ee5\u652f\u6301\u5728 <code class=\"language-javascript\">select</code> \u6807\u7b7e\u4e2d\u9009\u62e9\u591a\u4e2a\u9009\u9879\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">multiple</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">'B'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'C'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n</div>\n<h2 id=\"the-file-input-tag\"><a class=\"anchor\" href=\"/react/forms#the-file-input-tag\"></a>\u6587\u4ef6 input \u6807\u7b7e </h2>\n<p>\u5728 HTML \u4e2d\uff0c<code class=\"language-javascript\">&lt;input type=\"file\"&gt;</code> \u5141\u8bb8\u7528\u6237\u4ece\u5b58\u50a8\u8bbe\u5907\u4e2d\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\uff0c\u5c06\u5176\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff0c\u6216\u901a\u8fc7\u4f7f\u7528 JavaScript \u7684 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications\">File API</a> \u8fdb\u884c\u63a7\u5236\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u56e0\u4e3a\u5b83\u7684 value \u53ea\u8bfb\uff0c\u6240\u4ee5\u5b83\u662f React \u4e2d\u7684\u4e00\u4e2a<strong>\u975e\u53d7\u63a7</strong>\u7ec4\u4ef6\u3002\u5c06\u4e0e\u5176\u4ed6\u975e\u53d7\u63a7\u7ec4\u4ef6<a href=\"/react/uncontrolled-components#the-file-input-tag\">\u5728\u540e\u7eed\u6587\u6863\u4e2d</a>\u4e00\u8d77\u8ba8\u8bba\u3002</p>\n<h2 id=\"handling-multiple-inputs\"><a class=\"anchor\" href=\"/react/forms#handling-multiple-inputs\"></a>\u5904\u7406\u591a\u4e2a\u8f93\u5165 </h2>\n<p>\u5f53\u9700\u8981\u5904\u7406\u591a\u4e2a <code class=\"language-javascript\">input</code> \u5143\u7d20\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u6bcf\u4e2a\u5143\u7d20\u6dfb\u52a0 <code class=\"language-javascript\">name</code> \u5c5e\u6027\uff0c\u5e76\u8ba9\u5904\u7406\u51fd\u6570\u6839\u636e <code class=\"language-javascript\">event.target.name</code> \u7684\u503c\u9009\u62e9\u8981\u6267\u884c\u7684\u64cd\u4f5c\u3002</p>\n<p>\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Reservation</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">isGoing</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">numberOfGuests</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleInputChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleInputChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'checkbox'</span> <span class=\"token operator\">?</span> target<span class=\"token punctuation\">.</span>checked <span class=\"token operator\">:</span> target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value</span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          \u53c2\u4e0e:</span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>isGoing<span class=\"token punctuation\">\"</span></span></span>            <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">checked</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isGoing<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          \u6765\u5bbe\u4eba\u6570:</span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n<span class=\"gatsby-highlight-code-line\">            <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>numberOfGuests<span class=\"token punctuation\">\"</span></span></span>            <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>numberOfGuests<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/wgedvV?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u8fd9\u91cc\u4f7f\u7528\u4e86 ES6 <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names\">\u8ba1\u7b97\u5c5e\u6027\u540d\u79f0</a>\u7684\u8bed\u6cd5\u66f4\u65b0\u7ed9\u5b9a\u8f93\u5165\u540d\u79f0\u5bf9\u5e94\u7684 state \u503c\uff1a</p>\n<p>\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7b49\u540c ES5:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> partialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">partialState<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>partialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u53e6\u5916\uff0c\u7531\u4e8e <code class=\"language-javascript\">setState()</code> \u81ea\u52a8<a href=\"/react/state-and-lifecycle#state-updates-are-merged\">\u5c06\u90e8\u5206 state \u5408\u5e76\u5230\u5f53\u524d state</a>, \u53ea\u9700\u8c03\u7528\u5b83\u66f4\u6539\u90e8\u5206 state \u5373\u53ef\u3002</p>\n<h2 id=\"controlled-input-null-value\"><a class=\"anchor\" href=\"/react/forms#controlled-input-null-value\"></a>\u53d7\u63a7\u8f93\u5165\u7a7a\u503c </h2>\n<p>\u5728<a href=\"/react/forms#controlled-components\">\u53d7\u63a7\u7ec4\u4ef6</a>\u4e0a\u6307\u5b9a <code class=\"language-javascript\">value</code> \u7684 prop \u4f1a\u963b\u6b62\u7528\u6237\u66f4\u6539\u8f93\u5165\u3002\u5982\u679c\u4f60\u6307\u5b9a\u4e86 <code class=\"language-javascript\">value</code>\uff0c\u4f46\u8f93\u5165\u4ecd\u53ef\u7f16\u8f91\uff0c\u5219\u53ef\u80fd\u662f\u4f60\u610f\u5916\u5730\u5c06 <code class=\"language-javascript\">value</code> \u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">undefined</code> \u6216 <code class=\"language-javascript\">null</code>\u3002</p>\n<p>\u4e0b\u9762\u7684\u4ee3\u7801\u6f14\u793a\u4e86\u8fd9\u4e00\u70b9\u3002\uff08\u8f93\u5165\u6700\u521d\u88ab\u9501\u5b9a\uff0c\u4f46\u5728\u77ed\u65f6\u95f4\u5ef6\u8fdf\u540e\u53d8\u4e3a\u53ef\u7f16\u8f91\u3002\uff09</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>mountNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hi<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>mountNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"alternatives-to-controlled-components\"><a class=\"anchor\" href=\"/react/forms#alternatives-to-controlled-components\"></a>\u53d7\u63a7\u7ec4\u4ef6\u7684\u66ff\u4ee3\u54c1 </h2>\n<p>\u6709\u65f6\u4f7f\u7528\u53d7\u63a7\u7ec4\u4ef6\u4f1a\u5f88\u9ebb\u70e6\uff0c\u56e0\u4e3a\u4f60\u9700\u8981\u4e3a\u6570\u636e\u53d8\u5316\u7684\u6bcf\u79cd\u65b9\u5f0f\u90fd\u7f16\u5199\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u5e76\u901a\u8fc7\u4e00\u4e2a React \u7ec4\u4ef6\u4f20\u9012\u6240\u6709\u7684\u8f93\u5165 state\u3002\u5f53\u4f60\u5c06\u4e4b\u524d\u7684\u4ee3\u7801\u5e93\u8f6c\u6362\u4e3a React \u6216\u5c06 React \u5e94\u7528\u7a0b\u5e8f\u4e0e\u975e React \u5e93\u96c6\u6210\u65f6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u4ee4\u4eba\u538c\u70e6\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u4f7f\u7528<a href=\"/react/uncontrolled-components\">\u975e\u53d7\u63a7\u7ec4\u4ef6</a>, \u8fd9\u662f\u5b9e\u73b0\u8f93\u5165\u8868\u5355\u7684\u53e6\u4e00\u79cd\u65b9\u5f0f\u3002</p>\n<h2 id=\"fully-fledged-solutions\"><a class=\"anchor\" href=\"/react/forms#fully-fledged-solutions\"></a>\u6210\u719f\u7684\u89e3\u51b3\u65b9\u6848 </h2>\n<p>\u5982\u679c\u4f60\u60f3\u5bfb\u627e\u5305\u542b\u9a8c\u8bc1\u3001\u8ffd\u8e2a\u8bbf\u95ee\u5b57\u6bb5\u4ee5\u53ca\u5904\u7406\u8868\u5355\u63d0\u4ea4\u7684\u5b8c\u6574\u89e3\u51b3\u65b9\u6848\uff0c\u4f7f\u7528 <a class=\"external-link\" href=\"https://jaredpalmer.com/formik\">Formik</a> \u662f\u4e0d\u9519\u7684\u9009\u62e9\u3002\u7136\u800c\uff0c\u5b83\u4e5f\u662f\u5efa\u7acb\u5728\u53d7\u63a7\u7ec4\u4ef6\u548c\u7ba1\u7406 state \u7684\u57fa\u7840\u4e4b\u4e0a \u2014\u2014 \u6240\u4ee5\u4e0d\u8981\u5ffd\u89c6\u5b66\u4e60\u5b83\u4eec\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/forms.md\">Edit this page</a></p></div></article>", "path": "/react/forms", "nav": ["/react/lists-and-keys", "/react/lifting-state-up"]}, {"key": "10. \u72b6\u6001\u63d0\u5347", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u901a\u5e38\uff0c\u591a\u4e2a\u7ec4\u4ef6\u9700\u8981\u53cd\u6620\u76f8\u540c\u7684\u53d8\u5316\u6570\u636e\uff0c\u8fd9\u65f6\u6211\u4eec\u5efa\u8bae\u5c06\u5171\u4eab\u72b6\u6001\u63d0\u5347\u5230\u6700\u8fd1\u7684\u5171\u540c\u7236\u7ec4\u4ef6\u4e2d\u53bb\u3002\u8ba9\u6211\u4eec\u770b\u770b\u5b83\u662f\u5982\u4f55\u8fd0\u4f5c\u7684\u3002</p>\n<p>\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u7528\u4e8e\u8ba1\u7b97\u6c34\u5728\u7ed9\u5b9a\u6e29\u5ea6\u4e0b\u662f\u5426\u4f1a\u6cb8\u817e\u7684\u6e29\u5ea6\u8ba1\u7b97\u5668\u3002</p>\n<p>\u6211\u4eec\u5c06\u4ece\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">BoilingVerdict</code> \u7684\u7ec4\u4ef6\u5f00\u59cb\uff0c\u5b83\u63a5\u53d7 <code class=\"language-javascript\">celsius</code> \u6e29\u5ea6\u4f5c\u4e3a\u4e00\u4e2a prop\uff0c\u5e76\u636e\u6b64\u6253\u5370\u51fa\u8be5\u6e29\u5ea6\u662f\u5426\u8db3\u4ee5\u5c06\u6c34\u716e\u6cb8\u7684\u7ed3\u679c\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">BoilingVerdict</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>celsius <span class=\"token operator\">&gt;=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">The water would boil.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">The water would not boil.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u63a5\u4e0b\u6765, \u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">Calculator</code> \u7684\u7ec4\u4ef6\u3002\u5b83\u6e32\u67d3\u4e00\u4e2a\u7528\u4e8e\u8f93\u5165\u6e29\u5ea6\u7684 <code class=\"language-javascript\">&lt;input&gt;</code>\uff0c\u5e76\u5c06\u5176\u503c\u4fdd\u5b58\u5728 <code class=\"language-javascript\">this.state.temperature</code> \u4e2d\u3002</p>\n<p>\u53e6\u5916, \u5b83\u6839\u636e\u5f53\u524d\u8f93\u5165\u503c\u6e32\u67d3 <code class=\"language-javascript\">BoilingVerdict</code> \u7ec4\u4ef6\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Calculator</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> temperature <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fieldset</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>legend</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Enter temperature in Celsius:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>legend</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>temperature<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoilingVerdict</span></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">celsius</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span>temperature<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fieldset</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/ZXeOBm?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<h2 id=\"adding-a-second-input\"><a class=\"anchor\" href=\"/react/lifting-state-up#adding-a-second-input\"></a>\u6dfb\u52a0\u7b2c\u4e8c\u4e2a\u8f93\u5165\u6846 </h2>\n<p>\u6211\u4eec\u7684\u65b0\u9700\u6c42\u662f\uff0c\u5728\u5df2\u6709\u6444\u6c0f\u6e29\u5ea6\u8f93\u5165\u6846\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u63d0\u4f9b\u534e\u6c0f\u5ea6\u7684\u8f93\u5165\u6846\uff0c\u5e76\u4fdd\u6301\u4e24\u4e2a\u8f93\u5165\u6846\u7684\u6570\u636e\u540c\u6b65\u3002</p>\n<p>\u6211\u4eec\u5148\u4ece <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u62bd\u79bb\u51fa <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\uff0c\u7136\u540e\u4e3a\u5176\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684 <code class=\"language-javascript\">scale</code> prop\uff0c\u5b83\u53ef\u4ee5\u662f <code class=\"language-javascript\">\"c\"</code> \u6216\u662f <code class=\"language-javascript\">\"f\"</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> scaleNames <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">c</span><span class=\"token operator\">:</span> <span class=\"token string\">'Celsius'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">f</span><span class=\"token operator\">:</span> <span class=\"token string\">'Fahrenheit'</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TemperatureInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> temperature <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> scale <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fieldset</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>legend</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Enter temperature in </span><span class=\"token punctuation\">{</span>scaleNames<span class=\"token punctuation\">[</span>scale<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>legend</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>temperature<span class=\"token punctuation\">}</span></span>\n               <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fieldset</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4fee\u6539 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u8ba9\u5b83\u6e32\u67d3\u4e24\u4e2a\u72ec\u7acb\u7684\u6e29\u5ea6\u8f93\u5165\u6846\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Calculator</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TemperatureInput</span></span> <span class=\"token attr-name\">scale</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>c<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TemperatureInput</span></span> <span class=\"token attr-name\">scale</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>f<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/jGBryx?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u6211\u4eec\u73b0\u5728\u6709\u4e86\u4e24\u4e2a\u8f93\u5165\u6846\uff0c\u4f46\u5f53\u4f60\u5728\u5176\u4e2d\u4e00\u4e2a\u8f93\u5165\u6e29\u5ea6\u65f6\uff0c\u53e6\u4e00\u4e2a\u5e76\u4e0d\u4f1a\u66f4\u65b0\u3002\u8fd9\u4e0e\u6211\u4eec\u7684\u8981\u6c42\u76f8\u77db\u76fe\uff1a\u6211\u4eec\u5e0c\u671b\u8ba9\u5b83\u4eec\u4fdd\u6301\u540c\u6b65\u3002</p>\n<p>\u53e6\u5916\uff0c\u6211\u4eec\u4e5f\u4e0d\u80fd\u901a\u8fc7 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u5c55\u793a <code class=\"language-javascript\">BoilingVerdict</code> \u7ec4\u4ef6\u7684\u6e32\u67d3\u7ed3\u679c\u3002\u56e0\u4e3a <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u5e76\u4e0d\u77e5\u9053\u9690\u85cf\u5728 <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u4e2d\u7684\u5f53\u524d\u6e29\u5ea6\u662f\u591a\u5c11\u3002</p>\n<h2 id=\"writing-conversion-functions\"><a class=\"anchor\" href=\"/react/lifting-state-up#writing-conversion-functions\"></a>\u7f16\u5199\u8f6c\u6362\u51fd\u6570 </h2>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u5c06\u7f16\u5199\u4e24\u4e2a\u53ef\u4ee5\u5728\u6444\u6c0f\u5ea6\u4e0e\u534e\u6c0f\u5ea6\u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\u7684\u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">toCelsius</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fahrenheit</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>fahrenheit <span class=\"token operator\">-</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">5</span> <span class=\"token operator\">/</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">toFahrenheit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">celsius</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>celsius <span class=\"token operator\">*</span> <span class=\"token number\">9</span> <span class=\"token operator\">/</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">32</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e0a\u8ff0\u4e24\u4e2a\u51fd\u6570\u4ec5\u505a\u6570\u503c\u8f6c\u6362\u3002\u800c\u6211\u4eec\u5c06\u7f16\u5199\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u53d7\u5b57\u7b26\u4e32\u7c7b\u578b\u7684 <code class=\"language-javascript\">temperature</code> \u548c\u8f6c\u6362\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u5b83\u6765\u4f9d\u636e\u4e00\u4e2a\u8f93\u5165\u6846\u7684\u503c\u8ba1\u7b97\u51fa\u53e6\u4e00\u4e2a\u8f93\u5165\u6846\u7684\u503c\u3002</p>\n<p>\u5f53\u8f93\u5165 <code class=\"language-javascript\">temperature</code> \u7684\u503c\u65e0\u6548\u65f6\uff0c\u51fd\u6570\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32\uff0c\u53cd\u4e4b\uff0c\u5219\u8fd4\u56de\u4fdd\u7559\u4e09\u4f4d\u5c0f\u6570\u5e76\u56db\u820d\u4e94\u5165\u540e\u7684\u8f6c\u6362\u7ed3\u679c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">tryConvert</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">temperature<span class=\"token punctuation\">,</span> convert</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> input <span class=\"token operator\">=</span> <span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span>temperature<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Number<span class=\"token punctuation\">.</span><span class=\"token function\">isNaN</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> output <span class=\"token operator\">=</span> <span class=\"token function\">convert</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> rounded <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span>output <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> rounded<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f8b\u5982\uff0c<code class=\"language-javascript\">tryConvert('abc', toCelsius)</code> \u8fd4\u56de\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\uff0c\u800c <code class=\"language-javascript\">tryConvert('10.22', toFahrenheit)</code> \u8fd4\u56de <code class=\"language-javascript\">'50.396'</code>\u3002</p>\n<h2 id=\"lifting-state-up\"><a class=\"anchor\" href=\"/react/lifting-state-up#lifting-state-up\"></a>\u72b6\u6001\u63d0\u5347 </h2>\n<p>\u5230\u76ee\u524d\u4e3a\u6b62, \u4e24\u4e2a <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u5747\u5728\u5404\u81ea\u5185\u90e8\u7684 state \u4e2d\u76f8\u4e92\u72ec\u7acb\u5730\u4fdd\u5b58\u7740\u5404\u81ea\u7684\u6570\u636e\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TemperatureInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> temperature <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">;</span></span>    <span class=\"token comment\">// ...  </span></code></pre></div>\n<p>\u7136\u800c\uff0c\u6211\u4eec\u5e0c\u671b\u4e24\u4e2a\u8f93\u5165\u6846\u5185\u7684\u6570\u503c\u5f7c\u6b64\u80fd\u591f\u540c\u6b65\u3002\u5f53\u6211\u4eec\u66f4\u65b0\u6444\u6c0f\u5ea6\u8f93\u5165\u6846\u5185\u7684\u6570\u503c\u65f6\uff0c\u534e\u6c0f\u5ea6\u8f93\u5165\u6846\u5185\u5e94\u5f53\u663e\u793a\u8f6c\u6362\u540e\u7684\u534e\u6c0f\u6e29\u5ea6\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p>\n<p>\u5728 React \u4e2d\uff0c\u5c06\u591a\u4e2a\u7ec4\u4ef6\u4e2d\u9700\u8981\u5171\u4eab\u7684 state \u5411\u4e0a\u79fb\u52a8\u5230\u5b83\u4eec\u7684\u6700\u8fd1\u5171\u540c\u7236\u7ec4\u4ef6\u4e2d\uff0c\u4fbf\u53ef\u5b9e\u73b0\u5171\u4eab state\u3002\u8fd9\u5c31\u662f\u6240\u8c13\u7684\u201c\u72b6\u6001\u63d0\u5347\u201d\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06 <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u4e2d\u7684 state \u79fb\u52a8\u81f3 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u53bb\u3002</p>\n<p>\u5982\u679c <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u62e5\u6709\u4e86\u5171\u4eab\u7684 state\uff0c\u5b83\u5c06\u6210\u4e3a\u4e24\u4e2a\u6e29\u5ea6\u8f93\u5165\u6846\u4e2d\u5f53\u524d\u6e29\u5ea6\u7684\u201c\u6570\u636e\u6e90\u201d\u3002\u5b83\u80fd\u591f\u4f7f\u5f97\u4e24\u4e2a\u6e29\u5ea6\u8f93\u5165\u6846\u7684\u6570\u503c\u5f7c\u6b64\u4fdd\u6301\u4e00\u81f4\u3002\u7531\u4e8e\u4e24\u4e2a <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u7684 props \u5747\u6765\u81ea\u5171\u540c\u7684\u7236\u7ec4\u4ef6 <code class=\"language-javascript\">Calculator</code>\uff0c\u56e0\u6b64\u4e24\u4e2a\u8f93\u5165\u6846\u4e2d\u7684\u5185\u5bb9\u5c06\u59cb\u7ec8\u4fdd\u6301\u4e00\u81f4\u3002</p>\n<p>\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u662f\u5982\u4f55\u4e00\u6b65\u4e00\u6b65\u5b9e\u73b0\u7684\u3002</p>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u5c06 <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">this.state.temperature</code> \u66ff\u6362\u4e3a <code class=\"language-javascript\">this.props.temperature</code>\u3002\u73b0\u5728\uff0c\u6211\u4eec\u5148\u5047\u5b9a <code class=\"language-javascript\">this.props.temperature</code> \u5df2\u7ecf\u5b58\u5728\uff0c\u5c3d\u7ba1\u5c06\u6765\u6211\u4eec\u9700\u8981\u901a\u8fc7 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u5c06\u5176\u4f20\u5165\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Before: const temperature = this.state.temperature;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> temperature <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">;</span></span>    <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u6211\u4eec\u77e5\u9053 <a href=\"/react/components-and-props#props-are-read-only\">props \u662f\u53ea\u8bfb\u7684</a>\u3002\u5f53 <code class=\"language-javascript\">temperature</code> \u5b58\u5728\u4e8e <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u7684 state \u4e2d\u65f6\uff0c\u7ec4\u4ef6\u8c03\u7528 <code class=\"language-javascript\">this.setState()</code> \u4fbf\u53ef\u4fee\u6539\u5b83\u3002\u7136\u800c\uff0c<code class=\"language-javascript\">temperature</code> \u662f\u7531\u7236\u7ec4\u4ef6\u4f20\u5165\u7684 prop\uff0c<code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u4fbf\u5931\u53bb\u4e86\u5bf9\u5b83\u7684\u63a7\u5236\u6743\u3002</p>\n<p>\u5728 React \u4e2d\uff0c\u8fd9\u4e2a\u95ee\u9898\u901a\u5e38\u662f\u901a\u8fc7\u4f7f\u7528\u201c\u53d7\u63a7\u7ec4\u4ef6\u201d\u6765\u89e3\u51b3\u7684\u3002\u4e0e DOM \u4e2d\u7684 <code class=\"language-javascript\">&lt;input&gt;</code> \u63a5\u53d7 <code class=\"language-javascript\">value</code> \u548c <code class=\"language-javascript\">onChange</code> \u4e00\u6837\uff0c\u81ea\u5b9a\u4e49\u7684 <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u63a5\u53d7 <code class=\"language-javascript\">temperature</code> \u548c <code class=\"language-javascript\">onTemperatureChange</code> \u8fd9\u4e24\u4e2a\u6765\u81ea\u7236\u7ec4\u4ef6 <code class=\"language-javascript\">Calculator</code> \u7684 props\u3002</p>\n<p>\u73b0\u5728\uff0c\u5f53 <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u60f3\u66f4\u65b0\u6e29\u5ea6\u65f6\uff0c\u9700\u8c03\u7528 <code class=\"language-javascript\">this.props.onTemperatureChange</code> \u6765\u66f4\u65b0\u5b83\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Before: this.setState({temperature: e.target.value});</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onTemperatureChange</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token comment\">// ...</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">temperature</code> \u548c <code class=\"language-javascript\">onTemperatureChange</code> \u8fd9\u4e24\u4e2a prop \u7684\u547d\u540d\u6ca1\u6709\u4efb\u4f55\u7279\u6b8a\u542b\u4e49\u3002\u6211\u4eec\u53ef\u4ee5\u7ed9\u5b83\u4eec\u53d6\u5176\u5b83\u4efb\u610f\u7684\u540d\u5b57\uff0c\u4f8b\u5982\uff0c\u628a\u5b83\u4eec\u547d\u540d\u4e3a <code class=\"language-javascript\">value</code> \u548c <code class=\"language-javascript\">onChange</code> \u5c31\u662f\u4e00\u79cd\u4e60\u60ef\u3002</p>\n</div>\n<p><code class=\"language-javascript\">onTemperatureChange</code> \u7684 prop \u548c <code class=\"language-javascript\">temperature</code> \u7684 prop \u4e00\u6837\uff0c\u5747\u7531\u7236\u7ec4\u4ef6 <code class=\"language-javascript\">Calculator</code> \u63d0\u4f9b\u3002\u5b83\u901a\u8fc7\u4fee\u6539\u7236\u7ec4\u4ef6\u81ea\u8eab\u7684\u5185\u90e8 state \u6765\u5904\u7406\u6570\u636e\u7684\u53d8\u5316\uff0c\u8fdb\u800c\u4f7f\u7528\u65b0\u7684\u6570\u503c\u91cd\u65b0\u6e32\u67d3\u4e24\u4e2a\u8f93\u5165\u6846\u3002\u6211\u4eec\u5c06\u5f88\u5feb\u770b\u5230\u4fee\u6539\u540e\u7684 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u6548\u679c\u3002</p>\n<p>\u5728\u6df1\u5165\u7814\u7a76 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u7684\u53d8\u5316\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0b <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u7684\u53d8\u5316\u3002\u6211\u4eec\u79fb\u9664\u7ec4\u4ef6\u81ea\u8eab\u7684 state\uff0c\u901a\u8fc7\u4f7f\u7528 <code class=\"language-javascript\">this.props.temperature</code> \u66ff\u4ee3 <code class=\"language-javascript\">this.state.temperature</code> \u6765\u8bfb\u53d6\u6e29\u5ea6\u6570\u636e\u3002\u5f53\u6211\u4eec\u60f3\u8981\u54cd\u5e94\u6570\u636e\u6539\u53d8\u65f6\uff0c\u6211\u4eec\u9700\u8981\u8c03\u7528 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u63d0\u4f9b\u7684 <code class=\"language-javascript\">this.props.onTemperatureChange()</code>\uff0c\u800c\u4e0d\u518d\u4f7f\u7528 <code class=\"language-javascript\">this.setState()</code>\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TemperatureInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onTemperatureChange</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> temperature <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">const</span> scale <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fieldset</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>legend</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Enter temperature in </span><span class=\"token punctuation\">{</span>scaleNames<span class=\"token punctuation\">[</span>scale<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>legend</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>temperature<span class=\"token punctuation\">}</span></span>\n               <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fieldset</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u628a\u76ee\u5149\u8f6c\u5411 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u3002</p>\n<p>\u6211\u4eec\u4f1a\u628a\u5f53\u524d\u8f93\u5165\u7684 <code class=\"language-javascript\">temperature</code> \u548c <code class=\"language-javascript\">scale</code> \u4fdd\u5b58\u5728\u7ec4\u4ef6\u5185\u90e8\u7684 state \u4e2d\u3002\u8fd9\u4e2a state \u5c31\u662f\u4ece\u4e24\u4e2a\u8f93\u5165\u6846\u7ec4\u4ef6\u4e2d\u201c\u63d0\u5347\u201d\u800c\u6765\u7684\uff0c\u5e76\u4e14\u5b83\u5c06\u7528\u4f5c\u4e24\u4e2a\u8f93\u5165\u6846\u7ec4\u4ef6\u7684\u5171\u540c\u201c\u6570\u636e\u6e90\u201d\u3002\u8fd9\u662f\u6211\u4eec\u4e3a\u4e86\u6e32\u67d3\u4e24\u4e2a\u8f93\u5165\u6846\u6240\u9700\u8981\u7684\u6240\u6709\u6570\u636e\u7684\u6700\u5c0f\u8868\u793a\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5f53\u6211\u4eec\u5728\u6444\u6c0f\u5ea6\u8f93\u5165\u6846\u4e2d\u952e\u5165 37 \u65f6\uff0c<code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u7684 state \u5c06\u4f1a\u662f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> <span class=\"token string\">'37'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token string\">'c'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u6211\u4eec\u4e4b\u540e\u4fee\u6539\u534e\u6c0f\u5ea6\u7684\u8f93\u5165\u6846\u4e2d\u7684\u5185\u5bb9\u4e3a 212 \u65f6\uff0c<code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u7684 state \u5c06\u4f1a\u662f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> <span class=\"token string\">'212'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token string\">'f'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u53ef\u4ee5\u5b58\u50a8\u4e24\u4e2a\u8f93\u5165\u6846\u4e2d\u7684\u503c\uff0c\u4f46\u8fd9\u5e76\u4e0d\u662f\u5fc5\u8981\u7684\u3002\u6211\u4eec\u53ea\u9700\u8981\u5b58\u50a8\u6700\u8fd1\u4fee\u6539\u7684\u6e29\u5ea6\u53ca\u5176\u8ba1\u91cf\u5355\u4f4d\u5373\u53ef\uff0c\u6839\u636e\u5f53\u524d\u7684 <code class=\"language-javascript\">temperature</code> \u548c <code class=\"language-javascript\">scale</code> \u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u53e6\u4e00\u4e2a\u8f93\u5165\u6846\u7684\u503c\u3002</p>\n<p>\u7531\u4e8e\u4e24\u4e2a\u8f93\u5165\u6846\u4e2d\u7684\u6570\u503c\u7531\u540c\u4e00\u4e2a state \u8ba1\u7b97\u800c\u6765\uff0c\u56e0\u6b64\u5b83\u4eec\u59cb\u7ec8\u4fdd\u6301\u540c\u6b65\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Calculator</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleCelsiusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleCelsiusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleFahrenheitChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleFahrenheitChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">temperature</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleCelsiusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">temperature</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> temperature<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleFahrenheitChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">temperature</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">,</span> temperature<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> scale <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> temperature <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> celsius <span class=\"token operator\">=</span> scale <span class=\"token operator\">===</span> <span class=\"token string\">'f'</span> <span class=\"token operator\">?</span> <span class=\"token function\">tryConvert</span><span class=\"token punctuation\">(</span>temperature<span class=\"token punctuation\">,</span> toCelsius<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> temperature<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> fahrenheit <span class=\"token operator\">=</span> scale <span class=\"token operator\">===</span> <span class=\"token string\">'c'</span> <span class=\"token operator\">?</span> <span class=\"token function\">tryConvert</span><span class=\"token punctuation\">(</span>temperature<span class=\"token punctuation\">,</span> toFahrenheit<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> temperature<span class=\"token punctuation\">;</span></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TemperatureInput</span></span>\n          <span class=\"token attr-name\">scale</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>c<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">temperature</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>celsius<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">onTemperatureChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleCelsiusChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TemperatureInput</span></span>\n          <span class=\"token attr-name\">scale</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>f<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">temperature</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>fahrenheit<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">onTemperatureChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleFahrenheitChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BoilingVerdict</span></span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">celsius</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">parseFloat</span><span class=\"token punctuation\">(</span>celsius<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/WZpxpz?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u73b0\u5728\u65e0\u8bba\u4f60\u7f16\u8f91\u54ea\u4e2a\u8f93\u5165\u6846\u4e2d\u7684\u5185\u5bb9\uff0c<code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">this.state.temperature</code> \u548c <code class=\"language-javascript\">this.state.scale</code> \u5747\u4f1a\u88ab\u66f4\u65b0\u3002\u5176\u4e2d\u4e00\u4e2a\u8f93\u5165\u6846\u4fdd\u7559\u7528\u6237\u7684\u8f93\u5165\u5e76\u53d6\u503c\uff0c\u53e6\u4e00\u4e2a\u8f93\u5165\u6846\u59cb\u7ec8\u57fa\u4e8e\u8fd9\u4e2a\u503c\u663e\u793a\u8f6c\u6362\u540e\u7684\u7ed3\u679c\u3002</p>\n<p>\u8ba9\u6211\u4eec\u6765\u91cd\u65b0\u68b3\u7406\u4e00\u4e0b\u5f53\u4f60\u5bf9\u8f93\u5165\u6846\u5185\u5bb9\u8fdb\u884c\u7f16\u8f91\u65f6\u4f1a\u53d1\u751f\u4e9b\u4ec0\u4e48\uff1a</p>\n<ul>\n<li>React \u4f1a\u8c03\u7528 DOM \u4e2d <code class=\"language-javascript\">&lt;input&gt;</code> \u7684 <code class=\"language-javascript\">onChange</code> \u65b9\u6cd5\u3002\u5728\u672c\u5b9e\u4f8b\u4e2d\uff0c\u5b83\u662f <code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">handleChange</code> \u65b9\u6cd5\u3002</li>\n<li><code class=\"language-javascript\">TemperatureInput</code> \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">handleChange</code> \u65b9\u6cd5\u4f1a\u8c03\u7528 <code class=\"language-javascript\">this.props.onTemperatureChange()</code>\uff0c\u5e76\u4f20\u5165\u65b0\u8f93\u5165\u7684\u503c\u4f5c\u4e3a\u53c2\u6570\u3002\u5176 props \u8bf8\u5982 <code class=\"language-javascript\">onTemperatureChange</code> \u4e4b\u7c7b\uff0c\u5747\u7531\u7236\u7ec4\u4ef6 <code class=\"language-javascript\">Calculator</code> \u63d0\u4f9b\u3002</li>\n<li>\u8d77\u521d\u6e32\u67d3\u65f6\uff0c\u7528\u4e8e\u6444\u6c0f\u5ea6\u8f93\u5165\u7684\u5b50\u7ec4\u4ef6 <code class=\"language-javascript\">TemperatureInput</code> \u4e2d\u7684 <code class=\"language-javascript\">onTemperatureChange</code> \u65b9\u6cd5\u4e0e <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">handleCelsiusChange</code> \u65b9\u6cd5\u76f8\u540c\uff0c\u800c\uff0c\u7528\u4e8e\u534e\u6c0f\u5ea6\u8f93\u5165\u7684\u5b50\u7ec4\u4ef6 <code class=\"language-javascript\">TemperatureInput</code> \u4e2d\u7684 <code class=\"language-javascript\">onTemperatureChange</code> \u65b9\u6cd5\u4e0e <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">handleFahrenheitChange</code> \u65b9\u6cd5\u76f8\u540c\u3002\u56e0\u6b64\uff0c\u65e0\u8bba\u54ea\u4e2a\u8f93\u5165\u6846\u88ab\u7f16\u8f91\u90fd\u4f1a\u8c03\u7528 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u4e2d\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002</li>\n<li>\u5728\u8fd9\u4e9b\u65b9\u6cd5\u5185\u90e8\uff0c<code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u901a\u8fc7\u4f7f\u7528\u65b0\u7684\u8f93\u5165\u503c\u4e0e\u5f53\u524d\u8f93\u5165\u6846\u5bf9\u5e94\u7684\u6e29\u5ea6\u8ba1\u91cf\u5355\u4f4d\u6765\u8c03\u7528 <code class=\"language-javascript\">this.setState()</code> \u8fdb\u800c\u8bf7\u6c42 React \u91cd\u65b0\u6e32\u67d3\u81ea\u5df1\u672c\u8eab\u3002</li>\n<li>React \u8c03\u7528 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\u5f97\u5230\u7ec4\u4ef6\u7684 UI \u5448\u73b0\u3002\u6e29\u5ea6\u8f6c\u6362\u5728\u8fd9\u65f6\u8fdb\u884c\uff0c\u4e24\u4e2a\u8f93\u5165\u6846\u4e2d\u7684\u6570\u503c\u901a\u8fc7\u5f53\u524d\u8f93\u5165\u6e29\u5ea6\u548c\u5176\u8ba1\u91cf\u5355\u4f4d\u6765\u91cd\u65b0\u8ba1\u7b97\u83b7\u5f97\u3002</li>\n<li>React \u4f7f\u7528 <code class=\"language-javascript\">Calculator</code> \u7ec4\u4ef6\u63d0\u4f9b\u7684\u65b0 props \u5206\u522b\u8c03\u7528\u4e24\u4e2a <code class=\"language-javascript\">TemperatureInput</code> \u5b50\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u5b50\u7ec4\u4ef6\u7684 UI \u5448\u73b0\u3002</li>\n<li>React \u8c03\u7528 <code class=\"language-javascript\">BoilingVerdict</code> \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\uff0c\u5e76\u5c06\u6444\u6c0f\u6e29\u5ea6\u503c\u4ee5\u7ec4\u4ef6 props \u65b9\u5f0f\u4f20\u5165\u3002</li>\n<li>React DOM \u6839\u636e\u8f93\u5165\u503c\u5339\u914d\u6c34\u662f\u5426\u6cb8\u817e\uff0c\u5e76\u5c06\u7ed3\u679c\u66f4\u65b0\u81f3 DOM\u3002\u6211\u4eec\u521a\u521a\u7f16\u8f91\u7684\u8f93\u5165\u6846\u63a5\u6536\u5176\u5f53\u524d\u503c\uff0c\u53e6\u4e00\u4e2a\u8f93\u5165\u6846\u5185\u5bb9\u66f4\u65b0\u4e3a\u8f6c\u6362\u540e\u7684\u6e29\u5ea6\u503c\u3002</li>\n</ul>\n<p>\u5f97\u76ca\u4e8e\u6bcf\u6b21\u7684\u66f4\u65b0\u90fd\u7ecf\u5386\u76f8\u540c\u7684\u6b65\u9aa4\uff0c\u4e24\u4e2a\u8f93\u5165\u6846\u7684\u5185\u5bb9\u624d\u80fd\u59cb\u7ec8\u4fdd\u6301\u540c\u6b65\u3002</p>\n<h2 id=\"lessons-learned\"><a class=\"anchor\" href=\"/react/lifting-state-up#lessons-learned\"></a>\u5b66\u4e60\u5c0f\u7ed3 </h2>\n<p>\u5728 React \u5e94\u7528\u4e2d\uff0c\u4efb\u4f55\u53ef\u53d8\u6570\u636e\u5e94\u5f53\u53ea\u6709\u4e00\u4e2a\u76f8\u5bf9\u5e94\u7684\u552f\u4e00\u201c\u6570\u636e\u6e90\u201d\u3002\u901a\u5e38\uff0cstate \u90fd\u662f\u9996\u5148\u6dfb\u52a0\u5230\u9700\u8981\u6e32\u67d3\u6570\u636e\u7684\u7ec4\u4ef6\u4e2d\u53bb\u3002\u7136\u540e\uff0c\u5982\u679c\u5176\u4ed6\u7ec4\u4ef6\u4e5f\u9700\u8981\u8fd9\u4e2a state\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u5c06\u5b83\u63d0\u5347\u81f3\u8fd9\u4e9b\u7ec4\u4ef6\u7684\u6700\u8fd1\u5171\u540c\u7236\u7ec4\u4ef6\u4e2d\u3002\u4f60\u5e94\u5f53\u4f9d\u9760<a href=\"/react/state-and-lifecycle#the-data-flows-down\">\u81ea\u4e0a\u800c\u4e0b\u7684\u6570\u636e\u6d41</a>\uff0c\u800c\u4e0d\u662f\u5c1d\u8bd5\u5728\u4e0d\u540c\u7ec4\u4ef6\u95f4\u540c\u6b65 state\u3002</p>\n<p>\u867d\u7136\u63d0\u5347 state \u65b9\u5f0f\u6bd4\u53cc\u5411\u7ed1\u5b9a\u65b9\u5f0f\u9700\u8981\u7f16\u5199\u66f4\u591a\u7684\u201c\u6837\u677f\u201d\u4ee3\u7801\uff0c\u4f46\u5e26\u6765\u7684\u597d\u5904\u662f\uff0c\u6392\u67e5\u548c\u9694\u79bb bug \u6240\u9700\u7684\u5de5\u4f5c\u91cf\u5c06\u4f1a\u53d8\u5c11\u3002\u7531\u4e8e\u201c\u5b58\u5728\u201d\u4e8e\u7ec4\u4ef6\u4e2d\u7684\u4efb\u4f55 state\uff0c\u4ec5\u6709\u7ec4\u4ef6\u81ea\u5df1\u80fd\u591f\u4fee\u6539\u5b83\uff0c\u56e0\u6b64 bug \u7684\u6392\u67e5\u8303\u56f4\u88ab\u5927\u5927\u7f29\u51cf\u4e86\u3002\u6b64\u5916\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u903b\u8f91\u6765\u62d2\u7edd\u6216\u8f6c\u6362\u7528\u6237\u7684\u8f93\u5165\u3002</p>\n<p>\u5982\u679c\u67d0\u4e9b\u6570\u636e\u53ef\u4ee5\u7531 props \u6216 state \u63a8\u5bfc\u5f97\u51fa\uff0c\u90a3\u4e48\u5b83\u5c31\u4e0d\u5e94\u8be5\u5b58\u5728\u4e8e state \u4e2d\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u672c\u4f8b\u4e2d\u6211\u4eec\u6ca1\u6709\u5c06 <code class=\"language-javascript\">celsiusValue</code> \u548c <code class=\"language-javascript\">fahrenheitValue</code> \u4e00\u8d77\u4fdd\u5b58\uff0c\u800c\u662f\u4ec5\u4fdd\u5b58\u4e86\u6700\u540e\u4fee\u6539\u7684 <code class=\"language-javascript\">temperature</code> \u548c\u5b83\u7684 <code class=\"language-javascript\">scale</code>\u3002\u8fd9\u662f\u56e0\u4e3a\u53e6\u4e00\u4e2a\u8f93\u5165\u6846\u7684\u6e29\u5ea6\u503c\u59cb\u7ec8\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e24\u4e2a\u503c\u4ee5\u53ca\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u83b7\u5f97\u3002\u8fd9\u4f7f\u5f97\u6211\u4eec\u80fd\u591f\u6e05\u9664\u8f93\u5165\u6846\u5185\u5bb9\uff0c\u4ea6\u6216\u662f\uff0c\u5728\u4e0d\u635f\u5931\u7528\u6237\u64cd\u4f5c\u7684\u8f93\u5165\u6846\u5185\u6570\u503c\u7cbe\u5ea6\u7684\u524d\u63d0\u4e0b\u5bf9\u53e6\u4e00\u4e2a\u8f93\u5165\u6846\u5185\u7684\u8f6c\u6362\u6570\u503c\u505a\u56db\u820d\u4e94\u5165\u7684\u64cd\u4f5c\u3002</p>\n<p>\u5f53\u4f60\u5728 UI \u4e2d\u53d1\u73b0\u9519\u8bef\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-devtools\">React \u5f00\u53d1\u8005\u5de5\u5177</a> \u6765\u68c0\u67e5\u95ee\u9898\u7ec4\u4ef6\u7684 props\uff0c\u5e76\u4e14\u6309\u7167\u7ec4\u4ef6\u6811\u7ed3\u6784\u9010\u7ea7\u5411\u4e0a\u641c\u5bfb\uff0c\u76f4\u5230\u5b9a\u4f4d\u5230\u8d1f\u8d23\u66f4\u65b0 state \u7684\u90a3\u4e2a\u7ec4\u4ef6\u3002\u8fd9\u4f7f\u5f97\u4f60\u80fd\u591f\u8ffd\u8e2a\u5230\u4ea7\u751f bug \u7684\u6e90\u5934\uff1a</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//ef94afc3447d75cdc245c77efb0d63be/react-devtools-state.gif\">Image link</a></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/lifting-state-up.md\">Edit this page</a></p></div></article>", "path": "/react/lifting-state-up", "nav": ["/react/forms", "/react/composition-vs-inheritance"]}, {"key": "11. \u7ec4\u5408 vs \u7ee7\u627f", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u6709\u5341\u5206\u5f3a\u5927\u7684\u7ec4\u5408\u6a21\u5f0f\u3002\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u7ec4\u5408\u800c\u975e\u7ee7\u627f\u6765\u5b9e\u73b0\u7ec4\u4ef6\u95f4\u7684\u4ee3\u7801\u91cd\u7528\u3002</p>\n<p>\u5728\u8fd9\u7bc7\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u5c06\u8003\u8651\u521d\u5b66 React \u7684\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u7ee7\u627f\u65f6\u7ecf\u5e38\u4f1a\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\uff0c\u5e76\u5c55\u793a\u5982\u4f55\u901a\u8fc7\u7ec4\u5408\u601d\u60f3\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u3002</p>\n<h2 id=\"containment\"><a class=\"anchor\" href=\"/react/composition-vs-inheritance#containment\"></a>\u5305\u542b\u5173\u7cfb </h2>\n<p>\u6709\u4e9b\u7ec4\u4ef6\u65e0\u6cd5\u63d0\u524d\u77e5\u6653\u5b83\u4eec\u5b50\u7ec4\u4ef6\u7684\u5177\u4f53\u5185\u5bb9\u3002\u5728 <code class=\"language-javascript\">Sidebar</code>\uff08\u4fa7\u8fb9\u680f\uff09\u548c <code class=\"language-javascript\">Dialog</code>\uff08\u5bf9\u8bdd\u6846\uff09\u7b49\u5c55\u73b0\u901a\u7528\u5bb9\u5668\uff08box\uff09\u7684\u7ec4\u4ef6\u4e2d\u7279\u522b\u5bb9\u6613\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\u3002</p>\n<p>\u6211\u4eec\u5efa\u8bae\u8fd9\u4e9b\u7ec4\u4ef6\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684 <code class=\"language-javascript\">children</code> prop \u6765\u5c06\u4ed6\u4eec\u7684\u5b50\u7ec4\u4ef6\u4f20\u9012\u5230\u6e32\u67d3\u7ed3\u679c\u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyBorder</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'FancyBorder FancyBorder-'</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u4f7f\u5f97\u522b\u7684\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 JSX \u5d4c\u5957\uff0c\u5c06\u4efb\u610f\u7ec4\u4ef6\u4f5c\u4e3a\u5b50\u7ec4\u4ef6\u4f20\u9012\u7ed9\u5b83\u4eec\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">WelcomeDialog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyBorder</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog-title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        Welcome</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog-message<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        Thank you for visiting our spacecraft!</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FancyBorder</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/ozqNOV?editors=0010\">\u5728 CodePen \u4e0a\u5c1d\u8bd5</a></strong></p>\n<p><code class=\"language-javascript\">&lt;FancyBorder&gt;</code> JSX \u6807\u7b7e\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u4f5c\u4e3a\u4e00\u4e2a <code class=\"language-javascript\">children</code> prop \u4f20\u9012\u7ed9 <code class=\"language-javascript\">FancyBorder</code> \u7ec4\u4ef6\u3002\u56e0\u4e3a <code class=\"language-javascript\">FancyBorder</code> \u5c06 <code class=\"language-javascript\">{props.children}</code> \u6e32\u67d3\u5728\u4e00\u4e2a <code class=\"language-javascript\">&lt;div&gt;</code> \u4e2d\uff0c\u88ab\u4f20\u9012\u7684\u8fd9\u4e9b\u5b50\u7ec4\u4ef6\u6700\u7ec8\u90fd\u4f1a\u51fa\u73b0\u5728\u8f93\u51fa\u7ed3\u679c\u4e2d\u3002</p>\n<p>\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5728\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u9884\u7559\u51fa\u51e0\u4e2a\u201c\u6d1e\u201d\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0d\u4f7f\u7528 <code class=\"language-javascript\">children</code>\uff0c\u800c\u662f\u81ea\u884c\u7ea6\u5b9a\uff1a\u5c06\u6240\u9700\u5185\u5bb9\u4f20\u5165 props\uff0c\u5e76\u4f7f\u7528\u76f8\u5e94\u7684 prop\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">SplitPane</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SplitPane<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SplitPane-left<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SplitPane-right<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SplitPane</span></span>\n      <span class=\"token attr-name\">left</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Contacts</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>      <span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">right</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Chat</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>      <span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/gwZOJp?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p><code class=\"language-javascript\">&lt;Contacts /&gt;</code> \u548c <code class=\"language-javascript\">&lt;Chat /&gt;</code> \u4e4b\u7c7b\u7684 React \u5143\u7d20\u672c\u8d28\u5c31\u662f\u5bf9\u8c61\uff08object\uff09\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u628a\u5b83\u4eec\u5f53\u4f5c props\uff0c\u50cf\u5176\u4ed6\u6570\u636e\u4e00\u6837\u4f20\u9012\u3002\u8fd9\u79cd\u65b9\u6cd5\u53ef\u80fd\u4f7f\u4f60\u60f3\u8d77\u522b\u7684\u5e93\u4e2d\u201c\u69fd\u201d\uff08slot\uff09\u7684\u6982\u5ff5\uff0c\u4f46\u5728 React \u4e2d\u6ca1\u6709\u201c\u69fd\u201d\u8fd9\u4e00\u6982\u5ff5\u7684\u9650\u5236\uff0c\u4f60\u53ef\u4ee5\u5c06\u4efb\u4f55\u4e1c\u897f\u4f5c\u4e3a props \u8fdb\u884c\u4f20\u9012\u3002</p>\n<h2 id=\"specialization\"><a class=\"anchor\" href=\"/react/composition-vs-inheritance#specialization\"></a>\u7279\u4f8b\u5173\u7cfb </h2>\n<p>\u6709\u4e9b\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u628a\u4e00\u4e9b\u7ec4\u4ef6\u770b\u4f5c\u662f\u5176\u4ed6\u7ec4\u4ef6\u7684\u7279\u6b8a\u5b9e\u4f8b\uff0c\u6bd4\u5982 <code class=\"language-javascript\">WelcomeDialog</code> \u53ef\u4ee5\u8bf4\u662f <code class=\"language-javascript\">Dialog</code> \u7684\u7279\u6b8a\u5b9e\u4f8b\u3002</p>\n<p>\u5728 React \u4e2d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7ec4\u5408\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002\u201c\u7279\u6b8a\u201d\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7 props \u5b9a\u5236\u5e76\u6e32\u67d3\u201c\u4e00\u822c\u201d\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Dialog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyBorder</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog-title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog-message<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FancyBorder</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">WelcomeDialog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Welcome<span class=\"token punctuation\">\"</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Thank you for visiting our spacecraft!<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/kkEaOZ?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u7ec4\u5408\u4e5f\u540c\u6837\u9002\u7528\u4e8e\u4ee5 class \u5f62\u5f0f\u5b9a\u4e49\u7684\u7ec4\u4ef6\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Dialog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyBorder</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog-title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dialog-message<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FancyBorder</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SignUpDialog</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSignUp <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSignUp</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">login</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dialog</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Mars Exploration Program<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>How should we refer to you?<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">               <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSignUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          Sign Me Up!</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Dialog</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">login</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleSignUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Welcome aboard, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>login<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/gwZbYa?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<h2 id=\"so-what-about-inheritance\"><a class=\"anchor\" href=\"/react/composition-vs-inheritance#so-what-about-inheritance\"></a>\u90a3\u4e48\u7ee7\u627f\u5462\uff1f </h2>\n<p>\u5728 Facebook\uff0c\u6211\u4eec\u5728\u6210\u767e\u4e0a\u5343\u4e2a\u7ec4\u4ef6\u4e2d\u4f7f\u7528 React\u3002\u6211\u4eec\u5e76\u6ca1\u6709\u53d1\u73b0\u9700\u8981\u4f7f\u7528\u7ee7\u627f\u6765\u6784\u5efa\u7ec4\u4ef6\u5c42\u6b21\u7684\u60c5\u51b5\u3002</p>\n<p>Props \u548c\u7ec4\u5408\u4e3a\u4f60\u63d0\u4f9b\u4e86\u6e05\u6670\u800c\u5b89\u5168\u5730\u5b9a\u5236\u7ec4\u4ef6\u5916\u89c2\u548c\u884c\u4e3a\u7684\u7075\u6d3b\u65b9\u5f0f\u3002\u6ce8\u610f\uff1a\u7ec4\u4ef6\u53ef\u4ee5\u63a5\u53d7\u4efb\u610f props\uff0c\u5305\u62ec\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff0cReact \u5143\u7d20\u4ee5\u53ca\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u4f60\u60f3\u8981\u5728\u7ec4\u4ef6\u95f4\u590d\u7528\u975e UI \u7684\u529f\u80fd\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u5176\u63d0\u53d6\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684 JavaScript \u6a21\u5757\uff0c\u5982\u51fd\u6570\u3001\u5bf9\u8c61\u6216\u8005\u7c7b\u3002\u7ec4\u4ef6\u53ef\u4ee5\u76f4\u63a5\u5f15\u5165\uff08import\uff09\u800c\u65e0\u9700\u901a\u8fc7 extend \u7ee7\u627f\u5b83\u4eec\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/composition-vs-inheritance.md\">Edit this page</a></p></div></article>", "path": "/react/composition-vs-inheritance", "nav": ["/react/lifting-state-up", "/react/thinking-in-react"]}, {"key": "12. React \u54f2\u5b66", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u6211\u4eec\u8ba4\u4e3a\uff0cReact \u662f\u7528 JavaScript \u6784\u5efa\u5feb\u901f\u54cd\u5e94\u7684\u5927\u578b Web \u5e94\u7528\u7a0b\u5e8f\u7684\u9996\u9009\u65b9\u5f0f\u3002\u5b83\u5728 Facebook \u548c Instagram \u4e0a\u8868\u73b0\u4f18\u79c0\u3002</p>\n<p>React \u6700\u68d2\u7684\u90e8\u5206\u4e4b\u4e00\u662f\u5f15\u5bfc\u6211\u4eec\u601d\u8003\u5982\u4f55\u6784\u5efa\u4e00\u4e2a\u5e94\u7528\u3002\u5728\u8fd9\u7bc7\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u5c06\u4f1a\u901a\u8fc7 React \u6784\u5efa\u4e00\u4e2a\u53ef\u641c\u7d22\u7684\u4ea7\u54c1\u6570\u636e\u8868\u683c\u6765\u66f4\u6df1\u523b\u5730\u9886\u4f1a React \u54f2\u5b66\u3002</p>\n<h2 id=\"start-with-a-mock\"><a class=\"anchor\" href=\"/react/thinking-in-react#start-with-a-mock\"></a>\u4ece\u8bbe\u8ba1\u7a3f\u5f00\u59cb </h2>\n<p>\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u8fd4\u56de JSON \u7684 API\uff0c\u4ee5\u53ca\u8bbe\u8ba1\u5e08\u63d0\u4f9b\u7684\u7ec4\u4ef6\u8bbe\u8ba1\u7a3f\u3002\u5982\u4e0b\u6240\u793a\uff1a</p>\n<p>\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/1071fbcc9eed01fddc115b41e193ec11/d4770/thinking-in-react-mock.png\">Image link</a>\n</span>\n</span>\n</p>\n<p>\u8be5 JSON API \u4f1a\u8fd4\u56de\u4ee5\u4e0b\u6570\u636e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">[\n  {category: \"Sporting Goods\", price: \"$49.99\", stocked: true, name: \"Football\"},\n  {category: \"Sporting Goods\", price: \"$9.99\", stocked: true, name: \"Baseball\"},\n  {category: \"Sporting Goods\", price: \"$29.99\", stocked: false, name: \"Basketball\"},\n  {category: \"Electronics\", price: \"$99.99\", stocked: true, name: \"iPod Touch\"},\n  {category: \"Electronics\", price: \"$399.99\", stocked: false, name: \"iPhone 5\"},\n  {category: \"Electronics\", price: \"$199.99\", stocked: true, name: \"Nexus 7\"}\n];</code></pre></div>\n<h2 id=\"step-1-break-the-ui-into-a-component-hierarchy\"><a class=\"anchor\" href=\"/react/thinking-in-react#step-1-break-the-ui-into-a-component-hierarchy\"></a>\u7b2c\u4e00\u6b65\uff1a\u5c06\u8bbe\u8ba1\u597d\u7684 UI \u5212\u5206\u4e3a\u7ec4\u4ef6\u5c42\u7ea7 </h2>\n<p>\u9996\u5148\uff0c\u4f60\u9700\u8981\u5728\u8bbe\u8ba1\u7a3f\u4e0a\u7528\u65b9\u6846\u5708\u51fa\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\uff08\u5305\u62ec\u5b83\u4eec\u7684\u5b50\u7ec4\u4ef6\uff09\uff0c\u5e76\u4e14\u4ee5\u5408\u9002\u7684\u540d\u79f0\u547d\u540d\u3002\u5982\u679c\u4f60\u662f\u548c\u8bbe\u8ba1\u5e08\u4e00\u8d77\u5b8c\u6210\u6b64\u4efb\u52a1\uff0c\u90a3\u4e48\u4ed6\u4eec\u53ef\u80fd\u5df2\u7ecf\u505a\u8fc7\u7c7b\u4f3c\u7684\u5de5\u4f5c\uff0c\u6240\u4ee5\u8bf7\u548c\u4ed6\u4eec\u8fdb\u884c\u4ea4\u6d41\uff01\u4ed6\u4eec\u7684 Photoshop \u7684\u56fe\u5c42\u540d\u79f0\u53ef\u80fd\u6700\u7ec8\u5c31\u662f\u4f60\u7f16\u5199\u7684 React \u7ec4\u4ef6\u7684\u540d\u79f0\uff01</p>\n<p>\u4f46\u4f60\u5982\u4f55\u786e\u5b9a\u5e94\u8be5\u5c06\u54ea\u4e9b\u90e8\u5206\u5212\u5206\u5230\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u5462\uff1f\u4f60\u53ef\u4ee5\u5c06\u7ec4\u4ef6\u5f53\u4f5c\u4e00\u79cd\u51fd\u6570\u6216\u8005\u662f\u5bf9\u8c61\u6765\u8003\u8651\uff0c\u6839\u636e<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\">\u5355\u4e00\u529f\u80fd\u539f\u5219</a>\u6765\u5224\u5b9a\u7ec4\u4ef6\u7684\u8303\u56f4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u7ec4\u4ef6\u539f\u5219\u4e0a\u53ea\u80fd\u8d1f\u8d23\u4e00\u4e2a\u529f\u80fd\u3002\u5982\u679c\u5b83\u9700\u8981\u8d1f\u8d23\u66f4\u591a\u7684\u529f\u80fd\uff0c\u8fd9\u65f6\u5019\u5c31\u5e94\u8be5\u8003\u8651\u5c06\u5b83\u62c6\u5206\u6210\u66f4\u5c0f\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u56e0\u4e3a\u4f60\u7ecf\u5e38\u662f\u5728\u5411\u7528\u6237\u5c55\u793a JSON \u6570\u636e\u6a21\u578b\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u7684\u6a21\u578b\u8bbe\u8ba1\u5f97\u6070\u5f53\uff0cUI\uff08\u6216\u8005\u8bf4\u7ec4\u4ef6\u7ed3\u6784\uff09\u4fbf\u4f1a\u4e0e\u6570\u636e\u6a21\u578b\u4e00\u4e00\u5bf9\u5e94\uff0c\u8fd9\u662f\u56e0\u4e3a UI \u548c\u6570\u636e\u6a21\u578b\u90fd\u4f1a\u503e\u5411\u4e8e\u9075\u5b88\u76f8\u540c\u7684<em>\u4fe1\u606f\u7ed3\u6784</em>\u3002\u5c06 UI \u5206\u79bb\u4e3a\u7ec4\u4ef6\uff0c\u5176\u4e2d\u6bcf\u4e2a\u7ec4\u4ef6\u9700\u4e0e\u6570\u636e\u6a21\u578b\u7684\u67d0\u90e8\u5206\u5339\u914d\u3002</p>\n<p>\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/9381f09e609723a8bb6e4ba1a7713b46/90cbd/thinking-in-react-components.png\">Image link</a>\n</span>\n</span>\n</p>\n<p>\u4f60\u4f1a\u770b\u5230\u6211\u4eec\u7684\u5e94\u7528\u4e2d\u5305\u542b\u4e94\u4e2a\u7ec4\u4ef6\u3002\u6211\u4eec\u5df2\u7ecf\u5c06\u6bcf\u4e2a\u7ec4\u4ef6\u5c55\u793a\u7684\u6570\u636e\u6807\u6ce8\u4e3a\u4e86\u659c\u4f53\u3002\u56fe\u7247\u4e2d\u7684\u5e8f\u53f7\u4e0e\u4e0b\u65b9\u5217\u8868\u4e2d\u7684\u5e8f\u53f7\u5bf9\u5e94\u3002</p>\n<ol>\n<li><strong><code class=\"language-javascript\">FilterableProductTable</code> (\u6a59\u8272):</strong> \u662f\u6574\u4e2a\u793a\u4f8b\u5e94\u7528\u7684\u6574\u4f53</li>\n<li><strong><code class=\"language-javascript\">SearchBar</code> (\u84dd\u8272):</strong> \u63a5\u53d7\u6240\u6709\u7684<em>\u7528\u6237\u8f93\u5165</em></li>\n<li><strong><code class=\"language-javascript\">ProductTable</code> (\u7eff\u8272):</strong> \u5c55\u793a<em>\u6570\u636e\u5185\u5bb9</em>\u5e76\u6839\u636e<em>\u7528\u6237\u8f93\u5165</em>\u7b5b\u9009\u7ed3\u679c</li>\n<li><strong><code class=\"language-javascript\">ProductCategoryRow</code> (\u5929\u84dd\u8272):</strong> \u4e3a\u6bcf\u4e00\u4e2a<em>\u4ea7\u54c1\u7c7b\u522b</em>\u5c55\u793a\u6807\u9898</li>\n<li><strong><code class=\"language-javascript\">ProductRow</code> (\u7ea2\u8272):</strong> \u6bcf\u4e00\u884c\u5c55\u793a\u4e00\u4e2a<em>\u4ea7\u54c1</em></li>\n</ol>\n<p>\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\uff0c<code class=\"language-javascript\">ProductTable</code> \u7684\u8868\u5934\uff08\u5305\u542b \u201cName\u201d \u548c \u201cPrice\u201d \u7684\u90a3\u4e00\u90e8\u5206\uff09\u5e76\u672a\u5355\u72ec\u6210\u4e3a\u4e00\u4e2a\u7ec4\u4ef6\u3002\u8fd9\u4ec5\u4ec5\u662f\u4e00\u79cd\u504f\u597d\u9009\u62e9\uff0c\u5982\u4f55\u5904\u7406\u8fd9\u4e00\u95ee\u9898\u4e5f\u4e00\u76f4\u5b58\u5728\u4e89\u8bba\u3002\u5c31\u8fd9\u4e2a\u793a\u4f8b\u800c\u8a00\uff0c\u56e0\u4e3a\u8868\u5934\u53ea\u8d77\u5230\u4e86\u6e32\u67d3<em>\u6570\u636e\u96c6\u5408</em>\u7684\u4f5c\u7528\u2014\u2014\u8fd9\u4e0e <code class=\"language-javascript\">ProductTable</code> \u662f\u4e00\u81f4\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4ecd\u7136\u5c06\u5176\u4fdd\u7559\u4e3a <code class=\"language-javascript\">ProductTable</code> \u7684\u4e00\u90e8\u5206\u3002\u4f46\u662f\uff0c\u5982\u679c\u8868\u5934\u8fc7\u4e8e\u590d\u6742\uff08\u4f8b\u5982\uff0c\u6211\u4eec\u9700\u4e3a\u5176\u6dfb\u52a0\u6392\u5e8f\u529f\u80fd\uff09\uff0c\u90a3\u4e48\u5c06\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684 <code class=\"language-javascript\">ProductTableHeader</code> \u7ec4\u4ef6\u5c31\u663e\u5f97\u5f88\u6709\u5fc5\u8981\u4e86\u3002</p>\n<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u8bbe\u8ba1\u7a3f\u4e2d\u5e94\u8be5\u5305\u542b\u7684\u7ec4\u4ef6\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u628a\u5b83\u4eec\u63cf\u8ff0\u4e3a\u66f4\u52a0\u6e05\u6670\u7684\u5c42\u7ea7\u3002\u8bbe\u8ba1\u7a3f\u4e2d\u88ab\u5176\u4ed6\u7ec4\u4ef6\u5305\u542b\u7684\u5b50\u7ec4\u4ef6\uff0c\u5728\u5c42\u7ea7\u4e0a\u5e94\u8be5\u4f5c\u4e3a\u5176\u5b50\u8282\u70b9\u3002</p>\n<ul>\n<li>\n<p><code class=\"language-javascript\">FilterableProductTable</code></p>\n<ul>\n<li><code class=\"language-javascript\">SearchBar</code></li>\n<li>\n<p><code class=\"language-javascript\">ProductTable</code></p>\n<ul>\n<li><code class=\"language-javascript\">ProductCategoryRow</code></li>\n<li><code class=\"language-javascript\">ProductRow</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"step-2-build-a-static-version-in-react\"><a class=\"anchor\" href=\"/react/thinking-in-react#step-2-build-a-static-version-in-react\"></a>\u7b2c\u4e8c\u6b65\uff1a\u7528 React \u521b\u5efa\u4e00\u4e2a\u9759\u6001\u7248\u672c </h2>\n<p class=\"codepen\">\u53c2\u9605 <a class=\"external-link\" href=\"https://codepen.io\">CodePen</a> \u4e0a\u7684 <a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/BwWzwm\">React \u54f2\u5b66\uff1a\u7b2c\u4e8c\u6b65</a>\u3002</p>\n<script></script>\n<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u7ec4\u4ef6\u5c42\u7ea7\uff0c\u53ef\u4ee5\u7f16\u5199\u5bf9\u5e94\u7684\u5e94\u7528\u4e86\u3002\u6700\u5bb9\u6613\u7684\u65b9\u5f0f\uff0c\u662f\u5148\u7528\u5df2\u6709\u7684\u6570\u636e\u6a21\u578b\u6e32\u67d3\u4e00\u4e2a\u4e0d\u5305\u542b\u4ea4\u4e92\u529f\u80fd\u7684 UI\u3002\u6700\u597d\u5c06\u6e32\u67d3 UI \u548c\u6dfb\u52a0\u4ea4\u4e92\u8fd9\u4e24\u4e2a\u8fc7\u7a0b\u5206\u5f00\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u7f16\u5199\u4e00\u4e2a\u5e94\u7528\u7684\u9759\u6001\u7248\u672c\u65f6\uff0c\u5f80\u5f80\u8981\u7f16\u5199\u5927\u91cf\u4ee3\u7801\uff0c\u800c\u4e0d\u9700\u8981\u8003\u8651\u592a\u591a\u4ea4\u4e92\u7ec6\u8282\uff1b\u6dfb\u52a0\u4ea4\u4e92\u529f\u80fd\u65f6\u5219\u8981\u8003\u8651\u5927\u91cf\u7ec6\u8282\uff0c\u800c\u4e0d\u9700\u8981\u7f16\u5199\u592a\u591a\u4ee3\u7801\u3002\u6240\u4ee5\uff0c\u5c06\u8fd9\u4e24\u4e2a\u8fc7\u7a0b\u5206\u5f00\u8fdb\u884c\u66f4\u4e3a\u5408\u9002\u3002\u6211\u4eec\u4f1a\u5728\u63a5\u4e0b\u6765\u7684\u4ee3\u7801\u4e2d\u4f53\u4f1a\u5230\u5176\u4e2d\u7684\u533a\u522b\u3002</p>\n<p>\u5728\u6784\u5efa\u5e94\u7528\u7684\u9759\u6001\u7248\u672c\u65f6\uff0c\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e9b\u4f1a\u91cd\u7528\u5176\u4ed6\u7ec4\u4ef6\u7684\u7ec4\u4ef6\uff0c\u7136\u540e\u901a\u8fc7 <em>props</em> \u4f20\u5165\u6240\u9700\u7684\u6570\u636e\u3002<em>props</em> \u662f\u7236\u7ec4\u4ef6\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012\u6570\u636e\u7684\u65b9\u5f0f\u3002\u5373\u4f7f\u4f60\u5df2\u7ecf\u719f\u6089\u4e86 <em>state</em> \u7684\u6982\u5ff5\uff0c\u4e5f<strong>\u5b8c\u5168\u4e0d\u5e94\u8be5\u4f7f\u7528 state</strong> \u6784\u5efa\u9759\u6001\u7248\u672c\u3002state \u4ee3\u8868\u4e86\u968f\u65f6\u95f4\u4f1a\u4ea7\u751f\u53d8\u5316\u7684\u6570\u636e\uff0c\u5e94\u5f53\u4ec5\u5728\u5b9e\u73b0\u4ea4\u4e92\u65f6\u4f7f\u7528\u3002\u6240\u4ee5\u6784\u5efa\u5e94\u7528\u7684\u9759\u6001\u7248\u672c\u65f6\uff0c\u4f60\u4e0d\u4f1a\u7528\u5230\u5b83\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u81ea\u4e0a\u800c\u4e0b\u6216\u8005\u81ea\u4e0b\u800c\u4e0a\u6784\u5efa\u5e94\u7528\uff1a\u81ea\u4e0a\u800c\u4e0b\u610f\u5473\u7740\u9996\u5148\u7f16\u5199\u5c42\u7ea7\u8f83\u9ad8\u7684\u7ec4\u4ef6\uff08\u6bd4\u5982 <code class=\"language-javascript\">FilterableProductTable</code>\uff09\uff0c\u81ea\u4e0b\u800c\u4e0a\u610f\u5473\u7740\u4ece\u6700\u57fa\u672c\u7684\u7ec4\u4ef6\u5f00\u59cb\u7f16\u5199\uff08\u6bd4\u5982 <code class=\"language-javascript\">ProductRow</code>\uff09\u3002\u5f53\u4f60\u7684\u5e94\u7528\u6bd4\u8f83\u7b80\u5355\u65f6\uff0c\u4f7f\u7528\u81ea\u4e0a\u800c\u4e0b\u7684\u65b9\u5f0f\u66f4\u65b9\u4fbf\uff1b\u5bf9\u4e8e\u8f83\u4e3a\u5927\u578b\u7684\u9879\u76ee\u6765\u8bf4\uff0c\u81ea\u4e0b\u800c\u4e0a\u5730\u6784\u5efa\uff0c\u5e76\u540c\u65f6\u4e3a\u4f4e\u5c42\u7ec4\u4ef6\u7f16\u5199\u6d4b\u8bd5\u662f\u66f4\u52a0\u7b80\u5355\u7684\u65b9\u5f0f\u3002</p>\n<p>\u5230\u6b64\u4e3a\u6b62\uff0c\u4f60\u5e94\u8be5\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u53ef\u91cd\u7528\u7684\u7ec4\u4ef6\u5e93\u6765\u6e32\u67d3\u4f60\u7684\u6570\u636e\u6a21\u578b\u3002\u7531\u4e8e\u6211\u4eec\u6784\u5efa\u7684\u662f\u9759\u6001\u7248\u672c\uff0c\u6240\u4ee5\u8fd9\u4e9b\u7ec4\u4ef6\u76ee\u524d\u53ea\u9700\u63d0\u4f9b <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u7528\u4e8e\u6e32\u67d3\u3002\u6700\u9876\u5c42\u7684\u7ec4\u4ef6 <code class=\"language-javascript\">FilterableProductTable</code> \u901a\u8fc7 props \u63a5\u53d7\u4f60\u7684\u6570\u636e\u6a21\u578b\u3002\u5982\u679c\u4f60\u7684\u6570\u636e\u6a21\u578b\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u518d\u6b21\u8c03\u7528 <code class=\"language-javascript\">root.render()</code>\uff0cUI \u5c31\u4f1a\u76f8\u5e94\u5730\u88ab\u66f4\u65b0\u3002\u6570\u636e\u6a21\u578b\u53d8\u5316\u3001\u8c03\u7528 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u3001UI \u76f8\u5e94\u53d8\u5316\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5e76\u4e0d\u590d\u6742\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613\u770b\u6e05\u695a UI \u662f\u5982\u4f55\u88ab\u66f4\u65b0\u7684\uff0c\u4ee5\u53ca\u662f\u5728\u54ea\u91cc\u88ab\u66f4\u65b0\u7684\u3002React <strong>\u5355\u5411\u6570\u636e\u6d41</strong>\uff08\u4e5f\u53eb<em>\u5355\u5411\u7ed1\u5b9a</em>\uff09\u7684\u601d\u60f3\u4f7f\u5f97\u7ec4\u4ef6\u6a21\u5757\u5316\uff0c\u6613\u4e8e\u5feb\u901f\u5f00\u53d1\u3002</p>\n<p>\u5982\u679c\u4f60\u5728\u5b8c\u6210\u8fd9\u4e00\u6b65\u9aa4\u65f6\u9047\u5230\u4e86\u56f0\u96be\uff0c\u53ef\u4ee5\u53c2\u9605 <a href=\"/react/getting-started\">React \u6587\u6863</a>\u3002</p>\n<h3 id=\"a-brief-interlude-props-vs-state\"><a class=\"anchor\" href=\"/react/thinking-in-react#a-brief-interlude-props-vs-state\"></a>\u8865\u5145\u8bf4\u660e: \u6709\u5173 props \u548c state </h3>\n<p>\u5728 React \u4e2d\uff0c\u6709\u4e24\u7c7b\u201c\u6a21\u578b\u201d\u6570\u636e\uff1aprops \u548c state\u3002\u6e05\u695a\u5730\u7406\u89e3\u4e24\u8005\u7684\u533a\u522b\u662f\u5341\u5206\u91cd\u8981\u7684\uff1b\u5982\u679c\u4f60\u4e0d\u592a\u6709\u628a\u63e1\uff0c\u53ef\u4ee5\u53c2\u9605 <a href=\"/react/state-and-lifecycle\">React \u5b98\u65b9\u6587\u6863</a>\u3002\u4f60\u4e5f\u53ef\u4ee5\u67e5\u770b <a href=\"/react/faq-state#what-is-the-difference-between-state-and-props\">FAQ: state \u4e0e props \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f</a></p>\n<h2 id=\"step-3-identify-the-minimal-but-complete-representation-of-ui-state\"><a class=\"anchor\" href=\"/react/thinking-in-react#step-3-identify-the-minimal-but-complete-representation-of-ui-state\"></a>\u7b2c\u4e09\u6b65\uff1a\u786e\u5b9a UI state \u7684\u6700\u5c0f\uff08\u4e14\u5b8c\u6574\uff09\u8868\u793a </h2>\n<p>\u60f3\u8981\u4f7f\u4f60\u7684 UI \u5177\u5907\u4ea4\u4e92\u529f\u80fd\uff0c\u9700\u8981\u6709\u89e6\u53d1\u57fa\u7840\u6570\u636e\u6a21\u578b\u6539\u53d8\u7684\u80fd\u529b\u3002React \u901a\u8fc7\u5b9e\u73b0 <strong>state</strong> \u6765\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\u3002</p>\n<p>\u4e3a\u4e86\u6b63\u786e\u5730\u6784\u5efa\u5e94\u7528\uff0c\u4f60\u9996\u5148\u9700\u8981\u627e\u51fa\u5e94\u7528\u6240\u9700\u7684 state \u7684\u6700\u5c0f\u8868\u793a\uff0c\u5e76\u6839\u636e\u9700\u8981\u8ba1\u7b97\u51fa\u5176\u4ed6\u6240\u6709\u6570\u636e\u3002\u5176\u4e2d\u7684\u5173\u952e\u6b63\u662f <a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\">DRY: <em>Don\u2019t Repeat Yourself</em></a>\u3002\u53ea\u4fdd\u7559\u5e94\u7528\u6240\u9700\u7684\u53ef\u53d8 state \u7684\u6700\u5c0f\u96c6\u5408\uff0c\u5176\u4ed6\u6570\u636e\u5747\u7531\u5b83\u4eec\u8ba1\u7b97\u4ea7\u751f\u3002\u6bd4\u5982\uff0c\u4f60\u8981\u7f16\u5199\u4e00\u4e2a\u4efb\u52a1\u6e05\u5355\u5e94\u7528\uff0c\u4f60\u53ea\u9700\u8981\u4fdd\u5b58\u4e00\u4e2a\u5305\u542b\u6240\u6709\u4e8b\u9879\u7684\u6570\u7ec4\uff0c\u800c\u65e0\u9700\u989d\u5916\u4fdd\u5b58\u4e00\u4e2a\u5355\u72ec\u7684 state \u53d8\u91cf\uff08\u7528\u4e8e\u5b58\u50a8\u4efb\u52a1\u4e2a\u6570\uff09\u3002\u5f53\u4f60\u9700\u8981\u5c55\u793a\u4efb\u52a1\u4e2a\u6570\u65f6\uff0c\u53ea\u9700\u8981\u5229\u7528\u8be5\u6570\u7ec4\u7684 length \u5c5e\u6027\u5373\u53ef\u3002</p>\n<p>\u6211\u4eec\u7684\u793a\u4f8b\u5e94\u7528\u62e5\u6709\u5982\u4e0b\u6570\u636e\uff1a</p>\n<ul>\n<li>\u5305\u542b\u6240\u6709\u4ea7\u54c1\u7684\u539f\u59cb\u5217\u8868</li>\n<li>\u7528\u6237\u8f93\u5165\u7684\u641c\u7d22\u8bcd</li>\n<li>\u590d\u9009\u6846\u662f\u5426\u9009\u4e2d\u7684\u503c</li>\n<li>\u7ecf\u8fc7\u641c\u7d22\u7b5b\u9009\u7684\u4ea7\u54c1\u5217\u8868</li>\n</ul>\n<p>\u901a\u8fc7\u95ee\u81ea\u5df1\u4ee5\u4e0b\u4e09\u4e2a\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u9010\u4e2a\u68c0\u67e5\u76f8\u5e94\u6570\u636e\u662f\u5426\u5c5e\u4e8e state\uff1a</p>\n<ol>\n<li>\u8be5\u6570\u636e\u662f\u5426\u662f\u7531\u7236\u7ec4\u4ef6\u901a\u8fc7 props \u4f20\u9012\u800c\u6765\u7684\uff1f\u5982\u679c\u662f\uff0c\u90a3\u5b83\u5e94\u8be5\u4e0d\u662f state\u3002</li>\n<li>\u8be5\u6570\u636e\u662f\u5426\u968f\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u4fdd\u6301\u4e0d\u53d8\uff1f\u5982\u679c\u662f\uff0c\u90a3\u5b83\u5e94\u8be5\u4e5f\u4e0d\u662f state\u3002</li>\n<li>\u4f60\u80fd\u5426\u6839\u636e\u5176\u4ed6 state \u6216 props \u8ba1\u7b97\u51fa\u8be5\u6570\u636e\u7684\u503c\uff1f\u5982\u679c\u662f\uff0c\u90a3\u5b83\u4e5f\u4e0d\u662f state\u3002</li>\n</ol>\n<p>\u5305\u542b\u6240\u6709\u4ea7\u54c1\u7684\u539f\u59cb\u5217\u8868\u662f\u7ecf\u7531 props \u4f20\u5165\u7684\uff0c\u6240\u4ee5\u5b83\u4e0d\u662f state\uff1b\u641c\u7d22\u8bcd\u548c\u590d\u9009\u6846\u7684\u503c\u5e94\u8be5\u662f state\uff0c\u56e0\u4e3a\u5b83\u4eec\u968f\u65f6\u95f4\u4f1a\u53d1\u751f\u6539\u53d8\u4e14\u65e0\u6cd5\u7531\u5176\u4ed6\u6570\u636e\u8ba1\u7b97\u800c\u6765\uff1b\u7ecf\u8fc7\u641c\u7d22\u7b5b\u9009\u7684\u4ea7\u54c1\u5217\u8868\u4e0d\u662f state\uff0c\u56e0\u4e3a\u5b83\u7684\u7ed3\u679c\u53ef\u4ee5\u7531\u4ea7\u54c1\u7684\u539f\u59cb\u5217\u8868\u6839\u636e\u641c\u7d22\u8bcd\u548c\u590d\u9009\u6846\u7684\u9009\u62e9\u8ba1\u7b97\u51fa\u6765\u3002</p>\n<p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u5c5e\u4e8e state \u7684\u6709\uff1a</p>\n<ul>\n<li>\u7528\u6237\u8f93\u5165\u7684\u641c\u7d22\u8bcd</li>\n<li>\u590d\u9009\u6846\u662f\u5426\u9009\u4e2d\u7684\u503c</li>\n</ul>\n<h2 id=\"step-4-identify-where-your-state-should-live\"><a class=\"anchor\" href=\"/react/thinking-in-react#step-4-identify-where-your-state-should-live\"></a>\u7b2c\u56db\u6b65\uff1a\u786e\u5b9a state \u653e\u7f6e\u7684\u4f4d\u7f6e </h2>\n<p class=\"codepen\">\u53c2\u9605 <a class=\"external-link\" href=\"https://codepen.io\">CodePen</a> \u4e0a\u7684 <a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/qPrNQZ\">React \u54f2\u5b66\uff1a\u7b2c\u56db\u6b65</a>\u3002</p>\n<p>\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u5e94\u7528\u6240\u9700\u7684 state \u7684\u6700\u5c0f\u96c6\u5408\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u9700\u8981\u786e\u5b9a\u54ea\u4e2a\u7ec4\u4ef6\u80fd\u591f\u6539\u53d8\u8fd9\u4e9b state\uff0c\u6216\u8005\u8bf4<em>\u62e5\u6709</em>\u8fd9\u4e9b state\u3002</p>\n<p>\u6ce8\u610f\uff1aReact \u4e2d\u7684\u6570\u636e\u6d41\u662f\u5355\u5411\u7684\uff0c\u5e76\u987a\u7740\u7ec4\u4ef6\u5c42\u7ea7\u4ece\u4e0a\u5f80\u4e0b\u4f20\u9012\u3002\u54ea\u4e2a\u7ec4\u4ef6\u5e94\u8be5\u62e5\u6709\u67d0\u4e2a state \u8fd9\u4ef6\u4e8b\uff0c<strong>\u5bf9\u521d\u5b66\u8005\u6765\u8bf4\u5f80\u5f80\u662f\u6700\u96be\u7406\u89e3\u7684\u90e8\u5206</strong>\u3002\u5c3d\u7ba1\u8fd9\u53ef\u80fd\u5728\u4e00\u5f00\u59cb\u4e0d\u662f\u90a3\u4e48\u6e05\u6670\uff0c\u4f46\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u6765\u5224\u65ad\uff1a</p>\n<p>\u5bf9\u4e8e\u5e94\u7528\u4e2d\u7684\u6bcf\u4e00\u4e2a state\uff1a</p>\n<ul>\n<li>\u627e\u5230\u6839\u636e\u8fd9\u4e2a state \u8fdb\u884c\u6e32\u67d3\u7684\u6240\u6709\u7ec4\u4ef6\u3002</li>\n<li>\u627e\u5230\u4ed6\u4eec\u7684\u5171\u540c\u6240\u6709\u8005\uff08common owner\uff09\u7ec4\u4ef6\uff08\u5728\u7ec4\u4ef6\u5c42\u7ea7\u4e0a\u9ad8\u4e8e\u6240\u6709\u9700\u8981\u8be5 state \u7684\u7ec4\u4ef6\uff09\u3002</li>\n<li>\u8be5\u5171\u540c\u6240\u6709\u8005\u7ec4\u4ef6\u6216\u8005\u6bd4\u5b83\u5c42\u7ea7\u66f4\u9ad8\u7684\u7ec4\u4ef6\u5e94\u8be5\u62e5\u6709\u8be5 state\u3002</li>\n<li>\u5982\u679c\u4f60\u627e\u4e0d\u5230\u4e00\u4e2a\u5408\u9002\u7684\u4f4d\u7f6e\u6765\u5b58\u653e\u8be5 state\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6\u6765\u5b58\u653e\u8be5 state\uff0c\u5e76\u5c06\u8fd9\u4e00\u65b0\u7ec4\u4ef6\u7f6e\u4e8e\u9ad8\u4e8e\u5171\u540c\u6240\u6709\u8005\u7ec4\u4ef6\u5c42\u7ea7\u7684\u4f4d\u7f6e\u3002</li>\n</ul>\n<p>\u6839\u636e\u4ee5\u4e0a\u7b56\u7565\u91cd\u65b0\u8003\u8651\u6211\u4eec\u7684\u793a\u4f8b\u5e94\u7528\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">ProductTable</code> \u9700\u8981\u6839\u636e state \u7b5b\u9009\u4ea7\u54c1\u5217\u8868\u3002<code class=\"language-javascript\">SearchBar</code> \u9700\u8981\u5c55\u793a\u641c\u7d22\u8bcd\u548c\u590d\u9009\u6846\u7684\u72b6\u6001\u3002</li>\n<li>\u4ed6\u4eec\u7684\u5171\u540c\u6240\u6709\u8005\u662f <code class=\"language-javascript\">FilterableProductTable</code>\u3002</li>\n<li>\u56e0\u6b64\uff0c\u641c\u7d22\u8bcd\u548c\u590d\u9009\u6846\u7684\u503c\u5e94\u8be5\u5f88\u81ea\u7136\u5730\u5b58\u653e\u5728 <code class=\"language-javascript\">FilterableProductTable</code> \u7ec4\u4ef6\u4e2d\u3002</li>\n</ul>\n<p>\u5f88\u597d\uff0c\u6211\u4eec\u5df2\u7ecf\u51b3\u5b9a\u628a\u8fd9\u4e9b state \u5b58\u653e\u5728 <code class=\"language-javascript\">FilterableProductTable</code> \u7ec4\u4ef6\u4e2d\u3002\u9996\u5148\uff0c\u5c06\u5b9e\u4f8b\u5c5e\u6027 <code class=\"language-javascript\">this.state = {filterText: '', inStockOnly: false}</code> \u6dfb\u52a0\u5230 <code class=\"language-javascript\">FilterableProductTable</code> \u7684 <code class=\"language-javascript\">constructor</code> \u4e2d\uff0c\u8bbe\u7f6e\u5e94\u7528\u7684\u521d\u59cb state\uff1b\u63a5\u7740\uff0c\u5c06 <code class=\"language-javascript\">filterText</code> \u548c <code class=\"language-javascript\">inStockOnly</code> \u4f5c\u4e3a props \u4f20\u5165 <code class=\"language-javascript\">ProductTable</code> \u548c <code class=\"language-javascript\">SearchBar</code>\uff1b\u6700\u540e\uff0c\u7528\u8fd9\u4e9b props \u7b5b\u9009 <code class=\"language-javascript\">ProductTable</code> \u4e2d\u7684\u4ea7\u54c1\u4fe1\u606f\uff0c\u5e76\u8bbe\u7f6e <code class=\"language-javascript\">SearchBar</code> \u7684\u8868\u5355\u503c\u3002</p>\n<p>\u4f60\u73b0\u5728\u53ef\u4ee5\u770b\u5230\u5e94\u7528\u7684\u53d8\u5316\u4e86\uff1a\u5c06 <code class=\"language-javascript\">filterText</code> \u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">\"ball\"</code> \u5e76\u5237\u65b0\u5e94\u7528\uff0c\u4f60\u80fd\u53d1\u73b0\u8868\u683c\u4e2d\u7684\u6570\u636e\u5df2\u7ecf\u66f4\u65b0\u4e86\u3002</p>\n<h2 id=\"step-5-add-inverse-data-flow\"><a class=\"anchor\" href=\"/react/thinking-in-react#step-5-add-inverse-data-flow\"></a>\u7b2c\u4e94\u6b65\uff1a\u6dfb\u52a0\u53cd\u5411\u6570\u636e\u6d41 </h2>\n<p class=\"codepen\">\u53c2\u9605 <a class=\"external-link\" href=\"https://codepen.io\">CodePen</a> \u4e0a\u7684 <a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/LzWZvb\">React \u54f2\u5b66\uff1a\u7b2c\u4e94\u6b65</a>\u3002</p>\n<p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u501f\u52a9\u81ea\u4e0a\u800c\u4e0b\u4f20\u9012\u7684 props \u548c state \u6e32\u67d3\u4e86\u4e00\u4e2a\u5e94\u7528\u3002\u73b0\u5728\uff0c\u6211\u4eec\u5c06\u5c1d\u8bd5\u8ba9\u6570\u636e\u53cd\u5411\u4f20\u9012\uff1a\u5904\u4e8e\u8f83\u4f4e\u5c42\u7ea7\u7684\u8868\u5355\u7ec4\u4ef6\u66f4\u65b0\u8f83\u9ad8\u5c42\u7ea7\u7684 <code class=\"language-javascript\">FilterableProductTable</code> \u4e2d\u7684 state\u3002</p>\n<p>React \u901a\u8fc7\u4e00\u79cd\u6bd4\u4f20\u7edf\u7684\u53cc\u5411\u7ed1\u5b9a\u7565\u5fae\u7e41\u7410\u7684\u65b9\u6cd5\u6765\u5b9e\u73b0\u53cd\u5411\u6570\u636e\u4f20\u9012\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u4f46\u8fd9\u79cd\u9700\u8981\u663e\u5f0f\u58f0\u660e\u7684\u65b9\u6cd5\u66f4\u6709\u52a9\u4e8e\u4eba\u4eec\u7406\u89e3\u7a0b\u5e8f\u7684\u8fd0\u4f5c\u65b9\u5f0f\u3002</p>\n<p>\u5982\u679c\u4f60\u5c1d\u8bd5\u5728\u4e0a\u4e00\u4e2a\u793a\u4f8b\u7684\u641c\u7d22\u6846\u4e2d\u8f93\u5165\u6216\u52fe\u9009\u590d\u9009\u6846\uff08\u6b65\u9aa4 4\uff09\uff0cReact \u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u54cd\u5e94\u3002\u8fd9\u662f\u6b63\u5e38\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u4e4b\u524d\u5df2\u7ecf\u5c06 <code class=\"language-javascript\">input</code> \u7684\u503c\u8bbe\u7f6e\u4e3a\u4e86\u4ece <code class=\"language-javascript\">FilterableProductTable</code> \u7684 <code class=\"language-javascript\">state</code> \u4f20\u9012\u800c\u6765\u7684\u56fa\u5b9a\u503c\u3002</p>\n<p>\u8ba9\u6211\u4eec\u91cd\u65b0\u68b3\u7406\u4e00\u4e0b\u9700\u8981\u5b9e\u73b0\u7684\u529f\u80fd\uff1a\u6bcf\u5f53\u7528\u6237\u6539\u53d8\u8868\u5355\u7684\u503c\uff0c\u6211\u4eec\u9700\u8981\u6539\u53d8 state \u6765\u53cd\u6620\u7528\u6237\u7684\u5f53\u524d\u8f93\u5165\u3002\u7531\u4e8e state \u53ea\u80fd\u7531\u62e5\u6709\u5b83\u4eec\u7684\u7ec4\u4ef6\u8fdb\u884c\u66f4\u6539\uff0c<code class=\"language-javascript\">FilterableProductTable</code> \u5fc5\u987b\u5c06\u4e00\u4e2a\u80fd\u591f\u89e6\u53d1 state \u6539\u53d8\u7684\u56de\u8c03\u51fd\u6570\uff08callback\uff09\u4f20\u9012\u7ed9 <code class=\"language-javascript\">SearchBar</code>\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8f93\u5165\u6846\u7684 <code class=\"language-javascript\">onChange</code> \u4e8b\u4ef6\u6765\u76d1\u89c6\u7528\u6237\u8f93\u5165\u7684\u53d8\u5316\uff0c\u5e76\u901a\u77e5 <code class=\"language-javascript\">FilterableProductTable</code> \u4f20\u9012\u7ed9 <code class=\"language-javascript\">SearchBar</code> \u7684\u56de\u8c03\u51fd\u6570\u3002\u7136\u540e\u8be5\u56de\u8c03\u51fd\u6570\u5c06\u8c03\u7528 <code class=\"language-javascript\">setState()</code>\uff0c\u4ece\u800c\u66f4\u65b0\u5e94\u7528\u3002</p>\n<h2 id=\"and-thats-it\"><a class=\"anchor\" href=\"/react/thinking-in-react#and-thats-it\"></a>\u8fd9\u5c31\u662f\u5168\u90e8\u4e86 </h2>\n<p>\u5e0c\u671b\u8fd9\u7bc7\u6587\u6863\u80fd\u591f\u5e2e\u52a9\u4f60\u5efa\u7acb\u8d77\u6784\u5efa React \u7ec4\u4ef6\u548c\u5e94\u7528\u7684\u4e00\u822c\u6982\u5ff5\u3002\u5c3d\u7ba1\u4f60\u53ef\u80fd\u9700\u8981\u7f16\u5199\u66f4\u591a\u7684\u4ee3\u7801\uff0c\u4f46\u662f\u522b\u5fd8\u4e86\uff1a\u6bd4\u8d77\u5199\uff0c\u4ee3\u7801\u66f4\u591a\u5730\u662f\u7ed9\u4eba\u770b\u7684\u3002\u6211\u4eec\u4e00\u8d77\u6784\u5efa\u7684\u8fd9\u4e2a\u6a21\u5757\u5316\u793a\u4f8b\u5e94\u7528\u7684\u4ee3\u7801\u5c31\u5f88\u6613\u4e8e\u9605\u8bfb\u3002\u5f53\u4f60\u5f00\u59cb\u6784\u5efa\u66f4\u5927\u7684\u7ec4\u4ef6\u5e93\u65f6\uff0c\u4f60\u4f1a\u610f\u8bc6\u5230\u8fd9\u79cd\u4ee3\u7801\u6a21\u5757\u5316\u548c\u6e05\u6670\u5ea6\u7684\u91cd\u8981\u6027\u3002\u5e76\u4e14\u968f\u7740\u4ee3\u7801\u91cd\u7528\u7a0b\u5ea6\u7684\u52a0\u6df1\uff0c\u4f60\u7684\u4ee3\u7801\u884c\u6570\u4e5f\u4f1a\u663e\u8457\u5730\u51cf\u5c11\u3002:)</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/thinking-in-react.md\">Edit this page</a></p></div></article>", "path": "/react/thinking-in-react", "nav": ["/react/composition-vs-inheritance", "/react/accessibility"]}]}, {"key": "\u9ad8\u7ea7\u6307\u5f15", "values": [{"key": "\u65e0\u969c\u788d", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h2 id=\"why-accessibility\"><a class=\"anchor\" href=\"/react/accessibility#why-accessibility\"></a>\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\uff1f </h2>\n<p>\u7f51\u7edc\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\uff08Accessibility\uff0c\u4e5f\u88ab\u79f0\u4e3a <a class=\"external-link\" href=\"https://en.wiktionary.org/wiki/a11y\"><strong>a11y</strong></a>\uff0c\u56e0\u4e3a\u4ee5 A \u5f00\u5934\uff0c\u4ee5 Y \u7ed3\u5c3e\uff0c\u4e2d\u95f4\u4e00\u5171 11 \u4e2a\u5b57\u6bcd\uff09\u662f\u4e00\u79cd\u53ef\u4ee5\u5e2e\u52a9\u6240\u6709\u4eba\u83b7\u5f97\u670d\u52a1\u7684\u8bbe\u8ba1\u548c\u521b\u9020\u3002\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u662f\u4f7f\u5f97\u8f85\u52a9\u6280\u672f\u6b63\u786e\u89e3\u8bfb\u7f51\u9875\u7684\u5fc5\u8981\u6761\u4ef6\u3002</p>\n<p>React \u5bf9\u4e8e\u521b\u5efa\u53ef\u8bbf\u95ee\u7f51\u7ad9\u6709\u7740\u5168\u9762\u7684\u652f\u6301\uff0c\u800c\u8fd9\u901a\u5e38\u662f\u901a\u8fc7\u6807\u51c6 HTML \u6280\u672f\u5b9e\u73b0\u7684\u3002</p>\n<h2 id=\"standards-and-guidelines\"><a class=\"anchor\" href=\"/react/accessibility#standards-and-guidelines\"></a>\u6807\u51c6\u548c\u6307\u5357 </h2>\n<h3 id=\"wcag\"><a class=\"anchor\" href=\"/react/accessibility#wcag\"></a>WCAG </h3>\n<p><a class=\"external-link\" href=\"https://www.w3.org/WAI/intro/wcag\">\u7f51\u7edc\u5185\u5bb9\u65e0\u969c\u788d\u6307\u5357\uff08Web Content Accessibility Guidelines\uff0cWCAG\uff09</a> \u4e3a\u5f00\u53d1\u65e0\u969c\u788d\u7f51\u7ad9\u63d0\u4f9b\u4e86\u6307\u5357\u3002</p>\n<p>\u4e0b\u9762\u7684 WCAG \u68c0\u67e5\u8868\u63d0\u4f9b\u4e86\u4e00\u4e9b\u6982\u89c8\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.wuhcag.com/wcag-checklist/\">Wuhcag \u63d0\u4f9b\u7684 WCAG \u68c0\u67e5\u8868\uff08WCAG checklist from Wuhcag\uff09</a></li>\n<li><a class=\"external-link\" href=\"https://webaim.org/standards/wcag/checklist\">WebAIM \u63d0\u4f9b\u7684 WCAG \u68c0\u67e5\u8868\uff08WCAG checklist from WebAIM\uff09</a></li>\n<li><a class=\"external-link\" href=\"https://a11yproject.com/checklist.html\">A11Y Project \u63d0\u4f9b\u7684\u68c0\u67e5\u8868\uff08Checklist from The A11Y Project\uff09</a></li>\n</ul>\n<h3 id=\"wai-aria\"><a class=\"anchor\" href=\"/react/accessibility#wai-aria\"></a>WAI-ARIA </h3>\n<p><a class=\"external-link\" href=\"https://www.w3.org/WAI/intro/aria\">\u7f51\u7edc\u65e0\u969c\u788d\u5021\u8bae - \u65e0\u969c\u788d\u4e92\u8054\u7f51\u5e94\u7528\uff08Web Accessibility Initiative - Accessible Rich Internet Applications\uff09</a> \u6587\u4ef6\u5305\u542b\u4e86\u521b\u5efa\u5b8c\u5168\u65e0\u969c\u788d JavaScript \u90e8\u4ef6\u6240\u9700\u8981\u7684\u6280\u672f\u3002</p>\n<p>\u6ce8\u610f\uff1aJSX \u652f\u6301\u6240\u6709 <code class=\"language-javascript\">aria-*</code> HTML \u5c5e\u6027\u3002\u867d\u7136\u5927\u591a\u6570 React \u7684 DOM \u53d8\u91cf\u548c\u5c5e\u6027\u547d\u540d\u90fd\u4f7f\u7528\u9a7c\u5cf0\u547d\u540d\uff08camelCased\uff09\uff0c\u4f46 aria-* \u5e94\u8be5\u50cf\u5176\u5728 HTML \u4e2d\u4e00\u6837\u4f7f\u7528\u5e26\u8fde\u5b57\u7b26\u7684\u547d\u540d\u6cd5\uff08\u4e5f\u53eb\u8bf8\u5982 hyphen-cased\uff0ckebab-case\uff0clisp-case)\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">aria-label</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>labelText<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">aria-required</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span></span>  <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onchangeHandler<span class=\"token punctuation\">}</span></span>\n  <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>inputValue<span class=\"token punctuation\">}</span></span>\n  <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<h2 id=\"semantic-html\"><a class=\"anchor\" href=\"/react/accessibility#semantic-html\"></a>\u8bed\u4e49\u5316\u7684 HTML </h2>\n<p>\u8bed\u4e49\u5316\u7684 HTML \u662f\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u7f51\u7edc\u5e94\u7528\u7684\u57fa\u7840\u3002\n\u5229\u7528\u591a\u79cd HTML \u5143\u7d20\u6765\u5f3a\u5316\u60a8\u7f51\u7ad9\u4e2d\u7684\u4fe1\u606f\u901a\u5e38\u53ef\u4ee5\u4f7f\u60a8\u76f4\u63a5\u83b7\u5f97\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u3002</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element\">MDN \u7684 HTML \u5143\u7d20\u53c2\u7167\uff08MDN HTML elements reference\uff09</a></li>\n</ul>\n<p>\u6709\u65f6\uff0c\u8bed\u4e49\u5316\u7684 HTML \u4f1a\u88ab\u7834\u574f\u3002\u6bd4\u5982\u5f53\u5728 JSX \u4e2d\u4f7f\u7528  <code class=\"language-javascript\">&lt;div&gt;</code>  \u5143\u7d20\u6765\u5b9e\u73b0 React \u4ee3\u7801\u529f\u80fd\u7684\u65f6\u5019\uff0c\u53c8\u6216\u662f\u5728\u4f7f\u7528\u5217\u8868\uff08<code class=\"language-javascript\">&lt;ol&gt;</code>\uff0c <code class=\"language-javascript\">&lt;ul&gt;</code> \u548c <code class=\"language-javascript\">&lt;dl&gt;</code>\uff09\u548c HTML <code class=\"language-javascript\">&lt;table&gt;</code> \u65f6\u3002\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e94\u8be5\u4f7f\u7528 <a href=\"/react/fragments\">React Fragments</a> \u6765\u7ec4\u5408\u5404\u4e2a\u7ec4\u4ef6\u3002</p>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Fragment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> item <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>term<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Glossary</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">item</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u548c\u5176\u4ed6\u7684\u5143\u7d20\u4e00\u6837\uff0c\u4f60\u53ef\u4ee5\u628a\u4e00\u7cfb\u5217\u7684\u5bf9\u8c61\u6620\u5c04\u5230\u4e00\u4e2a fragment \u7684\u6570\u7ec4\u4e2d\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Glossary</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// Fragments should also have a `key` prop when mapping collections</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>term<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">&gt;</span></span></span>      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5f53\u4f60\u4e0d\u9700\u8981\u5728 fragment \u6807\u7b7e\u4e2d\u6dfb\u52a0\u4efb\u4f55 prop \u4e14\u4f60\u7684\u5de5\u5177\u652f\u6301\u7684\u65f6\u5019\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <a href=\"/react/fragments#short-syntax\">\u77ed\u8bed\u6cd5</a>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> item <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>term<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u89c1 <a href=\"/react/fragments\">Fragments \u6587\u6863</a>\u3002</p>\n<h2 id=\"accessible-forms\"><a class=\"anchor\" href=\"/react/accessibility#accessible-forms\"></a>\u65e0\u969c\u788d\u8868\u5355 </h2>\n<h3 id=\"labeling\"><a class=\"anchor\" href=\"/react/accessibility#labeling\"></a>\u6807\u8bb0 </h3>\n<p>\u6240\u6709\u7684 HTML \u8868\u5355\u63a7\u5236\uff0c\u4f8b\u5982 <code class=\"language-javascript\">&lt;input&gt;</code> \u548c <code class=\"language-javascript\">&lt;textarea&gt;</code> \uff0c\u90fd\u9700\u8981\u88ab\u6807\u6ce8\u6765\u5b9e\u73b0\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u3002\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u5c4f\u5e55\u6717\u8bfb\u5668\u4ee5\u89e3\u91ca\u6027\u6807\u6ce8\u3002</p>\n<p>\u4ee5\u4e0b\u8d44\u6e90\u5411\u6211\u4eec\u5c55\u793a\u4e86\u5982\u4f55\u5199\u6807\u6ce8\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.w3.org/WAI/tutorials/forms/labels/\">W3C \u5411\u6211\u4eec\u5c55\u793a\u5982\u4f55\u6807\u6ce8\u5143\u7d20</a></li>\n<li><a class=\"external-link\" href=\"https://webaim.org/techniques/forms/controls\">WebAIM \u5411\u6211\u4eec\u5c55\u793a\u5982\u4f55\u6807\u6ce8\u5143\u7d20</a></li>\n<li><a class=\"external-link\" href=\"https://www.paciellogroup.com/blog/2017/04/what-is-an-accessible-name/\">Paciello Group \u89e3\u91ca\u4ec0\u4e48\u662f\u65e0\u969c\u788d\u540d\u79f0</a></li>\n</ul>\n<p>\u5c3d\u7ba1\u8fd9\u4e9b\u6807\u51c6 HTML \u5b9e\u8df5\u53ef\u4ee5\u88ab\u76f4\u63a5\u7528\u5728 React \u4e2d\uff0c\u8bf7\u6ce8\u610f <code class=\"language-javascript\">for</code> \u5728 JSX \u4e2d\u5e94\u8be5\u88ab\u5199\u4f5c <code class=\"language-javascript\">htmlFor</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>namedInput<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Name:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>namedInput<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<h3 id=\"notifying-the-user-of-errors\"><a class=\"anchor\" href=\"/react/accessibility#notifying-the-user-of-errors\"></a>\u5728\u51fa\u9519\u65f6\u63d0\u9192\u7528\u6237 </h3>\n<p>\u5f53\u51fa\u73b0\u9519\u8bef\u65f6\uff0c\u6240\u6709\u7528\u6237\u90fd\u5e94\u8be5\u77e5\u60c5\u3002\u4e0b\u9762\u7684\u94fe\u63a5\u544a\u8bc9\u6211\u4eec\u5982\u4f55\u7ed9\u5c4f\u5e55\u6717\u8bfb\u5668\u8bbe\u7f6e\u9519\u8bef\u4fe1\u606f\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.w3.org/WAI/tutorials/forms/notifications/\">W3C \u5c55\u793a\u7528\u6237\u63a8\u9001</a></li>\n<li><a class=\"external-link\" href=\"https://webaim.org/techniques/formvalidation/\">WebAIM \u5173\u4e8e\u8868\u5355\u6821\u9a8c\u7684\u6587\u7ae0</a></li>\n</ul>\n<h2 id=\"focus-control\"><a class=\"anchor\" href=\"/react/accessibility#focus-control\"></a>\u63a7\u5236\u7126\u70b9 </h2>\n<p>\u786e\u4fdd\u4f60\u7684\u7f51\u7edc\u5e94\u7528\u5728\u5373\u4f7f\u53ea\u62e5\u6709\u952e\u76d8\u7684\u73af\u5883\u4e0b\u6b63\u5e38\u8fd0\u4f5c\u3002</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/techniques/keyboard/\">WebAIM \u8ba8\u8bba\u4f7f\u7528\u952e\u76d8\u8fdb\u884c\u65e0\u969c\u788d\u8bbf\u95ee</a></li>\n</ul>\n<h3 id=\"keyboard-focus-and-focus-outline\"><a class=\"anchor\" href=\"/react/accessibility#keyboard-focus-and-focus-outline\"></a>\u952e\u76d8\u7126\u70b9\u53ca\u7126\u70b9\u8f6e\u5ed3 </h3>\n<p>\u952e\u76d8\u7126\u70b9\u7684\u5b9a\u4e49\u662f\uff1a\u5728 DOM \u4e2d\uff0c\u5f53\u524d\u88ab\u9009\u4e2d\u6765\u63a5\u53d7\u952e\u76d8\u4fe1\u606f\u7684\u5143\u7d20\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u5404\u5904\u770b\u5230\u952e\u76d8\u7126\u70b9\uff0c\u5b83\u4f1a\u88ab\u7126\u70b9\u8f6e\u5ed3\u5305\u56f4\uff0c\u50cf\u4e0b\u9762\u7684\u8fd9\u4e2a\u56fe\u50cf\u4e00\u6837\u3002</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/dec0e6bcc1f882baf76ebc860d4f04e5/4fcfe/keyboard-focus.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/dec0e6bcc1f882baf76ebc860d4f04e5/4fcfe/keyboard-focus.png\">Image link</a>\n</span>\n</span>\n</a>\n<p>\u8bf7\u4e0d\u8981\u4f7f\u7528 CSS \u79fb\u9664\u8fd9\u4e2a\u8f6e\u5ed3\uff0c\u6bd4\u5982\u8bbe\u7f6e <code class=\"language-javascript\">outline: 0</code>\uff0c\u9664\u975e\u4f60\u5c06\u4f7f\u7528\u5176\u4ed6\u7684\u65b9\u6cd5\u5b9e\u73b0\u7126\u70b9\u8f6e\u5ed3\u3002</p>\n<h3 id=\"mechanisms-to-skip-to-desired-content\"><a class=\"anchor\" href=\"/react/accessibility#mechanisms-to-skip-to-desired-content\"></a>\u8df3\u8fc7\u5185\u5bb9\u673a\u5236 </h3>\n<p>\u4e3a\u4e86\u5e2e\u52a9\u548c\u63d0\u901f\u952e\u76d8\u5bfc\u822a\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u79cd\u673a\u5236\uff0c\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u8df3\u8fc7\u4e00\u4e9b\u5bfc\u822a\u6bb5\u843d\u3002</p>\n<p>\u8df3\u8f6c\u94fe\u63a5\uff08Skiplinks\uff09\uff0c\u6216\u8005\u8bf4\u8df3\u8f6c\u5bfc\u822a\u94fe\u63a5\uff08Skip Navigation Links\uff09\u662f\u4e00\u79cd\u9690\u85cf\u7684\u5bfc\u822a\u94fe\u63a5\uff0c\u5b83\u53ea\u4f1a\u5728\u4f7f\u7528\u952e\u76d8\u5bfc\u822a\u65f6\u53ef\u89c1\u3002\u4f7f\u7528\u7f51\u9875\u5185\u90e8\u951a\u70b9\u548c\u4e00\u4e9b\u5f0f\u6837\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5b9e\u73b0\u5b83\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/techniques/skipnav/\">WebAIM - \u8df3\u8f6c\u5bfc\u822a\u94fe\u63a5\uff08Skip Navigation Links\uff09</a></li>\n</ul>\n<p>\u53e6\u5916\uff0c\u4f7f\u7528\u5730\u6807\u5143\u7d20\u548c\u89d2\u8272\uff0c\u6bd4\u5982 <code class=\"language-javascript\">&lt;main&gt;</code> \u548c <code class=\"language-javascript\">&lt;aside&gt;</code>\uff0c\u4f5c\u4e3a\u8f85\u52a9\u6765\u5212\u5206\u7f51\u9875\u7684\u533a\u57df\u53ef\u4ee5\u8ba9\u7528\u6237\u5feb\u901f\u5bfc\u822a\u81f3\u8fd9\u4e9b\u90e8\u5206\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u94fe\u63a5\u4e86\u89e3\u66f4\u591a\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u5143\u7d20\u6765\u589e\u5f3a\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.scottohara.me/blog/2018/03/03/landmarks.html\">\u65e0\u969c\u788d\u5730\u6807</a></li>\n</ul>\n<h3 id=\"programmatically-managing-focus\"><a class=\"anchor\" href=\"/react/accessibility#programmatically-managing-focus\"></a>\u4f7f\u7528\u7a0b\u5e8f\u7ba1\u7406\u7126\u70b9 </h3>\n<p>\u6211\u4eec\u7684 React \u5e94\u7528\u5728\u8fd0\u884c\u65f6\u4f1a\u6301\u7eed\u66f4\u6539 HTML DOM\uff0c\u6709\u65f6\u8fd9\u5c06\u4f1a\u5bfc\u81f4\u952e\u76d8\u7126\u70b9\u7684\u4e22\u5931\u6216\u8005\u662f\u88ab\u8bbe\u7f6e\u5230\u4e86\u610f\u6599\u4e4b\u5916\u7684\u5143\u7d20\u4e0a\u3002\u4e3a\u4e86\u4fee\u590d\u8fd9\u7c7b\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u4ee5\u7f16\u7a0b\u7684\u65b9\u5f0f\u8ba9\u952e\u76d8\u805a\u7126\u5230\u6b63\u786e\u7684\u65b9\u5411\u4e0a\u3002\u6bd4\u65b9\u8bf4\uff0c\u5728\u4e00\u4e2a\u5f39\u7a97\u88ab\u5173\u95ed\u7684\u65f6\u5019\uff0c\u91cd\u65b0\u8bbe\u7f6e\u952e\u76d8\u7126\u70b9\u5230\u5f39\u7a97\u7684\u6253\u5f00\u6309\u94ae\u4e0a\u3002</p>\n<p>MDN Web \u6587\u6863\u5173\u6ce8\u4e86\u8fd9\u4e2a\u95ee\u9898\u5e76\u5411\u6211\u4eec\u89e3\u91ca\u4e86\u53ef\u4ee5\u5982\u4f55\u642d\u5efa<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/Accessibility/Keyboard-navigable_JavaScript_widgets\">\u53ef\u7528\u952e\u76d8\u5bfc\u822a\u7684 JavaScript \u90e8\u4ef6</a>\u3002</p>\n<p>\u6211\u4eec\u53ef\u4ee5\u7528 <a href=\"/react/refs-and-the-dom\">DOM \u5143\u7d20\u7684 Refs</a> \u5728 React \u4e2d\u8bbe\u7f6e\u7126\u70b9\u3002</p>\n<p>\u7528\u4ee5\u4e0a\u6280\u672f\uff0c\u6211\u4eec\u5148\u5728\u4e00\u4e2a class \u7ec4\u4ef6\u7684 JSX \u4e2d\u521b\u5efa\u4e00\u4e2a\u5143\u7d20\u7684 ref\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomTextInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u521b\u9020\u4e00\u4e2a textInput DOM \u5143\u7d20\u7684 ref</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u4f7f\u7528 `ref` \u56de\u8c03\u51fd\u6570\u4ee5\u5728\u5b9e\u4f8b\u7684\u4e00\u4e2a\u53d8\u91cf\u4e2d\u5b58\u50a8\u6587\u672c\u8f93\u5165 DOM \u5143\u7d20</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">//\uff08\u6bd4\u5982\uff0cthis.textInput\uff09\u3002</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">}</span></span></span>      <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u4e8e\u5176\u4ed6\u5730\u65b9\u628a\u7126\u70b9\u8bbe\u7f6e\u5728\u8fd9\u4e2a\u7ec4\u4ef6\u4e0a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4f7f\u7528\u539f\u59cb\u7684 DOM API \u663e\u5f0f\u5730\u805a\u7126\u5728 text input \u4e0a</span>\n  <span class=\"token comment\">// \u6ce8\u610f\uff1a\u6211\u4eec\u901a\u8fc7\u8bbf\u95ee \u201ccurrent\u201d \u6765\u83b7\u5f97 DOM \u8282\u70b9</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6709\u65f6\uff0c\u7236\u7ec4\u4ef6\u9700\u8981\u628a\u7126\u70b9\u8bbe\u7f6e\u5728\u5176\u5b50\u7ec4\u4ef6\u7684\u4e00\u4e2a\u5143\u7d20\u4e0a\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728\u5b50\u7ec4\u4ef6\u4e0a\u8bbe\u7f6e\u4e00\u4e2a\u7279\u6b8a\u7684 prop \u6765<a href=\"/react/refs-and-the-dom#exposing-dom-refs-to-parent-components\">\u5bf9\u7236\u7ec4\u4ef6\u66b4\u9732 DOM refs</a> \u4ece\u800c\u628a\u7236\u7ec4\u4ef6\u7684 ref \u4f20\u5411\u5b50\u8282\u70b9\u7684 DOM \u8282\u70b9\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">CustomTextInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputElement <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomTextInput</span></span> <span class=\"token attr-name\">inputRef</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputElement<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u73b0\u5728\u4f60\u5c31\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u8bbe\u7f6e\u7126\u70b9\u4e86</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputElement<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5f53\u4f7f\u7528 <a href=\"/react/higher-order-components\">HOC</a> \u6765\u6269\u5c55\u7ec4\u4ef6\u65f6\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 React \u7684 <code class=\"language-javascript\">forwardRef</code> \u51fd\u6570\u6765\u5411\u88ab\u5305\u88f9\u7684\u7ec4\u4ef6<a href=\"/react/forwarding-refs\">\u8f6c\u53d1 ref</a>\u3002\u5982\u679c\u7b2c\u4e09\u65b9\u7684 HOC \u4e0d\u652f\u6301\u8f6c\u53d1 ref\uff0c\u4e0a\u9762\u7684\u65b9\u6cd5\u4ecd\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u79cd\u5907\u9009\u65b9\u6848\u3002</p>\n<p><a class=\"external-link\" href=\"https://github.com/davidtheclark/react-aria-modal\">react-aria-modal</a>  \u63d0\u4f9b\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u7126\u70b9\u7ba1\u7406\u7684\u4f8b\u5b50\u3002\n\u8fd9\u662f\u4e00\u4e2a\u5c11\u6709\u7684\u5b8c\u5168\u65e0\u969c\u788d\u7684\u6a21\u6001\u7a97\u53e3\u7684\u4f8b\u5b50\u3002\u5b83\u4e0d\u4ec5\u4ec5\u628a\u521d\u59cb\u7126\u70b9\u8bbe\u7f6e\u5728\u4e86\u53d6\u6d88\u6309\u94ae\u4e0a\uff08\u9632\u6b62\u952e\u76d8\u7528\u6237\u610f\u5916\u6fc0\u6d3b\u6210\u529f\u64cd\u4f5c\uff09\u548c\u628a\u952e\u76d8\u7126\u70b9\u56fa\u5b9a\u5728\u4e86\u7a97\u53e3\u4e4b\u5185\uff0c\n\u5173\u95ed\u7a97\u53e3\u65f6\u5b83\u4e5f\u4f1a\u628a\u952e\u76d8\u7126\u70b9\u91cd\u7f6e\u5230\u6253\u5f00\u7a97\u53e3\u7684\u90a3\u4e00\u4e2a\u5143\u7d20\u4e0a\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u867d\u7136\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\uff0c\u4f46\u5b83\u4e5f\u662f\u4e00\u79cd\u5e94\u8be5\u8c28\u614e\u4f7f\u7528\u7684\u6280\u672f\u3002\n\u6211\u4eec\u5e94\u8be5\u5728\u53d7\u5230\u5e72\u6270\u65f6\u4f7f\u7528\u5b83\u6765\u4fee\u590d\u952e\u76d8\u7126\u70b9\uff0c\u800c\u4e0d\u662f\u8bd5\u56fe\u9884\u6d4b\u7528\u6237\u60f3\u8981\u5982\u4f55\u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f\u3002</p>\n</div>\n<h2 id=\"mouse-and-pointer-events\"><a class=\"anchor\" href=\"/react/accessibility#mouse-and-pointer-events\"></a>\u9f20\u6807\u548c\u6307\u9488\u4e8b\u4ef6 </h2>\n<p>\u786e\u4fdd\u4efb\u4f55\u53ef\u4ee5\u4f7f\u7528\u9f20\u6807\u548c\u6307\u9488\u5b8c\u6210\u7684\u529f\u80fd\u4e5f\u53ef\u4ee5\u53ea\u901a\u8fc7\u952e\u76d8\u5b8c\u6210\u3002\u53ea\u4f9d\u9760\u6307\u9488\u4f1a\u4ea7\u751f\u5f88\u591a\u4f7f\u952e\u76d8\u7528\u6237\u65e0\u6cd5\u4f7f\u7528\u4f60\u7684\u5e94\u7528\u7684\u60c5\u51b5\u3002</p>\n<p>\u4e3a\u4e86\u8bf4\u660e\u8fd9\u4e00\u70b9\uff0c\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u7531\u70b9\u51fb\u4e8b\u4ef6\u5f15\u8d77\u7684\u7834\u574f\u65e0\u969c\u788d\u8bbf\u95ee\u7684\u5178\u578b\u793a\u4f8b\uff1a\u5916\u90e8\u70b9\u51fb\u6a21\u5f0f\uff0c\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb\u5143\u7d20\u4ee5\u5916\u7684\u5730\u65b9\u6765\u5173\u95ed\u5df2\u6253\u5f00\u7684\u5f39\u51fa\u6846\u3002</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//5523b05b22210c5a2fa0bd1f01339cb3/outerclick-with-mouse.gif\">Image link</a>\n<p>\u901a\u5e38\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u7684\u65b9\u6cd5\u662f\u5728 <code class=\"language-javascript\">window</code> \u5bf9\u8c61\u4e2d\u9644\u4e0a\u4e00\u4e2a <code class=\"language-javascript\">click</code> \u4e8b\u4ef6\u4ee5\u5173\u95ed\u5f39\u7a97\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">OuterClickExample</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toggleContainer <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onClickHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickOutsideHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onClickOutsideHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickOutsideHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickOutsideHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onClickHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentState</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span>currentState<span class=\"token punctuation\">.</span>isOpen\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">onClickOutsideHandler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toggleContainer<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toggleContainer<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickHandler<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Select an option</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Option 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Option 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Option 3</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5f53\u7528\u6237\u4f7f\u7528\u6307\u9488\u8bbe\u5907\uff0c\u6bd4\u5982\u9f20\u6807\u65f6\uff0c\u8fd9\u6837\u505a\u6ca1\u6709\u95ee\u9898\u3002\u4f46\u662f\u5f53\u53ea\u4f7f\u7528\u952e\u76d8\u65f6\uff0c\u56e0\u4e3a <code class=\"language-javascript\">window</code> \u5bf9\u8c61\u4e0d\u4f1a\u63a5\u53d7\u5230 <code class=\"language-javascript\">click</code> \u4e8b\u4ef6\uff0c\u7528\u6237\u5c06\u65e0\u6cd5\u4f7f\u7528 tab \u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u5143\u7d20\u3002\u8fd9\u6837\u4f1a\u5bfc\u81f4\u7528\u6237\u65e0\u6cd5\u4f7f\u7528\u4f60\u5e94\u7528\u4e2d\u7684\u4e00\u4e9b\u5185\u5bb9\uff0c\u5bfc\u81f4\u4e0d\u5b8c\u6574\u7684\u7528\u6237\u4f53\u9a8c\u3002</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//eca0ca825c8c5e2aa609cee72ef47e27/outerclick-with-keyboard.gif\">Image link</a>\n<p>\u4f7f\u7528\u6b63\u786e\u7684\u4e8b\u4ef6\u89e6\u53d1\u5668\uff0c\u6bd4\u5982 <code class=\"language-javascript\">onBlur</code> \u548c <code class=\"language-javascript\">onFocus</code>\uff0c\u540c\u6837\u53ef\u4ee5\u8fbe\u6210\u8fd9\u9879\u529f\u80fd\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BlurExample</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timeOutId <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onClickHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onBlurHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onBlurHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onFocusHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onFocusHandler</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">onClickHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentState</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span>currentState<span class=\"token punctuation\">.</span>isOpen\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6211\u4eec\u5728\u4e0b\u4e00\u4e2a\u65f6\u95f4\u70b9\u4f7f\u7528 setTimeout \u5173\u95ed\u5f39\u7a97\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u8fd9\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u5931\u53bb\u7126\u70b9\u4e8b\u4ef6\u4f1a\u5728\u65b0\u7684\u7126\u70b9\u4e8b\u4ef6\u524d\u88ab\u89e6\u53d1\uff0c</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6211\u4eec\u9700\u8981\u901a\u8fc7\u8fd9\u4e2a\u6b65\u9aa4\u786e\u8ba4\u8fd9\u4e2a\u5143\u7d20\u7684\u4e00\u4e2a\u5b50\u8282\u70b9</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u662f\u5426\u5f97\u5230\u4e86\u7126\u70b9\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">onBlurHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timeOutId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u5982\u679c\u4e00\u4e2a\u5b50\u8282\u70b9\u83b7\u5f97\u4e86\u7126\u70b9\uff0c\u4e0d\u8981\u5173\u95ed\u5f39\u7a97\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">onFocusHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timeOutId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// React \u901a\u8fc7\u628a\u5931\u53bb\u7126\u70b9\u548c\u83b7\u5f97\u7126\u70b9\u4e8b\u4ef6\u4f20\u8f93\u7ed9\u7236\u8282\u70b9</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u6765\u5e2e\u52a9\u6211\u4eec\u3002</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onBlur</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onBlurHandler<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">           <span class=\"token attr-name\">onFocus</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onFocusHandler<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClickHandler<span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">aria-haspopup</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">aria-expanded</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOpen<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          Select an option</span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Option 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Option 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Option 3</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4ee5\u4e0a\u4ee3\u7801\u4f7f\u5f97\u952e\u76d8\u548c\u9f20\u6807\u7528\u6237\u90fd\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u529f\u80fd\u3002\u8bf7\u6ce8\u610f\u6211\u4eec\u6dfb\u52a0\u4e86 <code class=\"language-javascript\">aria-*</code> props \u4ee5\u670d\u52a1\u5c4f\u5e55\u6717\u8bfb\u5668\u7528\u6237\u3002\u4f5c\u4e3a\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u6ca1\u6709\u5b9e\u73b0\u4f7f\u7528<code class=\"language-javascript\">\u65b9\u5411\u952e</code>\u6765\u4e0e\u5f39\u7a97\u4e92\u52a8\u3002</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//28ce2067489843caf05fe7ce22494542/blur-popover-close.gif\">Image link</a>\n<p>\u8fd9\u53ea\u662f\u4f17\u591a\u53ea\u4f9d\u8d56\u4e8e\u9f20\u6807\u548c\u6307\u9488\u7684\u7a0b\u5e8f\u7834\u574f\u952e\u76d8\u7528\u6237\u7684\u4f8b\u5b50\u4e4b\u4e00\u3002\u59cb\u7ec8\u4f7f\u7528\u952e\u76d8\u6d4b\u8bd5\u4f1a\u8ba9\u4f60\u8fc5\u901f\u53d1\u73b0\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9002\u7528\u4e8e\u952e\u76d8\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u6765\u4fee\u590d\u8fd9\u4e9b\u95ee\u9898\u3002</p>\n<h2 id=\"more-complex-widgets\"><a class=\"anchor\" href=\"/react/accessibility#more-complex-widgets\"></a>\u66f4\u590d\u6742\u7684\u90e8\u4ef6 </h2>\n<p>\u4e00\u4e2a\u66f4\u52a0\u590d\u6742\u7684\u7528\u6237\u4f53\u9a8c\u5e76\u4e0d\u610f\u5473\u7740\u66f4\u52a0\u96be\u4ee5\u8bbf\u95ee\u3002\u901a\u8fc7\u5c3d\u53ef\u80fd\u63a5\u8fd1 HTML \u7f16\u7a0b\uff0c\u65e0\u969c\u788d\u8bbf\u95ee\u4f1a\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\uff0c\u5373\u4f7f\u6700\u590d\u6742\u7684\u90e8\u4ef6\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u65e0\u969c\u788d\u8bbf\u95ee\u3002</p>\n<p>\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u4e86\u89e3 <a class=\"external-link\" href=\"https://www.w3.org/TR/wai-aria/#roles\">ARIA Roles</a> \u548c <a class=\"external-link\" href=\"https://www.w3.org/TR/wai-aria/#states_and_properties\">ARIA States and Properties</a> \u7684\u77e5\u8bc6\u3002\n\u5176\u4e2d\u6709\u5305\u542b\u4e86\u591a\u79cd HTML \u5c5e\u6027\u7684\u5de5\u5177\u7bb1\uff0c\u8fd9\u4e9b HTML \u5c5e\u6027\u88ab JSX \u5b8c\u5168\u652f\u6301\u5e76\u4e14\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u642d\u5efa\u5b8c\u5168\u65e0\u969c\u788d\uff0c\u529f\u80fd\u5f3a\u5927\u7684 React \u7ec4\u4ef6\u3002</p>\n<p>\u6bcf\u4e00\u79cd\u90e8\u4ef6\u90fd\u6709\u4e00\u79cd\u7279\u5b9a\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5e76\u4e14\u7528\u6237\u548c\u7528\u6237\u4ee3\u7406\u90fd\u4f1a\u671f\u5f85\u4f7f\u7528\u76f8\u4f3c\u7684\u65b9\u6cd5\u4f7f\u7528\u5b83\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.w3.org/TR/wai-aria-practices/#aria_ex\">WAI-ARIA \u521b\u4f5c\u5b9e\u8df5 \u2014\u2014 \u8bbe\u8ba1\u6a21\u5f0f\u548c\u90e8\u4ef6</a></li>\n<li><a class=\"external-link\" href=\"https://heydonworks.com/article/practical-aria-examples/\">Heydon Pickering - ARIA Examples</a></li>\n<li><a class=\"external-link\" href=\"https://inclusive-components.design/\">\u5305\u5bb9\u6027\u7ec4\u4ef6\uff08Inclusive Components\uff09</a></li>\n</ul>\n<h2 id=\"other-points-for-consideration\"><a class=\"anchor\" href=\"/react/accessibility#other-points-for-consideration\"></a>\u5176\u4ed6\u8003\u8651\u56e0\u7d20 </h2>\n<h3 id=\"setting-the-language\"><a class=\"anchor\" href=\"/react/accessibility#setting-the-language\"></a>\u8bbe\u7f6e\u8bed\u8a00 </h3>\n<p>\u4e3a\u4e86\u4f7f\u5c4f\u5e55\u6717\u8bfb\u5668\u53ef\u4ee5\u4f7f\u7528\u6b63\u786e\u7684\u8bed\u97f3\u8bbe\u7f6e\uff0c\u8bf7\u5728\u7f51\u9875\u4e0a\u8bbe\u7f6e\u6b63\u786e\u7684\u4eba\u7c7b\u8bed\u8a00\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/techniques/screenreader/#language\">WebAIM \u2014\u2014 \u6587\u6863\u8bed\u8a00</a></li>\n</ul>\n<h3 id=\"setting-the-document-title\"><a class=\"anchor\" href=\"/react/accessibility#setting-the-document-title\"></a>\u8bbe\u7f6e\u6587\u6863\u6807\u9898 </h3>\n<p>\u4e3a\u4e86\u786e\u4fdd\u7528\u6237\u53ef\u4ee5\u4e86\u89e3\u5f53\u524d\u7f51\u9875\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u9700\u8981\u628a\u6587\u6863\u7684 <code class=\"language-javascript\">&lt;title&gt;</code> \u8bbe\u7f6e\u4e3a\u53ef\u4ee5\u6b63\u786e\u63cf\u8ff0\u5f53\u524d\u9875\u9762\u7684\u6587\u5b57\u3002</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-title.html\">WCAG \u2014\u2014 \u7406\u89e3\u6587\u6863\u6807\u9898\u7684\u8981\u6c42</a></li>\n</ul>\n<p>\u5728 React \u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/gaearon/react-document-title\">React \u6587\u6863\u6807\u9898\u7ec4\u4ef6\uff08React Document Title Component\uff09</a>\u6765\u8bbe\u7f6e\u6807\u9898\u3002</p>\n<h3 id=\"color-contrast\"><a class=\"anchor\" href=\"/react/accessibility#color-contrast\"></a>\u8272\u5f69\u5bf9\u6bd4\u5ea6 </h3>\n<p>\u4e3a\u4e86\u5c3d\u53ef\u80fd\u8ba9\u89c6\u529b\u969c\u788d\u7528\u6237\u53ef\u4ee5\u9605\u8bfb\u4f60\u7f51\u7ad9\u4e0a\u7684\u6240\u6709\u53ef\u8bfb\u6587\u5b57\uff0c\u8bf7\u786e\u4fdd\u4f60\u7684\u6587\u5b57\u90fd\u6709\u8db3\u591f\u7684\u8272\u5f69\u5bf9\u6bd4\u5ea6\u3002</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html\">WCAG \u2014\u2014 \u7406\u89e3\u8272\u5f69\u5bf9\u6bd4\u5ea6\u8981\u6c42</a></li>\n<li><a class=\"external-link\" href=\"https://www.smashingmagazine.com/2014/10/color-contrast-tips-and-tools-for-accessibility/\">\u6709\u5173\u8272\u5f69\u5bf9\u6bd4\u5ea6\u7684\u4e00\u5207\u4ee5\u53ca\u4e3a\u4f55\u4f60\u5e94\u8be5\u91cd\u65b0\u8003\u8651\u5b83</a></li>\n<li><a class=\"external-link\" href=\"https://a11yproject.com/posts/what-is-color-contrast/\">A11yProject \u2014\u2014 \u4ec0\u4e48\u662f\u8272\u5f69\u5bf9\u6bd4\u5ea6</a></li>\n</ul>\n<p>\u624b\u5de5\u8ba1\u7b97\u4f60\u7f51\u7ad9\u4e0a\u6240\u6709\u6070\u5f53\u7684\u8272\u5f69\u7ec4\u5408\u4f1a\u662f\u4e4f\u5473\u7684\u3002\u6240\u4ee5\uff0c\u4f5c\u4e3a\u4ee3\u66ff\uff0c\u4f60\u53ef\u4ee5<a class=\"external-link\" href=\"https://colorable.jxnblk.com/\">\u4f7f\u7528 Colorable \u6765\u8ba1\u7b97\u51fa\u4e00\u4e2a\u5b8c\u5168\u65e0\u969c\u788d\u7684\u8c03\u8272\u677f</a>\u3002</p>\n<p>\u4e0b\u9762\u4ecb\u7ecd\u7684 aXe \u548c WAVE \u90fd\u652f\u6301\u8272\u5f69\u5bf9\u6bd4\u5ea6\u6d4b\u8bd5\u5e76\u4f1a\u62a5\u544a\u5bf9\u6bd4\u5ea6\u9519\u8bef\u3002</p>\n<p>\u5982\u679c\u4f60\u60f3\u6269\u5c55\u5bf9\u6bd4\u5ea6\u6d4b\u8bd5\u80fd\u529b\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/resources/contrastchecker/\">WebAIM \u2014\u2014 \u8272\u5f69\u5bf9\u6bd4\u5ea6\u68c0\u9a8c\u5de5\u5177</a></li>\n<li><a class=\"external-link\" href=\"https://www.paciellogroup.com/resources/contrastanalyser/\">The Paciello Group \u2014\u2014 \u8272\u5f69\u5bf9\u6bd4\u5ea6\u5206\u6790\u5de5\u5177</a></li>\n</ul>\n<h2 id=\"development-and-testing-tools\"><a class=\"anchor\" href=\"/react/accessibility#development-and-testing-tools\"></a>\u5f00\u53d1\u53ca\u6d4b\u8bd5 </h2>\n<p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u5f88\u591a\u5de5\u5177\u6765\u5e2e\u52a9\u6211\u4eec\u521b\u5efa\u65e0\u969c\u788d\u7684\u7f51\u7edc\u5e94\u7528\u3002</p>\n<h3 id=\"the-keyboard\"><a class=\"anchor\" href=\"/react/accessibility#the-keyboard\"></a>\u952e\u76d8 </h3>\n<p>\u6700\u6700\u7b80\u5355\u4e5f\u662f\u6700\u6700\u91cd\u8981\u7684\u68c0\u6d4b\u662f\u786e\u4fdd\u4f60\u7684\u6574\u4e2a\u7f51\u7ad9\u90fd\u53ef\u4ee5\u88ab\u53ea\u4f7f\u7528\u952e\u76d8\u7684\u7528\u6237\u4f7f\u7528\u548c\u8bbf\u95ee\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u6b65\u9aa4\u8fdb\u884c\u68c0\u6d4b\uff1a</p>\n<ol>\n<li>\u65ad\u5f00\u9f20\u6807</li>\n<li>\u4f7f\u7528 <code class=\"language-javascript\">Tab</code> \u548c <code class=\"language-javascript\">Shift+Tab</code> \u6765\u6d4f\u89c8\u3002</li>\n<li>\u4f7f\u7528 <code class=\"language-javascript\">Enter</code> \u6765\u6fc0\u6d3b\u5143\u7d20\u3002</li>\n<li>\u5f53\u9700\u8981\u65f6\uff0c\u4f7f\u7528\u952e\u76d8\u4e0a\u7684\u65b9\u5411\u952e\u6765\u548c\u67d0\u4e9b\u5143\u7d20\u4e92\u52a8\uff0c\u6bd4\u5982\u83dc\u5355\u548c\u4e0b\u62c9\u9009\u9879\u3002</li>\n</ol>\n<h3 id=\"development-assistance\"><a class=\"anchor\" href=\"/react/accessibility#development-assistance\"></a>\u5f00\u53d1\u8f85\u52a9 </h3>\n<p>\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728 JSX \u4ee3\u7801\u4e2d\u68c0\u6d4b\u4e00\u4e9b\u65e0\u969c\u788d\u590d\u5236\u529f\u80fd\u3002\u901a\u5e38\u652f\u6301 JSX \u7684 IDE \u4f1a\u9488\u5bf9 ARIA roles\uff0cstates \u548c properties \u63d0\u4f9b\u667a\u80fd\u68c0\u6d4b\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\uff1a</p>\n<h4 id=\"eslint-plugin-jsx-a11y\"><a class=\"anchor\" href=\"/react/accessibility#eslint-plugin-jsx-a11y\"></a>eslint-plugin-jsx-a11y </h4>\n<p>ESLint \u4e2d\u7684 <a class=\"external-link\" href=\"https://github.com/evcohen/eslint-plugin-jsx-a11y\">eslint-plugin-jsx-a11y</a> \u63d2\u4ef6\u4e3a\u4f60\u7684 JSX \u4e2d\u7684\u65e0\u969c\u788d\u95ee\u9898\u63d0\u4f9b\u4e86 AST \u7684\u8bed\u6cd5\u68c0\u6d4b\u53cd\u9988\u3002\u8bb8\u591a IDE \u90fd\u5141\u8bb8\u4f60\u628a\u8fd9\u4e9b\u53d1\u73b0\u76f4\u63a5\u96c6\u6210\u5230\u4ee3\u7801\u5206\u6790\u548c\u6e90\u6587\u4ef6\u7a97\u53e3\u4e2d\u3002</p>\n<p><a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a>\u4e2d\u4f7f\u7528\u4e86\u8fd9\u4e2a\u63d2\u4ef6\u4e2d\u7684\u4e00\u90e8\u5206\u89c4\u5219\u3002\u5982\u679c\u4f60\u60f3\u542f\u7528\u66f4\u591a\u7684\u65e0\u969c\u788d\u89c4\u5219\uff0c\u4f60\u53ef\u4ee5\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u6709\u5982\u4e0b\u5185\u5bb9\u7684 <code class=\"language-javascript\">.eslintrc</code>  \u6587\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsxon\"><code class=\"language-javascript\">{\n  \"extends\": [\"react-app\", \"plugin:jsx-a11y/recommended\"],\n  \"plugins\": [\"jsx-a11y\"]\n}</code></pre></div>\n<h3 id=\"testing-accessibility-in-the-browser\"><a class=\"anchor\" href=\"/react/accessibility#testing-accessibility-in-the-browser\"></a>\u5728\u6d4f\u89c8\u5668\u4e2d\u6d4b\u8bd5\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd </h3>\n<p>\u5df2\u6709\u5f88\u591a\u5de5\u5177\u53ef\u4ee5\u5728\u60a8\u7684\u6d4f\u89c8\u5668\u5185\u8fdb\u884c\u7f51\u9875\u7684\u65e0\u969c\u788d\u6027\u9a8c\u8bc1\u3002\n\u56e0\u4e3a\u5b83\u4eec\u53ea\u80fd\u68c0\u6d4b\u4f60 HTML \u7684\u6280\u672f\u65e0\u969c\u788d\u6027\uff0c\u6240\u4ee5\u8bf7\u5c06\u5b83\u4eec\u4e0e\u8fd9\u91cc\u63d0\u5230\u7684\u65e0\u969c\u788d\u68c0\u6d4b\u5de5\u5177\u4e00\u8d77\u4f7f\u7528\u3002</p>\n<h4 id=\"axe-axe-core-and-react-axe\"><a class=\"anchor\" href=\"/react/accessibility#axe-axe-core-and-react-axe\"></a>aXe,aXe-core \u4ee5\u53ca react-axe </h4>\n<p>Deque \u7cfb\u7edf\u63d0\u4f9b\u4e86 <a class=\"external-link\" href=\"https://github.com/dequelabs/axe-core\">aXe-core</a> \u4ee5\u5bf9\u4f60\u7684\u5e94\u7528\u8fdb\u884c\u81ea\u52a8\u53ca\u7aef\u81f3\u7aef\u65e0\u969c\u788d\u6027\u6d4b\u8bd5\u3002\u8fd9\u4e2a\u7ec4\u4ef6\u5305\u542b\u4e86\u5bf9 Selenium \u7684\u96c6\u6210\u3002</p>\n<p><a class=\"external-link\" href=\"https://www.deque.com/products/axe/\">\u65e0\u969c\u788d\u8bbf\u95ee\u5f15\u64ce\uff08The Accessibility Engine\uff09</a>\uff0c\u7b80\u79f0 aXe\uff0c\u662f\u4e00\u4e2a\u57fa\u4e8e <code class=\"language-javascript\">aXe-core</code> \u7684\u65e0\u969c\u788d\u8bbf\u95ee\u6027\u68c0\u6d4b\u5668\u3002</p>\n<p>\u5728\u5f00\u53d1\u548c debug \u65f6\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/dequelabs/axe-core-npm/tree/develop/packages/react\">@axe-core/react</a> \u7ec4\u4ef6\u76f4\u63a5\u628a\u65e0\u969c\u788d\u8bbf\u95ee\u7684\u53d1\u73b0\u663e\u793a\u5728\u63a7\u5236\u53f0\u4e2d\u3002</p>\n<h4 id=\"webaim-wave\"><a class=\"anchor\" href=\"/react/accessibility#webaim-wave\"></a>WebAIM WAVE </h4>\n<p><a class=\"external-link\" href=\"https://wave.webaim.org/extension/\">\u7f51\u7edc\u65e0\u969c\u788d\u6027\u8bc4\u4f30\u5de5\u5177\uff08Web Accessibility Evaluation Tool\uff09</a>\u4e5f\u662f\u4e00\u4e2a\u65e0\u969c\u788d\u8f85\u52a9\u7684\u6d4f\u89c8\u5668\u63d2\u4ef6\u3002</p>\n<h4 id=\"accessibility-inspectors-and-the-accessibility-tree\"><a class=\"anchor\" href=\"/react/accessibility#accessibility-inspectors-and-the-accessibility-tree\"></a>\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u68c0\u6d4b\u5668\u548c\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u6811 </h4>\n<p><a class=\"external-link\" href=\"https://www.paciellogroup.com/blog/2015/01/the-browser-accessibility-tree/\">\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u6811</a>\u662f DOM \u6811\u7684\u4e00\u4e2a\u5b50\u96c6\uff0c\n\u5176\u4e2d\u5305\u542b\u4e86\u6240\u6709 DOM \u5143\u7d20\u4e2d\u5e94\u8be5\u88ab\u66b4\u9732\u7ed9\u65e0\u969c\u788d\u8f85\u52a9\u6280\u672f\uff08\u6bd4\u5982\u5c4f\u5e55\u6717\u8bfb\u5668\uff09\u7684\u65e0\u969c\u788d\u8f85\u52a9\u5bf9\u8c61\u3002</p>\n<p>\u5728\u4e00\u4e9b\u6d4f\u89c8\u5668\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u6811\u4e2d\u8f7b\u677e\u7684\u770b\u5230\u6bcf\u4e2a\u5143\u7d20\u7684\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u4fe1\u606f\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Tools/Accessibility_inspector\">\u5728 Firefox \u4e2d\u4f7f\u7528\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u68c0\u6d4b\u5668</a></li>\n<li><a class=\"external-link\" href=\"https://developers.google.com/web/tools/chrome-devtools/accessibility/reference#pane\">\u5728 Chrome \u4e2d\u6fc0\u6d3b\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u68c0\u6d4b\u5668</a></li>\n<li><a class=\"external-link\" href=\"https://developer.apple.com/library/content/documentation/Accessibility/Conceptual/AccessibilityMacOSX/OSXAXTestingApps.html\">\u5728 OS X Safari \u4e2d\u4f7f\u7528\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u68c0\u6d4b\u5668</a></li>\n</ul>\n<h3 id=\"screen-readers\"><a class=\"anchor\" href=\"/react/accessibility#screen-readers\"></a>\u5c4f\u5e55\u6717\u8bfb\u5668 </h3>\n<p>\u4f7f\u7528\u5c4f\u5e55\u6717\u8bfb\u5668\u6d4b\u8bd5\u5e94\u8be5\u662f\u4f60\u65e0\u969c\u788d\u8f85\u52a9\u529f\u80fd\u6d4b\u8bd5\u7684\u4e00\u90e8\u5206\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u6d4f\u89c8\u5668\u4e0e\u5c4f\u5e55\u6717\u8bfb\u5668\u7684\u7ec4\u5408\u5f88\u91cd\u8981\u3002\u6211\u4eec\u5efa\u8bae\u5728\u6700\u9002\u7528\u4e8e\u4f60\u7684\u5c4f\u5e55\u6717\u8bfb\u5668\u7684\u6d4f\u89c8\u5668\u4e2d\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u3002</p>\n<h3 id=\"commonly-used-screen-readers\"><a class=\"anchor\" href=\"/react/accessibility#commonly-used-screen-readers\"></a>\u5e38\u7528\u5c4f\u5e55\u6717\u8bfb\u5668 </h3>\n<h4 id=\"nvda-in-firefox\"><a class=\"anchor\" href=\"/react/accessibility#nvda-in-firefox\"></a>\u706b\u72d0\u4e2d\u7684 NVDA </h4>\n<p><a class=\"external-link\" href=\"https://www.nvaccess.org/\">NonVisual Desktop Access</a>\uff0c\u7b80\u79f0 NVDA\uff0c\u662f\u4e00\u4e2a\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684 Windows \u5f00\u6e90\u5c4f\u5e55\u6717\u8bfb\u5668\u3002</p>\n<p>\u60f3\u8981\u4e86\u89e3\u600e\u4e48\u6837\u6700\u597d\u7684\u4f7f\u7528 NVDA\uff0c\u8bf7\u53c2\u8003\u4e0b\u9762\u7684\u6307\u5357\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/articles/nvda/\">WebAIM \u2014\u2014 \u4f7f\u7528 NVD A\u6765\u8bc4\u4f30\u7f51\u7edc\u7684\u53ef\u65e0\u969c\u788d\u8bbf\u95ee\u6027</a></li>\n<li><a class=\"external-link\" href=\"https://dequeuniversity.com/screenreaders/nvda-keyboard-shortcuts\">Deque \u2014\u2014 NVDA \u952e\u76d8\u5feb\u6377\u952e</a></li>\n</ul>\n<h4 id=\"voiceover-in-safari\"><a class=\"anchor\" href=\"/react/accessibility#voiceover-in-safari\"></a>Safari \u4e2d\u7684 VoiceOver </h4>\n<p>VoiceOver \u662f\u82f9\u679c\u8bbe\u5907\u7684\u81ea\u5e26\u5c4f\u5e55\u6717\u8bfb\u5668\u3002</p>\n<p>\u60f3\u8981\u4e86\u89e3\u5982\u4f55\u6fc0\u6d3b\u4ee5\u53ca\u4f7f\u7528 VoiceOver\uff0c\u8bf7\u53c2\u8003\u4e0b\u9762\u7684\u6307\u5357\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/articles/voiceover/\">WebAIM \u2014\u2014 \u4f7f\u7528 VoiceOver \u6765\u8bc4\u4f30\u7f51\u7edc\u7684\u53ef\u65e0\u969c\u788d\u8bbf\u95ee\u6027</a></li>\n<li><a class=\"external-link\" href=\"https://dequeuniversity.com/screenreaders/voiceover-keyboard-shortcuts\">Deque \u2014\u2014 OS X \u4e2d\u7684 VoiceOver \u952e\u76d8\u5feb\u6377\u952e</a></li>\n<li><a class=\"external-link\" href=\"https://dequeuniversity.com/screenreaders/voiceover-ios-shortcuts\">Deque \u2014\u2014 iOS \u4e2d\u7684 VoiceOver \u5feb\u6377\u952e</a></li>\n</ul>\n<h4 id=\"jaws-in-internet-explorer\"><a class=\"anchor\" href=\"/react/accessibility#jaws-in-internet-explorer\"></a>Internet Explorer \u4e2d\u7684 JAWS </h4>\n<p><a class=\"external-link\" href=\"https://www.freedomscientific.com/Products/software/JAWS/\">Job Access With Speech</a>\u53c8\u79f0 JAWS\uff0c\u662f\u4e00\u4e2a\u5e38\u7528\u7684 Windows \u5c4f\u5e55\u6717\u8bfb\u5668\u3002</p>\n<p>\u60f3\u8981\u4e86\u89e3\u5982\u4f55\u6700\u597d\u7684\u4f7f\u7528 VoiceOver\uff0c\u8bf7\u53c2\u8003\u4e0b\u9762\u7684\u6307\u5357\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://webaim.org/articles/jaws/\">WebAIM \u2014\u2014 \u4f7f\u7528 JAWS \u6765\u8bc4\u4f30\u7f51\u7edc\u7684\u53ef\u65e0\u969c\u788d\u8bbf\u95ee\u6027</a></li>\n<li><a class=\"external-link\" href=\"https://dequeuniversity.com/screenreaders/jaws-keyboard-shortcuts\">Deque \u2014\u2014 JAWS \u952e\u76d8\u5feb\u6377\u952e</a></li>\n</ul>\n<h3 id=\"other-screen-readers\"><a class=\"anchor\" href=\"/react/accessibility#other-screen-readers\"></a>\u5176\u4ed6\u5c4f\u5e55\u6717\u8bfb\u5668 </h3>\n<h4 id=\"chromevox-in-google-chrome\"><a class=\"anchor\" href=\"/react/accessibility#chromevox-in-google-chrome\"></a>Google Chrome \u4e2d\u7684 ChromeVox </h4>\n<p><a class=\"external-link\" href=\"https://www.chromevox.com/\">ChromeVox</a>\u662f Chromebook \u7684\u5185\u7f6e\u5c4f\u5e55\u6717\u8bfb\u5668\uff0c\u540c\u65f6\u4e5f\u662f Google Chrome \u4e2d\u7684<a class=\"external-link\" href=\"https://chrome.google.com/webstore/detail/chromevox/kgejglhpjiefppelpmljglcjbhoiplfn?hl=en\">\u4e00\u4e2a\u63d2\u4ef6</a>\u3002</p>\n<p>\u60f3\u8981\u4e86\u89e3\u5982\u4f55\u6700\u597d\u7684\u4f7f\u7528 ChromeVox\uff0c\u8bf7\u53c2\u8003\u4e0b\u9762\u7684\u6307\u5357\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://support.google.com/chromebook/answer/7031755?hl=en\">Google Chromebook \u5e2e\u52a9 \u2014\u2014 \u4f7f\u7528\u5185\u7f6e\u5c4f\u5e55\u6717\u8bfb\u5668</a></li>\n<li><a class=\"external-link\" href=\"https://www.chromevox.com/keyboard_shortcuts.html\">ChromeVox \u7ecf\u5178\u952e\u76d8\u5feb\u6377\u952e\u53c2\u8003</a></li>\n</ul></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/accessibility.md\">Edit this page</a></p></div></article>", "path": "/react/accessibility", "nav": ["/react/thinking-in-react", "/react/code-splitting"]}, {"key": "\u4ee3\u7801\u5206\u5272", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h2 id=\"bundling\"><a class=\"anchor\" href=\"/react/code-splitting#bundling\"></a>\u6253\u5305 </h2>\n<p>\u5927\u591a\u6570 React \u5e94\u7528\u90fd\u4f1a\u4f7f\u7528 <a class=\"external-link\" href=\"https://webpack.docschina.org\">Webpack</a>\uff0c<a class=\"external-link\" href=\"https://rollupjs.org/\">Rollup</a> \u6216 <a class=\"external-link\" href=\"http://browserify.org/\">Browserify</a> \u8fd9\u7c7b\u7684\u6784\u5efa\u5de5\u5177\u6765\u6253\u5305\u6587\u4ef6\u3002\u6253\u5305\u662f\u4e00\u4e2a\u5c06\u6587\u4ef6\u5f15\u5165\u5e76\u5408\u5e76\u5230\u4e00\u4e2a\u5355\u72ec\u6587\u4ef6\u7684\u8fc7\u7a0b\uff0c\u6700\u7ec8\u5f62\u6210\u4e00\u4e2a \u201cbundle\u201d\u3002\u63a5\u7740\u5728\u9875\u9762\u4e0a\u5f15\u5165\u8be5 bundle\uff0c\u6574\u4e2a\u5e94\u7528\u5373\u53ef\u4e00\u6b21\u6027\u52a0\u8f7d\u3002</p>\n<h4 id=\"example\"><a class=\"anchor\" href=\"/react/code-splitting#example\"></a>\u793a\u4f8b </h4>\n<p><strong>App\u6587\u4ef6\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// app.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./math.js'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 42</span></code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// math.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u6253\u5305\u540e\u6587\u4ef6\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 42</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u6700\u7ec8\u4f60\u6253\u5305\u540e\u7684\u6587\u4ef6\u53ef\u80fd\u770b\u8d77\u6765\u4f1a\u548c\u4e0a\u9762\u7684\u4f8b\u5b50\u533a\u522b\u5f88\u5927\u3002</p>\n</div>\n<p>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528 <a class=\"external-link\" href=\"https://create-react-app.dev\">Create React App</a>\uff0c<a class=\"external-link\" href=\"https://nextjs.org/\">Next.js</a>\uff0c<a class=\"external-link\" href=\"https://www.gatsbyjs.org/\">Gatsby</a>\uff0c\u6216\u8005\u7c7b\u4f3c\u7684\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5185\u7f6e\u7684 Webpack \u914d\u7f6e\u6765\u6784\u5efa\u4f60\u7684\u5e94\u7528\u3002</p>\n<p>\u5982\u679c\u4f60\u6ca1\u6709\u4f7f\u7528\u8fd9\u7c7b\u5de5\u5177\uff0c\u4f60\u5c31\u9700\u8981\u81ea\u5df1\u6765\u8fdb\u884c\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u67e5\u770b Webpack \u6587\u6863\u4e0a\u7684<a class=\"external-link\" href=\"https://webpack.docschina.org/guides/installation/\">\u5b89\u88c5</a>\u548c<a class=\"external-link\" href=\"https://webpack.docschina.org/guides/getting-started/\">\u5165\u95e8\u6559\u7a0b</a>\u3002</p>\n<h2 id=\"code-splitting\"><a class=\"anchor\" href=\"/react/code-splitting#code-splitting\"></a>\u4ee3\u7801\u5206\u5272 </h2>\n<p>\u6253\u5305\u662f\u4e2a\u975e\u5e38\u68d2\u7684\u6280\u672f\uff0c\u4f46\u968f\u7740\u4f60\u7684\u5e94\u7528\u589e\u957f\uff0c\u4f60\u7684\u4ee3\u7801\u5305\u4e5f\u5c06\u968f\u4e4b\u589e\u957f\u3002\u5c24\u5176\u662f\u5728\u6574\u5408\u4e86\u4f53\u79ef\u5de8\u5927\u7684\u7b2c\u4e09\u65b9\u5e93\u7684\u60c5\u51b5\u4e0b\u3002\u4f60\u9700\u8981\u5173\u6ce8\u4f60\u4ee3\u7801\u5305\u4e2d\u6240\u5305\u542b\u7684\u4ee3\u7801\uff0c\u4ee5\u907f\u514d\u56e0\u4f53\u79ef\u8fc7\u5927\u800c\u5bfc\u81f4\u52a0\u8f7d\u65f6\u95f4\u8fc7\u957f\u3002</p>\n<p>\u4e3a\u4e86\u907f\u514d\u641e\u51fa\u5927\u4f53\u79ef\u7684\u4ee3\u7801\u5305\uff0c\u5728\u524d\u671f\u5c31\u601d\u8003\u8be5\u95ee\u9898\u5e76\u5bf9\u4ee3\u7801\u5305\u8fdb\u884c\u5206\u5272\u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\n\u4ee3\u7801\u5206\u5272\u662f\u7531\u8bf8\u5982 <a class=\"external-link\" href=\"https://webpack.docschina.org/guides/code-splitting/\">Webpack</a>\uff0c<a class=\"external-link\" href=\"https://rollupjs.org/guide/en/#code-splitting\">Rollup</a> \u548c Browserify\uff08<a class=\"external-link\" href=\"https://github.com/browserify/factor-bundle\">factor-bundle</a>\uff09\u8fd9\u7c7b\u6253\u5305\u5668\u652f\u6301\u7684\u4e00\u9879\u6280\u672f\uff0c\u80fd\u591f\u521b\u5efa\u591a\u4e2a\u5305\u5e76\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u52a0\u8f7d\u3002</p>\n<p>\u5bf9\u4f60\u7684\u5e94\u7528\u8fdb\u884c\u4ee3\u7801\u5206\u5272\u80fd\u591f\u5e2e\u52a9\u4f60\u201c\u61d2\u52a0\u8f7d\u201d\u5f53\u524d\u7528\u6237\u6240\u9700\u8981\u7684\u5185\u5bb9\uff0c\u80fd\u591f\u663e\u8457\u5730\u63d0\u9ad8\u4f60\u7684\u5e94\u7528\u6027\u80fd\u3002\u5c3d\u7ba1\u5e76\u6ca1\u6709\u51cf\u5c11\u5e94\u7528\u6574\u4f53\u7684\u4ee3\u7801\u4f53\u79ef\uff0c\u4f46\u4f60\u53ef\u4ee5\u907f\u514d\u52a0\u8f7d\u7528\u6237\u6c38\u8fdc\u4e0d\u9700\u8981\u7684\u4ee3\u7801\uff0c\u5e76\u5728\u521d\u59cb\u52a0\u8f7d\u7684\u65f6\u5019\u51cf\u5c11\u6240\u9700\u52a0\u8f7d\u7684\u4ee3\u7801\u91cf\u3002</p>\n<h2 id=\"import\"><a class=\"anchor\" href=\"/react/code-splitting#import\"></a><code class=\"language-javascript\">import()</code> </h2>\n<p>\u5728\u4f60\u7684\u5e94\u7528\u4e2d\u5f15\u5165\u4ee3\u7801\u5206\u5272\u7684\u6700\u4f73\u65b9\u5f0f\u662f\u901a\u8fc7\u52a8\u6001 <code class=\"language-javascript\">import()</code> \u8bed\u6cd5\u3002</p>\n<p><strong>\u4f7f\u7528\u4e4b\u524d\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> add <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./math'</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>\u4f7f\u7528\u4e4b\u540e\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./math\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">math</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">26</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5f53 Webpack \u89e3\u6790\u5230\u8be5\u8bed\u6cd5\u65f6\uff0c\u4f1a\u81ea\u52a8\u8fdb\u884c\u4ee3\u7801\u5206\u5272\u3002\u5982\u679c\u4f60\u4f7f\u7528 Create React App\uff0c\u8be5\u529f\u80fd\u5df2\u5f00\u7bb1\u5373\u7528\uff0c\u4f60\u53ef\u4ee5<a class=\"external-link\" href=\"https://create-react-app.dev/docs/code-splitting/\">\u7acb\u523b\u4f7f\u7528</a>\u8be5\u7279\u6027\u3002<a class=\"external-link\" href=\"https://nextjs.org/docs/advanced-features/dynamic-import\">Next.js</a> \u4e5f\u5df2\u652f\u6301\u8be5\u7279\u6027\u800c\u65e0\u9700\u8fdb\u884c\u914d\u7f6e\u3002</p>\n<p>\u5982\u679c\u4f60\u81ea\u5df1\u914d\u7f6e Webpack\uff0c\u4f60\u53ef\u80fd\u8981\u9605\u8bfb\u4e0b Webpack \u5173\u4e8e<a class=\"external-link\" href=\"https://webpack.docschina.org/guides/code-splitting/\">\u4ee3\u7801\u5206\u5272</a>\u7684\u6307\u5357\u3002\u4f60\u7684 Webpack \u914d\u7f6e\u5e94\u8be5<a class=\"external-link\" href=\"https://gist.github.com/gaearon/ca6e803f5c604d37468b0091d9959269\">\u7c7b\u4f3c\u4e8e\u6b64</a>\u3002</p>\n<p>\u5f53\u4f7f\u7528 <a class=\"external-link\" href=\"https://babeljs.io/\">Babel</a> \u65f6\uff0c\u4f60\u8981\u786e\u4fdd Babel \u80fd\u591f\u89e3\u6790\u52a8\u6001 import \u8bed\u6cd5\u800c\u4e0d\u662f\u5c06\u5176\u8fdb\u884c\u8f6c\u6362\u3002\u5bf9\u4e8e\u8fd9\u4e00\u8981\u6c42\u4f60\u9700\u8981 <a class=\"external-link\" href=\"https://classic.yarnpkg.com/en/package/@babel/plugin-syntax-dynamic-import\">@babel/plugin-syntax-dynamic-import</a> \u63d2\u4ef6\u3002</p>\n<h2 id=\"reactlazy\"><a class=\"anchor\" href=\"/react/code-splitting#reactlazy\"></a><code class=\"language-javascript\">React.lazy</code> </h2>\n<p><code class=\"language-javascript\">React.lazy</code> \u51fd\u6570\u80fd\u8ba9\u4f60\u50cf\u6e32\u67d3\u5e38\u89c4\u7ec4\u4ef6\u4e00\u6837\u5904\u7406\u52a8\u6001\u5f15\u5165\uff08\u7684\u7ec4\u4ef6\uff09\u3002</p>\n<p><strong>\u4f7f\u7528\u4e4b\u524d\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> OtherComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'./OtherComponent'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>\u4f7f\u7528\u4e4b\u540e\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> OtherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./OtherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6b64\u4ee3\u7801\u5c06\u4f1a\u5728\u7ec4\u4ef6\u9996\u6b21\u6e32\u67d3\u65f6\uff0c\u81ea\u52a8\u5bfc\u5165\u5305\u542b <code class=\"language-javascript\">OtherComponent</code> \u7ec4\u4ef6\u7684\u5305\u3002</p>\n<p><code class=\"language-javascript\">React.lazy</code> \u63a5\u53d7\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u52a8\u6001\u8c03\u7528 <code class=\"language-javascript\">import()</code>\u3002\u5b83\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a <code class=\"language-javascript\">Promise</code>\uff0c\u8be5 Promise \u9700\u8981 resolve \u4e00\u4e2a <code class=\"language-javascript\">default</code> export \u7684 React \u7ec4\u4ef6\u3002</p>\n<p>\u7136\u540e\u5e94\u5728 <code class=\"language-javascript\">Suspense</code> \u7ec4\u4ef6\u4e2d\u6e32\u67d3 lazy \u7ec4\u4ef6\uff0c\u5982\u6b64\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5728\u7b49\u5f85\u52a0\u8f7d lazy \u7ec4\u4ef6\u65f6\u505a\u4f18\u96c5\u964d\u7ea7\uff08\u5982 loading \u6307\u793a\u5668\u7b49\uff09\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Suspense <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> OtherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./OtherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OtherComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">fallback</code> \u5c5e\u6027\u63a5\u53d7\u4efb\u4f55\u5728\u7ec4\u4ef6\u52a0\u8f7d\u8fc7\u7a0b\u4e2d\u4f60\u60f3\u5c55\u793a\u7684 React \u5143\u7d20\u3002\u4f60\u53ef\u4ee5\u5c06 <code class=\"language-javascript\">Suspense</code> \u7ec4\u4ef6\u7f6e\u4e8e\u61d2\u52a0\u8f7d\u7ec4\u4ef6\u4e4b\u4e0a\u7684\u4efb\u4f55\u4f4d\u7f6e\u3002\u4f60\u751a\u81f3\u53ef\u4ee5\u7528\u4e00\u4e2a <code class=\"language-javascript\">Suspense</code> \u7ec4\u4ef6\u5305\u88f9\u591a\u4e2a\u61d2\u52a0\u8f7d\u7ec4\u4ef6\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Suspense <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> OtherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./OtherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> AnotherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./AnotherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OtherComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AnotherComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"avoiding-fallbacks\"><a class=\"anchor\" href=\"/react/code-splitting#avoiding-fallbacks\"></a>\u907f\u514d\u515c\u5e95 </h3>\n<p>\u4efb\u4f55\u7ec4\u4ef6\u90fd\u53ef\u80fd\u56e0\u6e32\u67d3\u800c\u6682\u505c\uff0c\u751a\u81f3\u662f\u5df2\u7ecf\u5c55\u793a\u7ed9\u7528\u6237\u7684\u7ec4\u4ef6\u3002\u4e3a\u4e86\u4f7f\u5c4f\u5e55\u5185\u5bb9\u59cb\u7ec8\u4e00\u81f4\uff0c\u5982\u679c\u4e00\u4e2a\u5df2\u7ecf\u663e\u793a\u7684\u7ec4\u4ef6\u6682\u505c\uff0cReact \u5fc5\u987b\u9690\u85cf\u5b83\u7684\u6811\uff0c\u76f4\u5230\u6700\u8fd1\u7684 <code class=\"language-javascript\">&lt;Suspense&gt;</code> \u8fb9\u754c\u3002\u7136\u800c\uff0c\u4ece\u7528\u6237\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8fd9\u53ef\u80fd\u4f1a\u4f7f\u4eba\u5f88\u56f0\u60d1\u3002</p>\n<p>\u53c2\u8003\u8fd9\u4e2a\u6807\u7b7e\u5207\u6362\u7684\u793a\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Suspense <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Tabs <span class=\"token keyword\">from</span> <span class=\"token string\">'./Tabs'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Glimmer <span class=\"token keyword\">from</span> <span class=\"token string\">'./Glimmer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Comments <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Comments'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Photos <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Photos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">,</span> setTab<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'photos'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleTabSelect</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTab</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tabs</span></span> <span class=\"token attr-name\">onTabSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleTabSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Glimmer</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>tab <span class=\"token operator\">===</span> <span class=\"token string\">'photos'</span> <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Photos</span></span> <span class=\"token punctuation\">/&gt;</span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Comments</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u5982\u679c\u6807\u7b7e\u4ece <code class=\"language-javascript\">'photos'</code> \u5207\u6362\u4e3a <code class=\"language-javascript\">'comments'</code>\uff0c\u4f46 <code class=\"language-javascript\">Comments</code> \u4f1a\u6682\u505c\uff0c\u7528\u6237\u4f1a\u770b\u5230\u5c4f\u5e55\u95ea\u70c1\u3002\u8fd9\u7b26\u5408\u5e38\u7406\uff0c\u56e0\u4e3a\u7528\u6237\u4e0d\u60f3\u770b\u5230 <code class=\"language-javascript\">'photos'</code>\uff0c\u800c <code class=\"language-javascript\">Comments</code> \u7ec4\u4ef6\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\u6e32\u67d3\u5176\u5185\u5bb9\uff0c\u800c React \u4e3a\u4e86\u4fdd\u8bc1\u7528\u6237\u4f53\u9a8c\u7684\u4e00\u81f4\u6027\uff0c\u53ea\u80fd\u663e\u793a\u4e0a\u9762\u7684 <code class=\"language-javascript\">Glimmer</code>\uff0c\u522b\u65e0\u9009\u62e9\u3002</p>\n<p>\u7136\u800c\uff0c\u6709\u65f6\u8fd9\u79cd\u7528\u6237\u4f53\u9a8c\u5e76\u4e0d\u53ef\u53d6\u3002\u7279\u522b\u662f\u5728\u51c6\u5907\u65b0 UI \u65f6\uff0c\u5c55\u793a \u201c\u65e7\u201d \u7684 UI \u4f1a\u4f53\u9a8c\u66f4\u597d\u3002\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u65b0\u7684 <a href=\"/react/react-api#starttransition\"><code class=\"language-javascript\">startTransition</code></a> API \u6765\u8ba9 React \u5b9e\u73b0\u8fd9\u4e00\u70b9\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">handleTabSelect</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTab</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6b64\u5904\u4ee3\u7801\u4f1a\u544a\u77e5 React\uff0c\u5c06\u6807\u7b7e\u5207\u6362\u4e3a <code class=\"language-javascript\">'comments'</code> \u4e0d\u4f1a\u6807\u8bb0\u4e3a\u7d27\u6025\u66f4\u65b0\uff0c\u800c\u662f\u6807\u8bb0\u4e3a\u9700\u8981\u4e00\u4e9b\u51c6\u5907\u65f6\u95f4\u7684 <a href=\"/react/react-api#transitions\">transition</a>\u3002\u7136\u540e React \u4f1a\u4fdd\u7559\u65e7\u7684 UI \u5e76\u8fdb\u884c\u4ea4\u4e92\uff0c\u5f53\u5b83\u51c6\u5907\u597d\u65f6\uff0c\u4f1a\u5207\u6362\u4e3a <code class=\"language-javascript\">&lt;Comments /&gt;</code>\uff0c\u5177\u4f53\u8bf7\u53c2\u9605 <a href=\"/react/react-api#transitions\">Transitions</a> \u4ee5\u4e86\u89e3\u66f4\u591a\u76f8\u5173\u4fe1\u606f\u3002</p>\n<h3 id=\"error-boundaries\"><a class=\"anchor\" href=\"/react/code-splitting#error-boundaries\"></a>\u5f02\u5e38\u6355\u83b7\u8fb9\u754c\uff08Error boundaries\uff09</h3>\n<p>\u5982\u679c\u6a21\u5757\u52a0\u8f7d\u5931\u8d25\uff08\u5982\u7f51\u7edc\u95ee\u9898\uff09\uff0c\u5b83\u4f1a\u89e6\u53d1\u4e00\u4e2a\u9519\u8bef\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7<a href=\"/react/error-boundaries\">\u5f02\u5e38\u6355\u83b7\u8fb9\u754c\uff08Error boundaries\uff09</a>\u6280\u672f\u6765\u5904\u7406\u8fd9\u4e9b\u60c5\u51b5\uff0c\u4ee5\u663e\u793a\u826f\u597d\u7684\u7528\u6237\u4f53\u9a8c\u5e76\u7ba1\u7406\u6062\u590d\u4e8b\u5b9c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Suspense <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MyErrorBoundary <span class=\"token keyword\">from</span> <span class=\"token string\">'./MyErrorBoundary'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> OtherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./OtherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> AnotherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./AnotherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyErrorBoundary</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OtherComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AnotherComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyErrorBoundary</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"route-based-code-splitting\"><a class=\"anchor\" href=\"/react/code-splitting#route-based-code-splitting\"></a>\u57fa\u4e8e\u8def\u7531\u7684\u4ee3\u7801\u5206\u5272 </h2>\n<p>\u51b3\u5b9a\u5728\u54ea\u5f15\u5165\u4ee3\u7801\u5206\u5272\u9700\u8981\u4e00\u4e9b\u6280\u5de7\u3002\u4f60\u9700\u8981\u786e\u4fdd\u9009\u62e9\u7684\u4f4d\u7f6e\u80fd\u591f\u5747\u5300\u5730\u5206\u5272\u4ee3\u7801\u5305\u800c\u4e0d\u4f1a\u5f71\u54cd\u7528\u6237\u4f53\u9a8c\u3002</p>\n<p>\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u662f\u4ece\u8def\u7531\u5f00\u59cb\u3002\u5927\u591a\u6570\u7f51\u7edc\u7528\u6237\u4e60\u60ef\u4e8e\u9875\u9762\u4e4b\u95f4\u80fd\u6709\u4e2a\u52a0\u8f7d\u5207\u6362\u8fc7\u7a0b\u3002\u4f60\u4e5f\u53ef\u4ee5\u9009\u62e9\u91cd\u65b0\u6e32\u67d3\u6574\u4e2a\u9875\u9762\uff0c\u8fd9\u6837\u60a8\u7684\u7528\u6237\u5c31\u4e0d\u5fc5\u5728\u6e32\u67d3\u7684\u540c\u65f6\u518d\u548c\u9875\u9762\u4e0a\u7684\u5176\u4ed6\u5143\u7d20\u8fdb\u884c\u4ea4\u4e92\u3002</p>\n<p>\u8fd9\u91cc\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5c55\u793a\u5982\u4f55\u5728\u4f60\u7684\u5e94\u7528\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">React.lazy</code> \u548c <a class=\"external-link\" href=\"https://reactrouter.com/\">React Router</a> \u8fd9\u7c7b\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u6765\u914d\u7f6e\u57fa\u4e8e\u8def\u7531\u7684\u4ee3\u7801\u5206\u5272\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Suspense<span class=\"token punctuation\">,</span> lazy <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span> Routes<span class=\"token punctuation\">,</span> Route <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Home <span class=\"token operator\">=</span> <span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./routes/Home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> About <span class=\"token operator\">=</span> <span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./routes/About'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">About</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Routes</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"named-exports\"><a class=\"anchor\" href=\"/react/code-splitting#named-exports\"></a>\u547d\u540d\u5bfc\u51fa\uff08Named Exports\uff09</h2>\n<p><code class=\"language-javascript\">React.lazy</code> \u76ee\u524d\u53ea\u652f\u6301\u9ed8\u8ba4\u5bfc\u51fa\uff08default exports\uff09\u3002\u5982\u679c\u4f60\u60f3\u88ab\u5f15\u5165\u7684\u6a21\u5757\u4f7f\u7528\u547d\u540d\u5bfc\u51fa\uff08named exports\uff09\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4e2d\u95f4\u6a21\u5757\uff0c\u6765\u91cd\u65b0\u5bfc\u51fa\u4e3a\u9ed8\u8ba4\u6a21\u5757\u3002\u8fd9\u80fd\u4fdd\u8bc1 tree shaking \u4e0d\u4f1a\u51fa\u9519\uff0c\u5e76\u4e14\u4e0d\u5fc5\u5f15\u5165\u4e0d\u9700\u8981\u7684\u7ec4\u4ef6\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// ManyComponents.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> <span class=\"token comment\">/* ... */</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> MyUnusedComponent <span class=\"token operator\">=</span> <span class=\"token comment\">/* ... */</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// MyComponent.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> MyComponent <span class=\"token keyword\">as</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./ManyComponents.js\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// MyApp.js</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> lazy <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> <span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./MyComponent.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/code-splitting.md\">Edit this page</a></p></div></article>", "path": "/react/code-splitting", "nav": ["/react/accessibility", "/react/context"]}, {"key": "Context", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>Context \u63d0\u4f9b\u4e86\u4e00\u4e2a\u65e0\u9700\u4e3a\u6bcf\u5c42\u7ec4\u4ef6\u624b\u52a8\u6dfb\u52a0 props\uff0c\u5c31\u80fd\u5728\u7ec4\u4ef6\u6811\u95f4\u8fdb\u884c\u6570\u636e\u4f20\u9012\u7684\u65b9\u6cd5\u3002</p>\n<p>\u5728\u4e00\u4e2a\u5178\u578b\u7684 React \u5e94\u7528\u4e2d\uff0c\u6570\u636e\u662f\u901a\u8fc7 props \u5c5e\u6027\u81ea\u4e0a\u800c\u4e0b\uff08\u7531\u7236\u53ca\u5b50\uff09\u8fdb\u884c\u4f20\u9012\u7684\uff0c\u4f46\u6b64\u79cd\u7528\u6cd5\u5bf9\u4e8e\u67d0\u4e9b\u7c7b\u578b\u7684\u5c5e\u6027\u800c\u8a00\u662f\u6781\u5176\u7e41\u7410\u7684\uff08\u4f8b\u5982\uff1a\u5730\u533a\u504f\u597d\uff0cUI \u4e3b\u9898\uff09\uff0c\u8fd9\u4e9b\u5c5e\u6027\u662f\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8bb8\u591a\u7ec4\u4ef6\u90fd\u9700\u8981\u7684\u3002Context \u63d0\u4f9b\u4e86\u4e00\u79cd\u5728\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u6b64\u7c7b\u503c\u7684\u65b9\u5f0f\uff0c\u800c\u4e0d\u5fc5\u663e\u5f0f\u5730\u901a\u8fc7\u7ec4\u4ef6\u6811\u7684\u9010\u5c42\u4f20\u9012 props\u3002</p>\n<ul>\n<li><a href=\"/react/context#when-to-use-context\">\u4f55\u65f6\u4f7f\u7528 Context</a></li>\n<li><a href=\"/react/context#before-you-use-context\">\u4f7f\u7528 Context \u4e4b\u524d\u7684\u8003\u8651</a></li>\n<li>\n<p><a href=\"/react/context#api\">API</a></p>\n<ul>\n<li><a href=\"/react/context#reactcreatecontext\">React.createContext</a></li>\n<li><a href=\"/react/context#contextprovider\">Context.Provider</a></li>\n<li><a href=\"/react/context#classcontexttype\">Class.contextType</a></li>\n<li><a href=\"/react/context#contextconsumer\">Context.Consumer</a></li>\n<li><a href=\"/react/context#contextdisplayname\">Context.displayName</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/react/context#examples\">\u793a\u4f8b</a></p>\n<ul>\n<li><a href=\"/react/context#dynamic-context\">\u52a8\u6001 Context</a></li>\n<li><a href=\"/react/context#updating-context-from-a-nested-component\">\u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context</a></li>\n<li><a href=\"/react/context#consuming-multiple-contexts\">\u4f7f\u7528\u591a\u4e2a Context</a></li>\n</ul>\n</li>\n<li><a href=\"/react/context#caveats\">\u6ce8\u610f\u4e8b\u9879</a></li>\n<li><a href=\"/react/context#legacy-api\">\u5e9f\u5f03\u7684 API</a></li>\n</ul>\n<h2 id=\"when-to-use-context\"><a class=\"anchor\" href=\"/react/context#when-to-use-context\"></a>\u4f55\u65f6\u4f7f\u7528 Context </h2>\n<p>Context \u8bbe\u8ba1\u76ee\u7684\u662f\u4e3a\u4e86\u5171\u4eab\u90a3\u4e9b\u5bf9\u4e8e\u4e00\u4e2a\u7ec4\u4ef6\u6811\u800c\u8a00\u662f\u201c\u5168\u5c40\u201d\u7684\u6570\u636e\uff0c\u4f8b\u5982\u5f53\u524d\u8ba4\u8bc1\u7684\u7528\u6237\u3001\u4e3b\u9898\u6216\u9996\u9009\u8bed\u8a00\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a \u201ctheme\u201d \u5c5e\u6027\u624b\u52a8\u8c03\u6574\u4e00\u4e2a\u6309\u94ae\u7ec4\u4ef6\u7684\u6837\u5f0f\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toolbar</span></span> <span class=\"token attr-name\">theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dark<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Toolbar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Toolbar \u7ec4\u4ef6\u63a5\u53d7\u4e00\u4e2a\u989d\u5916\u7684\u201ctheme\u201d\u5c5e\u6027\uff0c\u7136\u540e\u4f20\u9012\u7ed9 ThemedButton \u7ec4\u4ef6\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u5982\u679c\u5e94\u7528\u4e2d\u6bcf\u4e00\u4e2a\u5355\u72ec\u7684\u6309\u94ae\u90fd\u9700\u8981\u77e5\u9053 theme \u7684\u503c\uff0c\u8fd9\u4f1a\u662f\u4ef6\u5f88\u9ebb\u70e6\u7684\u4e8b\uff0c</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u56e0\u4e3a\u5fc5\u987b\u5c06\u8fd9\u4e2a\u503c\u5c42\u5c42\u4f20\u9012\u6240\u6709\u7ec4\u4ef6\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemedButton</span></span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemedButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u4f7f\u7528 context, \u6211\u4eec\u53ef\u4ee5\u907f\u514d\u901a\u8fc7\u4e2d\u95f4\u5143\u7d20\u4f20\u9012 props\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// Context \u53ef\u4ee5\u8ba9\u6211\u4eec\u65e0\u987b\u660e\u786e\u5730\u4f20\u904d\u6bcf\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5c31\u80fd\u5c06\u503c\u6df1\u5165\u4f20\u9012\u8fdb\u7ec4\u4ef6\u6811\u3002</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// \u4e3a\u5f53\u524d\u7684 theme \u521b\u5efa\u4e00\u4e2a context\uff08\u201clight\u201d\u4e3a\u9ed8\u8ba4\u503c\uff09\u3002</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u4f7f\u7528\u4e00\u4e2a Provider \u6765\u5c06\u5f53\u524d\u7684 theme \u4f20\u9012\u7ed9\u4ee5\u4e0b\u7684\u7ec4\u4ef6\u6811\u3002</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u65e0\u8bba\u591a\u6df1\uff0c\u4efb\u4f55\u7ec4\u4ef6\u90fd\u80fd\u8bfb\u53d6\u8fd9\u4e2a\u503c\u3002</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5c06 \u201cdark\u201d \u4f5c\u4e3a\u5f53\u524d\u7684\u503c\u4f20\u9012\u4e0b\u53bb\u3002</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dark<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toolbar</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// \u4e2d\u95f4\u7684\u7ec4\u4ef6\u518d\u4e5f\u4e0d\u5fc5\u6307\u660e\u5f80\u4e0b\u4f20\u9012 theme \u4e86\u3002</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">Toolbar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemedButton</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemedButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6307\u5b9a contextType \u8bfb\u53d6\u5f53\u524d\u7684 theme context\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// React \u4f1a\u5f80\u4e0a\u627e\u5230\u6700\u8fd1\u7684 theme Provider\uff0c\u7136\u540e\u4f7f\u7528\u5b83\u7684\u503c\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u5f53\u524d\u7684 theme \u503c\u4e3a \u201cdark\u201d\u3002</span></span>  <span class=\"token keyword\">static</span> contextType <span class=\"token operator\">=</span> ThemeContext<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<h2 id=\"before-you-use-context\"><a class=\"anchor\" href=\"/react/context#before-you-use-context\"></a>\u4f7f\u7528 Context \u4e4b\u524d\u7684\u8003\u8651 </h2>\n<p>Context \u4e3b\u8981\u5e94\u7528\u573a\u666f\u5728\u4e8e<em>\u5f88\u591a</em>\u4e0d\u540c\u5c42\u7ea7\u7684\u7ec4\u4ef6\u9700\u8981\u8bbf\u95ee\u540c\u6837\u4e00\u4e9b\u7684\u6570\u636e\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4f7f\u5f97\u7ec4\u4ef6\u7684\u590d\u7528\u6027\u53d8\u5dee\u3002</p>\n<p><strong>\u5982\u679c\u4f60\u53ea\u662f\u60f3\u907f\u514d\u5c42\u5c42\u4f20\u9012\u4e00\u4e9b\u5c5e\u6027\uff0c<a href=\"/react/composition-vs-inheritance\">\u7ec4\u4ef6\u7ec4\u5408\uff08component composition\uff09</a>\u6709\u65f6\u5019\u662f\u4e00\u4e2a\u6bd4 context \u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002</strong></p>\n<p>\u6bd4\u5982\uff0c\u8003\u8651\u8fd9\u6837\u4e00\u4e2a <code class=\"language-javascript\">Page</code> \u7ec4\u4ef6\uff0c\u5b83\u5c42\u5c42\u5411\u4e0b\u4f20\u9012 <code class=\"language-javascript\">user</code> \u548c <code class=\"language-javascript\">avatarSize</code> \u5c5e\u6027\uff0c\u4ece\u800c\u8ba9\u6df1\u5ea6\u5d4c\u5957\u7684 <code class=\"language-javascript\">Link</code> \u548c <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\u53ef\u4ee5\u8bfb\u53d6\u5230\u8fd9\u4e9b\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">avatarSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token comment\">// ... \u6e32\u67d3\u51fa ...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageLayout</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">avatarSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token comment\">// ... \u6e32\u67d3\u51fa ...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NavigationBar</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">avatarSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token comment\">// ... \u6e32\u67d3\u51fa ...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>permalink<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Avatar</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">size</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5982\u679c\u5728\u6700\u540e\u53ea\u6709 <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\u771f\u7684\u9700\u8981 <code class=\"language-javascript\">user</code> \u548c <code class=\"language-javascript\">avatarSize</code>\uff0c\u90a3\u4e48\u5c42\u5c42\u4f20\u9012\u8fd9\u4e24\u4e2a props \u5c31\u663e\u5f97\u975e\u5e38\u5197\u4f59\u3002\u800c\u4e14\u4e00\u65e6 <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\u9700\u8981\u66f4\u591a\u4ece\u6765\u81ea\u9876\u5c42\u7ec4\u4ef6\u7684 props\uff0c\u4f60\u8fd8\u5f97\u5728\u4e2d\u95f4\u5c42\u7ea7\u4e00\u4e2a\u4e00\u4e2a\u52a0\u4e0a\u53bb\uff0c\u8fd9\u5c06\u4f1a\u53d8\u5f97\u975e\u5e38\u9ebb\u70e6\u3002</p>\n<p>\u4e00\u79cd <strong>\u65e0\u9700 context</strong> \u7684\u89e3\u51b3\u65b9\u6848\u662f<a href=\"/react/composition-vs-inheritance#containment\">\u5c06 <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\u81ea\u8eab\u4f20\u9012\u4e0b\u53bb</a>\uff0c\u56e0\u4e3a\u4e2d\u95f4\u7ec4\u4ef6\u65e0\u9700\u77e5\u9053 <code class=\"language-javascript\">user</code> \u6216\u8005 <code class=\"language-javascript\">avatarSize</code> \u7b49 props\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Page</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> userLink <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>permalink<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Avatar</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">size</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageLayout</span></span> <span class=\"token attr-name\">userLink</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>userLink<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u73b0\u5728\uff0c\u6211\u4eec\u6709\u8fd9\u6837\u7684\u7ec4\u4ef6\uff1a</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">avatarSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token comment\">// ... \u6e32\u67d3\u51fa ...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageLayout</span></span> <span class=\"token attr-name\">userLink</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token comment\">// ... \u6e32\u67d3\u51fa ...</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NavigationBar</span></span> <span class=\"token attr-name\">userLink</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token comment\">// ... \u6e32\u67d3\u51fa ...</span>\n<span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>userLink<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u79cd\u53d8\u5316\u4e0b\uff0c\u53ea\u6709\u6700\u9876\u90e8\u7684 Page \u7ec4\u4ef6\u9700\u8981\u77e5\u9053 <code class=\"language-javascript\">Link</code> \u548c <code class=\"language-javascript\">Avatar</code> \u7ec4\u4ef6\u662f\u5982\u4f55\u4f7f\u7528 <code class=\"language-javascript\">user</code> \u548c <code class=\"language-javascript\">avatarSize</code> \u7684\u3002</p>\n<p>\u8fd9\u79cd\u5bf9\u7ec4\u4ef6\u7684<em>\u63a7\u5236\u53cd\u8f6c</em>\u51cf\u5c11\u4e86\u5728\u4f60\u7684\u5e94\u7528\u4e2d\u8981\u4f20\u9012\u7684 props \u6570\u91cf\uff0c\u8fd9\u5728\u5f88\u591a\u573a\u666f\u4e0b\u4f1a\u4f7f\u5f97\u4f60\u7684\u4ee3\u7801\u66f4\u52a0\u5e72\u51c0\uff0c\u4f7f\u4f60\u5bf9\u6839\u7ec4\u4ef6\u6709\u66f4\u591a\u7684\u628a\u63a7\u3002\u4f46\u662f\uff0c\u8fd9\u5e76\u4e0d\u9002\u7528\u4e8e\u6bcf\u4e00\u4e2a\u573a\u666f\uff1a\u8fd9\u79cd\u5c06\u903b\u8f91\u63d0\u5347\u5230\u7ec4\u4ef6\u6811\u7684\u66f4\u9ad8\u5c42\u6b21\u6765\u5904\u7406\uff0c\u4f1a\u4f7f\u5f97\u8fd9\u4e9b\u9ad8\u5c42\u7ec4\u4ef6\u53d8\u5f97\u66f4\u590d\u6742\uff0c\u5e76\u4e14\u4f1a\u5f3a\u884c\u5c06\u4f4e\u5c42\u7ec4\u4ef6\u9002\u5e94\u8fd9\u6837\u7684\u5f62\u5f0f\uff0c\u8fd9\u53ef\u80fd\u4e0d\u4f1a\u662f\u4f60\u60f3\u8981\u7684\u3002</p>\n<p>\u800c\u4e14\u4f60\u7684\u7ec4\u4ef6\u5e76\u4e0d\u9650\u5236\u4e8e\u63a5\u6536\u5355\u4e2a\u5b50\u7ec4\u4ef6\u3002\u4f60\u53ef\u80fd\u4f1a\u4f20\u9012\u591a\u4e2a\u5b50\u7ec4\u4ef6\uff0c\u751a\u81f3\u4f1a\u4e3a\u8fd9\u4e9b\u5b50\u7ec4\u4ef6\uff08children\uff09\u5c01\u88c5\u591a\u4e2a\u5355\u72ec\u7684\u201c\u63a5\u53e3\uff08slots\uff09\u201d\uff0c<a href=\"/react/composition-vs-inheritance#containment\">\u6b63\u5982\u8fd9\u91cc\u7684\u6587\u6863\u6240\u5217\u4e3e\u7684</a></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Page</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Feed</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> topBar <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NavigationBar</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>permalink<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Avatar</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">size</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>avatarSize<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">NavigationBar</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PageLayout</span></span>\n      <span class=\"token attr-name\">topBar</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>topBar<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">content</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>content<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u79cd\u6a21\u5f0f\u8db3\u591f\u8986\u76d6\u5f88\u591a\u573a\u666f\u4e86\uff0c\u5728\u8fd9\u4e9b\u573a\u666f\u4e0b\u4f60\u9700\u8981\u5c06\u5b50\u7ec4\u4ef6\u548c\u76f4\u63a5\u5173\u8054\u7684\u7236\u7ec4\u4ef6\u89e3\u8026\u3002\u5982\u679c\u5b50\u7ec4\u4ef6\u9700\u8981\u5728\u6e32\u67d3\u524d\u548c\u7236\u7ec4\u4ef6\u8fdb\u884c\u4e00\u4e9b\u4ea4\u6d41\uff0c\u4f60\u53ef\u4ee5\u8fdb\u4e00\u6b65\u4f7f\u7528 <a href=\"/react/render-props\">render props</a>\u3002</p>\n<p>\u4f46\u662f\uff0c\u6709\u7684\u65f6\u5019\u5728\u7ec4\u4ef6\u6811\u4e2d\u5f88\u591a\u4e0d\u540c\u5c42\u7ea7\u7684\u7ec4\u4ef6\u9700\u8981\u8bbf\u95ee\u540c\u6837\u7684\u4e00\u6279\u6570\u636e\u3002Context \u80fd\u8ba9\u4f60\u5c06\u8fd9\u4e9b\u6570\u636e\u5411\u7ec4\u4ef6\u6811\u4e0b\u6240\u6709\u7684\u7ec4\u4ef6\u8fdb\u884c\u201c\u5e7f\u64ad\u201d\uff0c\u6240\u6709\u7684\u7ec4\u4ef6\u90fd\u80fd\u8bbf\u95ee\u5230\u8fd9\u4e9b\u6570\u636e\uff0c\u4e5f\u80fd\u8bbf\u95ee\u5230\u540e\u7eed\u7684\u6570\u636e\u66f4\u65b0\u3002\u4f7f\u7528 context \u7684\u901a\u7528\u7684\u573a\u666f\u5305\u62ec\u7ba1\u7406\u5f53\u524d\u7684 locale\uff0ctheme\uff0c\u6216\u8005\u4e00\u4e9b\u7f13\u5b58\u6570\u636e\uff0c\u8fd9\u6bd4\u66ff\u4ee3\u65b9\u6848\u8981\u7b80\u5355\u7684\u591a\u3002</p>\n<h2 id=\"api\"><a class=\"anchor\" href=\"/react/context#api\"></a>API </h2>\n<h3 id=\"reactcreatecontext\"><a class=\"anchor\" href=\"/react/context#reactcreatecontext\"></a><code class=\"language-javascript\">React.createContext</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> MyContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span>defaultValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u521b\u5efa\u4e00\u4e2a Context \u5bf9\u8c61\u3002\u5f53 React \u6e32\u67d3\u4e00\u4e2a\u8ba2\u9605\u4e86\u8fd9\u4e2a Context \u5bf9\u8c61\u7684\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u4f1a\u4ece\u7ec4\u4ef6\u6811\u4e2d\u79bb\u81ea\u8eab\u6700\u8fd1\u7684\u90a3\u4e2a\u5339\u914d\u7684 <code class=\"language-javascript\">Provider</code> \u4e2d\u8bfb\u53d6\u5230\u5f53\u524d\u7684 context \u503c\u3002</p>\n<p><strong>\u53ea\u6709</strong>\u5f53\u7ec4\u4ef6\u6240\u5904\u7684\u6811\u4e2d\u6ca1\u6709\u5339\u914d\u5230 Provider \u65f6\uff0c\u5176 <code class=\"language-javascript\">defaultValue</code> \u53c2\u6570\u624d\u4f1a\u751f\u6548\u3002\u6b64\u9ed8\u8ba4\u503c\u6709\u52a9\u4e8e\u5728\u4e0d\u4f7f\u7528 Provider \u5305\u88c5\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u6d4b\u8bd5\u3002\u6ce8\u610f\uff1a\u5c06 <code class=\"language-javascript\">undefined</code> \u4f20\u9012\u7ed9 Provider \u7684 value \u65f6\uff0c\u6d88\u8d39\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">defaultValue</code> \u4e0d\u4f1a\u751f\u6548\u3002</p>\n<h3 id=\"contextprovider\"><a class=\"anchor\" href=\"/react/context#contextprovider\"></a><code class=\"language-javascript\">Context.Provider</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* \u67d0\u4e2a\u503c */</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u6bcf\u4e2a Context \u5bf9\u8c61\u90fd\u4f1a\u8fd4\u56de\u4e00\u4e2a Provider React \u7ec4\u4ef6\uff0c\u5b83\u5141\u8bb8\u6d88\u8d39\u7ec4\u4ef6\u8ba2\u9605 context \u7684\u53d8\u5316\u3002</p>\n<p>Provider \u63a5\u6536\u4e00\u4e2a <code class=\"language-javascript\">value</code> \u5c5e\u6027\uff0c\u4f20\u9012\u7ed9\u6d88\u8d39\u7ec4\u4ef6\u3002\u4e00\u4e2a Provider \u53ef\u4ee5\u548c\u591a\u4e2a\u6d88\u8d39\u7ec4\u4ef6\u6709\u5bf9\u5e94\u5173\u7cfb\u3002\u591a\u4e2a Provider \u4e5f\u53ef\u4ee5\u5d4c\u5957\u4f7f\u7528\uff0c\u91cc\u5c42\u7684\u4f1a\u8986\u76d6\u5916\u5c42\u7684\u6570\u636e\u3002</p>\n<p>\u5f53 Provider \u7684 <code class=\"language-javascript\">value</code> \u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5b83\u5185\u90e8\u7684\u6240\u6709\u6d88\u8d39\u7ec4\u4ef6\u90fd\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\u4ece Provider \u5230\u5176\u5185\u90e8 consumer \u7ec4\u4ef6\uff08\u5305\u62ec <a href=\"/react/context#classcontexttype\">.contextType</a> \u548c <a href=\"/react/hooks-reference#usecontext\">useContext</a>\uff09\u7684\u4f20\u64ad\u4e0d\u53d7\u5236\u4e8e <code class=\"language-javascript\">shouldComponentUpdate</code> \u51fd\u6570\uff0c\u56e0\u6b64\u5f53 consumer \u7ec4\u4ef6\u5728\u5176\u7956\u5148\u7ec4\u4ef6\u8df3\u8fc7\u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\u4e5f\u80fd\u66f4\u65b0\u3002</p>\n<p>\u901a\u8fc7\u65b0\u65e7\u503c\u68c0\u6d4b\u6765\u786e\u5b9a\u53d8\u5316\uff0c\u4f7f\u7528\u4e86\u4e0e <a href=\"//developer.mozilla.org/en-US/react/Web/JavaScript/Reference/Global_Objects/Object/is#Description\"><code class=\"language-javascript\">Object.is</code></a> \u76f8\u540c\u7684\u7b97\u6cd5\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5f53\u4f20\u9012\u5bf9\u8c61\u7ed9 <code class=\"language-javascript\">value</code> \u65f6\uff0c\u68c0\u6d4b\u53d8\u5316\u7684\u65b9\u5f0f\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u95ee\u9898\uff1a\u8be6\u89c1<a href=\"/react/context#caveats\">\u6ce8\u610f\u4e8b\u9879</a>\u3002</p>\n</div>\n<h3 id=\"classcontexttype\"><a class=\"anchor\" href=\"/react/context#classcontexttype\"></a><code class=\"language-javascript\">Class.contextType</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* \u5728\u7ec4\u4ef6\u6302\u8f7d\u5b8c\u6210\u540e\uff0c\u4f7f\u7528 MyContext \u7ec4\u4ef6\u7684\u503c\u6765\u6267\u884c\u4e00\u4e9b\u6709\u526f\u4f5c\u7528\u7684\u64cd\u4f5c */</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* ... */</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* ... */</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* \u57fa\u4e8e MyContext \u7ec4\u4ef6\u7684\u503c\u8fdb\u884c\u6e32\u67d3 */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nMyClass<span class=\"token punctuation\">.</span>contextType <span class=\"token operator\">=</span> MyContext<span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6302\u8f7d\u5728 class \u4e0a\u7684 <code class=\"language-javascript\">contextType</code> \u5c5e\u6027\u53ef\u4ee5\u8d4b\u503c\u4e3a\u7531 <a href=\"/react/context#reactcreatecontext\"><code class=\"language-javascript\">React.createContext()</code></a> \u521b\u5efa\u7684 Context \u5bf9\u8c61\u3002\u6b64\u5c5e\u6027\u53ef\u4ee5\u8ba9\u4f60\u4f7f\u7528 <code class=\"language-javascript\">this.context</code> \u6765\u83b7\u53d6\u6700\u8fd1 Context \u4e0a\u7684\u503c\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u751f\u547d\u5468\u671f\u4e2d\u8bbf\u95ee\u5230\u5b83\uff0c\u5305\u62ec render \u51fd\u6570\u4e2d\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4f60\u53ea\u901a\u8fc7\u8be5 API \u8ba2\u9605\u5355\u4e00 context\u3002\u5982\u679c\u4f60\u60f3\u8ba2\u9605\u591a\u4e2a\uff0c\u9605\u8bfb<a href=\"/react/context#consuming-multiple-contexts\">\u4f7f\u7528\u591a\u4e2a Context</a> \u7ae0\u8282</p>\n<p>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528\u5b9e\u9a8c\u6027\u7684 <a class=\"external-link\" href=\"https://babeljs.io/docs/plugins/transform-class-properties/\">public class fields \u8bed\u6cd5</a>\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">static</code> \u8fd9\u4e2a\u7c7b\u5c5e\u6027\u6765\u521d\u59cb\u5316\u4f60\u7684 <code class=\"language-javascript\">contextType</code>\u3002</p>\n</div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClass</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> contextType <span class=\"token operator\">=</span> MyContext<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* \u57fa\u4e8e\u8fd9\u4e2a\u503c\u8fdb\u884c\u6e32\u67d3\u5de5\u4f5c */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"contextconsumer\"><a class=\"anchor\" href=\"/react/context#contextconsumer\"></a><code class=\"language-javascript\">Context.Consumer</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=&gt;</span> <span class=\"token comment\">/* \u57fa\u4e8e context \u503c\u8fdb\u884c\u6e32\u67d3*/</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4e00\u4e2a React \u7ec4\u4ef6\u53ef\u4ee5\u8ba2\u9605 context \u7684\u53d8\u66f4\uff0c\u6b64\u7ec4\u4ef6\u53ef\u4ee5\u8ba9\u4f60\u5728<a href=\"/react/components-and-props#function-and-class-components\">\u51fd\u6570\u5f0f\u7ec4\u4ef6</a>\u4e2d\u53ef\u4ee5\u8ba2\u9605 context\u3002</p>\n<p>\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u4e00\u4e2a<a href=\"/react/render-props#using-props-other-than-render\">\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20\uff08function as a child\uff09</a>\u3002\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u5f53\u524d\u7684 context \u503c\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a React \u8282\u70b9\u3002\u4f20\u9012\u7ed9\u51fd\u6570\u7684 <code class=\"language-javascript\">value</code> \u503c\u7b49\u4ef7\u4e8e\u7ec4\u4ef6\u6811\u4e0a\u65b9\u79bb\u8fd9\u4e2a context \u6700\u8fd1\u7684 Provider \u63d0\u4f9b\u7684 <code class=\"language-javascript\">value</code> \u503c\u3002\u5982\u679c\u6ca1\u6709\u5bf9\u5e94\u7684 Provider\uff0c<code class=\"language-javascript\">value</code> \u53c2\u6570\u7b49\u540c\u4e8e\u4f20\u9012\u7ed9 <code class=\"language-javascript\">createContext()</code> \u7684 <code class=\"language-javascript\">defaultValue</code>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u60f3\u8981\u4e86\u89e3\u66f4\u591a\u5173\u4e8e \u201c\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20\uff08function as a child\uff09\u201d \u6a21\u5f0f\uff0c\u8be6\u89c1 <a href=\"/react/render-props\">render props</a>\u3002</p>\n</div>\n<h3 id=\"contextdisplayname\"><a class=\"anchor\" href=\"/react/context#contextdisplayname\"></a><code class=\"language-javascript\">Context.displayName</code> </h3>\n<p>context \u5bf9\u8c61\u63a5\u53d7\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">displayName</code> \u7684 property\uff0c\u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32\u3002React DevTools \u4f7f\u7528\u8be5\u5b57\u7b26\u4e32\u6765\u786e\u5b9a context \u8981\u663e\u793a\u7684\u5185\u5bb9\u3002</p>\n<p>\u793a\u4f8b\uff0c\u4e0b\u8ff0\u7ec4\u4ef6\u5728 DevTools \u4e2d\u5c06\u663e\u793a\u4e3a MyDisplayName\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> MyContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* some value */</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">MyContext<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token string\">'MyDisplayName'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"> // \"MyDisplayName.Provider\" \u5728 DevTools \u4e2d</span>\n<span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"> // \"MyDisplayName.Consumer\" \u5728 DevTools \u4e2d</span></code></pre></div>\n<h2 id=\"examples\"><a class=\"anchor\" href=\"/react/context#examples\"></a>\u793a\u4f8b </h2>\n<h3 id=\"dynamic-context\"><a class=\"anchor\" href=\"/react/context#dynamic-context\"></a>\u52a8\u6001 Context </h3>\n<p>\u4e00\u4e2a\u66f4\u52a0\u590d\u6742\u7684\u65b9\u6848\u662f\u5bf9\u4e0a\u9762\u7684 theme \u4f8b\u5b50\u4f7f\u7528\u52a8\u6001\u503c\uff08dynamic values\uff09\uff1a</p>\n<p><strong>theme-context.js</strong>\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> themes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">light</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">foreground</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#eeeeee'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">dark</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">foreground</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ffffff'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'#222222'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">  themes<span class=\"token punctuation\">.</span>dark <span class=\"token comment\">// \u9ed8\u8ba4\u503c</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre>\n</div></p>\n<p><strong>themed-button.js</strong>\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>ThemeContext<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./theme-context'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemedButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> props <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> theme <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>background<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">ThemedButton<span class=\"token punctuation\">.</span>contextType <span class=\"token operator\">=</span> ThemeContext<span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ThemedButton<span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p><strong>app.js</strong>\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>ThemeContext<span class=\"token punctuation\">,</span> themes<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./theme-context'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ThemedButton <span class=\"token keyword\">from</span> <span class=\"token string\">'./themed-button'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u4e00\u4e2a\u4f7f\u7528 ThemedButton \u7684\u4e2d\u95f4\u7ec4\u4ef6</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Toolbar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemedButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>changeTheme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      Change Theme</span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemedButton</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">theme</span><span class=\"token operator\">:</span> themes<span class=\"token punctuation\">.</span>light<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toggleTheme</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">theme</span><span class=\"token operator\">:</span>\n          state<span class=\"token punctuation\">.</span>theme <span class=\"token operator\">===</span> themes<span class=\"token punctuation\">.</span>dark\n            <span class=\"token operator\">?</span> themes<span class=\"token punctuation\">.</span>light\n            <span class=\"token operator\">:</span> themes<span class=\"token punctuation\">.</span>dark<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u5728 ThemeProvider \u5185\u90e8\u7684 ThemedButton \u6309\u94ae\u7ec4\u4ef6\u4f7f\u7528 state \u4e2d\u7684 theme \u503c\uff0c</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u800c\u5916\u90e8\u7684\u7ec4\u4ef6\u4f7f\u7528\u9ed8\u8ba4\u7684 theme \u503c</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Page</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toolbar</span></span> <span class=\"token attr-name\">changeTheme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toggleTheme<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Section</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemedButton</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Section</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Page</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<h3 id=\"updating-context-from-a-nested-component\"><a class=\"anchor\" href=\"/react/context#updating-context-from-a-nested-component\"></a>\u5728\u5d4c\u5957\u7ec4\u4ef6\u4e2d\u66f4\u65b0 Context </h3>\n<p>\u4ece\u4e00\u4e2a\u5728\u7ec4\u4ef6\u6811\u4e2d\u5d4c\u5957\u5f88\u6df1\u7684\u7ec4\u4ef6\u4e2d\u66f4\u65b0 context \u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 context \u4f20\u9012\u4e00\u4e2a\u51fd\u6570\uff0c\u4f7f\u5f97 consumers \u7ec4\u4ef6\u66f4\u65b0 context\uff1a</p>\n<p><strong>theme-context.js</strong>\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u786e\u4fdd\u4f20\u9012\u7ed9 createContext \u7684\u9ed8\u8ba4\u503c\u6570\u636e\u7ed3\u6784\u662f\u8c03\u7528\u7684\u7ec4\u4ef6\uff08consumers\uff09\u6240\u80fd\u5339\u914d\u7684\uff01</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token literal-property property\">theme</span><span class=\"token operator\">:</span> themes<span class=\"token punctuation\">.</span>dark<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function-variable function\">toggleTheme</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p><strong>theme-toggler-button.js</strong>\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>ThemeContext<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./theme-context'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ThemeTogglerButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Theme Toggler \u6309\u94ae\u4e0d\u4ec5\u4ec5\u53ea\u83b7\u53d6 theme \u503c\uff0c</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u5b83\u4e5f\u4ece context \u4e2d\u83b7\u53d6\u5230\u4e00\u4e2a toggleTheme \u51fd\u6570</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">,</span> toggleTheme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span></span>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n          <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>toggleTheme<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>background<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          Toggle Theme</span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ThemeTogglerButton<span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p><strong>app.js</strong>\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>ThemeContext<span class=\"token punctuation\">,</span> themes<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./theme-context'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ThemeTogglerButton <span class=\"token keyword\">from</span> <span class=\"token string\">'./theme-toggler-button'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toggleTheme</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">theme</span><span class=\"token operator\">:</span>\n          state<span class=\"token punctuation\">.</span>theme <span class=\"token operator\">===</span> themes<span class=\"token punctuation\">.</span>dark\n            <span class=\"token operator\">?</span> themes<span class=\"token punctuation\">.</span>light\n            <span class=\"token operator\">:</span> themes<span class=\"token punctuation\">.</span>dark<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// State \u4e5f\u5305\u542b\u4e86\u66f4\u65b0\u51fd\u6570\uff0c\u56e0\u6b64\u5b83\u4f1a\u88ab\u4f20\u9012\u8fdb context provider\u3002</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span>      <span class=\"token literal-property property\">theme</span><span class=\"token operator\">:</span> themes<span class=\"token punctuation\">.</span>light<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">toggleTheme</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>toggleTheme<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u6574\u4e2a state \u90fd\u88ab\u4f20\u9012\u8fdb provider</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Content</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeTogglerButton</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<h3 id=\"consuming-multiple-contexts\"><a class=\"anchor\" href=\"/react/context#consuming-multiple-contexts\"></a>\u6d88\u8d39\u591a\u4e2a Context </h3>\n<p>\u4e3a\u4e86\u786e\u4fdd context \u5feb\u901f\u8fdb\u884c\u91cd\u6e32\u67d3\uff0cReact \u9700\u8981\u4f7f\u6bcf\u4e00\u4e2a consumers \u7ec4\u4ef6\u7684 context \u5728\u7ec4\u4ef6\u6811\u4e2d\u6210\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u8282\u70b9\u3002</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Theme context\uff0c\u9ed8\u8ba4\u7684 theme \u662f \u201clight\u201d \u503c</span>\n<span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u7528\u6237\u767b\u5f55 context</span>\n<span class=\"token keyword\">const</span> UserContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Guest'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>signedInUser<span class=\"token punctuation\">,</span> theme<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u63d0\u4f9b\u521d\u59cb context \u503c\u7684 App \u7ec4\u4ef6</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>signedInUser<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">UserContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Layout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Sidebar</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Content</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u4e00\u4e2a\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u6d88\u8d39\u591a\u4e2a context</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Content</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">theme</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ProfilePage</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">UserContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Consumer</span></span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u5982\u679c\u4e24\u4e2a\u6216\u8005\u66f4\u591a\u7684 context \u503c\u7ecf\u5e38\u88ab\u4e00\u8d77\u4f7f\u7528\uff0c\u90a3\u4f60\u53ef\u80fd\u8981\u8003\u8651\u4e00\u4e0b\u53e6\u5916\u521b\u5efa\u4f60\u81ea\u5df1\u7684\u6e32\u67d3\u7ec4\u4ef6\uff0c\u4ee5\u63d0\u4f9b\u8fd9\u4e9b\u503c\u3002</p>\n<h2 id=\"caveats\"><a class=\"anchor\" href=\"/react/context#caveats\"></a>\u6ce8\u610f\u4e8b\u9879 </h2>\n<p>\u56e0\u4e3a context \u4f1a\u6839\u636e\u5f15\u7528\u6807\u8bc6\u6765\u51b3\u5b9a\u4f55\u65f6\u8fdb\u884c\u6e32\u67d3\uff08\u672c\u8d28\u4e0a\u662f <code class=\"language-javascript\">value</code> \u5c5e\u6027\u503c\u7684\u6d45\u6bd4\u8f83\uff09\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u80fd\u5b58\u5728\u4e00\u4e9b\u9677\u9631\uff0c\u5f53 provider \u7684\u7236\u7ec4\u4ef6\u8fdb\u884c\u91cd\u6e32\u67d3\u65f6\uff0c\u53ef\u80fd\u4f1a\u5728 consumers \u7ec4\u4ef6\u4e2d\u89e6\u53d1\u610f\u5916\u7684\u6e32\u67d3\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u6bcf\u4e00\u6b21 Provider \u91cd\u6e32\u67d3\u65f6\uff0c\u7531\u4e8e <code class=\"language-javascript\">value</code> \u5c5e\u6027\u603b\u662f\u88ab\u8d4b\u503c\u4e3a\u65b0\u7684\u5bf9\u8c61\uff0c\u4ee5\u4e0b\u7684\u4ee3\u7801\u4f1a\u91cd\u65b0\u6e32\u67d3\u4e0b\u9762\u6240\u6709\u7684 consumers \u7ec4\u4ef6\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">something</span><span class=\"token operator\">:</span> <span class=\"token string\">'something'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toolbar</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u4e3a\u4e86\u9632\u6b62\u8fd9\u79cd\u60c5\u51b5\uff0c\u5c06 value \u72b6\u6001\u63d0\u5347\u5230\u7236\u8282\u70b9\u7684 state \u91cc\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">something</span><span class=\"token operator\">:</span> <span class=\"token string\">'something'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toolbar</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<h2 id=\"legacy-api\"><a class=\"anchor\" href=\"/react/context#legacy-api\"></a>\u8fc7\u65f6\u7684 API </h2>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5148\u524d React \u4f7f\u7528\u5b9e\u9a8c\u6027\u7684 context API \u8fd0\u884c\uff0c\u65e7\u7684 API \u5c06\u4f1a\u5728\u6240\u6709 16.x \u7248\u672c\u4e2d\u5f97\u5230\u652f\u6301\uff0c\u4f46\u7528\u5230\u5b83\u7684\u5e94\u7528\u5e94\u8be5\u8fc1\u79fb\u5230\u65b0\u7248\u672c\u3002\u8fc7\u65f6\u7684 API \u5c06\u5728\u672a\u6765\u7684 React \u7248\u672c\u4e2d\u88ab\u79fb\u9664\u3002\u9605\u8bfb<a href=\"/react/legacy-context\">\u8fc7\u65f6\u7684 context \u6587\u6863</a>\u4e86\u89e3\u66f4\u591a\u3002</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/context.md\">Edit this page</a></p></div></article>", "path": "/react/context", "nav": ["/react/code-splitting", "/react/error-boundaries"]}, {"key": "\u9519\u8bef\u8fb9\u754c", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u8fc7\u53bb\uff0c\u7ec4\u4ef6\u5185\u7684 JavaScript \u9519\u8bef\u4f1a\u5bfc\u81f4 React \u7684\u5185\u90e8\u72b6\u6001\u88ab\u7834\u574f\uff0c\u5e76\u4e14\u5728\u4e0b\u4e00\u6b21\u6e32\u67d3\u65f6 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/4026\">\u4ea7\u751f</a> <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/6895\">\u53ef\u80fd\u65e0\u6cd5\u8ffd\u8e2a\u7684</a> <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/8579\">\u9519\u8bef</a>\u3002\u8fd9\u4e9b\u9519\u8bef\u57fa\u672c\u4e0a\u662f\u7531\u8f83\u65e9\u7684\u5176\u4ed6\u4ee3\u7801\uff08\u975e React \u7ec4\u4ef6\u4ee3\u7801\uff09\u9519\u8bef\u5f15\u8d77\u7684\uff0c\u4f46 React \u5e76\u6ca1\u6709\u63d0\u4f9b\u4e00\u79cd\u5728\u7ec4\u4ef6\u4e2d\u4f18\u96c5\u5904\u7406\u8fd9\u4e9b\u9519\u8bef\u7684\u65b9\u5f0f\uff0c\u4e5f\u65e0\u6cd5\u4ece\u9519\u8bef\u4e2d\u6062\u590d\u3002</p>\n<h2 id=\"introducing-error-boundaries\"><a class=\"anchor\" href=\"/react/error-boundaries#introducing-error-boundaries\"></a>\u9519\u8bef\u8fb9\u754c\uff08Error Boundaries\uff09 </h2>\n<p>\u90e8\u5206 UI \u7684 JavaScript \u9519\u8bef\u4e0d\u5e94\u8be5\u5bfc\u81f4\u6574\u4e2a\u5e94\u7528\u5d29\u6e83\uff0c\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cReact 16 \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u6982\u5ff5 \u2014\u2014 \u9519\u8bef\u8fb9\u754c\u3002</p>\n<p>\u9519\u8bef\u8fb9\u754c\u662f\u4e00\u79cd React \u7ec4\u4ef6\uff0c\u8fd9\u79cd\u7ec4\u4ef6<strong>\u53ef\u4ee5\u6355\u83b7\u53d1\u751f\u5728\u5176\u5b50\u7ec4\u4ef6\u6811\u4efb\u4f55\u4f4d\u7f6e\u7684 JavaScript \u9519\u8bef\uff0c\u5e76\u6253\u5370\u8fd9\u4e9b\u9519\u8bef\uff0c\u540c\u65f6\u5c55\u793a\u964d\u7ea7 UI</strong>\uff0c\u800c\u5e76\u4e0d\u4f1a\u6e32\u67d3\u90a3\u4e9b\u53d1\u751f\u5d29\u6e83\u7684\u5b50\u7ec4\u4ef6\u6811\u3002\u9519\u8bef\u8fb9\u754c\u53ef\u4ee5\u6355\u83b7\u53d1\u751f\u5728\u6574\u4e2a\u5b50\u7ec4\u4ef6\u6811\u7684\u6e32\u67d3\u671f\u95f4\u3001\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4ee5\u53ca\u6784\u9020\u51fd\u6570\u4e2d\u7684\u9519\u8bef\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u9519\u8bef\u8fb9\u754c<strong>\u65e0\u6cd5</strong>\u6355\u83b7\u4ee5\u4e0b\u573a\u666f\u4e2d\u4ea7\u751f\u7684\u9519\u8bef\uff1a</p>\n<ul>\n<li>\u4e8b\u4ef6\u5904\u7406\uff08<a href=\"/react/error-boundaries#how-about-event-handlers\">\u4e86\u89e3\u66f4\u591a</a>\uff09</li>\n<li>\u5f02\u6b65\u4ee3\u7801\uff08\u4f8b\u5982 <code class=\"language-javascript\">setTimeout</code> \u6216 <code class=\"language-javascript\">requestAnimationFrame</code> \u56de\u8c03\u51fd\u6570\uff09</li>\n<li>\u670d\u52a1\u7aef\u6e32\u67d3</li>\n<li>\u5b83\u81ea\u8eab\u629b\u51fa\u6765\u7684\u9519\u8bef\uff08\u5e76\u975e\u5b83\u7684\u5b50\u7ec4\u4ef6\uff09</li>\n</ul>\n</div>\n<p>\u5982\u679c\u4e00\u4e2a class \u7ec4\u4ef6\u4e2d\u5b9a\u4e49\u4e86 <a href=\"/react/react-component#static-getderivedstatefromerror\"><code class=\"language-javascript\">static getDerivedStateFromError()</code></a> \u6216 <a href=\"/react/react-component#componentdidcatch\"><code class=\"language-javascript\">componentDidCatch()</code></a> \u8fd9\u4e24\u4e2a\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\uff08\u6216\u4e24\u4e2a\uff09\u65f6\uff0c\u90a3\u4e48\u5b83\u5c31\u53d8\u6210\u4e00\u4e2a\u9519\u8bef\u8fb9\u754c\u3002\u5f53\u629b\u51fa\u9519\u8bef\u540e\uff0c\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">static getDerivedStateFromError()</code> \u6e32\u67d3\u5907\u7528 UI \uff0c\u4f7f\u7528 <code class=\"language-javascript\">componentDidCatch()</code> \u6253\u5370\u9519\u8bef\u4fe1\u606f\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorBoundary</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">static</span> <span class=\"token function\">getDerivedStateFromError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u66f4\u65b0 state \u4f7f\u4e0b\u4e00\u6b21\u6e32\u67d3\u80fd\u591f\u663e\u793a\u964d\u7ea7\u540e\u7684 UI</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidCatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> errorInfo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u4f60\u540c\u6837\u53ef\u4ee5\u5c06\u9519\u8bef\u65e5\u5fd7\u4e0a\u62a5\u7ed9\u670d\u52a1\u5668</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">logErrorToMyService</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">,</span> errorInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u81ea\u5b9a\u4e49\u964d\u7ea7\u540e\u7684 UI \u5e76\u6e32\u67d3</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Something went wrong.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span> \n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7136\u540e\u4f60\u53ef\u4ee5\u5c06\u5b83\u4f5c\u4e3a\u4e00\u4e2a\u5e38\u89c4\u7ec4\u4ef6\u53bb\u4f7f\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorBoundary</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyWidget</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ErrorBoundary</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u9519\u8bef\u8fb9\u754c\u7684\u5de5\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e JavaScript \u7684 <code class=\"language-javascript\">catch {}</code>\uff0c\u4e0d\u540c\u7684\u5730\u65b9\u5728\u4e8e\u9519\u8bef\u8fb9\u754c\u53ea\u9488\u5bf9 React \u7ec4\u4ef6\u3002\u53ea\u6709 class \u7ec4\u4ef6\u624d\u53ef\u4ee5\u6210\u4e3a\u9519\u8bef\u8fb9\u754c\u7ec4\u4ef6\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b, \u4f60\u53ea\u9700\u8981\u58f0\u660e\u4e00\u6b21\u9519\u8bef\u8fb9\u754c\u7ec4\u4ef6, \u5e76\u5728\u6574\u4e2a\u5e94\u7528\u4e2d\u4f7f\u7528\u5b83\u3002</p>\n<p>\u6ce8\u610f<strong>\u9519\u8bef\u8fb9\u754c\u4ec5\u53ef\u4ee5\u6355\u83b7\u5176\u5b50\u7ec4\u4ef6\u7684\u9519\u8bef</strong>\uff0c\u5b83\u65e0\u6cd5\u6355\u83b7\u5176\u81ea\u8eab\u7684\u9519\u8bef\u3002\u5982\u679c\u4e00\u4e2a\u9519\u8bef\u8fb9\u754c\u65e0\u6cd5\u6e32\u67d3\u9519\u8bef\u4fe1\u606f\uff0c\u5219\u9519\u8bef\u4f1a\u5192\u6ce1\u81f3\u6700\u8fd1\u7684\u4e0a\u5c42\u9519\u8bef\u8fb9\u754c\uff0c\u8fd9\u4e5f\u7c7b\u4f3c\u4e8e JavaScript \u4e2d <code class=\"language-javascript\">catch {}</code> \u7684\u5de5\u4f5c\u673a\u5236\u3002</p>\n<h2 id=\"live-demo\"><a class=\"anchor\" href=\"/react/error-boundaries#live-demo\"></a>\u5728\u7ebf\u6f14\u793a </h2>\n<p>\u67e5\u770b <a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/wqvxGa?editors=0010\">\u5b9a\u4e49\u548c\u4f7f\u7528\u9519\u8bef\u8fb9\u754c\u7684\u793a\u4f8b</a>\u3002</p>\n<h2 id=\"where-to-place-error-boundaries\"><a class=\"anchor\" href=\"/react/error-boundaries#where-to-place-error-boundaries\"></a>\u9519\u8bef\u8fb9\u754c\u5e94\u8be5\u653e\u7f6e\u5728\u54ea\uff1f </h2>\n<p>\u9519\u8bef\u8fb9\u754c\u7684\u7c92\u5ea6\u7531\u4f60\u6765\u51b3\u5b9a\uff0c\u53ef\u4ee5\u5c06\u5176\u5305\u88c5\u5728\u6700\u9876\u5c42\u7684\u8def\u7531\u7ec4\u4ef6\u5e76\u4e3a\u7528\u6237\u5c55\u793a\u4e00\u4e2a \u201cSomething went wrong\u201d \u7684\u9519\u8bef\u4fe1\u606f\uff0c\u5c31\u50cf\u670d\u52a1\u7aef\u6846\u67b6\u7ecf\u5e38\u5904\u7406\u5d29\u6e83\u4e00\u6837\u3002\u4f60\u4e5f\u53ef\u4ee5\u5c06\u5355\u72ec\u7684\u90e8\u4ef6\u5305\u88c5\u5728\u9519\u8bef\u8fb9\u754c\u4ee5\u4fdd\u62a4\u5e94\u7528\u5176\u4ed6\u90e8\u5206\u4e0d\u5d29\u6e83\u3002 </p>\n<h2 id=\"new-behavior-for-uncaught-errors\"><a class=\"anchor\" href=\"/react/error-boundaries#new-behavior-for-uncaught-errors\"></a>\u672a\u6355\u83b7\u9519\u8bef\uff08Uncaught Errors\uff09\u7684\u65b0\u884c\u4e3a </h2>\n<p>\u8fd9\u4e00\u6539\u53d8\u5177\u6709\u91cd\u8981\u610f\u4e49\uff0c<strong>\u81ea React 16 \u8d77\uff0c\u4efb\u4f55\u672a\u88ab\u9519\u8bef\u8fb9\u754c\u6355\u83b7\u7684\u9519\u8bef\u5c06\u4f1a\u5bfc\u81f4\u6574\u4e2a React \u7ec4\u4ef6\u6811\u88ab\u5378\u8f7d\u3002</strong></p>\n<p>\u6211\u4eec\u5bf9\u8fd9\u4e00\u51b3\u5b9a\u6709\u8fc7\u4e00\u4e9b\u4e89\u8bba\uff0c\u4f46\u6839\u636e\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u628a\u4e00\u4e2a\u9519\u8bef\u7684 UI \u7559\u5728\u90a3\u6bd4\u5b8c\u5168\u79fb\u9664\u5b83\u8981\u66f4\u7cdf\u7cd5\u3002\u4f8b\u5982\uff0c\u5728\u7c7b\u4f3c Messenger \u7684\u4ea7\u54c1\u4e2d\uff0c\u628a\u4e00\u4e2a\u5f02\u5e38\u7684 UI \u5c55\u793a\u7ed9\u7528\u6237\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7528\u6237\u5c06\u4fe1\u606f\u9519\u53d1\u7ed9\u522b\u4eba\u3002\u540c\u6837\uff0c\u5bf9\u4e8e\u652f\u4ed8\u7c7b\u5e94\u7528\u800c\u8a00\uff0c\u663e\u793a\u9519\u8bef\u7684\u91d1\u989d\u4e5f\u6bd4\u4e0d\u5448\u73b0\u4efb\u4f55\u5185\u5bb9\u66f4\u7cdf\u7cd5\u3002</p>\n<p>\u6b64\u53d8\u5316\u610f\u5473\u7740\u5f53\u4f60\u8fc1\u79fb\u5230 React 16 \u65f6\uff0c\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\u4e00\u4e9b\u5df2\u5b58\u5728\u4f60\u5e94\u7528\u4e2d\u4f46\u672a\u66fe\u6ce8\u610f\u5230\u7684\u5d29\u6e83\u3002\u589e\u52a0\u9519\u8bef\u8fb9\u754c\u80fd\u591f\u8ba9\u4f60\u5728\u5e94\u7528\u53d1\u751f\u5f02\u5e38\u65f6\u63d0\u4f9b\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\u3002</p>\n<p>\u4f8b\u5982\uff0cFacebook Messenger \u5c06\u4fa7\u8fb9\u680f\u3001\u4fe1\u606f\u9762\u677f\u3001\u804a\u5929\u8bb0\u5f55\u4ee5\u53ca\u4fe1\u606f\u8f93\u5165\u6846\u5305\u88c5\u5728\u5355\u72ec\u7684\u9519\u8bef\u8fb9\u754c\u4e2d\u3002\u5982\u679c\u5176\u4e2d\u7684\u67d0\u4e9b UI \u7ec4\u4ef6\u5d29\u6e83\uff0c\u5176\u4f59\u90e8\u5206\u4ecd\u7136\u80fd\u591f\u4ea4\u4e92\u3002</p>\n<p>\u6211\u4eec\u4e5f\u9f13\u52b1\u4f7f\u7528 JS \u9519\u8bef\u62a5\u544a\u670d\u52a1\uff08\u6216\u81ea\u884c\u6784\u5efa\uff09\uff0c\u8fd9\u6837\u4f60\u80fd\u4e86\u89e3\u5173\u4e8e\u751f\u4ea7\u73af\u5883\u4e2d\u51fa\u73b0\u7684\u672a\u6355\u83b7\u5f02\u5e38\uff0c\u5e76\u5c06\u5176\u4fee\u590d\u3002</p>\n<h2 id=\"component-stack-traces\"><a class=\"anchor\" href=\"/react/error-boundaries#component-stack-traces\"></a>\u7ec4\u4ef6\u6808\u8ffd\u8e2a </h2>\n<p>\u5728\u5f00\u53d1\u73af\u5883\u4e0b\uff0cReact 16 \u4f1a\u628a\u6e32\u67d3\u671f\u95f4\u53d1\u751f\u7684\u6240\u6709\u9519\u8bef\u6253\u5370\u5230\u63a7\u5236\u53f0\uff0c\u5373\u4f7f\u8be5\u5e94\u7528\u610f\u5916\u7684\u5c06\u8fd9\u4e9b\u9519\u8bef\u63a9\u76d6\u3002\u9664\u4e86\u9519\u8bef\u4fe1\u606f\u548c JavaScript \u6808\u5916\uff0cReact 16 \u8fd8\u63d0\u4f9b\u4e86\u7ec4\u4ef6\u6808\u8ffd\u8e2a\u3002\u73b0\u5728\u4f60\u53ef\u4ee5\u51c6\u786e\u5730\u67e5\u770b\u53d1\u751f\u5728\u7ec4\u4ef6\u6811\u5185\u7684\u9519\u8bef\u4fe1\u606f\uff1a</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/f1276837b03821b43358d44c14072945/c3a47/error-boundaries-stack-trace.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/f1276837b03821b43358d44c14072945/1e088/error-boundaries-stack-trace.png\">Image link</a>\n</span>\n</span>\n</a>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u5728\u7ec4\u4ef6\u6808\u8ffd\u8e2a\u4e2d\u67e5\u770b\u6587\u4ef6\u540d\u548c\u884c\u53f7\uff0c\u8fd9\u4e00\u529f\u80fd\u5728 <a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> \u9879\u76ee\u4e2d\u9ed8\u8ba4\u5f00\u542f\uff1a</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/45611d4fdbd152829b28ae2348d6dcba/6dd26/error-boundaries-stack-trace-line-numbers.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/45611d4fdbd152829b28ae2348d6dcba/1e088/error-boundaries-stack-trace-line-numbers.png\">Image link</a>\n</span>\n</span>\n</a>\n<p>\u5982\u679c\u4f60\u6ca1\u6709\u4f7f\u7528 Create React App\uff0c\u53ef\u4ee5\u624b\u52a8\u5c06<a class=\"external-link\" href=\"https://www.npmjs.com/package/@babel/plugin-transform-react-jsx-source\">\u8be5\u63d2\u4ef6</a>\u6dfb\u52a0\u5230\u4f60\u7684 Babel \u914d\u7f6e\u4e2d\u3002\u6ce8\u610f\u5b83\u4ec5\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c<strong>\u5728\u751f\u4ea7\u73af\u5883\u5fc5\u987b\u5c06\u5176\u7981\u7528</strong> \u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u7ec4\u4ef6\u540d\u79f0\u5728\u6808\u8ffd\u8e2a\u4e2d\u7684\u663e\u793a\u4f9d\u8d56\u4e8e <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\"><code class=\"language-javascript\">Function.name</code></a> \u5c5e\u6027\u3002\u5982\u679c\u4f60\u60f3\u8981\u652f\u6301\u5c1a\u672a\u63d0\u4f9b\u8be5\u529f\u80fd\u7684\u65e7\u7248\u6d4f\u89c8\u5668\u548c\u8bbe\u5907\uff08\u4f8b\u5982 IE 11\uff09\uff0c\u8003\u8651\u5728\u4f60\u7684\u6253\u5305\uff08bundled\uff09\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5305\u542b\u4e00\u4e2a <code class=\"language-javascript\">Function.name</code> \u7684 polyfill\uff0c\u5982 <a class=\"external-link\" href=\"https://github.com/JamesMGreene/Function.name\"><code class=\"language-javascript\">function.name-polyfill</code></a> \u3002\u6216\u8005\uff0c\u4f60\u53ef\u4ee5\u5728\u6240\u6709\u7ec4\u4ef6\u4e0a\u663e\u5f0f\u8bbe\u7f6e <a href=\"/react/react-component#displayname\"><code class=\"language-javascript\">displayName</code></a> \u5c5e\u6027\u3002</p>\n</div>\n<h2 id=\"how-about-trycatch\"><a class=\"anchor\" href=\"/react/error-boundaries#how-about-trycatch\"></a>\u5173\u4e8e try/catch \uff1f </h2>\n<p><code class=\"language-javascript\">try</code> / <code class=\"language-javascript\">catch</code> \u5f88\u68d2\u4f46\u5b83\u4ec5\u80fd\u7528\u4e8e\u547d\u4ee4\u5f0f\u4ee3\u7801\uff08imperative code\uff09\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">showButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7136\u800c\uff0cReact \u7ec4\u4ef6\u662f\u58f0\u660e\u5f0f\u7684\u5e76\u4e14\u5177\u4f53\u6307\u51fa <em>\u4ec0\u4e48</em> \u9700\u8981\u88ab\u6e32\u67d3\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u9519\u8bef\u8fb9\u754c\u4fdd\u7559\u4e86 React \u7684\u58f0\u660e\u6027\u8d28\uff0c\u5176\u884c\u4e3a\u7b26\u5408\u4f60\u7684\u9884\u671f\u3002\u4f8b\u5982\uff0c\u5373\u4f7f\u4e00\u4e2a\u9519\u8bef\u53d1\u751f\u5728 <code class=\"language-javascript\">componentDidUpdate</code> \u65b9\u6cd5\u4e2d\uff0c\u5e76\u4e14\u7531\u67d0\u4e00\u4e2a\u6df1\u5c42\u7ec4\u4ef6\u6811\u7684 <code class=\"language-javascript\">setState</code> \u5f15\u8d77\uff0c\u5176\u4ecd\u7136\u80fd\u591f\u5192\u6ce1\u5230\u6700\u8fd1\u7684\u9519\u8bef\u8fb9\u754c\u3002</p>\n<h2 id=\"how-about-event-handlers\"><a class=\"anchor\" href=\"/react/error-boundaries#how-about-event-handlers\"></a>\u5173\u4e8e\u4e8b\u4ef6\u5904\u7406\u5668 </h2>\n<p>\u9519\u8bef\u8fb9\u754c<strong>\u65e0\u6cd5</strong>\u6355\u83b7\u4e8b\u4ef6\u5904\u7406\u5668\u5185\u90e8\u7684\u9519\u8bef\u3002</p>\n<p>React \u4e0d\u9700\u8981\u9519\u8bef\u8fb9\u754c\u6765\u6355\u83b7\u4e8b\u4ef6\u5904\u7406\u5668\u4e2d\u7684\u9519\u8bef\u3002\u4e0e render \u65b9\u6cd5\u548c\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4e0d\u540c\uff0c\u4e8b\u4ef6\u5904\u7406\u5668\u4e0d\u4f1a\u5728\u6e32\u67d3\u671f\u95f4\u89e6\u53d1\u3002\u56e0\u6b64\uff0c\u5982\u679c\u5b83\u4eec\u629b\u51fa\u5f02\u5e38\uff0cReact \u4ecd\u7136\u80fd\u591f\u77e5\u9053\u9700\u8981\u5728\u5c4f\u5e55\u4e0a\u663e\u793a\u4ec0\u4e48\u3002</p>\n<p>\u5982\u679c\u4f60\u9700\u8981\u5728\u4e8b\u4ef6\u5904\u7406\u5668\u5185\u90e8\u6355\u83b7\u9519\u8bef\uff0c\u4f7f\u7528\u666e\u901a\u7684 JavaScript <code class=\"language-javascript\">try</code> / <code class=\"language-javascript\">catch</code> \u8bed\u53e5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// \u6267\u884c\u64cd\u4f5c\uff0c\u5982\u6709\u9519\u8bef\u5219\u4f1a\u629b\u51fa</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Caught an error.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8bf7\u6ce8\u610f\u4e0a\u8ff0\u4f8b\u5b50\u53ea\u662f\u6f14\u793a\u4e86\u666e\u901a\u7684 JavaScript \u884c\u4e3a\uff0c\u5e76\u6ca1\u6709\u4f7f\u7528\u9519\u8bef\u8fb9\u754c\u3002</p>\n<h2 id=\"naming-changes-from-react-15\"><a class=\"anchor\" href=\"/react/error-boundaries#naming-changes-from-react-15\"></a>\u81ea React 15 \u7684\u547d\u540d\u66f4\u6539 </h2>\n<p>React 15 \u4e2d\u6709\u4e00\u4e2a\u652f\u6301\u6709\u9650\u7684\u9519\u8bef\u8fb9\u754c\u65b9\u6cd5 <code class=\"language-javascript\">unstable_handleError</code>\u3002\u6b64\u65b9\u6cd5\u4e0d\u518d\u8d77\u4f5c\u7528\uff0c\u540c\u65f6\u81ea React 16 beta \u53d1\u5e03\u8d77\u4f60\u9700\u8981\u5728\u4ee3\u7801\u4e2d\u5c06\u5176\u4fee\u6539\u4e3a <code class=\"language-javascript\">componentDidCatch</code>\u3002</p>\n<p>\u5bf9\u6b64\uff0c\u6211\u4eec\u5df2\u63d0\u4f9b\u4e86\u4e00\u4e2a <a class=\"external-link\" href=\"https://github.com/reactjs/react-codemod#error-boundaries\">codemod</a> \u6765\u5e2e\u52a9\u4f60\u81ea\u52a8\u8fc1\u79fb\u4f60\u7684\u4ee3\u7801\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/error-boundaries.md\">Edit this page</a></p></div></article>", "path": "/react/error-boundaries", "nav": ["/react/context", "/react/forwarding-refs"]}, {"key": "Refs \u8f6c\u53d1", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>Ref \u8f6c\u53d1\u662f\u4e00\u9879\u5c06 <a href=\"/react/refs-and-the-dom\">ref</a> \u81ea\u52a8\u5730\u901a\u8fc7\u7ec4\u4ef6\u4f20\u9012\u5230\u5176\u4e00\u5b50\u7ec4\u4ef6\u7684\u6280\u5de7\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u5e94\u7528\u4e2d\u7684\u7ec4\u4ef6\u6765\u8bf4\uff0c\u8fd9\u901a\u5e38\u4e0d\u662f\u5fc5\u9700\u7684\u3002\u4f46\u5176\u5bf9\u67d0\u4e9b\u7ec4\u4ef6\uff0c\u5c24\u5176\u662f\u53ef\u91cd\u7528\u7684\u7ec4\u4ef6\u5e93\u662f\u5f88\u6709\u7528\u7684\u3002\u6700\u5e38\u89c1\u7684\u6848\u4f8b\u5982\u4e0b\u6240\u8ff0\u3002</p>\n<h2 id=\"forwarding-refs-to-dom-components\"><a class=\"anchor\" href=\"/react/forwarding-refs#forwarding-refs-to-dom-components\"></a>\u8f6c\u53d1 refs \u5230 DOM \u7ec4\u4ef6 </h2>\n<p>\u8003\u8651\u8fd9\u4e2a\u6e32\u67d3\u539f\u751f DOM \u5143\u7d20 <code class=\"language-javascript\">button</code> \u7684 <code class=\"language-javascript\">FancyButton</code> \u7ec4\u4ef6\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FancyButton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>React \u7ec4\u4ef6\u9690\u85cf\u5176\u5b9e\u73b0\u7ec6\u8282\uff0c\u5305\u62ec\u5176\u6e32\u67d3\u7ed3\u679c\u3002\u5176\u4ed6\u4f7f\u7528 <code class=\"language-javascript\">FancyButton</code> \u7684\u7ec4\u4ef6<strong>\u901a\u5e38\u4e0d\u9700\u8981</strong>\u83b7\u53d6\u5185\u90e8\u7684 DOM \u5143\u7d20 <code class=\"language-javascript\">button</code> \u7684 <a href=\"/react/refs-and-the-dom\">ref</a>\u3002\u8fd9\u5f88\u597d\uff0c\u56e0\u4e3a\u8fd9\u9632\u6b62\u7ec4\u4ef6\u8fc7\u5ea6\u4f9d\u8d56\u5176\u4ed6\u7ec4\u4ef6\u7684 DOM \u7ed3\u6784\u3002</p>\n<p>\u867d\u7136\u8fd9\u79cd\u5c01\u88c5\u5bf9\u7c7b\u4f3c <code class=\"language-javascript\">FeedStory</code> \u6216 <code class=\"language-javascript\">Comment</code> \u8fd9\u6837\u7684\u5e94\u7528\u7ea7\u7ec4\u4ef6\u662f\u7406\u60f3\u7684\uff0c\u4f46\u5176\u5bf9 <code class=\"language-javascript\">FancyButton</code> \u6216 <code class=\"language-javascript\">MyTextInput</code> \u8fd9\u6837\u7684\u9ad8\u53ef\u590d\u7528\u201c\u53f6\u201d\u7ec4\u4ef6\u6765\u8bf4\u53ef\u80fd\u662f\u4e0d\u65b9\u4fbf\u7684\u3002\u8fd9\u4e9b\u7ec4\u4ef6\u503e\u5411\u4e8e\u5728\u6574\u4e2a\u5e94\u7528\u4e2d\u4ee5\u4e00\u79cd\u7c7b\u4f3c\u5e38\u89c4 DOM <code class=\"language-javascript\">button</code> \u548c <code class=\"language-javascript\">input</code> \u7684\u65b9\u5f0f\u88ab\u4f7f\u7528\uff0c\u5e76\u4e14\u8bbf\u95ee\u5176 DOM \u8282\u70b9\u5bf9\u7ba1\u7406\u7126\u70b9\uff0c\u9009\u4e2d\u6216\u52a8\u753b\u6765\u8bf4\u662f\u4e0d\u53ef\u907f\u514d\u7684\u3002</p>\n<p><strong>Ref \u8f6c\u53d1\u662f\u4e00\u4e2a\u53ef\u9009\u7279\u6027\uff0c\u5176\u5141\u8bb8\u67d0\u4e9b\u7ec4\u4ef6\u63a5\u6536 <code class=\"language-javascript\">ref</code>\uff0c\u5e76\u5c06\u5176\u5411\u4e0b\u4f20\u9012\uff08\u6362\u53e5\u8bdd\u8bf4\uff0c\u201c\u8f6c\u53d1\u201d\u5b83\uff09\u7ed9\u5b50\u7ec4\u4ef6\u3002</strong></p>\n<p>\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c<code class=\"language-javascript\">FancyButton</code> \u4f7f\u7528 <code class=\"language-javascript\">React.forwardRef</code> \u6765\u83b7\u53d6\u4f20\u9012\u7ed9\u5b83\u7684 <code class=\"language-javascript\">ref</code>\uff0c\u7136\u540e\u8f6c\u53d1\u5230\u5b83\u6e32\u67d3\u7684 DOM <code class=\"language-javascript\">button</code>\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> FancyButton <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FancyButton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u4f60\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6 DOM button \u7684 ref\uff1a</span>\n<span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyButton</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click me!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FancyButton</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p>\u8fd9\u6837\uff0c\u4f7f\u7528 <code class=\"language-javascript\">FancyButton</code> \u7684\u7ec4\u4ef6\u53ef\u4ee5\u83b7\u53d6\u5e95\u5c42 DOM \u8282\u70b9 <code class=\"language-javascript\">button</code> \u7684 ref \uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u8bbf\u95ee\uff0c\u5c31\u50cf\u5176\u76f4\u63a5\u4f7f\u7528 DOM <code class=\"language-javascript\">button</code> \u4e00\u6837\u3002</p>\n<p>\u4ee5\u4e0b\u662f\u5bf9\u4e0a\u8ff0\u793a\u4f8b\u53d1\u751f\u60c5\u51b5\u7684\u9010\u6b65\u89e3\u91ca\uff1a</p>\n<ol>\n<li>\u6211\u4eec\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">React.createRef</code> \u521b\u5efa\u4e86\u4e00\u4e2a <a href=\"/react/refs-and-the-dom\">React ref</a> \u5e76\u5c06\u5176\u8d4b\u503c\u7ed9 <code class=\"language-javascript\">ref</code> \u53d8\u91cf\u3002</li>\n<li>\u6211\u4eec\u901a\u8fc7\u6307\u5b9a <code class=\"language-javascript\">ref</code> \u4e3a JSX \u5c5e\u6027\uff0c\u5c06\u5176\u5411\u4e0b\u4f20\u9012\u7ed9 <code class=\"language-javascript\">&lt;FancyButton ref={ref}&gt;</code>\u3002</li>\n<li>React \u4f20\u9012 <code class=\"language-javascript\">ref</code> \u7ed9 <code class=\"language-javascript\">forwardRef</code> \u5185\u51fd\u6570 <code class=\"language-javascript\">(props, ref) =&gt; ...</code>\uff0c\u4f5c\u4e3a\u5176\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002</li>\n<li>\u6211\u4eec\u5411\u4e0b\u8f6c\u53d1\u8be5 <code class=\"language-javascript\">ref</code> \u53c2\u6570\u5230 <code class=\"language-javascript\">&lt;button ref={ref}&gt;</code>\uff0c\u5c06\u5176\u6307\u5b9a\u4e3a JSX \u5c5e\u6027\u3002</li>\n<li>\u5f53 ref \u6302\u8f7d\u5b8c\u6210\uff0c<code class=\"language-javascript\">ref.current</code> \u5c06\u6307\u5411 <code class=\"language-javascript\">&lt;button&gt;</code> DOM \u8282\u70b9\u3002</li>\n</ol>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u7b2c\u4e8c\u4e2a\u53c2\u6570 <code class=\"language-javascript\">ref</code> \u53ea\u5728\u4f7f\u7528 <code class=\"language-javascript\">React.forwardRef</code> \u5b9a\u4e49\u7ec4\u4ef6\u65f6\u5b58\u5728\u3002\u5e38\u89c4\u51fd\u6570\u548c class \u7ec4\u4ef6\u4e0d\u63a5\u6536 <code class=\"language-javascript\">ref</code> \u53c2\u6570\uff0c\u4e14 props \u4e2d\u4e5f\u4e0d\u5b58\u5728 <code class=\"language-javascript\">ref</code>\u3002</p>\n<p>Ref \u8f6c\u53d1\u4e0d\u4ec5\u9650\u4e8e DOM \u7ec4\u4ef6\uff0c\u4f60\u4e5f\u53ef\u4ee5\u8f6c\u53d1 refs \u5230 class \u7ec4\u4ef6\u5b9e\u4f8b\u4e2d\u3002</p>\n</div>\n<h2 id=\"note-for-component-library-maintainers\"><a class=\"anchor\" href=\"/react/forwarding-refs#note-for-component-library-maintainers\"></a>\u7ec4\u4ef6\u5e93\u7ef4\u62a4\u8005\u7684\u6ce8\u610f\u4e8b\u9879 </h2>\n<p><strong>\u5f53\u4f60\u5f00\u59cb\u5728\u7ec4\u4ef6\u5e93\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">forwardRef</code> \u65f6\uff0c\u4f60\u5e94\u5f53\u5c06\u5176\u89c6\u4e3a\u4e00\u4e2a\u7834\u574f\u6027\u66f4\u6539\uff0c\u5e76\u53d1\u5e03\u5e93\u7684\u4e00\u4e2a\u65b0\u7684\u4e3b\u7248\u672c\u3002</strong> \u8fd9\u662f\u56e0\u4e3a\u4f60\u7684\u5e93\u53ef\u80fd\u4f1a\u6709\u660e\u663e\u4e0d\u540c\u7684\u884c\u4e3a\uff08\u4f8b\u5982 refs \u88ab\u5206\u914d\u7ed9\u4e86\u8c01\uff0c\u4ee5\u53ca\u5bfc\u51fa\u4e86\u4ec0\u4e48\u7c7b\u578b\uff09\uff0c\u5e76\u4e14\u8fd9\u6837\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4f9d\u8d56\u65e7\u884c\u4e3a\u7684\u5e94\u7528\u548c\u5176\u4ed6\u5e93\u5d29\u6e83\u3002</p>\n<p>\u51fa\u4e8e\u540c\u6837\u7684\u539f\u56e0\uff0c\u5f53 <code class=\"language-javascript\">React.forwardRef</code> \u5b58\u5728\u65f6\u6709\u6761\u4ef6\u5730\u4f7f\u7528\u5b83\u4e5f\u662f\u4e0d\u63a8\u8350\u7684\uff1a\u5b83\u6539\u53d8\u4e86\u4f60\u7684\u5e93\u7684\u884c\u4e3a\uff0c\u5e76\u5728\u5347\u7ea7 React \u81ea\u8eab\u65f6\u7834\u574f\u7528\u6237\u7684\u5e94\u7528\u3002</p>\n<h2 id=\"forwarding-refs-in-higher-order-components\"><a class=\"anchor\" href=\"/react/forwarding-refs#forwarding-refs-in-higher-order-components\"></a>\u5728\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u8f6c\u53d1 refs </h2>\n<p>\u8fd9\u4e2a\u6280\u5de7\u5bf9<a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a>\uff08\u4e5f\u88ab\u79f0\u4e3a HOC\uff09\u7279\u522b\u6709\u7528\u3002\u8ba9\u6211\u4eec\u4ece\u4e00\u4e2a\u8f93\u51fa\u7ec4\u4ef6 props \u5230\u63a7\u5236\u53f0\u7684 HOC \u793a\u4f8b\u5f00\u59cb\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">class</span> <span class=\"token class-name\">LogProps</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'old props:'</span><span class=\"token punctuation\">,</span> prevProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'new props:'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> LogProps<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u201clogProps\u201d HOC \u900f\u4f20\uff08pass through\uff09\u6240\u6709 <code class=\"language-javascript\">props</code> \u5230\u5176\u5305\u88f9\u7684\u7ec4\u4ef6\uff0c\u6240\u4ee5\u6e32\u67d3\u7ed3\u679c\u5c06\u662f\u76f8\u540c\u7684\u3002\u4f8b\u5982\uff1a\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8be5 HOC \u8bb0\u5f55\u6240\u6709\u4f20\u9012\u5230 \u201cfancy button\u201d \u7ec4\u4ef6\u7684 props\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FancyButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u6211\u4eec\u5bfc\u51fa LogProps\uff0c\u800c\u4e0d\u662f FancyButton\u3002</span>\n<span class=\"token comment\">// \u867d\u7136\u5b83\u4e5f\u4f1a\u6e32\u67d3\u4e00\u4e2a FancyButton\u3002</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span>FancyButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre>\n</div></p>\n<p>\u4e0b\u9762\u7684\u793a\u4f8b\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff1arefs \u5c06\u4e0d\u4f1a\u900f\u4f20\u4e0b\u53bb\u3002\u8fd9\u662f\u56e0\u4e3a <code class=\"language-javascript\">ref</code> \u4e0d\u662f prop \u5c5e\u6027\u3002\u5c31\u50cf <code class=\"language-javascript\">key</code> \u4e00\u6837\uff0c\u5176\u88ab React \u8fdb\u884c\u4e86\u7279\u6b8a\u5904\u7406\u3002\u5982\u679c\u4f60\u5bf9 HOC \u6dfb\u52a0 ref\uff0c\u8be5 ref \u5c06\u5f15\u7528\u6700\u5916\u5c42\u7684\u5bb9\u5668\u7ec4\u4ef6\uff0c\u800c\u4e0d\u662f\u88ab\u5305\u88f9\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u8fd9\u610f\u5473\u7740\u7528\u4e8e\u6211\u4eec <code class=\"language-javascript\">FancyButton</code> \u7ec4\u4ef6\u7684 refs \u5b9e\u9645\u4e0a\u5c06\u88ab\u6302\u8f7d\u5230 <code class=\"language-javascript\">LogProps</code> \u7ec4\u4ef6\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> FancyButton <span class=\"token keyword\">from</span> <span class=\"token string\">'./FancyButton'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token comment\">// \u6211\u4eec\u5bfc\u5165\u7684 FancyButton \u7ec4\u4ef6\u662f\u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09LogProps\u3002</span>\n<span class=\"token comment\">// \u5c3d\u7ba1\u6e32\u67d3\u7ed3\u679c\u5c06\u662f\u4e00\u6837\u7684\uff0c</span>\n<span class=\"token comment\">// \u4f46\u6211\u4eec\u7684 ref \u5c06\u6307\u5411 LogProps \u800c\u4e0d\u662f\u5185\u90e8\u7684 FancyButton \u7ec4\u4ef6\uff01</span>\n<span class=\"token comment\">// \u8fd9\u610f\u5473\u7740\u6211\u4eec\u4e0d\u80fd\u8c03\u7528\u4f8b\u5982 ref.current.focus() \u8fd9\u6837\u7684\u65b9\u6cd5</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyButton</span></span>\n  <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Click Me<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">handleClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span></span><span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p>\u5e78\u8fd0\u7684\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">React.forwardRef</code> API \u660e\u786e\u5730\u5c06 refs \u8f6c\u53d1\u5230\u5185\u90e8\u7684 <code class=\"language-javascript\">FancyButton</code> \u7ec4\u4ef6\u3002<code class=\"language-javascript\">React.forwardRef</code> \u63a5\u53d7\u4e00\u4e2a\u6e32\u67d3\u51fd\u6570\uff0c\u5176\u63a5\u6536 <code class=\"language-javascript\">props</code> \u548c <code class=\"language-javascript\">ref</code> \u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a React \u8282\u70b9\u3002\u4f8b\u5982\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">LogProps</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'old props:'</span><span class=\"token punctuation\">,</span> prevProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'new props:'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>forwardedRef<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span></span>\n      <span class=\"token comment\">// \u5c06\u81ea\u5b9a\u4e49\u7684 prop \u5c5e\u6027 \u201cforwardedRef\u201d \u5b9a\u4e49\u4e3a ref</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>forwardedRef<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// \u6ce8\u610f React.forwardRef \u56de\u8c03\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570 \u201cref\u201d\u3002</span>\n  <span class=\"token comment\">// \u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a\u5e38\u89c4 prop \u5c5e\u6027\u4f20\u9012\u7ed9 LogProps\uff0c\u4f8b\u5982 \u201cforwardedRef\u201d</span>\n  <span class=\"token comment\">// \u7136\u540e\u5b83\u5c31\u53ef\u4ee5\u88ab\u6302\u8f7d\u5230\u88ab LogProps \u5305\u88f9\u7684\u5b50\u7ec4\u4ef6\u4e0a\u3002</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogProps</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">forwardedRef</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<h2 id=\"displaying-a-custom-name-in-devtools\"><a class=\"anchor\" href=\"/react/forwarding-refs#displaying-a-custom-name-in-devtools\"></a>\u5728 DevTools \u4e2d\u663e\u793a\u81ea\u5b9a\u4e49\u540d\u79f0 </h2>\n<p><code class=\"language-javascript\">React.forwardRef</code> \u63a5\u53d7\u4e00\u4e2a\u6e32\u67d3\u51fd\u6570\u3002React DevTools \u4f7f\u7528\u8be5\u51fd\u6570\u6765\u51b3\u5b9a\u4e3a ref \u8f6c\u53d1\u7ec4\u4ef6\u663e\u793a\u7684\u5185\u5bb9\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u7ec4\u4ef6\u5c06\u5728 DevTools \u4e2d\u663e\u793a\u4e3a \u201c<em>ForwardRef</em>\u201d\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> WrappedComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogProps</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">forwardedRef</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p>\u5982\u679c\u4f60\u547d\u540d\u4e86\u6e32\u67d3\u51fd\u6570\uff0cDevTools \u4e5f\u5c06\u5305\u542b\u5176\u540d\u79f0\uff08\u4f8b\u5982 \u201c<em>ForwardRef(myFunction)</em>\u201d\uff09\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> WrappedComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogProps</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">forwardedRef</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p>\u4f60\u751a\u81f3\u53ef\u4ee5\u8bbe\u7f6e\u51fd\u6570\u7684 <code class=\"language-javascript\">displayName</code> \u5c5e\u6027\u6765\u5305\u542b\u88ab\u5305\u88f9\u7ec4\u4ef6\u7684\u540d\u79f0\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">LogProps</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogProps</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">forwardedRef</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// \u5728 DevTools \u4e2d\u4e3a\u8be5\u7ec4\u4ef6\u63d0\u4f9b\u4e00\u4e2a\u66f4\u6709\u7528\u7684\u663e\u793a\u540d\u3002</span>\n  <span class=\"token comment\">// \u4f8b\u5982 \u201cForwardRef(logProps(MyComponent))\u201d</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> Component<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">||</span> Component<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  forwardRef<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">logProps(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span>forwardRef<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/forwarding-refs.md\">Edit this page</a></p></div></article>", "path": "/react/forwarding-refs", "nav": ["/react/error-boundaries", "/react/fragments"]}, {"key": "Fragments", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u4e2d\u7684\u4e00\u4e2a\u5e38\u89c1\u6a21\u5f0f\u662f\u4e00\u4e2a\u7ec4\u4ef6\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\u3002Fragments \u5141\u8bb8\u4f60\u5c06\u5b50\u5217\u8868\u5206\u7ec4\uff0c\u800c\u65e0\u9700\u5411 DOM \u6dfb\u52a0\u989d\u5916\u8282\u70b9\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildA</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildB</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildC</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd8\u6709\u4e00\u79cd\u65b0\u7684<a href=\"/react/fragments#short-syntax\">\u77ed\u8bed\u6cd5</a>\u53ef\u7528\u4e8e\u58f0\u660e\u5b83\u4eec\u3002</p>\n<h2 id=\"motivation\"><a class=\"anchor\" href=\"/react/fragments#motivation\"></a>\u52a8\u673a </h2>\n<p>\u4e00\u79cd\u5e38\u89c1\u6a21\u5f0f\u662f\u7ec4\u4ef6\u8fd4\u56de\u4e00\u4e2a\u5b50\u5143\u7d20\u5217\u8868\u3002\u4ee5\u6b64 React \u4ee3\u7801\u7247\u6bb5\u4e3a\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Table</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Columns</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">&lt;Columns /&gt;</code> \u9700\u8981\u8fd4\u56de\u591a\u4e2a <code class=\"language-javascript\">&lt;td&gt;</code> \u5143\u7d20\u4ee5\u4f7f\u6e32\u67d3\u7684 HTML \u6709\u6548\u3002\u5982\u679c\u5728 <code class=\"language-javascript\">&lt;Columns /&gt;</code> \u7684 <code class=\"language-javascript\">render()</code> \u4e2d\u4f7f\u7528\u4e86\u7236 div\uff0c\u5219\u751f\u6210\u7684 HTML \u5c06\u65e0\u6548\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Columns</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5f97\u5230\u4e00\u4e2a <code class=\"language-javascript\">&lt;Table /&gt;</code> \u8f93\u51fa\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>Fragments \u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</p>\n<h2 id=\"usage\"><a class=\"anchor\" href=\"/react/fragments#usage\"></a>\u7528\u6cd5 </h2>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Columns</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u6837\u53ef\u4ee5\u6b63\u786e\u7684\u8f93\u51fa <code class=\"language-javascript\">&lt;Table /&gt;</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>table</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>tr</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>tr</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>table</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<h3 id=\"short-syntax\"><a class=\"anchor\" href=\"/react/fragments#short-syntax\"></a>\u77ed\u8bed\u6cd5 </h3>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e00\u79cd\u65b0\u7684\uff0c\u4e14\u66f4\u7b80\u77ed\u7684\u8bed\u6cd5\u6765\u58f0\u660e Fragments\u3002\u5b83\u770b\u8d77\u6765\u50cf\u7a7a\u6807\u7b7e\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Columns</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>td</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u50cf\u4f7f\u7528\u5176\u4ed6\u4efb\u610f\u5143\u7d20\u4e00\u6837\u4f7f\u7528 <code class=\"language-javascript\">&lt;&gt; &lt;/&gt;</code>\uff0c\u4f46\u5b83\u5e76\u4e0d\u652f\u6301 key \u6216\u5c5e\u6027\u3002</p>\n<h3 id=\"keyed-fragments\"><a class=\"anchor\" href=\"/react/fragments#keyed-fragments\"></a>\u5e26 key \u7684 Fragments </h3>\n<p>\u4f7f\u7528\u663e\u5f0f <code class=\"language-javascript\">&lt;React.Fragment&gt;</code> \u8bed\u6cd5\u58f0\u660e\u7684\u7247\u6bb5\u53ef\u80fd\u5177\u6709 key\u3002\u4e00\u4e2a\u4f7f\u7528\u573a\u666f\u662f\u5c06\u4e00\u4e2a\u96c6\u5408\u6620\u5c04\u5230\u4e00\u4e2a Fragments \u6570\u7ec4 - \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u521b\u5efa\u4e00\u4e2a\u63cf\u8ff0\u5217\u8868\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Glossary</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token comment\">// \u6ca1\u6709`key`\uff0cReact \u4f1a\u53d1\u51fa\u4e00\u4e2a\u5173\u952e\u8b66\u544a</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Fragment</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>term<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">key</code> \u662f\u552f\u4e00\u53ef\u4ee5\u4f20\u9012\u7ed9 <code class=\"language-javascript\">Fragment</code> \u7684\u5c5e\u6027\u3002\u672a\u6765\u6211\u4eec\u53ef\u80fd\u4f1a\u6dfb\u52a0\u5bf9\u5176\u4ed6\u5c5e\u6027\u7684\u652f\u6301\uff0c\u4f8b\u5982\u4e8b\u4ef6\u3002</p>\n<h3 id=\"live-demo\"><a class=\"anchor\" href=\"/react/fragments#live-demo\"></a>\u5728\u7ebf Demo </h3>\n<p>\u4f60\u53ef\u4ee5\u5728 <a class=\"external-link\" href=\"https://codepen.io/reactjs/pen/VrEbjE?editors=1000\">CodePen</a> \u4e2d\u5c1d\u8bd5\u8fd9\u4e2a\u65b0\u7684 JSX Fragment \u8bed\u6cd5\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/fragments.md\">Edit this page</a></p></div></article>", "path": "/react/fragments", "nav": ["/react/forwarding-refs", "/react/higher-order-components"]}, {"key": "\u9ad8\u9636\u7ec4\u4ef6", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u9ad8\u9636\u7ec4\u4ef6\uff08HOC\uff09\u662f React \u4e2d\u7528\u4e8e\u590d\u7528\u7ec4\u4ef6\u903b\u8f91\u7684\u4e00\u79cd\u9ad8\u7ea7\u6280\u5de7\u3002HOC \u81ea\u8eab\u4e0d\u662f React API \u7684\u4e00\u90e8\u5206\uff0c\u5b83\u662f\u4e00\u79cd\u57fa\u4e8e React \u7684\u7ec4\u5408\u7279\u6027\u800c\u5f62\u6210\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002</p>\n<p>\u5177\u4f53\u800c\u8a00\uff0c<strong>\u9ad8\u9636\u7ec4\u4ef6\u662f\u53c2\u6570\u4e3a\u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u4e3a\u65b0\u7ec4\u4ef6\u7684\u51fd\u6570\u3002</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> EnhancedComponent <span class=\"token operator\">=</span> <span class=\"token function\">higherOrderComponent</span><span class=\"token punctuation\">(</span>WrappedComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7ec4\u4ef6\u662f\u5c06 props \u8f6c\u6362\u4e3a UI\uff0c\u800c\u9ad8\u9636\u7ec4\u4ef6\u662f\u5c06\u7ec4\u4ef6\u8f6c\u6362\u4e3a\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u3002</p>\n<p>HOC \u5728 React \u7684\u7b2c\u4e09\u65b9\u5e93\u4e2d\u5f88\u5e38\u89c1\uff0c\u4f8b\u5982 Redux \u7684 <a class=\"external-link\" href=\"https://github.com/reduxjs/react-redux/blob/master/docs/api/connect.md#connect\"><code class=\"language-javascript\">connect</code></a> \u548c Relay \u7684 <a class=\"external-link\" href=\"https://relay.dev/docs/v10.1.3/fragment-container/#createfragmentcontainer\"><code class=\"language-javascript\">createFragmentContainer</code></a>\u3002</p>\n<p>\u5728\u672c\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e3a\u4ec0\u4e48\u9ad8\u9636\u7ec4\u4ef6\u6709\u7528\uff0c\u4ee5\u53ca\u5982\u4f55\u7f16\u5199\u81ea\u5df1\u7684 HOC \u51fd\u6570\u3002</p>\n<h2 id=\"use-hocs-for-crossing-cutting-concerns\"><a class=\"anchor\" href=\"/react/higher-order-components#use-hocs-for-crossing-cutting-concerns\"></a>\u4f7f\u7528 HOC \u89e3\u51b3\u6a2a\u5207\u5173\u6ce8\u70b9\u95ee\u9898 </h2>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6211\u4eec\u4e4b\u524d\u5efa\u8bae\u4f7f\u7528 mixins \u7528\u4e8e\u89e3\u51b3\u6a2a\u5207\u5173\u6ce8\u70b9\u76f8\u5173\u7684\u95ee\u9898\u3002\u4f46\u6211\u4eec\u5df2\u7ecf\u610f\u8bc6\u5230 mixins \u4f1a\u4ea7\u751f\u66f4\u591a\u9ebb\u70e6\u3002<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2016/07/13/mixins-considered-harmful.html\">\u9605\u8bfb\u66f4\u591a</a> \u4ee5\u4e86\u89e3\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u629b\u5f03 mixins \u4ee5\u53ca\u5982\u4f55\u8f6c\u6362\u73b0\u6709\u7ec4\u4ef6\u3002</p>\n</div>\n<p>\u7ec4\u4ef6\u662f React \u4e2d\u4ee3\u7801\u590d\u7528\u7684\u57fa\u672c\u5355\u5143\u3002\u4f46\u4f60\u4f1a\u53d1\u73b0\u67d0\u4e9b\u6a21\u5f0f\u5e76\u4e0d\u9002\u5408\u4f20\u7edf\u7ec4\u4ef6\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a <code class=\"language-javascript\">CommentList</code> \u7ec4\u4ef6\uff0c\u5b83\u8ba2\u9605\u5916\u90e8\u6570\u636e\u6e90\uff0c\u7528\u4ee5\u6e32\u67d3\u8bc4\u8bba\u5217\u8868\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CommentList</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u5047\u8bbe \"DataSource\" \u662f\u4e2a\u5168\u5c40\u8303\u56f4\u5185\u7684\u6570\u636e\u6e90\u53d8\u91cf</span>\n      <span class=\"token literal-property property\">comments</span><span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">getComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u8ba2\u9605\u66f4\u6539</span>\n    DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">addChangeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u6e05\u9664\u8ba2\u9605</span>\n    DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">removeChangeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5f53\u6570\u636e\u6e90\u66f4\u65b0\u65f6\uff0c\u66f4\u65b0\u7ec4\u4ef6\u72b6\u6001</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">comments</span><span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">getComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>comments<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">comment</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Comment</span></span> <span class=\"token attr-name\">comment</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>comment<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7a0d\u540e\uff0c\u7f16\u5199\u4e86\u4e00\u4e2a\u7528\u4e8e\u8ba2\u9605\u5355\u4e2a\u535a\u5ba2\u5e16\u5b50\u7684\u7ec4\u4ef6\uff0c\u8be5\u5e16\u5b50\u9075\u5faa\u7c7b\u4f3c\u7684\u6a21\u5f0f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BlogPost</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">blogPost</span><span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">getBlogPost</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">addChangeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">removeChangeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">blogPost</span><span class=\"token operator\">:</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">getBlogPost</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TextBlock</span></span> <span class=\"token attr-name\">text</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>blogPost<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">CommentList</code> \u548c <code class=\"language-javascript\">BlogPost</code> \u4e0d\u540c - \u5b83\u4eec\u5728 <code class=\"language-javascript\">DataSource</code> \u4e0a\u8c03\u7528\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u4e14\u6e32\u67d3\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u4f46\u5b83\u4eec\u7684\u5927\u90e8\u5206\u5b9e\u73b0\u90fd\u662f\u4e00\u6837\u7684\uff1a</p>\n<ul>\n<li>\u5728\u6302\u8f7d\u65f6\uff0c\u5411 <code class=\"language-javascript\">DataSource</code> \u6dfb\u52a0\u4e00\u4e2a\u66f4\u6539\u4fa6\u542c\u5668\u3002</li>\n<li>\u5728\u4fa6\u542c\u5668\u5185\u90e8\uff0c\u5f53\u6570\u636e\u6e90\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8c03\u7528 <code class=\"language-javascript\">setState</code>\u3002</li>\n<li>\u5728\u5378\u8f7d\u65f6\uff0c\u5220\u9664\u4fa6\u542c\u5668\u3002</li>\n</ul>\n<p>\u4f60\u53ef\u4ee5\u60f3\u8c61\uff0c\u5728\u4e00\u4e2a\u5927\u578b\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u8fd9\u79cd\u8ba2\u9605 <code class=\"language-javascript\">DataSource</code> \u548c\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u7684\u6a21\u5f0f\u5c06\u4e00\u6b21\u53c8\u4e00\u6b21\u5730\u53d1\u751f\u3002\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u62bd\u8c61\uff0c\u5141\u8bb8\u6211\u4eec\u5728\u4e00\u4e2a\u5730\u65b9\u5b9a\u4e49\u8fd9\u4e2a\u903b\u8f91\uff0c\u5e76\u5728\u8bb8\u591a\u7ec4\u4ef6\u4e4b\u95f4\u5171\u4eab\u5b83\u3002\u8fd9\u6b63\u662f\u9ad8\u9636\u7ec4\u4ef6\u64c5\u957f\u7684\u5730\u65b9\u3002</p>\n<p>\u5bf9\u4e8e\u8ba2\u9605\u4e86 <code class=\"language-javascript\">DataSource</code> \u7684\u7ec4\u4ef6\uff0c\u6bd4\u5982 <code class=\"language-javascript\">CommentList</code> \u548c <code class=\"language-javascript\">BlogPost</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a\u521b\u5efa\u7ec4\u4ef6\u51fd\u6570\u3002\u8be5\u51fd\u6570\u5c06\u63a5\u53d7\u4e00\u4e2a\u5b50\u7ec4\u4ef6\u4f5c\u4e3a\u5b83\u7684\u5176\u4e2d\u4e00\u4e2a\u53c2\u6570\uff0c\u8be5\u5b50\u7ec4\u4ef6\u5c06\u8ba2\u9605\u6570\u636e\u4f5c\u4e3a prop\u3002\u8ba9\u6211\u4eec\u8c03\u7528\u51fd\u6570 <code class=\"language-javascript\">withSubscription</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CommentListWithSubscription <span class=\"token operator\">=</span> <span class=\"token function\">withSubscription</span><span class=\"token punctuation\">(</span>\n  CommentList<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">DataSource</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">getComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> BlogPostWithSubscription <span class=\"token operator\">=</span> <span class=\"token function\">withSubscription</span><span class=\"token punctuation\">(</span>\n  BlogPost<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">DataSource<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">getBlogPost</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u88ab\u5305\u88c5\u7ec4\u4ef6\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\u901a\u8fc7 <code class=\"language-javascript\">DataSource</code> \u548c\u5f53\u524d\u7684 props \u8fd4\u56de\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\u3002</p>\n<p>\u5f53\u6e32\u67d3 <code class=\"language-javascript\">CommentListWithSubscription</code> \u548c <code class=\"language-javascript\">BlogPostWithSubscription</code> \u65f6\uff0c <code class=\"language-javascript\">CommentList</code> \u548c <code class=\"language-javascript\">BlogPost</code> \u5c06\u4f20\u9012\u4e00\u4e2a <code class=\"language-javascript\">data</code> prop\uff0c\u5176\u4e2d\u5305\u542b\u4ece <code class=\"language-javascript\">DataSource</code> \u68c0\u7d22\u5230\u7684\u6700\u65b0\u6570\u636e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u6b64\u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u7ec4\u4ef6...</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">withSubscription</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent<span class=\"token punctuation\">,</span> selectData</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...\u5e76\u8fd4\u56de\u53e6\u4e00\u4e2a\u7ec4\u4ef6...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> React<span class=\"token punctuation\">.</span>Component <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token function\">selectData</span><span class=\"token punctuation\">(</span>DataSource<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ...\u8d1f\u8d23\u8ba2\u9605\u76f8\u5173\u7684\u64cd\u4f5c...</span>\n      DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">addChangeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      DataSource<span class=\"token punctuation\">.</span><span class=\"token function\">removeChangeListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token function\">selectData</span><span class=\"token punctuation\">(</span>DataSource<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ... \u5e76\u4f7f\u7528\u65b0\u6570\u636e\u6e32\u67d3\u88ab\u5305\u88c5\u7684\u7ec4\u4ef6!</span>\n      <span class=\"token comment\">// \u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u53ef\u80fd\u8fd8\u4f1a\u4f20\u9012\u5176\u4ed6\u5c5e\u6027</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0cHOC \u4e0d\u4f1a\u4fee\u6539\u4f20\u5165\u7684\u7ec4\u4ef6\uff0c\u4e5f\u4e0d\u4f1a\u4f7f\u7528\u7ee7\u627f\u6765\u590d\u5236\u5176\u884c\u4e3a\u3002\u76f8\u53cd\uff0cHOC \u901a\u8fc7\u5c06\u7ec4\u4ef6<em>\u5305\u88c5</em>\u5728\u5bb9\u5668\u7ec4\u4ef6\u4e2d\u6765<em>\u7ec4\u6210</em>\u65b0\u7ec4\u4ef6\u3002HOC \u662f\u7eaf\u51fd\u6570\uff0c\u6ca1\u6709\u526f\u4f5c\u7528\u3002</p>\n<p>\u88ab\u5305\u88c5\u7ec4\u4ef6\u63a5\u6536\u6765\u81ea\u5bb9\u5668\u7ec4\u4ef6\u7684\u6240\u6709 prop\uff0c\u540c\u65f6\u4e5f\u63a5\u6536\u4e00\u4e2a\u65b0\u7684\u7528\u4e8e render \u7684 <code class=\"language-javascript\">data</code> prop\u3002HOC \u4e0d\u9700\u8981\u5173\u5fc3\u6570\u636e\u7684\u4f7f\u7528\u65b9\u5f0f\u6216\u539f\u56e0\uff0c\u800c\u88ab\u5305\u88c5\u7ec4\u4ef6\u4e5f\u4e0d\u9700\u8981\u5173\u5fc3\u6570\u636e\u662f\u600e\u4e48\u6765\u7684\u3002</p>\n<p>\u56e0\u4e3a <code class=\"language-javascript\">withSubscription</code> \u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5bf9\u53c2\u6570\u8fdb\u884c\u589e\u6dfb\u6216\u8005\u5220\u9664\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u4f7f <code class=\"language-javascript\">data</code> prop \u7684\u540d\u79f0\u53ef\u914d\u7f6e\uff0c\u4ee5\u8fdb\u4e00\u6b65\u5c06 HOC \u4e0e\u5305\u88c5\u7ec4\u4ef6\u9694\u79bb\u5f00\u6765\u3002\u6216\u8005\u4f60\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u914d\u7f6e <code class=\"language-javascript\">shouldComponentUpdate</code> \u7684\u53c2\u6570\uff0c\u6216\u8005\u4e00\u4e2a\u914d\u7f6e\u6570\u636e\u6e90\u7684\u53c2\u6570\u3002\u56e0\u4e3a HOC \u53ef\u4ee5\u63a7\u5236\u7ec4\u4ef6\u7684\u5b9a\u4e49\u65b9\u5f0f\uff0c\u8fd9\u4e00\u5207\u90fd\u53d8\u5f97\u6709\u53ef\u80fd\u3002</p>\n<p>\u4e0e\u666e\u901a\u7ec4\u4ef6\u4e00\u6837\uff0c<code class=\"language-javascript\">withSubscription</code> \u548c\u5305\u88c5\u7ec4\u4ef6\u4e4b\u95f4\u7684\u5951\u7ea6\u5b8c\u5168\u57fa\u4e8e\u4e4b\u95f4\u4f20\u9012\u7684 props\u3002\u8fd9\u79cd\u4f9d\u8d56\u65b9\u5f0f\u4f7f\u5f97\u66ff\u6362 HOC \u53d8\u5f97\u5bb9\u6613\uff0c\u53ea\u8981\u5b83\u4eec\u4e3a\u5305\u88c5\u7684\u7ec4\u4ef6\u63d0\u4f9b\u76f8\u540c\u7684 prop \u5373\u53ef\u3002\u4f8b\u5982\u4f60\u9700\u8981\u6539\u7528\u5176\u4ed6\u5e93\u6765\u83b7\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0c\u8fd9\u4e00\u70b9\u5c31\u5f88\u6709\u7528\u3002</p>\n<h2 id=\"dont-mutate-the-original-component-use-composition\"><a class=\"anchor\" href=\"/react/higher-order-components#dont-mutate-the-original-component-use-composition\"></a>\u4e0d\u8981\u6539\u53d8\u539f\u59cb\u7ec4\u4ef6\uff0c\u800c\u5e94\u8be5\u4f7f\u7528\u7ec4\u5408\u3002 </h2>\n<p>\u4e0d\u8981\u8bd5\u56fe\u5728 HOC \u4e2d\u4fee\u6539\u7ec4\u4ef6\u539f\u578b\uff08\u6216\u4ee5\u5176\u4ed6\u65b9\u5f0f\u6539\u53d8\u5b83\uff09\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">InputComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">InputComponent</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">componentDidUpdate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Current props: '</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Previous props: '</span><span class=\"token punctuation\">,</span> prevProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// \u8fd4\u56de\u539f\u59cb\u7684 input \u7ec4\u4ef6\uff0c\u6697\u793a\u5b83\u5df2\u7ecf\u88ab\u4fee\u6539\u3002</span>\n  <span class=\"token keyword\">return</span> InputComponent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u6bcf\u6b21\u8c03\u7528 logProps \u65f6\uff0c\u589e\u5f3a\u7ec4\u4ef6\u90fd\u4f1a\u6709 log \u8f93\u51fa\u3002</span>\n<span class=\"token keyword\">const</span> EnhancedComponent <span class=\"token operator\">=</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span>InputComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u6837\u505a\u4f1a\u4ea7\u751f\u4e00\u4e9b\u4e0d\u826f\u540e\u679c\u3002\u5176\u4e00\u662f\u8f93\u5165\u7ec4\u4ef6\u518d\u4e5f\u65e0\u6cd5\u50cf HOC \u589e\u5f3a\u4e4b\u524d\u90a3\u6837\u4f7f\u7528\u4e86\u3002\u66f4\u4e25\u91cd\u7684\u662f\uff0c\u5982\u679c\u4f60\u518d\u7528\u53e6\u4e00\u4e2a\u540c\u6837\u4f1a\u4fee\u6539 <code class=\"language-javascript\">componentDidUpdate</code> \u7684 HOC \u589e\u5f3a\u5b83\uff0c\u90a3\u4e48\u524d\u9762\u7684 HOC \u5c31\u4f1a\u5931\u6548\uff01\u540c\u65f6\uff0c\u8fd9\u4e2a HOC \u4e5f\u65e0\u6cd5\u5e94\u7528\u4e8e\u6ca1\u6709\u751f\u547d\u5468\u671f\u7684\u51fd\u6570\u7ec4\u4ef6\u3002</p>\n<p>\u4fee\u6539\u4f20\u5165\u7ec4\u4ef6\u7684 HOC \u662f\u4e00\u79cd\u7cdf\u7cd5\u7684\u62bd\u8c61\u65b9\u5f0f\u3002\u8c03\u7528\u8005\u5fc5\u987b\u77e5\u9053\u4ed6\u4eec\u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff0c\u4ee5\u907f\u514d\u4e0e\u5176\u4ed6 HOC \u53d1\u751f\u51b2\u7a81\u3002</p>\n<p>HOC \u4e0d\u5e94\u8be5\u4fee\u6539\u4f20\u5165\u7ec4\u4ef6\uff0c\u800c\u5e94\u8be5\u4f7f\u7528\u7ec4\u5408\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7\u5c06\u7ec4\u4ef6\u5305\u88c5\u5728\u5bb9\u5668\u7ec4\u4ef6\u4e2d\u5b9e\u73b0\u529f\u80fd\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">logProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> React<span class=\"token punctuation\">.</span>Component <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Current props: '</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Previous props: '</span><span class=\"token punctuation\">,</span> prevProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u5c06 input \u7ec4\u4ef6\u5305\u88c5\u5728\u5bb9\u5668\u4e2d\uff0c\u800c\u4e0d\u5bf9\u5176\u8fdb\u884c\u4fee\u6539\u3002Good!</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8be5 HOC \u4e0e\u4e0a\u6587\u4e2d\u4fee\u6539\u4f20\u5165\u7ec4\u4ef6\u7684 HOC \u529f\u80fd\u76f8\u540c\uff0c\u540c\u65f6\u907f\u514d\u4e86\u51fa\u73b0\u51b2\u7a81\u7684\u60c5\u51b5\u3002\u5b83\u540c\u6837\u9002\u7528\u4e8e class \u7ec4\u4ef6\u548c\u51fd\u6570\u7ec4\u4ef6\u3002\u800c\u4e14\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u4e0e\u5176\u4ed6 HOC \u7ec4\u5408\uff0c\u751a\u81f3\u53ef\u4ee5\u4e0e\u5176\u81ea\u8eab\u7ec4\u5408\u3002</p>\n<p>\u60a8\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230 HOC \u4e0e<strong>\u5bb9\u5668\u7ec4\u4ef6\u6a21\u5f0f</strong>\u4e4b\u95f4\u6709\u76f8\u4f3c\u4e4b\u5904\u3002\u5bb9\u5668\u7ec4\u4ef6\u62c5\u4efb\u5c06\u9ad8\u7ea7\u548c\u4f4e\u7ea7\u5173\u6ce8\u70b9\u5206\u79bb\u7684\u8d23\u4efb\uff0c\u7531\u5bb9\u5668\u7ba1\u7406\u8ba2\u9605\u548c\u72b6\u6001\uff0c\u5e76\u5c06 prop \u4f20\u9012\u7ed9\u5904\u7406 UI \u7684\u7ec4\u4ef6\u3002HOC \u4f7f\u7528\u5bb9\u5668\u4f5c\u4e3a\u5176\u5b9e\u73b0\u7684\u4e00\u90e8\u5206\uff0c\u4f60\u53ef\u4ee5\u5c06 HOC \u89c6\u4e3a\u53c2\u6570\u5316\u5bb9\u5668\u7ec4\u4ef6\u3002</p>\n<h2 id=\"convention-pass-unrelated-props-through-to-wrapped-component\"><a class=\"anchor\" href=\"/react/higher-order-components#convention-pass-unrelated-props-through-to-wrapped-component\"></a>\u7ea6\u5b9a\uff1a\u5c06\u4e0d\u76f8\u5173\u7684 props \u4f20\u9012\u7ed9\u88ab\u5305\u88f9\u7684\u7ec4\u4ef6 </h2>\n<p>HOC \u4e3a\u7ec4\u4ef6\u6dfb\u52a0\u7279\u6027\u3002\u81ea\u8eab\u4e0d\u5e94\u8be5\u5927\u5e45\u6539\u53d8\u7ea6\u5b9a\u3002HOC \u8fd4\u56de\u7684\u7ec4\u4ef6\u4e0e\u539f\u7ec4\u4ef6\u5e94\u4fdd\u6301\u7c7b\u4f3c\u7684\u63a5\u53e3\u3002</p>\n<p>HOC \u5e94\u8be5\u900f\u4f20\u4e0e\u81ea\u8eab\u65e0\u5173\u7684 props\u3002\u5927\u591a\u6570 HOC \u90fd\u5e94\u8be5\u5305\u542b\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684 render \u65b9\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u8fc7\u6ee4\u6389\u975e\u6b64 HOC \u989d\u5916\u7684 props\uff0c\u4e14\u4e0d\u8981\u8fdb\u884c\u900f\u4f20</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> extraProp<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>passThroughProps <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u5c06 props \u6ce8\u5165\u5230\u88ab\u5305\u88c5\u7684\u7ec4\u4ef6\u4e2d\u3002</span>\n  <span class=\"token comment\">// \u901a\u5e38\u4e3a state \u7684\u503c\u6216\u8005\u5b9e\u4f8b\u65b9\u6cd5\u3002</span>\n  <span class=\"token keyword\">const</span> injectedProp <span class=\"token operator\">=</span> someStateOrInstanceMethod<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u5c06 props \u4f20\u9012\u7ed9\u88ab\u5305\u88c5\u7ec4\u4ef6</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span>\n      <span class=\"token attr-name\">injectedProp</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>injectedProp<span class=\"token punctuation\">}</span></span>\n      <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>passThroughProps<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u79cd\u7ea6\u5b9a\u4fdd\u8bc1\u4e86 HOC \u7684\u7075\u6d3b\u6027\u4ee5\u53ca\u53ef\u590d\u7528\u6027\u3002</p>\n<h2 id=\"convention-maximizing-composability\"><a class=\"anchor\" href=\"/react/higher-order-components#convention-maximizing-composability\"></a>\u7ea6\u5b9a\uff1a\u6700\u5927\u5316\u53ef\u7ec4\u5408\u6027 </h2>\n<p>\u5e76\u4e0d\u662f\u6240\u6709\u7684 HOC \u90fd\u4e00\u6837\u3002\u6709\u65f6\u5019\u5b83\u4ec5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u4e5f\u5c31\u662f\u88ab\u5305\u88f9\u7684\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> NavbarWithRouter <span class=\"token operator\">=</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>Navbar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>HOC \u901a\u5e38\u53ef\u4ee5\u63a5\u6536\u591a\u4e2a\u53c2\u6570\u3002\u6bd4\u5982\u5728 Relay \u4e2d\uff0cHOC \u989d\u5916\u63a5\u6536\u4e86\u4e00\u4e2a\u914d\u7f6e\u5bf9\u8c61\u7528\u4e8e\u6307\u5b9a\u7ec4\u4ef6\u7684\u6570\u636e\u4f9d\u8d56\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> CommentWithRelay <span class=\"token operator\">=</span> Relay<span class=\"token punctuation\">.</span><span class=\"token function\">createContainer</span><span class=\"token punctuation\">(</span>Comment<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6700\u5e38\u89c1\u7684 HOC \u7b7e\u540d\u5982\u4e0b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// React Redux \u7684 `connect` \u51fd\u6570</span>\n<span class=\"token keyword\">const</span> ConnectedComment <span class=\"token operator\">=</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>commentSelector<span class=\"token punctuation\">,</span> commentActions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>CommentList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>\u521a\u521a\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f\uff01</em>\u5982\u679c\u4f60\u628a\u5b83\u5206\u5f00\uff0c\u5c31\u4f1a\u66f4\u5bb9\u6613\u770b\u51fa\u53d1\u751f\u4e86\u4ec0\u4e48\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// connect \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u4e3a\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\u3002</span>\n<span class=\"token keyword\">const</span> enhance <span class=\"token operator\">=</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>commentListSelector<span class=\"token punctuation\">,</span> commentListActions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \u8fd4\u56de\u503c\u4e3a HOC\uff0c\u5b83\u4f1a\u8fd4\u56de\u5df2\u7ecf\u8fde\u63a5 Redux store \u7684\u7ec4\u4ef6</span>\n<span class=\"token keyword\">const</span> ConnectedComment <span class=\"token operator\">=</span> <span class=\"token function\">enhance</span><span class=\"token punctuation\">(</span>CommentList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6362\u53e5\u8bdd\u8bf4\uff0c<code class=\"language-javascript\">connect</code> \u662f\u4e00\u4e2a\u8fd4\u56de\u9ad8\u9636\u7ec4\u4ef6\u7684\u9ad8\u9636\u51fd\u6570\uff01</p>\n<p>\u8fd9\u79cd\u5f62\u5f0f\u53ef\u80fd\u770b\u8d77\u6765\u4ee4\u4eba\u56f0\u60d1\u6216\u4e0d\u5fc5\u8981\uff0c\u4f46\u5b83\u6709\u4e00\u4e2a\u6709\u7528\u7684\u5c5e\u6027\u3002 \u50cf <code class=\"language-javascript\">connect</code> \u51fd\u6570\u8fd4\u56de\u7684\u5355\u53c2\u6570 HOC \u5177\u6709\u7b7e\u540d <code class=\"language-javascript\">Component =&gt; Component</code>\u3002 \u8f93\u51fa\u7c7b\u578b\u4e0e\u8f93\u5165\u7c7b\u578b\u76f8\u540c\u7684\u51fd\u6570\u5f88\u5bb9\u6613\u7ec4\u5408\u5728\u4e00\u8d77\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u4e0d\u63a8\u8350\u5982\u4e0b\u5199\u6cd5...</span>\n<span class=\"token keyword\">const</span> EnhancedComponent <span class=\"token operator\">=</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>commentSelector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>WrappedComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// ... \u5efa\u8bae\u7f16\u5199\u7ec4\u5408\u5de5\u5177\u51fd\u6570</span>\n<span class=\"token comment\">// compose(f, g, h) \u7b49\u540c\u4e8e (...args) =&gt; f(g(h(...args)))</span>\n<span class=\"token keyword\">const</span> enhance <span class=\"token operator\">=</span> <span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>\n  <span class=\"token comment\">// \u8fd9\u4e9b\u90fd\u662f\u5355\u53c2\u6570\u7684 HOC</span>\n  withRouter<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>commentSelector<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> EnhancedComponent <span class=\"token operator\">=</span> <span class=\"token function\">enhance</span><span class=\"token punctuation\">(</span>WrappedComponent<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\uff08\u540c\u6837\u7684\u5c5e\u6027\u4e5f\u5141\u8bb8 <code class=\"language-javascript\">connect</code> \u548c\u5176\u4ed6 HOC \u627f\u62c5\u88c5\u9970\u5668\u7684\u89d2\u8272\uff0c\u88c5\u9970\u5668\u662f\u4e00\u4e2a\u5b9e\u9a8c\u6027\u7684 JavaScript \u63d0\u6848\u3002\uff09</p>\n<p>\u8bb8\u591a\u7b2c\u4e09\u65b9\u5e93\u90fd\u63d0\u4f9b\u4e86 <code class=\"language-javascript\">compose</code> \u5de5\u5177\u51fd\u6570\uff0c\u5305\u62ec lodash \uff08\u6bd4\u5982 <a class=\"external-link\" href=\"https://lodash.com/docs/#flowRight\"><code class=\"language-javascript\">lodash.flowRight</code></a>\uff09\uff0c <a class=\"external-link\" href=\"https://redux.js.org/api/compose\">Redux</a> \u548c <a class=\"external-link\" href=\"https://ramdajs.com/docs/#compose\">Ramda</a>\u3002</p>\n<h2 id=\"convention-wrap-the-display-name-for-easy-debugging\"><a class=\"anchor\" href=\"/react/higher-order-components#convention-wrap-the-display-name-for-easy-debugging\"></a>\u7ea6\u5b9a\uff1a\u5305\u88c5\u663e\u793a\u540d\u79f0\u4ee5\u4fbf\u8f7b\u677e\u8c03\u8bd5 </h2>\n<p>HOC \u521b\u5efa\u7684\u5bb9\u5668\u7ec4\u4ef6\u4f1a\u4e0e\u4efb\u4f55\u5176\u4ed6\u7ec4\u4ef6\u4e00\u6837\uff0c\u4f1a\u663e\u793a\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-devtools\">React Developer Tools</a> \u4e2d\u3002\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u8bf7\u9009\u62e9\u4e00\u4e2a\u663e\u793a\u540d\u79f0\uff0c\u4ee5\u8868\u660e\u5b83\u662f HOC \u7684\u4ea7\u7269\u3002</p>\n<p>\u6700\u5e38\u89c1\u7684\u65b9\u5f0f\u662f\u7528 HOC \u5305\u4f4f\u88ab\u5305\u88c5\u7ec4\u4ef6\u7684\u663e\u793a\u540d\u79f0\u3002\u6bd4\u5982\u9ad8\u9636\u7ec4\u4ef6\u540d\u4e3a <code class=\"language-javascript\">withSubscription</code>\uff0c\u5e76\u4e14\u88ab\u5305\u88c5\u7ec4\u4ef6\u7684\u663e\u793a\u540d\u79f0\u4e3a <code class=\"language-javascript\">CommentList</code>\uff0c\u663e\u793a\u540d\u79f0\u5e94\u8be5\u4e3a <code class=\"language-javascript\">WithSubscription(CommentList)</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">withSubscription</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">WithSubscription</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/* ... */</span><span class=\"token punctuation\">}</span>\n  WithSubscription<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">WithSubscription(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">getDisplayName</span><span class=\"token punctuation\">(</span>WrappedComponent<span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> WithSubscription<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getDisplayName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> WrappedComponent<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">||</span> WrappedComponent<span class=\"token punctuation\">.</span>name <span class=\"token operator\">||</span> <span class=\"token string\">'Component'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"caveats\"><a class=\"anchor\" href=\"/react/higher-order-components#caveats\"></a>\u6ce8\u610f\u4e8b\u9879 </h2>\n<p>\u9ad8\u9636\u7ec4\u4ef6\u6709\u4e00\u4e9b\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\uff0c\u5bf9\u4e8e React \u65b0\u624b\u6765\u8bf4\u53ef\u80fd\u5e76\u4e0d\u5bb9\u6613\u53d1\u73b0\u3002</p>\n<h3 id=\"dont-use-hocs-inside-the-render-method\"><a class=\"anchor\" href=\"/react/higher-order-components#dont-use-hocs-inside-the-render-method\"></a>\u4e0d\u8981\u5728 render \u65b9\u6cd5\u4e2d\u4f7f\u7528 HOC </h3>\n<p>React \u7684 diff \u7b97\u6cd5\uff08\u79f0\u4e3a<a href=\"/react/reconciliation\">\u534f\u8c03</a>\uff09\u4f7f\u7528\u7ec4\u4ef6\u6807\u8bc6\u6765\u786e\u5b9a\u5b83\u662f\u5e94\u8be5\u66f4\u65b0\u73b0\u6709\u5b50\u6811\u8fd8\u662f\u5c06\u5176\u4e22\u5f03\u5e76\u6302\u8f7d\u65b0\u5b50\u6811\u3002 \u5982\u679c\u4ece <code class=\"language-javascript\">render</code> \u8fd4\u56de\u7684\u7ec4\u4ef6\u4e0e\u524d\u4e00\u4e2a\u6e32\u67d3\u4e2d\u7684\u7ec4\u4ef6\u76f8\u540c\uff08<code class=\"language-javascript\">===</code>\uff09\uff0c\u5219 React \u901a\u8fc7\u5c06\u5b50\u6811\u4e0e\u65b0\u5b50\u6811\u8fdb\u884c\u533a\u5206\u6765\u9012\u5f52\u66f4\u65b0\u5b50\u6811\u3002 \u5982\u679c\u5b83\u4eec\u4e0d\u76f8\u7b49\uff0c\u5219\u5b8c\u5168\u5378\u8f7d\u524d\u4e00\u4e2a\u5b50\u6811\u3002</p>\n<p>\u901a\u5e38\uff0c\u4f60\u4e0d\u9700\u8981\u8003\u8651\u8fd9\u70b9\u3002\u4f46\u5bf9 HOC \u6765\u8bf4\u8fd9\u4e00\u70b9\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u8fd9\u4ee3\u8868\u7740\u4f60\u4e0d\u5e94\u5728\u7ec4\u4ef6\u7684 render \u65b9\u6cd5\u4e2d\u5bf9\u4e00\u4e2a\u7ec4\u4ef6\u5e94\u7528 HOC\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u6bcf\u6b21\u8c03\u7528 render \u51fd\u6570\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 EnhancedComponent</span>\n  <span class=\"token comment\">// EnhancedComponent1 !== EnhancedComponent2</span>\n  <span class=\"token keyword\">const</span> EnhancedComponent <span class=\"token operator\">=</span> <span class=\"token function\">enhance</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// \u8fd9\u5c06\u5bfc\u81f4\u5b50\u6811\u6bcf\u6b21\u6e32\u67d3\u90fd\u4f1a\u8fdb\u884c\u5378\u8f7d\uff0c\u548c\u91cd\u65b0\u6302\u8f7d\u7684\u64cd\u4f5c\uff01</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EnhancedComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u4e0d\u4ec5\u4ec5\u662f\u6027\u80fd\u95ee\u9898 - \u91cd\u65b0\u6302\u8f7d\u7ec4\u4ef6\u4f1a\u5bfc\u81f4\u8be5\u7ec4\u4ef6\u53ca\u5176\u6240\u6709\u5b50\u7ec4\u4ef6\u7684\u72b6\u6001\u4e22\u5931\u3002</p>\n<p>\u5982\u679c\u5728\u7ec4\u4ef6\u4e4b\u5916\u521b\u5efa HOC\uff0c\u8fd9\u6837\u4e00\u6765\u7ec4\u4ef6\u53ea\u4f1a\u521b\u5efa\u4e00\u6b21\u3002\u56e0\u6b64\uff0c\u6bcf\u6b21 render \u65f6\u90fd\u4f1a\u662f\u540c\u4e00\u4e2a\u7ec4\u4ef6\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u8fd9\u8ddf\u4f60\u7684\u9884\u671f\u8868\u73b0\u662f\u4e00\u81f4\u7684\u3002</p>\n<p>\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u52a8\u6001\u8c03\u7528 HOC\u3002\u4f60\u53ef\u4ee5\u5728\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u6216\u5176\u6784\u9020\u51fd\u6570\u4e2d\u8fdb\u884c\u8c03\u7528\u3002</p>\n<h3 id=\"static-methods-must-be-copied-over\"><a class=\"anchor\" href=\"/react/higher-order-components#static-methods-must-be-copied-over\"></a>\u52a1\u5fc5\u590d\u5236\u9759\u6001\u65b9\u6cd5 </h3>\n<p>\u6709\u65f6\u5728 React \u7ec4\u4ef6\u4e0a\u5b9a\u4e49\u9759\u6001\u65b9\u6cd5\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0cRelay \u5bb9\u5668\u66b4\u9732\u4e86\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5 <code class=\"language-javascript\">getFragment</code> \u4ee5\u65b9\u4fbf\u7ec4\u5408 GraphQL \u7247\u6bb5\u3002</p>\n<p>\u4f46\u662f\uff0c\u5f53\u4f60\u5c06 HOC \u5e94\u7528\u4e8e\u7ec4\u4ef6\u65f6\uff0c\u539f\u59cb\u7ec4\u4ef6\u5c06\u4f7f\u7528\u5bb9\u5668\u7ec4\u4ef6\u8fdb\u884c\u5305\u88c5\u3002\u8fd9\u610f\u5473\u7740\u65b0\u7ec4\u4ef6\u6ca1\u6709\u539f\u59cb\u7ec4\u4ef6\u7684\u4efb\u4f55\u9759\u6001\u65b9\u6cd5\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u5b9a\u4e49\u9759\u6001\u51fd\u6570</span>\nWrappedComponent<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">staticMethod</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/*...*/</span><span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// \u73b0\u5728\u4f7f\u7528 HOC</span>\n<span class=\"token keyword\">const</span> EnhancedComponent <span class=\"token operator\">=</span> <span class=\"token function\">enhance</span><span class=\"token punctuation\">(</span>WrappedComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u589e\u5f3a\u7ec4\u4ef6\u6ca1\u6709 staticMethod</span>\n<span class=\"token keyword\">typeof</span> EnhancedComponent<span class=\"token punctuation\">.</span>staticMethod <span class=\"token operator\">===</span> <span class=\"token string\">'undefined'</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd4\u56de\u4e4b\u524d\u628a\u8fd9\u4e9b\u65b9\u6cd5\u62f7\u8d1d\u5230\u5bb9\u5668\u7ec4\u4ef6\u4e0a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">enhance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Enhance</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/*...*/</span><span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// \u5fc5\u987b\u51c6\u786e\u77e5\u9053\u5e94\u8be5\u62f7\u8d1d\u54ea\u4e9b\u65b9\u6cd5 :(</span>\n  Enhance<span class=\"token punctuation\">.</span>staticMethod <span class=\"token operator\">=</span> WrappedComponent<span class=\"token punctuation\">.</span>staticMethod<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Enhance<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f46\u8981\u8fd9\u6837\u505a\uff0c\u4f60\u9700\u8981\u77e5\u9053\u54ea\u4e9b\u65b9\u6cd5\u5e94\u8be5\u88ab\u62f7\u8d1d\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/mridgway/hoist-non-react-statics\">hoist-non-react-statics</a> \u81ea\u52a8\u62f7\u8d1d\u6240\u6709\u975e React \u9759\u6001\u65b9\u6cd5:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> hoistNonReactStatic <span class=\"token keyword\">from</span> <span class=\"token string\">'hoist-non-react-statics'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">enhance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Enhance</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span><span class=\"token comment\">/*...*/</span><span class=\"token punctuation\">}</span>\n  <span class=\"token function\">hoistNonReactStatic</span><span class=\"token punctuation\">(</span>Enhance<span class=\"token punctuation\">,</span> WrappedComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Enhance<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u9664\u4e86\u5bfc\u51fa\u7ec4\u4ef6\uff0c\u53e6\u4e00\u4e2a\u53ef\u884c\u7684\u65b9\u6848\u662f\u518d\u989d\u5916\u5bfc\u51fa\u8fd9\u4e2a\u9759\u6001\u65b9\u6cd5\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u4ee3\u66ff...</span>\nMyComponent<span class=\"token punctuation\">.</span>someFunction <span class=\"token operator\">=</span> someFunction<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyComponent<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...\u5355\u72ec\u5bfc\u51fa\u8be5\u65b9\u6cd5...</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> someFunction <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...\u5e76\u5728\u8981\u4f7f\u7528\u7684\u7ec4\u4ef6\u4e2d\uff0cimport \u5b83\u4eec</span>\n<span class=\"token keyword\">import</span> MyComponent<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> someFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./MyComponent.js'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"refs-arent-passed-through\"><a class=\"anchor\" href=\"/react/higher-order-components#refs-arent-passed-through\"></a>Refs \u4e0d\u4f1a\u88ab\u4f20\u9012 </h3>\n<p>\u867d\u7136\u9ad8\u9636\u7ec4\u4ef6\u7684\u7ea6\u5b9a\u662f\u5c06\u6240\u6709 props \u4f20\u9012\u7ed9\u88ab\u5305\u88c5\u7ec4\u4ef6\uff0c\u4f46\u8fd9\u5bf9\u4e8e refs \u5e76\u4e0d\u9002\u7528\u3002\u90a3\u662f\u56e0\u4e3a <code class=\"language-javascript\">ref</code> \u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u4e00\u4e2a prop - \u5c31\u50cf <code class=\"language-javascript\">key</code> \u4e00\u6837\uff0c\u5b83\u662f\u7531 React \u4e13\u95e8\u5904\u7406\u7684\u3002\u5982\u679c\u5c06 ref \u6dfb\u52a0\u5230 HOC \u7684\u8fd4\u56de\u7ec4\u4ef6\u4e2d\uff0c\u5219 ref \u5f15\u7528\u6307\u5411\u5bb9\u5668\u7ec4\u4ef6\uff0c\u800c\u4e0d\u662f\u88ab\u5305\u88c5\u7ec4\u4ef6\u3002</p>\n<p>\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\u662f\u901a\u8fc7\u4f7f\u7528 <code class=\"language-javascript\">React.forwardRef</code> API\uff08React 16.3 \u4e2d\u5f15\u5165\uff09\u3002<a href=\"/react/forwarding-refs\">\u524d\u5f80 ref \u8f6c\u53d1\u7ae0\u8282\u4e86\u89e3\u66f4\u591a</a>\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/higher-order-components.md\">Edit this page</a></p></div></article>", "path": "/react/higher-order-components", "nav": ["/react/fragments", "/react/integrating-with-other-libraries"]}, {"key": "\u4e0e\u7b2c\u4e09\u65b9\u5e93\u534f\u540c", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u53ef\u4ee5\u88ab\u7528\u4e8e\u4efb\u4f55 web \u5e94\u7528\u4e2d\u3002\u5b83\u53ef\u4ee5\u88ab\u5d4c\u5165\u5230\u5176\u4ed6\u5e94\u7528\uff0c\u4e14\u9700\u8981\u6ce8\u610f\uff0c\u5176\u4ed6\u7684\u5e94\u7528\u4e5f\u53ef\u4ee5\u88ab\u5d4c\u5165\u5230 React\u3002\u672c\u6307\u5357\u5c06\u4ecb\u7ecd\u4e00\u4e9b\u66f4\u5e38\u89c1\u7684\u7528\u4f8b\uff0c\u4e13\u6ce8\u4e8e\u4e0e <a class=\"external-link\" href=\"https://jquery.com/\">jQuery</a> \u548c <a class=\"external-link\" href=\"http://backbonejs.org/\">Backbone</a> \u8fdb\u884c\u6574\u5408\uff0c\u540c\u6837\u7684\u601d\u8def\u8fd8\u53ef\u4ee5\u5e94\u7528\u4e8e\u5c06\u7ec4\u4ef6\u4e0e\u4efb\u610f\u73b0\u6709\u4ee3\u7801\u96c6\u6210\u3002</p>\n<h2 id=\"integrating-with-dom-manipulation-plugins\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#integrating-with-dom-manipulation-plugins\"></a>\u96c6\u6210\u5e26\u6709 DOM \u64cd\u4f5c\u7684\u63d2\u4ef6 </h2>\n<p>React \u4e0d\u4f1a\u7406\u4f1a React \u81ea\u8eab\u4e4b\u5916\u7684 DOM \u64cd\u4f5c\u3002\u5b83\u6839\u636e\u5185\u90e8\u865a\u62df DOM \u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u66f4\u65b0\uff0c\u800c\u4e14\u5982\u679c\u540c\u4e00\u4e2a DOM \u8282\u70b9\u88ab\u53e6\u4e00\u4e2a\u5e93\u64cd\u4f5c\u4e86\uff0cReact \u4f1a\u89c9\u5f97\u56f0\u60d1\u800c\u4e14\u6ca1\u6709\u529e\u6cd5\u6062\u590d\u3002</p>\n<p>\u8fd9\u5e76\u4e0d\u610f\u5473\u7740 React \u4e0e\u5176\u4ed6\u64cd\u4f5c DOM \u7684\u65b9\u5f0f\u4e0d\u80fd\u7ed3\u5408\uff0c\u4e5f\u4e0d\u4e00\u5b9a\u7ed3\u5408\u56f0\u96be\uff0c\u53ea\u4e0d\u8fc7\u9700\u8981\u4f60\u53bb\u5173\u6ce8\u6bcf\u4e2a\u5e93\u6240\u505a\u7684\u4e8b\u60c5\u3002</p>\n<p>\u907f\u514d\u51b2\u7a81\u7684\u6700\u7b80\u5355\u65b9\u5f0f\u5c31\u662f\u9632\u6b62 React \u7ec4\u4ef6\u66f4\u65b0\u3002\u4f60\u53ef\u4ee5\u6e32\u67d3\u65e0\u9700\u66f4\u65b0\u7684 React \u5143\u7d20\uff0c\u6bd4\u5982\u4e00\u4e2a\u7a7a\u7684 <code class=\"language-javascript\">&lt;div /&gt;</code>\u3002</p>\n<h3 id=\"how-to-approach-the-problem\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#how-to-approach-the-problem\"></a>\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898 </h3>\n<p>\u4e3a\u4e86\u8bc1\u660e\u8fd9\u4e00\u70b9\uff0c\u6211\u6765\u8349\u62df\u4e00\u4e2a\u7528\u4e8e\u901a\u7528 jQuery \u63d2\u4ef6\u7684 wrapper</p>\n<p>\u6211\u4eec\u4f1a\u6dfb\u52a0\u4e00\u4e2a <a href=\"/react/refs-and-the-dom\">ref</a> \u5230\u8fd9\u4e2a\u6839 DOM \u5143\u7d20\u3002 \u5728 <code class=\"language-javascript\">componentDidMount</code> \u4e2d\uff0c\u6211\u4eec\u80fd\u591f\u83b7\u53d6\u5b83\u7684\u5f15\u7528\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u5b83\u4f20\u9012\u7ed9 jQuery \u63d2\u4ef6\u4e86\u3002</p>\n<p>\u4e3a\u4e86\u9632\u6b62 React \u5728\u6302\u8f7d\u4e4b\u540e\u53bb\u89e6\u78b0\u8fd9\u4e2a DOM\uff0c\u6211\u4eec\u4f1a\u4ece <code class=\"language-javascript\">render()</code> \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u7a7a\u7684 <code class=\"language-javascript\">&lt;div /&gt;</code>\u3002\u8fd9\u4e2a <code class=\"language-javascript\">&lt;div /&gt;</code> \u5143\u7d20\u65e2\u6ca1\u6709\u5c5e\u6027\u4e5f\u6ca1\u6709\u5b50\u5143\u7d20\uff0c\u6240\u4ee5 React \u6ca1\u6709\u7406\u7531\u53bb\u66f4\u65b0\u5b83\uff0c\u4f7f\u5f97 jQuery \u63d2\u4ef6\u53ef\u4ee5\u81ea\u7531\u7684\u7ba1\u7406\u8fd9\u90e8\u5206\u7684 DOM\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SomePlugin</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">somePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">somePlugin</span><span class=\"token punctuation\">(</span><span class=\"token string\">'destroy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> el<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\u6211\u4eec\u540c\u65f6\u5b9a\u4e49\u4e86 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> <a href=\"/react/react-component#the-component-lifecycle\">\u751f\u547d\u5468\u671f\u51fd\u6570</a>\u3002\u8bb8\u591a jQuery \u63d2\u4ef6\u7ed1\u5b9a\u4e8b\u4ef6\u76d1\u542c\u5230 DOM \u4e0a\uff0c\u6240\u4ee5\u5728 <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u6ce8\u9500\u76d1\u542c\u662f\u5f88\u91cd\u8981\u7684\u3002\u5982\u679c\u8fd9\u4e2a\u63d2\u4ef6\u6ca1\u6709\u63d0\u4f9b\u4e00\u4e2a\u7528\u4e8e\u6e05\u7406\u7684\u65b9\u6cd5\uff0c\u4f60\u5f88\u53ef\u80fd\u4f1a\u9700\u8981\u81ea\u5df1\u6765\u63d0\u4f9b\u4e00\u4e2a\uff0c\u4e3a\u4e86\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u8981\u8bb0\u5f97\u628a\u6240\u6709\u63d2\u4ef6\u6ce8\u518c\u7684\u76d1\u542c\u90fd\u79fb\u9664\u6389\u3002</p>\n<h3 id=\"integrating-with-jquery-chosen-plugin\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#integrating-with-jquery-chosen-plugin\"></a>\u96c6\u6210 jQuery Chosen \u63d2\u4ef6 </h3>\n<p>\u5bf9\u4e8e\u5e94\u7528\u8fd9\u4e9b\u6982\u5ff5\u7684\u66f4\u5177\u4f53\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u7ed9\u8fd9\u4e2a\u7528\u4e8e\u589e\u5f3a <code class=\"language-javascript\">&lt;select&gt;</code> \u8f93\u5165\u7684 <a class=\"external-link\" href=\"https://harvesthq.github.io/chosen/\">Chosen</a> \u63d2\u4ef6\u5199\u4e00\u4e2a\u6700\u5c0f\u7684 wrapper\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4ec5\u4ec5\u662f\u56e0\u4e3a\u53ef\u80fd\uff0c\u4f46\u8fd9\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u662f\u6784\u5efa React \u5e94\u7528\u7684\u6700\u4f73\u65b9\u5f0f\u3002\u6211\u4eec\u9f13\u52b1\u5927\u5bb6\u5c3d\u53ef\u80fd\u7684\u4f7f\u7528 React \u7ec4\u4ef6\u3002\u7ec4\u4ef6\u5728 React \u5e94\u7528\u4e2d\u66f4\u6613\u4e8e\u590d\u7528\uff0c\u5e76\u4e14\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u80fd\u66f4\u597d\u5730\u63a7\u5236\u5176\u884c\u4e3a\u548c\u663e\u793a\u3002</p>\n</div>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u6765\u770b\u4e0b Chosen \u5bf9 DOM \u505a\u4e86\u54ea\u4e9b\u64cd\u4f5c</p>\n<p>\u5982\u679c\u4f60\u5728\u4e00\u4e2a <code class=\"language-javascript\">&lt;select&gt;</code> DOM \u8282\u70b9\u4e0a\u8c03\u7528\u4e86\u5b83\uff0c\u5b83\u4f1a\u8bfb\u53d6\u539f DOM \u8282\u70b9\u7684\u5c5e\u6027\uff0c\u4f7f\u7528\u884c\u5185\u6837\u5f0f\u9690\u85cf\u5b83\uff0c\u7136\u540e\u7d27\u6328\u7740\u8fd9\u4e2a <code class=\"language-javascript\">&lt;select&gt;</code> \u4e4b\u540e\u589e\u52a0\u4e00\u4e2a\u72ec\u7acb\u7684\u5177\u6709\u5b83\u81ea\u8eab\u663e\u793a\u8868\u73b0\u7684 DOM \u8282\u70b9\u3002\u7136\u540e\u5b83\u4f1a\u5728\u503c\u53d8\u5316\u7684\u65f6\u5019\u89e6\u53d1 jQuery \u4e8b\u4ef6\u6765\u901a\u77e5\u6211\u4eec\u8fd9\u4e9b\u53d8\u5316\u3002</p>\n<p>\u4ee5\u4e0b\u4ee3\u7801\u662f\u6211\u4eec\u6700\u7ec8\u8981\u5b9e\u73b0\u7684\u6548\u679c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Chosen</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">vanilla</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">chocolate</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">strawberry</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Chosen</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e3a\u4e86\u7b80\u5316\uff0c\u6211\u4eec\u5c06\u5b83\u5b9e\u73b0\u4e3a <a href=\"/react/uncontrolled-components\">uncontrolled component</a></p>\n<p>\u9996\u5148\uff0c\u6211\u4f1a\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u7ec4\u4ef6\uff0c\u5b83\u7684 <code class=\"language-javascript\">render()</code> \u51fd\u6570\u6211\u4eec\u8fd4\u56de\u4e00\u4e2a\u5305\u542b <code class=\"language-javascript\">&lt;select&gt;</code> \u7684 <code class=\"language-javascript\">&lt;div&gt;</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Chosen</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Chosen-select<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> el<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">          </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u628a <code class=\"language-javascript\">&lt;select&gt;</code> \u4f7f\u7528\u4e00\u4e2a\u989d\u5916\u7684 <code class=\"language-javascript\">&lt;div&gt;</code> \u5305\u88f9\u8d77\u6765\u3002\u8fd9\u662f\u5f88\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a Chosen \u4f1a\u7d27\u6328\u7740\u6211\u4eec\u4f20\u9012\u7ed9\u5b83\u7684 <code class=\"language-javascript\">&lt;select&gt;</code> \u8282\u70b9\u8ffd\u52a0\u53e6\u4e00\u4e2a DOM \u5143\u7d20\u3002\u7136\u800c\uff0c\u5bf9\u4e8e React \u6765\u8bf4 <code class=\"language-javascript\">&lt;div&gt;</code> \u603b\u662f\u53ea\u6709\u4e00\u4e2a\u5b50\u8282\u70b9\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u786e\u4fdd React \u66f4\u65b0\u4e0d\u4f1a\u548c Chosen \u8ffd\u52a0\u7684\u989d\u5916 DOM \u8282\u70b9\u53d1\u751f\u51b2\u7a81\u3002\u5728 React \u5de5\u4f5c\u6d41\u4e4b\u5916\u4fee\u6539 DOM \u662f\u975e\u5e38\u91cd\u5927\u7684\u4e8b\u60c5\uff0c\u4f60\u5fc5\u987b\u786e\u4fdd React \u6ca1\u6709\u7406\u7531\u53bb\u89e6\u78b0\u90a3\u4e9b\u8282\u70b9\u3002</p>\n<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4f1a\u5b9e\u73b0\u751f\u547d\u5468\u671f\u51fd\u6570\u3002\u6211\u4eec\u9700\u8981\u5728 <code class=\"language-javascript\">componentDidMount</code> \u4e2d\u4f7f\u7528 <code class=\"language-javascript\">&lt;select&gt;</code> \u7684\u5f15\u7528\u521d\u59cb\u5316 Chosen\uff0c\u5e76\u4e14\u5728 <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u5c06\u5176\u9500\u6bc1:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">chosen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">chosen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'destroy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/qmqeQx?editors=0010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<p>\u6ce8\u610f React \u4e0d\u4f1a\u7ed9 <code class=\"language-javascript\">this.el</code> \u5b57\u6bb5\u8d4b\u4e88\u7279\u6b8a\u7684\u542b\u4e49\u3002\u5b83\u80fd\u591f\u5de5\u4f5c\u53ea\u662f\u56e0\u4e3a\u6211\u4eec\u4e4b\u524d\u5728 <code class=\"language-javascript\">render()</code> \u51fd\u6570\u4e2d\u628a\u4e00\u4e2a <code class=\"language-javascript\">ref</code> \u8d4b\u503c\u7ed9\u4e86\u8fd9\u4e2a\u5b57\u6bb5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Chosen-select<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> el<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5230\u6b64\u5df2\u7ecf\u8db3\u591f\u8ba9\u6211\u4eec\u7684\u7ec4\u4ef6\u53bb\u6e32\u67d3\u4e86\uff0c\u4f46\u6211\u4eec\u540c\u65f6\u5e0c\u671b\u5728\u503c\u53d8\u5316\u7684\u65f6\u5019\u88ab\u901a\u77e5\u5230\u3002\u8981\u505a\u5230\u8fd9\u70b9\uff0c\u6211\u4eec\u9700\u8981\u5728\u8ba2\u9605\u7531 Chosen \u7ba1\u7406\u7684 <code class=\"language-javascript\">&lt;select&gt;</code> \u4e0a\u7684 jQuery <code class=\"language-javascript\">change</code> \u4e8b\u4ef6\u3002</p>\n<p>\u6211\u4eec\u4e0d\u76f4\u63a5\u628a <code class=\"language-javascript\">this.props.onChange</code> \u4f20\u9012\u7ed9 Chosen \u662f\u56e0\u4e3a\u7ec4\u4ef6\u7684 props \u53ef\u80fd\u968f\u65f6\u53d8\u5316\uff0c\u5e76\u4e14\u8fd9\u4e5f\u5305\u62ec\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u3002\u5bf9\u5e94\u7684\uff0c\u6211\u4eec\u4f1a\u5b9a\u4e49\u4e00\u4e2a <code class=\"language-javascript\">handleChange()</code> \u65b9\u6cd5\u6765\u8c03\u7528 <code class=\"language-javascript\">this.props.onChange</code>\uff0c\u5e76\u4e14\u8ba2\u9605 jQuery \u7684 <code class=\"language-javascript\">change</code> \u4e8b\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">chosen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">chosen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'destroy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/bWgbeE?editors=0010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<p>\u6700\u540e\uff0c\u8fd8\u5269\u4e0b\u4e00\u4ef6\u4e8b\u60c5\u9700\u8981\u5904\u7406\u3002\u5728 React \u4e2d\uff0cprops \u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u6709\u4e0d\u540c\u7684\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7236\u7ec4\u4ef6\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316 <code class=\"language-javascript\">&lt;Chosen&gt;</code> \u7ec4\u4ef6\u53ef\u80fd\u5f97\u5230\u4e0d\u540c\u7684 children\u3002\u8fd9\u610f\u5473\u7740\u4ece\u96c6\u6210\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6211\u4eec\u56e0\u5e94 prop \u7684\u66f4\u65b0\u800c\u624b\u52a8\u66f4\u65b0 DOM \u8fd9\u4e00\u70b9\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528 React \u6765\u5e2e\u6211\u4eec\u7ba1\u7406 DOM \u4e86\u3002</p>\n<p>Chosen \u7684\u6587\u6863\u5efa\u8bae\u6211\u4eec\u4f7f\u7528 jQuery <code class=\"language-javascript\">trigger()</code> API \u6765\u901a\u77e5\u539f\u59cb DOM \u5143\u7d20\u8fd9\u4e9b\u53d8\u5316\u3002\u6211\u4eec\u4f1a\u8ba9 React\u6765\u7ba1\u7406\u5728 <code class=\"language-javascript\">&lt;select&gt;</code> \u4e2d <code class=\"language-javascript\">this.props.children</code> \u7684\u66f4\u65b0\uff0c\u4f46\u662f\u6211\u4eec\u540c\u6837\u9700\u8981\u589e\u52a0\u4e00\u4e2a <code class=\"language-javascript\">componentDidUpdate()</code> \u751f\u547d\u5468\u671f\u51fd\u6570\u6765\u901a\u77e5 Chosen \u5173\u4e8e children \u5217\u8868\u7684\u53d8\u5316\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">.</span>children <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"chosen:updated\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\uff0c\u5f53\u7531 React \u7ba1\u7406\u7684 <code class=\"language-javascript\">&lt;select&gt;</code> children \u6539\u53d8\u65f6\uff0c Chosen \u4f1a\u77e5\u9053\u5982\u4f55\u66f4\u65b0\u5b83\u7684 DOM \u5143\u7d20\u3002</p>\n<p><code class=\"language-javascript\">Chosen</code> \u7ec4\u4ef6\u7684\u5b8c\u6574\u5b9e\u73b0\u770b\u8d77\u6765\u662f\u8fd9\u6837\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Chosen</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">chosen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">.</span>children <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"chosen:updated\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$el<span class=\"token punctuation\">.</span><span class=\"token function\">chosen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'destroy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Chosen-select<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> el<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/xdgKOz?editors=0010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<h2 id=\"integrating-with-other-view-libraries\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#integrating-with-other-view-libraries\"></a>\u548c\u5176\u4ed6\u89c6\u56fe\u5e93\u96c6\u6210 </h2>\n<p>\u5f97\u76ca\u4e8e <a href=\"/react/react-dom-client#createRoot\"><code class=\"language-javascript\">createRoot()</code></a> \u7684\u7075\u6d3b\u6027 React \u53ef\u4ee5\u88ab\u5d4c\u5165\u5230\u5176\u4ed6\u7684\u5e94\u7528\u4e2d\u3002</p>\n<p>\u867d\u7136 React \u901a\u5e38\u88ab\u7528\u6765\u5728\u542f\u52a8\u7684\u65f6\u5019\u52a0\u8f7d\u4e00\u4e2a\u5355\u72ec\u7684\u6839 React \u7ec4\u4ef6\u5230 DOM \u4e0a\uff0c<code class=\"language-javascript\">createRoot()</code> \u540c\u6837\u53ef\u4ee5\u5728 UI \u7684\u72ec\u7acb\u90e8\u5206\u4e0a\u591a\u6b21\u8c03\u7528\uff0c\u8fd9\u4e9b\u90e8\u5206\u53ef\u4ee5\u5c0f\u5230\u4e00\u4e2a\u6309\u94ae\uff0c\u4e5f\u53ef\u4ee5\u5927\u5230\u4e00\u4e2a\u5e94\u7528\u3002</p>\n<p>\u4e8b\u5b9e\u4e0a\uff0c\u8fd9\u6b63\u662f Facebook \u5982\u4f55\u4f7f\u7528 React \u7684\u3002\u8fd9\u8ba9\u6211\u4eec\u5c0f\u5757\u5c0f\u5757\u5730\u5728\u5e94\u7528\u4e2d\u4f7f\u7528 React\uff0c\u5e76\u4e14\u628a\u4ed6\u4eec\u7ed3\u5408\u5230\u6211\u4eec\u73b0\u5b58\u7684\u670d\u52a1\u7aef\u4ea7\u751f\u7684\u6a21\u677f\u548c\u5176\u4ed6\u5ba2\u6237\u7aef\u4ee3\u7801\u4e2d\u3002</p>\n<h3 id=\"replacing-string-based-rendering-with-react\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#replacing-string-based-rendering-with-react\"></a>\u5229\u7528 React \u66ff\u6362\u57fa\u4e8e\u5b57\u7b26\u4e32\u7684\u6e32\u67d3 </h3>\n<p>\u5728\u65e7\u7684 web \u5e94\u7528\u4e2d\u4e00\u4e2a\u901a\u7528\u7684\u6a21\u5f0f\u5c31\u662f\u4f7f\u7528\u4e00\u4e2a\u5b57\u7b26\u4e32\u63cf\u8ff0 DOM \u5757\u5e76\u4e14\u901a\u8fc7\u7c7b\u4f3c <code class=\"language-javascript\">$el.html(htmlString)</code> \u8fd9\u6837\u7684\u65b9\u5f0f\u63d2\u5165\u5230 DOM \u4e2d\u3002\u4ee3\u7801\u5e93\u4e2d\u7684\u8fd9\u79cd\u4f8b\u5b50\u662f\u975e\u5e38\u9002\u5408\u5f15\u5165 React \u7684\u3002\u76f4\u63a5\u628a\u57fa\u4e8e\u5b57\u7b26\u4e32\u7684\u6e32\u67d3\u91cd\u5199\u6210 React \u7ec4\u4ef6\u5373\u53ef\u3002</p>\n<p>\u90a3\u4e48\u4e0b\u9762\u8fd9\u6bb5 jQuery \u7684\u5b9e\u73b0\u2026</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&lt;button id=\"btn\"&gt;Say Hello&lt;/button&gt;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u2026\u53ef\u4ee5\u4f7f\u7528 React \u7ec4\u4ef6\u91cd\u5199\u4e3a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Button</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Say Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4ece\u8fd9\u8d77\u4f60\u53ef\u5f00\u59cb\u4ee5\u628a\u66f4\u591a\u7684\u903b\u8f91\u79fb\u52a8\u5230\u7ec4\u4ef6\u4e2d\uff0c\u5e76\u4e14\u5f00\u59cb\u5e94\u7528\u66f4\u591a\u901a\u7528 React \u5b9e\u8df5\u3002\u4f8b\u5982\uff0c\u5728\u7ec4\u4ef6\u4e2d\u6700\u597d\u4e0d\u8981\u4f9d\u8d56 ID \u56e0\u4e3a\u540c\u4e00\u4e2a\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u88ab\u6e32\u67d3\u591a\u6b21\u3002\u76f8\u53cd\u7684\uff0c\u6211\u4eec\u4f1a\u4f7f\u7528 <a href=\"/react/handling-events\">React \u4e8b\u4ef6\u7cfb\u7edf</a> \u5e76\u4e14\u76f4\u63a5\u6ce8\u518c click \u5904\u7406\u51fd\u6570\u5230 React <code class=\"language-javascript\">&lt;button&gt;</code> \u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Button</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Say Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HelloButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/RVKbvW?editors=1010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<p>\u53ea\u8981\u4f60\u559c\u6b22\u4f60\u53ef\u4ee5\u6709\u4e0d\u9650\u6570\u91cf\u7684\u8fd9\u79cd\u72ec\u7acb\u7ec4\u4ef6\uff0c\u5e76\u4e14\u4f7f\u7528 <code class=\"language-javascript\">ReactDOM.createRoot()</code> \u628a\u4ed6\u4eec\u6e32\u67d3\u5230\u4e0d\u540c\u7684\u5bb9\u5668\u4e2d\u3002\u9010\u6e10\u7684\uff0c\u968f\u7740\u4f60\u628a\u8d8a\u6765\u8d8a\u591a\u7684\u5e94\u7528\u8f6c\u6362\u5230 React\uff0c\u4f60\u5c31\u53ef\u4ee5\u628a\u5b83\u4eec\u7ed3\u5408\u6210\u66f4\u5927\u7684\u7ec4\u4ef6\uff0c\u5e76\u4e14\u628a <code class=\"language-javascript\">ReactDOM.createRoot()</code> \u7684\u8c03\u7528\u79fb\u52a8\u5230\u66f4\u4e0a\u5c42\u7684\u7ed3\u6784\u3002</p>\n<h3 id=\"embedding-react-in-a-backbone-view\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#embedding-react-in-a-backbone-view\"></a>\u628a React \u5d4c\u5165\u5230 Backbone \u89c6\u56fe </h3>\n<p><a class=\"external-link\" href=\"http://backbonejs.org/\">Backbone</a> \u89c6\u56fe\u901a\u5e38\u4f7f\u7528 HTML \u5b57\u7b26\u4e32\uff0c\u6216\u8005\u4ea7\u751f\u5b57\u7b26\u4e32\u7684\u6a21\u677f\u51fd\u6570\uff0c\u6765\u521b\u5efa DOM \u5143\u7d20\u7684\u5185\u5bb9\u3002\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u540c\u6837\u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u6e32\u67d3\u4e00\u4e2a React \u7ec4\u4ef6\u6765\u66ff\u6362\u6389\u3002</p>\n<p>\u5982\u4e0b\uff0c\u6211\u4eec\u4f1a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">ParagraphView</code> \u7684 Backbone \u89c6\u56fe\u3002\u4ed6\u4f1a\u91cd\u8f7d Backbone \u7684 <code class=\"language-javascript\">render()</code> \u51fd\u6570\u6765\u6e32\u67d3\u4e00\u4e2a React <code class=\"language-javascript\">&lt;Paragraph&gt;</code> \u7ec4\u4ef6\u5230 Backbone (<code class=\"language-javascript\">this.el</code>) \u63d0\u4f9b\u7684 DOM \u5143\u7d20\u4e2d\u3002\u8fd9\u91cc\uff0c\u540c\u6837\u7684\uff0c\u6211\u4eec\u5c06\u4f1a\u4f7f\u7528 <a href=\"/react/react-dom-client#createroot\"><code class=\"language-javascript\">ReactDOM.createRoot()</code></a>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Paragraph</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> ParagraphView <span class=\"token operator\">=</span> Backbone<span class=\"token punctuation\">.</span>View<span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reactRoot <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reactRoot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Paragraph</span></span> <span class=\"token attr-name\">text</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>reactRoot<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    Backbone<span class=\"token punctuation\">.</span><span class=\"token class-name\">View</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/gWgOYL?editors=0010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<p>\u5728 <code class=\"language-javascript\">remove</code> \u65b9\u6cd5\u4e2d\u6211\u4eec\u4e5f\u9700\u8981\u8c03\u7528 <code class=\"language-javascript\">root.unmount()</code> \u4ee5\u4fbf\u5728\u5b83\u89e3\u9664\u7684\u65f6\u5019 React \u6e05\u7406\u7ec4\u4ef6\u6811\u76f8\u5173\u7684\u4e8b\u4ef6\u5904\u7406\u7684\u6ce8\u518c\u548c\u5176\u4ed6\u7684\u8d44\u6e90\uff0c\u8fd9\u70b9\u662f\u662f\u5f88\u91cd\u8981\u7684\u3002</p>\n<p>\u5f53\u4e00\u4e2a\u7ec4\u4ef6\u5728 React \u6811\u4e2d<em>\u4ece\u5185\u90e8</em>\u5220\u9664\u7684\u65f6\u5019\uff0c\u6e05\u7406\u5de5\u4f5c\u662f\u81ea\u52a8\u5b8c\u6210\u7684\uff0c\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u73b0\u5728\u624b\u52a8\u79fb\u9664\u6574\u4e2a\u6811\uff0c\u6211\u4eec\u5fc5\u987b\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002</p>\n<h2 id=\"integrating-with-model-layers\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#integrating-with-model-layers\"></a>\u548c Model \u5c42\u96c6\u6210 </h2>\n<p>\u867d\u7136\u901a\u5e38\u662f\u63a8\u8350\u4f7f\u7528\u5355\u5411\u6570\u636e\u6d41\u52a8\u7684\uff0c\u4f8b\u5982 <a href=\"/react/lifting-state-up\">React state</a>\uff0c<a class=\"external-link\" href=\"http://facebook.github.io/flux/\">Flux</a>\uff0c\u6216\u8005 <a class=\"external-link\" href=\"http://redux.js.org/\">Redux</a>\uff0cReact \u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u5176\u4ed6\u6846\u67b6\u548c\u5e93\u7684 Model \u5c42\u3002</p>\n<h3 id=\"using-backbone-models-in-react-components\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#using-backbone-models-in-react-components\"></a>\u5728 React \u7ec4\u4ef6\u4e2d\u4f7f\u7528 Backbone \u7684 Model </h3>\n<p>\u5728 React \u7ec4\u4ef6\u4e2d\u4f7f\u7528 <a class=\"external-link\" href=\"http://backbonejs.org/\">Backbone</a> \u7684 model \u548c collection \u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\u76d1\u542c\u591a\u79cd\u53d8\u5316\u4e8b\u4ef6\u5e76\u4e14\u624b\u52a8\u5f3a\u5236\u89e6\u53d1\u4e00\u4e2a\u66f4\u65b0\u3002</p>\n<p>\u8d1f\u8d23\u6e32\u67d3 model \u7684\u7ec4\u4ef6\u4f1a\u76d1\u542c <code class=\"language-javascript\">'change'</code> \u4e8b\u4ef6\uff0c\u800c\u8d1f\u8d23\u6e32\u67d3 collection \u7684\u7ec4\u4ef6\u9700\u8981\u76d1\u542c <code class=\"language-javascript\">'add'</code> \u548c <code class=\"language-javascript\">'remove'</code> \u4e8b\u4ef6\u3002\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e2d\uff0c\u8c03\u7528 <a href=\"/react/react-component#forceupdate\"><code class=\"language-javascript\">this.forceUpdate()</code></a> \u6765\u4f7f\u7528\u65b0\u7684\u6570\u636e\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u3002</p>\n<p>\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code class=\"language-javascript\">List</code> \u7ec4\u4ef6\u6e32\u67d3\u4e00\u4e2a Backbone collection\uff0c\u4f7f\u7528 <code class=\"language-javascript\">Item</code> \u7ec4\u4ef6\u6765\u6e32\u67d3\u72ec\u7acb\u7684\u9879\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Item</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">forceUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">List</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">forceUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'add'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'remove'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token string\">'add'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'remove'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>collection<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">model</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Item</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>model<span class=\"token punctuation\">.</span>cid<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">model</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>model<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/GmrREm?editors=0010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<h3 id=\"extracting-data-from-backbone-models\"><a class=\"anchor\" href=\"/react/integrating-with-other-libraries#extracting-data-from-backbone-models\"></a>\u4ece Backbone Model \u63d0\u53d6\u6570\u636e </h3>\n<p>\u524d\u9762\u7684\u65b9\u5f0f\u9700\u8981\u4f60\u7684 React \u7ec4\u4ef6\u77e5\u9053 Backbone \u7684 model \u548c collection\u3002\u5982\u679c\u4f60\u8ba1\u5212\u8fc1\u79fb\u5230\u53e6\u4e00\u4e2a\u6570\u636e\u7ba1\u7406\u65b9\u6848\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5c06\u5173\u4e8eBackbone\u7684\u77e5\u8bc6\u96c6\u4e2d\u5728\u5c3d\u53ef\u80fd\u5c11\u7684\u4ee3\u7801\u90e8\u5206\u4e2d\u3002</p>\n<p>\u5176\u4e2d\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u6bcf\u5f53 model \u4e2d\u7684\u5c5e\u6027\u53d8\u5316\u65f6\u90fd\u628a\u5b83\u63d0\u53d6\u6210\u7b80\u5355\u6570\u636e\uff0c\u5e76\u4e14\u628a\u8fd9\u4e2a\u903b\u8f91\u653e\u5728\u4e00\u4e2a\u72ec\u7acb\u7684\u5730\u65b9\u3002\u4e0b\u9762\u662f\u4e00\u4e2a<a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a>\uff0c\u5b83\u63d0\u53d6\u4e86 Backbone model \u7684\u6240\u6709\u6570\u636e\u5b58\u653e\u5230 state \u4e2d\uff0c\u5e76\u5c06\u6570\u636e\u4f20\u9012\u5230\u88ab\u5305\u88f9\u7684\u7ec4\u4ef6\u4e2d\u3002</p>\n<p>\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\uff0c\u53ea\u6709\u9ad8\u9636\u7ec4\u4ef6\u9700\u8981\u77e5\u9053 Backbone model \u7684\u5185\u90e8\u6784\u9020\uff0c\u800c\u4e14\u5e94\u7528\u4e2d\u5927\u591a\u6570\u7684\u7ec4\u4ef6\u53ef\u4ee5\u4fdd\u6301\u548c Backbone \u65e0\u5173\u3002</p>\n<p>\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f1a\u62f7\u8d1d\u4e00\u4efd model \u7684\u5c5e\u6027\u6765\u5f62\u6210\u521d\u59cb\u7684 state\u3002\u6211\u4eec\u8ba2\u9605 <code class=\"language-javascript\">change</code> \u4e8b\u4ef6\uff08\u5e76\u4e14\u5728\u53d6\u6d88\u6302\u8f7d\u65f6\u505c\u6b62\u8ba2\u9605\uff09\uff0c\u800c\u5f53\u53d8\u5316\u53d1\u751f\u65f6\uff0c\u6211\u4eec\u4f7f\u7528 model \u7684\u5f53\u524d\u5c5e\u6027\u66f4\u65b0\u8fd9\u4e2a state\u3002\u6700\u7ec8\uff0c\u6211\u4eec\u786e\u4fdd\u4e86\u53ea\u8981 <code class=\"language-javascript\">model</code> \u5c5e\u6027\u672c\u8eab\u53d8\u5316\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u8981\u5fd8\u4e86\u505c\u6b62\u65e7 model \u7684\u8ba2\u9605\u5e76\u5f00\u59cb\u8ba2\u9605\u65b0\u7684 model\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u5e76\u4e0d\u662f\u4e3a\u4e86\u5f7b\u5e95\u5b8c\u6574\u5c55\u793a\u5982\u4f55\u4e0e Backbone \u96c6\u6210\uff0c\u800c\u662f\u5b83\u5e94\u8be5\u8ba9\u4f60\u4e86\u89e3\u5982\u4f55\u4ee5\u901a\u7528\u7684\u65b9\u5f0f\u5904\u7406\u6b64\u95ee\u9898\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">connectToBackboneModel</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">WrappedComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">return</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BackboneComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>attributes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentWillReceiveProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> nextProps<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>attributes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">.</span>model <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        nextProps<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">model</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">changedAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> propsExceptModel <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">delete</span> propsExceptModel<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>propsExceptModel<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8981\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u5b83\uff0c\u6211\u4eec\u4f1a\u94fe\u63a5\u4e00\u4e2a <code class=\"language-javascript\">NameInput</code> React \u7ec4\u4ef6\u5230\u4e00\u4e2a Backbone model\uff0c\u5e76\u4e14\u6bcf\u5f53\u8f93\u5165\u6846\u53d8\u5316\u65f6\u66f4\u65b0\u5b83\u7684 <code class=\"language-javascript\">firstName</code> \u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NameInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>firstName<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      My name is </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>firstName<span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> BackboneNameInput <span class=\"token operator\">=</span> <span class=\"token function\">connectToBackboneModel</span><span class=\"token punctuation\">(</span>NameInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'firstName'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BackboneNameInput</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">model</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">}</span></span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token attr-name\">handleChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleChange<span class=\"token punctuation\">}</span></span></span>    <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> model <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Backbone<span class=\"token punctuation\">.</span>Model</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> <span class=\"token string\">'Frodo'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Example</span></span> <span class=\"token attr-name\">model</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>model<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"http://codepen.io/gaearon/pen/PmWwwa?editors=0010\"><strong>\u5728 CodePen \u4e0a\u8fd0\u884c</strong></a></p>\n<p>\u8fd9\u4e2a\u6280\u672f\u5e76\u4e0d\u4ec5\u9650\u4e8e Backbone\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4e2d\u8ba2\u9605\u5176\u66f4\u6539\uff0c\u5e76\u9009\u62e9\u6027\u5730\uff0c\u62f7\u8d1d\u6570\u636e\u5230\u672c\u5730 React state\uff0c\u6765\u5c06 React \u7528\u4e8e\u4efb\u4f55 model \u5e93\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/integrating-with-other-libraries.md\">Edit this page</a></p></div></article>", "path": "/react/integrating-with-other-libraries", "nav": ["/react/higher-order-components", "/react/jsx-in-depth"]}, {"key": "\u6df1\u5165 JSX", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u5b9e\u9645\u4e0a\uff0cJSX \u4ec5\u4ec5\u53ea\u662f <code class=\"language-javascript\">React.createElement(component, props, ...children)</code> \u51fd\u6570\u7684\u8bed\u6cd5\u7cd6\u3002\u5982\u4e0b JSX \u4ee3\u7801\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyButton</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">shadowSize</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  Click Me\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyButton</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4f1a\u7f16\u8bd1\u4e3a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n  MyButton<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">shadowSize</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'Click Me'</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5982\u679c\u6ca1\u6709\u5b50\u8282\u70b9\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528\u81ea\u95ed\u5408\u7684\u6807\u7b7e\u5f62\u5f0f\uff0c\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sidebar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u4f1a\u7f16\u8bd1\u4e3a:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">'sidebar'</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u60f3\u6d4b\u8bd5\u4e00\u4e9b\u7279\u5b9a\u7684 JSX \u4f1a\u8f6c\u6362\u6210\u4ec0\u4e48\u6837\u7684 JavaScript\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 <a class=\"external-link\" href=\"https://babeljs.io/repl/#?presets=react&amp;code_lz=GYVwdgxgLglg9mABACwKYBt1wBQEpEDeAUIogE6pQhlIA8AJjAG4B8AEhlogO5xnr0AhLQD0jVgG4iAXyJA\">\u5728\u7ebf\u7684 Babel \u7f16\u8bd1\u5668</a>\u3002</p>\n<h2 id=\"specifying-the-react-element-type\"><a class=\"anchor\" href=\"/react/jsx-in-depth#specifying-the-react-element-type\"></a>\u6307\u5b9a React \u5143\u7d20\u7c7b\u578b </h2>\n<p>JSX \u6807\u7b7e\u7684\u7b2c\u4e00\u90e8\u5206\u6307\u5b9a\u4e86 React \u5143\u7d20\u7684\u7c7b\u578b\u3002</p>\n<p>\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684 JSX \u6807\u7b7e\u610f\u5473\u7740\u5b83\u4eec\u662f React \u7ec4\u4ef6\u3002\u8fd9\u4e9b\u6807\u7b7e\u4f1a\u88ab\u7f16\u8bd1\u4e3a\u5bf9\u547d\u540d\u53d8\u91cf\u7684\u76f4\u63a5\u5f15\u7528\uff0c\u6240\u4ee5\uff0c\u5f53\u4f60\u4f7f\u7528 JSX <code class=\"language-javascript\">&lt;Foo /&gt;</code> \u8868\u8fbe\u5f0f\u65f6\uff0c<code class=\"language-javascript\">Foo</code> \u5fc5\u987b\u5305\u542b\u5728\u4f5c\u7528\u57df\u5185\u3002</p>\n<h3 id=\"react-must-be-in-scope\"><a class=\"anchor\" href=\"/react/jsx-in-depth#react-must-be-in-scope\"></a>React \u5fc5\u987b\u5728\u4f5c\u7528\u57df\u5185 </h3>\n<p>\u7531\u4e8e JSX \u4f1a\u7f16\u8bd1\u4e3a <code class=\"language-javascript\">React.createElement</code> \u8c03\u7528\u5f62\u5f0f\uff0c\u6240\u4ee5 <code class=\"language-javascript\">React</code> \u5e93\u4e5f\u5fc5\u987b\u5305\u542b\u5728 JSX \u4ee3\u7801\u4f5c\u7528\u57df\u5185\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5728\u5982\u4e0b\u4ee3\u7801\u4e2d\uff0c\u867d\u7136 <code class=\"language-javascript\">React</code> \u548c <code class=\"language-javascript\">CustomButton</code> \u5e76\u6ca1\u6709\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u4f46\u8fd8\u662f\u9700\u8981\u5bfc\u5165\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> CustomButton <span class=\"token keyword\">from</span> <span class=\"token string\">'./CustomButton'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">WarningButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// return React.createElement(CustomButton, {color: 'red'}, null);</span></span>  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomButton</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u4e0d\u4f7f\u7528 JavaScript \u6253\u5305\u5de5\u5177\u800c\u662f\u76f4\u63a5\u901a\u8fc7 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u52a0\u8f7d React\uff0c\u5219\u5fc5\u987b\u5c06 <code class=\"language-javascript\">React</code> \u6302\u8f7d\u5230\u5168\u5c40\u53d8\u91cf\u4e2d\u3002</p>\n<h3 id=\"using-dot-notation-for-jsx-type\"><a class=\"anchor\" href=\"/react/jsx-in-depth#using-dot-notation-for-jsx-type\"></a>\u5728 JSX \u7c7b\u578b\u4e2d\u4f7f\u7528\u70b9\u8bed\u6cd5 </h3>\n<p>\u5728 JSX \u4e2d\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u70b9\u8bed\u6cd5\u6765\u5f15\u7528\u4e00\u4e2a React \u7ec4\u4ef6\u3002\u5f53\u4f60\u5728\u4e00\u4e2a\u6a21\u5757\u4e2d\u5bfc\u51fa\u8bb8\u591a React \u7ec4\u4ef6\u65f6\uff0c\u8fd9\u4f1a\u975e\u5e38\u65b9\u4fbf\u3002\u4f8b\u5982\uff0c\u5982\u679c <code class=\"language-javascript\">MyComponents.DatePicker</code> \u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u4f60\u53ef\u4ee5\u5728 JSX \u4e2d\u76f4\u63a5\u4f7f\u7528\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyComponents <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">DatePicker</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token function\">DatePicker</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Imagine a </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> datepicker here.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">BlueDatePicker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponents.DatePicker</span></span> <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"user-defined-components-must-be-capitalized\"><a class=\"anchor\" href=\"/react/jsx-in-depth#user-defined-components-must-be-capitalized\"></a>\u7528\u6237\u5b9a\u4e49\u7684\u7ec4\u4ef6\u5fc5\u987b\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934 </h3>\n<p>\u4ee5\u5c0f\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u5143\u7d20\u4ee3\u8868\u4e00\u4e2a HTML \u5185\u7f6e\u7ec4\u4ef6\uff0c\u6bd4\u5982 <code class=\"language-javascript\">&lt;div&gt;</code> \u6216\u8005 <code class=\"language-javascript\">&lt;span&gt;</code> \u4f1a\u751f\u6210\u76f8\u5e94\u7684\u5b57\u7b26\u4e32 <code class=\"language-javascript\">'div'</code> \u6216\u8005 <code class=\"language-javascript\">'span'</code> \u4f20\u9012\u7ed9 <code class=\"language-javascript\">React.createElement</code>\uff08\u4f5c\u4e3a\u53c2\u6570\uff09\u3002\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u5143\u7d20\u5219\u5bf9\u5e94\u7740\u5728 JavaScript \u5f15\u5165\u6216\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6\uff0c\u5982 <code class=\"language-javascript\">&lt;Foo /&gt;</code> \u4f1a\u7f16\u8bd1\u4e3a <code class=\"language-javascript\">React.createElement(Foo)</code>\u3002</p>\n<p>\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u547d\u540d\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u3002\u5982\u679c\u4f60\u786e\u5b9e\u9700\u8981\u4e00\u4e2a\u4ee5\u5c0f\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u7ec4\u4ef6\uff0c\u5219\u5728 JSX \u4e2d\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u5fc5\u987b\u5c06\u5b83\u8d4b\u503c\u7ed9\u4e00\u4e2a\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u53d8\u91cf\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u7684\u4ee3\u7801\u5c06\u65e0\u6cd5\u6309\u7167\u9884\u671f\u8fd0\u884c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// \u9519\u8bef\uff01\u7ec4\u4ef6\u5e94\u8be5\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\uff1a</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token comment\">// \u6b63\u786e\uff01\u8fd9\u79cd &lt;div&gt; \u7684\u4f7f\u7528\u662f\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a div \u662f\u4e00\u4e2a\u6709\u6548\u7684 HTML \u6807\u7b7e</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>toWhat<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u9519\u8bef\uff01React \u4f1a\u8ba4\u4e3a &lt;hello /&gt; \u662f\u4e00\u4e2a HTML \u6807\u7b7e\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\uff1a</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hello</span> <span class=\"token attr-name\">toWhat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>World<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u91cd\u547d\u540d <code class=\"language-javascript\">hello</code> \u4e3a <code class=\"language-javascript\">Hello</code>\uff0c\u540c\u65f6\u5728 JSX \u4e2d\u4f7f\u7528 <code class=\"language-javascript\">&lt;Hello /&gt;</code> \uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token comment\">// \u6b63\u786e\uff01\u7ec4\u4ef6\u9700\u8981\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\uff1a</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token comment\">// \u6b63\u786e\uff01 \u8fd9\u79cd &lt;div&gt; \u7684\u4f7f\u7528\u662f\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a div \u662f\u4e00\u4e2a\u6709\u6548\u7684 HTML \u6807\u7b7e\uff1a</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>toWhat<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6b63\u786e\uff01React \u77e5\u9053 &lt;Hello /&gt; \u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u5b83\u662f\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\uff1a</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">toWhat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>World<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"choosing-the-type-at-runtime\"><a class=\"anchor\" href=\"/react/jsx-in-depth#choosing-the-type-at-runtime\"></a>\u5728\u8fd0\u884c\u65f6\u9009\u62e9\u7c7b\u578b </h3>\n<p>\u4f60\u4e0d\u80fd\u5c06\u901a\u7528\u8868\u8fbe\u5f0f\u4f5c\u4e3a React \u5143\u7d20\u7c7b\u578b\u3002\u5982\u679c\u4f60\u60f3\u901a\u8fc7\u901a\u7528\u8868\u8fbe\u5f0f\u6765\uff08\u52a8\u6001\uff09\u51b3\u5b9a\u5143\u7d20\u7c7b\u578b\uff0c\u4f60\u9700\u8981\u9996\u5148\u5c06\u5b83\u8d4b\u503c\u7ed9\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u53d8\u91cf\u3002\u8fd9\u901a\u5e38\u7528\u4e8e\u6839\u636e prop \u6765\u6e32\u67d3\u4e0d\u540c\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PhotoStory<span class=\"token punctuation\">,</span> VideoStory <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stories'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> components <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">photo</span><span class=\"token operator\">:</span> PhotoStory<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">video</span><span class=\"token operator\">:</span> VideoStory\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Story</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u9519\u8bef\uff01JSX \u7c7b\u578b\u4e0d\u80fd\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>components<span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>storyType<span class=\"token punctuation\">]</span> story<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>story<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898, \u9700\u8981\u9996\u5148\u5c06\u7c7b\u578b\u8d4b\u503c\u7ed9\u4e00\u4e2a\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u53d8\u91cf\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> PhotoStory<span class=\"token punctuation\">,</span> VideoStory <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stories'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> components <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">photo</span><span class=\"token operator\">:</span> PhotoStory<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">video</span><span class=\"token operator\">:</span> VideoStory\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Story</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6b63\u786e\uff01JSX \u7c7b\u578b\u53ef\u4ee5\u662f\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u53d8\u91cf\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> SpecificStory <span class=\"token operator\">=</span> components<span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>storyType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SpecificStory</span></span> <span class=\"token attr-name\">story</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>story<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"props-in-jsx\"><a class=\"anchor\" href=\"/react/jsx-in-depth#props-in-jsx\"></a>JSX \u4e2d\u7684 Props </h2>\n<p>\u6709\u591a\u79cd\u65b9\u5f0f\u53ef\u4ee5\u5728 JSX \u4e2d\u6307\u5b9a props\u3002</p>\n<h3 id=\"javascript-expressions-as-props\"><a class=\"anchor\" href=\"/react/jsx-in-depth#javascript-expressions-as-props\"></a>JavaScript \u8868\u8fbe\u5f0f\u4f5c\u4e3a Props </h3>\n<p>\u4f60\u53ef\u4ee5\u628a\u5305\u88f9\u5728 <code class=\"language-javascript\">{}</code> \u4e2d\u7684 JavaScript \u8868\u8fbe\u5f0f\u4f5c\u4e3a\u4e00\u4e2a prop \u4f20\u9012\u7ed9 JSX \u5143\u7d20\u3002\u4f8b\u5982\uff0c\u5982\u4e0b\u7684 JSX\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token attr-name\">foo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">3</span> <span class=\"token operator\">+</span> <span class=\"token number\">4</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u5728 <code class=\"language-javascript\">MyComponent</code> \u4e2d\uff0c<code class=\"language-javascript\">props.foo</code> \u7684\u503c\u7b49\u4e8e <code class=\"language-javascript\">1 + 2 + 3 + 4</code> \u7684\u6267\u884c\u7ed3\u679c <code class=\"language-javascript\">10</code>\u3002</p>\n<p><code class=\"language-javascript\">if</code> \u8bed\u53e5\u4ee5\u53ca <code class=\"language-javascript\">for</code> \u5faa\u73af\u4e0d\u662f JavaScript \u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u4e0d\u80fd\u5728 JSX \u4e2d\u76f4\u63a5\u4f7f\u7528\u3002\u4f46\u662f\uff0c\u4f60\u53ef\u4ee5\u7528\u5728 JSX \u4ee5\u5916\u7684\u4ee3\u7801\u4e2d\u3002\u6bd4\u5982\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NumberDescriber</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> description<span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>number <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    description <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">even</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    description <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">odd</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> is an </span><span class=\"token punctuation\">{</span>description<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> number</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u5728\u5bf9\u5e94\u7684\u7ae0\u8282\u4e2d\u5b66\u4e60\u66f4\u591a\u5173\u4e8e<a href=\"/react/conditional-rendering\">\u6761\u4ef6\u6e32\u67d3</a>\u548c<a href=\"/react/lists-and-keys\">\u5faa\u73af</a>\u7684\u5185\u5bb9\u3002</p>\n<h3 id=\"string-literals\"><a class=\"anchor\" href=\"/react/jsx-in-depth#string-literals\"></a>\u5b57\u7b26\u4e32\u5b57\u9762\u91cf </h3>\n<p>\u4f60\u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u8d4b\u503c\u7ed9 prop\u3002\u5982\u4e0b\u4e24\u4e2a JSX \u8868\u8fbe\u5f0f\u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hello world<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token attr-name\">message</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'hello world'</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u5f53\u4f60\u5c06\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u8d4b\u503c\u7ed9 prop \u65f6\uff0c\u5b83\u7684\u503c\u662f\u672a\u8f6c\u4e49\u7684\u3002\u6240\u4ee5\uff0c\u4ee5\u4e0b\u4e24\u4e2a JSX \u8868\u8fbe\u5f0f\u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token attr-name\">message</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token entity named-entity\">&amp;lt;</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token attr-name\">message</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'&lt;3'</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u8fd9\u79cd\u884c\u4e3a\u901a\u5e38\u662f\u4e0d\u91cd\u8981\u7684\uff0c\u8fd9\u91cc\u53ea\u662f\u63d0\u9192\u6709\u8fd9\u4e2a\u7528\u6cd5\u3002</p>\n<h3 id=\"props-default-to-true\"><a class=\"anchor\" href=\"/react/jsx-in-depth#props-default-to-true\"></a>Props \u9ed8\u8ba4\u503c\u4e3a \u201cTrue\u201d </h3>\n<p>\u5982\u679c\u4f60\u6ca1\u7ed9 prop \u8d4b\u503c\uff0c\u5b83\u7684\u9ed8\u8ba4\u503c\u662f <code class=\"language-javascript\">true</code>\u3002\u4ee5\u4e0b\u4e24\u4e2a JSX \u8868\u8fbe\u5f0f\u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyTextBox</span></span> <span class=\"token attr-name\">autocomplete</span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyTextBox</span></span> <span class=\"token attr-name\">autocomplete</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u901a\u5e38\uff0c\u6211\u4eec\u4e0d\u5efa\u8bae\u4e0d\u4f20\u9012 value \u7ed9 prop\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4e0e <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Object_initializer#New_notations_in_ECMAScript_2015\">ES6 \u5bf9\u8c61\u7b80\u5199</a>\u6df7\u6dc6\uff0c<code class=\"language-javascript\">{foo}</code> \u662f <code class=\"language-javascript\">{foo: foo}</code> \u7684\u7b80\u5199\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">{foo: true}</code>\u3002\u8fd9\u6837\u5b9e\u73b0\u53ea\u662f\u4e3a\u4e86\u4fdd\u6301\u548c HTML \u4e2d\u6807\u7b7e\u5c5e\u6027\u7684\u884c\u4e3a\u4e00\u81f4\u3002</p>\n<h3 id=\"spread-attributes\"><a class=\"anchor\" href=\"/react/jsx-in-depth#spread-attributes\"></a>\u5c5e\u6027\u5c55\u5f00 </h3>\n<p>\u5982\u679c\u4f60\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a props \u5bf9\u8c61\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5c55\u5f00\u8fd0\u7b97\u7b26 <code class=\"language-javascript\">...</code> \u6765\u5728 JSX \u4e2d\u4f20\u9012\u6574\u4e2a props \u5bf9\u8c61\u3002\u4ee5\u4e0b\u4e24\u4e2a\u7ec4\u4ef6\u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">App1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token attr-name\">firstName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Ben<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">lastName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Hector<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> props <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> <span class=\"token string\">'Ben'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lastName</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hector'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u8fd8\u53ef\u4ee5\u9009\u62e9\u53ea\u4fdd\u7559\u5f53\u524d\u7ec4\u4ef6\u9700\u8981\u63a5\u6536\u7684 props\uff0c\u5e76\u4f7f\u7528\u5c55\u5f00\u8fd0\u7b97\u7b26\u5c06\u5176\u4ed6 props \u4f20\u9012\u4e0b\u53bb\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Button</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> kind<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>other <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">const</span> className <span class=\"token operator\">=</span> kind <span class=\"token operator\">===</span> <span class=\"token string\">\"primary\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"PrimaryButton\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"SecondaryButton\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>className<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>other<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">kind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clicked!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Hello World!</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\uff0c<code class=\"language-javascript\">kind</code> \u7684 prop \u4f1a\u88ab\u5b89\u5168\u7684\u4fdd\u7559\uff0c\u5b83\u5c06<em>\u4e0d\u4f1a</em>\u88ab\u4f20\u9012\u7ed9 DOM \u4e2d\u7684 <code class=\"language-javascript\">&lt;button&gt;</code> \u5143\u7d20\u3002\n\u6240\u6709\u5176\u4ed6\u7684 props \u4f1a\u901a\u8fc7 <code class=\"language-javascript\">...other</code> \u5bf9\u8c61\u4f20\u9012\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u5e94\u7528\u53ef\u4ee5\u975e\u5e38\u7075\u6d3b\u3002\u4f60\u53ef\u4ee5\u770b\u5230\u5b83\u4f20\u9012\u4e86\u4e00\u4e2a <code class=\"language-javascript\">onClick</code> \u548c <code class=\"language-javascript\">children</code> \u5c5e\u6027\u3002</p>\n<p>\u5c5e\u6027\u5c55\u5f00\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u5f88\u6709\u7528\uff0c\u4f46\u662f\u4e5f\u5f88\u5bb9\u6613\u5c06\u4e0d\u5fc5\u8981\u7684 props \u4f20\u9012\u7ed9\u4e0d\u76f8\u5173\u7684\u7ec4\u4ef6\uff0c\u6216\u8005\u5c06\u65e0\u6548\u7684 HTML \u5c5e\u6027\u4f20\u9012\u7ed9 DOM\u3002\u6211\u4eec\u5efa\u8bae\u8c28\u614e\u7684\u4f7f\u7528\u8be5\u8bed\u6cd5\u3002</p>\n<h2 id=\"children-in-jsx\"><a class=\"anchor\" href=\"/react/jsx-in-depth#children-in-jsx\"></a>JSX \u4e2d\u7684\u5b50\u5143\u7d20 </h2>\n<p>\u5305\u542b\u5728\u5f00\u59cb\u548c\u7ed3\u675f\u6807\u7b7e\u4e4b\u95f4\u7684 JSX \u8868\u8fbe\u5f0f\u5185\u5bb9\u5c06\u4f5c\u4e3a\u7279\u5b9a\u5c5e\u6027 <code class=\"language-javascript\">props.children</code> \u4f20\u9012\u7ed9\u5916\u5c42\u7ec4\u4ef6\u3002\u6709\u51e0\u79cd\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u4f20\u9012\u5b50\u5143\u7d20\uff1a</p>\n<h3 id=\"string-literals-1\"><a class=\"anchor\" href=\"/react/jsx-in-depth#string-literals-1\"></a>\u5b57\u7b26\u4e32\u5b57\u9762\u91cf </h3>\n<p>\u4f60\u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u653e\u5728\u5f00\u59cb\u548c\u7ed3\u675f\u6807\u7b7e\u4e4b\u95f4\uff0c\u6b64\u65f6 <code class=\"language-javascript\">props.children</code> \u5c31\u53ea\u662f\u8be5\u5b57\u7b26\u4e32\u3002\u8fd9\u5bf9\u4e8e\u5f88\u591a\u5185\u7f6e\u7684 HTML \u5143\u7d20\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyComponent</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u8fd9\u662f\u4e00\u4e2a\u5408\u6cd5\u7684 JSX\uff0c<code class=\"language-javascript\">MyComponent</code> \u4e2d\u7684 <code class=\"language-javascript\">props.children</code> \u662f\u4e00\u4e2a\u7b80\u5355\u7684\u672a\u8f6c\u4e49\u5b57\u7b26\u4e32 <code class=\"language-javascript\">\"Hello world!\"</code>\u3002\u56e0\u6b64\u4f60\u53ef\u4ee5\u91c7\u7528\u7f16\u5199 HTML \u7684\u65b9\u5f0f\u6765\u7f16\u5199 JSX\u3002\u5982\u4e0b\u6240\u793a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span>This is valid HTML <span class=\"token entity named-entity\">&amp;amp;</span> JSX at the same time.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>JSX \u4f1a\u79fb\u9664\u884c\u9996\u5c3e\u7684\u7a7a\u683c\u4ee5\u53ca\u7a7a\u884c\u3002\u4e0e\u6807\u7b7e\u76f8\u90bb\u7684\u7a7a\u884c\u5747\u4f1a\u88ab\u5220\u9664\uff0c\u6587\u672c\u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u65b0\u884c\u4f1a\u88ab\u538b\u7f29\u4e3a\u4e00\u4e2a\u7a7a\u683c\u3002\u56e0\u6b64\u4ee5\u4e0b\u7684\u51e0\u79cd\u65b9\u5f0f\u90fd\u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello World</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  Hello World\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  Hello\n  World\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n\n  Hello World\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<h3 id=\"jsx-children\"><a class=\"anchor\" href=\"/react/jsx-in-depth#jsx-children\"></a>JSX \u5b50\u5143\u7d20 </h3>\n<p>\u5b50\u5143\u7d20\u5141\u8bb8\u7531\u591a\u4e2a JSX \u5143\u7d20\u7ec4\u6210\u3002\u8fd9\u5bf9\u4e8e\u5d4c\u5957\u7ec4\u4ef6\u975e\u5e38\u6709\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyContainer</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyFirstComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MySecondComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyContainer</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u5b50\u5143\u7d20\u6df7\u5408\u5728\u4e00\u8d77\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u5c06\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u4e0e JSX \u5b50\u5143\u7d20\u4e00\u8d77\u4f7f\u7528\u3002\u8fd9\u4e5f\u662f JSX \u7c7b\u4f3c HTML \u7684\u4e00\u79cd\u8868\u73b0\uff0c\u6240\u4ee5\u5982\u4e0b\u4ee3\u7801\u662f\u5408\u6cd5\u7684 JSX \u5e76\u4e14\u4e5f\u662f\u5408\u6cd5\u7684 HTML\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  Here is a list:\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Item 1<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Item 2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>React \u7ec4\u4ef6\u4e5f\u80fd\u591f\u8fd4\u56de\u5b58\u50a8\u5728\u6570\u7ec4\u4e2d\u7684\u4e00\u7ec4\u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4e0d\u9700\u8981\u7528\u989d\u5916\u7684\u5143\u7d20\u5305\u88f9\u5217\u8868\u5143\u7d20\uff01</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// \u4e0d\u8981\u5fd8\u8bb0\u8bbe\u7f6e key :)</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>A<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">First item</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>B<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Second item</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>C<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Third item</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"javascript-expressions-as-children\"><a class=\"anchor\" href=\"/react/jsx-in-depth#javascript-expressions-as-children\"></a>JavaScript \u8868\u8fbe\u5f0f\u4f5c\u4e3a\u5b50\u5143\u7d20 </h3>\n<p>JavaScript \u8868\u8fbe\u5f0f\u53ef\u4ee5\u88ab\u5305\u88f9\u5728 <code class=\"language-javascript\">{}</code> \u4e2d\u4f5c\u4e3a\u5b50\u5143\u7d20\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u8868\u8fbe\u5f0f\u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">foo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyComponent</span></span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyComponent</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u8fd9\u5bf9\u4e8e\u5c55\u793a\u4efb\u610f\u957f\u5ea6\u7684\u5217\u8868\u975e\u5e38\u6709\u7528\u3002\u4f8b\u5982\uff0c\u6e32\u67d3 HTML \u5217\u8868\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Item</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">TodoList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> todos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'finish doc'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'submit pr'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'nag dan to review'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Item</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">message</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>JavaScript \u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u548c\u5176\u4ed6\u7c7b\u578b\u7684\u5b50\u5143\u7d20\u7ec4\u5408\u3002\u8fd9\u79cd\u505a\u6cd5\u53ef\u4ee5\u65b9\u4fbf\u5730\u66ff\u4ee3\u6a21\u677f\u5b57\u7b26\u4e32\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>addressee<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"functions-as-children\"><a class=\"anchor\" href=\"/react/jsx-in-depth#functions-as-children\"></a>\u51fd\u6570\u4f5c\u4e3a\u5b50\u5143\u7d20 </h3>\n<p>\u901a\u5e38\uff0cJSX \u4e2d\u7684 JavaScript \u8868\u8fbe\u5f0f\u5c06\u4f1a\u88ab\u8ba1\u7b97\u4e3a\u5b57\u7b26\u4e32\u3001React \u5143\u7d20\u6216\u8005\u662f\u5217\u8868\u3002\u4e0d\u8fc7\uff0c<code class=\"language-javascript\">props.children</code> \u548c\u5176\u4ed6 prop \u4e00\u6837\uff0c\u5b83\u53ef\u4ee5\u4f20\u9012\u4efb\u610f\u7c7b\u578b\u7684\u6570\u636e\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f React \u5df2\u77e5\u7684\u53ef\u6e32\u67d3\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u4f60\u53ef\u4ee5\u628a\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a <code class=\"language-javascript\">props.children</code> \u8fdb\u884c\u4f20\u9012\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u8c03\u7528\u5b50\u5143\u7d20\u56de\u8c03 numTimes \u6b21\uff0c\u6765\u91cd\u590d\u751f\u6210\u7ec4\u4ef6</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Repeat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> props<span class=\"token punctuation\">.</span>numTimes<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>    items<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>items<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ListOfTenThings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Repeat</span></span> <span class=\"token attr-name\">numTimes</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">10</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">This is item </span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> in the list</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Repeat</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u5c06\u4efb\u4f55\u4e1c\u897f\u4f5c\u4e3a\u5b50\u5143\u7d20\u4f20\u9012\u7ed9\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u53ea\u8981\u786e\u4fdd\u5728\u8be5\u7ec4\u4ef6\u6e32\u67d3\u4e4b\u524d\u80fd\u591f\u88ab\u8f6c\u6362\u6210 React \u7406\u89e3\u7684\u5bf9\u8c61\u3002\u8fd9\u79cd\u7528\u6cd5\u5e76\u4e0d\u5e38\u89c1\uff0c\u4f46\u53ef\u4ee5\u7528\u4e8e\u6269\u5c55 JSX\u3002</p>\n<h3 id=\"booleans-null-and-undefined-are-ignored\"><a class=\"anchor\" href=\"/react/jsx-in-depth#booleans-null-and-undefined-are-ignored\"></a>\u5e03\u5c14\u7c7b\u578b\u3001Null \u4ee5\u53ca Undefined \u5c06\u4f1a\u5ffd\u7565 </h3>\n<p><code class=\"language-javascript\">false</code>, <code class=\"language-javascript\">null</code>, <code class=\"language-javascript\">undefined</code>, and <code class=\"language-javascript\">true</code> \u662f\u5408\u6cd5\u7684\u5b50\u5143\u7d20\u3002\u4f46\u5b83\u4eec\u5e76\u4e0d\u4f1a\u88ab\u6e32\u67d3\u3002\u4ee5\u4e0b\u7684 JSX \u8868\u8fbe\u5f0f\u6e32\u67d3\u7ed3\u679c\u76f8\u540c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u8fd9\u6709\u52a9\u4e8e\u4f9d\u636e\u7279\u5b9a\u6761\u4ef6\u6765\u6e32\u67d3\u5176\u4ed6\u7684 React \u5143\u7d20\u3002\u4f8b\u5982\uff0c\u5728\u4ee5\u4e0b JSX \u4e2d\uff0c\u4ec5\u5f53 <code class=\"language-javascript\">showHeader</code> \u4e3a <code class=\"language-javascript\">true</code> \u65f6\uff0c\u624d\u4f1a\u6e32\u67d3 <code class=\"language-javascript\">&lt;Header /&gt;</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">  </span><span class=\"token punctuation\">{</span>showHeader <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Content</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\u6709\u4e00\u4e9b <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Glossary/Falsy\">\u201cfalsy\u201d \u503c</a>\uff0c\u5982\u6570\u5b57 <code class=\"language-javascript\">0</code>\uff0c\u4ecd\u7136\u4f1a\u88ab React \u6e32\u67d3\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u4ee3\u7801\u5e76\u4e0d\u4f1a\u50cf\u4f60\u9884\u671f\u90a3\u6837\u5de5\u4f5c\uff0c\u56e0\u4e3a\u5f53 <code class=\"language-javascript\">props.messages</code> \u662f\u7a7a\u6570\u7ec4\u65f6\uff0c\u5c06\u4f1a\u6e32\u67d3\u4e3a\u6570\u5b57 <code class=\"language-javascript\">0</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">  </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageList</span></span> <span class=\"token attr-name\">messages</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u786e\u4fdd <code class=\"language-javascript\">&amp;&amp;</code> \u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\u603b\u662f\u5e03\u5c14\u503c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">  </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span></span>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MessageList</span></span> <span class=\"token attr-name\">messages</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>messages<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u53cd\u4e4b\uff0c\u5982\u679c\u4f60\u60f3\u6e32\u67d3 <code class=\"language-javascript\">false</code>\u3001<code class=\"language-javascript\">true</code>\u3001<code class=\"language-javascript\">null</code>\u3001<code class=\"language-javascript\">undefined</code> \u7b49\u503c\uff0c\u4f60\u9700\u8981\u5148\u5c06\u5b83\u4eec<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#String_conversion\">\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32</a>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">  My JavaScript variable is </span><span class=\"token punctuation\">{</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span>myVariable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span></span><span class=\"token plain-text\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/jsx-in-depth.md\">Edit this page</a></p></div></article>", "path": "/react/jsx-in-depth", "nav": ["/react/integrating-with-other-libraries", "/react/optimizing-performance"]}, {"key": "\u6027\u80fd\u4f18\u5316", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>UI \u66f4\u65b0\u9700\u8981\u6602\u8d35\u7684 DOM \u64cd\u4f5c\uff0c\u56e0\u6b64 React \u5185\u90e8\u4f7f\u7528\u4e86\u51e0\u79cd\u5de7\u5999\u7684\u6280\u672f\u6765\u6700\u5c0f\u5316 DOM \u64cd\u4f5c\u6b21\u6570\u3002\u5bf9\u4e8e\u5927\u90e8\u5206\u5e94\u7528\u800c\u8a00\uff0c\u4f7f\u7528 React \u65f6\u65e0\u9700\u505a\u5927\u91cf\u4f18\u5316\u5de5\u4f5c\u5c31\u80fd\u62e5\u6709\u9ad8\u6027\u80fd\u7684\u7528\u6237\u754c\u9762\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u4f60\u4ecd\u7136\u6709\u529e\u6cd5\u6765\u52a0\u901f\u4f60\u7684 React \u5e94\u7528\u3002</p>\n<h2 id=\"use-the-production-build\"><a class=\"anchor\" href=\"/react/optimizing-performance#use-the-production-build\"></a>\u4f7f\u7528\u751f\u4ea7\u7248\u672c </h2>\n<p>\u5f53\u4f60\u9700\u8981\u5bf9\u4f60\u7684 React \u5e94\u7528\u8fdb\u884c benchmark\uff0c\u6216\u8005\u9047\u5230\u4e86\u6027\u80fd\u95ee\u9898\uff0c\u8bf7\u786e\u4fdd\u4f60\u6b63\u5728\u4f7f\u7528\u538b\u7f29\u540e\u7684\u751f\u4ea7\u7248\u672c\u3002</p>\n<p>React \u9ed8\u8ba4\u5305\u542b\u4e86\u8bb8\u591a\u6709\u7528\u7684\u8b66\u544a\u4fe1\u606f\u3002\u8fd9\u4e9b\u8b66\u544a\u4fe1\u606f\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u975e\u5e38\u6709\u5e2e\u52a9\u3002\u7136\u800c\u8fd9\u4f7f\u5f97 React \u53d8\u5f97\u66f4\u5927\u4e14\u66f4\u6162\uff0c\u6240\u4ee5\u4f60\u9700\u8981\u786e\u4fdd\u90e8\u7f72\u65f6\u4f7f\u7528\u4e86\u751f\u4ea7\u7248\u672c\u3002</p>\n<p>\u5982\u679c\u4f60\u4e0d\u80fd\u786e\u5b9a\u4f60\u7684\u7f16\u8bd1\u8fc7\u7a0b\u662f\u5426\u8bbe\u7f6e\u6b63\u786e\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5 <a class=\"external-link\" href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi\">Chrome \u7684 React \u5f00\u53d1\u8005\u5de5\u5177</a> \u6765\u68c0\u67e5\u3002\u5982\u679c\u4f60\u6d4f\u89c8\u4e00\u4e2a\u57fa\u4e8e React \u751f\u4ea7\u7248\u672c\u7684\u7f51\u7ad9\uff0c\u56fe\u6807\u80cc\u666f\u4f1a\u53d8\u6210\u6df1\u8272\uff1a</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/d0f767f80866431ccdec18f200ca58f1/0a47e/devtools-prod.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/d0f767f80866431ccdec18f200ca58f1/0a47e/devtools-prod.png\">Image link</a>\n</span>\n</span>\n</a>\n<p>\u5982\u679c\u4f60\u6d4f\u89c8\u4e00\u4e2a\u57fa\u4e8e React \u5f00\u53d1\u6a21\u5f0f\u7684\u7f51\u7ad9\uff0c\u56fe\u6807\u80cc\u666f\u4f1a\u53d8\u6210\u7ea2\u8272\uff1a</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/e434ce2f7e64f63e597edf03f4465694/0a47e/devtools-dev.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/e434ce2f7e64f63e597edf03f4465694/0a47e/devtools-dev.png\">Image link</a>\n</span>\n</span>\n</a>\n<p>\u63a8\u8350\u4f60\u5728\u5f00\u53d1\u5e94\u7528\u65f6\u4f7f\u7528\u5f00\u53d1\u6a21\u5f0f\uff0c\u800c\u5728\u4e3a\u7528\u6237\u90e8\u7f72\u5e94\u7528\u65f6\u4f7f\u7528\u751f\u4ea7\u6a21\u5f0f\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728\u4e0b\u9762\u770b\u5230\u51e0\u79cd\u4e3a\u5e94\u7528\u6784\u5efa\u751f\u4ea7\u7248\u672c\u7684\u64cd\u4f5c\u8bf4\u660e\u3002</p>\n<h3 id=\"create-react-app\"><a class=\"anchor\" href=\"/react/optimizing-performance#create-react-app\"></a>Create React App </h3>\n<p>\u5982\u679c\u4f60\u7684\u9879\u76ee\u662f\u901a\u8fc7 <a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> \u6784\u5efa\u7684\uff0c\u8fd0\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">npm run build</code></pre></div>\n<p>\u8fd9\u6bb5\u547d\u4ee4\u5c06\u5728\u4f60\u7684\u9879\u76ee\u4e0b\u7684 <code class=\"language-javascript\">build/</code> \u76ee\u5f55\u4e2d\u751f\u6210\u5bf9\u5e94\u7684\u751f\u4ea7\u7248\u672c\u3002</p>\n<p>\u6ce8\u610f\u53ea\u6709\u5728\u751f\u4ea7\u90e8\u7f72\u524d\u624d\u9700\u8981\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\u3002\u6b63\u5e38\u5f00\u53d1\u4f7f\u7528 <code class=\"language-javascript\">npm start</code> \u5373\u53ef\u3002</p>\n<h3 id=\"single-file-builds\"><a class=\"anchor\" href=\"/react/optimizing-performance#single-file-builds\"></a>\u5355\u6587\u4ef6\u6784\u5efa </h3>\n<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u53ef\u4ee5\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528\u7684\u5355\u6587\u4ef6\u7248 React \u548c React DOM\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react@18/umd/react.production.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://unpkg.com/react-dom@18/umd/react-dom.production.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u6ce8\u610f\u53ea\u6709\u4ee5 <code class=\"language-javascript\">.production.min.js</code> \u4e3a\u7ed3\u5c3e\u7684 React \u6587\u4ef6\u9002\u7528\u4e8e\u751f\u4ea7\u3002</p>\n<h3 id=\"brunch\"><a class=\"anchor\" href=\"/react/optimizing-performance#brunch\"></a>Brunch </h3>\n<p>\u901a\u8fc7\u5b89\u88c5 <a class=\"external-link\" href=\"https://github.com/brunch/terser-brunch\"><code class=\"language-javascript\">terser-brunch</code></a> \u63d2\u4ef6\uff0c\u6765\u83b7\u5f97\u6700\u9ad8\u6548\u7684 Brunch \u751f\u4ea7\u6784\u5efa\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\"># \u5982\u679c\u4f60\u4f7f\u7528 npm\nnpm install --save-dev terser-brunch\n\n# \u5982\u679c\u4f60\u4f7f\u7528 Yarn\nyarn add --dev terser-brunch</code></pre></div>\n<p>\u63a5\u7740\uff0c\u5728 <code class=\"language-javascript\">build</code> \u547d\u4ee4\u540e\u6dfb\u52a0 <code class=\"language-javascript\">-p</code> \u53c2\u6570\uff0c\u4ee5\u521b\u5efa\u751f\u4ea7\u6784\u5efa\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">brunch build -p</code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u751f\u4ea7\u6784\u5efa\u65f6\u8fd9\u4e48\u505a\u3002\u4f60\u4e0d\u9700\u8981\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">-p</code> \u53c2\u6570\u6216\u8005\u5e94\u7528\u8fd9\u4e2a\u63d2\u4ef6\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u9690\u85cf\u6709\u7528\u7684 React \u8b66\u544a\u4fe1\u606f\u5e76\u4f7f\u5f97\u6784\u5efa\u901f\u5ea6\u53d8\u6162\u3002</p>\n<h3 id=\"browserify\"><a class=\"anchor\" href=\"/react/optimizing-performance#browserify\"></a>Browserify </h3>\n<p>\u4e3a\u4e86\u6700\u9ad8\u6548\u7684\u751f\u4ea7\u6784\u5efa\uff0c\u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u63d2\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\"># \u5982\u679c\u4f60\u4f7f\u7528 npm\nnpm install --save-dev envify terser uglifyify\n\n# \u5982\u679c\u4f60\u4f7f\u7528 Yarn\nyarn add --dev envify terser uglifyify</code></pre></div>\n<p>\u4e3a\u4e86\u521b\u5efa\u751f\u4ea7\u6784\u5efa\uff0c\u786e\u4fdd\u4f60\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u8f6c\u6362\u5668 <strong>\uff08\u987a\u5e8f\u5f88\u91cd\u8981\uff09</strong>\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/hughsk/envify\"><code class=\"language-javascript\">envify</code></a> \u8f6c\u6362\u5668\u7528\u4e8e\u8bbe\u7f6e\u6b63\u786e\u7684\u73af\u5883\u53d8\u91cf\u3002\u8bbe\u7f6e\u4e3a\u5168\u5c40 (<code class=\"language-javascript\">-g</code>)\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/hughsk/uglifyify\"><code class=\"language-javascript\">uglifyify</code></a> \u8f6c\u6362\u5668\u79fb\u9664\u5f00\u53d1\u76f8\u5173\u7684\u5f15\u7528\u4ee3\u7801\u3002\u540c\u6837\u8bbe\u7f6e\u4e3a\u5168\u5c40 (<code class=\"language-javascript\">-g</code>)\u3002</li>\n<li>\u6700\u540e\uff0c\u5c06\u4ea7\u7269\u4f20\u7ed9 <a class=\"external-link\" href=\"https://github.com/terser-js/terser\"><code class=\"language-javascript\">terser</code></a> \u5e76\u8fdb\u884c\u538b\u7f29\uff08<a class=\"external-link\" href=\"https://github.com/hughsk/uglifyify#motivationusage\">\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff1f</a>\uff09\u3002</li>\n</ul>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">browserify ./index.js \\\n  -g [ envify --NODE_ENV production ] \\\n  -g uglifyify \\\n  | terser --compress --mangle &gt; ./bundle.js</code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u751f\u4ea7\u6784\u5efa\u65f6\u7528\u5230\u5b83\u3002\u4f60\u4e0d\u9700\u8981\u5728\u5f00\u53d1\u73af\u5883\u5e94\u7528\u8fd9\u4e9b\u63d2\u4ef6\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u9690\u85cf\u6709\u7528\u7684 React \u8b66\u544a\u4fe1\u606f\u5e76\u4f7f\u5f97\u6784\u5efa\u901f\u5ea6\u53d8\u6162\u3002</p>\n<h3 id=\"rollup\"><a class=\"anchor\" href=\"/react/optimizing-performance#rollup\"></a>Rollup </h3>\n<p>\u4e3a\u4e86\u6700\u9ad8\u6548\u7684 Rollup \u751f\u4ea7\u6784\u5efa\uff0c\u9700\u8981\u5b89\u88c5\u4e00\u4e9b\u63d2\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\"># \u5982\u679c\u4f60\u4f7f\u7528 npm\nnpm install --save-dev rollup-plugin-commonjs rollup-plugin-replace rollup-plugin-terser\n\n# \u5982\u679c\u4f60\u4f7f\u7528 Yarn\nyarn add --dev rollup-plugin-commonjs rollup-plugin-replace rollup-plugin-terser</code></pre></div>\n<p>\u4e3a\u4e86\u521b\u5efa\u751f\u4ea7\u6784\u5efa\uff0c\u786e\u4fdd\u4f60\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u63d2\u4ef6 <strong>\uff08\u987a\u5e8f\u5f88\u91cd\u8981\uff09</strong>\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/rollup/rollup-plugin-replace\"><code class=\"language-javascript\">replace</code></a> \u63d2\u4ef6\u786e\u4fdd\u73af\u5883\u88ab\u6b63\u786e\u8bbe\u7f6e\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/rollup/rollup-plugin-commonjs\"><code class=\"language-javascript\">commonjs</code></a> \u63d2\u4ef6\u7528\u4e8e\u652f\u6301 CommonJS\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/TrySound/rollup-plugin-terser\"><code class=\"language-javascript\">terser</code></a> \u63d2\u4ef6\u7528\u4e8e\u538b\u7f29\u5e76\u751f\u6210\u6700\u7ec8\u7684\u4ea7\u7269\u3002</li>\n</ul>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-replace'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'process.env.NODE_ENV'</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token string\">'production'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-commonjs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rollup-plugin-terser'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://gist.github.com/Rich-Harris/cb14f4bc0670c47d00d191565be36bf0\">\u70b9\u51fb</a>\u67e5\u770b\u5b8c\u6574\u7684\u5b89\u88c5\u793a\u4f8b\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u751f\u4ea7\u6784\u5efa\u65f6\u7528\u5230\u5b83\u3002\u4f60\u4e0d\u9700\u8981\u5728\u5f00\u53d1\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">terser</code> \u63d2\u4ef6\u6216\u8005 <code class=\"language-javascript\">replace</code> \u63d2\u4ef6\u66ff\u6362 <code class=\"language-javascript\">'production'</code> \u53d8\u91cf\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u9690\u85cf\u6709\u7528\u7684 React \u8b66\u544a\u4fe1\u606f\u5e76\u4f7f\u5f97\u6784\u5efa\u901f\u5ea6\u53d8\u6162\u3002</p>\n<h3 id=\"webpack\"><a class=\"anchor\" href=\"/react/optimizing-performance#webpack\"></a>webpack </h3>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5982\u679c\u4f60\u4f7f\u7528\u4e86 Create React App\uff0c\u8bf7\u8ddf\u968f<a href=\"/react/optimizing-performance#create-react-app\">\u4e0a\u9762\u7684\u8bf4\u660e</a>\u8fdb\u884c\u64cd\u4f5c\u3002<br/>\n\u53ea\u6709\u5f53\u4f60\u76f4\u63a5\u914d\u7f6e\u4e86 webpack \u624d\u9700\u8981\u53c2\u8003\u4ee5\u4e0b\u5185\u5bb9\u3002</p>\n</div>\n<p>\u5728\u751f\u4ea7\u6a21\u5f0f\u4e0b\uff0cWebpack v4+ \u5c06\u9ed8\u8ba4\u5bf9\u4ee3\u7801\u8fdb\u884c\u538b\u7f29\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> TerserPlugin <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'terser-webpack-plugin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optimization</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">minimizer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">TerserPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token comment\">/* additional options here */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u5728 <a class=\"external-link\" href=\"https://webpack.js.org/guides/production/\">webpack \u6587\u6863</a>\u4e2d\u4e86\u89e3\u66f4\u591a\u5185\u5bb9\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4f60\u53ea\u9700\u8981\u5728\u751f\u4ea7\u6784\u5efa\u65f6\u7528\u5230\u5b83\u3002\u4f60\u4e0d\u9700\u8981\u5728\u5f00\u53d1\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">TerserPlugin</code> \u63d2\u4ef6\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u9690\u85cf\u6709\u7528\u7684 React \u8b66\u544a\u4fe1\u606f\u5e76\u4f7f\u5f97\u6784\u5efa\u901f\u5ea6\u53d8\u6162\u3002</p>\n<h2 id=\"profiling-components-with-the-devtools-profiler\"><a class=\"anchor\" href=\"/react/optimizing-performance#profiling-components-with-the-devtools-profiler\"></a>\u4f7f\u7528\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u7684\u5206\u6790\u5668\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u5206\u6790 </h2>\n<p><code class=\"language-javascript\">react-dom</code> 16.5+ \u548c <code class=\"language-javascript\">react-native</code> 0.57+ \u52a0\u5f3a\u4e86\u5206\u6790\u80fd\u529b\u3002\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\uff0cReact \u5f00\u53d1\u8005\u5de5\u5177\u4f1a\u51fa\u73b0\u5206\u6790\u5668\u6807\u7b7e\u3002\n\u4f60\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/09/10/introducing-the-react-profiler.html\">\u300a\u4ecb\u7ecd React \u5206\u6790\u5668\u300b</a>\u8fd9\u7bc7\u535a\u5ba2\u4e2d\u4e86\u89e3\u6982\u8ff0\u3002\n\u4f60\u4e5f\u53ef\u4ee5<a class=\"external-link\" href=\"https://www.youtube.com/watch?v=nySib7ipZdk\">\u5728 YouTube \u4e0a</a>\u89c2\u770b\u5206\u6790\u5668\u7684\u89c6\u9891\u6307\u5bfc\u3002</p>\n<p>\u5982\u679c\u4f60\u8fd8\u672a\u5b89\u88c5 React \u5f00\u53d1\u8005\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\u5b83\u4eec\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">Chrome \u6d4f\u89c8\u5668\u6269\u5c55</a></li>\n<li><a class=\"external-link\" href=\"https://addons.mozilla.org/en-GB/firefox/addon/react-devtools/\">Firefox \u6d4f\u89c8\u5668\u6269\u5c55</a></li>\n<li><a class=\"external-link\" href=\"https://www.npmjs.com/package/react-devtools\">\u72ec\u7acb Node \u5305</a></li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p><code class=\"language-javascript\">react-dom</code> \u7684\u751f\u4ea7\u5206\u6790\u5305\u4e5f\u53ef\u4ee5\u5728 <code class=\"language-javascript\">react-dom/profiling</code> \u4e2d\u627e\u5230\u3002\n\u901a\u8fc7\u67e5\u9605 <a class=\"external-link\" href=\"https://fb.me/react-profiling\">fb.me/react-profiling</a> \u6765\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u4f7f\u7528\u8fd9\u4e2a\u5305\u7684\u5185\u5bb9\u3002</p>\n</div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5728 React 17 \u4e4b\u524d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u6807\u51c6\u7684 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/User_Timing_API\">User Timing API</a>\uff0c\u7528 chrome \u7684 performance \u6027\u80fd\u9009\u9879\u5361\u6765\u914d\u7f6e\u7ec4\u4ef6\u3002\n\u66f4\u8be6\u7ec6\u7684\u653b\u7565\uff0c\u8bf7\u53c2\u9605 <a class=\"external-link\" href=\"https://calibreapp.com/blog/react-performance-profiling-optimization\">Ben Schwarz \u7684\u6587\u7ae0</a>\u3002</p>\n</div>\n<h2 id=\"virtualize-long-lists\"><a class=\"anchor\" href=\"/react/optimizing-performance#virtualize-long-lists\"></a>\u865a\u62df\u5316\u957f\u5217\u8868 </h2>\n<p>\u5982\u679c\u4f60\u7684\u5e94\u7528\u6e32\u67d3\u4e86\u957f\u5217\u8868\uff08\u4e0a\u767e\u751a\u81f3\u4e0a\u5343\u7684\u6570\u636e\uff09\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528\u201c\u865a\u62df\u6eda\u52a8\u201d\u6280\u672f\u3002\u8fd9\u9879\u6280\u672f\u4f1a\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u4ec5\u6e32\u67d3\u6709\u9650\u7684\u5185\u5bb9\uff0c\u5e76\u5947\u8ff9\u822c\u5730\u964d\u4f4e\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u6d88\u8017\u7684\u65f6\u95f4\uff0c\u4ee5\u53ca\u521b\u5efa DOM \u8282\u70b9\u7684\u6570\u91cf\u3002</p>\n<p><a class=\"external-link\" href=\"https://react-window.now.sh/\">react-window</a> \u548c <a class=\"external-link\" href=\"https://bvaughn.github.io/react-virtualized/\">react-virtualized</a> \u662f\u70ed\u95e8\u7684\u865a\u62df\u6eda\u52a8\u5e93\u3002\n\u5b83\u4eec\u63d0\u4f9b\u4e86\u591a\u79cd\u53ef\u590d\u7528\u7684\u7ec4\u4ef6\uff0c\u7528\u4e8e\u5c55\u793a\u5217\u8868\u3001\u7f51\u683c\u548c\u8868\u683c\u6570\u636e\u3002\n\u5982\u679c\u4f60\u60f3\u8981\u4e00\u4e9b\u9488\u5bf9\u4f60\u7684\u5e94\u7528\u505a\u5b9a\u5236\u4f18\u5316\uff0c\u4f60\u4e5f\u53ef\u4ee5\u521b\u5efa\u4f60\u81ea\u5df1\u7684\u865a\u62df\u6eda\u52a8\u7ec4\u4ef6\uff0c\u5c31\u50cf <a class=\"external-link\" href=\"https://medium.com/@paularmstrong/twitter-lite-and-high-performance-react-progressive-web-apps-at-scale-d28a00e780a3\">Twitter \u6240\u505a\u7684</a>\u3002</p>\n<h2 id=\"avoid-reconciliation\"><a class=\"anchor\" href=\"/react/optimizing-performance#avoid-reconciliation\"></a>\u907f\u514d\u8c03\u505c </h2>\n<p>React \u6784\u5efa\u5e76\u7ef4\u62a4\u4e86\u4e00\u5957\u5185\u90e8\u7684 UI \u6e32\u67d3\u63cf\u8ff0\u3002\u5b83\u5305\u542b\u4e86\u6765\u81ea\u4f60\u7684\u7ec4\u4ef6\u8fd4\u56de\u7684 React \u5143\u7d20\u3002\u8be5\u63cf\u8ff0\u4f7f\u5f97 React \u907f\u514d\u521b\u5efa DOM \u8282\u70b9\u4ee5\u53ca\u6ca1\u6709\u5fc5\u8981\u7684\u8282\u70b9\u8bbf\u95ee\uff0c\u56e0\u4e3a DOM \u64cd\u4f5c\u76f8\u5bf9\u4e8e JavaScript \u5bf9\u8c61\u64cd\u4f5c\u66f4\u6162\u3002\u867d\u7136\u6709\u65f6\u5019\u5b83\u88ab\u79f0\u4e3a\u201c\u865a\u62df DOM\u201d\uff0c\u4f46\u662f\u5b83\u5728 React Native \u4e2d\u62e5\u6709\u76f8\u540c\u7684\u5de5\u4f5c\u539f\u7406\u3002</p>\n<p>\u5f53\u4e00\u4e2a\u7ec4\u4ef6\u7684 props \u6216 state \u53d8\u66f4\uff0cReact \u4f1a\u5c06\u6700\u65b0\u8fd4\u56de\u7684\u5143\u7d20\u4e0e\u4e4b\u524d\u6e32\u67d3\u7684\u5143\u7d20\u8fdb\u884c\u5bf9\u6bd4\uff0c\u4ee5\u6b64\u51b3\u5b9a\u662f\u5426\u6709\u5fc5\u8981\u66f4\u65b0\u771f\u5b9e\u7684 DOM\u3002\u5f53\u5b83\u4eec\u4e0d\u76f8\u540c\u65f6\uff0cReact \u4f1a\u66f4\u65b0\u8be5 DOM\u3002</p>\n<p>\u5373\u4f7f React \u53ea\u66f4\u65b0\u6539\u53d8\u4e86\u7684 DOM \u8282\u70b9\uff0c\u91cd\u65b0\u6e32\u67d3\u4ecd\u7136\u82b1\u8d39\u4e86\u4e00\u4e9b\u65f6\u95f4\u3002\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u5b83\u5e76\u4e0d\u662f\u95ee\u9898\uff0c\u4e0d\u8fc7\u5982\u679c\u5b83\u5df2\u7ecf\u6162\u5230\u8ba9\u4eba\u6ce8\u610f\u4e86\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u8986\u76d6\u751f\u547d\u5468\u671f\u65b9\u6cd5 <code class=\"language-javascript\">shouldComponentUpdate</code> \u6765\u8fdb\u884c\u63d0\u901f\u3002\u8be5\u65b9\u6cd5\u4f1a\u5728\u91cd\u65b0\u6e32\u67d3\u524d\u88ab\u89e6\u53d1\u3002\u5176\u9ed8\u8ba4\u5b9e\u73b0\u603b\u662f\u8fd4\u56de <code class=\"language-javascript\">true</code>\uff0c\u8ba9 React \u6267\u884c\u66f4\u65b0\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u77e5\u9053\u5728\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f60\u7684\u7ec4\u4ef6\u4e0d\u9700\u8981\u66f4\u65b0\uff0c\u4f60\u53ef\u4ee5\u5728 <code class=\"language-javascript\">shouldComponentUpdate</code> \u4e2d\u8fd4\u56de <code class=\"language-javascript\">false</code> \u6765\u8df3\u8fc7\u6574\u4e2a\u6e32\u67d3\u8fc7\u7a0b\u3002\u5176\u5305\u62ec\u8be5\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render</code> \u8c03\u7528\u4ee5\u53ca\u4e4b\u540e\u7684\u64cd\u4f5c\u3002</p>\n<p>\u5728\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u7ee7\u627f <a href=\"/react/react-api#reactpurecomponent\"><code class=\"language-javascript\">React.PureComponent</code></a> \u4ee5\u4ee3\u66ff\u624b\u5199 <code class=\"language-javascript\">shouldComponentUpdate()</code>\u3002\u5b83\u7528\u5f53\u524d\u4e0e\u4e4b\u524d props \u548c state \u7684\u6d45\u6bd4\u8f83\u8986\u5199\u4e86 <code class=\"language-javascript\">shouldComponentUpdate()</code> \u7684\u5b9e\u73b0\u3002</p>\n<h2 id=\"shouldcomponentupdate-in-action\"><a class=\"anchor\" href=\"/react/optimizing-performance#shouldcomponentupdate-in-action\"></a>shouldComponentUpdate \u7684\u4f5c\u7528 </h2>\n<p>\u8fd9\u662f\u4e00\u4e2a\u7ec4\u4ef6\u7684\u5b50\u6811\u3002\u6bcf\u4e2a\u8282\u70b9\u4e2d\uff0c<code class=\"language-javascript\">SCU</code> \u4ee3\u8868 <code class=\"language-javascript\">shouldComponentUpdate</code> \u8fd4\u56de\u7684\u503c\uff0c\u800c <code class=\"language-javascript\">vDOMEq</code> \u4ee3\u8868\u8fd4\u56de\u7684 React \u5143\u7d20\u662f\u5426\u76f8\u540c\u3002\u6700\u540e\uff0c\u5706\u5708\u7684\u989c\u8272\u4ee3\u8868\u4e86\u8be5\u7ec4\u4ef6\u662f\u5426\u9700\u8981\u88ab\u8c03\u505c\u3002</p>\n<figure>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/5ee1bdf4779af06072a17b7a0654f6db/cd039/should-component-update.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/5ee1bdf4779af06072a17b7a0654f6db/cd039/should-component-update.png\">Image link</a>\n</span>\n</span>\n</a>\n</figure>\n<p>\u8282\u70b9 C2 \u7684 <code class=\"language-javascript\">shouldComponentUpdate</code> \u8fd4\u56de\u4e86 <code class=\"language-javascript\">false</code>\uff0cReact \u56e0\u800c\u4e0d\u4f1a\u53bb\u6e32\u67d3 C2\uff0c\u4e5f\u56e0\u6b64 C4 \u548c C5 \u7684 <code class=\"language-javascript\">shouldComponentUpdate</code> \u4e0d\u4f1a\u88ab\u8c03\u7528\u5230\u3002</p>\n<p>\u5bf9\u4e8e C1 \u548c C3\uff0c<code class=\"language-javascript\">shouldComponentUpdate</code> \u8fd4\u56de\u4e86 <code class=\"language-javascript\">true</code>\uff0c\u6240\u4ee5 React \u9700\u8981\u7ee7\u7eed\u5411\u4e0b\u67e5\u8be2\u5b50\u8282\u70b9\u3002\u8fd9\u91cc C6 \u7684 <code class=\"language-javascript\">shouldComponentUpdate</code> \u8fd4\u56de\u4e86 <code class=\"language-javascript\">true</code>\uff0c\u540c\u65f6\u7531\u4e8e\u6e32\u67d3\u7684\u5143\u7d20\u4e0e\u4e4b\u524d\u7684\u4e0d\u540c\u4f7f\u5f97 React \u66f4\u65b0\u4e86\u8be5 DOM\u3002</p>\n<p>\u6700\u540e\u4e00\u4e2a\u6709\u8da3\u7684\u4f8b\u5b50\u662f C8\u3002React \u9700\u8981\u6e32\u67d3\u8fd9\u4e2a\u7ec4\u4ef6\uff0c\u4f46\u662f\u7531\u4e8e\u5176\u8fd4\u56de\u7684 React \u5143\u7d20\u548c\u4e4b\u524d\u6e32\u67d3\u7684\u76f8\u540c\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u66f4\u65b0 DOM\u3002</p>\n<p>\u663e\u800c\u6613\u89c1\uff0c\u4f60\u770b\u5230 React \u53ea\u6539\u53d8\u4e86 C6 \u7684 DOM\u3002\u5bf9\u4e8e C8\uff0c\u901a\u8fc7\u5bf9\u6bd4\u4e86\u6e32\u67d3\u7684 React \u5143\u7d20\u8df3\u8fc7\u4e86\u6e32\u67d3\u3002\u800c\u5bf9\u4e8e C2 \u7684\u5b50\u8282\u70b9\u548c C7\uff0c\u7531\u4e8e <code class=\"language-javascript\">shouldComponentUpdate</code> \u4f7f\u5f97 <code class=\"language-javascript\">render</code> \u5e76\u6ca1\u6709\u88ab\u8c03\u7528\u3002\u56e0\u6b64\u5b83\u4eec\u4e5f\u4e0d\u9700\u8981\u5bf9\u6bd4\u5143\u7d20\u4e86\u3002</p>\n<h2 id=\"examples\"><a class=\"anchor\" href=\"/react/optimizing-performance#examples\"></a>\u793a\u4f8b </h2>\n<p>\u5982\u679c\u4f60\u7684\u7ec4\u4ef6\u53ea\u6709\u5f53 <code class=\"language-javascript\">props.color</code> \u6216\u8005 <code class=\"language-javascript\">state.count</code> \u7684\u503c\u6539\u53d8\u624d\u9700\u8981\u66f4\u65b0\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">shouldComponentUpdate</code> \u6765\u8fdb\u884c\u68c0\u67e5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CounterButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>color <span class=\"token operator\">!==</span> nextProps<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">!==</span> nextState<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">color</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Count: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u6bb5\u4ee3\u7801\u4e2d\uff0c<code class=\"language-javascript\">shouldComponentUpdate</code> \u4ec5\u68c0\u67e5\u4e86 <code class=\"language-javascript\">props.color</code> \u6216 <code class=\"language-javascript\">state.count</code> \u662f\u5426\u6539\u53d8\u3002\u5982\u679c\u8fd9\u4e9b\u503c\u6ca1\u6709\u6539\u53d8\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7ec4\u4ef6\u4e0d\u4f1a\u66f4\u65b0\u3002\u5982\u679c\u4f60\u7684\u7ec4\u4ef6\u66f4\u590d\u6742\u4e00\u4e9b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\u201c\u6d45\u6bd4\u8f83\u201d\u7684\u6a21\u5f0f\u6765\u68c0\u67e5 <code class=\"language-javascript\">props</code> \u548c <code class=\"language-javascript\">state</code> \u4e2d\u6240\u6709\u7684\u5b57\u6bb5\uff0c\u4ee5\u6b64\u6765\u51b3\u5b9a\u662f\u5426\u7ec4\u4ef6\u9700\u8981\u66f4\u65b0\u3002React \u5df2\u7ecf\u63d0\u4f9b\u4e86\u4e00\u4f4d\u597d\u5e2e\u624b\u6765\u5e2e\u4f60\u5b9e\u73b0\u8fd9\u79cd\u5e38\u89c1\u7684\u6a21\u5f0f - \u4f60\u53ea\u8981\u7ee7\u627f <code class=\"language-javascript\">React.PureComponent</code> \u5c31\u884c\u4e86\u3002\u6240\u4ee5\u8fd9\u6bb5\u4ee3\u7801\u53ef\u4ee5\u6539\u6210\u4ee5\u4e0b\u8fd9\u79cd\u66f4\u7b80\u6d01\u7684\u5f62\u5f0f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CounterButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">color</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Count: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">React.PureComponent</code> \u6765\u4ee3\u66ff\u624b\u5199 <code class=\"language-javascript\">shouldComponentUpdate</code>\u3002\u4f46\u5b83\u53ea\u8fdb\u884c\u6d45\u6bd4\u8f83\uff0c\u6240\u4ee5\u5f53 props \u6216\u8005 state \u67d0\u79cd\u7a0b\u5ea6\u662f\u53ef\u53d8\u7684\u8bdd\uff0c\u6d45\u6bd4\u8f83\u4f1a\u6709\u9057\u6f0f\uff0c\u90a3\u4f60\u5c31\u4e0d\u80fd\u4f7f\u7528\u5b83\u4e86\u3002\u5f53\u6570\u636e\u7ed3\u6784\u5f88\u590d\u6742\u65f6\uff0c\u60c5\u51b5\u4f1a\u53d8\u5f97\u9ebb\u70e6\u3002\u4f8b\u5982\uff0c\u4f60\u60f3\u8981\u4e00\u4e2a <code class=\"language-javascript\">ListOfWords</code> \u7ec4\u4ef6\u6765\u6e32\u67d3\u4e00\u7ec4\u7528\u9017\u53f7\u5206\u5f00\u7684\u5355\u8bcd\u3002\u5b83\u6709\u4e00\u4e2a\u53eb\u505a <code class=\"language-javascript\">WordAdder</code> \u7684\u7236\u7ec4\u4ef6\uff0c\u8be5\u7ec4\u4ef6\u5141\u8bb8\u4f60\u70b9\u51fb\u4e00\u4e2a\u6309\u94ae\u6765\u6dfb\u52a0\u4e00\u4e2a\u5355\u8bcd\u5230\u5217\u8868\u4e2d\u3002\u4ee5\u4e0b\u4ee3\u7801<em>\u5e76\u4e0d</em>\u6b63\u786e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ListOfWords</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WordAdder</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">words</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'marklar'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u8fd9\u90e8\u5206\u4ee3\u7801\u5f88\u7cdf\uff0c\u800c\u4e14\u8fd8\u6709 bug</span>\n    <span class=\"token keyword\">const</span> words <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">;</span>\n    words<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'marklar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">words</span><span class=\"token operator\">:</span> words<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListOfWords</span></span> <span class=\"token attr-name\">words</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u95ee\u9898\u5728\u4e8e <code class=\"language-javascript\">PureComponent</code> \u4ec5\u4ec5\u4f1a\u5bf9\u65b0\u8001 <code class=\"language-javascript\">this.props.words</code> \u7684\u503c\u8fdb\u884c\u7b80\u5355\u7684\u5bf9\u6bd4\u3002\u7531\u4e8e\u4ee3\u7801\u4e2d <code class=\"language-javascript\">WordAdder</code> \u7684 <code class=\"language-javascript\">handleClick</code> \u65b9\u6cd5\u6539\u53d8\u4e86\u540c\u4e00\u4e2a <code class=\"language-javascript\">words</code> \u6570\u7ec4\uff0c\u4f7f\u5f97\u65b0\u8001 <code class=\"language-javascript\">this.props.words</code> \u6bd4\u8f83\u7684\u5176\u5b9e\u8fd8\u662f\u540c\u4e00\u4e2a\u6570\u7ec4\u3002\u5373\u4fbf\u5b9e\u9645\u4e0a\u6570\u7ec4\u4e2d\u7684\u5355\u8bcd\u5df2\u7ecf\u53d8\u4e86\uff0c\u4f46\u662f\u6bd4\u8f83\u7ed3\u679c\u662f\u76f8\u540c\u7684\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u5373\u4fbf\u591a\u4e86\u65b0\u7684\u5355\u8bcd\u9700\u8981\u88ab\u6e32\u67d3\uff0c <code class=\"language-javascript\">ListOfWords</code> \u5374\u5e76\u6ca1\u6709\u88ab\u66f4\u65b0\u3002</p>\n<h2 id=\"the-power-of-not-mutating-data\"><a class=\"anchor\" href=\"/react/optimizing-performance#the-power-of-not-mutating-data\"></a>\u4e0d\u53ef\u53d8\u6570\u636e\u7684\u529b\u91cf </h2>\n<p>\u907f\u514d\u8be5\u95ee\u9898\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u907f\u514d\u66f4\u6539\u4f60\u6b63\u7528\u4e8e props \u6216 state \u7684\u503c\u3002\u4f8b\u5982\uff0c\u4e0a\u9762 <code class=\"language-javascript\">handleClick</code> \u65b9\u6cd5\u53ef\u4ee5\u7528 <code class=\"language-javascript\">concat</code> \u91cd\u5199\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">words</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'marklar'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ES6 \u6570\u7ec4\u652f\u6301<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator\">\u6269\u5c55\u8fd0\u7b97\u7b26</a>\uff0c\u8fd9\u8ba9\u4ee3\u7801\u5199\u8d77\u6765\u66f4\u65b9\u4fbf\u4e86\u3002\u5982\u679c\u4f60\u5728\u4f7f\u7528 Create React App\uff0c\u8be5\u8bed\u6cd5\u5df2\u7ecf\u9ed8\u8ba4\u652f\u6301\u4e86\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">words</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">.</span>words<span class=\"token punctuation\">,</span> <span class=\"token string\">'marklar'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u5f0f\u6539\u5199\u4ee3\u7801\u6765\u907f\u514d\u53ef\u53d8\u5bf9\u8c61\u7684\u4ea7\u751f\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u53eb\u505a <code class=\"language-javascript\">colormap</code> \u7684\u5bf9\u8c61\u3002\u6211\u4eec\u5e0c\u671b\u5199\u4e00\u4e2a\u65b9\u6cd5\u6765\u5c06 <code class=\"language-javascript\">colormap.right</code> \u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">'blue'</code>\u3002\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u5199\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">updateColorMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">colormap</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  colormap<span class=\"token punctuation\">.</span>right <span class=\"token operator\">=</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e3a\u4e86\u4e0d\u6539\u53d8\u539f\u672c\u7684\u5bf9\u8c61\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\">Object.assign</a> \u65b9\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">updateColorMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">colormap</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> colormap<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728 <code class=\"language-javascript\">updateColorMap</code> \u8fd4\u56de\u4e86\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u4fee\u6539\u8001\u5bf9\u8c61\u3002<code class=\"language-javascript\">Object.assign</code> \u662f ES6 \u7684\u65b9\u6cd5\uff0c\u9700\u8981 polyfill\u3002</p>\n<p>\u8fd9\u91cc\u6709\u4e00\u4e2a JavaScript \u7684\u63d0\u6848\uff0c\u65e8\u5728\u6dfb\u52a0<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">\u5bf9\u8c61\u6269\u5c55\u5c5e\u6027</a>\u4ee5\u4f7f\u5f97\u66f4\u65b0\u4e0d\u53ef\u53d8\u5bf9\u8c61\u53d8\u5f97\u66f4\u65b9\u4fbf\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">updateColorMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">colormap</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>colormap<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">right</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6b64\u7279\u6027\u5df2\u88ab\u6536\u5f55\u5728 JavaScript \u7684 ES2018 \u4e2d\u3002</p>\n<p>\u5982\u679c\u4f60\u5728\u4f7f\u7528 Create React App\uff0c<code class=\"language-javascript\">Object.assign</code> \u4ee5\u53ca\u5bf9\u8c61\u6269\u5c55\u8fd0\u7b97\u7b26\u5df2\u7ecf\u9ed8\u8ba4\u652f\u6301\u4e86\u3002</p>\n<p>\u5f53\u5904\u7406\u6df1\u5c42\u5d4c\u5957\u5bf9\u8c61\u65f6\uff0c\u4ee5 immutable \uff08\u4e0d\u53ef\u53d8\uff09\u7684\u65b9\u5f0f\u66f4\u65b0\u5b83\u4eec\u4ee4\u4eba\u8d39\u89e3\u3002\u5982\u9047\u5230\u6b64\u7c7b\u95ee\u9898\uff0c\u8bf7\u53c2\u9605 <a class=\"external-link\" href=\"https://github.com/mweststrate/immer\">Immer</a> \u6216 <a class=\"external-link\" href=\"https://github.com/kolodny/immutability-helper\">immutability-helper</a>\u3002\u8fd9\u4e9b\u5e93\u4f1a\u5e2e\u52a9\u4f60\u7f16\u5199\u9ad8\u53ef\u8bfb\u6027\u7684\u4ee3\u7801\uff0c\u4e14\u4e0d\u4f1a\u5931\u53bb immutability \uff08\u4e0d\u53ef\u53d8\u6027\uff09\u5e26\u6765\u7684\u597d\u5904\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/optimizing-performance.md\">Edit this page</a></p></div></article>", "path": "/react/optimizing-performance", "nav": ["/react/jsx-in-depth", "/react/portals"]}, {"key": "Portals", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>Portal \u63d0\u4f9b\u4e86\u4e00\u79cd\u5c06\u5b50\u8282\u70b9\u6e32\u67d3\u5230\u5b58\u5728\u4e8e\u7236\u7ec4\u4ef6\u4ee5\u5916\u7684 DOM \u8282\u70b9\u7684\u4f18\u79c0\u7684\u65b9\u6848\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u7b2c\u4e00\u4e2a\u53c2\u6570\uff08<code class=\"language-javascript\">child</code>\uff09\u662f\u4efb\u4f55<a href=\"/react/react-component#render\">\u53ef\u6e32\u67d3\u7684 React \u5b50\u5143\u7d20</a>\uff0c\u4f8b\u5982\u4e00\u4e2a\u5143\u7d20\uff0c\u5b57\u7b26\u4e32\u6216 fragment\u3002\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff08<code class=\"language-javascript\">container</code>\uff09\u662f\u4e00\u4e2a DOM \u5143\u7d20\u3002</p>\n<h2 id=\"usage\"><a class=\"anchor\" href=\"/react/portals#usage\"></a>\u7528\u6cd5 </h2>\n<p>\u901a\u5e38\u6765\u8bb2\uff0c\u5f53\u4f60\u4ece\u7ec4\u4ef6\u7684 render \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u8be5\u5143\u7d20\u5c06\u88ab\u6302\u8f7d\u5230 DOM \u8282\u70b9\u4e2d\u79bb\u5176\u6700\u8fd1\u7684\u7236\u8282\u70b9\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// React \u6302\u8f7d\u4e86\u4e00\u4e2a\u65b0\u7684 div\uff0c\u5e76\u4e14\u628a\u5b50\u5143\u7d20\u6e32\u67d3\u5176\u4e2d</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7136\u800c\uff0c\u6709\u65f6\u5019\u5c06\u5b50\u5143\u7d20\u63d2\u5165\u5230 DOM \u8282\u70b9\u4e2d\u7684\u4e0d\u540c\u4f4d\u7f6e\u4e5f\u662f\u6709\u597d\u5904\u7684\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// React \u5e76*\u6ca1\u6709*\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 div\u3002\u5b83\u53ea\u662f\u628a\u5b50\u5143\u7d20\u6e32\u67d3\u5230 `domNode` \u4e2d\u3002</span>\n  <span class=\"token comment\">// `domNode` \u662f\u4e00\u4e2a\u53ef\u4ee5\u5728\u4efb\u4f55\u4f4d\u7f6e\u7684\u6709\u6548 DOM \u8282\u70b9\u3002</span>\n  <span class=\"token keyword\">return</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    domNode</span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e00\u4e2a portal \u7684\u5178\u578b\u7528\u4f8b\u662f\u5f53\u7236\u7ec4\u4ef6\u6709 <code class=\"language-javascript\">overflow: hidden</code> \u6216 <code class=\"language-javascript\">z-index</code> \u6837\u5f0f\u65f6\uff0c\u4f46\u4f60\u9700\u8981\u5b50\u7ec4\u4ef6\u80fd\u591f\u5728\u89c6\u89c9\u4e0a\u201c\u8df3\u51fa\u201d\u5176\u5bb9\u5668\u3002\u4f8b\u5982\uff0c\u5bf9\u8bdd\u6846\u3001\u60ac\u6d6e\u5361\u4ee5\u53ca\u63d0\u793a\u6846\uff1a</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u5f53\u5728\u4f7f\u7528 portal \u65f6, \u8bb0\u4f4f<a href=\"/react/accessibility#programmatically-managing-focus\">\u7ba1\u7406\u952e\u76d8\u7126\u70b9</a>\u5c31\u53d8\u5f97\u5c24\u4e3a\u91cd\u8981\u3002</p>\n<p>\u5bf9\u4e8e\u6a21\u6001\u5bf9\u8bdd\u6846\uff0c\u901a\u8fc7\u9075\u5faa <a class=\"external-link\" href=\"https://www.w3.org/TR/wai-aria-practices-1.1/#dialog_modal\">WAI-ARIA \u6a21\u6001\u5f00\u53d1\u5b9e\u8df5</a>\uff0c\u6765\u786e\u4fdd\u6bcf\u4e2a\u4eba\u90fd\u80fd\u591f\u8fd0\u7528\u5b83\u3002</p>\n</div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/yzMaBd\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<h2 id=\"event-bubbling-through-portals\"><a class=\"anchor\" href=\"/react/portals#event-bubbling-through-portals\"></a>\u901a\u8fc7 Portal \u8fdb\u884c\u4e8b\u4ef6\u5192\u6ce1 </h2>\n<p>\u5c3d\u7ba1 portal \u53ef\u4ee5\u88ab\u653e\u7f6e\u5728 DOM \u6811\u4e2d\u7684\u4efb\u4f55\u5730\u65b9\uff0c\u4f46\u5728\u4efb\u4f55\u5176\u4ed6\u65b9\u9762\uff0c\u5176\u884c\u4e3a\u548c\u666e\u901a\u7684 React \u5b50\u8282\u70b9\u884c\u4e3a\u4e00\u81f4\u3002\u7531\u4e8e portal \u4ecd\u5b58\u5728\u4e8e <em>React \u6811</em>\uff0c \u4e14\u4e0e <em>DOM \u6811</em> \u4e2d\u7684\u4f4d\u7f6e\u65e0\u5173\uff0c\u90a3\u4e48\u65e0\u8bba\u5176\u5b50\u8282\u70b9\u662f\u5426\u662f portal\uff0c\u50cf context \u8fd9\u6837\u7684\u529f\u80fd\u7279\u6027\u90fd\u662f\u4e0d\u53d8\u7684\u3002</p>\n<p>\u8fd9\u5305\u542b\u4e8b\u4ef6\u5192\u6ce1\u3002\u4e00\u4e2a\u4ece portal \u5185\u90e8\u89e6\u53d1\u7684\u4e8b\u4ef6\u4f1a\u4e00\u76f4\u5192\u6ce1\u81f3\u5305\u542b <em>React \u6811</em>\u7684\u7956\u5148\uff0c\u5373\u4fbf\u8fd9\u4e9b\u5143\u7d20\u5e76\u4e0d\u662f <em>DOM \u6811</em> \u4e2d\u7684\u7956\u5148\u3002\u5047\u8bbe\u5b58\u5728\u5982\u4e0b HTML \u7ed3\u6784\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app-root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>modal-root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728 <code class=\"language-javascript\">#app-root</code> \u91cc\u7684 <code class=\"language-javascript\">Parent</code> \u7ec4\u4ef6\u80fd\u591f\u6355\u83b7\u5230\u672a\u88ab\u6355\u83b7\u7684\u4ece\u5144\u5f1f\u8282\u70b9 <code class=\"language-javascript\">#modal-root</code> \u5192\u6ce1\u4e0a\u6765\u7684\u4e8b\u4ef6\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u5728 DOM \u4e2d\u6709\u4e24\u4e2a\u5bb9\u5668\u662f\u5144\u5f1f\u7ea7 \uff08siblings\uff09</span>\n<span class=\"token keyword\">const</span> appRoot <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app-root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> modalRoot <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'modal-root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Modal</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5728 Modal \u7684\u6240\u6709\u5b50\u5143\u7d20\u88ab\u6302\u8f7d\u540e\uff0c</span>\n    <span class=\"token comment\">// \u8fd9\u4e2a portal \u5143\u7d20\u4f1a\u88ab\u5d4c\u5165\u5230 DOM \u6811\u4e2d\uff0c</span>\n    <span class=\"token comment\">// \u8fd9\u610f\u5473\u7740\u5b50\u5143\u7d20\u5c06\u88ab\u6302\u8f7d\u5230\u4e00\u4e2a\u5206\u79bb\u7684 DOM \u8282\u70b9\u4e2d\u3002</span>\n    <span class=\"token comment\">// \u5982\u679c\u8981\u6c42\u5b50\u7ec4\u4ef6\u5728\u6302\u8f7d\u65f6\u53ef\u4ee5\u7acb\u523b\u63a5\u5165 DOM \u6811\uff0c</span>\n    <span class=\"token comment\">// \u4f8b\u5982\u8861\u91cf\u4e00\u4e2a DOM \u8282\u70b9\uff0c</span>\n    <span class=\"token comment\">// \u6216\u8005\u5728\u540e\u4ee3\u8282\u70b9\u4e2d\u4f7f\u7528 \u2018autoFocus\u2019\uff0c</span>\n    <span class=\"token comment\">// \u5219\u9700\u6dfb\u52a0 state \u5230 Modal \u4e2d\uff0c</span>\n    <span class=\"token comment\">// \u4ec5\u5f53 Modal \u88ab\u63d2\u5165 DOM \u6811\u4e2d\u624d\u80fd\u6e32\u67d3\u5b50\u5143\u7d20\u3002</span>\n    modalRoot<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    modalRoot<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">clicks</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u5f53\u5b50\u5143\u7d20\u91cc\u7684\u6309\u94ae\u88ab\u70b9\u51fb\u65f6\uff0c</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u8fd9\u4e2a\u5c06\u4f1a\u88ab\u89e6\u53d1\u66f4\u65b0\u7236\u5143\u7d20\u7684 state\uff0c</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u5373\u4f7f\u8fd9\u4e2a\u6309\u94ae\u5728 DOM \u4e2d\u4e0d\u662f\u76f4\u63a5\u5173\u8054\u7684\u540e\u4ee3</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">clicks</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>clicks <span class=\"token operator\">+</span> <span class=\"token number\">1</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Number of clicks: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>clicks<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          Open up the browser DevTools</span>\n<span class=\"token plain-text\">          to observe that the button</span>\n<span class=\"token plain-text\">          is not a child of the div</span>\n<span class=\"token plain-text\">          with the onClick handler.</span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Modal</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Modal</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u8fd9\u4e2a\u6309\u94ae\u7684\u70b9\u51fb\u4e8b\u4ef6\u4f1a\u5192\u6ce1\u5230\u7236\u5143\u7d20</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u56e0\u4e3a\u8fd9\u91cc\u6ca1\u6709\u5b9a\u4e49 'onClick' \u5c5e\u6027</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>modal<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>appRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Parent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/jGBWpE\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u5728\u7236\u7ec4\u4ef6\u91cc\u6355\u83b7\u4e00\u4e2a\u6765\u81ea portal \u5192\u6ce1\u4e0a\u6765\u7684\u4e8b\u4ef6\uff0c\u4f7f\u4e4b\u80fd\u591f\u5728\u5f00\u53d1\u65f6\u5177\u6709\u4e0d\u5b8c\u5168\u4f9d\u8d56\u4e8e portal \u7684\u66f4\u4e3a\u7075\u6d3b\u7684\u62bd\u8c61\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u5728\u6e32\u67d3\u4e00\u4e2a <code class=\"language-javascript\">&lt;Modal /&gt;</code> \u7ec4\u4ef6\uff0c\u65e0\u8bba\u5176\u662f\u5426\u91c7\u7528 portal \u5b9e\u73b0\uff0c\u7236\u7ec4\u4ef6\u90fd\u80fd\u591f\u6355\u83b7\u5176\u4e8b\u4ef6\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/portals.md\">Edit this page</a></p></div></article>", "path": "/react/portals", "nav": ["/react/optimizing-performance", "/react/profiler"]}, {"key": "Profiler", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><code class=\"language-javascript\">Profiler</code> \u6d4b\u91cf\u4e00\u4e2a React \u5e94\u7528\u591a\u4e45\u6e32\u67d3\u4e00\u6b21\u4ee5\u53ca\u6e32\u67d3\u4e00\u6b21\u7684\u201c\u4ee3\u4ef7\u201d\u3002\n\u5b83\u7684\u76ee\u7684\u662f\u8bc6\u522b\u51fa\u5e94\u7528\u4e2d\u6e32\u67d3\u8f83\u6162\u7684\u90e8\u5206\uff0c\u6216\u662f\u53ef\u4ee5\u4f7f\u7528<a href=\"/react/hooks-faq#how-to-memoize-calculations\">\u7c7b\u4f3c memoization \u4f18\u5316</a>\u7684\u90e8\u5206\uff0c\u5e76\u4ece\u76f8\u5173\u4f18\u5316\u4e2d\u83b7\u76ca\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>Profiling \u589e\u52a0\u4e86\u989d\u5916\u7684\u5f00\u652f\uff0c\u6240\u4ee5<strong>\u5b83\u5728<a href=\"/react/optimizing-performance#use-the-production-build\">\u751f\u4ea7\u6784\u5efa</a>\u4e2d\u4f1a\u88ab\u7981\u7528</strong>\u3002</p>\n<p>\u4e3a\u4e86\u5c06 profiling \u529f\u80fd\u52a0\u5165\u751f\u4ea7\u73af\u5883\u4e2d\uff0cReact \u63d0\u4f9b\u4e86\u4f7f profiling \u53ef\u7528\u7684\u7279\u6b8a\u7684\u751f\u4ea7\u6784\u5efa\u73af\u5883\u3002\n\u4ece <a class=\"external-link\" href=\"https://fb.me/react-profiling\">fb.me/react-profiling</a>\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u8fd9\u4e2a\u6784\u5efa\u73af\u5883\u7684\u4fe1\u606f\u3002</p>\n</div>\n<h2 id=\"usage\"><a class=\"anchor\" href=\"/react/profiler#usage\"></a>\u7528\u6cd5 </h2>\n<p><code class=\"language-javascript\">Profiler</code> \u80fd\u6dfb\u52a0\u5728 React \u6811\u4e2d\u7684\u4efb\u4f55\u5730\u65b9\u6765\u6d4b\u91cf\u6811\u4e2d\u8fd9\u90e8\u5206\u6e32\u67d3\u6240\u5e26\u6765\u7684\u5f00\u9500\u3002\n\u5b83\u9700\u8981\u4e24\u4e2a prop \uff1a\u4e00\u4e2a\u662f <code class=\"language-javascript\">id</code>(string)\uff0c\u4e00\u4e2a\u662f\u5f53\u7ec4\u4ef6\u6811\u4e2d\u7684\u7ec4\u4ef6\u201c\u63d0\u4ea4\u201d\u66f4\u65b0\u7684\u65f6\u5019\u88abReact\u8c03\u7528\u7684\u56de\u8c03\u51fd\u6570 <code class=\"language-javascript\">onRender</code>(function)\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4e3a\u4e86\u5206\u6790 <code class=\"language-javascript\">Navigation</code> \u7ec4\u4ef6\u548c\u5b83\u7684\u5b50\u4ee3\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profiler</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Navigation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onRender</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>callback<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navigation</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Profiler</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Main</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u591a\u4e2a <code class=\"language-javascript\">Profiler</code> \u7ec4\u4ef6\u80fd\u6d4b\u91cf\u5e94\u7528\u4e2d\u7684\u4e0d\u540c\u90e8\u5206\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profiler</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Navigation<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onRender</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>callback<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navigation</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Profiler</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profiler</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Main<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onRender</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>callback<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Main</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Profiler</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5d4c\u5957\u4f7f\u7528 <code class=\"language-javascript\">Profiler</code> \u7ec4\u4ef6\u6765\u6d4b\u91cf\u76f8\u540c\u4e00\u4e2a\u5b50\u6811\u4e0b\u7684\u4e0d\u540c\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profiler</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Panel<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onRender</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>callback<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Panel</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profiler</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Content<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onRender</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>callback<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Content</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Profiler</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profiler</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>PreviewPane<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onRender</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>callback<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PreviewPane</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Profiler</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Panel</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Profiler</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">App</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5c3d\u7ba1 <code class=\"language-javascript\">Profiler</code> \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7ec4\u4ef6\uff0c\u6211\u4eec\u4f9d\u7136\u5e94\u8be5\u5728\u9700\u8981\u65f6\u624d\u53bb\u4f7f\u7528\u5b83\u3002\u5bf9\u4e00\u4e2a\u5e94\u7528\u6765\u8bf4\uff0c\u6bcf\u6dfb\u52a0\u4e00\u4e9b\u90fd\u4f1a\u7ed9 CPU \u548c\u5185\u5b58\u5e26\u6765\u4e00\u4e9b\u8d1f\u62c5\u3002</p>\n</div>\n<h2 id=\"onrender-callback\"><a class=\"anchor\" href=\"/react/profiler#onrender-callback\"></a><code class=\"language-javascript\">onRender</code> \u56de\u8c03 </h2>\n<p><code class=\"language-javascript\">Profiler</code> \u9700\u8981\u4e00\u4e2a <code class=\"language-javascript\">onRender</code> \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002\nReact \u4f1a\u5728 profile \u5305\u542b\u7684\u7ec4\u4ef6\u6811\u4e2d\u4efb\u4f55\u7ec4\u4ef6 \u201c\u63d0\u4ea4\u201d \u4e00\u4e2a\u66f4\u65b0\u7684\u65f6\u5019\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002\n\u5b83\u7684\u53c2\u6570\u63cf\u8ff0\u4e86\u6e32\u67d3\u4e86\u4ec0\u4e48\u548c\u82b1\u8d39\u4e86\u591a\u4e45\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">onRenderCallback</span><span class=\"token punctuation\">(</span>\n  id<span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u53d1\u751f\u63d0\u4ea4\u7684 Profiler \u6811\u7684 \u201cid\u201d</span>\n  phase<span class=\"token punctuation\">,</span> <span class=\"token comment\">// \"mount\" \uff08\u5982\u679c\u7ec4\u4ef6\u6811\u521a\u52a0\u8f7d\uff09 \u6216\u8005 \"update\" \uff08\u5982\u679c\u5b83\u91cd\u6e32\u67d3\u4e86\uff09\u4e4b\u4e00</span>\n  actualDuration<span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u672c\u6b21\u66f4\u65b0 committed \u82b1\u8d39\u7684\u6e32\u67d3\u65f6\u95f4</span>\n  baseDuration<span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u4f30\u8ba1\u4e0d\u4f7f\u7528 memoization \u7684\u60c5\u51b5\u4e0b\u6e32\u67d3\u6574\u68f5\u5b50\u6811\u9700\u8981\u7684\u65f6\u95f4</span>\n  startTime<span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u672c\u6b21\u66f4\u65b0\u4e2d React \u5f00\u59cb\u6e32\u67d3\u7684\u65f6\u95f4</span>\n  commitTime<span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u672c\u6b21\u66f4\u65b0\u4e2d React committed \u7684\u65f6\u95f4</span>\n  interactions <span class=\"token comment\">// \u5c5e\u4e8e\u672c\u6b21\u66f4\u65b0\u7684 interactions \u7684\u96c6\u5408</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u5408\u8ba1\u6216\u8bb0\u5f55\u6e32\u67d3\u65f6\u95f4\u3002\u3002\u3002</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8ba9\u6211\u4eec\u6765\u4ed4\u7ec6\u7814\u7a76\u4e00\u4e0b\u5404\u4e2a prop:</p>\n<ul>\n<li><strong><code class=\"language-javascript\">id: string</code></strong> -\n\u53d1\u751f\u63d0\u4ea4\u7684 <code class=\"language-javascript\">Profiler</code> \u6811\u7684 <code class=\"language-javascript\">id</code>\u3002\n\u5982\u679c\u6709\u591a\u4e2a profiler\uff0c\u5b83\u80fd\u7528\u6765\u5206\u8fa8\u6811\u7684\u54ea\u4e00\u90e8\u5206\u53d1\u751f\u4e86\u201c\u63d0\u4ea4\u201d\u3002</li>\n<li><strong><code class=\"language-javascript\">phase: \"mount\" | \"update\"</code></strong> -\n\u5224\u65ad\u662f\u7ec4\u4ef6\u6811\u7684\u7b2c\u4e00\u6b21\u88c5\u8f7d\u5f15\u8d77\u7684\u91cd\u6e32\u67d3\uff0c\u8fd8\u662f\u7531 props\u3001state \u6216\u662f hooks \u6539\u53d8\u5f15\u8d77\u7684\u91cd\u6e32\u67d3\u3002</li>\n<li><strong><code class=\"language-javascript\">actualDuration: number</code></strong> -\n\u672c\u6b21\u66f4\u65b0\u5728\u6e32\u67d3 <code class=\"language-javascript\">Profiler</code> \u548c\u5b83\u7684\u5b50\u4ee3\u4e0a\u82b1\u8d39\u7684\u65f6\u95f4\u3002\n\u8fd9\u4e2a\u6570\u503c\u8868\u660e\u4f7f\u7528 memoization \u4e4b\u540e\u80fd\u8868\u73b0\u5f97\u591a\u597d\u3002\uff08\u4f8b\u5982 <a href=\"/react/react-api#reactmemo\"><code class=\"language-javascript\">React.memo</code></a>\uff0c<a href=\"/react/hooks-reference#usememo\"><code class=\"language-javascript\">useMemo</code></a>\uff0c<a href=\"/react/hooks-faq#how-do-i-implement-shouldcomponentupdate\"><code class=\"language-javascript\">shouldComponentUpdate</code></a>\uff09\u3002\n\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u7531\u4e8e\u5b50\u4ee3\u53ea\u4f1a\u56e0\u7279\u5b9a\u7684 prop \u6539\u53d8\u800c\u91cd\u6e32\u67d3\uff0c\u56e0\u6b64\u8fd9\u4e2a\u503c\u5e94\u8be5\u5728\u7b2c\u4e00\u6b21\u88c5\u8f7d\u4e4b\u540e\u663e\u8457\u4e0b\u964d\u3002</li>\n<li><strong><code class=\"language-javascript\">baseDuration: number</code></strong> -\n\u5728 <code class=\"language-javascript\">Profiler</code> \u6811\u4e2d\u6700\u8fd1\u4e00\u6b21\u6bcf\u4e00\u4e2a\u7ec4\u4ef6 <code class=\"language-javascript\">render</code> \u7684\u6301\u7eed\u65f6\u95f4\u3002\n\u8fd9\u4e2a\u503c\u4f30\u8ba1\u4e86\u6700\u5dee\u7684\u6e32\u67d3\u65f6\u95f4\u3002\uff08\u4f8b\u5982\u5f53\u5b83\u662f\u7b2c\u4e00\u6b21\u52a0\u8f7d\u6216\u8005\u7ec4\u4ef6\u6811\u6ca1\u6709\u4f7f\u7528 memoization\uff09\u3002</li>\n<li><strong><code class=\"language-javascript\">startTime: number</code></strong> -\n\u672c\u6b21\u66f4\u65b0\u4e2d React \u5f00\u59cb\u6e32\u67d3\u7684\u65f6\u95f4\u6233\u3002</li>\n<li><strong><code class=\"language-javascript\">commitTime: number</code></strong> -\n\u672c\u6b21\u66f4\u65b0\u4e2d React commit \u9636\u6bb5\u7ed3\u675f\u7684\u65f6\u95f4\u6233\u3002\n\u5728\u4e00\u6b21 commit \u4e2d\u8fd9\u4e2a\u503c\u5728\u6240\u6709\u7684 profiler \u4e4b\u95f4\u662f\u5171\u4eab\u7684\uff0c\u53ef\u4ee5\u5c06\u5b83\u4eec\u6309\u9700\u5206\u7ec4\u3002</li>\n<li><strong><code class=\"language-javascript\">interactions: Set</code></strong> -\n\u5f53\u66f4\u65b0\u88ab\u5236\u5b9a\u65f6\uff0c<a class=\"external-link\" href=\"https://fb.me/react-interaction-tracing\">\u201cinteractions\u201d</a> \u7684\u96c6\u5408\u4f1a\u88ab\u8ffd\u8e2a\u3002\uff08\u4f8b\u5982\u5f53 <code class=\"language-javascript\">render</code> \u6216\u8005 <code class=\"language-javascript\">setState</code> \u88ab\u8c03\u7528\u65f6\uff09\u3002</li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>Interactions \u80fd\u7528\u6765\u8bc6\u522b\u66f4\u65b0\u662f\u7531\u4ec0\u4e48\u5f15\u8d77\u7684\uff0c\u5c3d\u7ba1\u8fd9\u4e2a\u8ffd\u8e2a\u66f4\u65b0\u7684 API \u4f9d\u7136\u662f\u5b9e\u9a8c\u6027\u8d28\u7684\u3002</p>\n<p>\u4ece <a class=\"external-link\" href=\"https://fb.me/react-interaction-tracing\">fb.me/react-interaction-tracing</a> \u4e86\u89e3\u66f4\u591a</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-profiler.md\">Edit this page</a></p></div></article>", "path": "/react/profiler", "nav": ["/react/portals", "/react/react-without-es6"]}, {"key": "\u4e0d\u4f7f\u7528 ES6", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u901a\u5e38\u6211\u4eec\u4f1a\u7528 JavaScript \u7684 <code class=\"language-javascript\">class</code> \u5173\u952e\u5b57\u6765\u5b9a\u4e49 React \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u8fd8\u672a\u4f7f\u7528\u8fc7 ES6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">create-react-class</code> \u6a21\u5757\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> createReactClass <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'create-react-class'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> Greeting <span class=\"token operator\">=</span> <span class=\"token function\">createReactClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ES6 \u4e2d\u7684 class \u4e0e <code class=\"language-javascript\">createReactClass()</code> \u65b9\u6cd5\u5341\u5206\u76f8\u4f3c\uff0c\u4f46\u6709\u4ee5\u4e0b\u51e0\u4e2a\u533a\u522b\u503c\u5f97\u6ce8\u610f\u3002</p>\n<h2 id=\"declaring-default-props\"><a class=\"anchor\" href=\"/react/react-without-es6#declaring-default-props\"></a>\u58f0\u660e\u9ed8\u8ba4\u5c5e\u6027 </h2>\n<p>\u65e0\u8bba\u662f\u51fd\u6570\u7ec4\u4ef6\u8fd8\u662f class \u7ec4\u4ef6\uff0c\u90fd\u62e5\u6709 <code class=\"language-javascript\">defaultProps</code> \u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\nGreeting<span class=\"token punctuation\">.</span>defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Mary'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u4f7f\u7528 <code class=\"language-javascript\">createReactClass()</code> \u65b9\u6cd5\u521b\u5efa\u7ec4\u4ef6\uff0c\u90a3\u5c31\u9700\u8981\u5728\u7ec4\u4ef6\u4e2d\u5b9a\u4e49 <code class=\"language-javascript\">getDefaultProps()</code> \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> Greeting <span class=\"token operator\">=</span> <span class=\"token function\">createReactClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">getDefaultProps</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Mary'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// ...</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"setting-the-initial-state\"><a class=\"anchor\" href=\"/react/react-without-es6#setting-the-initial-state\"></a>\u521d\u59cb\u5316 State </h2>\n<p>\u5982\u679c\u4f7f\u7528 ES6 \u7684 class \u5173\u952e\u5b57\u521b\u5efa\u7ec4\u4ef6\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u7ed9 <code class=\"language-javascript\">this.state</code> \u8d4b\u503c\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u7ec4\u4ef6\u7684\u521d\u59cb state\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>initialCount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f7f\u7528 <code class=\"language-javascript\">createReactClass()</code> \u65b9\u6cd5\u521b\u5efa\u7ec4\u4ef6\uff0c\u4f60\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u5355\u72ec\u7684 <code class=\"language-javascript\">getInitialState</code> \u65b9\u6cd5\uff0c\u8ba9\u5176\u8fd4\u56de\u521d\u59cb state\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> Counter <span class=\"token operator\">=</span> <span class=\"token function\">createReactClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">getInitialState</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>initialCount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"autobinding\"><a class=\"anchor\" href=\"/react/react-without-es6#autobinding\"></a>\u81ea\u52a8\u7ed1\u5b9a </h2>\n<p>\u5bf9\u4e8e\u4f7f\u7528 ES6 \u7684 class \u5173\u952e\u5b57\u521b\u5efa\u7684 React \u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u4e2d\u7684\u65b9\u6cd5\u9075\u5faa\u4e0e\u5e38\u89c4 ES6 class \u76f8\u540c\u7684\u8bed\u6cd5\u89c4\u5219\u3002\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u65b9\u6cd5\u4e0d\u4f1a\u81ea\u52a8\u7ed1\u5b9a <code class=\"language-javascript\">this</code> \u5230\u8fd9\u4e2a\u7ec4\u4ef6\u5b9e\u4f8b\u3002 \u4f60\u9700\u8981\u5728 constructor \u4e2d\u663e\u5f0f\u5730\u8c03\u7528 <code class=\"language-javascript\">.bind(this)</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SayHello</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u8fd9\u4e00\u884c\u5f88\u91cd\u8981\uff01</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u7531\u4e8e `this.handleClick` \u5df2\u7ecf\u7ed1\u5b9a\u81f3\u5b9e\u4f8b\uff0c\u56e0\u6b64\u6211\u4eec\u624d\u53ef\u4ee5\u7528\u5b83\u6765\u5904\u7406\u70b9\u51fb\u4e8b\u4ef6</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Say hello\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f7f\u7528 <code class=\"language-javascript\">createReactClass()</code> \u65b9\u6cd5\u521b\u5efa\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u4e2d\u7684\u65b9\u6cd5\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u81f3\u5b9e\u4f8b\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u50cf\u4e0a\u9762\u90a3\u6837\u505a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> SayHello <span class=\"token operator\">=</span> <span class=\"token function\">createReactClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">getInitialState</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function-variable function\">handleClick</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Say hello\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u5c31\u610f\u5473\u7740\uff0c\u5982\u679c\u4f7f\u7528 ES6 class \u5173\u952e\u5b57\u521b\u5efa\u7ec4\u4ef6\uff0c\u5728\u5904\u7406\u4e8b\u4ef6\u56de\u8c03\u65f6\u5c31\u8981\u591a\u5199\u4e00\u90e8\u5206\u4ee3\u7801\u3002\u4f46\u5bf9\u4e8e\u5927\u578b\u9879\u76ee\u6765\u8bf4\uff0c\u8fd9\u6837\u505a\u53ef\u4ee5\u63d0\u5347\u8fd0\u884c\u6548\u7387\u3002</p>\n<p>\u5982\u679c\u6a21\u677f\u4ee3\u7801\u5bf9\u4f60\u6765\u8bf4\u4e0d\u592a\u53cb\u597d\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Public_class_fields#public_instance_fields\">ES2022 Class Properties</a> \u8bed\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SayHello</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello!'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token comment\">// \u5728\u8fd9\u91cc\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u5c31\u53ef\u4ee5\u628a\u65b9\u6cd5\u7ed1\u5b9a\u7ed9\u5b9e\u4f8b\uff1a</span>\n  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Say hello\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e3a\u4e86\u5b89\u5168\u8d77\u89c1\uff0c\u4f60\u53ef\u4ee5\u91c7\u7528\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\uff1a</p>\n<ul>\n<li>\u5728 constructor \u4e2d\u7ed1\u5b9a\u65b9\u6cd5\u3002</li>\n<li>\u4f7f\u7528\u7bad\u5934\u51fd\u6570\uff0c\u6bd4\u5982\uff1a<code class=\"language-javascript\">onClick={(e) =&gt; this.handleClick(e)}</code>\u3002</li>\n<li>\u7ee7\u7eed\u4f7f\u7528 <code class=\"language-javascript\">createReactClass</code>\u3002</li>\n</ul>\n<h2 id=\"mixins\"><a class=\"anchor\" href=\"/react/react-without-es6#mixins\"></a>Mixins </h2>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>ES6 \u672c\u8eab\u662f\u4e0d\u5305\u542b\u4efb\u4f55 mixin \u652f\u6301\u3002\u56e0\u6b64\uff0c\u5f53\u4f60\u5728 React \u4e2d\u4f7f\u7528 ES6 class \u65f6\uff0c\u5c06\u4e0d\u652f\u6301 mixins \u3002</p>\n<p><strong>\u6211\u4eec\u4e5f\u53d1\u73b0\u4e86\u5f88\u591a\u4f7f\u7528 mixins \u7136\u540e\u51fa\u73b0\u4e86\u95ee\u9898\u7684\u4ee3\u7801\u5e93\u3002<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2016/07/13/mixins-considered-harmful.html\">\u5e76\u4e14\u4e0d\u5efa\u8bae\u5728\u65b0\u4ee3\u7801\u4e2d\u4f7f\u7528\u5b83\u4eec</a>\u3002</strong></p>\n<p>\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u4f5c\u4e3a\u53c2\u8003\u3002</p>\n</div>\n<p>\u5982\u679c\u5b8c\u5168\u4e0d\u540c\u7684\u7ec4\u4ef6\u6709\u76f8\u4f3c\u7684\u529f\u80fd\uff0c\u8fd9\u5c31\u4f1a\u4ea7\u751f<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Cross-cutting_concern\">\u201c\u6a2a\u5207\u5173\u6ce8\u70b9\uff08cross-cutting concerns\uff09\u201c\u95ee\u9898</a>\u3002\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u5728\u4f7f\u7528 createReactClass \u521b\u5efa React \u7ec4\u4ef6\u7684\u65f6\u5019\uff0c\u5f15\u5165 <code class=\"language-javascript\">mixins</code> \u529f\u80fd\u4f1a\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>\n<p>\u6bd4\u8f83\u5e38\u89c1\u7684\u7528\u6cd5\u662f\uff0c\u7ec4\u4ef6\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u66f4\u65b0\u4e00\u6b21\u3002\u4f7f\u7528 <code class=\"language-javascript\">setInterval()</code> \u53ef\u4ee5\u5f88\u5bb9\u6613\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5f53\u4f60\u4e0d\u518d\u9700\u8981\u5b83\u65f6\uff0c\u4f60\u5e94\u8be5\u6e05\u9664\u5b83\u4ee5\u8282\u7701\u5185\u5b58\u3002React \u63d0\u4f9b\u4e86<a href=\"/react/react-component#the-component-lifecycle\">\u751f\u547d\u5468\u671f\u65b9\u6cd5</a>\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u77e5\u9053\u4e00\u4e2a\u7ec4\u4ef6\u4f55\u65f6\u88ab\u521b\u5efa\u6216\u88ab\u9500\u6bc1\u4e86\u3002\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 mixin\uff0c\u5b83\u4f7f\u7528\u8fd9\u4e9b\u65b9\u6cd5\u63d0\u4f9b\u4e00\u4e2a\u7b80\u5355\u7684 <code class=\"language-javascript\">setInterval()</code> \u51fd\u6570\uff0c\u5b83\u4f1a\u5728\u7ec4\u4ef6\u88ab\u9500\u6bc1\u65f6\u88ab\u81ea\u52a8\u6e05\u7406\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> SetIntervalMixin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">componentWillMount</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>intervals <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">setInterval</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>intervals<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">setInterval</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">componentWillUnmount</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>intervals<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>clearInterval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> createReactClass <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'create-react-class'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> TickTock <span class=\"token operator\">=</span> <span class=\"token function\">createReactClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">mixins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>SetIntervalMixin<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u4f7f\u7528 mixin</span>\n  <span class=\"token function-variable function\">getInitialState</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">seconds</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">componentDidMount</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u8c03\u7528 mixin \u4e0a\u7684\u65b9\u6cd5</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">tick</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">seconds</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>seconds <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        React has been running for </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>seconds<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> seconds.\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TickTock</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u7ec4\u4ef6\u62e5\u6709\u591a\u4e2a mixins\uff0c\u4e14\u8fd9\u4e9b mixins \u4e2d\u5b9a\u4e49\u4e86\u76f8\u540c\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff08\u4f8b\u5982\uff0c\u5f53\u7ec4\u4ef6\u88ab\u9500\u6bc1\u65f6\uff0c\u51e0\u4e2a mixins \u90fd\u60f3\u8981\u8fdb\u884c\u4e00\u4e9b\u6e05\u7406\u5de5\u4f5c\uff09\uff0c\u90a3\u4e48\u8fd9\u4e9b\u751f\u547d\u5468\u671f\u65b9\u6cd5\u90fd\u4f1a\u88ab\u8c03\u7528\u7684\u3002\u4f7f\u7528 mixins \u65f6\uff0cmixins \u4f1a\u5148\u6309\u7167\u5b9a\u4e49\u65f6\u7684\u987a\u5e8f\u6267\u884c\uff0c\u6700\u540e\u8c03\u7528\u7ec4\u4ef6\u4e0a\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/react-without-es6.md\">Edit this page</a></p></div></article>", "path": "/react/react-without-es6", "nav": ["/react/profiler", "/react/react-without-jsx"]}, {"key": "\u4e0d\u4f7f\u7528 JSX", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u5e76\u4e0d\u5f3a\u5236\u8981\u6c42\u4f7f\u7528 JSX\u3002\u5f53\u4f60\u4e0d\u60f3\u5728\u6784\u5efa\u73af\u5883\u4e2d\u914d\u7f6e\u6709\u5173 JSX \u7f16\u8bd1\u65f6\uff0c\u4e0d\u5728 React \u4e2d\u4f7f\u7528 JSX \u4f1a\u66f4\u52a0\u65b9\u4fbf\u3002</p>\n<p>\u6bcf\u4e2a JSX \u5143\u7d20\u53ea\u662f\u8c03\u7528 <code class=\"language-javascript\">React.createElement(component, props, ...children)</code> \u7684\u8bed\u6cd5\u7cd6\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 JSX \u53ef\u4ee5\u5b8c\u6210\u7684\u4efb\u4f55\u4e8b\u60c5\u90fd\u53ef\u4ee5\u901a\u8fc7\u7eaf JavaScript \u5b8c\u6210\u3002</p>\n<p>\u4f8b\u5982\uff0c\u7528 JSX \u7f16\u5199\u7684\u4ee3\u7801\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>toWhat<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">toWhat</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>World<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u53ef\u4ee5\u7f16\u5199\u4e3a\u4e0d\u4f7f\u7528 JSX \u7684\u4ee3\u7801\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>toWhat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>Hello<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">toWhat</span><span class=\"token operator\">:</span> <span class=\"token string\">'World'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u60f3\u4e86\u89e3\u66f4\u591a JSX \u8f6c\u6362\u4e3a JavaScript \u7684\u793a\u4f8b\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 <a class=\"external-link\" href=\"https://babeljs.io/repl/#?presets=react&amp;code_lz=GYVwdgxgLglg9mABACwKYBt1wBQEpEDeAUIogE6pQhlIA8AJjAG4B8AEhlogO5xnr0AhLQD0jVgG4iAXyJA\">\u5728\u7ebf Babel \u7f16\u8bd1\u5668</a>\u3002</p>\n<p>\u7ec4\u4ef6\u53ef\u4ee5\u662f\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u662f <code class=\"language-javascript\">React.Component</code> \u7684\u5b50\u7c7b\uff0c\u5b83\u8fd8\u80fd\u662f\u4e00\u4e2a\u666e\u901a\u7684\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u4f60\u4e0d\u60f3\u6bcf\u6b21\u90fd\u952e\u5165 <code class=\"language-javascript\">React.createElement</code>\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u521b\u5efa\u5feb\u6377\u65b9\u5f0f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> e <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span>createElement<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token function\">e</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Hello World'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528\u4e86 <code class=\"language-javascript\">React.createElement</code> \u7684\u5feb\u6377\u65b9\u5f0f\uff0c\u90a3\u4e48\u5728\u6ca1\u6709 JSX \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 React \u51e0\u4e4e\u4e00\u6837\u65b9\u4fbf\u3002</p>\n<p>\u6216\u8005\uff0c\u4f60\u4e5f\u53ef\u4ee5\u53c2\u8003\u793e\u533a\u9879\u76ee\uff0c\u5982\uff1a<a class=\"external-link\" href=\"https://github.com/mlmorg/react-hyperscript\"><code class=\"language-javascript\">react-hyperscript</code></a> \u548c <a class=\"external-link\" href=\"https://github.com/ohanhi/hyperscript-helpers\"><code class=\"language-javascript\">hyperscript-helpers</code></a>\uff0c\u5b83\u4eec\u63d0\u4f9b\u4e86\u66f4\u7b80\u6d01\u7684\u8bed\u6cd5\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/react-without-jsx.md\">Edit this page</a></p></div></article>", "path": "/react/react-without-jsx", "nav": ["/react/react-without-es6", "/react/reconciliation"]}, {"key": "\u534f\u8c03", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u63d0\u4f9b\u7684\u58f0\u660e\u5f0f API \u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u5bf9 React \u7684\u5e95\u5c42\u5b9e\u73b0\u5e76\u4e0d\u4e86\u89e3\u7684\u60c5\u51b5\u4e0b\u7f16\u5199\u5e94\u7528\u3002\u5728\u5f00\u53d1\u8005\u7f16\u5199\u5e94\u7528\u65f6\uff0c\u53ef\u4ee5\u4fdd\u6301\u76f8\u5bf9\u7b80\u5355\u7684\u5fc3\u667a\uff0c\u4f46\u5f00\u53d1\u8005\u65e0\u6cd5\u4e86\u89e3\u5176\u5185\u90e8\u7684\u5b9e\u73b0\u539f\u7406\u3002\u672c\u6587\u63cf\u8ff0\u4e86\u5728\u5b9e\u73b0 React \u7684 \u201cdiffing\u201d \u7b97\u6cd5\u8fc7\u7a0b\u4e2d\u6240\u4f5c\u51fa\u7684\u8bbe\u8ba1\u51b3\u7b56\uff0c\u4ee5\u4fdd\u8bc1\u7ec4\u4ef6\u66f4\u65b0\u53ef\u9884\u6d4b\uff0c\u4e14\u5728\u7e41\u6742\u4e1a\u52a1\u573a\u666f\u4e0b\u4f9d\u7136\u4fdd\u6301\u5e94\u7528\u7684\u9ad8\u6027\u80fd\u3002</p>\n<h2 id=\"motivation\"><a class=\"anchor\" href=\"/react/reconciliation#motivation\"></a>\u8bbe\u8ba1\u52a8\u673a </h2>\n<p>\u5728\u67d0\u4e00\u65f6\u95f4\u8282\u70b9\u8c03\u7528 React \u7684 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\uff0c\u4f1a\u521b\u5efa\u4e00\u68f5\u7531 React \u5143\u7d20\u7ec4\u6210\u7684\u6811\u3002\u5728\u4e0b\u4e00\u6b21 state \u6216 props \u66f4\u65b0\u65f6\uff0c\u76f8\u540c\u7684 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4f1a\u8fd4\u56de\u4e00\u68f5\u4e0d\u540c\u7684\u6811\u3002React \u9700\u8981\u57fa\u4e8e\u8fd9\u4e24\u68f5\u6811\u4e4b\u95f4\u7684\u5dee\u522b\u6765\u5224\u65ad\u5982\u4f55\u9ad8\u6548\u7684\u66f4\u65b0 UI\uff0c\u4ee5\u4fdd\u8bc1\u5f53\u524d UI \u4e0e\u6700\u65b0\u7684\u6811\u4fdd\u6301\u540c\u6b65\u3002</p>\n<p>\u6b64\u7b97\u6cd5\u6709\u4e00\u4e9b\u901a\u7528\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5373\u751f\u6210\u5c06\u4e00\u68f5\u6811\u8f6c\u6362\u6210\u53e6\u4e00\u68f5\u6811\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u3002\u7136\u800c\uff0c\u5373\u4f7f\u4f7f\u7528<a class=\"external-link\" href=\"http://grfia.dlsi.ua.es/ml/algorithms/references/editsurvey_bille.pdf\">\u6700\u4f18\u7684\u7b97\u6cd5</a>\uff0c\u8be5\u7b97\u6cd5\u7684\u590d\u6742\u7a0b\u5ea6\u4ecd\u4e3a O(n<sup> 3 </sup>)\uff0c\u5176\u4e2d n \u662f\u6811\u4e2d\u5143\u7d20\u7684\u6570\u91cf\u3002</p>\n<p>\u5982\u679c\u5728 React \u4e2d\u4f7f\u7528\u8be5\u7b97\u6cd5\uff0c\u90a3\u4e48\u5c55\u793a 1000 \u4e2a\u5143\u7d20\u5219\u9700\u8981 10 \u4ebf\u6b21\u7684\u6bd4\u8f83\u3002\u8fd9\u4e2a\u5f00\u9500\u5b9e\u5728\u662f\u592a\u8fc7\u9ad8\u6602\u3002\u4e8e\u662f React \u5728\u4ee5\u4e0b\u4e24\u4e2a\u5047\u8bbe\u7684\u57fa\u7840\u4e4b\u4e0a\u63d0\u51fa\u4e86\u4e00\u5957 O(n) \u7684\u542f\u53d1\u5f0f\u7b97\u6cd5\uff1a</p>\n<ol>\n<li>\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\u4f1a\u4ea7\u751f\u51fa\u4e0d\u540c\u7684\u6811\uff1b</li>\n<li>\u5f00\u53d1\u8005\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">key</code> \u5c5e\u6027\u6807\u8bc6\u54ea\u4e9b\u5b50\u5143\u7d20\u5728\u4e0d\u540c\u7684\u6e32\u67d3\u4e2d\u53ef\u80fd\u662f\u4e0d\u53d8\u7684\u3002</li>\n</ol>\n<p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4ee5\u4e0a\u5047\u8bbe\u5728\u51e0\u4e4e\u6240\u6709\u5b9e\u7528\u7684\u573a\u666f\u4e0b\u90fd\u6210\u7acb\u3002</p>\n<h2 id=\"the-diffing-algorithm\"><a class=\"anchor\" href=\"/react/reconciliation#the-diffing-algorithm\"></a>Diffing \u7b97\u6cd5 </h2>\n<p>\u5f53\u5bf9\u6bd4\u4e24\u68f5\u6811\u65f6\uff0cReact \u9996\u5148\u6bd4\u8f83\u4e24\u68f5\u6811\u7684\u6839\u8282\u70b9\u3002\u4e0d\u540c\u7c7b\u578b\u7684\u6839\u8282\u70b9\u5143\u7d20\u4f1a\u6709\u4e0d\u540c\u7684\u5f62\u6001\u3002</p>\n<h3 id=\"elements-of-different-types\"><a class=\"anchor\" href=\"/react/reconciliation#elements-of-different-types\"></a>\u5bf9\u6bd4\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20 </h3>\n<p>\u5f53\u6839\u8282\u70b9\u4e3a\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20\u65f6\uff0cReact \u4f1a\u62c6\u5378\u539f\u6709\u7684\u6811\u5e76\u4e14\u5efa\u7acb\u8d77\u65b0\u7684\u6811\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5f53\u4e00\u4e2a\u5143\u7d20\u4ece <code class=\"language-javascript\">&lt;a&gt;</code> \u53d8\u6210 <code class=\"language-javascript\">&lt;img&gt;</code>\uff0c\u4ece <code class=\"language-javascript\">&lt;Article&gt;</code> \u53d8\u6210 <code class=\"language-javascript\">&lt;Comment&gt;</code>\uff0c\u6216\u4ece <code class=\"language-javascript\">&lt;Button&gt;</code> \u53d8\u6210 <code class=\"language-javascript\">&lt;div&gt;</code> \u90fd\u4f1a\u89e6\u53d1\u4e00\u4e2a\u5b8c\u6574\u7684\u91cd\u5efa\u6d41\u7a0b\u3002</p>\n<p>\u5f53\u5378\u8f7d\u4e00\u68f5\u6811\u65f6\uff0c\u5bf9\u5e94\u7684 DOM \u8282\u70b9\u4e5f\u4f1a\u88ab\u9500\u6bc1\u3002\u7ec4\u4ef6\u5b9e\u4f8b\u5c06\u6267\u884c <code class=\"language-javascript\">componentWillUnmount()</code> \u65b9\u6cd5\u3002\u5f53\u5efa\u7acb\u4e00\u68f5\u65b0\u7684\u6811\u65f6\uff0c\u5bf9\u5e94\u7684 DOM \u8282\u70b9\u4f1a\u88ab\u521b\u5efa\u4ee5\u53ca\u63d2\u5165\u5230 DOM \u4e2d\u3002\u7ec4\u4ef6\u5b9e\u4f8b\u5c06\u6267\u884c <code class=\"language-javascript\">UNSAFE_componentWillMount()</code> \u65b9\u6cd5\uff0c\u7d27\u63a5\u7740 <code class=\"language-javascript\">componentDidMount()</code> \u65b9\u6cd5\u3002\u6240\u6709\u4e0e\u4e4b\u524d\u7684\u6811\u76f8\u5173\u8054\u7684 state \u4e5f\u4f1a\u88ab\u9500\u6bc1\u3002</p>\n<p>\u5728\u6839\u8282\u70b9\u4ee5\u4e0b\u7684\u7ec4\u4ef6\u4e5f\u4f1a\u88ab\u5378\u8f7d\uff0c\u5b83\u4eec\u7684\u72b6\u6001\u4f1a\u88ab\u9500\u6bc1\u3002\u6bd4\u5982\uff0c\u5f53\u6bd4\u5bf9\u4ee5\u4e0b\u66f4\u53d8\u65f6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-xml\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Counter</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Counter</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>React \u4f1a\u9500\u6bc1 <code class=\"language-javascript\">Counter</code> \u7ec4\u4ef6\u5e76\u4e14\u91cd\u65b0\u88c5\u8f7d\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u4e9b\u65b9\u6cd5\u88ab\u8ba4\u4e3a\u662f\u8fc7\u65f6\u7684\uff0c\u5728\u65b0\u7684\u4ee3\u7801\u4e2d\u5e94\u8be5<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/03/27/update-on-async-rendering.html\">\u907f\u514d\u4f7f\u7528\u5b83\u4eec</a>\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">UNSAFE_componentWillMount()</code></li>\n</ul>\n</div>\n<h3 id=\"dom-elements-of-the-same-type\"><a class=\"anchor\" href=\"/react/reconciliation#dom-elements-of-the-same-type\"></a>\u5bf9\u6bd4\u540c\u4e00\u7c7b\u578b\u7684\u5143\u7d20 </h3>\n<p>\u5f53\u5bf9\u6bd4\u4e24\u4e2a\u76f8\u540c\u7c7b\u578b\u7684 React \u5143\u7d20\u65f6\uff0cReact \u4f1a\u4fdd\u7559 DOM \u8282\u70b9\uff0c\u4ec5\u6bd4\u5bf9\u53ca\u66f4\u65b0\u6709\u6539\u53d8\u7684\u5c5e\u6027\u3002\u6bd4\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-xml\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>before<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stuff<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>after<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stuff<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u901a\u8fc7\u5bf9\u6bd4\u8fd9\u4e24\u4e2a\u5143\u7d20\uff0cReact \u77e5\u9053\u53ea\u9700\u8981\u4fee\u6539 DOM \u5143\u7d20\u4e0a\u7684 <code class=\"language-javascript\">className</code> \u5c5e\u6027\u3002</p>\n<p>\u5f53\u66f4\u65b0 <code class=\"language-javascript\">style</code> \u5c5e\u6027\u65f6\uff0cReact \u4ec5\u66f4\u65b0\u6709\u6240\u66f4\u53d8\u7684\u5c5e\u6027\u3002\u6bd4\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-xml\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{{color:</span> <span class=\"token attr-name\">'red',</span> <span class=\"token attr-name\"><span class=\"token namespace\">fontWeight:</span></span> <span class=\"token attr-name\">'bold'}}</span> <span class=\"token punctuation\">/&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{{color:</span> <span class=\"token attr-name\">'green',</span> <span class=\"token attr-name\"><span class=\"token namespace\">fontWeight:</span></span> <span class=\"token attr-name\">'bold'}}</span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u901a\u8fc7\u5bf9\u6bd4\u8fd9\u4e24\u4e2a\u5143\u7d20\uff0cReact \u77e5\u9053\u53ea\u9700\u8981\u4fee\u6539 DOM \u5143\u7d20\u4e0a\u7684 <code class=\"language-javascript\">color</code> \u6837\u5f0f\uff0c\u65e0\u9700\u4fee\u6539 <code class=\"language-javascript\">fontWeight</code>\u3002</p>\n<p>\u5728\u5904\u7406\u5b8c\u5f53\u524d\u8282\u70b9\u4e4b\u540e\uff0cReact \u7ee7\u7eed\u5bf9\u5b50\u8282\u70b9\u8fdb\u884c\u9012\u5f52\u3002</p>\n<h3 id=\"component-elements-of-the-same-type\"><a class=\"anchor\" href=\"/react/reconciliation#component-elements-of-the-same-type\"></a>\u5bf9\u6bd4\u540c\u7c7b\u578b\u7684\u7ec4\u4ef6\u5143\u7d20 </h3>\n<p>\u5f53\u4e00\u4e2a\u7ec4\u4ef6\u66f4\u65b0\u65f6\uff0c\u7ec4\u4ef6\u5b9e\u4f8b\u4f1a\u4fdd\u6301\u4e0d\u53d8\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u6e32\u67d3\u65f6\u4fdd\u6301 state \u4e00\u81f4\u3002React \u5c06\u66f4\u65b0\u8be5\u7ec4\u4ef6\u5b9e\u4f8b\u7684 props \u4ee5\u4fdd\u8bc1\u4e0e\u6700\u65b0\u7684\u5143\u7d20\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u4e14\u8c03\u7528\u8be5\u5b9e\u4f8b\u7684  <code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code>\u3001<code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code> \u4ee5\u53ca <code class=\"language-javascript\">componentDidUpdate()</code> \u65b9\u6cd5\u3002</p>\n<p>\u4e0b\u4e00\u6b65\uff0c\u8c03\u7528 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\uff0cdiff \u7b97\u6cd5\u5c06\u5728\u4e4b\u524d\u7684\u7ed3\u679c\u4ee5\u53ca\u65b0\u7684\u7ed3\u679c\u4e2d\u8fdb\u884c\u9012\u5f52\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u4e9b\u65b9\u6cd5\u5df2\u8fc7\u65f6\uff0c\u5728\u65b0\u4ee3\u7801\u4e2d\u5e94\u907f\u514d<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/03/27/update-on-async-rendering.html\">\u4f7f\u7528\u5b83\u4eec</a>\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code></li>\n<li><code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code></li>\n</ul>\n</div>\n<h3 id=\"recursing-on-children\"><a class=\"anchor\" href=\"/react/reconciliation#recursing-on-children\"></a>\u5bf9\u5b50\u8282\u70b9\u8fdb\u884c\u9012\u5f52 </h3>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u9012\u5f52 DOM \u8282\u70b9\u7684\u5b50\u5143\u7d20\u65f6\uff0cReact \u4f1a\u540c\u65f6\u904d\u5386\u4e24\u4e2a\u5b50\u5143\u7d20\u7684\u5217\u8868\uff1b\u5f53\u4ea7\u751f\u5dee\u5f02\u65f6\uff0c\u751f\u6210\u4e00\u4e2a mutation\u3002</p>\n<p>\u5728\u5b50\u5143\u7d20\u5217\u8868\u672b\u5c3e\u65b0\u589e\u5143\u7d20\u65f6\uff0c\u66f4\u65b0\u5f00\u9500\u6bd4\u8f83\u5c0f\u3002\u6bd4\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-xml\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>first<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>second<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>first<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>second<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>third<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>React \u4f1a\u5148\u5339\u914d\u4e24\u4e2a <code class=\"language-javascript\">&lt;li&gt;first&lt;/li&gt;</code> \u5bf9\u5e94\u7684\u6811\uff0c\u7136\u540e\u5339\u914d\u7b2c\u4e8c\u4e2a\u5143\u7d20 <code class=\"language-javascript\">&lt;li&gt;second&lt;/li&gt;</code> \u5bf9\u5e94\u7684\u6811\uff0c\u6700\u540e\u63d2\u5165\u7b2c\u4e09\u4e2a\u5143\u7d20\u7684 <code class=\"language-javascript\">&lt;li&gt;third&lt;/li&gt;</code> \u6811\u3002</p>\n<p>\u5982\u679c\u53ea\u662f\u7b80\u5355\u7684\u5c06\u65b0\u589e\u5143\u7d20\u63d2\u5165\u5230\u8868\u5934\uff0c\u90a3\u4e48\u66f4\u65b0\u5f00\u9500\u4f1a\u6bd4\u8f83\u5927\u3002\u6bd4\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-xml\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Duke<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Villanova<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Connecticut<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Duke<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">&gt;</span></span>Villanova<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>React \u5e76\u4e0d\u4f1a\u610f\u8bc6\u5230\u5e94\u8be5\u4fdd\u7559 <code class=\"language-javascript\">&lt;li&gt;Duke&lt;/li&gt;</code> \u548c <code class=\"language-javascript\">&lt;li&gt;Villanova&lt;/li&gt;</code>\uff0c\u800c\u662f\u4f1a\u91cd\u5efa\u6bcf\u4e00\u4e2a\u5b50\u5143\u7d20\u3002\u8fd9\u79cd\u60c5\u51b5\u4f1a\u5e26\u6765\u6027\u80fd\u95ee\u9898\u3002</p>\n<h3 id=\"keys\"><a class=\"anchor\" href=\"/react/reconciliation#keys\"></a>Keys </h3>\n<p>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0cReact \u5f15\u5165\u4e86 <code class=\"language-javascript\">key</code> \u5c5e\u6027\u3002\u5f53\u5b50\u5143\u7d20\u62e5\u6709 key \u65f6\uff0cReact \u4f7f\u7528 key \u6765\u5339\u914d\u539f\u6709\u6811\u4e0a\u7684\u5b50\u5143\u7d20\u4ee5\u53ca\u6700\u65b0\u6811\u4e0a\u7684\u5b50\u5143\u7d20\u3002\u4ee5\u4e0b\u793a\u4f8b\u5728\u65b0\u589e <code class=\"language-javascript\">key</code> \u4e4b\u540e\uff0c\u4f7f\u5f97\u6811\u7684\u8f6c\u6362\u6548\u7387\u5f97\u4ee5\u63d0\u9ad8\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-xml\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2015<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Duke<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2016<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Villanova<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2014<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Connecticut<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2015<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Duke<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2016<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Villanova<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u73b0\u5728 React \u77e5\u9053\u53ea\u6709\u5e26\u7740 <code class=\"language-javascript\">'2014'</code> key \u7684\u5143\u7d20\u662f\u65b0\u5143\u7d20\uff0c\u5e26\u7740 <code class=\"language-javascript\">'2015'</code> \u4ee5\u53ca <code class=\"language-javascript\">'2016'</code> key \u7684\u5143\u7d20\u4ec5\u4ec5\u79fb\u52a8\u4e86\u3002</p>\n<p>\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u7f16\u5199\u4e00\u4e2a key \u5e76\u4e0d\u56f0\u96be\u3002\u4f60\u8981\u5c55\u73b0\u7684\u5143\u7d20\u53ef\u80fd\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u552f\u4e00 ID\uff0c\u4e8e\u662f key \u53ef\u4ee5\u76f4\u63a5\u4ece\u4f60\u7684\u6570\u636e\u4e2d\u63d0\u53d6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5f53\u4ee5\u4e0a\u60c5\u51b5\u4e0d\u6210\u7acb\u65f6\uff0c\u4f60\u53ef\u4ee5\u65b0\u589e\u4e00\u4e2a ID \u5b57\u6bb5\u5230\u4f60\u7684\u6a21\u578b\u4e2d\uff0c\u6216\u8005\u5229\u7528\u4e00\u90e8\u5206\u5185\u5bb9\u4f5c\u4e3a\u54c8\u5e0c\u503c\u6765\u751f\u6210\u4e00\u4e2a key\u3002\u8fd9\u4e2a key \u4e0d\u9700\u8981\u5168\u5c40\u552f\u4e00\uff0c\u4f46\u5728\u5217\u8868\u4e2d\u9700\u8981\u4fdd\u6301\u552f\u4e00\u3002</p>\n<p>\u6700\u540e\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5143\u7d20\u5728\u6570\u7ec4\u4e2d\u7684\u4e0b\u6807\u4f5c\u4e3a key\u3002\u8fd9\u4e2a\u7b56\u7565\u5728\u5143\u7d20\u4e0d\u8fdb\u884c\u91cd\u65b0\u6392\u5e8f\u65f6\u6bd4\u8f83\u5408\u9002\uff0c\u5982\u679c\u6709\u987a\u5e8f\u4fee\u6539\uff0cdiff \u5c31\u4f1a\u53d8\u6162\u3002</p>\n<p>\u5f53\u57fa\u4e8e\u4e0b\u6807\u7684\u7ec4\u4ef6\u8fdb\u884c\u91cd\u65b0\u6392\u5e8f\u65f6\uff0c\u7ec4\u4ef6 state \u53ef\u80fd\u4f1a\u9047\u5230\u4e00\u4e9b\u95ee\u9898\u3002\u7531\u4e8e\u7ec4\u4ef6\u5b9e\u4f8b\u662f\u57fa\u4e8e\u5b83\u4eec\u7684 key \u6765\u51b3\u5b9a\u662f\u5426\u66f4\u65b0\u4ee5\u53ca\u590d\u7528\uff0c\u5982\u679c key \u662f\u4e00\u4e2a\u4e0b\u6807\uff0c\u90a3\u4e48\u4fee\u6539\u987a\u5e8f\u65f6\u4f1a\u4fee\u6539\u5f53\u524d\u7684 key\uff0c\u5bfc\u81f4\u975e\u53d7\u63a7\u7ec4\u4ef6\u7684 state\uff08\u6bd4\u5982\u8f93\u5165\u6846\uff09\u53ef\u80fd\u76f8\u4e92\u7be1\u6539\uff0c\u4f1a\u51fa\u73b0\u65e0\u6cd5\u9884\u671f\u7684\u53d8\u52a8\u3002</p>\n<p>\u5728 Codepen \u6709\u4e24\u4e2a\u4f8b\u5b50\uff0c\u5206\u522b\u4e3a <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//redirect-to-codepen/reconciliation/index-used-as-key\">\u5c55\u793a\u4f7f\u7528\u4e0b\u6807\u4f5c\u4e3a key \u65f6\u5bfc\u81f4\u7684\u95ee\u9898</a>\uff0c\u4ee5\u53ca<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//redirect-to-codepen/reconciliation/no-index-used-as-key\">\u4e0d\u4f7f\u7528\u4e0b\u6807\u4f5c\u4e3a key \u7684\u4f8b\u5b50\u7684\u7248\u672c\uff0c\u4fee\u590d\u4e86\u91cd\u65b0\u6392\u5217\uff0c\u6392\u5e8f\uff0c\u4ee5\u53ca\u5728\u5217\u8868\u5934\u63d2\u5165\u7684\u95ee\u9898</a>\u3002</p>\n<h2 id=\"tradeoffs\"><a class=\"anchor\" href=\"/react/reconciliation#tradeoffs\"></a>\u6743\u8861 </h2>\n<p>\u8bf7\u8c28\u8bb0\u534f\u8c03\u7b97\u6cd5\u662f\u4e00\u4e2a\u5b9e\u73b0\u7ec6\u8282\u3002React \u53ef\u4ee5\u5728\u6bcf\u4e2a action \u4e4b\u540e\u5bf9\u6574\u4e2a\u5e94\u7528\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\uff0c\u5f97\u5230\u7684\u6700\u7ec8\u7ed3\u679c\u4e5f\u4f1a\u662f\u4e00\u6837\u7684\u3002\u5728\u6b64\u60c5\u5883\u4e0b\uff0c\u91cd\u65b0\u6e32\u67d3\u8868\u793a\u5728\u6240\u6709\u7ec4\u4ef6\u5185\u8c03\u7528 <code class=\"language-javascript\">render</code> \u65b9\u6cd5\uff0c\u8fd9\u4e0d\u4ee3\u8868 React \u4f1a\u5378\u8f7d\u6216\u88c5\u8f7d\u5b83\u4eec\u3002React \u53ea\u4f1a\u57fa\u4e8e\u4ee5\u4e0a\u63d0\u5230\u7684\u89c4\u5219\u6765\u51b3\u5b9a\u5982\u4f55\u8fdb\u884c\u5dee\u5f02\u7684\u5408\u5e76\u3002</p>\n<p>\u6211\u4eec\u5b9a\u671f\u4f18\u5316\u542f\u53d1\u5f0f\u7b97\u6cd5\uff0c\u8ba9\u5e38\u89c1\u7528\u4f8b\u66f4\u9ad8\u6548\u5730\u6267\u884c\u3002\u5728\u5f53\u524d\u7684\u5b9e\u73b0\u4e2d\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u68f5\u5b50\u6811\u80fd\u5728\u5176\u5144\u5f1f\u4e4b\u95f4\u79fb\u52a8\uff0c\u4f46\u4e0d\u80fd\u79fb\u52a8\u5230\u5176\u4ed6\u4f4d\u7f6e\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7b97\u6cd5\u4f1a\u91cd\u65b0\u6e32\u67d3\u6574\u68f5\u5b50\u6811\u3002</p>\n<p>\u7531\u4e8e React \u4f9d\u8d56\u542f\u53d1\u5f0f\u7b97\u6cd5\uff0c\u56e0\u6b64\u5f53\u4ee5\u4e0b\u5047\u8bbe\u6ca1\u6709\u5f97\u5230\u6ee1\u8db3\uff0c\u6027\u80fd\u4f1a\u6709\u6240\u635f\u8017\u3002</p>\n<ol>\n<li>\u8be5\u7b97\u6cd5\u4e0d\u4f1a\u5c1d\u8bd5\u5339\u914d\u4e0d\u540c\u7ec4\u4ef6\u7c7b\u578b\u7684\u5b50\u6811\u3002\u5982\u679c\u4f60\u53d1\u73b0\u4f60\u5728\u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u7ec4\u4ef6\u4e2d\u5207\u6362\uff0c\u4f46\u8f93\u51fa\u975e\u5e38\u76f8\u4f3c\u7684\u5185\u5bb9\uff0c\u5efa\u8bae\u628a\u5b83\u4eec\u6539\u6210\u540c\u4e00\u7c7b\u578b\u3002\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u9047\u5230\u8fd9\u7c7b\u95ee\u9898\u3002</li>\n<li>Key \u5e94\u8be5\u5177\u6709\u7a33\u5b9a\uff0c\u53ef\u9884\u6d4b\uff0c\u4ee5\u53ca\u5217\u8868\u5185\u552f\u4e00\u7684\u7279\u8d28\u3002\u4e0d\u7a33\u5b9a\u7684 key\uff08\u6bd4\u5982\u901a\u8fc7 <code class=\"language-javascript\">Math.random()</code> \u751f\u6210\u7684\uff09\u4f1a\u5bfc\u81f4\u8bb8\u591a\u7ec4\u4ef6\u5b9e\u4f8b\u548c DOM \u8282\u70b9\u88ab\u4e0d\u5fc5\u8981\u5730\u91cd\u65b0\u521b\u5efa\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u6027\u80fd\u4e0b\u964d\u548c\u5b50\u7ec4\u4ef6\u4e2d\u7684\u72b6\u6001\u4e22\u5931\u3002</li>\n</ol></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reconciliation.md\">Edit this page</a></p></div></article>", "path": "/react/reconciliation", "nav": ["/react/react-without-jsx", "/react/refs-and-the-dom"]}, {"key": "Refs & DOM", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>Refs \u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u6211\u4eec\u8bbf\u95ee DOM \u8282\u70b9\u6216\u5728 render \u65b9\u6cd5\u4e2d\u521b\u5efa\u7684 React \u5143\u7d20\u3002</p>\n<p>\u5728\u5178\u578b\u7684 React \u6570\u636e\u6d41\u4e2d\uff0c<a href=\"/react/components-and-props\">props</a> \u662f\u7236\u7ec4\u4ef6\u4e0e\u5b50\u7ec4\u4ef6\u4ea4\u4e92\u7684\u552f\u4e00\u65b9\u5f0f\u3002\u8981\u4fee\u6539\u4e00\u4e2a\u5b50\u7ec4\u4ef6\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u65b0\u7684 props \u6765\u91cd\u65b0\u6e32\u67d3\u5b83\u3002\u4f46\u662f\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u5728\u5178\u578b\u6570\u636e\u6d41\u4e4b\u5916\u5f3a\u5236\u4fee\u6539\u5b50\u7ec4\u4ef6\u3002\u88ab\u4fee\u6539\u7684\u5b50\u7ec4\u4ef6\u53ef\u80fd\u662f\u4e00\u4e2a React \u7ec4\u4ef6\u7684\u5b9e\u4f8b\uff0c\u4e5f\u53ef\u80fd\u662f\u4e00\u4e2a DOM \u5143\u7d20\u3002\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u60c5\u51b5\uff0cReact \u90fd\u63d0\u4f9b\u4e86\u89e3\u51b3\u529e\u6cd5\u3002</p>\n<h3 id=\"when-to-use-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#when-to-use-refs\"></a>\u4f55\u65f6\u4f7f\u7528 Refs </h3>\n<p>\u4e0b\u9762\u662f\u51e0\u4e2a\u9002\u5408\u4f7f\u7528 refs \u7684\u60c5\u51b5\uff1a</p>\n<ul>\n<li>\u7ba1\u7406\u7126\u70b9\uff0c\u6587\u672c\u9009\u62e9\u6216\u5a92\u4f53\u64ad\u653e\u3002</li>\n<li>\u89e6\u53d1\u5f3a\u5236\u52a8\u753b\u3002</li>\n<li>\u96c6\u6210\u7b2c\u4e09\u65b9 DOM \u5e93\u3002</li>\n</ul>\n<p>\u907f\u514d\u4f7f\u7528 refs \u6765\u505a\u4efb\u4f55\u53ef\u4ee5\u901a\u8fc7\u58f0\u660e\u5f0f\u5b9e\u73b0\u6765\u5b8c\u6210\u7684\u4e8b\u60c5\u3002</p>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u907f\u514d\u5728 <code class=\"language-javascript\">Dialog</code> \u7ec4\u4ef6\u91cc\u66b4\u9732 <code class=\"language-javascript\">open()</code> \u548c <code class=\"language-javascript\">close()</code> \u65b9\u6cd5\uff0c\u6700\u597d\u4f20\u9012 <code class=\"language-javascript\">isOpen</code> \u5c5e\u6027\u3002</p>\n<h3 id=\"dont-overuse-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#dont-overuse-refs\"></a>\u52ff\u8fc7\u5ea6\u4f7f\u7528 Refs </h3>\n<p>\u4f60\u53ef\u80fd\u9996\u5148\u4f1a\u60f3\u5230\u4f7f\u7528 refs \u5728\u4f60\u7684 app \u4e2d\u201c\u8ba9\u4e8b\u60c5\u53d1\u751f\u201d\u3002\u5982\u679c\u662f\u8fd9\u79cd\u60c5\u51b5\uff0c\u8bf7\u82b1\u4e00\u70b9\u65f6\u95f4\uff0c\u8ba4\u771f\u518d\u8003\u8651\u4e00\u4e0b state \u5c5e\u6027\u5e94\u8be5\u88ab\u5b89\u6392\u5728\u54ea\u4e2a\u7ec4\u4ef6\u5c42\u4e2d\u3002\u901a\u5e38\u4f60\u4f1a\u60f3\u660e\u767d\uff0c\u8ba9\u66f4\u9ad8\u7684\u7ec4\u4ef6\u5c42\u7ea7\u62e5\u6709\u8fd9\u4e2a state\uff0c\u662f\u66f4\u6070\u5f53\u7684\u3002\u67e5\u770b <a href=\"/react/lifting-state-up\">\u72b6\u6001\u63d0\u5347</a> \u4ee5\u83b7\u53d6\u66f4\u591a\u6709\u5173\u793a\u4f8b\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u5df2\u7ecf\u66f4\u65b0\u4e3a\u4f7f\u7528\u5728 React 16.3 \u7248\u672c\u5f15\u5165\u7684 <code class=\"language-javascript\">React.createRef()</code> API\u3002\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528\u4e00\u4e2a\u8f83\u65e9\u7248\u672c\u7684 React\uff0c\u6211\u4eec\u63a8\u8350\u4f60\u4f7f\u7528<a href=\"/react/refs-and-the-dom#callback-refs\">\u56de\u8c03\u5f62\u5f0f\u7684 refs</a>\u3002</p>\n</div>\n<h3 id=\"creating-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#creating-refs\"></a>\u521b\u5efa Refs </h3>\n<p>Refs \u662f\u4f7f\u7528 <code class=\"language-javascript\">React.createRef()</code> \u521b\u5efa\u7684\uff0c\u5e76\u901a\u8fc7 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u9644\u52a0\u5230 React \u5143\u7d20\u3002\u5728\u6784\u9020\u7ec4\u4ef6\u65f6\uff0c\u901a\u5e38\u5c06 Refs \u5206\u914d\u7ed9\u5b9e\u4f8b\u5c5e\u6027\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5728\u6574\u4e2a\u7ec4\u4ef6\u4e2d\u5f15\u7528\u5b83\u4eec\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"accessing-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#accessing-refs\"></a>\u8bbf\u95ee Refs </h3>\n<p>\u5f53 ref \u88ab\u4f20\u9012\u7ed9 <code class=\"language-javascript\">render</code> \u4e2d\u7684\u5143\u7d20\u65f6\uff0c\u5bf9\u8be5\u8282\u70b9\u7684\u5f15\u7528\u53ef\u4ee5\u5728 ref \u7684 <code class=\"language-javascript\">current</code> \u5c5e\u6027\u4e2d\u88ab\u8bbf\u95ee\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> node <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span></code></pre></div>\n<p>ref \u7684\u503c\u6839\u636e\u8282\u70b9\u7684\u7c7b\u578b\u800c\u6709\u6240\u4e0d\u540c\uff1a</p>\n<ul>\n<li>\u5f53 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u7528\u4e8e HTML \u5143\u7d20\u65f6\uff0c\u6784\u9020\u51fd\u6570\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">React.createRef()</code> \u521b\u5efa\u7684 <code class=\"language-javascript\">ref</code> \u63a5\u6536\u5e95\u5c42 DOM \u5143\u7d20\u4f5c\u4e3a\u5176 <code class=\"language-javascript\">current</code> \u5c5e\u6027\u3002</li>\n<li>\u5f53 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u7528\u4e8e\u81ea\u5b9a\u4e49 class \u7ec4\u4ef6\u65f6\uff0c<code class=\"language-javascript\">ref</code> \u5bf9\u8c61\u63a5\u6536\u7ec4\u4ef6\u7684\u6302\u8f7d\u5b9e\u4f8b\u4f5c\u4e3a\u5176 <code class=\"language-javascript\">current</code> \u5c5e\u6027\u3002</li>\n<li><strong>\u4f60\u4e0d\u80fd\u5728\u51fd\u6570\u7ec4\u4ef6\u4e0a\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u5c5e\u6027</strong>\uff0c\u56e0\u4e3a\u4ed6\u4eec\u6ca1\u6709\u5b9e\u4f8b\u3002</li>\n</ul>\n<p>\u4ee5\u4e0b\u4f8b\u5b50\u8bf4\u660e\u4e86\u8fd9\u4e9b\u5dee\u5f02\u3002</p>\n<h4 id=\"adding-a-ref-to-a-dom-element\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#adding-a-ref-to-a-dom-element\"></a>\u4e3a DOM \u5143\u7d20\u6dfb\u52a0 ref  </h4>\n<p>\u4ee5\u4e0b\u4ee3\u7801\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u53bb\u5b58\u50a8 DOM \u8282\u70b9\u7684\u5f15\u7528\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomTextInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a ref \u6765\u5b58\u50a8 textInput \u7684 DOM \u5143\u7d20</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>focusTextInput <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">focusTextInput</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">focusTextInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u76f4\u63a5\u4f7f\u7528\u539f\u751f API \u4f7f text \u8f93\u5165\u6846\u83b7\u5f97\u7126\u70b9</span>\n    <span class=\"token comment\">// \u6ce8\u610f\uff1a\u6211\u4eec\u901a\u8fc7 \"current\" \u6765\u8bbf\u95ee DOM \u8282\u70b9</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u544a\u8bc9 React \u6211\u4eec\u60f3\u628a &lt;input&gt; ref \u5173\u8054\u5230</span>\n    <span class=\"token comment\">// \u6784\u9020\u5668\u91cc\u521b\u5efa\u7684 `textInput` \u4e0a</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Focus the text input<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>focusTextInput<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React \u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u65f6\u7ed9 <code class=\"language-javascript\">current</code> \u5c5e\u6027\u4f20\u5165 DOM \u5143\u7d20\uff0c\u5e76\u5728\u7ec4\u4ef6\u5378\u8f7d\u65f6\u4f20\u5165 <code class=\"language-javascript\">null</code> \u503c\u3002<code class=\"language-javascript\">ref</code> \u4f1a\u5728 <code class=\"language-javascript\">componentDidMount</code> \u6216 <code class=\"language-javascript\">componentDidUpdate</code> \u751f\u547d\u5468\u671f\u94a9\u5b50\u89e6\u53d1\u524d\u66f4\u65b0\u3002</p>\n<h4 id=\"adding-a-ref-to-a-class-component\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#adding-a-ref-to-a-class-component\"></a>\u4e3a class \u7ec4\u4ef6\u6dfb\u52a0 Ref </h4>\n<p>\u5982\u679c\u6211\u4eec\u60f3\u5305\u88c5\u4e0a\u9762\u7684 <code class=\"language-javascript\">CustomTextInput</code>\uff0c\u6765\u6a21\u62df\u5b83\u6302\u8f7d\u4e4b\u540e\u7acb\u5373\u88ab\u70b9\u51fb\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ref \u6765\u83b7\u53d6\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u7684 input \u7ec4\u4ef6\u5e76\u624b\u52a8\u8c03\u7528\u5b83\u7684 <code class=\"language-javascript\">focusTextInput</code> \u65b9\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">AutoFocusTextInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focusTextInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomTextInput</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4ec5\u5728 <code class=\"language-javascript\">CustomTextInput</code> \u58f0\u660e\u4e3a class \u65f6\u624d\u6709\u6548\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomTextInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"refs-and-function-components\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#refs-and-function-components\"></a>Refs \u4e0e\u51fd\u6570\u7ec4\u4ef6 </h4>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<strong>\u4f60\u4e0d\u80fd\u5728\u51fd\u6570\u7ec4\u4ef6\u4e0a\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u5c5e\u6027</strong>\uff0c\u56e0\u4e3a\u5b83\u4eec\u6ca1\u6709\u5b9e\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">MyFunctionComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// This will *not* work!</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyFunctionComponent</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u8981\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">ref</code>\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <a href=\"/react/forwarding-refs\"><code class=\"language-javascript\">forwardRef</code></a>\uff08\u53ef\u4e0e <a href=\"/react/hooks-reference#useimperativehandle\"><code class=\"language-javascript\">useImperativeHandle</code></a> \u7ed3\u5408\u4f7f\u7528\uff09\uff0c\u6216\u8005\u53ef\u4ee5\u5c06\u8be5\u7ec4\u4ef6\u8f6c\u5316\u4e3a class \u7ec4\u4ef6\u3002</p>\n<p>\u4e0d\u7ba1\u600e\u6837\uff0c\u4f60\u53ef\u4ee5<strong>\u5728\u51fd\u6570\u7ec4\u4ef6\u5185\u90e8\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u5c5e\u6027</strong>\uff0c\u53ea\u8981\u5b83\u6307\u5411\u4e00\u4e2a DOM \u5143\u7d20\u6216 class \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">CustomTextInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u8fd9\u91cc\u5fc5\u987b\u58f0\u660e textInput\uff0c\u8fd9\u6837 ref \u624d\u53ef\u4ee5\u5f15\u7528\u5b83</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> textInput <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    textInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>textInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Focus the text input<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"exposing-dom-refs-to-parent-components\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#exposing-dom-refs-to-parent-components\"></a>\u5c06 DOM Refs \u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6 </h3>\n<p>\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u7236\u7ec4\u4ef6\u4e2d\u5f15\u7528\u5b50\u8282\u70b9\u7684 DOM \u8282\u70b9\u3002\u901a\u5e38\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u5b83\u4f1a\u6253\u7834\u7ec4\u4ef6\u7684\u5c01\u88c5\uff0c\u4f46\u5b83\u5076\u5c14\u53ef\u7528\u4e8e\u89e6\u53d1\u7126\u70b9\u6216\u6d4b\u91cf\u5b50 DOM \u8282\u70b9\u7684\u5927\u5c0f\u6216\u4f4d\u7f6e\u3002</p>\n<p>\u867d\u7136\u4f60\u53ef\u4ee5<a href=\"/react/refs-and-the-dom#adding-a-ref-to-a-class-component\">\u5411\u5b50\u7ec4\u4ef6\u6dfb\u52a0 ref</a>\uff0c\u4f46\u8fd9\u4e0d\u662f\u4e00\u4e2a\u7406\u60f3\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u4e3a\u4f60\u53ea\u80fd\u83b7\u53d6\u7ec4\u4ef6\u5b9e\u4f8b\u800c\u4e0d\u662f DOM \u8282\u70b9\u3002\u5e76\u4e14\uff0c\u5b83\u8fd8\u5728\u51fd\u6570\u7ec4\u4ef6\u4e0a\u65e0\u6548\u3002</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 16.3 \u6216\u66f4\u9ad8\u7248\u672c\u7684 React, \u8fd9\u79cd\u60c5\u51b5\u4e0b\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <a href=\"/react/forwarding-refs\">ref \u8f6c\u53d1</a>\u3002<strong>Ref \u8f6c\u53d1\u4f7f\u7ec4\u4ef6\u53ef\u4ee5\u50cf\u66b4\u9732\u81ea\u5df1\u7684 ref \u4e00\u6837\u66b4\u9732\u5b50\u7ec4\u4ef6\u7684 ref</strong>\u3002\u5173\u4e8e\u600e\u6837\u5bf9\u7236\u7ec4\u4ef6\u66b4\u9732\u5b50\u7ec4\u4ef6\u7684 DOM \u8282\u70b9\uff0c\u5728 <a href=\"/react/forwarding-refs#forwarding-refs-to-dom-components\">ref \u8f6c\u53d1\u6587\u6863</a>\u4e2d\u6709\u4e00\u4e2a\u8be6\u7ec6\u7684\u4f8b\u5b50\u3002</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 16.2 \u6216\u66f4\u4f4e\u7248\u672c\u7684 React\uff0c\u6216\u8005\u4f60\u9700\u8981\u6bd4 ref \u8f6c\u53d1\u66f4\u9ad8\u7684\u7075\u6d3b\u6027\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<a class=\"external-link\" href=\"https://gist.github.com/gaearon/1a018a023347fe1c2476073330cc5509\">\u8fd9\u4e2a\u66ff\u4ee3\u65b9\u6848</a>\u5c06 ref \u4f5c\u4e3a\u7279\u6b8a\u540d\u5b57\u7684 prop \u76f4\u63a5\u4f20\u9012\u3002</p>\n<p>\u53ef\u80fd\u7684\u8bdd\uff0c\u6211\u4eec\u4e0d\u5efa\u8bae\u66b4\u9732 DOM \u8282\u70b9\uff0c\u4f46\u6709\u65f6\u5019\u5b83\u4f1a\u6210\u4e3a\u6551\u547d\u7a3b\u8349\u3002\u6ce8\u610f\u8fd9\u4e2a\u65b9\u6848\u9700\u8981\u4f60\u5728\u5b50\u7ec4\u4ef6\u4e2d\u589e\u52a0\u4e00\u4e9b\u4ee3\u7801\u3002\u5982\u679c\u4f60\u5bf9\u5b50\u7ec4\u4ef6\u7684\u5b9e\u73b0\u6ca1\u6709\u63a7\u5236\u6743\u7684\u8bdd\uff0c\u4f60\u5269\u4e0b\u7684\u9009\u62e9\u662f\u4f7f\u7528 <a href=\"/react/react-dom#finddomnode\"><code class=\"language-javascript\">findDOMNode()</code></a>\uff0c\u4f46\u5728<a href=\"/react/strict-mode#warning-about-deprecated-finddomnode-usage\"><code class=\"language-javascript\">\u4e25\u683c\u6a21\u5f0f</code></a> \u4e0b\u5df2\u88ab\u5e9f\u5f03\u4e14\u4e0d\u63a8\u8350\u4f7f\u7528\u3002</p>\n<h3 id=\"callback-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#callback-refs\"></a>\u56de\u8c03 Refs </h3>\n<p>React \u4e5f\u652f\u6301\u53e6\u4e00\u79cd\u8bbe\u7f6e refs \u7684\u65b9\u5f0f\uff0c\u79f0\u4e3a\u201c\u56de\u8c03 refs\u201d\u3002\u5b83\u80fd\u52a9\u4f60\u66f4\u7cbe\u7ec6\u5730\u63a7\u5236\u4f55\u65f6 refs \u88ab\u8bbe\u7f6e\u548c\u89e3\u9664\u3002</p>\n<p>\u4e0d\u540c\u4e8e\u4f20\u9012 <code class=\"language-javascript\">createRef()</code> \u521b\u5efa\u7684 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\uff0c\u4f60\u4f1a\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u4e2d\u63a5\u53d7 React \u7ec4\u4ef6\u5b9e\u4f8b\u6216 HTML DOM \u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\uff0c\u4ee5\u4f7f\u5b83\u4eec\u80fd\u5728\u5176\u4ed6\u5730\u65b9\u88ab\u5b58\u50a8\u548c\u8bbf\u95ee\u3002</p>\n<p>\u4e0b\u9762\u7684\u4f8b\u5b50\u63cf\u8ff0\u4e86\u4e00\u4e2a\u901a\u7528\u7684\u8303\u4f8b\uff1a\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u56de\u8c03\u51fd\u6570\uff0c\u5728\u5b9e\u4f8b\u7684\u5c5e\u6027\u4e2d\u5b58\u50a8\u5bf9 DOM \u8282\u70b9\u7684\u5f15\u7528\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomTextInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">setTextInputRef</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">element</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> element<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">focusTextInput</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// \u4f7f\u7528\u539f\u751f DOM API \u4f7f text \u8f93\u5165\u6846\u83b7\u5f97\u7126\u70b9</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u7ec4\u4ef6\u6302\u8f7d\u540e\uff0c\u8ba9\u6587\u672c\u6846\u81ea\u52a8\u83b7\u5f97\u7126\u70b9</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">focusTextInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u4f7f\u7528 `ref` \u7684\u56de\u8c03\u51fd\u6570\u5c06 text \u8f93\u5165\u6846 DOM \u8282\u70b9\u7684\u5f15\u7528\u5b58\u50a8\u5230 React</span>\n    <span class=\"token comment\">// \u5b9e\u4f8b\u4e0a\uff08\u6bd4\u5982 this.textInput\uff09</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>setTextInputRef<span class=\"token punctuation\">}</span></span></span>        <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Focus the text input<span class=\"token punctuation\">\"</span></span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>focusTextInput<span class=\"token punctuation\">}</span></span></span>        <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React \u5c06\u5728\u7ec4\u4ef6\u6302\u8f7d\u65f6\uff0c\u4f1a\u8c03\u7528 <code class=\"language-javascript\">ref</code> \u56de\u8c03\u51fd\u6570\u5e76\u4f20\u5165 DOM \u5143\u7d20\uff0c\u5f53\u5378\u8f7d\u65f6\u8c03\u7528\u5b83\u5e76\u4f20\u5165 <code class=\"language-javascript\">null</code>\u3002\u5728 <code class=\"language-javascript\">componentDidMount</code> \u6216 <code class=\"language-javascript\">componentDidUpdate</code> \u89e6\u53d1\u524d\uff0cReact \u4f1a\u4fdd\u8bc1 refs \u4e00\u5b9a\u662f\u6700\u65b0\u7684\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728\u7ec4\u4ef6\u95f4\u4f20\u9012\u56de\u8c03\u5f62\u5f0f\u7684 refs\uff0c\u5c31\u50cf\u4f60\u53ef\u4ee5\u4f20\u9012\u901a\u8fc7 <code class=\"language-javascript\">React.createRef()</code> \u521b\u5efa\u7684\u5bf9\u8c61 refs \u4e00\u6837\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">CustomTextInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Parent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomTextInput</span></span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token attr-name\">inputRef</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputElement <span class=\"token operator\">=</span> el<span class=\"token punctuation\">}</span></span></span>      <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c<code class=\"language-javascript\">Parent</code> \u628a\u5b83\u7684 refs \u56de\u8c03\u51fd\u6570\u5f53\u4f5c <code class=\"language-javascript\">inputRef</code> props \u4f20\u9012\u7ed9\u4e86 <code class=\"language-javascript\">CustomTextInput</code>\uff0c\u800c\u4e14 <code class=\"language-javascript\">CustomTextInput</code> \u628a\u76f8\u540c\u7684\u51fd\u6570\u4f5c\u4e3a\u7279\u6b8a\u7684 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u4f20\u9012\u7ed9\u4e86 <code class=\"language-javascript\">&lt;input&gt;</code>\u3002\u7ed3\u679c\u662f\uff0c\u5728 <code class=\"language-javascript\">Parent</code> \u4e2d\u7684 <code class=\"language-javascript\">this.inputElement</code> \u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u4e0e <code class=\"language-javascript\">CustomTextInput</code> \u4e2d\u7684 <code class=\"language-javascript\">input</code> \u5143\u7d20\u76f8\u5bf9\u5e94\u7684 DOM \u8282\u70b9\u3002</p>\n<h3 id=\"legacy-api-string-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#legacy-api-string-refs\"></a>\u8fc7\u65f6 API\uff1aString \u7c7b\u578b\u7684 Refs </h3>\n<p>\u5982\u679c\u4f60\u4e4b\u524d\u4f7f\u7528\u8fc7 React\uff0c\u4f60\u53ef\u80fd\u4e86\u89e3\u8fc7\u4e4b\u524d\u7684 API \u4e2d\u7684 string \u7c7b\u578b\u7684 ref \u5c5e\u6027\uff0c\u4f8b\u5982 <code class=\"language-javascript\">\"textInput\"</code>\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7 <code class=\"language-javascript\">this.refs.textInput</code> \u6765\u8bbf\u95ee DOM \u8282\u70b9\u3002\u6211\u4eec\u4e0d\u5efa\u8bae\u4f7f\u7528\u5b83\uff0c\u56e0\u4e3a string \u7c7b\u578b\u7684 refs \u5b58\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react/pull/8333#issuecomment-271648615\">\u4e00\u4e9b\u95ee\u9898</a>\u3002\u5b83\u5df2\u8fc7\u65f6\u5e76\u53ef\u80fd\u4f1a\u5728\u672a\u6765\u7684\u7248\u672c\u88ab\u79fb\u9664\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c\u4f60\u76ee\u524d\u8fd8\u5728\u4f7f\u7528 <code class=\"language-javascript\">this.refs.textInput</code> \u8fd9\u79cd\u65b9\u5f0f\u8bbf\u95ee refs \uff0c\u6211\u4eec\u5efa\u8bae\u7528<a href=\"/react/refs-and-the-dom#callback-refs\">\u56de\u8c03\u51fd\u6570</a>\u6216 <a href=\"/react/refs-and-the-dom#creating-refs\"><code class=\"language-javascript\">createRef</code> API</a> \u7684\u65b9\u5f0f\u4ee3\u66ff\u3002</p>\n</div>\n<h3 id=\"caveats-with-callback-refs\"><a class=\"anchor\" href=\"/react/refs-and-the-dom#caveats-with-callback-refs\"></a>\u5173\u4e8e\u56de\u8c03 refs \u7684\u8bf4\u660e </h3>\n<p>\u5982\u679c <code class=\"language-javascript\">ref</code> \u56de\u8c03\u51fd\u6570\u662f\u4ee5\u5185\u8054\u51fd\u6570\u7684\u65b9\u5f0f\u5b9a\u4e49\u7684\uff0c\u5728\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u5b83\u4f1a\u88ab\u6267\u884c\u4e24\u6b21\uff0c\u7b2c\u4e00\u6b21\u4f20\u5165\u53c2\u6570 <code class=\"language-javascript\">null</code>\uff0c\u7136\u540e\u7b2c\u4e8c\u6b21\u4f1a\u4f20\u5165\u53c2\u6570 DOM \u5143\u7d20\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u5b9e\u4f8b\uff0c\u6240\u4ee5 React \u6e05\u7a7a\u65e7\u7684 ref \u5e76\u4e14\u8bbe\u7f6e\u65b0\u7684\u3002\u901a\u8fc7\u5c06 ref \u7684\u56de\u8c03\u51fd\u6570\u5b9a\u4e49\u6210 class \u7684\u7ed1\u5b9a\u51fd\u6570\u7684\u65b9\u5f0f\u53ef\u4ee5\u907f\u514d\u4e0a\u8ff0\u95ee\u9898\uff0c\u4f46\u662f\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u5b83\u662f\u65e0\u5173\u7d27\u8981\u7684\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/refs-and-the-dom.md\">Edit this page</a></p></div></article>", "path": "/react/refs-and-the-dom", "nav": ["/react/reconciliation", "/react/render-props"]}, {"key": "Render Props", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u672f\u8bed <a class=\"external-link\" href=\"https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce\">\u201crender prop\u201d</a> \u662f\u6307\u4e00\u79cd\u5728 React \u7ec4\u4ef6\u4e4b\u95f4\u4f7f\u7528\u4e00\u4e2a\u503c\u4e3a\u51fd\u6570\u7684 prop \u5171\u4eab\u4ee3\u7801\u7684\u7b80\u5355\u6280\u672f</p>\n<p>\u5177\u6709 render prop \u7684\u7ec4\u4ef6\u63a5\u53d7\u4e00\u4e2a\u8fd4\u56de React \u5143\u7d20\u7684\u51fd\u6570\uff0c\u5e76\u5728\u7ec4\u4ef6\u5185\u90e8\u901a\u8fc7\u8c03\u7528\u6b64\u51fd\u6570\u6765\u5b9e\u73b0\u81ea\u5df1\u7684\u6e32\u67d3\u903b\u8f91\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DataProvider</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u4f7f\u7528 render prop \u7684\u5e93\u6709 <a class=\"external-link\" href=\"https://reacttraining.com/react-router/web/api/Route/render-func\">React Router</a>\u3001<a class=\"external-link\" href=\"https://github.com/paypal/downshift\">Downshift</a> \u4ee5\u53ca <a class=\"external-link\" href=\"https://github.com/jaredpalmer/formik\">Formik</a>\u3002</p>\n<p>\u5728\u8fd9\u4e2a\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u4e3a\u4ec0\u4e48 render prop \u662f\u6709\u7528\u7684\uff0c\u4ee5\u53ca\u5982\u4f55\u5199\u4e00\u4e2a\u81ea\u5df1\u7684 render prop \u7ec4\u4ef6\u3002</p>\n<h2 id=\"use-render-props-for-cross-cutting-concerns\"><a class=\"anchor\" href=\"/react/render-props#use-render-props-for-cross-cutting-concerns\"></a>\u4f7f\u7528 Render Props \u6765\u89e3\u51b3\u6a2a\u5207\u5173\u6ce8\u70b9\uff08Cross-Cutting Concerns\uff09 </h2>\n<p>\u7ec4\u4ef6\u662f React \u4ee3\u7801\u590d\u7528\u7684\u4e3b\u8981\u5355\u5143\uff0c\u4f46\u5982\u4f55\u5c06\u4e00\u4e2a\u7ec4\u4ef6\u5c01\u88c5\u7684\u72b6\u6001\u6216\u884c\u4e3a\u5171\u4eab\u7ed9\u5176\u4ed6\u9700\u8981\u76f8\u540c\u72b6\u6001\u7684\u7ec4\u4ef6\u5e76\u4e0d\u603b\u662f\u663e\u800c\u6613\u89c1\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4ee5\u4e0b\u7ec4\u4ef6\u8ddf\u8e2a Web \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u9f20\u6807\u4f4d\u7f6e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseTracker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onMouseMove</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u79fb\u52a8\u9f20\u6807!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u5f53\u524d\u7684\u9f20\u6807\u4f4d\u7f6e\u662f (</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">}</span><span class=\"token plain-text\">, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">}</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5f53\u5149\u6807\u5728\u5c4f\u5e55\u4e0a\u79fb\u52a8\u65f6\uff0c\u7ec4\u4ef6\u5728 <code class=\"language-javascript\">&lt;p&gt;</code> \u4e2d\u663e\u793a\u5176\uff08x\uff0cy\uff09\u5750\u6807\u3002</p>\n<p>\u73b0\u5728\u7684\u95ee\u9898\u662f\uff1a\u6211\u4eec\u5982\u4f55\u5728\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u590d\u7528\u8fd9\u4e2a\u884c\u4e3a\uff1f\u6362\u4e2a\u8bf4\u6cd5\uff0c\u82e5\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u9700\u8981\u77e5\u9053\u9f20\u6807\u4f4d\u7f6e\uff0c\u6211\u4eec\u80fd\u5426\u5c01\u88c5\u8fd9\u4e00\u884c\u4e3a\uff0c\u4ee5\u4fbf\u8f7b\u677e\u5730\u4e0e\u5176\u4ed6\u7ec4\u4ef6\u5171\u4eab\u5b83\uff1f</p>\n<p>\u7531\u4e8e\u7ec4\u4ef6\u662f React \u4e2d\u6700\u57fa\u7840\u7684\u4ee3\u7801\u590d\u7528\u5355\u5143\uff0c\u73b0\u5728\u5c1d\u8bd5\u91cd\u6784\u4e00\u90e8\u5206\u4ee3\u7801\u4f7f\u5176\u80fd\u591f\u5728 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\u4e2d\u5c01\u88c5\u6211\u4eec\u9700\u8981\u5171\u4eab\u7684\u884c\u4e3a\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// &lt;Mouse&gt; \u7ec4\u4ef6\u5c01\u88c5\u4e86\u6211\u4eec\u9700\u8981\u7684\u884c\u4e3a...</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Mouse</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onMouseMove</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* ...\u4f46\u6211\u4eec\u5982\u4f55\u6e32\u67d3 &lt;p&gt; \u4ee5\u5916\u7684\u4e1c\u897f? */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">The current mouse position is (</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">}</span><span class=\"token plain-text\">, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">}</span><span class=\"token plain-text\">)</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseTracker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u79fb\u52a8\u9f20\u6807!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728  <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\u5c01\u88c5\u4e86\u6240\u6709\u5173\u4e8e\u76d1\u542c <code class=\"language-javascript\">mousemove</code> \u4e8b\u4ef6\u548c\u5b58\u50a8\u9f20\u6807 (x, y) \u4f4d\u7f6e\u7684\u884c\u4e3a\uff0c\u4f46\u5176\u4ecd\u4e0d\u662f\u771f\u6b63\u7684\u53ef\u590d\u7528\u3002</p>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a <code class=\"language-javascript\">&lt;Cat&gt;</code> \u7ec4\u4ef6\uff0c\u5b83\u53ef\u4ee5\u5448\u73b0\u4e00\u5f20\u5728\u5c4f\u5e55\u4e0a\u8ffd\u9010\u9f20\u6807\u7684\u732b\u7684\u56fe\u7247\u3002\u6211\u4eec\u6216\u8bb8\u4f1a\u4f7f\u7528 <code class=\"language-javascript\">&lt;Cat mouse={{ x, y }}</code> prop \u6765\u544a\u8bc9\u7ec4\u4ef6\u9f20\u6807\u7684\u5750\u6807\u4ee5\u8ba9\u5b83\u77e5\u9053\u56fe\u7247\u5e94\u8be5\u5728\u5c4f\u5e55\u54ea\u4e2a\u4f4d\u7f6e\u3002</p>\n<p>\u9996\u5148, \u4f60\u6216\u8bb8\u4f1a\u50cf\u8fd9\u6837\uff0c\u5c1d\u8bd5\u5728 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u5185\u90e8\u7684\u6e32\u67d3\u65b9\u6cd5\u6e32\u67d3 <code class=\"language-javascript\">&lt;Cat&gt;</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Cat</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> mouse <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>mouse<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/cat.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> mouse<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> mouse<span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseWithCat</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onMouseMove</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/*\n          \u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u4f7f\u7528 &lt;Cat&gt; \u6765\u66ff\u6362 &lt;p&gt;\u3002\u4f46\u662f\u5982\u679c\u8fd9\u6837\n          \u505a\u7684\u8bdd\uff0c\u5f53\u6211\u4eec\u6bcf\u6b21\u9047\u5230\u8fd9\u6837\u7684\u60c5\u51b5\u65f6\uff0c\u5c31\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u5355\u72ec\u7684\n          &lt;MouseWithSomethingElse&gt;\u3002\u6240\u4ee5 &lt;MouseWithCat&gt; \u5e76\u4e0d\u662f\u771f\u6b63\u7684\u53ef\u590d\u7528\u7ec4\u4ef6\u3002\n        */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cat</span></span> <span class=\"token attr-name\">mouse</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseTracker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u79fb\u52a8\u9f20\u6807!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MouseWithCat</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u79cd\u65b9\u6cd5\u9002\u7528\u4e8e\u6211\u4eec\u7684\u7279\u5b9a\u7528\u4f8b\uff0c\u4f46\u6211\u4eec\u8fd8\u6ca1\u6709\u8fbe\u5230\u4ee5\u53ef\u590d\u7528\u7684\u65b9\u5f0f\u771f\u6b63\u5c01\u88c5\u884c\u4e3a\u7684\u76ee\u6807\u3002\u73b0\u5728\uff0c\u6bcf\u5f53\u6211\u4eec\u60f3\u8981\u9f20\u6807\u4f4d\u7f6e\u7528\u4e8e\u4e0d\u540c\u7684\u7528\u4f8b\u65f6\uff0c\u6211\u4eec\u5fc5\u987b\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ec4\u4ef6\uff08\u672c\u8d28\u4e0a\u662f\u53e6\u4e00\u4e2a <code class=\"language-javascript\">&lt;MouseWithCat&gt;</code> \uff09\uff0c\u5b83\u4e13\u95e8\u4e3a\u8be5\u7528\u4f8b\u5448\u73b0\u4e00\u4e9b\u4e1c\u897f\u3002</p>\n<p>\u8fd9\u4e5f\u662f render prop \u7684\u6765\u5386\uff1a\u76f8\u6bd4\u4e8e\u76f4\u63a5\u5c06 <code class=\"language-javascript\">&lt;Cat&gt;</code> \u5199\u6b7b\u5728 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\u4e2d\uff0c\u5e76\u4e14\u6709\u6548\u5730\u66f4\u6539\u6e32\u67d3\u7684\u7ed3\u679c\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u63d0\u4f9b\u4e00\u4e2a\u51fd\u6570 prop \u6765\u52a8\u6001\u7684\u786e\u5b9a\u8981\u6e32\u67d3\u4ec0\u4e48 \u2014\u2014 \u4e00\u4e2a render prop\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Cat</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> mouse <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>mouse<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/cat.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> mouse<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> mouse<span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Mouse</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>clientY\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100vh'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onMouseMove</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/*\n          \u4f7f\u7528 `render`prop \u52a8\u6001\u51b3\u5b9a\u8981\u6e32\u67d3\u7684\u5185\u5bb9\uff0c\n          \u800c\u4e0d\u662f\u7ed9\u51fa\u4e00\u4e2a &lt;Mouse&gt; \u6e32\u67d3\u7ed3\u679c\u7684\u9759\u6001\u8868\u793a\n        */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseTracker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u79fb\u52a8\u9f20\u6807!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">mouse</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cat</span></span> <span class=\"token attr-name\">mouse</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a <code class=\"language-javascript\">render</code> \u65b9\u6cd5 \u8ba9 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u80fd\u591f\u52a8\u6001\u51b3\u5b9a\u4ec0\u4e48\u9700\u8981\u6e32\u67d3\uff0c\u800c\u4e0d\u662f\u514b\u9686 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\u7136\u540e\u786c\u7f16\u7801\u6765\u89e3\u51b3\u7279\u5b9a\u7684\u7528\u4f8b\u3002</p>\n<p>\u66f4\u5177\u4f53\u5730\u8bf4\uff0c<strong>render prop \u662f\u4e00\u4e2a\u7528\u4e8e\u544a\u77e5\u7ec4\u4ef6\u9700\u8981\u6e32\u67d3\u4ec0\u4e48\u5185\u5bb9\u7684\u51fd\u6570 prop\u3002</strong></p>\n<p>\u8fd9\u9879\u6280\u672f\u4f7f\u6211\u4eec\u5171\u4eab\u884c\u4e3a\u975e\u5e38\u5bb9\u6613\u3002\u8981\u83b7\u5f97\u8fd9\u4e2a\u884c\u4e3a\uff0c\u53ea\u8981\u6e32\u67d3\u4e00\u4e2a\u5e26\u6709 <code class=\"language-javascript\">render</code> prop \u7684 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\u5c31\u80fd\u591f\u544a\u8bc9\u5b83\u5f53\u524d\u9f20\u6807\u5750\u6807 (x, y) \u8981\u6e32\u67d3\u4ec0\u4e48\u3002</p>\n<p>\u5173\u4e8e render prop \u4e00\u4e2a\u6709\u8da3\u7684\u4e8b\u60c5\u662f\u4f60\u53ef\u4ee5\u4f7f\u7528\u5e26\u6709 render prop \u7684\u5e38\u89c4\u7ec4\u4ef6\u6765\u5b9e\u73b0\u5927\u591a\u6570<a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a> (HOC)\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u4f60\u66f4\u559c\u6b22\u4f7f\u7528 <code class=\"language-javascript\">withMouse</code> HOC\u800c\u4e0d\u662f <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5e26\u6709 render prop \u7684\u5e38\u89c4 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u8f7b\u677e\u521b\u5efa\u4e00\u4e2a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u5982\u679c\u4f60\u51fa\u4e8e\u67d0\u79cd\u539f\u56e0\u771f\u7684\u60f3\u8981 HOC\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0</span>\n<span class=\"token comment\">// \u4f7f\u7528\u5177\u6709 render prop \u7684\u666e\u901a\u7ec4\u4ef6\u521b\u5efa\u4e00\u4e2a\uff01</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">withMouse</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">extends</span> React<span class=\"token punctuation\">.</span>Component <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">mouse</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">mouse</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u56e0\u6b64\uff0c\u4f60\u53ef\u4ee5\u5c06\u4efb\u4e00\u6a21\u5f0f\u4e0e render prop \u4e00\u8d77\u4f7f\u7528\u3002</p>\n<h2 id=\"using-props-other-than-render\"><a class=\"anchor\" href=\"/react/render-props#using-props-other-than-render\"></a>\u4f7f\u7528 Props \u800c\u975e <code class=\"language-javascript\">render</code> </h2>\n<p>\u91cd\u8981\u7684\u662f\u8981\u8bb0\u4f4f\uff0crender prop \u662f\u56e0\u4e3a\u6a21\u5f0f\u624d\u88ab\u79f0\u4e3a <em>render</em> prop \uff0c\u4f60\u4e0d\u4e00\u5b9a\u8981\u7528\u540d\u4e3a <code class=\"language-javascript\">render</code> \u7684 prop \u6765\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f\u3002\u4e8b\u5b9e\u4e0a\uff0c <a class=\"external-link\" href=\"https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce\"><em>\u4efb\u4f55</em>\u88ab\u7528\u4e8e\u544a\u77e5\u7ec4\u4ef6\u9700\u8981\u6e32\u67d3\u4ec0\u4e48\u5185\u5bb9\u7684\u51fd\u6570 prop \u5728\u6280\u672f\u4e0a\u90fd\u53ef\u4ee5\u88ab\u79f0\u4e3a \u201crender prop\u201d</a>\u3002</p>\n<p>\u5c3d\u7ba1\u4e4b\u524d\u7684\u4f8b\u5b50\u4f7f\u7528\u4e86 <code class=\"language-javascript\">render</code>\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7b80\u5355\u5730\u4f7f\u7528 <code class=\"language-javascript\">children</code> prop\uff01</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span> <span class=\"token attr-name\">children</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">mouse</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u9f20\u6807\u7684\u4f4d\u7f6e\u662f </span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\uff0c</span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u8bb0\u4f4f\uff0c<code class=\"language-javascript\">children</code> prop \u5e76\u4e0d\u771f\u6b63\u9700\u8981\u6dfb\u52a0\u5230 JSX \u5143\u7d20\u7684 \u201cattributes\u201d \u5217\u8868\u4e2d\u3002\u76f8\u53cd\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u653e\u7f6e\u5230\u5143\u7d20\u7684<em>\u5185\u90e8</em>\uff01</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">mouse</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u9f20\u6807\u7684\u4f4d\u7f6e\u662f </span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\uff0c</span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Mouse</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4f60\u5c06\u5728 <a class=\"external-link\" href=\"https://github.com/chenglou/react-motion\">react-motion</a> \u7684 API \u4e2d\u770b\u5230\u6b64\u6280\u672f\u3002</p>\n<p>\u7531\u4e8e\u8fd9\u4e00\u6280\u672f\u7684\u7279\u6b8a\u6027\uff0c\u5f53\u4f60\u5728\u8bbe\u8ba1\u4e00\u4e2a\u7c7b\u4f3c\u7684 API \u65f6\uff0c\u4f60\u6216\u8bb8\u4f1a\u8981\u76f4\u63a5\u5730\u5728\u4f60\u7684 propTypes \u91cc\u58f0\u660e children \u7684\u7c7b\u578b\u5e94\u4e3a\u4e00\u4e2a\u51fd\u6570\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">Mouse<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"caveats\"><a class=\"anchor\" href=\"/react/render-props#caveats\"></a>\u6ce8\u610f\u4e8b\u9879 </h2>\n<h3 id=\"be-careful-when-using-render-props-with-reactpurecomponent\"><a class=\"anchor\" href=\"/react/render-props#be-careful-when-using-render-props-with-reactpurecomponent\"></a>\u5c06 Render Props \u4e0e React.PureComponent \u4e00\u8d77\u4f7f\u7528\u65f6\u8981\u5c0f\u5fc3 </h3>\n<p>\u5982\u679c\u4f60\u5728 render \u65b9\u6cd5\u91cc\u521b\u5efa\u51fd\u6570\uff0c\u90a3\u4e48\u4f7f\u7528 render prop \u4f1a\u62b5\u6d88\u4f7f\u7528 <a href=\"/react/react-api#reactpurecomponent\"><code class=\"language-javascript\">React.PureComponent</code></a> \u5e26\u6765\u7684\u4f18\u52bf\u3002\u56e0\u4e3a\u6d45\u6bd4\u8f83 props \u7684\u65f6\u5019\u603b\u4f1a\u5f97\u5230 false\uff0c\u5e76\u4e14\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6bcf\u4e00\u4e2a <code class=\"language-javascript\">render</code> \u5bf9\u4e8e render prop \u5c06\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u503c\u3002</p>\n<p>\u4f8b\u5982\uff0c\u7ee7\u7eed\u6211\u4eec\u4e4b\u524d\u4f7f\u7528\u7684 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\uff0c\u5982\u679c <code class=\"language-javascript\">Mouse</code> \u7ee7\u627f\u81ea <code class=\"language-javascript\">React.PureComponent</code> \u800c\u4e0d\u662f <code class=\"language-javascript\">React.Component</code>\uff0c\u6211\u4eec\u7684\u4f8b\u5b50\u770b\u8d77\u6765\u5c31\u50cf\u8fd9\u6837\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Mouse</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4e0e\u4e0a\u9762\u76f8\u540c\u7684\u4ee3\u7801......</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseTracker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Move the mouse around!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/*\n          \u8fd9\u662f\u4e0d\u597d\u7684\uff01\n          \u6bcf\u4e2a\u6e32\u67d3\u7684 `render` prop\u7684\u503c\u5c06\u4f1a\u662f\u4e0d\u540c\u7684\u3002\n        */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">mouse</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cat</span></span> <span class=\"token attr-name\">mouse</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u6837\u4f8b\u5b50\u4e2d\uff0c\u6bcf\u6b21 <code class=\"language-javascript\">&lt;MouseTracker&gt;</code> \u6e32\u67d3\uff0c\u5b83\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u4f5c\u4e3a <code class=\"language-javascript\">&lt;Mouse render&gt;</code> \u7684 prop\uff0c\u56e0\u800c\u5728\u540c\u65f6\u4e5f\u62b5\u6d88\u4e86\u7ee7\u627f\u81ea <code class=\"language-javascript\">React.PureComponent</code> \u7684 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u7ec4\u4ef6\u7684\u6548\u679c\uff01</p>\n<p>\u4e3a\u4e86\u7ed5\u8fc7\u8fd9\u4e00\u95ee\u9898\uff0c\u6709\u65f6\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a prop \u4f5c\u4e3a\u5b9e\u4f8b\u65b9\u6cd5\uff0c\u7c7b\u4f3c\u8fd9\u6837\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MouseTracker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u5b9a\u4e49\u4e3a\u5b9e\u4f8b\u65b9\u6cd5\uff0c`this.renderTheCat`\u59cb\u7ec8</span>\n  <span class=\"token comment\">// \u5f53\u6211\u4eec\u5728\u6e32\u67d3\u4e2d\u4f7f\u7528\u5b83\u65f6\uff0c\u5b83\u6307\u7684\u662f\u76f8\u540c\u7684\u51fd\u6570</span>\n  <span class=\"token function\">renderTheCat</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">mouse</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cat</span></span> <span class=\"token attr-name\">mouse</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>mouse<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Move the mouse around!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Mouse</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderTheCat<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u65e0\u6cd5\u9759\u6001\u5b9a\u4e49 prop\uff08\u4f8b\u5982\uff0c\u56e0\u4e3a\u4f60\u9700\u8981\u63a7\u5236\u7ec4\u4ef6 props \u548c/\u6216 state \u7684\u66b4\u9732\u7a0b\u5ea6\uff09\uff0c\u5219 <code class=\"language-javascript\">&lt;Mouse&gt;</code> \u5e94\u8be5\u7ee7\u627f\u81ea <code class=\"language-javascript\">React.Component</code>\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/render-props.md\">Edit this page</a></p></div></article>", "path": "/react/render-props", "nav": ["/react/refs-and-the-dom", "/react/static-type-checking"]}, {"key": "\u9759\u6001\u7c7b\u578b\u68c0\u67e5", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u50cf <a class=\"external-link\" href=\"https://flow.org/\">Flow</a> \u548c <a class=\"external-link\" href=\"https://www.typescriptlang.org/\">TypeScript</a> \u7b49\u8fd9\u4e9b\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u5668\uff0c\u53ef\u4ee5\u5728\u8fd0\u884c\u524d\u8bc6\u522b\u67d0\u4e9b\u7c7b\u578b\u7684\u95ee\u9898\u3002\u4ed6\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u81ea\u52a8\u8865\u5168\u7b49\u529f\u80fd\u6765\u6539\u5584\u5f00\u53d1\u8005\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002\u51fa\u4e8e\u8fd9\u4e2a\u539f\u56e0\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u5927\u578b\u4ee3\u7801\u5e93\u4e2d\u4f7f\u7528 Flow \u6216 TypeScript \u6765\u4ee3\u66ff <code class=\"language-javascript\">PropTypes</code>\u3002</p>\n<h2 id=\"flow\"><a class=\"anchor\" href=\"/react/static-type-checking#flow\"></a>Flow </h2>\n<p><a class=\"external-link\" href=\"https://flow.org/\">Flow</a> \u662f\u4e00\u4e2a\u9488\u5bf9 JavaScript \u4ee3\u7801\u7684\u9759\u6001\u7c7b\u578b\u68c0\u6d4b\u5668\u3002Flow \u7531 Facebook \u5f00\u53d1\uff0c\u7ecf\u5e38\u4e0e React \u4e00\u8d77\u4f7f\u7528\u3002Flow \u901a\u8fc7\u7279\u6b8a\u7684\u7c7b\u578b\u8bed\u6cd5\u4e3a\u53d8\u91cf\uff0c\u51fd\u6570\uff0c\u4ee5\u53ca React \u7ec4\u4ef6\u63d0\u4f9b\u6ce8\u89e3\uff0c\u5e2e\u52a9\u4f60\u5c3d\u65e9\u5730\u53d1\u73b0\u9519\u8bef\u3002\u4f60\u53ef\u4ee5\u9605\u8bfb <a class=\"external-link\" href=\"https://flow.org/en/docs/getting-started/\">introduction to Flow</a> \u6765\u4e86\u89e3\u5b83\u7684\u57fa\u7840\u77e5\u8bc6\u3002</p>\n<p>\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u4fbf\u53ef\u5f00\u59cb\u4f7f\u7528 Flow\uff1a</p>\n<ul>\n<li>\u5c06 Flow \u6dfb\u52a0\u5230\u4f60\u7684\u9879\u76ee\u4f9d\u8d56\u4e2d\u3002</li>\n<li>\u786e\u4fdd\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u4e2d\u53bb\u9664\u4e86 Flow \u8bed\u6cd5\u3002</li>\n<li>\u6dfb\u52a0\u7c7b\u578b\u6ce8\u89e3\u5e76\u4e14\u8fd0\u884c Flow \u6765\u68c0\u67e5\u5b83\u4eec\u3002</li>\n</ul>\n<p>\u4e0b\u9762\u6211\u4eec\u4f1a\u8be6\u7ec6\u89e3\u91ca\u8fd9\u4e9b\u6b65\u9aa4\u3002</p>\n<h3 id=\"adding-flow-to-a-project\"><a class=\"anchor\" href=\"/react/static-type-checking#adding-flow-to-a-project\"></a>\u5728\u9879\u76ee\u4e2d\u6dfb\u52a0 Flow </h3>\n<p>\u9996\u5148\uff0c\u5728\u7ec8\u7aef\u4e2d\u8fdb\u5165\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u3002\u7136\u540e\u4f60\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://yarnpkg.com/\">Yarn</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev flow-bin</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/\">npm</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev flow-bin</code></pre></div>\n<p>\u8fd9\u4e2a\u547d\u4ee4\u5c06\u5728\u4f60\u7684\u9879\u76ee\u4e2d\u5b89\u88c5\u6700\u65b0\u7248\u7684 Flow\u3002</p>\n<p>\u63a5\u4e0b\u6765\uff0c\u5c06 <code class=\"language-javascript\">flow</code> \u6dfb\u52a0\u5230\u9879\u76ee <code class=\"language-javascript\">package.json</code> \u7684 <code class=\"language-javascript\">\"scripts\"</code> \u90e8\u5206\uff0c\u4ee5\u4fbf\u80fd\u591f\u4ece\u7ec8\u7aef\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u5b83\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string-property property\">\"flow\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"flow\"</span><span class=\"token punctuation\">,</span></span>    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6700\u540e\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u4e4b\u4e00\uff1a</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://yarnpkg.com/\">Yarn</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> run flow init</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/\">npm</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> run flow init</code></pre></div>\n<p>\u8fd9\u6761\u547d\u4ee4\u5c06\u751f\u6210\u4f60\u9700\u8981\u63d0\u4ea4\u7684 Flow \u914d\u7f6e\u6587\u4ef6\u3002</p>\n<h3 id=\"stripping-flow-syntax-from-the-compiled-code\"><a class=\"anchor\" href=\"/react/static-type-checking#stripping-flow-syntax-from-the-compiled-code\"></a>\u4ece\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u4e2d\u53bb\u9664 Flow \u8bed\u6cd5 </h3>\n<p>Flow \u901a\u8fc7\u8fd9\u79cd\u7c7b\u578b\u6ce8\u91ca\u7684\u7279\u6b8a\u8bed\u6cd5\u6269\u5c55\u4e86 JavaScript \u8bed\u8a00\u3002\u4f46\u662f\uff0c\u6d4f\u89c8\u5668\u4e0d\u80fd\u591f\u89e3\u6790\u8fd9\u79cd\u8bed\u6cd5\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u786e\u4fdd\u5b83\u4e0d\u4f1a\u88ab\u7f16\u8bd1\u5230\u5728\u6d4f\u89c8\u5668\u6267\u884c\u7684 JavaScript bundle \u4e2d\u3002</p>\n<p>\u5177\u4f53\u65b9\u6cd5\u53d6\u51b3\u4e8e\u4f60\u4f7f\u7528\u7684 JavaScript \u7f16\u8bd1\u5de5\u5177\u3002</p>\n<h4 id=\"create-react-app\"><a class=\"anchor\" href=\"/react/static-type-checking#create-react-app\"></a>Create React App </h4>\n<p>\u5982\u679c\u4f60\u7684\u9879\u76ee\u4f7f\u7528\u7684\u662f <a class=\"external-link\" href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a>\uff0c\u90a3\u4e48 Flow \u6ce8\u89e3\u9ed8\u8ba4\u4f1a\u88ab\u53bb\u9664\uff0c\u6240\u4ee5\u5728\u8fd9\u4e00\u6b65\u4f60\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4e8b\u60c5\u3002</p>\n<h4 id=\"babel\"><a class=\"anchor\" href=\"/react/static-type-checking#babel\"></a>Babel </h4>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u4e9b\u8bf4\u660e<em>\u4e0d\u9002\u7528</em>\u4e8e\u4f7f\u7528 Create React App \u7684\u7528\u6237\u3002\u867d\u7136 Create React App \u5e95\u5c42\u4e5f\u4f7f\u7528\u4e86 Babel\uff0c\u4f46\u5b83\u5df2\u7ecf\u914d\u7f6e\u4e86\u53bb\u9664 Flow\u3002\u5982\u679c\u4f60<em>\u6ca1\u6709</em>\u4f7f\u7528 Create React App\uff0c\u8bf7\u6267\u884c\u6b64\u6b65\u9aa4\u3002</p>\n</div>\n<p>\u5982\u679c\u4f60\u7684\u9879\u76ee\u624b\u52a8\u914d\u7f6e\u4e86 Babel\uff0c\u4f60\u9700\u8981\u4e3a Flow \u5b89\u88c5\u4e00\u4e2a\u7279\u6b8a\u7684 preset\u3002</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 Yarn\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev @babel/preset-flow</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 npm\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev @babel/preset-flow</code></pre></div>\n<p>\u63a5\u4e0b\u6765\u5c06 <code class=\"language-javascript\">flow</code> preset \u6dfb\u52a0\u5230\u4f60\u7684 <a class=\"external-link\" href=\"https://babeljs.io/docs/usage/babelrc/\">Babel \u914d\u7f6e</a> \u914d\u7f6e\u4e2d\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u901a\u8fc7 <code class=\"language-javascript\">.babelrc</code> \u6587\u4ef6\u914d\u7f6e Babel\uff0c\u5b83\u53ef\u80fd\u4f1a\u5982\u4e0b\u6240\u793a\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string\">\"@babel/preset-flow\"</span><span class=\"token punctuation\">,</span></span>    <span class=\"token string\">\"react\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u5c06\u8ba9\u4f60\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528 Flow \u8bed\u6cd5\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>Flow \u4e0d\u9700\u8981 react preset\uff0c\u4f46\u4ed6\u4eec\u7ecf\u5e38\u4e00\u8d77\u4f7f\u7528\u3002Flow \u5185\u7f6e\u4e86 JSX \u7684\u8bed\u6cd5\u8bc6\u522b\u3002</p>\n</div>\n<h4 id=\"other-build-setups\"><a class=\"anchor\" href=\"/react/static-type-checking#other-build-setups\"></a>\u5176\u4ed6\u6784\u5efa\u5de5\u5177\u8bbe\u7f6e </h4>\n<p>\u5982\u679c\u6ca1\u6709\u4f7f\u7528 Create React App \u6216 Babel \u6765\u6784\u5efa\u9879\u76ee\uff0c\u53ef\u4ee5\u901a\u8fc7 <a class=\"external-link\" href=\"https://github.com/flowtype/flow-remove-types\">flow-remove-types</a> \u53bb\u9664\u7c7b\u578b\u6ce8\u89e3\u3002</p>\n<h3 id=\"running-flow\"><a class=\"anchor\" href=\"/react/static-type-checking#running-flow\"></a>\u8fd0\u884c Flow </h3>\n<p>\u5982\u679c\u4f60\u6309\u7167\u4e0a\u9762\u7684\u8bf4\u660e\u64cd\u4f5c\uff0c\u4f60\u5e94\u8be5\u80fd\u8fd0\u884c Flow \u4e86\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> flow</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 npm\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> run flow</code></pre></div>\n<p>\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u5982\u4e0b\u6d88\u606f\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">No errors!\n\u2728  Done in 0.17s.</code></pre></div>\n<h3 id=\"adding-flow-type-annotations\"><a class=\"anchor\" href=\"/react/static-type-checking#adding-flow-type-annotations\"></a>\u6dfb\u52a0 Flow \u7c7b\u578b\u6ce8\u91ca </h3>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cFlow \u4ec5\u68c0\u67e5\u5305\u542b\u6b64\u6ce8\u91ca\u7684\u6587\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// @flow</span></code></pre></div>\n<p>\u901a\u5e38\uff0c\u5b83\u4f4d\u4e8e\u6587\u4ef6\u7684\u9876\u90e8\u3002\u8bd5\u7740\u5c06\u5176\u6dfb\u52a0\u5230\u9879\u76ee\u7684\u67d0\u4e9b\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u8fd0\u884c <code class=\"language-javascript\">yarn flow</code> \u6216 <code class=\"language-javascript\">npm run flow</code> \u6765\u67e5\u770b Flow \u662f\u5426\u5df2\u7ecf\u53d1\u73b0\u4e86\u4e00\u4e9b\u95ee\u9898\u3002</p>\n<p>\u8fd8\u53ef\u4ee5\u901a\u8fc7<a class=\"external-link\" href=\"https://flow.org/en/docs/config/options/#toc-all-boolean\">\u8fd9\u4e2a\u9009\u9879</a>\u5f00\u542f<em>\u6240\u6709</em>\u6587\u4ef6\uff08\u5305\u62ec\u6ca1\u6709\u6ce8\u89e3\u7684\u6587\u4ef6\uff09\u7684\u5f3a\u5236\u68c0\u67e5\u3002\u901a\u8fc7 Flow \u6765\u68c0\u67e5\u5168\u90e8\u6587\u4ef6\u5bf9\u4e8e\u73b0\u6709\u7684\u9879\u76ee\u6765\u8bf4\uff0c\u53ef\u80fd\u5bfc\u81f4\u5927\u91cf\u4fee\u6539\uff0c\u4f46\u5bf9\u4e8e\u5e0c\u671b\u5b8c\u5168\u96c6\u6210 Flow \u7684\u65b0\u9879\u76ee\u6765\u8bf4\u5f00\u542f\u8fd9\u4e2a\u9009\u9879\u6bd4\u8f83\u5408\u7406\u3002</p>\n<p>\u73b0\u5728\u4e00\u5207\u5c31\u7eea\uff01\u6211\u4eec\u5efa\u8bae\u4f60\u67e5\u770b\u4ee5\u4e0b\u8d44\u6e90\u6765\u4e86\u89e3\u6709\u5173 Flow \u7684\u66f4\u591a\u4fe1\u606f\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://flow.org/en/docs/types/\">Flow \u6587\u6863\uff1a\u7c7b\u578b\u6ce8\u89e3</a></li>\n<li><a class=\"external-link\" href=\"https://flow.org/en/docs/editors/\">Flow \u6587\u6863\uff1a\u7f16\u8f91\u5668</a></li>\n<li><a class=\"external-link\" href=\"https://flow.org/en/docs/react/\">Flow \u6587\u6863\uff1aReact</a></li>\n<li><a class=\"external-link\" href=\"https://medium.com/flow-type/linting-in-flow-7709d7a7e969\">\u5728 Flow \u4e2d\u8fdb\u884c lint</a></li>\n</ul>\n<h2 id=\"typescript\"><a class=\"anchor\" href=\"/react/static-type-checking#typescript\"></a>TypeScript </h2>\n<p><a class=\"external-link\" href=\"https://www.typescriptlang.org/\">TypeScript</a> \u662f\u4e00\u79cd\u7531\u5fae\u8f6f\u5f00\u53d1\u7684\u7f16\u7a0b\u8bed\u8a00\u3002\u5b83\u662f JavaScript \u7684\u4e00\u4e2a\u7c7b\u578b\u8d85\u96c6\uff0c\u5305\u542b\u72ec\u7acb\u7684\u7f16\u8bd1\u5668\u3002\u4f5c\u4e3a\u4e00\u79cd\u7c7b\u578b\u8bed\u8a00\uff0cTypeScript \u53ef\u4ee5\u5728\u6784\u5efa\u65f6\u53d1\u73b0 bug \u548c\u9519\u8bef\uff0c\u8fd9\u6837\u7a0b\u5e8f\u8fd0\u884c\u65f6\u5c31\u53ef\u4ee5\u907f\u514d\u6b64\u7c7b\u9519\u8bef\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7<a class=\"external-link\" href=\"https://github.com/Microsoft/TypeScript-React-Starter#typescript-react-starter\">\u6b64\u6587\u6863</a> \u4e86\u89e3\u66f4\u591a\u6709\u5173\u5728 React \u4e2d\u4f7f\u7528 TypeScript \u7684\u77e5\u8bc6\u3002</p>\n<p>\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9aa4\uff0c\u4fbf\u53ef\u5f00\u59cb\u4f7f\u7528 TypeScript\uff1a</p>\n<ul>\n<li>\u5c06 TypeScript \u6dfb\u52a0\u5230\u4f60\u7684\u9879\u76ee\u4f9d\u8d56\u4e2d</li>\n<li>\u914d\u7f6e TypeScript \u7f16\u8bd1\u9009\u9879</li>\n<li>\u4f7f\u7528\u6b63\u786e\u7684\u6587\u4ef6\u6269\u5c55\u540d</li>\n<li>\u4e3a\u4f60\u4f7f\u7528\u7684\u5e93\u6dfb\u52a0\u5b9a\u4e49</li>\n</ul>\n<p>\u4e0b\u9762\u8ba9\u6211\u4eec\u8be6\u7ec6\u5730\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e9b\u6b65\u9aa4\uff1a</p>\n<h3 id=\"using-typescript-with-create-react-app\"><a class=\"anchor\" href=\"/react/static-type-checking#using-typescript-with-create-react-app\"></a>\u5728 Create React App \u4e2d\u4f7f\u7528 TypeScript </h3>\n<p>Create React App \u5185\u7f6e\u4e86\u5bf9 TypeScript \u7684\u652f\u6301\u3002</p>\n<p>\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u4f7f\u7528 TypeScript \u7684<strong>\u65b0\u9879\u76ee</strong>\uff0c\u5728\u7ec8\u7aef\u8fd0\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\">npx create-react-app my-app --template typescript</code></pre></div>\n<p>\u5982\u9700\u5c06 TypeScript \u6dfb\u52a0\u5230<strong>\u73b0\u6709\u7684 Create React App \u9879\u76ee</strong>\u4e2d\uff0c<a class=\"external-link\" href=\"https://facebook.github.io/create-react-app/docs/adding-typescript\">\u8bf7\u53c2\u8003\u6b64\u6587\u6863</a>.</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Create React App\uff0c\u53ef\u4ee5\u8df3\u8fc7\u672c\u8282\u7684\u5176\u4f59\u90e8\u5206\u3002\u5176\u4f59\u90e8\u5206\u8bb2\u8ff0\u4e86\u4e0d\u4f7f\u7528 Create React App \u811a\u624b\u67b6\uff0c\u624b\u52a8\u914d\u7f6e\u9879\u76ee\u7684\u7528\u6237\u3002</p>\n</div>\n<h3 id=\"adding-typescript-to-a-project\"><a class=\"anchor\" href=\"/react/static-type-checking#adding-typescript-to-a-project\"></a>\u6dfb\u52a0 TypeScript \u5230\u73b0\u6709\u9879\u76ee\u4e2d </h3>\n<p>\u8fd9\u4e00\u5207\u90fd\u59cb\u4e8e\u5728\u7ec8\u7aef\u4e2d\u6267\u884c\u7684\u4e00\u4e2a\u547d\u4ee4\u3002</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://yarnpkg.com/\">Yarn</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev typescript</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/\">npm</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev typescript</code></pre></div>\n<p>\u606d\u559c\uff01\u4f60\u5df2\u5c06\u6700\u65b0\u7248\u672c\u7684 TypeScript \u5b89\u88c5\u5230\u9879\u76ee\u4e2d\u3002\u5b89\u88c5 TypeScript \u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">tsc</code> \u547d\u4ee4\u3002\u5728\u914d\u7f6e\u7f16\u8bd1\u5668\u4e4b\u524d\uff0c\u8ba9\u6211\u4eec\u5c06 <code class=\"language-javascript\">tsc</code> \u6dfb\u52a0\u5230 <code class=\"language-javascript\">package.json</code> \u4e2d\u7684 \u201cscripts\u201d \u90e8\u5206\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc\"</span><span class=\"token punctuation\">,</span></span>    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"configuring-the-typescript-compiler\"><a class=\"anchor\" href=\"/react/static-type-checking#configuring-the-typescript-compiler\"></a>\u914d\u7f6e TypeScript \u7f16\u8bd1\u5668</h3>\n<p>\u6ca1\u6709\u914d\u7f6e\u9879\uff0c\u7f16\u8bd1\u5668\u63d0\u4f9b\u4e0d\u4e86\u4efb\u4f55\u5e2e\u52a9\u3002\u5728 TypeScript \u91cc\uff0c\u8fd9\u4e9b\u914d\u7f6e\u9879\u90fd\u5728\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">tsconfig.json</code> \u7684\u7279\u6b8a\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002\u53ef\u4ee5\u901a\u8fc7\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\u8be5\u6587\u4ef6\uff1a</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://yarnpkg.com/\">Yarn</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> run tsc --init</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/\">npm</a>\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\">npx tsc --init</code></pre></div>\n<p><code class=\"language-javascript\">tsconfig.json</code> \u6587\u4ef6\u4e2d\uff0c\u6709\u8bb8\u591a\u914d\u7f6e\u9879\u7528\u4e8e\u914d\u7f6e\u7f16\u8bd1\u5668\u3002\u67e5\u770b\u6240\u6709\u914d\u7f6e\u9879\u7684\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c<a class=\"external-link\" href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\">\u8bf7\u53c2\u8003\u6b64\u6587\u6863</a>\u3002</p>\n<p>\u6211\u4eec\u6765\u770b\u4e00\u4e0b <code class=\"language-javascript\">rootDir</code> \u548c <code class=\"language-javascript\">outDir</code> \u8fd9\u4e24\u4e2a\u914d\u7f6e\u9879\u3002\u7f16\u8bd1\u5668\u5c06\u4ece\u9879\u76ee\u4e2d\u627e\u5230 TypeScript \u6587\u4ef6\u5e76\u7f16\u8bd1\u6210\u76f8\u5bf9\u5e94 JavaScript \u6587\u4ef6\u3002\u4f46\u6211\u4eec\u4e0d\u60f3\u6df7\u6dc6\u6e90\u6587\u4ef6\u548c\u7f16\u8bd1\u540e\u7684\u8f93\u51fa\u6587\u4ef6\u3002</p>\n<p>\u4e3a\u4e86\u89e3\u51b3\u8be5\u95ee\u9898\uff0c\u6211\u4eec\u5c06\u6267\u884c\u4ee5\u4e0b\u4e24\u4e2a\u6b65\u9aa4\uff1a</p>\n<ul>\n<li>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u91cd\u65b0\u6574\u7406\u4e0b\u9879\u76ee\u76ee\u5f55\uff0c\u628a\u6240\u6709\u7684\u6e90\u4ee3\u7801\u653e\u5165 <code class=\"language-javascript\">src</code> \u76ee\u5f55\u4e2d\u3002</li>\n</ul>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 src\n\u2502   \u2514\u2500\u2500 index.ts\n\u2514\u2500\u2500 tsconfig.json</code></pre></div>\n<ul>\n<li>\u5176\u6b21\uff0c\u6211\u4eec\u5c06\u901a\u8fc7\u914d\u7f6e\u9879\u544a\u8bc9\u7f16\u8bd1\u5668\u6e90\u7801\u548c\u8f93\u51fa\u7684\u4f4d\u7f6e\u3002</li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// tsconfig.json</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token string-property property\">\"rootDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"src\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token string-property property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"build\"</span></span>    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5f88\u597d\uff01\u73b0\u5728\uff0c\u5f53\u6211\u4eec\u8fd0\u884c\u6784\u5efa\u811a\u672c\u65f6\uff0c\u7f16\u8bd1\u5668\u4f1a\u5c06\u751f\u6210\u7684 javascript \u8f93\u51fa\u5230 <code class=\"language-javascript\">build</code> \u6587\u4ef6\u5939\u3002 <a class=\"external-link\" href=\"https://github.com/Microsoft/TypeScript-React-Starter/blob/master/tsconfig.json\">TypeScript React Starter</a> \u63d0\u4f9b\u4e86\u4e00\u5957\u9ed8\u8ba4\u7684 <code class=\"language-javascript\">tsconfig.json</code> \u5e2e\u52a9\u4f60\u5feb\u901f\u4e0a\u624b\u3002</p>\n<p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f60\u4e0d\u5e0c\u671b\u5c06\u7f16\u8bd1\u540e\u751f\u6210\u7684 JavaScript \u6587\u4ef6\u4fdd\u7559\u5728\u7248\u672c\u63a7\u5236\u5185\u3002\u56e0\u6b64\uff0c\u5e94\u8be5\u628a\u6784\u5efa\u6587\u4ef6\u5939\u6dfb\u52a0\u5230 <code class=\"language-javascript\">.gitignore</code> \u4e2d\u3002</p>\n<h3 id=\"file-extensions\"><a class=\"anchor\" href=\"/react/static-type-checking#file-extensions\"></a>\u6587\u4ef6\u6269\u5c55\u540d </h3>\n<p>\u5728 React \u4e2d\uff0c\u4f60\u7684\u7ec4\u4ef6\u6587\u4ef6\u5927\u591a\u6570\u4f7f\u7528 <code class=\"language-javascript\">.js</code> \u4f5c\u4e3a\u6269\u5c55\u540d\u3002\u5728 TypeScript \u4e2d\uff0c\u63d0\u4f9b\u4e24\u79cd\u6587\u4ef6\u6269\u5c55\u540d\uff1a</p>\n<p><code class=\"language-javascript\">.ts</code> \u662f\u9ed8\u8ba4\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u800c <code class=\"language-javascript\">.tsx</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u5305\u542b <code class=\"language-javascript\">JSX</code> \u4ee3\u7801\u7684\u7279\u6b8a\u6269\u5c55\u540d\u3002</p>\n<h3 id=\"running-typescript\"><a class=\"anchor\" href=\"/react/static-type-checking#running-typescript\"></a>\u8fd0\u884c TypeScript </h3>\n<p>\u5982\u679c\u4f60\u6309\u7167\u4e0a\u9762\u7684\u8bf4\u660e\u64cd\u4f5c\uff0c\u73b0\u5728\u5e94\u8be5\u80fd\u8fd0\u884c TypeScript \u4e86\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">yarn</span> build</code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 npm\uff0c\u6267\u884c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> run build</code></pre></div>\n<p>\u5982\u679c\u4f60\u6ca1\u6709\u770b\u5230\u8f93\u51fa\u4fe1\u606f\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u7f16\u8bd1\u6210\u529f\u4e86\u3002</p>\n<h3 id=\"type-definitions\"><a class=\"anchor\" href=\"/react/static-type-checking#type-definitions\"></a>\u7c7b\u578b\u5b9a\u4e49 </h3>\n<p>\u4e3a\u4e86\u80fd\u591f\u663e\u793a\u6765\u81ea\u5176\u4ed6\u5305\u7684\u9519\u8bef\u548c\u63d0\u793a\uff0c\u7f16\u8bd1\u5668\u4f9d\u8d56\u4e8e\u58f0\u660e\u6587\u4ef6\u3002\u58f0\u660e\u6587\u4ef6\u63d0\u4f9b\u6709\u5173\u5e93\u7684\u6240\u6709\u7c7b\u578b\u4fe1\u606f\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u7684\u9879\u76ee\u5c31\u53ef\u4ee5\u7528\u4e0a\u50cf npm \u8fd9\u6837\u7684\u5e73\u53f0\u63d0\u4f9b\u7684\u4e09\u65b9 JavaScript \u5e93\u3002</p>\n<p>\u83b7\u53d6\u4e00\u4e2a\u5e93\u7684\u58f0\u660e\u6587\u4ef6\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p>\n<p><strong>Bundled</strong> - \u8be5\u5e93\u5305\u542b\u4e86\u81ea\u5df1\u7684\u58f0\u660e\u6587\u4ef6\u3002\u8fd9\u6837\u5f88\u597d\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u9700\u8981\u5b89\u88c5\u8fd9\u4e2a\u5e93\uff0c\u5c31\u53ef\u4ee5\u7acb\u5373\u4f7f\u7528\u5b83\u4e86\u3002\u8981\u77e5\u9053\u4e00\u4e2a\u5e93\u662f\u5426\u5305\u542b\u7c7b\u578b\uff0c\u770b\u5e93\u4e2d\u662f\u5426\u6709 <code class=\"language-javascript\">index.d.ts</code> \u6587\u4ef6\u3002\u6709\u4e9b\u5e93\u4f1a\u5728 <code class=\"language-javascript\">package.json</code> \u6587\u4ef6\u7684 <code class=\"language-javascript\">typings</code> \u6216 <code class=\"language-javascript\">types</code> \u5c5e\u6027\u4e2d\u6307\u5b9a\u7c7b\u578b\u6587\u4ef6\u3002</p>\n<p><strong><a class=\"external-link\" href=\"https://github.com/DefinitelyTyped/DefinitelyTyped\">DefinitelyTyped</a></strong> - DefinitelyTyped \u662f\u4e00\u4e2a\u5e9e\u5927\u7684\u58f0\u660e\u4ed3\u5e93\uff0c\u4e3a\u6ca1\u6709\u58f0\u660e\u6587\u4ef6\u7684 JavaScript \u5e93\u63d0\u4f9b\u7c7b\u578b\u5b9a\u4e49\u3002\u8fd9\u4e9b\u7c7b\u578b\u5b9a\u4e49\u901a\u8fc7\u4f17\u5305\u7684\u65b9\u5f0f\u5b8c\u6210\uff0c\u5e76\u7531\u5fae\u8f6f\u548c\u5f00\u6e90\u8d21\u732e\u8005\u4e00\u8d77\u7ba1\u7406\u3002\u4f8b\u5982\uff0cReact \u5e93\u5e76\u6ca1\u6709\u81ea\u5df1\u7684\u58f0\u660e\u6587\u4ef6\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u4ece DefinitelyTyped \u83b7\u53d6\u5b83\u7684\u58f0\u660e\u6587\u4ef6\u3002\u53ea\u8981\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token comment\"># yarn</span>\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev @types/react\n\n<span class=\"token comment\"># npm</span>\n<span class=\"token function\">npm</span> i --save-dev @types/react</code></pre></div>\n<p><strong>\u5c40\u90e8\u58f0\u660e</strong>\n\u6709\u65f6\uff0c\u4f60\u8981\u4f7f\u7528\u7684\u5305\u91cc\u6ca1\u6709\u58f0\u660e\u6587\u4ef6\uff0c\u5728 DefinitelyTyped \u4e0a\u4e5f\u6ca1\u6709\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u672c\u5730\u7684\u5b9a\u4e49\u6587\u4ef6\u3002\u56e0\u6b64\uff0c\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a <code class=\"language-javascript\">declarations.d.ts</code> \u6587\u4ef6\u3002\u4e00\u4e2a\u7b80\u5355\u7684\u58f0\u660e\u53ef\u80fd\u662f\u8fd9\u6837\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-typescript\"><code class=\"language-javascript\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'querystring'</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>val<span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>val<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> object\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u73b0\u5728\u5df2\u505a\u597d\u7f16\u7801\u51c6\u5907\u4e86\uff01\u6211\u4eec\u5efa\u8bae\u4f60\u67e5\u770b\u4ee5\u4e0b\u8d44\u6e90\u6765\u4e86\u89e3\u6709\u5173 TypeScript \u7684\u66f4\u591a\u77e5\u8bc6\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://www.typescriptlang.org/docs/handbook/2/everyday-types.html\">TypeScript \u6587\u6863\uff1a\u5e38\u7528\u7c7b\u578b</a></li>\n<li><a class=\"external-link\" href=\"https://www.typescriptlang.org/docs/handbook/migrating-from-javascript.html\">TypeScript \u6587\u6863\uff1aJavaScript \u8fc1\u79fb</a></li>\n<li><a class=\"external-link\" href=\"https://www.typescriptlang.org/docs/handbook/react-&amp;-webpack.html\">TypeScript \u6587\u6863\uff1aReact \u4e0e Webpack</a></li>\n</ul>\n<h2 id=\"rescript\"><a class=\"anchor\" href=\"/react/static-type-checking#rescript\"></a>ReScript </h2>\n<p><a class=\"external-link\" href=\"https://rescript-lang.org/\">ReScript</a> \u662f\u4e00\u95e8\u7c7b\u578b\u8bed\u8a00\uff0c\u53ef\u7f16\u8bd1\u4e3a JavaScript\u3002\u5b83\u7684\u90e8\u5206\u6838\u5fc3\u529f\u80fd\u662f\u4e3a\u4e86\u4fdd\u8bc1 100% \u7684\u7c7b\u578b\u8986\u76d6\uff0c\u5b8c\u7f8e\u652f\u6301 JSX \u548c<a class=\"external-link\" href=\"https://rescript-lang.org/docs/react/latest/introduction\">\u72ec\u6709\u7684 React \u7ed1\u5b9a</a>\uff0c\u4ee5\u5141\u8bb8\u5f00\u53d1\u8005\u65e0\u7f1d\u96c6\u6210\u5230\u73b0\u6709\u7684 JS/TS \u7684 React \u4ee3\u7801\u5e93\u4e2d\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://rescript-lang.org/docs/manual/latest/installation#integrate-into-an-existing-js-project\">\u6b64\u5904</a>\u3002\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u5c06 ReScript \u96c6\u6210\u5230\u73b0\u6709\u7684 JS / React \u4ee3\u7801\u5e93\u7684\u4fe1\u606f\u3002</p>\n<h2 id=\"kotlin\"><a class=\"anchor\" href=\"/react/static-type-checking#kotlin\"></a>Kotlin </h2>\n<p><a class=\"external-link\" href=\"https://kotlinlang.org/\">Kotlin</a> \u662f\u7531 JetBrains \u5f00\u53d1\u7684\u4e00\u95e8\u9759\u6001\u7c7b\u578b\u8bed\u8a00\u3002\u5176\u76ee\u6807\u5e73\u53f0\u5305\u62ec JVM\u3001Android\u3001LLVM \u548c <a class=\"external-link\" href=\"https://kotlinlang.org/docs/reference/js-overview.html\">JavaScript</a>\u3002</p>\n<p>JetBrains \u4e13\u95e8\u4e3a React \u793e\u533a\u5f00\u53d1\u548c\u7ef4\u62a4\u4e86\u51e0\u4e2a\u5de5\u5177\uff1a<a class=\"external-link\" href=\"https://github.com/JetBrains/kotlin-wrappers\">React bindings</a> \u4ee5\u53ca <a class=\"external-link\" href=\"https://github.com/JetBrains/create-react-kotlin-app\">Create React Kotlin App</a>\u3002\u540e\u8005\u53ef\u4ee5\u901a\u8fc7 Kotlin \u5feb\u901f\u7f16\u5199 React \u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u6784\u5efa\u914d\u7f6e\u3002</p>\n<h2 id=\"other-languages\"><a class=\"anchor\" href=\"/react/static-type-checking#other-languages\"></a>\u5176\u4ed6\u8bed\u8a00 </h2>\n<p>\u6ce8\u610f\uff0c\u8fd8\u6709\u5176\u4ed6\u9759\u6001\u7c7b\u578b\u8bed\u8a00\u53ef\u4ee5\u7f16\u8bd1\u6210 JavaScript\uff0c\u4e5f\u4e0e React \u517c\u5bb9\u3002\u4f8b\u5982\uff0c\u548c <a class=\"external-link\" href=\"https://elmish.github.io/react\">elmish-react</a> \u4e00\u8d77\u4f7f\u7528\u7684 <a class=\"external-link\" href=\"https://fable.io\">F#/Fable</a>\u3002\u67e5\u770b\u4ed6\u4eec\u5404\u81ea\u7684\u7f51\u7ad9\u4ee5\u83b7\u53d6\u66f4\u591a\u4fe1\u606f\uff0c\u5e76\u6b22\u8fce\u6dfb\u52a0\u66f4\u591a\u548c\u4e0e React \u7ed3\u5408\u7684\u9759\u6001\u7c7b\u578b\u8bed\u8a00\u5230\u8fd9\u4e2a\u9875\u9762\uff01</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/static-type-checking.md\">Edit this page</a></p></div></article>", "path": "/react/static-type-checking", "nav": ["/react/render-props", "/react/strict-mode"]}, {"key": "\u4e25\u683c\u6a21\u5f0f", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><code class=\"language-javascript\">StrictMode</code> \u662f\u4e00\u4e2a\u7528\u6765\u7a81\u51fa\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6f5c\u5728\u95ee\u9898\u7684\u5de5\u5177\u3002\u4e0e <code class=\"language-javascript\">Fragment</code> \u4e00\u6837\uff0c<code class=\"language-javascript\">StrictMode</code> \u4e0d\u4f1a\u6e32\u67d3\u4efb\u4f55\u53ef\u89c1\u7684 UI\u3002\u5b83\u4e3a\u5176\u540e\u4ee3\u5143\u7d20\u89e6\u53d1\u989d\u5916\u7684\u68c0\u67e5\u548c\u8b66\u544a\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4e25\u683c\u6a21\u5f0f\u68c0\u67e5\u4ec5\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fd0\u884c\uff1b<em>\u5b83\u4eec\u4e0d\u4f1a\u5f71\u54cd\u751f\u4ea7\u6784\u5efa</em>\u3002</p>\n</div>\n<p>\u4f60\u53ef\u4ee5\u4e3a\u5e94\u7528\u7a0b\u5e8f\u7684\u4efb\u4f55\u90e8\u5206\u542f\u7528\u4e25\u683c\u6a21\u5f0f\u3002\u4f8b\u5982\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ExampleApplication</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentOne</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentTwo</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Footer</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u5728\u4e0a\u8ff0\u7684\u793a\u4f8b\u4e2d\uff0c<em>\u4e0d</em>\u4f1a\u5bf9 <code class=\"language-javascript\">Header</code> \u548c <code class=\"language-javascript\">Footer</code> \u7ec4\u4ef6\u8fd0\u884c\u4e25\u683c\u6a21\u5f0f\u68c0\u67e5\u3002\u4f46\u662f\uff0c<code class=\"language-javascript\">ComponentOne</code> \u548c <code class=\"language-javascript\">ComponentTwo</code> \u4ee5\u53ca\u5b83\u4eec\u7684\u6240\u6709\u540e\u4ee3\u5143\u7d20\u90fd\u5c06\u8fdb\u884c\u68c0\u67e5\u3002</p>\n<p><code class=\"language-javascript\">StrictMode</code> \u76ee\u524d\u6709\u52a9\u4e8e\uff1a</p>\n<ul>\n<li><a href=\"/react/strict-mode#identifying-unsafe-lifecycles\">\u8bc6\u522b\u4e0d\u5b89\u5168\u7684\u751f\u547d\u5468\u671f</a></li>\n<li><a href=\"/react/strict-mode#warning-about-legacy-string-ref-api-usage\">\u5173\u4e8e\u4f7f\u7528\u8fc7\u65f6\u5b57\u7b26\u4e32 ref API \u7684\u8b66\u544a</a></li>\n<li><a href=\"/react/strict-mode#warning-about-deprecated-finddomnode-usage\">\u5173\u4e8e\u4f7f\u7528\u5e9f\u5f03\u7684 findDOMNode \u65b9\u6cd5\u7684\u8b66\u544a</a></li>\n<li><a href=\"/react/strict-mode#detecting-unexpected-side-effects\">\u68c0\u6d4b\u610f\u5916\u7684\u526f\u4f5c\u7528</a></li>\n<li><a href=\"/react/strict-mode#detecting-legacy-context-api\">\u68c0\u6d4b\u8fc7\u65f6\u7684 context API</a></li>\n<li><a href=\"/react/strict-mode#ensuring-reusable-state\">\u786e\u4fdd\u53ef\u590d\u7528\u7684\u72b6\u6001</a></li>\n</ul>\n<p>\u672a\u6765\u7684 React \u7248\u672c\u5c06\u6dfb\u52a0\u66f4\u591a\u989d\u5916\u529f\u80fd\u3002</p>\n<h3 id=\"identifying-unsafe-lifecycles\"><a class=\"anchor\" href=\"/react/strict-mode#identifying-unsafe-lifecycles\"></a>\u8bc6\u522b\u4e0d\u5b89\u5168\u7684\u751f\u547d\u5468\u671f </h3>\n<p>\u6b63\u5982<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/03/27/update-on-async-rendering.html\">\u8fd9\u7bc7\u535a\u6587</a>\u6240\u8ff0\uff0c\u67d0\u4e9b\u8fc7\u65f6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5728\u5f02\u6b65 React \u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u662f\u4e0d\u5b89\u5168\u7684\u3002\u4f46\u662f\uff0c\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4e86\u7b2c\u4e09\u65b9\u5e93\uff0c\u5f88\u96be\u786e\u4fdd\u5b83\u4eec\u4e0d\u4f7f\u7528\u8fd9\u4e9b\u751f\u547d\u5468\u671f\u65b9\u6cd5\u3002\u5e78\u8fd0\u7684\u662f\uff0c\u4e25\u683c\u6a21\u5f0f\u53ef\u4ee5\u5e2e\u52a9\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff01</p>\n<p>\u5f53\u542f\u7528\u4e25\u683c\u6a21\u5f0f\u65f6\uff0cReact \u4f1a\u5217\u51fa\u4f7f\u7528\u4e86\u4e0d\u5b89\u5168\u751f\u547d\u5468\u671f\u65b9\u6cd5\u7684\u6240\u6709 class \u7ec4\u4ef6\uff0c\u5e76\u6253\u5370\u4e00\u6761\u5305\u542b\u8fd9\u4e9b\u7ec4\u4ef6\u4fe1\u606f\u7684\u8b66\u544a\u6d88\u606f\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p>\n<p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/e4fdbff774b356881123e69ad88eda88/1628f/strict-mode-unsafe-lifecycles-warning.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/e4fdbff774b356881123e69ad88eda88/1e088/strict-mode-unsafe-lifecycles-warning.png\">Image link</a>\n</span>\n</span>\n</a>\n</p>\n<p><em>\u6b64\u65f6</em>\u89e3\u51b3\u9879\u76ee\u4e2d\u4e25\u683c\u6a21\u5f0f\u6240\u8bc6\u522b\u51fa\u6765\u7684\u95ee\u9898\uff0c\u4f1a\u4f7f\u5f97\u5728\u672a\u6765\u7684 React \u7248\u672c\u4e2d\u4f7f\u7528 concurrent \u6e32\u67d3\u53d8\u5f97\u66f4\u5bb9\u6613\u3002</p>\n<h3 id=\"warning-about-legacy-string-ref-api-usage\"><a class=\"anchor\" href=\"/react/strict-mode#warning-about-legacy-string-ref-api-usage\"></a>\u5173\u4e8e\u4f7f\u7528\u8fc7\u65f6\u5b57\u7b26\u4e32 ref API \u7684\u8b66\u544a </h3>\n<p>\u4ee5\u524d\uff0cReact \u63d0\u4f9b\u4e86\u4e24\u79cd\u65b9\u6cd5\u7ba1\u7406 refs \u7684\u65b9\u5f0f\uff1a\u5df2\u8fc7\u65f6\u7684\u5b57\u7b26\u4e32 ref API \u7684\u5f62\u5f0f\u53ca\u56de\u8c03\u51fd\u6570 API \u7684\u5f62\u5f0f\u3002\u5c3d\u7ba1\u5b57\u7b26\u4e32 ref API \u5728\u4e24\u8005\u4e2d\u4f7f\u7528\u66f4\u65b9\u4fbf\uff0c\u4f46\u662f\u5b83\u6709<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/1373\">\u4e00\u4e9b\u7f3a\u70b9</a>\uff0c\u56e0\u6b64\u5b98\u65b9\u63a8\u8350\u91c7\u7528<a href=\"/react/refs-and-the-dom#legacy-api-string-refs\">\u56de\u8c03\u7684\u65b9\u5f0f</a>\u3002</p>\n<p>React 16.3 \u65b0\u589e\u4e86\u7b2c\u4e09\u79cd\u9009\u62e9\uff0c\u5b83\u63d0\u4f9b\u4e86\u4f7f\u7528\u5b57\u7b26\u4e32 ref \u7684\u4fbf\u5229\u6027\uff0c\u5e76\u4e14\u4e0d\u5b58\u5728\u4efb\u4f55\u7f3a\u70b9\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u7531\u4e8e\u5bf9\u8c61 ref \u4e3b\u8981\u662f\u4e3a\u4e86\u66ff\u6362\u5b57\u7b26\u4e32 ref \u800c\u6dfb\u52a0\u7684\uff0c\u56e0\u6b64\u4e25\u683c\u6a21\u5f0f\u73b0\u5728\u4f1a\u8b66\u544a\u4f7f\u7528\u5b57\u7b26\u4e32 ref\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u9664\u4e86\u65b0\u589e\u52a0\u7684 <code class=\"language-javascript\">createRef</code> API\uff0c\u56de\u8c03 ref \u4f9d\u65e7\u9002\u7528\u3002</p>\n<p>\u4f60\u65e0\u9700\u66ff\u6362\u7ec4\u4ef6\u4e2d\u7684\u56de\u8c03 ref\u3002\u5b83\u4eec\u66f4\u7075\u6d3b\uff0c\u56e0\u6b64\u4ecd\u5c06\u4f5c\u4e3a\u9ad8\u7ea7\u529f\u80fd\u4fdd\u7559\u3002</p>\n</div>\n<p><a href=\"/react/refs-and-the-dom\">\u5728\u6b64\u5904\u4e86\u89e3\u6709\u5173 <code class=\"language-javascript\">createRef</code> API \u7684\u66f4\u591a\u4fe1\u606f</a></p>\n<h3 id=\"warning-about-deprecated-finddomnode-usage\"><a class=\"anchor\" href=\"/react/strict-mode#warning-about-deprecated-finddomnode-usage\"></a>\u5173\u4e8e\u4f7f\u7528\u5e9f\u5f03\u7684 findDOMNode \u65b9\u6cd5\u7684\u8b66\u544a </h3>\n<p>React \u652f\u6301\u7528 <code class=\"language-javascript\">findDOMNode</code> \u6765\u5728\u7ed9\u5b9a class \u5b9e\u4f8b\u7684\u60c5\u51b5\u4e0b\u5728\u6811\u4e2d\u641c\u7d22 DOM \u8282\u70b9\u3002\u901a\u5e38\u4f60\u4e0d\u9700\u8981\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u4f60\u53ef\u4ee5<a href=\"/react/refs-and-the-dom#creating-refs\">\u5c06 ref \u76f4\u63a5\u7ed1\u5b9a\u5230 DOM \u8282\u70b9</a>\u3002</p>\n<p><code class=\"language-javascript\">findDOMNode</code> \u4e5f\u53ef\u7528\u4e8e class \u7ec4\u4ef6\uff0c\u4f46\u5b83\u8fdd\u53cd\u4e86\u62bd\u8c61\u539f\u5219\uff0c\u5b83\u4f7f\u5f97\u7236\u7ec4\u4ef6\u9700\u8981\u5355\u72ec\u6e32\u67d3\u5b50\u7ec4\u4ef6\u3002\u5b83\u4f1a\u4ea7\u751f\u91cd\u6784\u5371\u9669\uff0c\u4f60\u4e0d\u80fd\u66f4\u6539\u7ec4\u4ef6\u7684\u5b9e\u73b0\u7ec6\u8282\uff0c\u56e0\u4e3a\u7236\u7ec4\u4ef6\u53ef\u80fd\u6b63\u5728\u8bbf\u95ee\u5b83\u7684 DOM \u8282\u70b9\u3002<code class=\"language-javascript\">findDOMNode</code> \u53ea\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5b50\u8282\u70b9\uff0c\u4f46\u662f\u4f7f\u7528 Fragments\uff0c\u7ec4\u4ef6\u53ef\u4ee5\u6e32\u67d3\u591a\u4e2a DOM \u8282\u70b9\u3002<code class=\"language-javascript\">findDOMNode</code> \u662f\u4e00\u4e2a\u53ea\u8bfb\u4e00\u6b21\u7684 API\u3002\u8c03\u7528\u8be5\u65b9\u6cd5\u53ea\u4f1a\u8fd4\u56de\u7b2c\u4e00\u6b21\u67e5\u8be2\u7684\u7ed3\u679c\u3002\u5982\u679c\u5b50\u7ec4\u4ef6\u6e32\u67d3\u4e86\u4e0d\u540c\u7684\u8282\u70b9\uff0c\u5219\u65e0\u6cd5\u8ddf\u8e2a\u6b64\u66f4\u6539\u3002\u56e0\u6b64\uff0c<code class=\"language-javascript\">findDOMNode</code> \u4ec5\u5728\u7ec4\u4ef6\u8fd4\u56de\u5355\u4e2a\u4e14\u4e0d\u53ef\u53d8\u7684 DOM \u8282\u70b9\u65f6\u624d\u6709\u6548\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06 ref \u4f20\u9012\u7ed9\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5e76\u4f7f\u7528 <a href=\"/react/forwarding-refs#forwarding-refs-to-dom-components\">ref \u8f6c\u53d1</a>\u6765\u5c06\u5176\u4f20\u9012\u7ed9 DOM \u8282\u70b9\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u5728\u7ec4\u4ef6\u4e2d\u521b\u5efa\u4e00\u4e2a DOM \u8282\u70b9\u7684 wrapper\uff0c\u5e76\u5c06 ref \u76f4\u63a5\u7ed1\u5b9a\u5230\u5b83\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wrapper <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>wrapper<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 CSS \u4e2d\uff0c\u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u8282\u70b9\u6210\u4e3a\u5e03\u5c40\u7684\u4e00\u90e8\u5206\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/display#display_contents\"><code class=\"language-javascript\">display: contents</code></a> \u5c5e\u6027\u3002</p>\n</div>\n<h3 id=\"detecting-unexpected-side-effects\"><a class=\"anchor\" href=\"/react/strict-mode#detecting-unexpected-side-effects\"></a>\u68c0\u6d4b\u610f\u5916\u7684\u526f\u4f5c\u7528 </h3>\n<p>\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0cReact \u5206\u4e24\u4e2a\u9636\u6bb5\u5de5\u4f5c\uff1a</p>\n<ul>\n<li><strong>\u6e32\u67d3</strong> \u9636\u6bb5\u4f1a\u786e\u5b9a\u9700\u8981\u8fdb\u884c\u54ea\u4e9b\u66f4\u6539\uff0c\u6bd4\u5982 DOM\u3002\u5728\u6b64\u9636\u6bb5\uff0cReact \u8c03\u7528 <code class=\"language-javascript\">render</code>\uff0c\u7136\u540e\u5c06\u7ed3\u679c\u4e0e\u4e0a\u6b21\u6e32\u67d3\u7684\u7ed3\u679c\u8fdb\u884c\u6bd4\u8f83\u3002</li>\n<li><strong>\u63d0\u4ea4</strong> \u9636\u6bb5\u53d1\u751f\u5728\u5f53 React \u5e94\u7528\u53d8\u5316\u65f6\u3002\uff08\u5bf9\u4e8e React DOM \u6765\u8bf4\uff0c\u4f1a\u53d1\u751f\u5728 React \u63d2\u5165\uff0c\u66f4\u65b0\u53ca\u5220\u9664 DOM \u8282\u70b9\u7684\u65f6\u5019\u3002\uff09\u5728\u6b64\u9636\u6bb5\uff0cReact \u8fd8\u4f1a\u8c03\u7528 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentDidUpdate</code> \u4e4b\u7c7b\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u3002</li>\n</ul>\n<p>\u63d0\u4ea4\u9636\u6bb5\u901a\u5e38\u4f1a\u5f88\u5feb\uff0c\u4f46\u6e32\u67d3\u8fc7\u7a0b\u53ef\u80fd\u5f88\u6162\u3002\u56e0\u6b64\uff0c\u5373\u5c06\u63a8\u51fa\u7684 concurrent \u6a21\u5f0f (\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u672a\u542f\u7528) \u5c06\u6e32\u67d3\u5de5\u4f5c\u5206\u89e3\u4e3a\u591a\u4e2a\u90e8\u5206\uff0c\u5bf9\u4efb\u52a1\u8fdb\u884c\u6682\u505c\u548c\u6062\u590d\u64cd\u4f5c\u4ee5\u907f\u514d\u963b\u585e\u6d4f\u89c8\u5668\u3002\u8fd9\u610f\u5473\u7740 React \u53ef\u4ee5\u5728\u63d0\u4ea4\u4e4b\u524d\u591a\u6b21\u8c03\u7528\u6e32\u67d3\u9636\u6bb5\u751f\u547d\u5468\u671f\u7684\u65b9\u6cd5\uff0c\u6216\u8005\u5728\u4e0d\u63d0\u4ea4\u7684\u60c5\u51b5\u4e0b\u8c03\u7528\u5b83\u4eec\uff08\u7531\u4e8e\u51fa\u73b0\u9519\u8bef\u6216\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u4f7f\u5176\u4e2d\u65ad\uff09\u3002</p>\n<p>\u6e32\u67d3\u9636\u6bb5\u7684\u751f\u547d\u5468\u671f\u5305\u62ec\u4ee5\u4e0b class \u7ec4\u4ef6\u65b9\u6cd5\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">constructor</code></li>\n<li><code class=\"language-javascript\">componentWillMount</code> (or <code class=\"language-javascript\">UNSAFE_componentWillMount</code>)</li>\n<li><code class=\"language-javascript\">componentWillReceiveProps</code> (or <code class=\"language-javascript\">UNSAFE_componentWillReceiveProps</code>)</li>\n<li><code class=\"language-javascript\">componentWillUpdate</code> (or <code class=\"language-javascript\">UNSAFE_componentWillUpdate</code>)</li>\n<li><code class=\"language-javascript\">getDerivedStateFromProps</code></li>\n<li><code class=\"language-javascript\">shouldComponentUpdate</code></li>\n<li><code class=\"language-javascript\">render</code></li>\n<li><code class=\"language-javascript\">setState</code> \u66f4\u65b0\u51fd\u6570\uff08\u7b2c\u4e00\u4e2a\u53c2\u6570\uff09</li>\n</ul>\n<p>\u56e0\u4e3a\u4e0a\u8ff0\u65b9\u6cd5\u53ef\u80fd\u4f1a\u88ab\u591a\u6b21\u8c03\u7528\uff0c\u6240\u4ee5\u4e0d\u8981\u5728\u5b83\u4eec\u5185\u90e8\u7f16\u5199\u526f\u4f5c\u7528\u76f8\u5173\u7684\u4ee3\u7801\uff0c\u8fd9\u70b9\u975e\u5e38\u91cd\u8981\u3002\u5ffd\u7565\u6b64\u89c4\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5404\u79cd\u95ee\u9898\u7684\u4ea7\u751f\uff0c\u5305\u62ec\u5185\u5b58\u6cc4\u6f0f\u548c\u6216\u51fa\u73b0\u65e0\u6548\u7684\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u3002\u4e0d\u5e78\u7684\u662f\uff0c\u8fd9\u4e9b\u95ee\u9898\u5f88\u96be\u88ab\u53d1\u73b0\uff0c\u56e0\u4e3a\u5b83\u4eec\u901a\u5e38\u5177\u6709<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Deterministic_algorithm\">\u975e\u786e\u5b9a\u6027</a>\u3002</p>\n<p>\u4e25\u683c\u6a21\u5f0f\u4e0d\u80fd\u81ea\u52a8\u68c0\u6d4b\u5230\u4f60\u7684\u526f\u4f5c\u7528\uff0c\u4f46\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u53d1\u73b0\u5b83\u4eec\uff0c\u4f7f\u5b83\u4eec\u66f4\u5177\u786e\u5b9a\u6027\u3002\u901a\u8fc7\u6545\u610f\u91cd\u590d\u8c03\u7528\u4ee5\u4e0b\u51fd\u6570\u6765\u5b9e\u73b0\u7684\u8be5\u64cd\u4f5c\uff1a</p>\n<ul>\n<li>class \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">constructor</code>\uff0c<code class=\"language-javascript\">render</code> \u4ee5\u53ca <code class=\"language-javascript\">shouldComponentUpdate</code> \u65b9\u6cd5</li>\n<li>class \u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5 <code class=\"language-javascript\">getDerivedStateFromProps</code></li>\n<li>\u51fd\u6570\u7ec4\u4ef6\u4f53</li>\n<li>\u72b6\u6001\u66f4\u65b0\u51fd\u6570 (\u5373 <code class=\"language-javascript\">setState</code> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff09</li>\n<li>\u51fd\u6570\u7ec4\u4ef6\u901a\u8fc7\u4f7f\u7528 <code class=\"language-javascript\">useState</code>\uff0c<code class=\"language-javascript\">useMemo</code> \u6216\u8005 <code class=\"language-javascript\">useReducer</code></li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u4ec5\u9002\u7528\u4e8e\u5f00\u53d1\u6a21\u5f0f\u3002<em>\u751f\u4ea7\u6a21\u5f0f\u4e0b\u751f\u547d\u5468\u671f\u4e0d\u4f1a\u88ab\u8c03\u7528\u4e24\u6b21\u3002</em></p>\n</div>\n<p>\u4f8b\u5982\uff0c\u8bf7\u8003\u8651\u4ee5\u4e0b\u4ee3\u7801\uff1a\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">TopLevelRoute</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    SharedApplicationState<span class=\"token punctuation\">.</span><span class=\"token function\">recordEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ExampleComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u8fd9\u6bb5\u4ee3\u7801\u770b\u8d77\u6765\u4f3c\u4e4e\u6ca1\u6709\u95ee\u9898\u3002\u4f46\u662f\u5982\u679c <code class=\"language-javascript\">SharedApplicationState.recordEvent</code> \u4e0d\u662f<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Idempotence#Computer_science_meaning\">\u5e42\u7b49</a>\u7684\u60c5\u51b5\u4e0b\uff0c\u591a\u6b21\u5b9e\u4f8b\u5316\u6b64\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u65e0\u6548\u3002\u8fd9\u79cd\u5c0f bug \u53ef\u80fd\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u8868\u73b0\u51fa\u6765\uff0c\u6216\u8005\u8bf4\u8868\u73b0\u51fa\u6765\u4f46\u5e76\u4e0d\u660e\u663e\uff0c\u5e76\u56e0\u6b64\u88ab\u5ffd\u89c6\u3002</p>\n<p>\u4e25\u683c\u6a21\u5f0f\u91c7\u7528\u6545\u610f\u91cd\u590d\u8c03\u7528\u65b9\u6cd5\uff08\u5982\u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\uff09\u7684\u65b9\u5f0f\uff0c\u4f7f\u5f97\u8fd9\u79cd bug \u66f4\u5bb9\u6613\u88ab\u53d1\u73b0\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 React 17 \u4e2d\uff0cReact \u4f1a\u81ea\u52a8\u4fee\u6539 console \u7684\u65b9\u6cd5\uff0c\u4f8b\u5982 <code class=\"language-javascript\">console.log()</code>\uff0c\u5728\u7b2c\u4e8c\u6b21\u8c03\u7528\u751f\u547d\u5468\u671f\u51fd\u6570\u65f6\uff0c\u5c06\u65e5\u5fd7\u9759\u9ed8\u3002\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u4e0d\u7b26\u5408\u671f\u671b\u7684\u884c\u4e3a\u53d1\u751f\uff0c\u6b64\u65f6\uff0c<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/20090#issuecomment-715927125\">\u53ef\u4ee5\u4f7f\u7528\u66ff\u4ee3\u89e3\u51b3\u65b9\u6848</a>\u3002</p>\n<p>\u4ece React 18 \u5f00\u59cb\uff0cReact \u4e0d\u4f1a\u6291\u5236\u4efb\u4f55\u65e5\u5fd7\u3002\u4e0d\u8fc7\uff0c\u5982\u679c\u4f60\u5b89\u88c5\u4e86 React Dev Tools\uff0c\u7b2c\u4e8c\u6b21\u8c03\u7528\u7684\u65e5\u5fd7\u4f1a\u51fa\u73b0\u88ab\u8f7b\u5fae\u6de1\u5316\u3002React DevTools \u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8bbe\u7f6e\uff08\u9ed8\u8ba4\u5173\u95ed\uff09\u6765\u5b8c\u5168\u6291\u5236\u5b83\u4eec\u3002</p>\n</div>\n<h3 id=\"detecting-legacy-context-api\"><a class=\"anchor\" href=\"/react/strict-mode#detecting-legacy-context-api\"></a>\u68c0\u6d4b\u8fc7\u65f6\u7684 context API </h3>\n<p>\u8fc7\u65f6\u7684 context API \u5bb9\u6613\u51fa\u9519\uff0c\u5c06\u5728\u672a\u6765\u7684\u4e3b\u8981\u7248\u672c\u4e2d\u5220\u9664\u3002\u5728\u6240\u6709 16.x \u7248\u672c\u4e2d\u5b83\u4ecd\u7136\u6709\u6548\uff0c\u4f46\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\uff0c\u5c06\u663e\u793a\u4ee5\u4e0b\u8b66\u544a\uff1a</p>\n<p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/fca5c5e1fb2ef2e2d59afb100b432c12/51800/warn-legacy-context-in-strict-mode.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/fca5c5e1fb2ef2e2d59afb100b432c12/1e088/warn-legacy-context-in-strict-mode.png\">Image link</a>\n</span>\n</span>\n</a>\n</p>\n<p>\u9605\u8bfb<a href=\"/react/context\">\u65b0\u7684 context API \u6587\u6863</a>\u4ee5\u5e2e\u52a9\u4f60\u8fc1\u79fb\u5230\u65b0\u7248\u672c\u3002</p>\n<h3 id=\"ensuring-reusable-state\"><a class=\"anchor\" href=\"/react/strict-mode#ensuring-reusable-state\"></a>\u786e\u4fdd\u53ef\u590d\u7528\u7684 state </h3>\n<p>\u5728\u672a\u6765\uff0c\u6211\u4eec\u5e0c\u671b\u589e\u52a0\u4e00\u4e2a\u529f\u80fd\uff0c\u5141\u8bb8 React \u5728\u4fdd\u7559 state \u7684\u540c\u65f6\u5bf9 UI \u8fdb\u884c\u589e\u5220\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u4ece\u5f53\u524d\u5c4f\u5e55\u7684\u6807\u7b7e\u79bb\u5f00\u5e76\u8fd4\u56de\u65f6\uff0cReact \u5e94\u8be5\u80fd\u7acb\u5373\u5c55\u793a\u4e4b\u524d\u5c4f\u5e55\u7684\u5185\u5bb9\u3002\u4e3a\u4e86\u505a\u5230\u8fd9\u4e00\u70b9\uff0cReact \u5c06\u652f\u6301\u4f7f\u7528\u5378\u8f7d\u524d\u5df2\u6709\u7684\u7ec4\u4ef6\u72b6\u6001\u91cd\u65b0\u6302\u8f7d\u5230\u6811\u4e0a\u3002</p>\n<p>\u8be5\u7279\u6027\u4f1a\u7ed9 React \u5e26\u6765\u66f4\u597d\u7684\u5f00\u7bb1\u5373\u7528\u6027\u80fd\uff0c\u4f46\u9700\u8981\u7ec4\u4ef6\u5bf9\u591a\u6b21\u6302\u8f7d\u548c\u9500\u6bc1\u7684\u526f\u4f5c\u7528\u5177\u6709\u5f39\u6027\u3002\u5927\u591a\u6570\u526f\u4f5c\u7528\u5c06\u5728\u4e0d\u505a\u4efb\u4f55\u6539\u53d8\u7684\u60c5\u51b5\u4e0b\u5de5\u4f5c\uff0c\u4f46\u6709\u4e9b\u526f\u4f5c\u7528\u53ef\u80fd\u4f1a\u5728\u9500\u6bc1\u56de\u8c03\u4e2d\u672a\u6b63\u786e\u7684\u6e05\u7406\u8ba2\u9605\uff0c\u6216\u8005\u9690\u793a\u7684\u8ba4\u4e3a\u5b83\u4eec\u53ea\u88ab\u6302\u8f7d\u6216\u9500\u6bc1\u4e00\u6b21\u3002</p>\n<p>\u4e3a\u4e86\u5e2e\u52a9\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0cReact 18 \u4e3a\u4e25\u683c\u6a21\u5f0f\u5f15\u5165\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u4ec5\u7528\u4e8e\u5f00\u53d1\u73af\u5883\u7684\u68c0\u67e5\u64cd\u4f5c\u3002\u6bcf\u5f53\u7b2c\u4e00\u6b21\u5b89\u88c5\u7ec4\u4ef6\u65f6\uff0c\u8fd9\u4e2a\u65b0\u7684\u68c0\u67e5\u5c06\u81ea\u52a8\u5378\u8f7d\u5e76\u91cd\u65b0\u5b89\u88c5\u6bcf\u4e2a\u7ec4\u4ef6\uff0c\u5e76\u5728\u7b2c\u4e8c\u6b21\u6302\u8f7d\u65f6\u6062\u590d\u4e4b\u524d\u7684 state\u3002</p>\n<p>\u4e3a\u4e86\u6f14\u793a\u4f60\u5728\u4e25\u683c\u6a21\u5f0f\u4e0b\u770b\u5230\u7684\u5177\u6709\u8fd9\u4e00\u7279\u6027\u7684\u5f00\u53d1\u884c\u4e3a\uff0c\u8003\u8651\u4e00\u4e0b\u5f53 React \u6302\u8f7d\u4e00\u4e2a\u65b0\u7ec4\u4ef6\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u53d8\u5316\uff0c\u5f53\u4e00\u4e2a\u7ec4\u4ef6\u6302\u8f7d\u65f6\uff0cReact \u4f1a\u521b\u5efa\u526f\u4f5c\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">* React mounts the component.\n  * Layout effects are created.\n  * Effects are created.</code></pre></div>\n<p>\u4ece React 18 \u5f00\u59cb\u7684\u4e25\u683c\u6a21\u5f0f\uff0c\u6bcf\u5f53\u7ec4\u4ef6\u5728\u5f00\u53d1\u4e2d\u6302\u8f7d\u65f6\uff0cReact \u4f1a\u6a21\u62df\u7acb\u5373\u5378\u8f7d\u548c\u91cd\u65b0\u6302\u8f7d\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">* React mounts the component.\n    * Layout effects are created.\n    * Effect effects are created.\n* React simulates effects being destroyed on a mounted component.\n    * Layout effects are destroyed.\n    * Effects are destroyed.\n* React simulates effects being re-created on a mounted component.\n    * Layout effects are created\n    * Effect setup code runs</code></pre></div>\n<p>\u5728\u7b2c\u4e8c\u6b21\u6302\u8f7d\u65f6\uff0cReact \u5c06\u6062\u590d\u7b2c\u4e00\u6b21\u88c5\u8f7d\u65f6\u7684\u72b6\u6001\u3002\u8fd9\u4e2a\u529f\u80fd\u6a21\u62df\u4e86\u7528\u6237\u7684\u884c\u4e3a\uff0c\u6bd4\u5982\u7528\u6237\u4ece\u5c4f\u5e55\u4e0a\u5207\u6362\u6807\u7b7e\u518d\u56de\u6765\uff0c\u786e\u4fdd\u4ee3\u7801\u80fd\u6b63\u786e\u5904\u7406\u72b6\u6001\u6062\u590d\u3002</p>\n<p>\u5f53\u7ec4\u4ef6\u5378\u8f7d\u65f6\uff0c\u526f\u4f5c\u7528\u4f1a\u5982\u5e38\u9500\u6bc1\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">* React unmounts the component.\n  * Layout effects are destroyed.\n  * Effect effects are destroyed.</code></pre></div>\n<p>\u5378\u8f7d\u548c\u91cd\u65b0\u6302\u8f7d\u7684\u51fd\u6570\uff0c\u5305\u62ec\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">componentDidMount</code></li>\n<li><code class=\"language-javascript\">componentWillUnmount</code></li>\n<li><code class=\"language-javascript\">useEffect</code></li>\n<li><code class=\"language-javascript\">useLayoutEffect</code></li>\n<li><code class=\"language-javascript\">useInsertionEffect</code></li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u53ea\u9002\u7528\u4e8e\u5f00\u53d1\u6a21\u5f0f\uff0c<em>\u751f\u4ea7\u73af\u5883\u6ca1\u6709\u53d8\u5316</em>\u3002</p>\n</div>\n<p>\u5982\u9700\u4e86\u89e3\u66f4\u591a\u5e38\u89c1\u95ee\u9898\uff0c\u8bf7\u53c2\u9605\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/reactwg/react-18/discussions/18\">\u5982\u4f55\u5728 Effects \u4e2d\u652f\u6301\u53ef\u590d\u7528\u7684 state</a></li>\n</ul></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/strict-mode.md\">Edit this page</a></p></div></article>", "path": "/react/strict-mode", "nav": ["/react/static-type-checking", "/react/typechecking-with-proptypes"]}, {"key": "\u4f7f\u7528 PropTypes \u7c7b\u578b\u68c0\u67e5", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u81ea React v15.5 \u8d77\uff0c<code class=\"language-javascript\">React.PropTypes</code> \u5df2\u79fb\u5165\u53e6\u4e00\u4e2a\u5305\u4e2d\u3002\u8bf7\u4f7f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/package/prop-types\"><code class=\"language-javascript\">prop-types</code> \u5e93</a> \u4ee3\u66ff\u3002</p>\n<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2017/04/07/react-v15.5.0.html#migrating-from-reactproptypes\">codemod \u811a\u672c</a>\u6765\u505a\u81ea\u52a8\u8f6c\u6362\u3002</p>\n</div>\n<p>\u968f\u7740\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e0d\u65ad\u589e\u957f\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u7c7b\u578b\u68c0\u67e5\u6355\u83b7\u5927\u91cf\u9519\u8bef\u3002\u5bf9\u4e8e\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://flow.org/\">Flow</a> \u6216 <a class=\"external-link\" href=\"https://www.typescriptlang.org/\">TypeScript</a> \u7b49 JavaScript \u6269\u5c55\u6765\u5bf9\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u505a\u7c7b\u578b\u68c0\u67e5\u3002\u4f46\u5373\u4f7f\u4f60\u4e0d\u4f7f\u7528\u8fd9\u4e9b\u6269\u5c55\uff0cReact \u4e5f\u5185\u7f6e\u4e86\u4e00\u4e9b\u7c7b\u578b\u68c0\u67e5\u7684\u529f\u80fd\u3002\u8981\u5728\u7ec4\u4ef6\u7684 props \u4e0a\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\uff0c\u4f60\u53ea\u9700\u914d\u7f6e\u7279\u5b9a\u7684 <code class=\"language-javascript\">propTypes</code> \u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nGreeting<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u662f class \u7ec4\u4ef6\uff0c\u4f46\u662f\u540c\u6837\u7684\u529f\u80fd\u4e5f\u53ef\u7528\u4e8e\u51fd\u6570\u7ec4\u4ef6\uff0c\u6216\u8005\u662f\u7531 <a href=\"/react/react-api#reactmemo\"><code class=\"language-javascript\">React.memo</code></a>/<a href=\"/react/react-api#reactforwardref\"><code class=\"language-javascript\">React.forwardRef</code></a> \u521b\u5efa\u7684\u7ec4\u4ef6\u3002</p>\n<p><code class=\"language-javascript\">PropTypes</code> \u63d0\u4f9b\u4e00\u7cfb\u5217\u9a8c\u8bc1\u5668\uff0c\u53ef\u7528\u4e8e\u786e\u4fdd\u7ec4\u4ef6\u63a5\u6536\u5230\u7684\u6570\u636e\u7c7b\u578b\u662f\u6709\u6548\u7684\u3002\u5728\u672c\u4f8b\u4e2d, \u6211\u4eec\u4f7f\u7528\u4e86 <code class=\"language-javascript\">PropTypes.string</code>\u3002\u5f53\u4f20\u5165\u7684 <code class=\"language-javascript\">prop</code> \u503c\u7c7b\u578b\u4e0d\u6b63\u786e\u65f6\uff0cJavaScript \u63a7\u5236\u53f0\u5c06\u4f1a\u663e\u793a\u8b66\u544a\u3002\u51fa\u4e8e\u6027\u80fd\u65b9\u9762\u7684\u8003\u8651\uff0c<code class=\"language-javascript\">propTypes</code> \u4ec5\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fdb\u884c\u68c0\u67e5\u3002</p>\n<h3 id=\"proptypes\"><a class=\"anchor\" href=\"/react/typechecking-with-proptypes#proptypes\"></a>PropTypes </h3>\n<p>\u4ee5\u4e0b\u63d0\u4f9b\u4e86\u4f7f\u7528\u4e0d\u540c\u9a8c\u8bc1\u5668\u7684\u4f8b\u5b50\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span><span class=\"token punctuation\">;</span>\n\nMyComponent<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u5c06\u5c5e\u6027\u58f0\u660e\u4e3a JS \u539f\u751f\u7c7b\u578b\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b</span>\n  <span class=\"token comment\">// \u8fd9\u4e9b\u5c5e\u6027\u90fd\u662f\u53ef\u9009\u7684\u3002</span>\n  <span class=\"token literal-property property\">optionalArray</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optionalBool</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>bool<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optionalFunc</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optionalNumber</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optionalObject</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optionalString</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">optionalSymbol</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>symbol<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4efb\u4f55\u53ef\u88ab\u6e32\u67d3\u7684\u5143\u7d20\uff08\u5305\u62ec\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5143\u7d20\u6216\u6570\u7ec4\uff09</span>\n  <span class=\"token comment\">// (\u6216 Fragment) \u4e5f\u5305\u542b\u8fd9\u4e9b\u7c7b\u578b\u3002</span>\n  <span class=\"token literal-property property\">optionalNode</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4e00\u4e2a React \u5143\u7d20\u3002</span>\n  <span class=\"token literal-property property\">optionalElement</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>element<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4e00\u4e2a React \u5143\u7d20\u7c7b\u578b\uff08\u5373\uff0cMyComponent\uff09\u3002</span>\n  <span class=\"token literal-property property\">optionalElementType</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>elementType<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4f60\u4e5f\u53ef\u4ee5\u58f0\u660e prop \u4e3a\u7c7b\u7684\u5b9e\u4f8b\uff0c\u8fd9\u91cc\u4f7f\u7528</span>\n  <span class=\"token comment\">// JS \u7684 instanceof \u64cd\u4f5c\u7b26\u3002</span>\n  <span class=\"token literal-property property\">optionalMessage</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">instanceOf</span><span class=\"token punctuation\">(</span>Message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u8ba9\u4f60\u7684 prop \u53ea\u80fd\u662f\u7279\u5b9a\u7684\u503c\uff0c\u6307\u5b9a\u5b83\u4e3a</span>\n  <span class=\"token comment\">// \u679a\u4e3e\u7c7b\u578b\u3002</span>\n  <span class=\"token literal-property property\">optionalEnum</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">oneOf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'News'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Photos'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4e00\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u662f\u51e0\u79cd\u7c7b\u578b\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u7c7b\u578b</span>\n  <span class=\"token literal-property property\">optionalUnion</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">oneOfType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span>\n    PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">,</span>\n    PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">instanceOf</span><span class=\"token punctuation\">(</span>Message<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u6570\u7ec4\u7531\u67d0\u4e00\u7c7b\u578b\u7684\u5143\u7d20\u7ec4\u6210</span>\n  <span class=\"token literal-property property\">optionalArrayOf</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u5bf9\u8c61\u7531\u67d0\u4e00\u7c7b\u578b\u7684\u503c\u7ec4\u6210</span>\n  <span class=\"token literal-property property\">optionalObjectOf</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">objectOf</span><span class=\"token punctuation\">(</span>PropTypes<span class=\"token punctuation\">.</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u5bf9\u8c61\u7531\u7279\u5b9a\u7684\u7c7b\u578b\u503c\u7ec4\u6210</span>\n  <span class=\"token literal-property property\">optionalObjectWithShape</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// An object with warnings on extra properties</span>\n  <span class=\"token literal-property property\">optionalObjectWithStrictShape</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">exact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>number\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u5728\u4efb\u4f55 PropTypes \u5c5e\u6027\u540e\u9762\u52a0\u4e0a `isRequired` \uff0c\u786e\u4fdd</span>\n  <span class=\"token comment\">// \u8fd9\u4e2a prop \u6ca1\u6709\u88ab\u63d0\u4f9b\u65f6\uff0c\u4f1a\u6253\u5370\u8b66\u544a\u4fe1\u606f\u3002</span>\n  <span class=\"token literal-property property\">requiredFunc</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4efb\u610f\u7c7b\u578b\u7684\u5fc5\u9700\u6570\u636e</span>\n  <span class=\"token literal-property property\">requiredAny</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>any<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u3002\u5b83\u5728\u9a8c\u8bc1\u5931\u8d25\u65f6\u5e94\u8fd4\u56de\u4e00\u4e2a Error \u5bf9\u8c61\u3002</span>\n  <span class=\"token comment\">// \u8bf7\u4e0d\u8981\u4f7f\u7528 `console.warn` \u6216\u629b\u51fa\u5f02\u5e38\uff0c\u56e0\u4e3a\u8fd9\u5728 `oneOfType` \u4e2d\u4e0d\u4f1a\u8d77\u4f5c\u7528\u3002</span>\n  <span class=\"token function-variable function\">customProp</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> propName<span class=\"token punctuation\">,</span> componentName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">matchme</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'Invalid prop `'</span> <span class=\"token operator\">+</span> propName <span class=\"token operator\">+</span> <span class=\"token string\">'` supplied to'</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">' `'</span> <span class=\"token operator\">+</span> componentName <span class=\"token operator\">+</span> <span class=\"token string\">'`. Validation failed.'</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// \u4f60\u4e5f\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 `arrayOf` \u6216 `objectOf` \u9a8c\u8bc1\u5668\u3002</span>\n  <span class=\"token comment\">// \u5b83\u5e94\u8be5\u5728\u9a8c\u8bc1\u5931\u8d25\u65f6\u8fd4\u56de\u4e00\u4e2a Error \u5bf9\u8c61\u3002</span>\n  <span class=\"token comment\">// \u9a8c\u8bc1\u5668\u5c06\u9a8c\u8bc1\u6570\u7ec4\u6216\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e2a\u503c\u3002\u9a8c\u8bc1\u5668\u7684\u524d\u4e24\u4e2a\u53c2\u6570</span>\n  <span class=\"token comment\">// \u7b2c\u4e00\u4e2a\u662f\u6570\u7ec4\u6216\u5bf9\u8c61\u672c\u8eab</span>\n  <span class=\"token comment\">// \u7b2c\u4e8c\u4e2a\u662f\u4ed6\u4eec\u5f53\u524d\u7684\u952e\u3002</span>\n  <span class=\"token literal-property property\">customArrayProp</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">propValue<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> componentName<span class=\"token punctuation\">,</span> location<span class=\"token punctuation\">,</span> propFullName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">matchme</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>propValue<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'Invalid prop `'</span> <span class=\"token operator\">+</span> propFullName <span class=\"token operator\">+</span> <span class=\"token string\">'` supplied to'</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">' `'</span> <span class=\"token operator\">+</span> componentName <span class=\"token operator\">+</span> <span class=\"token string\">'`. Validation failed.'</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"requiring-single-child\"><a class=\"anchor\" href=\"/react/typechecking-with-proptypes#requiring-single-child\"></a>\u9650\u5236\u5355\u4e2a\u5143\u7d20 </h3>\n<p>\u4f60\u53ef\u4ee5\u901a\u8fc7 <code class=\"language-javascript\">PropTypes.element</code> \u6765\u786e\u4fdd\u4f20\u9012\u7ed9\u7ec4\u4ef6\u7684 children \u4e2d\u53ea\u5305\u542b\u4e00\u4e2a\u5143\u7d20\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u8fd9\u5fc5\u987b\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\uff0c\u5426\u5219\u63a7\u5236\u53f0\u4f1a\u6253\u5370\u8b66\u544a\u3002</span>\n    <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nMyComponent<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>element<span class=\"token punctuation\">.</span>isRequired\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"default-prop-values\"><a class=\"anchor\" href=\"/react/typechecking-with-proptypes#default-prop-values\"></a>\u9ed8\u8ba4 Prop \u503c </h3>\n<p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u7279\u5b9a\u7684 <code class=\"language-javascript\">defaultProps</code> \u5c5e\u6027\u6765\u5b9a\u4e49 <code class=\"language-javascript\">props</code> \u7684\u9ed8\u8ba4\u503c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u6307\u5b9a props \u7684\u9ed8\u8ba4\u503c\uff1a</span>\nGreeting<span class=\"token punctuation\">.</span>defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Stranger'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u6e32\u67d3\u51fa \"Hello, Stranger\"\uff1a</span>\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Greeting</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4ece ES2022 \u5f00\u59cb\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728 React \u7c7b\u7ec4\u4ef6\u4e2d\u5c06 <code class=\"language-javascript\">defaultProps</code> \u58f0\u660e\u4e3a\u9759\u6001\u5c5e\u6027\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Public_class_fields#public_static_fields\">class public static fields</a>\u3002\u8fd9\u79cd\u73b0\u4ee3\u8bed\u6cd5\u9700\u8981\u6dfb\u52a0\u989d\u5916\u7684\u7f16\u8bd1\u6b65\u9aa4\u624d\u80fd\u5728\u8001\u7248\u6d4f\u89c8\u5668\u4e2d\u5de5\u4f5c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'stranger'</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">defaultProps</code> \u7528\u4e8e\u786e\u4fdd <code class=\"language-javascript\">this.props.name</code> \u5728\u7236\u7ec4\u4ef6\u6ca1\u6709\u6307\u5b9a\u5176\u503c\u65f6\uff0c\u6709\u4e00\u4e2a\u9ed8\u8ba4\u503c\u3002<code class=\"language-javascript\">propTypes</code> \u7c7b\u578b\u68c0\u67e5\u53d1\u751f\u5728 <code class=\"language-javascript\">defaultProps</code> \u8d4b\u503c\u540e\uff0c\u6240\u4ee5\u7c7b\u578b\u68c0\u67e5\u4e5f\u9002\u7528\u4e8e <code class=\"language-javascript\">defaultProps</code>\u3002</p>\n<h3 id=\"function-components\"><a class=\"anchor\" href=\"/react/typechecking-with-proptypes#function-components\"></a>\u51fd\u6570\u7ec4\u4ef6 </h3>\n<p>\u5982\u679c\u4f60\u5728\u5e38\u89c4\u5f00\u53d1\u4e2d\u4f7f\u7528\u51fd\u6570\u7ec4\u4ef6\uff0c\u90a3\u4f60\u53ef\u80fd\u9700\u8981\u505a\u4e00\u4e9b\u9002\u5f53\u7684\u6539\u52a8\uff0c\u4ee5\u4fdd\u8bc1 PropsTypes \u5e94\u7528\u6b63\u5e38\u3002</p>\n<p>\u5047\u8bbe\u4f60\u6709\u5982\u4e0b\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorldComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u8981\u6dfb\u52a0 PropTypes\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u5728\u5bfc\u51fa\u4e4b\u524d\u4ee5\u5355\u72ec\u58f0\u660e\u7684\u4e00\u4e2a\u51fd\u6570\u7684\u5f62\u5f0f\uff0c\u58f0\u660e\u8be5\u7ec4\u4ef6\uff0c\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorldComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HelloWorldComponent</code></pre></div>\n<p>\u63a5\u7740\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728 <code class=\"language-javascript\">HelloWorldComponent</code> \u4e0a\u6dfb\u52a0 PropTypes\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorldComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nHelloWorldComponent<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HelloWorldComponent</code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/typechecking-with-proptypes.md\">Edit this page</a></p></div></article>", "path": "/react/typechecking-with-proptypes", "nav": ["/react/strict-mode", "/react/uncontrolled-components"]}, {"key": "\u975e\u53d7\u63a7\u7ec4\u4ef6", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <a href=\"/react/forms#controlled-components\">\u53d7\u63a7\u7ec4\u4ef6</a> \u6765\u5904\u7406\u8868\u5355\u6570\u636e\u3002\u5728\u4e00\u4e2a\u53d7\u63a7\u7ec4\u4ef6\u4e2d\uff0c\u8868\u5355\u6570\u636e\u662f\u7531 React \u7ec4\u4ef6\u6765\u7ba1\u7406\u7684\u3002\u53e6\u4e00\u79cd\u66ff\u4ee3\u65b9\u6848\u662f\u4f7f\u7528\u975e\u53d7\u63a7\u7ec4\u4ef6\uff0c\u8fd9\u65f6\u8868\u5355\u6570\u636e\u5c06\u4ea4\u7531 DOM \u8282\u70b9\u6765\u5904\u7406\u3002</p>\n<p>\u8981\u7f16\u5199\u4e00\u4e2a\u975e\u53d7\u63a7\u7ec4\u4ef6\uff0c\u800c\u4e0d\u662f\u4e3a\u6bcf\u4e2a\u72b6\u6001\u66f4\u65b0\u90fd\u7f16\u5199\u6570\u636e\u5904\u7406\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5 <a href=\"/react/refs-and-the-dom\">\u4f7f\u7528 ref</a> \u6765\u4ece DOM \u8282\u70b9\u4e2d\u83b7\u53d6\u8868\u5355\u6570\u636e\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4e0b\u9762\u7684\u4ee3\u7801\u4f7f\u7528\u975e\u53d7\u63a7\u7ec4\u4ef6\u63a5\u53d7\u4e00\u4e2a\u8868\u5355\u7684\u503c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">NameForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'A name was submitted: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          Name:</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://codepen.io/gaearon/pen/WooRWa?editors=0010\"><strong>\u5728 CodePen \u4e0a\u5c1d\u8bd5</strong></a></p>\n<p>\u56e0\u4e3a\u975e\u53d7\u63a7\u7ec4\u4ef6\u5c06\u771f\u5b9e\u6570\u636e\u50a8\u5b58\u5728 DOM \u8282\u70b9\u4e2d\uff0c\u6240\u4ee5\u5728\u4f7f\u7528\u975e\u53d7\u63a7\u7ec4\u4ef6\u65f6\uff0c\u6709\u65f6\u5019\u53cd\u800c\u66f4\u5bb9\u6613\u540c\u65f6\u96c6\u6210 React \u548c\u975e React \u4ee3\u7801\u3002\u5982\u679c\u4f60\u4e0d\u4ecb\u610f\u4ee3\u7801\u7f8e\u89c2\u6027\uff0c\u5e76\u4e14\u5e0c\u671b\u5feb\u901f\u7f16\u5199\u4ee3\u7801\uff0c\u4f7f\u7528\u975e\u53d7\u63a7\u7ec4\u4ef6\u5f80\u5f80\u53ef\u4ee5\u51cf\u5c11\u4f60\u7684\u4ee3\u7801\u91cf\u3002\u5426\u5219\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528\u53d7\u63a7\u7ec4\u4ef6\u3002</p>\n<p>\u5982\u679c\u4f60\u8fd8\u662f\u4e0d\u6e05\u695a\u5728\u67d0\u4e2a\u7279\u6b8a\u573a\u666f\u4e2d\u5e94\u8be5\u4f7f\u7528\u54ea\u79cd\u7ec4\u4ef6\uff0c\u90a3\u4e48 <a class=\"external-link\" href=\"https://goshakkk.name/controlled-vs-uncontrolled-inputs-react/\">\u8fd9\u7bc7\u5173\u4e8e\u53d7\u63a7\u548c\u975e\u53d7\u63a7\u8f93\u5165\u7ec4\u4ef6\u7684\u6587\u7ae0</a> \u4f1a\u5f88\u6709\u5e2e\u52a9\u3002</p>\n<h3 id=\"default-values\"><a class=\"anchor\" href=\"/react/uncontrolled-components#default-values\"></a>\u9ed8\u8ba4\u503c </h3>\n<p>\u5728 React \u6e32\u67d3\u751f\u547d\u5468\u671f\u65f6\uff0c\u8868\u5355\u5143\u7d20\u4e0a\u7684 <code class=\"language-javascript\">value</code> \u5c06\u4f1a\u8986\u76d6 DOM \u8282\u70b9\u4e2d\u7684\u503c\u3002\u5728\u975e\u53d7\u63a7\u7ec4\u4ef6\u4e2d\uff0c\u4f60\u7ecf\u5e38\u5e0c\u671b React \u80fd\u8d4b\u4e88\u7ec4\u4ef6\u4e00\u4e2a\u521d\u59cb\u503c\uff0c\u4f46\u662f\u4e0d\u53bb\u63a7\u5236\u540e\u7eed\u7684\u66f4\u65b0\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b, \u4f60\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a <code class=\"language-javascript\">defaultValue</code> \u5c5e\u6027\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">value</code>\u3002\u5728\u4e00\u4e2a\u7ec4\u4ef6\u5df2\u7ecf\u6302\u8f7d\u4e4b\u540e\u53bb\u66f4\u65b0 <code class=\"language-javascript\">defaultValue</code> \u5c5e\u6027\u7684\u503c\uff0c\u4e0d\u4f1a\u9020\u6210 DOM \u4e0a\u503c\u7684\u4efb\u4f55\u66f4\u65b0\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Name:</span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n<span class=\"gatsby-highlight-code-line\">          <span class=\"token attr-name\">defaultValue</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Bob<span class=\"token punctuation\">\"</span></span></span>          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u540c\u6837\uff0c<code class=\"language-javascript\">&lt;input type=\"checkbox\"&gt;</code> \u548c <code class=\"language-javascript\">&lt;input type=\"radio\"&gt;</code> \u652f\u6301 <code class=\"language-javascript\">defaultChecked</code>\uff0c<code class=\"language-javascript\">&lt;select&gt;</code> \u548c <code class=\"language-javascript\">&lt;textarea&gt;</code> \u652f\u6301 <code class=\"language-javascript\">defaultValue</code>\u3002</p>\n<h2 id=\"the-file-input-tag\"><a class=\"anchor\" href=\"/react/uncontrolled-components#the-file-input-tag\"></a>\u6587\u4ef6\u8f93\u5165 </h2>\n<p>\u5728 HTML \u4e2d\uff0c<code class=\"language-javascript\">&lt;input type=\"file\"&gt;</code> \u53ef\u4ee5\u8ba9\u7528\u6237\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff0c\u6216\u8005\u901a\u8fc7\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications\">File API</a> \u8fdb\u884c\u64cd\u4f5c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-html\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u5728 React \u4e2d\uff0c<code class=\"language-javascript\">&lt;input type=\"file\" /&gt;</code> \u59cb\u7ec8\u662f\u4e00\u4e2a\u975e\u53d7\u63a7\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u5b83\u7684\u503c\u53ea\u80fd\u7531\u7528\u6237\u8bbe\u7f6e\uff0c\u800c\u4e0d\u80fd\u901a\u8fc7\u4ee3\u7801\u63a7\u5236\u3002</p>\n<p>\u60a8\u5e94\u8be5\u4f7f\u7528 File API \u4e0e\u6587\u4ef6\u8fdb\u884c\u4ea4\u4e92\u3002\u4e0b\u9762\u7684\u4f8b\u5b50\u663e\u793a\u4e86\u5982\u4f55\u521b\u5efa\u4e00\u4e2a <a href=\"/react/refs-and-the-dom\">DOM \u8282\u70b9\u7684 ref</a> \u4ece\u800c\u5728\u63d0\u4ea4\u8868\u5355\u65f6\u83b7\u53d6\u6587\u4ef6\u7684\u4fe1\u606f\u3002</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FileInput</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Selected file - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          Upload file:</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FileInput</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p><a class=\"external-link\" href=\"https://zh-hans.reactjs.org//redirect-to-codepen/uncontrolled-components/input-type-file\"><b>\u5728 CodePen \u4e0a\u5c1d\u8bd5</b></a></p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/uncontrolled-components.md\">Edit this page</a></p></div></article>", "path": "/react/uncontrolled-components", "nav": ["/react/typechecking-with-proptypes", "/react/web-components"]}, {"key": "Web Components", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u548c <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\">Web Components</a> \u4e3a\u4e86\u89e3\u51b3\u4e0d\u540c\u7684\u95ee\u9898\u800c\u751f\u3002Web Components \u4e3a\u53ef\u590d\u7528\u7ec4\u4ef6\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5c01\u88c5\uff0c\u800c React \u5219\u63d0\u4f9b\u4e86\u58f0\u660e\u5f0f\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4f7f DOM \u4e0e\u6570\u636e\u4fdd\u6301\u540c\u6b65\u3002\u4e24\u8005\u65e8\u5728\u4e92\u8865\u3002\u4f5c\u4e3a\u5f00\u53d1\u4eba\u5458\uff0c\u53ef\u4ee5\u81ea\u7531\u9009\u62e9\u5728 Web Components \u4e2d\u4f7f\u7528 React\uff0c\u6216\u8005\u5728 React \u4e2d\u4f7f\u7528 Web Components\uff0c\u6216\u8005\u4e24\u8005\u5171\u5b58\u3002</p>\n<p>\u5927\u591a\u6570\u5f00\u53d1\u8005\u5728\u4f7f\u7528 React \u65f6\uff0c\u4e0d\u4f7f\u7528 Web Components\uff0c\u4f46\u53ef\u80fd\u4f60\u4f1a\u9700\u8981\u4f7f\u7528\uff0c\u5c24\u5176\u662f\u5728\u4f7f\u7528 Web Components \u7f16\u5199\u7684\u7b2c\u4e09\u65b9 UI \u7ec4\u4ef6\u65f6\u3002</p>\n<h2 id=\"using-web-components-in-react\"><a class=\"anchor\" href=\"/react/web-components#using-web-components-in-react\"></a>\u5728 React \u4e2d\u4f7f\u7528 Web Components </h2>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloMessage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>x-search</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>x-search</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>Web Components \u901a\u5e38\u66b4\u9732\u7684\u662f\u547d\u4ee4\u5f0f API\u3002\u4f8b\u5982\uff0cWeb Components \u7684\u7ec4\u4ef6 <code class=\"language-javascript\">video</code> \u53ef\u80fd\u4f1a\u516c\u5f00 <code class=\"language-javascript\">play()</code> \u548c <code class=\"language-javascript\">pause()</code> \u65b9\u6cd5\u3002\u8981\u8bbf\u95ee Web Components \u7684\u547d\u4ee4\u5f0f API\uff0c\u4f60\u9700\u8981\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u76f4\u63a5\u4e0e DOM \u8282\u70b9\u8fdb\u884c\u4ea4\u4e92\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u7b2c\u4e09\u65b9 Web Components\uff0c\u90a3\u4e48\u6700\u597d\u7684\u89e3\u51b3\u65b9\u6848\u662f\u7f16\u5199 React \u7ec4\u4ef6\u5305\u88c5\u8be5 Web Components\u3002</p>\n<p>Web Components \u89e6\u53d1\u7684\u4e8b\u4ef6\u53ef\u80fd\u65e0\u6cd5\u901a\u8fc7 React \u6e32\u67d3\u6811\u6b63\u786e\u7684\u4f20\u9012\u3002\n\u4f60\u9700\u8981\u5728 React \u7ec4\u4ef6\u4e2d\u624b\u52a8\u6dfb\u52a0\u4e8b\u4ef6\u5904\u7406\u5668\u6765\u5904\u7406\u8fd9\u4e9b\u4e8b\u4ef6\u3002</p>\n</div>\n<p>\u5e38\u89c1\u7684\u8bef\u533a\u662f\u5728 Web Components \u4e2d\u4f7f\u7528\u7684\u662f <code class=\"language-javascript\">class</code> \u800c\u975e <code class=\"language-javascript\">className</code>\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">BrickFlipbox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>brick-flipbox</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>demo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">front</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">back</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>brick-flipbox</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"using-react-in-your-web-components\"><a class=\"anchor\" href=\"/react/web-components#using-react-in-your-web-components\"></a>\u5728 Web Components \u4e2d\u4f7f\u7528 React  </h2>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">XSearch</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HTMLElement</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">connectedCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> mountPoint <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">attachShadow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'open'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>mountPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://www.google.com/search?q='</span> <span class=\"token operator\">+</span> <span class=\"token function\">encodeURIComponent</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>mountPoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\ncustomElements<span class=\"token punctuation\">.</span><span class=\"token function\">define</span><span class=\"token punctuation\">(</span><span class=\"token string\">'x-search'</span><span class=\"token punctuation\">,</span> XSearch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5982\u679c\u4f7f\u7528 Babel \u6765\u8f6c\u6362 class\uff0c\u6b64\u4ee3\u7801\u5c06<strong>\u4e0d\u4f1a</strong>\u8d77\u4f5c\u7528\u3002\u8bf7\u67e5\u9605\u8be5 <a class=\"external-link\" href=\"https://github.com/w3c/webcomponents/issues/587\">issue</a> \u4e86\u89e3\u76f8\u5173\u8ba8\u8bba\u3002\n\u5728\u52a0\u8f7d Web Components \u524d\u8bf7\u5f15\u5165 <a class=\"external-link\" href=\"https://github.com/webcomponents/polyfills/tree/master/packages/webcomponentsjs#custom-elements-es5-adapterjs\">custom-elements-es5-adapter</a> \u6765\u89e3\u51b3\u8be5 issue\u3002</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/web-components.md\">Edit this page</a></p></div></article>", "path": "/react/web-components", "nav": ["/react/uncontrolled-components", "/react/react-api"]}]}, {"key": "API Reference", "values": [{"key": "React", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><code class=\"language-javascript\">React</code> \u662f React \u5e93\u7684\u5165\u53e3\u3002\u5982\u679c\u4f60\u901a\u8fc7\u4f7f\u7528 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u7684\u65b9\u5f0f\u6765\u52a0\u8f7d React\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7 <code class=\"language-javascript\">React</code> \u5168\u5c40\u53d8\u91cf\u5bf9\u8c61\u6765\u83b7\u5f97 React \u7684\u9876\u5c42 API\u3002\u5f53\u4f60\u4f7f\u7528 ES6 \u4e0e npm \u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f16\u5199 <code class=\"language-javascript\">import React from 'react'</code> \u6765\u5f15\u5165\u5b83\u4eec\u3002\u5f53\u4f60\u4f7f\u7528 ES5 \u4e0e npm \u65f6\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u7f16\u5199 <code class=\"language-javascript\">var React = require('react')</code> \u6765\u5f15\u5165\u5b83\u4eec\u3002</p>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/react-api#overview\"></a>\u6982\u89c8 </h2>\n<h3 id=\"components\"><a class=\"anchor\" href=\"/react/react-api#components\"></a>\u7ec4\u4ef6 </h3>\n<p>\u4f7f\u7528 React \u7ec4\u4ef6\u53ef\u4ee5\u5c06 UI \u62c6\u5206\u4e3a\u72ec\u7acb\u4e14\u590d\u7528\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u6bcf\u90e8\u5206\u90fd\u53ef\u72ec\u7acb\u7ef4\u62a4\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5b50\u7c7b <code class=\"language-javascript\">React.Component</code> \u6216 <code class=\"language-javascript\">React.PureComponent</code> \u6765\u5b9a\u4e49 React \u7ec4\u4ef6\u3002</p>\n<ul>\n<li><a href=\"/react/react-api#reactcomponent\"><code class=\"language-javascript\">React.Component</code></a></li>\n<li><a href=\"/react/react-api#reactpurecomponent\"><code class=\"language-javascript\">React.PureComponent</code></a></li>\n</ul>\n<p>\u5982\u679c\u4f60\u4e0d\u4f7f\u7528 ES6 \u7684 class\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">create-react-class</code> \u6a21\u5757\u6765\u66ff\u4ee3\u3002\u8bf7\u53c2\u9605<a href=\"/react/react-without-es6\">\u4e0d\u4f7f\u7528 ES6</a> \u4ee5\u83b7\u53d6\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>\n<p>React \u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u88ab\u5b9a\u4e49\u4e3a\u53ef\u88ab\u5305\u88c5\u7684\u51fd\u6570\uff1a</p>\n<ul>\n<li><a href=\"/react/react-api#reactmemo\"><code class=\"language-javascript\">React.memo</code></a></li>\n</ul>\n<h3 id=\"creating-react-elements\"><a class=\"anchor\" href=\"/react/react-api#creating-react-elements\"></a>\u521b\u5efa React \u5143\u7d20 </h3>\n<p>\u6211\u4eec\u5efa\u8bae<a href=\"/react/introducing-jsx\">\u4f7f\u7528 JSX</a> \u6765\u7f16\u5199\u4f60\u7684 UI \u7ec4\u4ef6\u3002\u6bcf\u4e2a JSX \u5143\u7d20\u90fd\u662f\u8c03\u7528 <a href=\"/react/react-api#createelement\"><code class=\"language-javascript\">React.createElement()</code></a> \u7684\u8bed\u6cd5\u7cd6\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u4e86 JSX\uff0c\u5c31\u4e0d\u518d\u9700\u8981\u8c03\u7528\u4ee5\u4e0b\u65b9\u6cd5\u3002</p>\n<ul>\n<li><a href=\"/react/react-api#createelement\"><code class=\"language-javascript\">createElement()</code></a></li>\n<li><a href=\"/react/react-api#createfactory\"><code class=\"language-javascript\">createFactory()</code></a></li>\n</ul>\n<p>\u8bf7\u53c2\u9605<a href=\"/react/react-without-jsx\">\u4e0d\u4f7f\u7528 JSX</a> \u4ee5\u83b7\u53d6\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>\n<h3 id=\"transforming-elements\"><a class=\"anchor\" href=\"/react/react-api#transforming-elements\"></a>\u8f6c\u6362\u5143\u7d20 </h3>\n<p><code class=\"language-javascript\">React</code> \u63d0\u4f9b\u4e86\u51e0\u4e2a\u7528\u4e8e\u64cd\u4f5c\u5143\u7d20\u7684 API\uff1a</p>\n<ul>\n<li><a href=\"/react/react-api#cloneelement\"><code class=\"language-javascript\">cloneElement()</code></a></li>\n<li><a href=\"/react/react-api#isvalidelement\"><code class=\"language-javascript\">isValidElement()</code></a></li>\n<li><a href=\"/react/react-api#reactchildren\"><code class=\"language-javascript\">React.Children</code></a></li>\n</ul>\n<h3 id=\"fragments\"><a class=\"anchor\" href=\"/react/react-api#fragments\"></a>Fragments </h3>\n<p><code class=\"language-javascript\">React</code> \u8fd8\u63d0\u4f9b\u4e86\u7528\u4e8e\u51cf\u5c11\u4e0d\u5fc5\u8981\u5d4c\u5957\u7684\u7ec4\u4ef6\u3002</p>\n<ul>\n<li><a href=\"/react/react-api#reactfragment\"><code class=\"language-javascript\">React.Fragment</code></a></li>\n</ul>\n<h3 id=\"refs\"><a class=\"anchor\" href=\"/react/react-api#refs\"></a>Refs </h3>\n<ul>\n<li><a href=\"/react/react-api#reactcreateref\"><code class=\"language-javascript\">React.createRef</code></a></li>\n<li><a href=\"/react/react-api#reactforwardref\"><code class=\"language-javascript\">React.forwardRef</code></a></li>\n</ul>\n<h3 id=\"suspense\"><a class=\"anchor\" href=\"/react/react-api#suspense\"></a>Suspense </h3>\n<p>Suspense \u4f7f\u5f97\u7ec4\u4ef6\u53ef\u4ee5\u201c\u7b49\u5f85\u201d\u67d0\u4e9b\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u518d\u8fdb\u884c\u6e32\u67d3\u3002\u76ee\u524d\uff0cSuspense \u4ec5\u652f\u6301\u7684\u4f7f\u7528\u573a\u666f\u662f\uff1a<a href=\"/react/code-splitting#reactlazy\">\u901a\u8fc7 <code class=\"language-javascript\">React.lazy</code> \u52a8\u6001\u52a0\u8f7d\u7ec4\u4ef6</a>\u3002\u5b83\u5c06\u5728\u672a\u6765\u652f\u6301\u5176\u5b83\u4f7f\u7528\u573a\u666f\uff0c\u5982\u6570\u636e\u83b7\u53d6\u7b49\u3002</p>\n<ul>\n<li><a href=\"/react/react-api#reactlazy\"><code class=\"language-javascript\">React.lazy</code></a></li>\n<li><a href=\"/react/react-api#reactsuspense\"><code class=\"language-javascript\">React.Suspense</code></a></li>\n</ul>\n<h3 id=\"transitions\"><a class=\"anchor\" href=\"/react/react-api#transitions\"></a>Transitions </h3>\n<p><em>Transitions</em> \u662f React 18 \u5f15\u5165\u7684\u4e00\u4e2a\u5168\u65b0\u7684\u5e76\u53d1\u7279\u6027\u3002\u5b83\u5141\u8bb8\u4f60\u5c06\u6807\u8bb0\u66f4\u65b0\u4f5c\u4e3a\u4e00\u4e2a transitions\uff0c\u8fd9\u4f1a\u544a\u8bc9 React \u5b83\u4eec\u53ef\u4ee5\u88ab\u4e2d\u65ad\u6267\u884c\uff0c\u5e76\u907f\u514d\u56de\u5230\u5df2\u7ecf\u53ef\u89c1\u5185\u5bb9\u7684 Suspense \u964d\u7ea7\u65b9\u6848\u3002</p>\n<ul>\n<li><a href=\"/react/react-api#starttransition\"><code class=\"language-javascript\">React.startTransition</code></a></li>\n<li><a href=\"/react/hooks-reference#usetransition\"><code class=\"language-javascript\">React.useTransition</code></a></li>\n</ul>\n<h3 id=\"hooks\"><a class=\"anchor\" href=\"/react/react-api#hooks\"></a>Hooks </h3>\n<p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002Hook \u62e5\u6709<a href=\"/react/hooks-intro\">\u4e13\u5c5e\u6587\u6863\u7ae0\u8282</a>\u548c\u5355\u72ec\u7684 API \u53c2\u8003\u6587\u6863\uff1a</p>\n<ul>\n<li>\n<p><a href=\"/react/hooks-reference#basic-hooks\">\u57fa\u7840 Hook</a></p>\n<ul>\n<li><a href=\"/react/hooks-reference#usestate\"><code class=\"language-javascript\">useState</code></a></li>\n<li><a href=\"/react/hooks-reference#useeffect\"><code class=\"language-javascript\">useEffect</code></a></li>\n<li><a href=\"/react/hooks-reference#usecontext\"><code class=\"language-javascript\">useContext</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/react/hooks-reference#additional-hooks\">\u989d\u5916\u7684 Hook</a></p>\n<ul>\n<li><a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code></a></li>\n<li><a href=\"/react/hooks-reference#usecallback\"><code class=\"language-javascript\">useCallback</code></a></li>\n<li><a href=\"/react/hooks-reference#usememo\"><code class=\"language-javascript\">useMemo</code></a></li>\n<li><a href=\"/react/hooks-reference#useref\"><code class=\"language-javascript\">useRef</code></a></li>\n<li><a href=\"/react/hooks-reference#useimperativehandle\"><code class=\"language-javascript\">useImperativeHandle</code></a></li>\n<li><a href=\"/react/hooks-reference#uselayouteffect\"><code class=\"language-javascript\">useLayoutEffect</code></a></li>\n<li><a href=\"/react/hooks-reference#usedebugvalue\"><code class=\"language-javascript\">useDebugValue</code></a></li>\n<li><a href=\"/react/hooks-reference#usedeferredvalue\"><code class=\"language-javascript\">useDeferredValue</code></a></li>\n<li><a href=\"/react/hooks-reference#usetransition\"><code class=\"language-javascript\">useTransition</code></a></li>\n<li><a href=\"/react/hooks-reference#useid\"><code class=\"language-javascript\">useId</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/react/hooks-reference#library-hooks\">Library Hooks</a></p>\n<ul>\n<li><a href=\"/react/hooks-reference#usesyncexternalstore\"><code class=\"language-javascript\">useSyncExternalStore</code></a></li>\n<li><a href=\"/react/hooks-reference#useinsertioneffect\"><code class=\"language-javascript\">useInsertionEffect</code></a></li>\n</ul>\n</li>\n</ul>\n\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/react-api#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"reactcomponent\"><a class=\"anchor\" href=\"/react/react-api#reactcomponent\"></a><code class=\"language-javascript\">React.Component</code> </h3>\n<p><code class=\"language-javascript\">React.Component</code> \u662f\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes\">ES6 classes</a> \u65b9\u5f0f\u5b9a\u4e49 React \u7ec4\u4ef6\u7684\u57fa\u7c7b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeting</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8bf7\u53c2\u9605 <a href=\"/react/react-component\">React.Component API \u53c2\u8003</a>\uff0c\u83b7\u53d6\u4e0e\u57fa\u7c7b <code class=\"language-javascript\">React.Component</code> \u76f8\u5173\u65b9\u6cd5\u548c\u5c5e\u6027\u7684\u8be6\u7ec6\u5217\u8868\u3002</p>\n\n<h3 id=\"reactpurecomponent\"><a class=\"anchor\" href=\"/react/react-api#reactpurecomponent\"></a><code class=\"language-javascript\">React.PureComponent</code> </h3>\n<p><code class=\"language-javascript\">React.PureComponent</code> \u4e0e <a href=\"/react/react-api#reactcomponent\"><code class=\"language-javascript\">React.Component</code></a> \u5f88\u76f8\u4f3c\u3002\u4e24\u8005\u7684\u533a\u522b\u5728\u4e8e <a href=\"/react/react-api#reactcomponent\"><code class=\"language-javascript\">React.Component</code></a> \u5e76\u672a\u5b9e\u73b0 <a href=\"/react/react-component#shouldcomponentupdate\"><code class=\"language-javascript\">shouldComponentUpdate()</code></a>\uff0c\u800c <code class=\"language-javascript\">React.PureComponent</code> \u4e2d\u4ee5\u6d45\u5c42\u5bf9\u6bd4 prop \u548c state \u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u4e86\u8be5\u51fd\u6570\u3002</p>\n<p>\u5982\u679c\u8d4b\u4e88 React \u7ec4\u4ef6\u76f8\u540c\u7684 props \u548c state\uff0c<code class=\"language-javascript\">render()</code> \u51fd\u6570\u4f1a\u6e32\u67d3\u76f8\u540c\u7684\u5185\u5bb9\uff0c\u90a3\u4e48\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f7f\u7528 <code class=\"language-javascript\">React.PureComponent</code> \u53ef\u63d0\u9ad8\u6027\u80fd\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p><code class=\"language-javascript\">React.PureComponent</code> \u4e2d\u7684 <code class=\"language-javascript\">shouldComponentUpdate()</code> \u4ec5\u4f5c\u5bf9\u8c61\u7684\u6d45\u5c42\u6bd4\u8f83\u3002\u5982\u679c\u5bf9\u8c61\u4e2d\u5305\u542b\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5219\u6709\u53ef\u80fd\u56e0\u4e3a\u65e0\u6cd5\u68c0\u67e5\u6df1\u5c42\u7684\u5dee\u522b\uff0c\u4ea7\u751f\u9519\u8bef\u7684\u6bd4\u5bf9\u7ed3\u679c\u3002\u4ec5\u5728\u4f60\u7684 props \u548c state \u8f83\u4e3a\u7b80\u5355\u65f6\uff0c\u624d\u4f7f\u7528 <code class=\"language-javascript\">React.PureComponent</code>\uff0c\u6216\u8005\u5728\u6df1\u5c42\u6570\u636e\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u65f6\u8c03\u7528 <a href=\"/react/react-component#forceupdate\"><code class=\"language-javascript\">forceUpdate()</code></a> \u6765\u786e\u4fdd\u7ec4\u4ef6\u88ab\u6b63\u786e\u5730\u66f4\u65b0\u3002\u4f60\u4e5f\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 <a class=\"external-link\" href=\"https://immutable-js.com/\">immutable \u5bf9\u8c61</a>\u52a0\u901f\u5d4c\u5957\u6570\u636e\u7684\u6bd4\u8f83\u3002</p>\n<p>\u6b64\u5916\uff0c<code class=\"language-javascript\">React.PureComponent</code> \u4e2d\u7684 <code class=\"language-javascript\">shouldComponentUpdate()</code> \u5c06\u8df3\u8fc7\u6240\u6709\u5b50\u7ec4\u4ef6\u6811\u7684 prop \u66f4\u65b0\u3002\u56e0\u6b64\uff0c\u8bf7\u786e\u4fdd\u6240\u6709\u5b50\u7ec4\u4ef6\u4e5f\u90fd\u662f\u201c\u7eaf\u201d\u7684\u7ec4\u4ef6\u3002</p>\n</div>\n\n<h3 id=\"reactmemo\"><a class=\"anchor\" href=\"/react/react-api#reactmemo\"></a><code class=\"language-javascript\">React.memo</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* \u4f7f\u7528 props \u6e32\u67d3 */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">React.memo</code> \u4e3a<a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a>\u3002</p>\n<p>\u5982\u679c\u4f60\u7684\u7ec4\u4ef6\u5728\u76f8\u540c props \u7684\u60c5\u51b5\u4e0b\u6e32\u67d3\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u5176\u5305\u88c5\u5728 <code class=\"language-javascript\">React.memo</code> \u4e2d\u8c03\u7528\uff0c\u4ee5\u6b64\u901a\u8fc7\u8bb0\u5fc6\u7ec4\u4ef6\u6e32\u67d3\u7ed3\u679c\u7684\u65b9\u5f0f\u6765\u63d0\u9ad8\u7ec4\u4ef6\u7684\u6027\u80fd\u8868\u73b0\u3002\u8fd9\u610f\u5473\u7740\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cReact \u5c06\u8df3\u8fc7\u6e32\u67d3\u7ec4\u4ef6\u7684\u64cd\u4f5c\u5e76\u76f4\u63a5\u590d\u7528\u6700\u8fd1\u4e00\u6b21\u6e32\u67d3\u7684\u7ed3\u679c\u3002</p>\n<p><code class=\"language-javascript\">React.memo</code> \u4ec5\u68c0\u67e5 props \u53d8\u66f4\u3002\u5982\u679c\u51fd\u6570\u7ec4\u4ef6\u88ab <code class=\"language-javascript\">React.memo</code> \u5305\u88f9\uff0c\u4e14\u5176\u5b9e\u73b0\u4e2d\u62e5\u6709 <a href=\"/react/hooks-state\"><code class=\"language-javascript\">useState</code></a>\uff0c<a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code></a> \u6216 <a href=\"/react/hooks-reference#usecontext\"><code class=\"language-javascript\">useContext</code></a> \u7684 Hook\uff0c\u5f53 state \u6216 context \u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5b83\u4ecd\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5176\u53ea\u4f1a\u5bf9\u590d\u6742\u5bf9\u8c61\u505a\u6d45\u5c42\u5bf9\u6bd4\uff0c\u5982\u679c\u4f60\u60f3\u8981\u63a7\u5236\u5bf9\u6bd4\u8fc7\u7a0b\uff0c\u90a3\u4e48\u8bf7\u5c06\u81ea\u5b9a\u4e49\u7684\u6bd4\u8f83\u51fd\u6570\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u5165\u6765\u5b9e\u73b0\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* \u4f7f\u7528 props \u6e32\u67d3 */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">areEqual</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> nextProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/*\n  \u5982\u679c\u628a nextProps \u4f20\u5165 render \u65b9\u6cd5\u7684\u8fd4\u56de\u7ed3\u679c\u4e0e\n  \u5c06 prevProps \u4f20\u5165 render \u65b9\u6cd5\u7684\u8fd4\u56de\u7ed3\u679c\u4e00\u81f4\u5219\u8fd4\u56de true\uff0c\n  \u5426\u5219\u8fd4\u56de false\n  */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>MyComponent<span class=\"token punctuation\">,</span> areEqual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6b64\u65b9\u6cd5\u4ec5\u4f5c\u4e3a<strong><a href=\"/react/optimizing-performance\">\u6027\u80fd\u4f18\u5316</a></strong>\u7684\u65b9\u5f0f\u800c\u5b58\u5728\u3002\u4f46\u8bf7\u4e0d\u8981\u4f9d\u8d56\u5b83\u6765\u201c\u963b\u6b62\u201d\u6e32\u67d3\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u4ea7\u751f bug\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4e0e class \u7ec4\u4ef6\u4e2d <a href=\"/react/react-component#shouldcomponentupdate\"><code class=\"language-javascript\">shouldComponentUpdate()</code></a> \u65b9\u6cd5\u4e0d\u540c\u7684\u662f\uff0c\u5982\u679c props \u76f8\u7b49\uff0c<code class=\"language-javascript\">areEqual</code> \u4f1a\u8fd4\u56de <code class=\"language-javascript\">true</code>\uff1b\u5982\u679c props \u4e0d\u76f8\u7b49\uff0c\u5219\u8fd4\u56de <code class=\"language-javascript\">false</code>\u3002\u8fd9\u4e0e <code class=\"language-javascript\">shouldComponentUpdate</code> \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u76f8\u53cd\u3002</p>\n</div>\n\n<h3 id=\"createelement\"><a class=\"anchor\" href=\"/react/react-api#createelement\"></a><code class=\"language-javascript\">createElement()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n  type<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>children<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u521b\u5efa\u5e76\u8fd4\u56de\u6307\u5b9a\u7c7b\u578b\u7684\u65b0 <a href=\"/react/rendering-elements\">React \u5143\u7d20</a>\u3002\u5176\u4e2d\u7684\u7c7b\u578b\u53c2\u6570\u65e2\u53ef\u4ee5\u662f\u6807\u7b7e\u540d\u5b57\u7b26\u4e32\uff08\u5982 <code class=\"language-javascript\">'div'</code> \u6216 <code class=\"language-javascript\">'span'</code>\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f <a href=\"/react/components-and-props\">React \u7ec4\u4ef6</a> \u7c7b\u578b \uff08class \u7ec4\u4ef6\u6216\u51fd\u6570\u7ec4\u4ef6\uff09\uff0c\u6216\u662f <a href=\"/react/react-api#reactfragment\">React fragment</a> \u7c7b\u578b\u3002</p>\n<p>\u4f7f\u7528 <a href=\"/react/introducing-jsx\">JSX</a> \u7f16\u5199\u7684\u4ee3\u7801\u5c06\u4f1a\u88ab\u8f6c\u6362\u6210\u4f7f\u7528 <code class=\"language-javascript\">React.createElement()</code> \u7684\u5f62\u5f0f\u3002\u5982\u679c\u4f7f\u7528\u4e86 JSX \u65b9\u5f0f\uff0c\u90a3\u4e48\u4e00\u822c\u6765\u8bf4\u5c31\u4e0d\u9700\u8981\u76f4\u63a5\u8c03\u7528 <code class=\"language-javascript\">React.createElement()</code>\u3002\u8bf7\u67e5\u9605<a href=\"/react/react-without-jsx\">\u4e0d\u4f7f\u7528 JSX</a> \u7ae0\u8282\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u3002</p>\n\n<h3 id=\"cloneelement\"><a class=\"anchor\" href=\"/react/react-api#cloneelement\"></a><code class=\"language-javascript\">cloneElement()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">React.cloneElement(\n  element,\n  [config],\n  [...children]\n)</code></pre></div>\n<p>\u4ee5 <code class=\"language-javascript\">element</code> \u5143\u7d20\u4e3a\u6837\u677f\u514b\u9686\u5e76\u8fd4\u56de\u65b0\u7684 React \u5143\u7d20\u3002<code class=\"language-javascript\">config</code> \u4e2d\u5e94\u5305\u542b\u65b0\u7684 props\uff0c<code class=\"language-javascript\">key</code> \u6216 <code class=\"language-javascript\">ref</code>\u3002\u8fd4\u56de\u5143\u7d20\u7684 props \u662f\u5c06\u65b0\u7684 props \u4e0e\u539f\u59cb\u5143\u7d20\u7684 props \u6d45\u5c42\u5408\u5e76\u540e\u7684\u7ed3\u679c\u3002\u65b0\u7684\u5b50\u5143\u7d20\u5c06\u53d6\u4ee3\u73b0\u6709\u7684\u5b50\u5143\u7d20\uff0c\u5982\u679c\u5728 <code class=\"language-javascript\">config</code> \u4e2d\u672a\u51fa\u73b0 <code class=\"language-javascript\">key</code> \u6216 <code class=\"language-javascript\">ref</code>\uff0c\u90a3\u4e48\u539f\u59cb\u5143\u7d20\u7684 <code class=\"language-javascript\">key</code> \u548c <code class=\"language-javascript\">ref</code> \u5c06\u88ab\u4fdd\u7559\u3002</p>\n<p><code class=\"language-javascript\">React.cloneElement()</code> \u51e0\u4e4e\u7b49\u540c\u4e8e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>element.type</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>element.type</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4f46\u662f\uff0c\u8fd9\u4e5f\u4fdd\u7559\u4e86\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">ref</code>\u3002\u8fd9\u610f\u5473\u7740\u5f53\u901a\u8fc7 <code class=\"language-javascript\">ref</code> \u83b7\u53d6\u5b50\u8282\u70b9\u65f6\uff0c\u4f60\u5c06\u4e0d\u4f1a\u610f\u5916\u5730\u4ece\u4f60\u7956\u5148\u8282\u70b9\u4e0a\u7a83\u53d6\u5b83\u3002\u76f8\u540c\u7684 <code class=\"language-javascript\">ref</code> \u5c06\u6dfb\u52a0\u5230\u514b\u9686\u540e\u7684\u65b0\u5143\u7d20\u4e2d\u3002\u5982\u679c\u5b58\u5728\u65b0\u7684 <code class=\"language-javascript\">ref</code> \u6216 <code class=\"language-javascript\">key</code> \u5c06\u8986\u76d6\u4e4b\u524d\u7684\u3002</p>\n<p>\u5f15\u5165\u6b64 API \u662f\u4e3a\u4e86\u66ff\u6362\u5df2\u5f03\u7528\u7684 <code class=\"language-javascript\">React.addons.cloneWithProps()</code>\u3002</p>\n\n<h3 id=\"createfactory\"><a class=\"anchor\" href=\"/react/react-api#createfactory\"></a><code class=\"language-javascript\">createFactory()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span><span class=\"token function\">createFactory</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u8fd4\u56de\u7528\u4e8e\u751f\u6210\u6307\u5b9a\u7c7b\u578b React \u5143\u7d20\u7684\u51fd\u6570\u3002\u4e0e <a href=\"/react/react-api#createelement\"><code class=\"language-javascript\">React.createElement()</code></a> \u76f8\u4f3c\u7684\u662f\uff0c\u7c7b\u578b\u53c2\u6570\u65e2\u53ef\u4ee5\u662f\u6807\u7b7e\u540d\u5b57\u7b26\u4e32\uff08\u50cf\u662f <code class=\"language-javascript\">'div'</code> \u6216 <code class=\"language-javascript\">'span'</code>\uff09\uff0c\u4e5f\u53ef\u4ee5\u662f <a href=\"/react/components-and-props\">React \u7ec4\u4ef6</a> \u7c7b\u578b \uff08class \u7ec4\u4ef6\u6216\u51fd\u6570\u7ec4\u4ef6\uff09\uff0c\u6216\u662f <a href=\"/react/react-api#reactfragment\">React fragment</a> \u7c7b\u578b\u3002</p>\n<p>\u6b64\u8f85\u52a9\u51fd\u6570\u5df2\u5e9f\u5f03\uff0c\u5efa\u8bae\u4f7f\u7528 JSX \u6216\u76f4\u63a5\u8c03\u7528 <code class=\"language-javascript\">React.createElement()</code> \u6765\u66ff\u4ee3\u5b83\u3002</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 JSX\uff0c\u901a\u5e38\u4e0d\u4f1a\u76f4\u63a5\u8c03\u7528 <code class=\"language-javascript\">React.createFactory()</code>\u3002\u8bf7\u53c2\u9605<a href=\"/react/react-without-jsx\">\u4e0d\u4f7f\u7528 JSX</a> \u4ee5\u83b7\u5f97\u66f4\u591a\u4fe1\u606f\u3002</p>\n\n<h3 id=\"isvalidelement\"><a class=\"anchor\" href=\"/react/react-api#isvalidelement\"></a><code class=\"language-javascript\">isValidElement()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span><span class=\"token function\">isValidElement</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u9a8c\u8bc1\u5bf9\u8c61\u662f\u5426\u4e3a React \u5143\u7d20\uff0c\u8fd4\u56de\u503c\u4e3a <code class=\"language-javascript\">true</code> \u6216 <code class=\"language-javascript\">false</code>\u3002</p>\n\n<h3 id=\"reactchildren\"><a class=\"anchor\" href=\"/react/react-api#reactchildren\"></a><code class=\"language-javascript\">React.Children</code> </h3>\n<p><code class=\"language-javascript\">React.Children</code> \u63d0\u4f9b\u4e86\u7528\u4e8e\u5904\u7406 <code class=\"language-javascript\">this.props.children</code> \u4e0d\u900f\u660e\u6570\u636e\u7ed3\u6784\u7684\u5b9e\u7528\u65b9\u6cd5\u3002</p>\n<h4 id=\"reactchildrenmap\"><a class=\"anchor\" href=\"/react/react-api#reactchildrenmap\"></a><code class=\"language-javascript\">React.Children.map</code> </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>thisArg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5728 <code class=\"language-javascript\">children</code> \u91cc\u7684\u6bcf\u4e2a\u76f4\u63a5\u5b50\u8282\u70b9\u4e0a\u8c03\u7528\u4e00\u4e2a\u51fd\u6570\uff0c\u5e76\u5c06 <code class=\"language-javascript\">this</code> \u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">thisArg</code>\u3002\u5982\u679c <code class=\"language-javascript\">children</code> \u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u5b83\u5c06\u88ab\u904d\u5386\u5e76\u4e3a\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5b50\u8282\u70b9\u8c03\u7528\u8be5\u51fd\u6570\u3002\u5982\u679c\u5b50\u8282\u70b9\u4e3a <code class=\"language-javascript\">null</code> \u6216\u662f <code class=\"language-javascript\">undefined</code>\uff0c\u5219\u6b64\u65b9\u6cd5\u5c06\u8fd4\u56de <code class=\"language-javascript\">null</code> \u6216\u662f <code class=\"language-javascript\">undefined</code>\uff0c\u800c\u4e0d\u4f1a\u8fd4\u56de\u6570\u7ec4\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c <code class=\"language-javascript\">children</code> \u662f\u4e00\u4e2a <code class=\"language-javascript\">Fragment</code> \u5bf9\u8c61\uff0c\u5b83\u5c06\u88ab\u89c6\u4e3a\u5355\u4e00\u5b50\u8282\u70b9\u7684\u60c5\u51b5\u5904\u7406\uff0c\u800c\u4e0d\u4f1a\u88ab\u904d\u5386\u3002</p>\n</div>\n<h4 id=\"reactchildrenforeach\"><a class=\"anchor\" href=\"/react/react-api#reactchildrenforeach\"></a><code class=\"language-javascript\">React.Children.forEach</code> </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>thisArg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u4e0e <a href=\"/react/react-api#reactchildrenmap\"><code class=\"language-javascript\">React.Children.map()</code></a> \u7c7b\u4f3c\uff0c\u4f46\u5b83\u4e0d\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4\u3002</p>\n<h4 id=\"reactchildrencount\"><a class=\"anchor\" href=\"/react/react-api#reactchildrencount\"></a><code class=\"language-javascript\">React.Children.count</code> </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u8fd4\u56de <code class=\"language-javascript\">children</code> \u4e2d\u7684\u7ec4\u4ef6\u603b\u6570\u91cf\uff0c\u7b49\u540c\u4e8e\u901a\u8fc7 <code class=\"language-javascript\">map</code> \u6216 <code class=\"language-javascript\">forEach</code> \u8c03\u7528\u56de\u8c03\u51fd\u6570\u7684\u6b21\u6570\u3002</p>\n<h4 id=\"reactchildrenonly\"><a class=\"anchor\" href=\"/react/react-api#reactchildrenonly\"></a><code class=\"language-javascript\">React.Children.only</code> </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">only</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u9a8c\u8bc1 <code class=\"language-javascript\">children</code> \u662f\u5426\u53ea\u6709\u4e00\u4e2a\u5b50\u8282\u70b9\uff08\u4e00\u4e2a React \u5143\u7d20\uff09\uff0c\u5982\u679c\u6709\u5219\u8fd4\u56de\u5b83\uff0c\u5426\u5219\u6b64\u65b9\u6cd5\u4f1a\u629b\u51fa\u9519\u8bef\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">React.Children.only()</code> \u4e0d\u63a5\u53d7 <a href=\"/react/react-api#reactchildrenmap\"><code class=\"language-javascript\">React.Children.map()</code></a> \u7684\u8fd4\u56de\u503c\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u6570\u7ec4\u800c\u5e76\u4e0d\u662f React \u5143\u7d20\u3002</p>\n</div>\n<h4 id=\"reactchildrentoarray\"><a class=\"anchor\" href=\"/react/react-api#reactchildrentoarray\"></a><code class=\"language-javascript\">React.Children.toArray</code> </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">toArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5c06 <code class=\"language-javascript\">children</code> \u8fd9\u4e2a\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\u4ee5\u6570\u7ec4\u7684\u65b9\u5f0f\u6241\u5e73\u5c55\u5f00\u5e76\u8fd4\u56de\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5b50\u8282\u70b9\u5206\u914d\u4e00\u4e2a key\u3002\u5f53\u4f60\u60f3\u8981\u5728\u6e32\u67d3\u51fd\u6570\u4e2d\u64cd\u4f5c\u5b50\u8282\u70b9\u7684\u96c6\u5408\u65f6\uff0c\u5b83\u4f1a\u975e\u5e38\u5b9e\u7528\uff0c\u7279\u522b\u662f\u5f53\u4f60\u60f3\u8981\u5728\u5411\u4e0b\u4f20\u9012 <code class=\"language-javascript\">this.props.children</code> \u4e4b\u524d\u5bf9\u5185\u5bb9\u91cd\u65b0\u6392\u5e8f\u6216\u83b7\u53d6\u5b50\u96c6\u65f6\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">React.Children.toArray()</code> \u5728\u62c9\u5e73\u5c55\u5f00\u5b50\u8282\u70b9\u5217\u8868\u65f6\uff0c\u66f4\u6539 key \u503c\u4ee5\u4fdd\u7559\u5d4c\u5957\u6570\u7ec4\u7684\u8bed\u4e49\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c<code class=\"language-javascript\">toArray</code> \u4f1a\u4e3a\u8fd4\u56de\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a key \u6dfb\u52a0\u524d\u7f00\uff0c\u4ee5\u4f7f\u5f97\u6bcf\u4e2a\u5143\u7d20 key \u7684\u8303\u56f4\u90fd\u9650\u5b9a\u5728\u6b64\u51fd\u6570\u5165\u53c2\u6570\u7ec4\u7684\u5bf9\u8c61\u5185\u3002</p>\n</div>\n\n<h3 id=\"reactfragment\"><a class=\"anchor\" href=\"/react/react-api#reactfragment\"></a><code class=\"language-javascript\">React.Fragment</code> </h3>\n<p><code class=\"language-javascript\">React.Fragment</code> \u7ec4\u4ef6\u80fd\u591f\u5728\u4e0d\u989d\u5916\u521b\u5efa DOM \u5143\u7d20\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba9 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4e2d\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      Some text.\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">A heading</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u7b80\u5199\u8bed\u6cd5 <code class=\"language-javascript\">&lt;&gt;&lt;/&gt;</code>\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u76f8\u5173\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2017/11/28/react-v16.2.0-fragment-support.html\">React v16.2.0: Fragments \u652f\u6301\u6539\u8fdb</a>\u3002</p>\n<h3 id=\"reactcreateref\"><a class=\"anchor\" href=\"/react/react-api#reactcreateref\"></a><code class=\"language-javascript\">React.createRef</code> </h3>\n<p><code class=\"language-javascript\">React.createRef</code> \u521b\u5efa\u4e00\u4e2a\u80fd\u591f\u901a\u8fc7 ref \u5c5e\u6027\u9644\u52a0\u5230 React \u5143\u7d20\u7684 <a href=\"/react/refs-and-the-dom\">ref</a>\u3002\n<div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<h3 id=\"reactforwardref\"><a class=\"anchor\" href=\"/react/react-api#reactforwardref\"></a><code class=\"language-javascript\">React.forwardRef</code> </h3>\n<p><code class=\"language-javascript\">React.forwardRef</code> \u4f1a\u521b\u5efa\u4e00\u4e2aReact\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u7ec4\u4ef6\u80fd\u591f\u5c06\u5176\u63a5\u53d7\u7684 <a href=\"/react/refs-and-the-dom\">ref</a> \u5c5e\u6027\u8f6c\u53d1\u5230\u5176\u7ec4\u4ef6\u6811\u4e0b\u7684\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u3002\u8fd9\u79cd\u6280\u672f\u5e76\u4e0d\u5e38\u89c1\uff0c\u4f46\u5728\u4ee5\u4e0b\u4e24\u79cd\u573a\u666f\u4e2d\u7279\u522b\u6709\u7528\uff1a</p>\n<ul>\n<li><a href=\"/react/forwarding-refs#forwarding-refs-to-dom-components\">\u8f6c\u53d1 refs \u5230 DOM \u7ec4\u4ef6</a></li>\n<li><a href=\"/react/forwarding-refs#forwarding-refs-in-higher-order-components\">\u5728\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u8f6c\u53d1 refs</a></li>\n</ul>\n<p><code class=\"language-javascript\">React.forwardRef</code> \u63a5\u53d7\u6e32\u67d3\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\u3002React \u5c06\u4f7f\u7528 <code class=\"language-javascript\">props</code> \u548c <code class=\"language-javascript\">ref</code> \u4f5c\u4e3a\u53c2\u6570\u6765\u8c03\u7528\u6b64\u51fd\u6570\u3002\u6b64\u51fd\u6570\u5e94\u8fd4\u56de React \u8282\u70b9\u3002</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> FancyButton <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FancyButton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// You can now get a ref directly to the DOM button:</span>\n<span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyButton</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click me!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">FancyButton</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre>\n</div></p>\n<p>\u5728\u4e0a\u8ff0\u7684\u793a\u4f8b\u4e2d\uff0cReact \u4f1a\u5c06 <code class=\"language-javascript\">&lt;FancyButton ref={ref}&gt;</code> \u5143\u7d20\u7684 <code class=\"language-javascript\">ref</code> \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9 <code class=\"language-javascript\">React.forwardRef</code> \u51fd\u6570\u4e2d\u7684\u6e32\u67d3\u51fd\u6570\u3002\u8be5\u6e32\u67d3\u51fd\u6570\u4f1a\u5c06 <code class=\"language-javascript\">ref</code> \u4f20\u9012\u7ed9 <code class=\"language-javascript\">&lt;button ref={ref}&gt;</code> \u5143\u7d20\u3002</p>\n<p>\u56e0\u6b64\uff0c\u5f53 React \u9644\u52a0\u4e86 ref \u5c5e\u6027\u4e4b\u540e\uff0c<code class=\"language-javascript\">ref.current</code> \u5c06\u76f4\u63a5\u6307\u5411 <code class=\"language-javascript\">&lt;button&gt;</code> DOM \u5143\u7d20\u5b9e\u4f8b\u3002</p>\n<p>\u6b32\u4e86\u89e3\u66f4\u591a\u76f8\u5173\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a href=\"/react/forwarding-refs\">refs \u8f6c\u53d1</a>\u3002</p>\n<h3 id=\"reactlazy\"><a class=\"anchor\" href=\"/react/react-api#reactlazy\"></a><code class=\"language-javascript\">React.lazy</code> </h3>\n<p><code class=\"language-javascript\">React.lazy()</code> \u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u4e2a\u52a8\u6001\u52a0\u8f7d\u7684\u7ec4\u4ef6\u3002\u8fd9\u6709\u52a9\u4e8e\u7f29\u51cf bundle \u7684\u4f53\u79ef\uff0c\u5e76\u5ef6\u8fdf\u52a0\u8f7d\u5728\u521d\u6b21\u6e32\u67d3\u65f6\u672a\u7528\u5230\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728<a href=\"/react/code-splitting#reactlazy\">\u4ee3\u7801\u5206\u5272\u6587\u6863</a>\u4e2d\u5b66\u4e60\u5982\u4f55\u4f7f\u7528\u5b83\u3002\u67e5\u9605<a class=\"external-link\" href=\"https://medium.com/@pomber/lazy-loading-and-preloading-components-in-react-16-6-804de091c82d\">\u6b64\u6587\u7ae0</a>\u53ef\u4ee5\u4e86\u89e3\u66f4\u591a\u7528\u6cd5\u7ec6\u8282\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u8fd9\u4e2a\u7ec4\u4ef6\u662f\u52a8\u6001\u52a0\u8f7d\u7684</span>\n<span class=\"token keyword\">const</span> SomeComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./SomeComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8bf7\u6ce8\u610f\uff0c\u6e32\u67d3 <code class=\"language-javascript\">lazy</code> \u7ec4\u4ef6\u4f9d\u8d56\u8be5\u7ec4\u4ef6\u6e32\u67d3\u6811\u4e0a\u5c42\u7684 <code class=\"language-javascript\">&lt;React.Suspense&gt;</code> \u7ec4\u4ef6\u3002\u8fd9\u662f\u6307\u5b9a\u52a0\u8f7d\u6307\u793a\u5668\uff08loading indicator\uff09\u7684\u65b9\u5f0f\u3002</p>\n<h3 id=\"reactsuspense\"><a class=\"anchor\" href=\"/react/react-api#reactsuspense\"></a><code class=\"language-javascript\">React.Suspense</code> </h3>\n<p><code class=\"language-javascript\">React.Suspense</code> \u53ef\u4ee5\u6307\u5b9a\u52a0\u8f7d\u6307\u793a\u5668\uff08loading indicator\uff09\uff0c\u4ee5\u9632\u5176\u7ec4\u4ef6\u6811\u4e2d\u7684\u67d0\u4e9b\u5b50\u7ec4\u4ef6\u5c1a\u672a\u5177\u5907\u6e32\u67d3\u6761\u4ef6\u3002\u5728\u672a\u6765\uff0c\u6211\u4eec\u8ba1\u5212\u8ba9 <code class=\"language-javascript\">Suspense</code> \u5904\u7406\u66f4\u591a\u7684\u573a\u666f\uff0c\u5982\u6570\u636e\u83b7\u53d6\u7b49\u3002\u4f60\u53ef\u4ee5\u5728 <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/11/27/react-16-roadmap.html\">\u6211\u4eec\u7684\u8def\u7ebf\u56fe</a> \u4e86\u89e3\u8fd9\u4e00\u70b9\u3002</p>\n<p>\u5982\u4eca\uff0c\u61d2\u52a0\u8f7d\u7ec4\u4ef6\u662f <code class=\"language-javascript\">&lt;React.Suspense&gt;</code> \u652f\u6301\u7684\u552f\u4e00\u7528\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u8be5\u7ec4\u4ef6\u662f\u52a8\u6001\u52a0\u8f7d\u7684</span>\n<span class=\"token keyword\">const</span> OtherComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./OtherComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// \u663e\u793a &lt;Spinner&gt; \u7ec4\u4ef6\u76f4\u81f3 OtherComponent \u52a0\u8f7d\u5b8c\u6210</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Spinner</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OtherComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Suspense</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5b83\u5df2\u88ab\u6536\u5f55\u5728\u4e86\u6211\u4eec\u7684<a href=\"/react/code-splitting#reactlazy\">\u4ee3\u7801\u5206\u5272\u6307\u5357</a>\u4e2d\u3002\u8bf7\u6ce8\u610f\uff0c<code class=\"language-javascript\">lazy</code> \u7ec4\u4ef6\u53ef\u4ee5\u4f4d\u4e8e <code class=\"language-javascript\">Suspense</code> \u7ec4\u4ef6\u6811\u7684\u6df1\u5904\u2014\u2014\u5b83\u4e0d\u5fc5\u5305\u88c5\u6811\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5ef6\u8fdf\u52a0\u8f7d\u7ec4\u4ef6\u3002\u6700\u4f73\u5b9e\u8df5\u662f\u5c06 <code class=\"language-javascript\">&lt;Suspense&gt;</code> \u7f6e\u4e8e\u4f60\u60f3\u5c55\u793a\u52a0\u8f7d\u6307\u793a\u5668\uff08loading indicator\uff09\u7684\u4f4d\u7f6e\uff0c\u800c <code class=\"language-javascript\">lazy()</code> \u5219\u53ef\u88ab\u653e\u7f6e\u4e8e\u4efb\u4f55\u4f60\u60f3\u8981\u505a\u4ee3\u7801\u5206\u5272\u7684\u5730\u65b9\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5bf9\u4e8e\u5df2\u7ecf\u5c55\u793a\u7ed9\u7528\u6237\u7684\u5185\u5bb9\u6765\u8bf4\uff0c\u5728\u5207\u6362\u56de\u53bb\u65f6\uff0c\u5c55\u793a\u52a0\u8f7d\u6307\u793a\u5668\u53ef\u80fd\u4f1a\u8ba9\u4eba\u56f0\u60d1\u3002\u6709\u65f6\uff0c\u5728\u51c6\u5907\u65b0\u7684 UI \u65f6\uff0c\u5c55\u793a \u201c\u65e7\u201d \u7684 UI \u53ef\u80fd\u4f1a\u66f4\u52a0\u53cb\u597d\u3002\u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u65b0\u7684 transition API <a href=\"/react/react-api#starttransition\"><code class=\"language-javascript\">startTransition</code></a> \u548c <a href=\"/react/hooks-reference#usetransition\"><code class=\"language-javascript\">useTransition</code></a> \u6765\u5c06\u6807\u8bb0\u66f4\u65b0\u4e3a transitions\uff0c\u540c\u65f6\u907f\u514d\u610f\u5916\u7684\u515c\u5e95\u65b9\u6848\u3002</p>\n</div>\n<h4 id=\"reactsuspense-in-server-side-rendering\"><a class=\"anchor\" href=\"/react/react-api#reactsuspense-in-server-side-rendering\"></a>\u670d\u52a1\u7aef\u6e32\u67d3\u4e2d\u7684 <code class=\"language-javascript\">React.Suspense</code> </h4>\n<p>\u5728\u670d\u52a1\u7aef\u6e32\u67d3\u8fc7\u7a0b\u4e2d\uff0cSuspense \u8fb9\u754c\u5141\u8bb8\u4f60\u6302\u8d77\uff0c\u901a\u8fc7\u8f83\u5c0f\u7684\u5757\u6765\u5237\u65b0\u5e94\u7528\u7a0b\u5e8f\u3002\n\u5f53\u7ec4\u4ef6\u6302\u8d77\u65f6\uff0c\u6211\u4eec\u4f1a\u5b89\u6392\u4e00\u4e2a\u4f4e\u4f18\u5148\u7ea7\u7684\u4efb\u52a1\u6765\u6e32\u67d3\u6700\u8fd1\u7684 Suspense \u8fb9\u754c\u7684 fallback\u3002\u5982\u679c\u7ec4\u4ef6\u5728\u6211\u4eec\u5237\u65b0 fallback \u4e4b\u524d\u53d6\u6d88\u6302\u8d77\uff0c\u90a3\u4e48\u6211\u4eec\u4f1a\u53d1\u9001\u5b9e\u9645\u5185\u5bb9\u5e76\u4e22\u5f03 fallback\u3002</p>\n<h4 id=\"reactsuspense-during-hydration\"><a class=\"anchor\" href=\"/react/react-api#reactsuspense-during-hydration\"></a>hydrate \u8fc7\u7a0b\u4e2d\u7684 <code class=\"language-javascript\">React.Suspense</code> </h4>\n<p>Suspense \u8fb9\u754c\u4f9d\u8d56\u4e8e\u5b83\u4eec\u7684\u7236\u8fb9\u754c\uff0c\u5728\u5b83\u4eec\u53ef\u4ee5 hydrate \u524d\u88ab hydrate\uff0c\u4f46\u662f\u5b83\u4eec\u53ef\u4ee5\u72ec\u7acb\u4e8e\u5144\u5f1f\u8fb9\u754c\u8fdb\u884c hydrate\u3002\u8fb9\u754c hydrate \u524d\u53d1\u751f\u7684\u4e8b\u4ef6\u5c06\u5bfc\u81f4\u8fb9\u754c hydrate \u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u76f8\u90bb\u8fb9\u754c\u7684\u4f18\u5148\u7ea7\u3002\u5177\u4f53\u8bf7\u53c2\u9605<a class=\"external-link\" href=\"https://github.com/reactwg/react-18/discussions/130\">\u8ba8\u8bba</a>\u3002</p>\n<h3 id=\"starttransition\"><a class=\"anchor\" href=\"/react/react-api#starttransition\"></a><code class=\"language-javascript\">React.startTransition</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">React<span class=\"token punctuation\">.</span><span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">React.startTransition</code> \u8ba9\u4f60\u628a\u63d0\u4f9b\u7684 fallback \u91cc\u9762\u7684\u66f4\u65b0\u6807\u8bb0\u4e3a transitions\u3002\u8fd9\u4e2a\u65b9\u6cd5\u662f\u4e3a\u4e86\u5728 <a href=\"/react/hooks-reference#usetransition\"><code class=\"language-javascript\">React.useTransition</code></a> \u4e0d\u53ef\u7528\u65f6\u4f7f\u7528\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fc7\u6e21\u671f\u7684\u66f4\u65b0\u4f1a\u88ab\u66f4\u7d27\u6025\u7684\u66f4\u65b0\u53d6\u4ee3\uff0c\u5982\u70b9\u51fb\u64cd\u4f5c\u3002</p>\n<p>\u8fc7\u6e21\u671f\u7684\u66f4\u65b0\u4e0d\u4f1a\u663e\u793a\u91cd\u65b0\u6302\u8d77\u5185\u5bb9\u7684 fallback\uff0c\u5141\u8bb8\u7528\u6237\u5728\u6e32\u67d3\u66f4\u65b0\u65f6\u7ee7\u7eed\u8fdb\u884c\u4ea4\u4e92\u3002</p>\n<p><code class=\"language-javascript\">React.startTransition</code> \u4e0d\u63d0\u4f9b <code class=\"language-javascript\">isPending</code> \u7684\u6807\u5fd7\u3002\u8981\u8ddf\u8e2a\u8fc7\u6e21\u7684\u5f85\u5b9a\u72b6\u6001\uff0c\u8bf7\u53c2\u9605 <a href=\"/react/hooks-reference#usetransition\"><code class=\"language-javascript\">React.useTransition</code></a>\u3002</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-react.md\">Edit this page</a></p></div></article>", "path": "/react/react-api", "nav": ["/react/web-components", "/react/react-component"]}, {"key": "React.Component", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u672c\u7ae0\u8282\u63d0\u4f9b\u4e86 React class \u7ec4\u4ef6\u7684\u8be6\u7ec6 API \u53c2\u8003\u3002\u672c\u7ae0\u8282\u9ed8\u8ba4\u4f60\u5df2\u719f\u6089\u57fa\u672c\u7684 React \u6982\u5ff5\uff0c\u4f8b\u5982 <a href=\"/react/components-and-props\">\u7ec4\u4ef6 &amp; Props</a>\uff0c\u4ee5\u53ca <a href=\"/react/state-and-lifecycle\">State &amp; \u751f\u547d\u5468\u671f</a>\u7b49\u3002\u5982\u679c\u4f60\u8fd8\u672a\u719f\u6089\uff0c\u8bf7\u5148\u9605\u8bfb\u4e4b\u524d\u7ae0\u8282\u8fdb\u884c\u5b66\u4e60\u3002</p>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/react-component#overview\"></a>\u6982\u89c8 </h2>\n<p>React \u7684\u7ec4\u4ef6\u53ef\u4ee5\u5b9a\u4e49\u4e3a class \u6216\u51fd\u6570\u7684\u5f62\u5f0f\u3002class \u7ec4\u4ef6\u76ee\u524d\u63d0\u4f9b\u4e86\u66f4\u591a\u7684\u529f\u80fd\uff0c\u8fd9\u4e9b\u529f\u80fd\u5c06\u5728\u6b64\u7ae0\u8282\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u3002\u5982\u9700\u5b9a\u4e49 class \u7ec4\u4ef6\uff0c\u9700\u8981\u7ee7\u627f <code class=\"language-javascript\">React.Component</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Welcome</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728 <code class=\"language-javascript\">React.Component</code> \u7684\u5b50\u7c7b\u4e2d\u6709\u4e2a\u5fc5\u987b\u5b9a\u4e49\u7684 <a href=\"/react/react-component#render\"><code class=\"language-javascript\">render()</code></a> \u51fd\u6570\u3002\u672c\u7ae0\u8282\u4ecb\u7ecd\u5176\u4ed6\u65b9\u6cd5\u5747\u4e3a\u53ef\u9009\u3002</p>\n<p><strong>\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u4f60\u4e0d\u8981\u521b\u5efa\u81ea\u5df1\u7684\u7ec4\u4ef6\u57fa\u7c7b\u3002</strong> \u5728 React \u7ec4\u4ef6\u4e2d\uff0c<a href=\"/react/composition-vs-inheritance\">\u4ee3\u7801\u91cd\u7528\u7684\u4e3b\u8981\u65b9\u5f0f\u662f\u7ec4\u5408\u800c\u4e0d\u662f\u7ee7\u627f</a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>React \u5e76\u4e0d\u4f1a\u5f3a\u5236\u4f60\u4f7f\u7528 ES6 \u7684 class \u8bed\u6cd5\u3002\u5982\u679c\u4f60\u503e\u5411\u4e8e\u4e0d\u4f7f\u7528\u5b83\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">create-react-class</code> \u6a21\u5757\u6216\u7c7b\u4f3c\u7684\u81ea\u5b9a\u4e49\u62bd\u8c61\u6765\u4ee3\u66ff\u3002\u8bf7\u67e5\u9605<a href=\"/react/react-without-es6\">\u4e0d\u4f7f\u7528 ES6</a> \u4e86\u89e3\u66f4\u591a\u3002</p>\n</div>\n<h3 id=\"the-component-lifecycle\"><a class=\"anchor\" href=\"/react/react-component#the-component-lifecycle\"></a>\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f </h3>\n<p>\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u5305\u542b \u201c\u751f\u547d\u5468\u671f\u65b9\u6cd5\u201d\uff0c\u4f60\u53ef\u4ee5\u91cd\u5199\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u4ee5\u4fbf\u4e8e\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u7279\u5b9a\u7684\u9636\u6bb5\u6267\u884c\u8fd9\u4e9b\u65b9\u6cd5\u3002<strong>\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64<a class=\"external-link\" href=\"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\">\u751f\u547d\u5468\u671f\u56fe\u8c31</a>\u4f5c\u4e3a\u901f\u67e5\u8868</strong>\u3002\u5728\u4e0b\u8ff0\u5217\u8868\u4e2d\uff0c\u5e38\u7528\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4f1a\u88ab\u52a0\u7c97\u3002\u5176\u4f59\u751f\u547d\u5468\u671f\u51fd\u6570\u7684\u4f7f\u7528\u5219\u76f8\u5bf9\u7f55\u89c1\u3002</p>\n<h4 id=\"mounting\"><a class=\"anchor\" href=\"/react/react-component#mounting\"></a>\u6302\u8f7d </h4>\n<p>\u5f53\u7ec4\u4ef6\u5b9e\u4f8b\u88ab\u521b\u5efa\u5e76\u63d2\u5165 DOM \u4e2d\u65f6\uff0c\u5176\u751f\u547d\u5468\u671f\u8c03\u7528\u987a\u5e8f\u5982\u4e0b\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#constructor\"><strong><code class=\"language-javascript\">constructor()</code></strong></a></li>\n<li><a href=\"/react/react-component#static-getderivedstatefromprops\"><code class=\"language-javascript\">static getDerivedStateFromProps()</code></a></li>\n<li><a href=\"/react/react-component#render\"><strong><code class=\"language-javascript\">render()</code></strong></a></li>\n<li><a href=\"/react/react-component#componentdidmount\"><strong><code class=\"language-javascript\">componentDidMount()</code></strong></a></li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u4e0b\u8ff0\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5373\u5c06\u8fc7\u65f6\uff0c\u5728\u65b0\u4ee3\u7801\u4e2d\u5e94\u8be5<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/03/27/update-on-async-rendering.html\">\u907f\u514d\u4f7f\u7528\u5b83\u4eec</a>\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#unsafe_componentwillmount\"><code class=\"language-javascript\">UNSAFE_componentWillMount()</code></a></li>\n</ul>\n</div>\n<h4 id=\"updating\"><a class=\"anchor\" href=\"/react/react-component#updating\"></a>\u66f4\u65b0 </h4>\n<p>\u5f53\u7ec4\u4ef6\u7684 props \u6216 state \u53d1\u751f\u53d8\u5316\u65f6\u4f1a\u89e6\u53d1\u66f4\u65b0\u3002\u7ec4\u4ef6\u66f4\u65b0\u7684\u751f\u547d\u5468\u671f\u8c03\u7528\u987a\u5e8f\u5982\u4e0b\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#static-getderivedstatefromprops\"><code class=\"language-javascript\">static getDerivedStateFromProps()</code></a></li>\n<li><a href=\"/react/react-component#shouldcomponentupdate\"><code class=\"language-javascript\">shouldComponentUpdate()</code></a></li>\n<li><a href=\"/react/react-component#render\"><strong><code class=\"language-javascript\">render()</code></strong></a></li>\n<li><a href=\"/react/react-component#getsnapshotbeforeupdate\"><code class=\"language-javascript\">getSnapshotBeforeUpdate()</code></a></li>\n<li><a href=\"/react/react-component#componentdidupdate\"><strong><code class=\"language-javascript\">componentDidUpdate()</code></strong></a></li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u4e0b\u8ff0\u65b9\u6cd5\u5373\u5c06\u8fc7\u65f6\uff0c\u5728\u65b0\u4ee3\u7801\u4e2d\u5e94\u8be5<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/03/27/update-on-async-rendering.html\">\u907f\u514d\u4f7f\u7528\u5b83\u4eec</a>\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#unsafe_componentwillupdate\"><code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code></a></li>\n<li><a href=\"/react/react-component#unsafe_componentwillreceiveprops\"><code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code></a></li>\n</ul>\n</div>\n<h4 id=\"unmounting\"><a class=\"anchor\" href=\"/react/react-component#unmounting\"></a>\u5378\u8f7d </h4>\n<p>\u5f53\u7ec4\u4ef6\u4ece DOM \u4e2d\u79fb\u9664\u65f6\u4f1a\u8c03\u7528\u5982\u4e0b\u65b9\u6cd5\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#componentwillunmount\"><strong><code class=\"language-javascript\">componentWillUnmount()</code></strong></a></li>\n</ul>\n<h4 id=\"error-handling\"><a class=\"anchor\" href=\"/react/react-component#error-handling\"></a>\u9519\u8bef\u5904\u7406 </h4>\n<p>\u5f53\u6e32\u67d3\u8fc7\u7a0b\uff0c\u751f\u547d\u5468\u671f\uff0c\u6216\u5b50\u7ec4\u4ef6\u7684\u6784\u9020\u51fd\u6570\u4e2d\u629b\u51fa\u9519\u8bef\u65f6\uff0c\u4f1a\u8c03\u7528\u5982\u4e0b\u65b9\u6cd5\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#static-getderivedstatefromerror\"><code class=\"language-javascript\">static getDerivedStateFromError()</code></a></li>\n<li><a href=\"/react/react-component#componentdidcatch\"><code class=\"language-javascript\">componentDidCatch()</code></a></li>\n</ul>\n<h3 id=\"other-apis\"><a class=\"anchor\" href=\"/react/react-component#other-apis\"></a>\u5176\u4ed6 APIs </h3>\n<p>\u7ec4\u4ef6\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u989d\u5916\u7684 API\uff1a</p>\n<ul>\n<li><a href=\"/react/react-component#setstate\"><code class=\"language-javascript\">setState()</code></a></li>\n<li><a href=\"/react/react-component#forceupdate\"><code class=\"language-javascript\">forceUpdate()</code></a></li>\n</ul>\n<h3 id=\"class-properties\"><a class=\"anchor\" href=\"/react/react-component#class-properties\"></a>class \u5c5e\u6027 </h3>\n<ul>\n<li><a href=\"/react/react-component#defaultprops\"><code class=\"language-javascript\">defaultProps</code></a></li>\n<li><a href=\"/react/react-component#displayname\"><code class=\"language-javascript\">displayName</code></a></li>\n</ul>\n<h3 id=\"instance-properties\"><a class=\"anchor\" href=\"/react/react-component#instance-properties\"></a>\u5b9e\u4f8b\u5c5e\u6027 </h3>\n<ul>\n<li><a href=\"/react/react-component#props\"><code class=\"language-javascript\">props</code></a></li>\n<li><a href=\"/react/react-component#state\"><code class=\"language-javascript\">state</code></a></li>\n</ul>\n\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/react-component#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"commonly-used-lifecycle-methods\"><a class=\"anchor\" href=\"/react/react-component#commonly-used-lifecycle-methods\"></a>\u5e38\u7528\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5 </h3>\n<p>\u672c\u8282\u4e2d\u7684\u65b9\u6cd5\u6db5\u76d6\u4e86\u521b\u5efa React \u7ec4\u4ef6\u65f6\u80fd\u9047\u5230\u7684\u7edd\u5927\u591a\u6570\u7528\u4f8b\u3002<strong>\u60f3\u8981\u66f4\u597d\u4e86\u89e3\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u53ef\u4ee5\u53c2\u8003<a class=\"external-link\" href=\"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\">\u751f\u547d\u5468\u671f\u56fe\u8c31</a>\u3002</strong></p>\n<h3 id=\"render\"><a class=\"anchor\" href=\"/react/react-component#render\"></a><code class=\"language-javascript\">render()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u662f class \u7ec4\u4ef6\u4e2d\u552f\u4e00\u5fc5\u987b\u5b9e\u73b0\u7684\u65b9\u6cd5\u3002</p>\n<p>\u5f53 <code class=\"language-javascript\">render</code> \u88ab\u8c03\u7528\u65f6\uff0c\u5b83\u4f1a\u68c0\u67e5 <code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">this.state</code> \u7684\u53d8\u5316\u5e76\u8fd4\u56de\u4ee5\u4e0b\u7c7b\u578b\u4e4b\u4e00\uff1a</p>\n<ul>\n<li><strong>React \u5143\u7d20</strong>\u3002\u901a\u5e38\u901a\u8fc7 JSX \u521b\u5efa\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">&lt;div /&gt;</code> \u4f1a\u88ab React \u6e32\u67d3\u4e3a DOM \u8282\u70b9\uff0c<code class=\"language-javascript\">&lt;MyComponent /&gt;</code> \u4f1a\u88ab React \u6e32\u67d3\u4e3a\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u65e0\u8bba\u662f <code class=\"language-javascript\">&lt;div /&gt;</code> \u8fd8\u662f <code class=\"language-javascript\">&lt;MyComponent /&gt;</code> \u5747\u4e3a React \u5143\u7d20\u3002</li>\n<li><strong>\u6570\u7ec4\u6216 fragments</strong>\u3002 \u4f7f\u5f97 render \u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a href=\"/react/fragments\">fragments</a> \u6587\u6863\u3002</li>\n<li><strong>Portals</strong>\u3002\u53ef\u4ee5\u6e32\u67d3\u5b50\u8282\u70b9\u5230\u4e0d\u540c\u7684 DOM \u5b50\u6811\u4e2d\u3002\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6709\u5173 <a href=\"/react/portals\">portals</a> \u7684\u6587\u6863\u3002</li>\n<li><strong>\u5b57\u7b26\u4e32\u6216\u6570\u503c\u7c7b\u578b</strong>\u3002\u5b83\u4eec\u5728 DOM \u4e2d\u4f1a\u88ab\u6e32\u67d3\u4e3a\u6587\u672c\u8282\u70b9\u3002</li>\n<li><strong>\u5e03\u5c14\u7c7b\u578b\u6216 <code class=\"language-javascript\">null</code></strong>\u3002\u4ec0\u4e48\u90fd\u4e0d\u6e32\u67d3\u3002\uff08\u4e3b\u8981\u7528\u4e8e\u652f\u6301\u8fd4\u56de <code class=\"language-javascript\">test &amp;&amp; &lt;Child /&gt;</code> \u7684\u6a21\u5f0f\uff0c\u5176\u4e2d test \u4e3a\u5e03\u5c14\u7c7b\u578b\u3002)</li>\n</ul>\n<p><code class=\"language-javascript\">render()</code> \u51fd\u6570\u5e94\u8be5\u4e3a\u7eaf\u51fd\u6570\uff0c\u8fd9\u610f\u5473\u7740\u5728\u4e0d\u4fee\u6539\u7ec4\u4ef6 state \u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u6b21\u8c03\u7528\u65f6\u90fd\u8fd4\u56de\u76f8\u540c\u7684\u7ed3\u679c\uff0c\u5e76\u4e14\u5b83\u4e0d\u4f1a\u76f4\u63a5\u4e0e\u6d4f\u89c8\u5668\u4ea4\u4e92\u3002</p>\n<p>\u5982\u9700\u4e0e\u6d4f\u89c8\u5668\u8fdb\u884c\u4ea4\u4e92\uff0c\u8bf7\u5728 <code class=\"language-javascript\">componentDidMount()</code> \u6216\u5176\u4ed6\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4e2d\u6267\u884c\u4f60\u7684\u64cd\u4f5c\u3002\u4fdd\u6301 <code class=\"language-javascript\">render()</code> \u4e3a\u7eaf\u51fd\u6570\uff0c\u53ef\u4ee5\u4f7f\u7ec4\u4ef6\u66f4\u5bb9\u6613\u601d\u8003\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c <code class=\"language-javascript\">shouldComponentUpdate()</code> \u8fd4\u56de false\uff0c\u5219\u4e0d\u4f1a\u8c03\u7528 <code class=\"language-javascript\">render()</code>\u3002</p>\n</div>\n\n<h3 id=\"constructor\"><a class=\"anchor\" href=\"/react/react-component#constructor\"></a><code class=\"language-javascript\">constructor()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>\u5982\u679c\u4e0d\u521d\u59cb\u5316 state \u6216\u4e0d\u8fdb\u884c\u65b9\u6cd5\u7ed1\u5b9a\uff0c\u5219\u4e0d\u9700\u8981\u4e3a React \u7ec4\u4ef6\u5b9e\u73b0\u6784\u9020\u51fd\u6570\u3002</strong></p>\n<p>\u5728 React \u7ec4\u4ef6\u6302\u8f7d\u4e4b\u524d\uff0c\u4f1a\u8c03\u7528\u5b83\u7684\u6784\u9020\u51fd\u6570\u3002\u5728\u4e3a React.Component \u5b50\u7c7b\u5b9e\u73b0\u6784\u9020\u51fd\u6570\u65f6\uff0c\u5e94\u5728\u5176\u4ed6\u8bed\u53e5\u4e4b\u524d\u8c03\u7528  <code class=\"language-javascript\">super(props)</code>\u3002\u5426\u5219\uff0c<code class=\"language-javascript\">this.props</code> \u5728\u6784\u9020\u51fd\u6570\u4e2d\u53ef\u80fd\u4f1a\u51fa\u73b0\u672a\u5b9a\u4e49\u7684 bug\u3002</p>\n<p>\u901a\u5e38\uff0c\u5728 React \u4e2d\uff0c\u6784\u9020\u51fd\u6570\u4ec5\u7528\u4e8e\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a</p>\n<ul>\n<li>\u901a\u8fc7\u7ed9 <code class=\"language-javascript\">this.state</code> \u8d4b\u503c\u5bf9\u8c61\u6765\u521d\u59cb\u5316<a href=\"/react/state-and-lifecycle\">\u5185\u90e8 state</a>\u3002</li>\n<li>\u4e3a<a href=\"/react/handling-events\">\u4e8b\u4ef6\u5904\u7406\u51fd\u6570</a>\u7ed1\u5b9a\u5b9e\u4f8b</li>\n</ul>\n<p>\u5728 <code class=\"language-javascript\">constructor()</code> \u51fd\u6570\u4e2d<strong>\u4e0d\u8981\u8c03\u7528 <code class=\"language-javascript\">setState()</code> \u65b9\u6cd5</strong>\u3002\u5982\u679c\u4f60\u7684\u7ec4\u4ef6\u9700\u8981\u4f7f\u7528\u5185\u90e8 state\uff0c\u8bf7\u76f4\u63a5\u5728\u6784\u9020\u51fd\u6570\u4e2d\u4e3a <strong><code class=\"language-javascript\">this.state</code> \u8d4b\u503c\u521d\u59cb state</strong>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// \u4e0d\u8981\u5728\u8fd9\u91cc\u8c03\u7528 this.setState()</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u53ea\u80fd\u5728\u6784\u9020\u51fd\u6570\u4e2d\u76f4\u63a5\u4e3a <code class=\"language-javascript\">this.state</code> \u8d4b\u503c\u3002\u5982\u9700\u5728\u5176\u4ed6\u65b9\u6cd5\u4e2d\u8d4b\u503c\uff0c\u4f60\u5e94\u4f7f\u7528 <code class=\"language-javascript\">this.setState()</code> \u66ff\u4ee3\u3002</p>\n<p>\u8981\u907f\u514d\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5f15\u5165\u4efb\u4f55\u526f\u4f5c\u7528\u6216\u8ba2\u9605\u3002\u5982\u9047\u5230\u6b64\u573a\u666f\uff0c\u8bf7\u5c06\u5bf9\u5e94\u7684\u64cd\u4f5c\u653e\u7f6e\u5728 <code class=\"language-javascript\">componentDidMount</code> \u4e2d\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p><strong>\u907f\u514d\u5c06 props \u7684\u503c\u590d\u5236\u7ed9 state\uff01\u8fd9\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u9519\u8bef\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// \u4e0d\u8981\u8fd9\u6837\u505a</span>\n <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u6b64\u505a\u6beb\u65e0\u5fc5\u8981\uff08\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 <code class=\"language-javascript\">this.props.color</code>\uff09\uff0c\u540c\u65f6\u8fd8\u4ea7\u751f\u4e86 bug\uff08\u66f4\u65b0 prop \u4e2d\u7684 <code class=\"language-javascript\">color</code> \u65f6\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd state\uff09\u3002</p>\n<p><strong>\u53ea\u6709\u5728\u4f60\u523b\u610f\u5ffd\u7565 prop \u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u3002</strong>\u6b64\u65f6\uff0c\u5e94\u5c06 prop \u91cd\u547d\u540d\u4e3a <code class=\"language-javascript\">initialColor</code> \u6216 <code class=\"language-javascript\">defaultColor</code>\u3002\u5fc5\u8981\u65f6\uff0c\u4f60\u53ef\u4ee5<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key\">\u4fee\u6539\u5b83\u7684 <code class=\"language-javascript\">key</code></a>\uff0c\u4ee5\u5f3a\u5236\u201c\u91cd\u7f6e\u201d\u5176\u5185\u90e8 state\u3002</p>\n<p>\u8bf7\u53c2\u9605\u5173\u4e8e<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html\">\u907f\u514d\u6d3e\u751f\u72b6\u6001\u7684\u535a\u6587</a>\uff0c\u4ee5\u4e86\u89e3\u51fa\u73b0 state \u4f9d\u8d56 props \u7684\u60c5\u51b5\u8be5\u5982\u4f55\u5904\u7406\u3002</p>\n</div>\n\n<h3 id=\"componentdidmount\"><a class=\"anchor\" href=\"/react/react-component#componentdidmount\"></a><code class=\"language-javascript\">componentDidMount()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">componentDidMount()</code> \u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u540e\uff08\u63d2\u5165 DOM \u6811\u4e2d\uff09\u7acb\u5373\u8c03\u7528\u3002\u4f9d\u8d56\u4e8e DOM \u8282\u70b9\u7684\u521d\u59cb\u5316\u5e94\u8be5\u653e\u5728\u8fd9\u91cc\u3002\u5982\u9700\u901a\u8fc7\u7f51\u7edc\u8bf7\u6c42\u83b7\u53d6\u6570\u636e\uff0c\u6b64\u5904\u662f\u5b9e\u4f8b\u5316\u8bf7\u6c42\u7684\u597d\u5730\u65b9\u3002</p>\n<p>\u8fd9\u4e2a\u65b9\u6cd5\u662f\u6bd4\u8f83\u9002\u5408\u6dfb\u52a0\u8ba2\u9605\u7684\u5730\u65b9\u3002\u5982\u679c\u6dfb\u52a0\u4e86\u8ba2\u9605\uff0c\u8bf7\u4e0d\u8981\u5fd8\u8bb0\u5728 <code class=\"language-javascript\">componentWillUnmount()</code> \u91cc\u53d6\u6d88\u8ba2\u9605</p>\n<p>\u4f60\u53ef\u4ee5\u5728 <code class=\"language-javascript\">componentDidMount()</code> \u91cc<strong>\u76f4\u63a5\u8c03\u7528 <code class=\"language-javascript\">setState()</code></strong>\u3002\u5b83\u5c06\u89e6\u53d1\u989d\u5916\u6e32\u67d3\uff0c\u4f46\u6b64\u6e32\u67d3\u4f1a\u53d1\u751f\u5728\u6d4f\u89c8\u5668\u66f4\u65b0\u5c4f\u5e55\u4e4b\u524d\u3002\u5982\u6b64\u4fdd\u8bc1\u4e86\u5373\u4f7f\u5728 <code class=\"language-javascript\">render()</code> \u4e24\u6b21\u8c03\u7528\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u4e5f\u4e0d\u4f1a\u770b\u5230\u4e2d\u95f4\u72b6\u6001\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u8be5\u6a21\u5f0f\uff0c\u56e0\u4e3a\u5b83\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002\u901a\u5e38\uff0c\u4f60\u5e94\u8be5\u5728 <code class=\"language-javascript\">constructor()</code> \u4e2d\u521d\u59cb\u5316 state\u3002\u5982\u679c\u4f60\u7684\u6e32\u67d3\u4f9d\u8d56\u4e8e DOM \u8282\u70b9\u7684\u5927\u5c0f\u6216\u4f4d\u7f6e\uff0c\u6bd4\u5982\u5b9e\u73b0 modals \u548c tooltips \u7b49\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64\u65b9\u5f0f\u5904\u7406</p>\n\n<h3 id=\"componentdidupdate\"><a class=\"anchor\" href=\"/react/react-component#componentdidupdate\"></a><code class=\"language-javascript\">componentDidUpdate()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">,</span> prevState<span class=\"token punctuation\">,</span> snapshot<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">componentDidUpdate()</code> \u4f1a\u5728\u66f4\u65b0\u540e\u4f1a\u88ab\u7acb\u5373\u8c03\u7528\u3002\u9996\u6b21\u6e32\u67d3\u4e0d\u4f1a\u6267\u884c\u6b64\u65b9\u6cd5\u3002</p>\n<p>\u5f53\u7ec4\u4ef6\u66f4\u65b0\u540e\uff0c\u53ef\u4ee5\u5728\u6b64\u5904\u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\u3002\u5982\u679c\u4f60\u5bf9\u66f4\u65b0\u524d\u540e\u7684 props \u8fdb\u884c\u4e86\u6bd4\u8f83\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5728\u6b64\u5904\u8fdb\u884c\u7f51\u7edc\u8bf7\u6c42\u3002\uff08\u4f8b\u5982\uff0c\u5f53 props \u672a\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5219\u4e0d\u4f1a\u6267\u884c\u7f51\u7edc\u8bf7\u6c42\uff09\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u5178\u578b\u7528\u6cd5\uff08\u4e0d\u8981\u5fd8\u8bb0\u6bd4\u8f83 props\uff09\uff1a</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userID <span class=\"token operator\">!==</span> prevProps<span class=\"token punctuation\">.</span>userID<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u5728 <code class=\"language-javascript\">componentDidUpdate()</code> \u4e2d<strong>\u76f4\u63a5\u8c03\u7528 <code class=\"language-javascript\">setState()</code></strong>\uff0c\u4f46\u8bf7\u6ce8\u610f<strong>\u5b83\u5fc5\u987b\u88ab\u5305\u88f9\u5728\u4e00\u4e2a\u6761\u4ef6\u8bed\u53e5\u91cc</strong>\uff0c\u6b63\u5982\u4e0a\u8ff0\u7684\u4f8b\u5b50\u90a3\u6837\u8fdb\u884c\u5904\u7406\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u6b7b\u5faa\u73af\u3002\u5b83\u8fd8\u4f1a\u5bfc\u81f4\u989d\u5916\u7684\u91cd\u65b0\u6e32\u67d3\uff0c\u867d\u7136\u7528\u6237\u4e0d\u53ef\u89c1\uff0c\u4f46\u4f1a\u5f71\u54cd\u7ec4\u4ef6\u6027\u80fd\u3002\u4e0d\u8981\u5c06 props \u201c\u955c\u50cf\u201d\u7ed9 state\uff0c\u8bf7\u8003\u8651\u76f4\u63a5\u4f7f\u7528 props\u3002 \u6b32\u4e86\u89e3\u66f4\u591a\u6709\u5173\u5185\u5bb9\uff0c\u8bf7\u53c2\u9605<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html\">\u4e3a\u4ec0\u4e48 props \u590d\u5236\u7ed9 state \u4f1a\u4ea7\u751f bug</a>\u3002</p>\n<p>\u5982\u679c\u7ec4\u4ef6\u5b9e\u73b0\u4e86 <code class=\"language-javascript\">getSnapshotBeforeUpdate()</code> \u751f\u547d\u5468\u671f\uff08\u4e0d\u5e38\u7528\uff09\uff0c\u5219\u5b83\u7684\u8fd4\u56de\u503c\u5c06\u4f5c\u4e3a <code class=\"language-javascript\">componentDidUpdate()</code> \u7684\u7b2c\u4e09\u4e2a\u53c2\u6570 \u201csnapshot\u201d \u53c2\u6570\u4f20\u9012\u3002\u5426\u5219\u6b64\u53c2\u6570\u5c06\u4e3a undefined\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c <a href=\"/react/react-component#shouldcomponentupdate\"><code class=\"language-javascript\">shouldComponentUpdate()</code></a> \u8fd4\u56de\u503c\u4e3a false\uff0c\u5219\u4e0d\u4f1a\u8c03\u7528 <code class=\"language-javascript\">componentDidUpdate()</code>\u3002</p>\n</div>\n\n<h3 id=\"componentwillunmount\"><a class=\"anchor\" href=\"/react/react-component#componentwillunmount\"></a><code class=\"language-javascript\">componentWillUnmount()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">componentWillUnmount()</code> \u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u53ca\u9500\u6bc1\u4e4b\u524d\u76f4\u63a5\u8c03\u7528\u3002\u5728\u6b64\u65b9\u6cd5\u4e2d\u6267\u884c\u5fc5\u8981\u7684\u6e05\u7406\u64cd\u4f5c\uff0c\u4f8b\u5982\uff0c\u6e05\u9664 timer\uff0c\u53d6\u6d88\u7f51\u7edc\u8bf7\u6c42\u6216\u6e05\u9664\u5728 <code class=\"language-javascript\">componentDidMount()</code> \u4e2d\u521b\u5efa\u7684\u8ba2\u9605\u7b49\u3002</p>\n<p><code class=\"language-javascript\">componentWillUnmount()</code> \u4e2d<strong>\u4e0d\u5e94\u8c03\u7528 <code class=\"language-javascript\">setState()</code></strong>\uff0c\u56e0\u4e3a\u8be5\u7ec4\u4ef6\u5c06\u6c38\u8fdc\u4e0d\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\u7ec4\u4ef6\u5b9e\u4f8b\u5378\u8f7d\u540e\uff0c\u5c06\u6c38\u8fdc\u4e0d\u4f1a\u518d\u6302\u8f7d\u5b83\u3002</p>\n\n<h3 id=\"rarely-used-lifecycle-methods\"><a class=\"anchor\" href=\"/react/react-component#rarely-used-lifecycle-methods\"></a>\u4e0d\u5e38\u7528\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5 </h3>\n<p>\u672c\u8282\u4e2d\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5e76\u4e0d\u592a\u5e38\u7528\u3002\u5b83\u4eec\u5076\u5c14\u4f1a\u5f88\u65b9\u4fbf\uff0c\u4f46\u662f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u7ec4\u4ef6\u53ef\u80fd\u90fd\u4e0d\u9700\u8981\u5b83\u4eec\u3002\u4f60\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\">\u751f\u547d\u5468\u671f\u56fe\u8c31</a>\u4e2d\uff0c\u9009\u62e9\u201c\u663e\u793a\u4e0d\u5e38\u7528\u7684\u751f\u547d\u5468\u671f\u201d\u590d\u9009\u6846\uff0c\u5373\u53ef\u770b\u5230\u4e0b\u8ff0\u76f8\u5173\u65b9\u6cd5\u3002</p>\n<h3 id=\"shouldcomponentupdate\"><a class=\"anchor\" href=\"/react/react-component#shouldcomponentupdate\"></a><code class=\"language-javascript\">shouldComponentUpdate()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">,</span> nextState<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u6839\u636e <code class=\"language-javascript\">shouldComponentUpdate()</code> \u7684\u8fd4\u56de\u503c\uff0c\u5224\u65ad React \u7ec4\u4ef6\u7684\u8f93\u51fa\u662f\u5426\u53d7\u5f53\u524d state \u6216 props \u66f4\u6539\u7684\u5f71\u54cd\u3002\u9ed8\u8ba4\u884c\u4e3a\u662f state \u6bcf\u6b21\u53d1\u751f\u53d8\u5316\u7ec4\u4ef6\u90fd\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u9075\u5faa\u9ed8\u8ba4\u884c\u4e3a\u3002</p>\n<p>\u5f53 props \u6216 state \u53d1\u751f\u53d8\u5316\u65f6\uff0c<code class=\"language-javascript\">shouldComponentUpdate()</code> \u4f1a\u5728\u6e32\u67d3\u6267\u884c\u4e4b\u524d\u88ab\u8c03\u7528\u3002\u8fd4\u56de\u503c\u9ed8\u8ba4\u4e3a true\u3002\u9996\u6b21\u6e32\u67d3\u6216\u4f7f\u7528 <code class=\"language-javascript\">forceUpdate()</code> \u65f6\u4e0d\u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5\u3002</p>\n<p>\u6b64\u65b9\u6cd5\u4ec5\u4f5c\u4e3a<strong><a href=\"/react/optimizing-performance\">\u6027\u80fd\u4f18\u5316\u7684\u65b9\u5f0f</a></strong>\u800c\u5b58\u5728\u3002\u4e0d\u8981\u4f01\u56fe\u4f9d\u9760\u6b64\u65b9\u6cd5\u6765\u201c\u963b\u6b62\u201d\u6e32\u67d3\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f bug\u3002\u4f60\u5e94\u8be5<strong>\u8003\u8651\u4f7f\u7528\u5185\u7f6e\u7684 <a href=\"/react/react-api#reactpurecomponent\"><code class=\"language-javascript\">PureComponent</code></a> \u7ec4\u4ef6</strong>\uff0c\u800c\u4e0d\u662f\u624b\u52a8\u7f16\u5199 <code class=\"language-javascript\">shouldComponentUpdate()</code>\u3002<code class=\"language-javascript\">PureComponent</code> \u4f1a\u5bf9 props \u548c state \u8fdb\u884c\u6d45\u5c42\u6bd4\u8f83\uff0c\u5e76\u51cf\u5c11\u4e86\u8df3\u8fc7\u5fc5\u8981\u66f4\u65b0\u7684\u53ef\u80fd\u6027\u3002</p>\n<p>\u5982\u679c\u4f60\u4e00\u5b9a\u8981\u624b\u52a8\u7f16\u5199\u6b64\u51fd\u6570\uff0c\u53ef\u4ee5\u5c06 <code class=\"language-javascript\">this.props</code> \u4e0e <code class=\"language-javascript\">nextProps</code> \u4ee5\u53ca <code class=\"language-javascript\">this.state</code> \u4e0e<code class=\"language-javascript\">nextState</code> \u8fdb\u884c\u6bd4\u8f83\uff0c\u5e76\u8fd4\u56de <code class=\"language-javascript\">false</code> \u4ee5\u544a\u77e5 React \u53ef\u4ee5\u8df3\u8fc7\u66f4\u65b0\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd4\u56de <code class=\"language-javascript\">false</code> \u5e76\u4e0d\u4f1a\u963b\u6b62\u5b50\u7ec4\u4ef6\u5728 state \u66f4\u6539\u65f6\u91cd\u65b0\u6e32\u67d3\u3002</p>\n<p>\u6211\u4eec\u4e0d\u5efa\u8bae\u5728 <code class=\"language-javascript\">shouldComponentUpdate()</code> \u4e2d\u8fdb\u884c\u6df1\u5c42\u6bd4\u8f83\u6216\u4f7f\u7528 <code class=\"language-javascript\">JSON.stringify()</code>\u3002\u8fd9\u6837\u975e\u5e38\u5f71\u54cd\u6548\u7387\uff0c\u4e14\u4f1a\u635f\u5bb3\u6027\u80fd\u3002</p>\n<p>\u76ee\u524d\uff0c\u5982\u679c <code class=\"language-javascript\">shouldComponentUpdate()</code> \u8fd4\u56de <code class=\"language-javascript\">false</code>\uff0c\u5219\u4e0d\u4f1a\u8c03\u7528 <a href=\"/react/react-component#unsafe_componentwillupdate\"><code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code></a>\uff0c<a href=\"/react/react-component#render\"><code class=\"language-javascript\">render()</code></a> \u548c <a href=\"/react/react-component#componentdidupdate\"><code class=\"language-javascript\">componentDidUpdate()</code></a>\u3002\u540e\u7eed\u7248\u672c\uff0cReact \u53ef\u80fd\u4f1a\u5c06 <code class=\"language-javascript\">shouldComponentUpdate</code> \u89c6\u4e3a\u63d0\u793a\u800c\u4e0d\u662f\u4e25\u683c\u7684\u6307\u4ee4\uff0c\u5e76\u4e14\uff0c\u5f53\u8fd4\u56de <code class=\"language-javascript\">false</code> \u65f6\uff0c\u4ecd\u53ef\u80fd\u5bfc\u81f4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002</p>\n\n<h3 id=\"static-getderivedstatefromprops\"><a class=\"anchor\" href=\"/react/react-component#static-getderivedstatefromprops\"></a><code class=\"language-javascript\">static getDerivedStateFromProps()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">static</span> <span class=\"token function\">getDerivedStateFromProps</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">getDerivedStateFromProps</code> \u4f1a\u5728\u8c03\u7528 render \u65b9\u6cd5\u4e4b\u524d\u8c03\u7528\uff0c\u5e76\u4e14\u5728\u521d\u59cb\u6302\u8f7d\u53ca\u540e\u7eed\u66f4\u65b0\u65f6\u90fd\u4f1a\u88ab\u8c03\u7528\u3002\u5b83\u5e94\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\u6765\u66f4\u65b0 state\uff0c\u5982\u679c\u8fd4\u56de <code class=\"language-javascript\">null</code> \u5219\u4e0d\u66f4\u65b0\u4efb\u4f55\u5185\u5bb9\u3002</p>\n<p>\u6b64\u65b9\u6cd5\u9002\u7528\u4e8e<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#when-to-use-derived-state\">\u7f55\u89c1\u7684\u7528\u4f8b</a>\uff0c\u5373 state \u7684\u503c\u5728\u4efb\u4f55\u65f6\u5019\u90fd\u53d6\u51b3\u4e8e props\u3002\u4f8b\u5982\uff0c\u5b9e\u73b0 <code class=\"language-javascript\">&lt;Transition&gt;</code> \u7ec4\u4ef6\u53ef\u80fd\u5f88\u65b9\u4fbf\uff0c\u8be5\u7ec4\u4ef6\u4f1a\u6bd4\u8f83\u5f53\u524d\u7ec4\u4ef6\u4e0e\u4e0b\u4e00\u7ec4\u4ef6\uff0c\u4ee5\u51b3\u5b9a\u9488\u5bf9\u54ea\u4e9b\u7ec4\u4ef6\u8fdb\u884c\u8f6c\u573a\u52a8\u753b\u3002</p>\n<p>\u6d3e\u751f\u72b6\u6001\u4f1a\u5bfc\u81f4\u4ee3\u7801\u5197\u4f59\uff0c\u5e76\u4f7f\u7ec4\u4ef6\u96be\u4ee5\u7ef4\u62a4\u3002\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html\">\u786e\u4fdd\u4f60\u5df2\u719f\u6089\u8fd9\u4e9b\u7b80\u5355\u7684\u66ff\u4ee3\u65b9\u6848\uff1a</a></p>\n<ul>\n<li>\u5982\u679c\u4f60\u9700\u8981<strong>\u6267\u884c\u526f\u4f5c\u7528</strong>\uff08\u4f8b\u5982\uff0c\u6570\u636e\u63d0\u53d6\u6216\u52a8\u753b\uff09\u4ee5\u54cd\u5e94 props \u4e2d\u7684\u66f4\u6539\uff0c\u8bf7\u6539\u7528 <a href=\"/react/react-component#componentdidupdate\"><code class=\"language-javascript\">componentDidUpdate</code></a>\u3002</li>\n<li>\u5982\u679c\u53ea\u60f3\u5728 <strong>prop \u66f4\u6539\u65f6\u91cd\u65b0\u8ba1\u7b97\u67d0\u4e9b\u6570\u636e</strong>\uff0c<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization\">\u8bf7\u4f7f\u7528 memoization helper \u4ee3\u66ff</a>\u3002</li>\n<li>\u5982\u679c\u4f60\u60f3<strong>\u5728 prop \u66f4\u6539\u65f6\u201c\u91cd\u7f6e\u201d\u67d0\u4e9b state</strong>\uff0c\u8bf7\u8003\u8651\u4f7f\u7ec4\u4ef6<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component\">\u5b8c\u5168\u53d7\u63a7</a>\u6216<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key\">\u4f7f\u7528 <code class=\"language-javascript\">key</code> \u4f7f\u7ec4\u4ef6\u5b8c\u5168\u4e0d\u53d7\u63a7</a> \u4ee3\u66ff\u3002</li>\n</ul>\n<p>\u6b64\u65b9\u6cd5\u65e0\u6743\u8bbf\u95ee\u7ec4\u4ef6\u5b9e\u4f8b\u3002\u5982\u679c\u4f60\u9700\u8981\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u53d6\u7ec4\u4ef6 props \u7684\u7eaf\u51fd\u6570\u53ca class \u4e4b\u5916\u7684\u72b6\u6001\uff0c\u5728<code class=\"language-javascript\">getDerivedStateFromProps()</code>\u548c\u5176\u4ed6 class \u65b9\u6cd5\u4e4b\u95f4\u91cd\u7528\u4ee3\u7801\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u4e0d\u7ba1\u539f\u56e0\u662f\u4ec0\u4e48\uff0c\u90fd\u4f1a\u5728<em>\u6bcf\u6b21</em>\u6e32\u67d3\u524d\u89e6\u53d1\u6b64\u65b9\u6cd5\u3002\u8fd9\u4e0e <code class=\"language-javascript\">UNSAFE_componentWillReceiveProps</code> \u5f62\u6210\u5bf9\u6bd4\uff0c\u540e\u8005\u4ec5\u5728\u7236\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u65f6\u89e6\u53d1\uff0c\u800c\u4e0d\u662f\u5728\u5185\u90e8\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u65f6\u3002</p>\n\n<h3 id=\"getsnapshotbeforeupdate\"><a class=\"anchor\" href=\"/react/react-component#getsnapshotbeforeupdate\"></a><code class=\"language-javascript\">getSnapshotBeforeUpdate()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">getSnapshotBeforeUpdate</span><span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">,</span> prevState<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">getSnapshotBeforeUpdate()</code> \u5728\u6700\u8fd1\u4e00\u6b21\u6e32\u67d3\u8f93\u51fa\uff08\u63d0\u4ea4\u5230 DOM \u8282\u70b9\uff09\u4e4b\u524d\u8c03\u7528\u3002\u5b83\u4f7f\u5f97\u7ec4\u4ef6\u80fd\u5728\u53d1\u751f\u66f4\u6539\u4e4b\u524d\u4ece DOM \u4e2d\u6355\u83b7\u4e00\u4e9b\u4fe1\u606f\uff08\u4f8b\u5982\uff0c\u6eda\u52a8\u4f4d\u7f6e\uff09\u3002\u6b64\u751f\u547d\u5468\u671f\u65b9\u6cd5\u7684\u4efb\u4f55\u8fd4\u56de\u503c\u5c06\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 <code class=\"language-javascript\">componentDidUpdate()</code>\u3002</p>\n<p>\u6b64\u7528\u6cd5\u5e76\u4e0d\u5e38\u89c1\uff0c\u4f46\u5b83\u53ef\u80fd\u51fa\u73b0\u5728 UI \u5904\u7406\u4e2d\uff0c\u5982\u9700\u8981\u4ee5\u7279\u6b8a\u65b9\u5f0f\u5904\u7406\u6eda\u52a8\u4f4d\u7f6e\u7684\u804a\u5929\u7ebf\u7a0b\u7b49\u3002</p>\n<p>\u5e94\u8fd4\u56de snapshot \u7684\u503c\uff08\u6216 <code class=\"language-javascript\">null</code>\uff09\u3002</p>\n<p>\u4f8b\u5982\uff1a</p>\n<p><div class=\"gatsby-highlight\">\n<pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ScrollingList</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getSnapshotBeforeUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u6211\u4eec\u662f\u5426\u5728 list \u4e2d\u6dfb\u52a0\u65b0\u7684 items \uff1f</span>\n    <span class=\"token comment\">// \u6355\u83b7\u6eda\u52a8\u200b\u200b\u4f4d\u7f6e\u4ee5\u4fbf\u6211\u4eec\u7a0d\u540e\u8c03\u6574\u6eda\u52a8\u4f4d\u7f6e\u3002</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> list<span class=\"token punctuation\">.</span>scrollHeight <span class=\"token operator\">-</span> list<span class=\"token punctuation\">.</span>scrollTop<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState<span class=\"token punctuation\">,</span> snapshot</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5982\u679c\u6211\u4eec snapshot \u6709\u503c\uff0c\u8bf4\u660e\u6211\u4eec\u521a\u521a\u6dfb\u52a0\u4e86\u65b0\u7684 items\uff0c</span>\n    <span class=\"token comment\">// \u8c03\u6574\u6eda\u52a8\u4f4d\u7f6e\u4f7f\u5f97\u8fd9\u4e9b\u65b0 items \u4e0d\u4f1a\u5c06\u65e7\u7684 items \u63a8\u51fa\u89c6\u56fe\u3002</span>\n    <span class=\"token comment\">//\uff08\u8fd9\u91cc\u7684 snapshot \u662f getSnapshotBeforeUpdate \u7684\u8fd4\u56de\u503c\uff09</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>snapshot <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n      list<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">=</span> list<span class=\"token punctuation\">.</span>scrollHeight <span class=\"token operator\">-</span> snapshot<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listRef<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* ...contents... */</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n</div></p>\n<p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u91cd\u70b9\u662f\u4ece <code class=\"language-javascript\">getSnapshotBeforeUpdate</code> \u8bfb\u53d6 <code class=\"language-javascript\">scrollHeight</code> \u5c5e\u6027\uff0c\u56e0\u4e3a \u201crender\u201d \u9636\u6bb5\u751f\u547d\u5468\u671f\uff08\u5982 <code class=\"language-javascript\">render</code>\uff09\u548c \u201ccommit\u201d \u9636\u6bb5\u751f\u547d\u5468\u671f\uff08\u5982 <code class=\"language-javascript\">getSnapshotBeforeUpdate</code> \u548c <code class=\"language-javascript\">componentDidUpdate</code>\uff09\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u5ef6\u8fdf\u3002</p>\n\n<h3 id=\"error-boundaries\"><a class=\"anchor\" href=\"/react/react-component#error-boundaries\"></a>Error boundaries </h3>\n<p><a href=\"/react/error-boundaries\">Error boundaries</a> \u662f React \u7ec4\u4ef6\uff0c\u5b83\u4f1a\u5728\u5176\u5b50\u7ec4\u4ef6\u6811\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\u6355\u83b7 JavaScript \u9519\u8bef\uff0c\u5e76\u8bb0\u5f55\u8fd9\u4e9b\u9519\u8bef\uff0c\u5c55\u793a\u964d\u7ea7 UI \u800c\u4e0d\u662f\u5d29\u6e83\u7684\u7ec4\u4ef6\u6811\u3002Error boundaries \u7ec4\u4ef6\u4f1a\u6355\u83b7\u5728\u6e32\u67d3\u671f\u95f4\uff0c\u5728\u751f\u547d\u5468\u671f\u65b9\u6cd5\u4ee5\u53ca\u5176\u6574\u4e2a\u6811\u7684\u6784\u9020\u51fd\u6570\u4e2d\u53d1\u751f\u7684\u9519\u8bef\u3002</p>\n<p>\u5982\u679c class \u7ec4\u4ef6\u5b9a\u4e49\u4e86\u751f\u547d\u5468\u671f\u65b9\u6cd5 <code class=\"language-javascript\">static getDerivedStateFromError()</code> \u6216 <code class=\"language-javascript\">componentDidCatch()</code> \u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\uff08\u6216\u4e24\u8005\uff09\uff0c\u5b83\u5c31\u6210\u4e3a\u4e86 Error boundaries\u3002\u901a\u8fc7\u751f\u547d\u5468\u671f\u66f4\u65b0 state \u53ef\u8ba9\u7ec4\u4ef6\u6355\u83b7\u6811\u4e2d\u672a\u5904\u7406\u7684 JavaScript \u9519\u8bef\u5e76\u5c55\u793a\u964d\u7ea7 UI\u3002</p>\n<p>\u4ec5\u4f7f\u7528 Error boundaries \u7ec4\u4ef6\u6765\u4ece\u610f\u5916\u5f02\u5e38\u4e2d\u6062\u590d\u7684\u60c5\u51b5\uff1b<strong>\u4e0d\u8981\u5c06\u5b83\u4eec\u7528\u4e8e\u6d41\u7a0b\u63a7\u5236\u3002</strong></p>\n<p>\u6b32\u4e86\u89e3\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2017/07/26/error-handling-in-react-16.html\"><em>React 16 \u4e2d\u7684\u9519\u8bef\u5904\u7406</em></a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>Error boundaries \u4ec5\u6355\u83b7\u7ec4\u4ef6\u6811\u4e2d<strong>\u4ee5\u4e0b</strong>\u7ec4\u4ef6\u4e2d\u7684\u9519\u8bef\u3002\u4f46\u5b83\u672c\u8eab\u7684\u9519\u8bef\u65e0\u6cd5\u6355\u83b7\u3002</p>\n</div>\n<h3 id=\"static-getderivedstatefromerror\"><a class=\"anchor\" href=\"/react/react-component#static-getderivedstatefromerror\"></a><code class=\"language-javascript\">static getDerivedStateFromError()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">static</span> <span class=\"token function\">getDerivedStateFromError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u6b64\u751f\u547d\u5468\u671f\u4f1a\u5728\u540e\u4ee3\u7ec4\u4ef6\u629b\u51fa\u9519\u8bef\u540e\u88ab\u8c03\u7528\u3002\n\u5b83\u5c06\u629b\u51fa\u7684\u9519\u8bef\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\u4ee5\u66f4\u65b0 state</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorBoundary</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">static</span> <span class=\"token function\">getDerivedStateFromError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u66f4\u65b0 state \u4f7f\u4e0b\u4e00\u6b21\u6e32\u67d3\u53ef\u4ee5\u663e\u964d\u7ea7 UI</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u6e32\u67d3\u4efb\u4f55\u81ea\u5b9a\u4e49\u7684\u964d\u7ea7  UI</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Something went wrong.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p><code class=\"language-javascript\">getDerivedStateFromError()</code> \u4f1a\u5728<code class=\"language-javascript\">\u6e32\u67d3</code>\u9636\u6bb5\u8c03\u7528\uff0c\u56e0\u6b64\u4e0d\u5141\u8bb8\u51fa\u73b0\u526f\u4f5c\u7528\u3002\n\u5982\u9047\u6b64\u7c7b\u60c5\u51b5\uff0c\u8bf7\u6539\u7528 <code class=\"language-javascript\">componentDidCatch()</code>\u3002</p>\n</div>\n\n<h3 id=\"componentdidcatch\"><a class=\"anchor\" href=\"/react/react-component#componentdidcatch\"></a><code class=\"language-javascript\">componentDidCatch()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidCatch</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u6b64\u751f\u547d\u5468\u671f\u5728\u540e\u4ee3\u7ec4\u4ef6\u629b\u51fa\u9519\u8bef\u540e\u88ab\u8c03\u7528\u3002\n\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff1a</p>\n<ol>\n<li><code class=\"language-javascript\">error</code> \u2014\u2014 \u629b\u51fa\u7684\u9519\u8bef\u3002</li>\n<li><code class=\"language-javascript\">info</code> \u2014\u2014 \u5e26\u6709 <code class=\"language-javascript\">componentStack</code> key \u7684\u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b<a href=\"/react/error-boundaries#component-stack-traces\">\u6709\u5173\u7ec4\u4ef6\u5f15\u53d1\u9519\u8bef\u7684\u6808\u4fe1\u606f</a>\u3002</li>\n</ol>\n<p><code class=\"language-javascript\">componentDidCatch()</code> \u4f1a\u5728\u201c\u63d0\u4ea4\u201d\u9636\u6bb5\u88ab\u8c03\u7528\uff0c\u56e0\u6b64\u5141\u8bb8\u6267\u884c\u526f\u4f5c\u7528\u3002\n\u5b83\u5e94\u8be5\u7528\u4e8e\u8bb0\u5f55\u9519\u8bef\u4e4b\u7c7b\u7684\u60c5\u51b5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorBoundary</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function\">getDerivedStateFromError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u66f4\u65b0 state \u4f7f\u4e0b\u4e00\u6b21\u6e32\u67d3\u53ef\u4ee5\u663e\u793a\u964d\u7ea7 UI</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidCatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \"\u7ec4\u4ef6\u5806\u6808\" \u4f8b\u5b50:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">//   in ComponentThatThrows (created by App)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">//   in ErrorBoundary (created by App)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">//   in div (created by App)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">//   in App</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">logComponentStackToMyService</span><span class=\"token punctuation\">(</span>info<span class=\"token punctuation\">.</span>componentStack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u6e32\u67d3\u4efb\u4f55\u81ea\u5b9a\u4e49\u7684\u964d\u7ea7 UI</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Something went wrong.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React \u7684\u5f00\u53d1\u548c\u751f\u4ea7\u6784\u5efa\u7248\u672c\u5728 <code class=\"language-javascript\">componentDidCatch()</code> \u7684\u65b9\u5f0f\u4e0a\u6709\u8f7b\u5fae\u5dee\u522b\u3002</p>\n<p>\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\uff0c\u9519\u8bef\u4f1a\u5192\u6ce1\u81f3 <code class=\"language-javascript\">window</code>\uff0c\u8fd9\u610f\u5473\u7740\u4efb\u4f55 <code class=\"language-javascript\">window.onerror</code> \u6216 <code class=\"language-javascript\">window.addEventListener('error', callback)</code> \u4f1a\u4e2d\u65ad\u8fd9\u4e9b\u5df2\u7ecf\u88ab <code class=\"language-javascript\">componentDidCatch()</code> \u6355\u83b7\u7684\u9519\u8bef\u3002</p>\n<p>\u76f8\u53cd\uff0c\u5728\u751f\u4ea7\u6a21\u5f0f\u4e0b\uff0c\u9519\u8bef\u4e0d\u4f1a\u5192\u6ce1\uff0c\u8fd9\u610f\u5473\u7740\u4efb\u4f55\u6839\u9519\u8bef\u5904\u7406\u5668\u53ea\u4f1a\u63a5\u53d7\u90a3\u4e9b\u6ca1\u6709\u663e\u5f0f\u5730\u88ab <code class=\"language-javascript\">componentDidCatch()</code> \u6355\u83b7\u7684\u9519\u8bef\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c\u53d1\u751f\u9519\u8bef\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u4f7f\u7528 <code class=\"language-javascript\">componentDidCatch()</code> \u6e32\u67d3\u964d\u7ea7 UI\uff0c\u4f46\u5728\u672a\u6765\u7684\u7248\u672c\u4e2d\u5c06\u4e0d\u63a8\u8350\u8fd9\u6837\u505a\u3002\n\u53ef\u4ee5\u4f7f\u7528\u9759\u6001 <code class=\"language-javascript\">getDerivedStateFromError()</code> \u6765\u5904\u7406\u964d\u7ea7\u6e32\u67d3\u3002</p>\n</div>\n\n<h3 id=\"legacy-lifecycle-methods\"><a class=\"anchor\" href=\"/react/react-component#legacy-lifecycle-methods\"></a>\u8fc7\u65f6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5 </h3>\n<p>\u4ee5\u4e0b\u751f\u547d\u5468\u671f\u65b9\u6cd5\u6807\u8bb0\u4e3a\u201c\u8fc7\u65f6\u201d\u3002\u8fd9\u4e9b\u65b9\u6cd5\u4ecd\u7136\u6709\u6548\uff0c\u4f46\u4e0d\u5efa\u8bae\u5728\u65b0\u4ee3\u7801\u4e2d\u4f7f\u7528\u5b83\u4eec\u3002\u53c2\u9605\u6b64<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/03/27/update-on-async-rendering.html\">\u535a\u5ba2\u6587\u7ae0</a>\u4ee5\u4e86\u89e3\u66f4\u591a\u6709\u5173\u8fc1\u79fb\u65e7\u7248\u751f\u547d\u5468\u671f\u65b9\u6cd5\u7684\u4fe1\u606f\u3002</p>\n<h3 id=\"unsafe_componentwillmount\"><a class=\"anchor\" href=\"/react/react-component#unsafe_componentwillmount\"></a><code class=\"language-javascript\">UNSAFE_componentWillMount()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">UNSAFE_componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6b64\u751f\u547d\u5468\u671f\u4e4b\u524d\u540d\u4e3a <code class=\"language-javascript\">componentWillMount</code>\u3002\u8be5\u540d\u79f0\u5c06\u7ee7\u7eed\u4f7f\u7528\u81f3 React 17\u3002\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/reactjs/react-codemod#rename-unsafe-lifecycles\"><code class=\"language-javascript\">rename-unsafe-lifecycles</code> codemod</a> \u81ea\u52a8\u66f4\u65b0\u4f60\u7684\u7ec4\u4ef6\u3002</p>\n</div>\n<p><code class=\"language-javascript\">UNSAFE_componentWillMount()</code> \u5728\u6302\u8f7d\u4e4b\u524d\u88ab\u8c03\u7528\u3002\u5b83\u5728 <code class=\"language-javascript\">render()</code> \u4e4b\u524d\u8c03\u7528\uff0c\u56e0\u6b64\u5728\u6b64\u65b9\u6cd5\u4e2d\u540c\u6b65\u8c03\u7528 <code class=\"language-javascript\">setState()</code> \u4e0d\u4f1a\u89e6\u53d1\u989d\u5916\u6e32\u67d3\u3002\u901a\u5e38\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <code class=\"language-javascript\">constructor()</code> \u6765\u521d\u59cb\u5316 state\u3002</p>\n<p>\u907f\u514d\u5728\u6b64\u65b9\u6cd5\u4e2d\u5f15\u5165\u4efb\u4f55\u526f\u4f5c\u7528\u6216\u8ba2\u9605\u3002\u5982\u9047\u6b64\u79cd\u60c5\u51b5\uff0c\u8bf7\u6539\u7528 <code class=\"language-javascript\">componentDidMount()</code>\u3002</p>\n<p>\u6b64\u65b9\u6cd5\u662f\u670d\u52a1\u7aef\u6e32\u67d3\u552f\u4e00\u4f1a\u8c03\u7528\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u3002</p>\n\n<h3 id=\"unsafe_componentwillreceiveprops\"><a class=\"anchor\" href=\"/react/react-component#unsafe_componentwillreceiveprops\"></a><code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">UNSAFE_componentWillReceiveProps</span><span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6b64\u751f\u547d\u5468\u671f\u4e4b\u524d\u540d\u4e3a <code class=\"language-javascript\">componentWillReceiveProps</code>\u3002\u8be5\u540d\u79f0\u5c06\u7ee7\u7eed\u4f7f\u7528\u81f3 React 17\u3002\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/reactjs/react-codemod#rename-unsafe-lifecycles\"><code class=\"language-javascript\">rename-unsafe-lifecycles</code> codemod</a> \u81ea\u52a8\u66f4\u65b0\u4f60\u7684\u7ec4\u4ef6\u3002</p>\n</div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u4f7f\u7528\u6b64\u751f\u547d\u5468\u671f\u65b9\u6cd5\u901a\u5e38\u4f1a\u51fa\u73b0 bug \u548c\u4e0d\u4e00\u81f4\u6027\uff1a</p>\n<ul>\n<li>\u5982\u679c\u4f60\u9700\u8981<strong>\u6267\u884c\u526f\u4f5c\u7528</strong>\uff08\u4f8b\u5982\uff0c\u6570\u636e\u63d0\u53d6\u6216\u52a8\u753b\uff09\u4ee5\u54cd\u5e94 props \u4e2d\u7684\u66f4\u6539\uff0c\u8bf7\u6539\u7528 <a href=\"/react/react-component#componentdidupdate\"><code class=\"language-javascript\">componentDidUpdate</code></a> \u751f\u547d\u5468\u671f\u3002</li>\n<li>\u5982\u679c\u4f60\u4f7f\u7528 <code class=\"language-javascript\">componentWillReceiveProps</code> <strong>\u4ec5\u5728 prop \u66f4\u6539\u65f6\u91cd\u65b0\u8ba1\u7b97\u67d0\u4e9b\u6570\u636e</strong>\uff0c\u8bf7<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#what-about-memoization\">\u4f7f\u7528 memoization helper \u4ee3\u66ff</a>\u3002</li>\n<li>\u5982\u679c\u4f60\u4f7f\u7528 <code class=\"language-javascript\">componentWillReceiveProps</code> \u662f\u4e3a\u4e86<strong>\u5728 prop \u66f4\u6539\u65f6\u201c\u91cd\u7f6e\u201d\u67d0\u4e9b state</strong>\uff0c\u8bf7\u8003\u8651\u4f7f\u7ec4\u4ef6<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-controlled-component\">\u5b8c\u5168\u53d7\u63a7</a>\u6216<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html#recommendation-fully-uncontrolled-component-with-a-key\">\u4f7f\u7528 <code class=\"language-javascript\">key</code> \u4f7f\u7ec4\u4ef6\u5b8c\u5168\u4e0d\u53d7\u63a7</a> \u4ee3\u66ff\u3002</li>\n</ul>\n<p>\u5bf9\u4e8e\u5176\u4ed6\u4f7f\u7528\u573a\u666f\uff0c<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html\">\u8bf7\u9075\u5faa\u6b64\u535a\u5ba2\u6587\u7ae0\u4e2d\u6709\u5173\u6d3e\u751f\u72b6\u6001\u7684\u5efa\u8bae</a>\u3002</p>\n</div>\n<p><code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code> \u4f1a\u5728\u5df2\u6302\u8f7d\u7684\u7ec4\u4ef6\u63a5\u6536\u65b0\u7684 props \u4e4b\u524d\u88ab\u8c03\u7528\u3002\u5982\u679c\u4f60\u9700\u8981\u66f4\u65b0\u72b6\u6001\u4ee5\u54cd\u5e94 prop \u66f4\u6539\uff08\u4f8b\u5982\uff0c\u91cd\u7f6e\u5b83\uff09\uff0c\u4f60\u53ef\u4ee5\u6bd4\u8f83 <code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">nextProps</code> \u5e76\u5728\u6b64\u65b9\u6cd5\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">this.setState()</code> \u6267\u884c state \u8f6c\u6362\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u7236\u7ec4\u4ef6\u5bfc\u81f4\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u5373\u4f7f props \u6ca1\u6709\u66f4\u6539\uff0c\u4e5f\u4f1a\u8c03\u7528\u6b64\u65b9\u6cd5\u3002\u5982\u679c\u53ea\u60f3\u5904\u7406\u66f4\u6539\uff0c\u8bf7\u786e\u4fdd\u8fdb\u884c\u5f53\u524d\u503c\u4e0e\u53d8\u66f4\u503c\u7684\u6bd4\u8f83\u3002</p>\n<p>\u5728<a href=\"/react/react-component#mounting\">\u6302\u8f7d</a>\u8fc7\u7a0b\u4e2d\uff0cReact \u4e0d\u4f1a\u9488\u5bf9\u521d\u59cb props \u8c03\u7528 <code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code>\u3002\u7ec4\u4ef6\u53ea\u4f1a\u5728\u7ec4\u4ef6\u7684 props \u66f4\u65b0\u65f6\u8c03\u7528\u6b64\u65b9\u6cd5\u3002\u8c03\u7528 <code class=\"language-javascript\">this.setState()</code> \u901a\u5e38\u4e0d\u4f1a\u89e6\u53d1 <code class=\"language-javascript\">UNSAFE_componentWillReceiveProps()</code>\u3002</p>\n\n<h3 id=\"unsafe_componentwillupdate\"><a class=\"anchor\" href=\"/react/react-component#unsafe_componentwillupdate\"></a><code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">UNSAFE_componentWillUpdate</span><span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">,</span> nextState<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6b64\u751f\u547d\u5468\u671f\u4e4b\u524d\u540d\u4e3a <code class=\"language-javascript\">componentWillUpdate</code>\u3002\u8be5\u540d\u79f0\u5c06\u7ee7\u7eed\u4f7f\u7528\u81f3 React 17\u3002\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/reactjs/react-codemod#rename-unsafe-lifecycles\"><code class=\"language-javascript\">rename-unsafe-lifecycles</code> codemod</a> \u81ea\u52a8\u66f4\u65b0\u4f60\u7684\u7ec4\u4ef6\u3002</p>\n</div>\n<p>\u5f53\u7ec4\u4ef6\u6536\u5230\u65b0\u7684 props \u6216 state \u65f6\uff0c\u4f1a\u5728\u6e32\u67d3\u4e4b\u524d\u8c03\u7528 <code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code>\u3002\u4f7f\u7528\u6b64\u4f5c\u4e3a\u5728\u66f4\u65b0\u53d1\u751f\u4e4b\u524d\u6267\u884c\u51c6\u5907\u66f4\u65b0\u7684\u673a\u4f1a\u3002\u521d\u59cb\u6e32\u67d3\u4e0d\u4f1a\u8c03\u7528\u6b64\u65b9\u6cd5\u3002</p>\n<p>\u6ce8\u610f\uff0c\u4f60\u4e0d\u80fd\u6b64\u65b9\u6cd5\u4e2d\u8c03\u7528 <code class=\"language-javascript\">this.setState()</code>\uff1b\u5728 <code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code> \u8fd4\u56de\u4e4b\u524d\uff0c\u4f60\u4e5f\u4e0d\u5e94\u8be5\u6267\u884c\u4efb\u4f55\u5176\u4ed6\u64cd\u4f5c\uff08\u4f8b\u5982\uff0cdispatch Redux \u7684 action\uff09\u89e6\u53d1\u5bf9 React \u7ec4\u4ef6\u7684\u66f4\u65b0</p>\n<p>\u901a\u5e38\uff0c\u6b64\u65b9\u6cd5\u53ef\u4ee5\u66ff\u6362\u4e3a <code class=\"language-javascript\">componentDidUpdate()</code>\u3002\u5982\u679c\u4f60\u5728\u6b64\u65b9\u6cd5\u4e2d\u8bfb\u53d6 DOM \u4fe1\u606f\uff08\u4f8b\u5982\uff0c\u4e3a\u4e86\u4fdd\u5b58\u6eda\u52a8\u4f4d\u7f6e\uff09\uff0c\u5219\u53ef\u4ee5\u5c06\u6b64\u903b\u8f91\u79fb\u81f3 <code class=\"language-javascript\">getSnapshotBeforeUpdate()</code> \u4e2d\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c <code class=\"language-javascript\">shouldComponentUpdate()</code> \u8fd4\u56de false\uff0c\u5219\u4e0d\u4f1a\u8c03\u7528 <code class=\"language-javascript\">UNSAFE_componentWillUpdate()</code>\u3002</p>\n</div>\n\n<h2 id=\"other-apis-1\"><a class=\"anchor\" href=\"/react/react-component#other-apis-1\"></a>\u5176\u4ed6 API </h2>\n<p>\u4e0d\u540c\u4e8e\u4e0a\u8ff0\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff08React \u4e3b\u52a8\u8c03\u7528\uff09\uff0c\u4ee5\u4e0b\u65b9\u6cd5\u662f\u4f60\u53ef\u4ee5\u5728\u7ec4\u4ef6\u4e2d\u8c03\u7528\u7684\u65b9\u6cd5\u3002</p>\n<p>\u53ea\u6709\u4e24\u4e2a\u65b9\u6cd5\uff1a<code class=\"language-javascript\">setState()</code> \u548c <code class=\"language-javascript\">forceUpdate()</code>\u3002</p>\n<h3 id=\"setstate\"><a class=\"anchor\" href=\"/react/react-component#setstate\"></a><code class=\"language-javascript\">setState()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>updater<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">setState()</code> \u5c06\u5bf9\u7ec4\u4ef6 state \u7684\u66f4\u6539\u6392\u5165\u961f\u5217\uff0c\u5e76\u901a\u77e5 React \u9700\u8981\u4f7f\u7528\u66f4\u65b0\u540e\u7684 state \u91cd\u65b0\u6e32\u67d3\u6b64\u7ec4\u4ef6\u53ca\u5176\u5b50\u7ec4\u4ef6\u3002\u8fd9\u662f\u7528\u4e8e\u66f4\u65b0\u7528\u6237\u754c\u9762\u4ee5\u54cd\u5e94\u4e8b\u4ef6\u5904\u7406\u5668\u548c\u5904\u7406\u670d\u52a1\u5668\u6570\u636e\u7684\u4e3b\u8981\u65b9\u5f0f</p>\n<p>\u5c06 <code class=\"language-javascript\">setState()</code> \u89c6\u4e3a<em>\u8bf7\u6c42</em>\u800c\u4e0d\u662f\u7acb\u5373\u66f4\u65b0\u7ec4\u4ef6\u7684\u547d\u4ee4\u3002\u4e3a\u4e86\u66f4\u597d\u7684\u611f\u77e5\u6027\u80fd\uff0cReact \u4f1a\u5ef6\u8fdf\u8c03\u7528\u5b83\uff0c\u7136\u540e\u901a\u8fc7\u4e00\u6b21\u4f20\u9012\u66f4\u65b0\u591a\u4e2a\u7ec4\u4ef6\u3002\u5728\u7f55\u89c1\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u5f3a\u5236 DOM \u66f4\u65b0\u540c\u6b65\u5e94\u7528\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <a href=\"/react/react-dom#flushsync\"><code class=\"language-javascript\">flushSync</code></a> \u6765\u5305\u88c5\u5b83\uff0c\u4f46\u8fd9\u53ef\u80fd\u4f1a\u635f\u5bb3\u6027\u80fd\u3002</p>\n<p><code class=\"language-javascript\">setState()</code> \u5e76\u4e0d\u603b\u662f\u7acb\u5373\u66f4\u65b0\u7ec4\u4ef6\u3002\u5b83\u4f1a\u6279\u91cf\u63a8\u8fdf\u66f4\u65b0\u3002\u8fd9\u4f7f\u5f97\u5728\u8c03\u7528 <code class=\"language-javascript\">setState()</code> \u540e\u7acb\u5373\u8bfb\u53d6 <code class=\"language-javascript\">this.state</code> \u6210\u4e3a\u4e86\u9690\u60a3\u3002\u4e3a\u4e86\u6d88\u9664\u9690\u60a3\uff0c\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">componentDidUpdate</code> \u6216\u8005 <code class=\"language-javascript\">setState</code> \u7684\u56de\u8c03\u51fd\u6570\uff08<code class=\"language-javascript\">setState(updater, callback)</code>\uff09\uff0c\u8fd9\u4e24\u79cd\u65b9\u5f0f\u90fd\u53ef\u4ee5\u4fdd\u8bc1\u5728\u5e94\u7528\u66f4\u65b0\u540e\u89e6\u53d1\u3002\u5982\u9700\u57fa\u4e8e\u4e4b\u524d\u7684 state \u6765\u8bbe\u7f6e\u5f53\u524d\u7684 state\uff0c\u8bf7\u9605\u8bfb\u4e0b\u8ff0\u5173\u4e8e\u53c2\u6570 <code class=\"language-javascript\">updater</code> \u7684\u5185\u5bb9\u3002</p>\n<p>\u9664\u975e <code class=\"language-javascript\">shouldComponentUpdate()</code> \u8fd4\u56de <code class=\"language-javascript\">false</code>\uff0c\u5426\u5219 <code class=\"language-javascript\">setState()</code> \u5c06\u59cb\u7ec8\u6267\u884c\u91cd\u65b0\u6e32\u67d3\u64cd\u4f5c\u3002\u5982\u679c\u53ef\u53d8\u5bf9\u8c61\u88ab\u4f7f\u7528\uff0c\u4e14\u65e0\u6cd5\u5728 <code class=\"language-javascript\">shouldComponentUpdate()</code> \u4e2d\u5b9e\u73b0\u6761\u4ef6\u6e32\u67d3\uff0c\u90a3\u4e48\u4ec5\u5728\u65b0\u65e7\u72b6\u6001\u4e0d\u4e00\u65f6\u8c03\u7528 <code class=\"language-javascript\">setState()</code>\u53ef\u4ee5\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u6e32\u67d3</p>\n<p>\u53c2\u6570\u4e00\u4e3a\u5e26\u6709\u5f62\u5f0f\u53c2\u6570\u7684 <code class=\"language-javascript\">updater</code> \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> stateChange</code></pre></div>\n<p><code class=\"language-javascript\">state</code> \u662f\u5bf9\u5e94\u7528\u53d8\u5316\u65f6\u7ec4\u4ef6\u72b6\u6001\u7684\u5f15\u7528\u3002\u5f53\u7136\uff0c\u5b83\u4e0d\u5e94\u76f4\u63a5\u88ab\u4fee\u6539\u3002\u4f60\u5e94\u8be5\u4f7f\u7528\u57fa\u4e8e <code class=\"language-javascript\">state</code> \u548c <code class=\"language-javascript\">props</code> \u6784\u5efa\u7684\u65b0\u5bf9\u8c61\u6765\u8868\u793a\u53d8\u5316\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u60f3\u6839\u636e <code class=\"language-javascript\">props.step</code> \u6765\u589e\u52a0 state\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">counter</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>step<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>updater \u51fd\u6570\u4e2d\u63a5\u6536\u7684 <code class=\"language-javascript\">state</code> \u548c <code class=\"language-javascript\">props</code> \u90fd\u4fdd\u8bc1\u4e3a\u6700\u65b0\u3002updater \u7684\u8fd4\u56de\u503c\u4f1a\u4e0e <code class=\"language-javascript\">state</code> \u8fdb\u884c\u6d45\u5408\u5e76\u3002</p>\n<p><code class=\"language-javascript\">setState()</code> \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u53ef\u9009\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5b83\u5c06\u5728 <code class=\"language-javascript\">setState</code> \u5b8c\u6210\u5408\u5e76\u5e76\u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6\u540e\u6267\u884c\u3002\u901a\u5e38\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <code class=\"language-javascript\">componentDidUpdate()</code> \u6765\u4ee3\u66ff\u6b64\u65b9\u5f0f\u3002</p>\n<p><code class=\"language-javascript\">setState()</code> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u9664\u4e86\u63a5\u53d7\u51fd\u6570\u5916\uff0c\u8fd8\u53ef\u4ee5\u63a5\u53d7\u5bf9\u8c61\u7c7b\u578b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>stateChange<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">stateChange</code> \u4f1a\u5c06\u4f20\u5165\u7684\u5bf9\u8c61\u6d45\u5c42\u5408\u5e76\u5230\u65b0\u7684 state \u4e2d\uff0c\u4f8b\u5982\uff0c\u8c03\u6574\u8d2d\u7269\u8f66\u5546\u54c1\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u8fd9\u79cd\u5f62\u5f0f\u7684 <code class=\"language-javascript\">setState()</code> \u4e5f\u662f\u5f02\u6b65\u7684\uff0c\u5e76\u4e14\u5728\u540c\u4e00\u5468\u671f\u5185\u4f1a\u5bf9\u591a\u4e2a <code class=\"language-javascript\">setState</code> \u8fdb\u884c\u6279\u5904\u7406\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5728\u540c\u4e00\u5468\u671f\u5185\u591a\u6b21\u8bbe\u7f6e\u5546\u54c1\u6570\u91cf\u589e\u52a0\uff0c\u5219\u76f8\u5f53\u4e8e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-javascript\"><code class=\"language-javascript\">Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n  previousState<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>quantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>quantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u540e\u8c03\u7528\u7684 <code class=\"language-javascript\">setState()</code> \u5c06\u8986\u76d6\u540c\u4e00\u5468\u671f\u5185\u5148\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u7684\u503c\uff0c\u56e0\u6b64\u5546\u54c1\u6570\u4ec5\u589e\u52a0\u4e00\u6b21\u3002\u5982\u679c\u540e\u7eed\u72b6\u6001\u53d6\u51b3\u4e8e\u5f53\u524d\u72b6\u6001\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 updater \u51fd\u6570\u7684\u5f62\u5f0f\u4ee3\u66ff\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">quantity</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>quantity <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a</p>\n<ul>\n<li><a href=\"/react/state-and-lifecycle\">State \u548c\u751f\u547d\u5468\u671f\u6307\u5357</a></li>\n<li><a class=\"external-link\" href=\"https://stackoverflow.com/a/48610973/458193\">\u6df1\u5165\u5b66\u4e60\uff1a\u4f55\u65f6\u4ee5\u53ca\u4e3a\u4ec0\u4e48 <code class=\"language-javascript\">setState()</code> \u4f1a\u6279\u91cf\u6267\u884c\uff1f</a></li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/issues/11527#issuecomment-360199710\">\u6df1\u5165\uff1a\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u66f4\u65b0 <code class=\"language-javascript\">this.state</code>\uff1f</a></li>\n</ul>\n\n<h3 id=\"forceupdate\"><a class=\"anchor\" href=\"/react/react-component#forceupdate\"></a><code class=\"language-javascript\">forceUpdate()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">component<span class=\"token punctuation\">.</span><span class=\"token function\">forceUpdate</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53\u7ec4\u4ef6\u7684 state \u6216 props \u53d1\u751f\u53d8\u5316\u65f6\uff0c\u7ec4\u4ef6\u5c06\u91cd\u65b0\u6e32\u67d3\u3002\u5982\u679c <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u4f9d\u8d56\u4e8e\u5176\u4ed6\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u8c03\u7528 <code class=\"language-javascript\">forceUpdate()</code> \u5f3a\u5236\u8ba9\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002</p>\n<p>\u8c03\u7528 <code class=\"language-javascript\">forceUpdate()</code> \u5c06\u81f4\u4f7f\u7ec4\u4ef6\u8c03\u7528 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\uff0c\u6b64\u64cd\u4f5c\u4f1a\u8df3\u8fc7\u8be5\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">shouldComponentUpdate()</code>\u3002\u4f46\u5176\u5b50\u7ec4\u4ef6\u4f1a\u89e6\u53d1\u6b63\u5e38\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u5305\u62ec <code class=\"language-javascript\">shouldComponentUpdate()</code> \u65b9\u6cd5\u3002\u5982\u679c\u6807\u8bb0\u53d1\u751f\u53d8\u5316\uff0cReact \u4ecd\u5c06\u53ea\u66f4\u65b0 DOM\u3002</p>\n<p>\u901a\u5e38\u4f60\u5e94\u8be5\u907f\u514d\u4f7f\u7528 <code class=\"language-javascript\">forceUpdate()</code>\uff0c\u5c3d\u91cf\u5728 <code class=\"language-javascript\">render()</code> \u4e2d\u4f7f\u7528 <code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">this.state</code>\u3002</p>\n\n<h2 id=\"class-properties-1\"><a class=\"anchor\" href=\"/react/react-component#class-properties-1\"></a>Class \u5c5e\u6027 </h2>\n<h3 id=\"defaultprops\"><a class=\"anchor\" href=\"/react/react-component#defaultprops\"></a><code class=\"language-javascript\">defaultProps</code> </h3>\n<p><code class=\"language-javascript\">defaultProps</code> \u53ef\u4ee5\u4e3a Class \u7ec4\u4ef6\u6dfb\u52a0\u9ed8\u8ba4 props\u3002\u8fd9\u4e00\u822c\u7528\u4e8e props \u672a\u8d4b\u503c\uff0c\u4f46\u53c8\u4e0d\u80fd\u4e3a <code class=\"language-javascript\">null</code> \u7684\u60c5\u51b5\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\nCustomButton<span class=\"token punctuation\">.</span>defaultProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u672a\u63d0\u4f9b <code class=\"language-javascript\">props.color</code>\uff0c\u5219\u9ed8\u8ba4\u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">'blue'</code></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomButton</span></span> <span class=\"token punctuation\">/&gt;</span></span> <span class=\"token punctuation\">;</span> <span class=\"token comment\">// props.color \u5c06\u8bbe\u7f6e\u4e3a 'blue'</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c <code class=\"language-javascript\">props.color</code> \u88ab\u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">null</code>\uff0c\u5219\u5b83\u5c06\u4fdd\u6301\u4e3a <code class=\"language-javascript\">null</code></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CustomButton</span></span> <span class=\"token attr-name\">color</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span> <span class=\"token punctuation\">;</span> <span class=\"token comment\">// props.color \u5c06\u4fdd\u6301\u662f null</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n\n<h3 id=\"displayname\"><a class=\"anchor\" href=\"/react/react-component#displayname\"></a><code class=\"language-javascript\">displayName</code> </h3>\n<p><code class=\"language-javascript\">displayName</code> \u5b57\u7b26\u4e32\u591a\u7528\u4e8e\u8c03\u8bd5\u6d88\u606f\u3002\u901a\u5e38\uff0c\u4f60\u4e0d\u9700\u8981\u8bbe\u7f6e\u5b83\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u6839\u636e\u51fd\u6570\u7ec4\u4ef6\u6216 class \u7ec4\u4ef6\u7684\u540d\u79f0\u63a8\u65ad\u51fa\u6765\u3002\u5982\u679c\u8c03\u8bd5\u65f6\u9700\u8981\u663e\u793a\u4e0d\u540c\u7684\u540d\u79f0\u6216\u521b\u5efa\u9ad8\u9636\u7ec4\u4ef6\uff0c\u8bf7\u53c2\u9605<a href=\"/react/higher-order-components#convention-wrap-the-display-name-for-easy-debugging\">\u4f7f\u7528 displayname \u8f7b\u677e\u8fdb\u884c\u8c03\u8bd5</a>\u4e86\u89e3\u66f4\u591a\u3002</p>\n\n<h2 id=\"instance-properties-1\"><a class=\"anchor\" href=\"/react/react-component#instance-properties-1\"></a>\u5b9e\u4f8b\u5c5e\u6027 </h2>\n<h3 id=\"props\"><a class=\"anchor\" href=\"/react/react-component#props\"></a><code class=\"language-javascript\">props</code> </h3>\n<p><code class=\"language-javascript\">this.props</code> \u5305\u62ec\u88ab\u8be5\u7ec4\u4ef6\u8c03\u7528\u8005\u5b9a\u4e49\u7684 props\u3002\u6b32\u4e86\u89e3 props \u7684\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u9605<a href=\"/react/components-and-props\">\u7ec4\u4ef6 &amp; Props</a>\u3002</p>\n<p>\u9700\u7279\u522b\u6ce8\u610f\uff0c<code class=\"language-javascript\">this.props.children</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u7684 prop\uff0c\u901a\u5e38\u7531 JSX \u8868\u8fbe\u5f0f\u4e2d\u7684\u5b50\u7ec4\u4ef6\u7ec4\u6210\uff0c\u800c\u975e\u7ec4\u4ef6\u672c\u8eab\u5b9a\u4e49\u3002</p>\n<h3 id=\"state\"><a class=\"anchor\" href=\"/react/react-component#state\"></a><code class=\"language-javascript\">state</code> </h3>\n<p>\u7ec4\u4ef6\u4e2d\u7684 state \u5305\u542b\u4e86\u968f\u65f6\u53ef\u80fd\u53d1\u751f\u53d8\u5316\u7684\u6570\u636e\u3002state \u7531\u7528\u6237\u81ea\u5b9a\u4e49\uff0c\u5b83\u662f\u4e00\u4e2a\u666e\u901a JavaScript \u5bf9\u8c61\u3002</p>\n<p>\u5982\u679c\u67d0\u4e9b\u503c\u672a\u7528\u4e8e\u6e32\u67d3\u6216\u6570\u636e\u6d41\uff08\u4f8b\u5982\uff0c\u8ba1\u65f6\u5668 ID\uff09\uff0c\u5219\u4e0d\u5fc5\u5c06\u5176\u8bbe\u7f6e\u4e3a state\u3002\u6b64\u7c7b\u503c\u53ef\u4ee5\u5728\u7ec4\u4ef6\u5b9e\u4f8b\u4e0a\u5b9a\u4e49\u3002</p>\n<p>\u6b32\u4e86\u89e3\u5173\u4e8e state \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 <a href=\"/react/state-and-lifecycle\">State &amp; \u751f\u547d\u5468\u671f</a>\u3002</p>\n<p>\u6c38\u8fdc\u4e0d\u8981\u76f4\u63a5\u6539\u53d8 <code class=\"language-javascript\">this.state</code>\uff0c\u56e0\u4e3a\u540e\u7eed\u8c03\u7528\u7684 <code class=\"language-javascript\">setState()</code> \u53ef\u80fd\u4f1a\u66ff\u6362\u6389\u4f60\u7684\u6539\u53d8\u3002\u8bf7\u628a <code class=\"language-javascript\">this.state</code> \u770b\u4f5c\u662f\u4e0d\u53ef\u53d8\u7684\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-react-component.md\">Edit this page</a></p></div></article>", "path": "/react/react-component", "nav": ["/react/react-api", "/react/react-dom"]}, {"key": "ReactDOM", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><code class=\"language-javascript\">react-dom</code> \u5305\u63d0\u4f9b\u4e86\u7528\u6237 DOM \u7684\u7279\u5b9a\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728\u4f60\u5e94\u7528\u7a0b\u5e8f\u7684\u9876\u5c42\u8fdb\u884c\u4f7f\u7528\uff0c\u5982\u679c\u4f60\u6709\u9700\u8981\u7684\u8bdd\uff0c\u8fd8\u53ef\u4ee5\u4f5c\u4e3a\u5e94\u6025\u65b9\u6848\uff0c\u5728 React \u6a21\u578b\u4ee5\u5916\u7684\u5730\u65b9\u4f7f\u7528\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 npm \u548c ES5\uff0c\u4f60\u53ef\u4ee5\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> ReactDOM <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">react-dom</code> \u5305\u8fd8\u63d0\u4f9b\u4e86\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u5e94\u7528\u7a0b\u5e8f\u7684\u7279\u5b9a\u6a21\u5757\uff1a</p>\n<ul>\n<li><a href=\"/react/react-dom-client\"><code class=\"language-javascript\">react-dom/client</code></a></li>\n<li><a href=\"/react/react-dom-server\"><code class=\"language-javascript\">react-dom/server</code></a></li>\n</ul>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/react-dom#overview\"></a>\u6982\u89c8 </h2>\n<p><code class=\"language-javascript\">react-dom</code> \u5305\u5bfc\u51fa\u4e86\u5982\u4e0b\u8fd9\u4e9b\u65b9\u6cd5\uff1a</p>\n<ul>\n<li><a href=\"/react/react-dom#createportal\"><code class=\"language-javascript\">createPortal()</code></a></li>\n<li><a href=\"/react/react-dom#flushsync\"><code class=\"language-javascript\">flushSync()</code></a></li>\n</ul>\n<p>\u5982\u4e0b\u8fd9\u4e9b\u65b9\u6cd5\u4e5f\u4f1a\u88ab <code class=\"language-javascript\">react-dom</code> \u5bfc\u51fa\uff0c\u4f46\u4f1a\u88ab\u8ba4\u4e3a\u662f\u9057\u5f03\uff1a</p>\n<ul>\n<li><a href=\"/react/react-dom#render\"><code class=\"language-javascript\">render()</code></a></li>\n<li><a href=\"/react/react-dom#hydrate\"><code class=\"language-javascript\">hydrate()</code></a></li>\n<li><a href=\"/react/react-dom#finddomnode\"><code class=\"language-javascript\">findDOMNode()</code></a></li>\n<li><a href=\"/react/react-dom#unmountcomponentatnode\"><code class=\"language-javascript\">unmountComponentAtNode()</code></a></li>\n</ul>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 React 18\uff0c<code class=\"language-javascript\">render</code> \u548c <code class=\"language-javascript\">hydrate</code> \u90fd\u88ab\u65b0\u7684 <a href=\"/react/react-dom-client\">\u5ba2\u6237\u7aef\u65b9\u6cd5</a> \u6240\u53d6\u4ee3\u3002\u8fd9\u4e9b\u65b9\u6cd5\u5c06\u8b66\u544a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u5c06\u8868\u73b0\u5f97\u50cf\u8fd0\u884c React 17 \u4e00\u6837\uff08\u6b32\u4e86\u89e3\u66f4\u591a\u8bf7\u53c2\u9605 <a class=\"external-link\" href=\"https://reactjs.org/link/switch-to-createroot\">\u6b64\u5904</a>\uff09\u3002</p>\n</div>\n<h3 id=\"browser-support\"><a class=\"anchor\" href=\"/react/react-dom#browser-support\"></a>\u6d4f\u89c8\u5668\u652f\u6301 </h3>\n<p>React \u652f\u6301\u6240\u6709\u7684\u73b0\u4ee3\u6d4f\u89c8\u5668\uff0c\u5c3d\u7ba1\u5bf9\u4e8e\u65e7\u7248\u672c\u6765\u8bf4\uff0c\u53ef\u80fd\u9700\u8981\u5f15\u5165 <a href=\"/react/javascript-environment-requirements\">\u76f8\u5173\u7684 polyfills \u4f9d\u8d56</a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u6211\u4eec\u4e0d\u652f\u6301\u90a3\u4e9b\u4e0d\u517c\u5bb9 ES5 \u65b9\u6cd5\u7684\u65e7\u7248\u6d4f\u89c8\u5668\uff0c\u4f46\u5982\u679c\u4f60\u7684\u5e94\u7528\u5305\u542b\u4e86 polyfill\uff0c\u4f8b\u5982 <a class=\"external-link\" href=\"https://github.com/es-shims/es5-shim\">es5-shim \u548c es5-sham</a> \u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\u4f60\u7684\u5e94\u7528\u4ecd\u7136\u53ef\u4ee5\u5728\u8fd9\u4e9b\u6d4f\u89c8\u5668\u4e2d\u6b63\u5e38\u8fd0\u884c\u3002\u4f46\u662f\u5982\u679c\u4f60\u9009\u62e9\u8fd9\u79cd\u65b9\u6cd5\uff0c\u4f60\u4fbf\u9700\u8981\u5b64\u519b\u594b\u6218\u4e86\u3002</p>\n</div>\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/react-dom#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"createportal\"><a class=\"anchor\" href=\"/react/react-dom#createportal\"></a><code class=\"language-javascript\">createPortal()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u521b\u5efa portal\u3002<a href=\"/react/portals\">Portal</a> \u63d0\u4f9b\u4e86\u4e00\u79cd\u5c06\u5b50\u8282\u70b9\u6e32\u67d3\u5230\u5df2 DOM \u8282\u70b9\u4e2d\u7684\u65b9\u5f0f\uff0c\u8be5\u8282\u70b9\u5b58\u5728\u4e8e DOM \u7ec4\u4ef6\u7684\u5c42\u6b21\u7ed3\u6784\u4e4b\u5916\u3002</p>\n<h3 id=\"flushsync\"><a class=\"anchor\" href=\"/react/react-dom#flushsync\"></a><code class=\"language-javascript\">flushSync()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">flushSync</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5f3a\u5236 React \u540c\u6b65\u5237\u65b0\u63d0\u4f9b\u7684\u56de\u8c03\u51fd\u6570\u4e2d\u7684\u4efb\u4f55\u66f4\u65b0\u3002\u8fd9\u786e\u4fdd\u4e86 DOM \u4f1a\u88ab\u7acb\u5373 \u66f4\u65b0\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Force this state update to be synchronous.</span>\n<span class=\"token function\">flushSync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// By this point, DOM is updated.</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">flushSync</code> \u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u5f88\u5927\u5f71\u54cd\u3002\u5c3d\u91cf\u5c11\u7528\u3002</p>\n<p><code class=\"language-javascript\">flushSync</code> \u53ef\u80fd\u4f1a\u8feb\u4f7f\u60ac\u800c\u672a\u51b3\u7684 Suspense \u8fb9\u754c\u663e\u793a\u5176 <code class=\"language-javascript\">fallback</code> \u7684\u72b6\u6001\u3002</p>\n<p><code class=\"language-javascript\">flushSync</code> \u4e5f\u53ef\u4ee5\u8fd0\u884c\u5f85\u5b9a\u526f\u4f5c\u7528\uff0c\u5e76\u5728\u8fd4\u56de\u4e4b\u524d\u540c\u6b65\u5e94\u7528\u5b83\u4eec\u6240\u5305\u542b\u7684\u4efb\u4f55\u66f4\u65b0\u3002</p>\n<p>\u5f53\u9700\u8981\u5237\u65b0\u5185\u90e8\u7684\u66f4\u65b0\u65f6\uff0c<code class=\"language-javascript\">flushSync</code> \u4e5f\u53ef\u4ee5\u5728\u56de\u8c03\u5916\u90e8\u5237\u65b0\u66f4\u65b0\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6709\u6765\u81ea\u70b9\u51fb\u7684\u672a\u51b3\u66f4\u65b0\u3002React \u53ef\u80fd\u4f1a\u5728\u5237\u65b0\u56de\u8c03\u4e4b\u524d\u5237\u65b0\u8fd9\u4e9b\u66f4\u65b0\u3002</p>\n</div>\n<h2 id=\"legacy-reference\"><a class=\"anchor\" href=\"/react/react-dom#legacy-reference\"></a>\u9057\u7559\u65b9\u6cd5\u53c2\u8003 </h2>\n<h3 id=\"render\"><a class=\"anchor\" href=\"/react/react-dom#render\"></a><code class=\"language-javascript\">render()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 React 18 \u4e2d\uff0c<code class=\"language-javascript\">render</code> \u51fd\u6570\u5df2\u88ab <code class=\"language-javascript\">createRoot</code> \u51fd\u6570\u6240\u53d6\u4ee3\u3002\u5177\u4f53\u8bf7\u53c2\u9605 <a href=\"/react/react-dom-client#createroot\">createRoot</a> \u4ee5\u4e86\u89e3\u66f4\u591a\u3002</p>\n</div>\n<p>\u5728\u63d0\u4f9b\u7684 <code class=\"language-javascript\">container</code> \u91cc\u6e32\u67d3\u4e00\u4e2a React \u5143\u7d20\uff0c\u5e76\u8fd4\u56de\u5bf9\u8be5\u7ec4\u4ef6\u7684<a href=\"/react/more-about-refs\">\u5f15\u7528</a>\uff08\u6216\u8005\u9488\u5bf9<a href=\"/react/components-and-props#function-and-class-components\">\u65e0\u72b6\u6001\u7ec4\u4ef6</a>\u8fd4\u56de <code class=\"language-javascript\">null</code>\uff09\u3002</p>\n<p>\u5982\u679c React \u5143\u7d20\u4e4b\u524d\u5df2\u7ecf\u5728 <code class=\"language-javascript\">container</code> \u91cc\u6e32\u67d3\u8fc7\uff0c\u8fd9\u5c06\u4f1a\u5bf9\u5176\u6267\u884c\u66f4\u65b0\u64cd\u4f5c\uff0c\u5e76\u4ec5\u4f1a\u5728\u5fc5\u8981\u65f6\u6539\u53d8 DOM \u4ee5\u6620\u5c04\u6700\u65b0\u7684 React \u5143\u7d20\u3002</p>\n<p>\u5982\u679c\u63d0\u4f9b\u4e86\u53ef\u9009\u7684\u56de\u8c03\u51fd\u6570\uff0c\u8be5\u56de\u8c03\u5c06\u5728\u7ec4\u4ef6\u88ab\u6e32\u67d3\u6216\u66f4\u65b0\u4e4b\u540e\u88ab\u6267\u884c\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">render()</code> \u4f1a\u63a7\u5236\u4f60\u4f20\u5165\u5bb9\u5668\u8282\u70b9\u91cc\u7684\u5185\u5bb9\u3002\u5f53\u9996\u6b21\u8c03\u7528\u65f6\uff0c\u5bb9\u5668\u8282\u70b9\u91cc\u7684\u6240\u6709 DOM \u5143\u7d20\u90fd\u4f1a\u88ab\u66ff\u6362\uff0c\u540e\u7eed\u7684\u8c03\u7528\u5219\u4f1a\u4f7f\u7528 React \u7684 DOM \u5dee\u5206\u7b97\u6cd5\uff08DOM diffing algorithm\uff09\u8fdb\u884c\u9ad8\u6548\u7684\u66f4\u65b0\u3002</p>\n<p><code class=\"language-javascript\">render()</code> \u4e0d\u4f1a\u4fee\u6539\u5bb9\u5668\u8282\u70b9\uff08\u53ea\u4f1a\u4fee\u6539\u5bb9\u5668\u7684\u5b50\u8282\u70b9\uff09\u3002\u53ef\u4ee5\u5728\u4e0d\u8986\u76d6\u73b0\u6709\u5b50\u8282\u70b9\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u7ec4\u4ef6\u63d2\u5165\u5df2\u6709\u7684 DOM \u8282\u70b9\u4e2d\u3002</p>\n<p><code class=\"language-javascript\">render()</code> \u76ee\u524d\u4f1a\u8fd4\u56de\u5bf9\u6839\u7ec4\u4ef6 <code class=\"language-javascript\">ReactComponent</code> \u5b9e\u4f8b\u7684\u5f15\u7528\u3002\n\u4f46\u662f\uff0c\u76ee\u524d\u5e94\u8be5\u907f\u514d\u4f7f\u7528\u8fd4\u56de\u7684\u5f15\u7528\uff0c\u56e0\u4e3a\u5b83\u662f\u5386\u53f2\u9057\u7559\u4e0b\u6765\u7684\u5185\u5bb9\uff0c\u800c\u4e14\u5728\u672a\u6765\u7248\u672c\u7684 React \u4e2d\uff0c\u7ec4\u4ef6\u6e32\u67d3\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u662f\u5f02\u6b65\u7684\u3002\n\u5982\u679c\u4f60\u771f\u7684\u9700\u8981\u83b7\u5f97\u5bf9\u6839\u7ec4\u4ef6 <code class=\"language-javascript\">ReactComponent</code> \u5b9e\u4f8b\u7684\u5f15\u7528\uff0c\u90a3\u4e48\u63a8\u8350\u4e3a\u6839\u5143\u7d20\u6dfb\u52a0 <a href=\"/react/refs-and-the-dom#callback-refs\">callback ref</a>\u3002</p>\n<p>\u4f7f\u7528 <code class=\"language-javascript\">render()</code> \u5bf9\u670d\u52a1\u7aef\u6e32\u67d3\u5bb9\u5668\u8fdb\u884c hydrate \u64cd\u4f5c\u7684\u65b9\u5f0f\u5df2\u7ecf\u88ab\u5e9f\u5f03\uff0c\u5e76\u4e14\u4f1a\u5728 React 17 \u88ab\u79fb\u9664\u3002\u4f5c\u4e3a\u66ff\u4ee3\uff0c\u8bf7\u4f7f\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">hydrateRoot()</code></a>\u3002</p>\n</div>\n\n<h3 id=\"hydrate\"><a class=\"anchor\" href=\"/react/react-dom#hydrate\"></a><code class=\"language-javascript\">hydrate()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">hydrate</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 React 18 \u4e2d\uff0c\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">hydrateRoot</code> \u6765\u66ff\u4ee3 <code class=\"language-javascript\">hydrate</code>\u3002\u8bf7\u53c2\u9605 <a href=\"/react/react-dom-client#hydrateroot\">hydrateRoot</a> \u4ee5\u4e86\u89e3\u66f4\u591a\u3002</p>\n</div>\n<p>\u4e0e <a href=\"/react/react-dom#render\"><code class=\"language-javascript\">render()</code></a> \u76f8\u540c\uff0c\u4f46\u5b83\u7528\u4e8e\u5728 <a href=\"/react/react-dom-server\"><code class=\"language-javascript\">ReactDOMServer</code></a> \u6e32\u67d3\u7684\u5bb9\u5668\u4e2d\u5bf9 HTML \u7684\u5185\u5bb9\u8fdb\u884c hydrate \u64cd\u4f5c\u3002React \u4f1a\u5c1d\u8bd5\u5728\u5df2\u6709\u6807\u8bb0\u4e0a\u7ed1\u5b9a\u4e8b\u4ef6\u76d1\u542c\u5668\u3002</p>\n<p>React \u5e0c\u671b\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u6e32\u67d3\u7684\u5185\u5bb9\u5b8c\u5168\u4e00\u81f4\u3002React \u53ef\u4ee5\u5f25\u8865\u6587\u672c\u5185\u5bb9\u7684\u5dee\u5f02\uff0c\u4f46\u662f\u4f60\u9700\u8981\u5c06\u4e0d\u5339\u914d\u7684\u5730\u65b9\u4f5c\u4e3a bug \u8fdb\u884c\u4fee\u590d\u3002\u5728\u5f00\u53d1\u8005\u6a21\u5f0f\u4e0b\uff0cReact \u4f1a\u5bf9 hydration \u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u7684\u4e0d\u5339\u914d\u8fdb\u884c\u8b66\u544a\u3002\u4f46\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u5728\u4e0d\u5339\u914d\u7684\u60c5\u51b5\u4e0b\uff0c\u4fee\u8865\u5c5e\u6027\u7684\u5dee\u5f02\u3002\u7531\u4e8e\u6027\u80fd\u7684\u5173\u7cfb\uff0c\u8fd9\u4e00\u70b9\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u5927\u591a\u662f\u5e94\u7528\u4e2d\u4e0d\u5339\u914d\u7684\u60c5\u51b5\u5f88\u5c11\u89c1\uff0c\u5e76\u4e14\u9a8c\u8bc1\u6240\u6709\u6807\u8bb0\u7684\u6210\u672c\u975e\u5e38\u6602\u8d35\u3002</p>\n<p>\u5982\u679c\u5355\u4e2a\u5143\u7d20\u7684\u5c5e\u6027\u6216\u8005\u6587\u672c\u5185\u5bb9\uff0c\u5728\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u6709\u65e0\u6cd5\u907f\u514d\u5dee\u5f02\uff08\u6bd4\u5982\uff1a\u65f6\u95f4\u6233\uff09\uff0c\u5219\u53ef\u4ee5\u4e3a\u5143\u7d20\u6dfb\u52a0 <code class=\"language-javascript\">suppressHydrationWarning={true}</code> \u6765\u6d88\u9664\u8b66\u544a\u3002\u8fd9\u79cd\u65b9\u5f0f\u53ea\u5728\u4e00\u7ea7\u6df1\u5ea6\u4e0a\u6709\u6548\uff0c\u5e94\u53ea\u4f5c\u4e3a\u4e00\u79cd\u5e94\u6025\u65b9\u6848\uff08escape hatch\uff09\u3002\u8bf7\u4e0d\u8981\u8fc7\u5ea6\u4f7f\u7528\uff01\u9664\u975e\u5b83\u662f\u6587\u672c\u5185\u5bb9\uff0c\u5426\u5219 React \u4ecd\u4e0d\u4f1a\u5c1d\u8bd5\u4fee\u8865\u5dee\u5f02\uff0c\u56e0\u6b64\u5728\u672a\u6765\u7684\u66f4\u65b0\u4e4b\u524d\uff0c\u4ecd\u4f1a\u4fdd\u6301\u4e0d\u4e00\u81f4\u3002</p>\n<p>\u5982\u679c\u4f60\u6267\u610f\u8981\u5728\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u6e32\u67d3\u4e0d\u540c\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u91c7\u7528\u53cc\u91cd\uff08two-pass\uff09\u6e32\u67d3\u3002\u5728\u5ba2\u6237\u7aef\u6e32\u67d3\u4e0d\u540c\u5185\u5bb9\u7684\u7ec4\u4ef6\u53ef\u4ee5\u8bfb\u53d6\u7c7b\u4f3c\u4e8e <code class=\"language-javascript\">this.state.isClient</code> \u7684 state \u53d8\u91cf\uff0c\u4f60\u53ef\u4ee5\u5728 <code class=\"language-javascript\">componentDidMount()</code> \u91cc\u5c06\u5b83\u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">true</code>\u3002\u8fd9\u79cd\u65b9\u5f0f\u5728\u521d\u59cb\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u4f1a\u4e0e\u670d\u52a1\u7aef\u6e32\u67d3\u76f8\u540c\u7684\u5185\u5bb9\uff0c\u4ece\u800c\u907f\u514d\u4e0d\u5339\u914d\u7684\u60c5\u51b5\u51fa\u73b0\uff0c\u4f46\u5728 hydration \u64cd\u4f5c\u4e4b\u540e\uff0c\u4f1a\u540c\u6b65\u8fdb\u884c\u989d\u5916\u7684\u6e32\u67d3\u64cd\u4f5c\u3002\u6ce8\u610f\uff0c\u56e0\u4e3a\u8fdb\u884c\u4e86\u4e24\u6b21\u6e32\u67d3\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u4f7f\u5f97\u7ec4\u4ef6\u6e32\u67d3\u53d8\u6162\uff0c\u8bf7\u5c0f\u5fc3\u4f7f\u7528\u3002</p>\n<p>\u8bb0\u5f97\u4fdd\u8bc1\u5f31\u7f51\u73af\u5883\u4e0b\u7684\u7528\u6237\u4f53\u9a8c\u3002JavaScript \u4ee3\u7801\u7684\u52a0\u8f7d\u8981\u6bd4\u6700\u521d\u7684 HTML \u6e32\u67d3\u665a\u7684\u591a\u3002\u56e0\u6b64\u5982\u679c\u4f60\u53ea\u5728\u5ba2\u6237\u7aef\u6e32\u67d3\u4e0d\u540c\u7684\u5185\u5bb9\uff0c\u5176\u8f6c\u6362\u53ef\u80fd\u4f1a\u4e0d\u7a33\u5b9a\u3002\u4f46\u662f\uff0c\u5982\u679c\u6267\u884c\u987a\u5229\uff0c\u90a3\u4e48\u5728\u670d\u52a1\u7aef\u8d1f\u8d23\u6e32\u67d3\u7684 shell \u4f1a\u5bf9\u6e32\u67d3\u63d0\u4f9b\u5e2e\u52a9\uff0c\u5e76\u4e14\u53ea\u663e\u793a\u5ba2\u6237\u7aef\u4e0a\u989d\u5916\u7684\u5c0f\u7ec4\u4ef6\u3002\u6b32\u4e86\u89e3\u5982\u4f55\u5728\u4e0d\u51fa\u73b0\u6807\u8bb0\u4e0d\u5339\u914d\u7684\u60c5\u51b5\u4e0b\u6267\u884c\u6b64\u64cd\u4f5c\uff0c\u8bf7\u53c2\u8003\u4e0a\u4e00\u6bb5\u7684\u89e3\u91ca\u3002</p>\n\n<h3 id=\"unmountcomponentatnode\"><a class=\"anchor\" href=\"/react/react-dom#unmountcomponentatnode\"></a><code class=\"language-javascript\">unmountComponentAtNode()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 React 18 \u4e2d\uff0c<code class=\"language-javascript\">unmountComponentAtNode</code> \u5df2\u88ab <code class=\"language-javascript\">root.unmount()</code> \u53d6\u4ee3\u3002\u5177\u4f53\u8bf7\u53c2\u9605 <a href=\"/react/react-dom-client#createroot\">createRoot</a> \u4ee5\u4e86\u89e3\u66f4\u591a\u3002</p>\n</div>\n<p>\u4ece DOM \u4e2d\u5378\u8f7d\u7ec4\u4ef6\uff0c\u4f1a\u5c06\u5176\u4e8b\u4ef6\u5904\u7406\u5668\uff08event handlers\uff09\u548c state \u4e00\u5e76\u6e05\u9664\u3002\u5982\u679c\u6307\u5b9a\u5bb9\u5668\u4e0a\u6ca1\u6709\u5bf9\u5e94\u5df2\u6302\u8f7d\u7684\u7ec4\u4ef6\uff0c\u8fd9\u4e2a\u51fd\u6570\u4ec0\u4e48\u4e5f\u4e0d\u4f1a\u505a\u3002\u5982\u679c\u7ec4\u4ef6\u88ab\u79fb\u9664\u5c06\u4f1a\u8fd4\u56de <code class=\"language-javascript\">true</code>\uff0c\u5982\u679c\u6ca1\u6709\u7ec4\u4ef6\u53ef\u88ab\u79fb\u9664\u5c06\u4f1a\u8fd4\u56de <code class=\"language-javascript\">false</code>\u3002</p>\n\n<h3 id=\"finddomnode\"><a class=\"anchor\" href=\"/react/react-dom#finddomnode\"></a><code class=\"language-javascript\">findDOMNode()</code> </h3>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p><code class=\"language-javascript\">findDOMNode</code> \u662f\u4e00\u4e2a\u8bbf\u95ee\u5e95\u5c42 DOM \u8282\u70b9\u7684\u5e94\u6025\u65b9\u6848\uff08escape hatch\uff09\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\u8be5\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4f1a\u7834\u574f\u7ec4\u4ef6\u7684\u62bd\u8c61\u7ed3\u6784\u3002<a href=\"/react/strict-mode#warning-about-deprecated-finddomnode-usage\">\u4e25\u683c\u6a21\u5f0f\u4e0b\u8be5\u65b9\u6cd5\u5df2\u5f03\u7528\u3002</a></p>\n</div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">findDOMNode</span><span class=\"token punctuation\">(</span>component<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5982\u679c\u7ec4\u4ef6\u5df2\u7ecf\u88ab\u6302\u8f7d\u5230 DOM \u4e0a\uff0c\u6b64\u65b9\u6cd5\u4f1a\u8fd4\u56de\u6d4f\u89c8\u5668\u4e2d\u76f8\u5e94\u7684\u539f\u751f DOM \u5143\u7d20\u3002\u6b64\u65b9\u6cd5\u5bf9\u4e8e\u4ece DOM \u4e2d\u8bfb\u53d6\u503c\u5f88\u6709\u7528\uff0c\u4f8b\u5982\u83b7\u53d6\u8868\u5355\u5b57\u6bb5\u7684\u503c\u6216\u8005\u6267\u884c DOM \u68c0\u6d4b\uff08performing DOM measurements\uff09\u3002<strong>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u7ed1\u5b9a\u4e00\u4e2a ref \u5230 DOM \u8282\u70b9\u4e0a\uff0c\u53ef\u4ee5\u5b8c\u5168\u907f\u514d\u4f7f\u7528 findDOMNode\u3002</strong></p>\n<p>\u5f53\u7ec4\u4ef6\u6e32\u67d3\u7684\u5185\u5bb9\u4e3a <code class=\"language-javascript\">null</code> \u6216 <code class=\"language-javascript\">false</code> \u65f6\uff0c<code class=\"language-javascript\">findDOMNode</code> \u4e5f\u4f1a\u8fd4\u56de <code class=\"language-javascript\">null</code>\u3002\u5f53\u7ec4\u4ef6\u6e32\u67d3\u7684\u662f\u5b57\u7b26\u4e32\u65f6\uff0c<code class=\"language-javascript\">findDOMNode</code> \u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\u5bf9\u5e94\u7684 DOM \u8282\u70b9\u3002\u4ece React 16 \u5f00\u59cb\uff0c\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u8fd4\u56de\u6709\u591a\u4e2a\u5b50\u8282\u70b9\u7684 fragment\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code class=\"language-javascript\">findDOMNode</code> \u4f1a\u8fd4\u56de\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5b50\u8282\u70b9\u5bf9\u5e94\u7684 DOM \u8282\u70b9\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p><code class=\"language-javascript\">findDOMNode</code> \u53ea\u5728\u5df2\u6302\u8f7d\u7684\u7ec4\u4ef6\u4e0a\u53ef\u7528\uff08\u5373\uff0c\u5df2\u7ecf\u653e\u7f6e\u5728 DOM \u4e2d\u7684\u7ec4\u4ef6\uff09\u3002\u5982\u679c\u4f60\u5c1d\u8bd5\u8c03\u7528\u672a\u6302\u8f7d\u7684\u7ec4\u4ef6\uff08\u4f8b\u5982\u5728\u4e00\u4e2a\u8fd8\u672a\u521b\u5efa\u7684\u7ec4\u4ef6\u4e0a\u8c03\u7528 <code class=\"language-javascript\">render()</code> \u4e2d\u7684 <code class=\"language-javascript\">findDOMNode()</code>\uff09\u5c06\u4f1a\u5f15\u53d1\u5f02\u5e38\u3002</p>\n<p><code class=\"language-javascript\">findDOMNode</code> \u4e0d\u80fd\u7528\u4e8e\u51fd\u6570\u7ec4\u4ef6\u3002</p>\n</div>\n</div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-react-dom.md\">Edit this page</a></p></div></article>", "path": "/react/react-dom", "nav": ["/react/react-component", "/react/react-dom-client"]}, {"key": "ReactDOMClient", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>The <code class=\"language-javascript\">react-dom/client</code> package provides client-specific methods used for initializing an app on the client. Most of your components should not need to use this module.</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If you use ES5 with npm, you can write:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> ReactDOM <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-dom/client'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/react-dom-client#overview\"></a>Overview </h2>\n<p>The following methods can be used in client environments:</p>\n<ul>\n<li><a href=\"/react/react-dom-client#createroot\"><code class=\"language-javascript\">createRoot()</code></a></li>\n<li><a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">hydrateRoot()</code></a></li>\n</ul>\n<h3 id=\"browser-support\"><a class=\"anchor\" href=\"/react/react-dom-client#browser-support\"></a>Browser Support </h3>\n<p>React supports all modern browsers, although <a href=\"/react/javascript-environment-requirements\">some polyfills are required</a> for older versions.</p>\n<div class=\"blockquote\">\n<strong>Note</strong>\n<p>We do not support older browsers that don\u2019t support ES5 methods or microtasks such as Internet Explorer. You may find that your apps do work in older browsers if polyfills such as <a class=\"external-link\" href=\"https://github.com/es-shims/es5-shim\">es5-shim and es5-sham</a> are included in the page, but you\u2019re on your own if you choose to take this path.</p>\n</div>\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/react-dom-client#reference\"></a>Reference </h2>\n<h3 id=\"createroot\"><a class=\"anchor\" href=\"/react/react-dom-client#createroot\"></a><code class=\"language-javascript\">createRoot()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Create a React root for the supplied <code class=\"language-javascript\">container</code> and return the root. The root can be used to render a React element into the DOM with <code class=\"language-javascript\">render</code>:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> <span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">createRoot</code> accepts two options:</p>\n<ul>\n<li><code class=\"language-javascript\">onRecoverableError</code>: optional callback called when React automatically recovers from errors.</li>\n<li><code class=\"language-javascript\">identifierPrefix</code>: optional prefix React uses for ids generated by <code class=\"language-javascript\">React.useId</code>. Useful to avoid conflicts when using multiple roots on the same page. Must be the same prefix used on the server.</li>\n</ul>\n<p>The root can also be unmounted with <code class=\"language-javascript\">unmount</code>:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">root<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>Note:</strong>\n<p><code class=\"language-javascript\">createRoot()</code> controls the contents of the container node you pass in. Any existing DOM elements inside are replaced when render is called. Later calls use React\u2019s DOM diffing algorithm for efficient updates.</p>\n<p><code class=\"language-javascript\">createRoot()</code> does not modify the container node (only modifies the children of the container). It may be possible to insert a component to an existing DOM node without overwriting the existing children.</p>\n<p>Using <code class=\"language-javascript\">createRoot()</code> to hydrate a server-rendered container is not supported. Use <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">hydrateRoot()</code></a> instead.</p>\n</div>\n\n<h3 id=\"hydrateroot\"><a class=\"anchor\" href=\"/react/react-dom-client#hydrateroot\"></a><code class=\"language-javascript\">hydrateRoot()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">hydrateRoot</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">,</span> element<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Same as <a href=\"/react/react-dom-client#createroot\"><code class=\"language-javascript\">createRoot()</code></a>, but is used to hydrate a container whose HTML contents were rendered by <a href=\"/react/react-dom-server\"><code class=\"language-javascript\">ReactDOMServer</code></a>. React will attempt to attach event listeners to the existing markup.</p>\n<p><code class=\"language-javascript\">hydrateRoot</code> accepts two options:</p>\n<ul>\n<li><code class=\"language-javascript\">onRecoverableError</code>: optional callback called when React automatically recovers from errors.</li>\n<li><code class=\"language-javascript\">identifierPrefix</code>: optional prefix React uses for ids generated by <code class=\"language-javascript\">React.useId</code>. Useful to avoid conflicts when using multiple roots on the same page. Must be the same prefix used on the server.</li>\n</ul>\n<div class=\"blockquote\">\n<strong>Note</strong>\n<p>React expects that the rendered content is identical between the server and the client. It can patch up differences in text content, but you should treat mismatches as bugs and fix them. In development mode, React warns about mismatches during hydration. There are no guarantees that attribute differences will be patched up in case of mismatches. This is important for performance reasons because in most apps, mismatches are rare, and so validating all markup would be prohibitively expensive.</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-react-dom-client.md\">Edit this page</a></p></div></article>", "path": "/react/react-dom-client", "nav": ["/react/react-dom", "/react/react-dom-server"]}, {"key": "ReactDOMServer", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><code class=\"language-javascript\">ReactDOMServer</code> \u5bf9\u8c61\u5141\u8bb8\u4f60\u5c06\u7ec4\u4ef6\u6e32\u67d3\u6210\u9759\u6001\u6807\u8bb0\u3002\u901a\u5e38\uff0c\u5b83\u88ab\u4f7f\u7528\u5728 Node \u670d\u52a1\u7aef\u4e0a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// ES modules</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> ReactDOMServer <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/server'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// CommonJS</span>\n<span class=\"token keyword\">var</span> ReactDOMServer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-dom/server'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/react-dom-server#overview\"></a>\u6982\u89c8 </h2>\n<p>\u8fd9\u4e9b\u65b9\u6cd5\u53ea\u5728\u652f\u6301 <strong><a class=\"external-link\" href=\"https://nodejs.dev/learn/nodejs-streams\">Node.js Streams</a> \u7684\u73af\u5883\u4e0b\u53ef\u7528\uff1a</strong></p>\n<ul>\n<li><a href=\"/react/react-dom-server#rendertopipeablestream\"><code class=\"language-javascript\">renderToPipeableStream()</code></a></li>\n<li><a href=\"/react/react-dom-server#rendertonodestream\"><code class=\"language-javascript\">renderToNodeStream()</code></a> (Deprecated)</li>\n<li><a href=\"/react/react-dom-server#rendertostaticnodestream\"><code class=\"language-javascript\">renderToStaticNodeStream()</code></a></li>\n</ul>\n<p>\u8fd9\u4e9b\u65b9\u6cd5\u53ea\u5728\u652f\u6301 <strong><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Streams_API\">Web Streams</a> \u7684\u73af\u5883\u4e2d\u53ef\u7528</strong>\uff08\u8fd9\u5305\u542b\u6d4f\u89c8\u5668\uff0cDeno \u548c\u4e00\u4e9b\u73b0\u4ee3\u8fb9\u7f18 runtime\uff09\uff1a</p>\n<ul>\n<li><a href=\"/react/react-dom-server#rendertoreadablestream\"><code class=\"language-javascript\">renderToReadableStream()</code></a></li>\n</ul>\n<p>\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u4ee5\u5728\u4e0d\u652f\u6301 Steam \u7684\u73af\u5883\u4e2d\u4f7f\u7528\uff1a</p>\n<ul>\n<li><a href=\"/react/react-dom-server#rendertostring\"><code class=\"language-javascript\">renderToString()</code></a></li>\n<li><a href=\"/react/react-dom-server#rendertostaticmarkup\"><code class=\"language-javascript\">renderToStaticMarkup()</code></a></li>\n</ul>\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/react-dom-server#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"rendertopipeablestream\"><a class=\"anchor\" href=\"/react/react-dom-server#rendertopipeablestream\"></a><code class=\"language-javascript\">renderToPipeableStream()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToPipeableStream</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5c06\u4e00\u4e2a React \u5143\u7d20\u6e32\u67d3\u4e3a\u521d\u59cb HTML\u3002\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709 <code class=\"language-javascript\">pipe(res)</code> \u65b9\u6cd5\u7684\u6d41\uff0c\u7528\u4e8e\u7ba1\u9053\u8f93\u51fa\u3002<code class=\"language-javascript\">abort()</code> \u7528\u4e8e\u4e2d\u6b62\u8bf7\u6c42\u3002\u5b8c\u7f8e\u652f\u6301\u4e86 suspense \u548c HTML \u6d41\uff0c\u201c\u5ef6\u8fdf\u201d \u7684\u5185\u5bb9\u5757\u4f1a\u901a\u8fc7\u5185\u8054\u7684 <code class=\"language-javascript\">&lt;script&gt;</code> \u6807\u7b7e\u5d4c\u5165\u3002<a class=\"external-link\" href=\"https://github.com/reactwg/react-18/discussions/37\">\u4e86\u89e3\u66f4\u591a</a></p>\n<p>\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u5df2\u7ecf\u88ab\u670d\u52a1\u7aef\u6e32\u67d3\u6807\u8bb0\u7684\u8282\u70b9\u4e0a\u8c03\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code></a>\uff0cReact \u4f1a\u4fdd\u7559\u5b83\uff0c\u53ea\u9644\u52a0\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\uff0c\u8ba9\u4f60\u6709\u4e00\u4e2a\u975e\u5e38\u9ad8\u6027\u80fd\u7684\u9996\u6b21\u52a0\u8f7d\u4f53\u9a8c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> didError <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> <span class=\"token function\">renderToPipeableStream</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">onShellReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// The content above all Suspense boundaries is ready.</span>\n      <span class=\"token comment\">// If something errored before we started streaming, we set the error code appropriately.</span>\n      res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> didError <span class=\"token operator\">?</span> <span class=\"token number\">500</span> <span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      stream<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">onShellError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Something errored before we could complete the shell so we emit an alternative shell.</span>\n      res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">;</span>\n      res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'&lt;!doctype html&gt;&lt;p&gt;Loading...&lt;/p&gt;&lt;script src=\"clientrender.js\"&gt;&lt;/script&gt;'</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">onAllReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// If you don't want streaming, use this instead of onShellReady.</span>\n      <span class=\"token comment\">// This will fire after the entire page content is ready.</span>\n      <span class=\"token comment\">// You can use this for crawlers or static generation.</span>\n\n      <span class=\"token comment\">// res.statusCode = didError ? 500 : 200;</span>\n      <span class=\"token comment\">// res.setHeader('Content-type', 'text/html');</span>\n      <span class=\"token comment\">// stream.pipe(res);</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      didError <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5177\u4f53\u53c2\u89c1 <a class=\"external-link\" href=\"https://github.com/facebook/react/blob/14c2be8dac2d5482fda8a0906a31d239df8551fc/packages/react-dom/src/server/ReactDOMFizzServerNode.js#L36-L46\">\u5b8c\u6574\u7684\u9009\u9879\u5217\u8868</a>.</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u662f\u4e00\u4e2a\u9488\u5bf9 Node.js \u7684 API\u3002\u53ea\u5728\u652f\u6301 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Streams_API\">Web Streams</a> \u7684\u73af\u5883\u4e0b\u53ef\u7528\uff0c\u5982 Deno \u4ee5\u53ca\u73b0\u4ee3\u8fb9\u7f18 runtimes\uff0c\u5e94\u4f7f\u7528 <a href=\"/react/react-dom-server#rendertoreadablestream\"><code class=\"language-javascript\">renderToReadableStream</code></a> \u4ee3\u66ff\u3002</p>\n</div>\n\n<h3 id=\"rendertoreadablestream\"><a class=\"anchor\" href=\"/react/react-dom-server#rendertoreadablestream\"></a><code class=\"language-javascript\">renderToReadableStream()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToReadableStream</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5c06\u4e00\u4e2a React \u5143\u7d20\u901a\u8fc7\u6d41\u7684\u5f62\u5f0f\u6ce8\u5165\u521d\u59cb\u7684 HTML \u4e2d\u3002\u8fd4\u56de\u503c\u4e3a Promise, resolve \u4e00\u4e2a <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\">\u53ef\u8bfb Stream</a>\u3002\u5b8c\u7f8e\u652f\u6301\u4e86 suspense \u548c HTML \u6d41\u3002<a class=\"external-link\" href=\"https://github.com/reactwg/react-18/discussions/127\">\u4e86\u89e3\u66f4\u591a</a></p>\n<p>\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u5df2\u7ecf\u88ab\u670d\u52a1\u7aef\u6e32\u67d3\u6807\u8bb0\u7684\u8282\u70b9\u4e0a\u8c03\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code></a>\uff0cReact \u4f1a\u4fdd\u7559\u5b83\uff0c\u53ea\u4e3a\u5176\u9644\u52a0\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u3002\u8ba9\u4f60\u62e5\u6709\u4e00\u4e2a\u975e\u5e38\u826f\u597d\u7684\u9996\u6b21\u52a0\u8f7d\u4f53\u9a8c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> controller <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AbortController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> didError <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> stream <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">renderToReadableStream</span><span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Success</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">signal</span><span class=\"token operator\">:</span> controller<span class=\"token punctuation\">.</span>signal<span class=\"token punctuation\">,</span>\n      <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        didError <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// This is to wait for all Suspense boundaries to be ready. You can uncomment</span>\n  <span class=\"token comment\">// this line if you want to buffer the entire HTML instead of streaming it.</span>\n  <span class=\"token comment\">// You can use this for crawlers or static generation:</span>\n\n  <span class=\"token comment\">// await stream.allReady;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>stream<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> didError <span class=\"token operator\">?</span> <span class=\"token number\">500</span> <span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'&lt;!doctype html&gt;&lt;p&gt;Loading...&lt;/p&gt;&lt;script src=\"clientrender.js\"&gt;&lt;/script&gt;'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'text/html'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5177\u4f53\u53c2\u89c1 <a class=\"external-link\" href=\"https://github.com/facebook/react/blob/14c2be8dac2d5482fda8a0906a31d239df8551fc/packages/react-dom/src/server/ReactDOMFizzServerBrowser.js#L27-L35\">\u5b8c\u6574\u7684\u9009\u9879\u5217\u8868</a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8be5 API \u4f9d\u8d56 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Streams_API\">Web Streams</a>\u3002\u5bf9\u4e8e\uff0c\u8bf7\u4f7f\u7528 <a href=\"/react/react-dom-server#rendertopipeablestream\"><code class=\"language-javascript\">renderToPipeableStream</code></a> \u4ee3\u66ff\u3002</p>\n</div>\n\n<h3 id=\"rendertonodestream\"><a class=\"anchor\" href=\"/react/react-dom-server#rendertonodestream\"></a><code class=\"language-javascript\">renderToNodeStream()</code>  (Deprecated) </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToNodeStream</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5c06\u4e00\u4e2a React \u5143\u7d20\u6e32\u67d3\u6210\u5176\u521d\u59cb HTML\u3002\u8fd4\u56de\u4e00\u4e2a\u53ef\u8f93\u51fa HTML \u5b57\u7b26\u4e32\u7684 <a class=\"external-link\" href=\"https://nodejs.org/api/stream.html#stream_readable_streams\">Node.js \u53ef\u8bfb\u6d41</a>\u3002\u901a\u8fc7\u53ef\u8bfb\u6d41\u8f93\u51fa\u7684 HTML \u5b8c\u5168\u7b49\u540c\u4e8e <a href=\"/react/react-dom-server#rendertostring\"><code class=\"language-javascript\">ReactDOMServer.renderToString</code></a> \u8fd4\u56de\u7684 HTML\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u672c\u65b9\u6cd5\u5728\u670d\u52a1\u5668\u4e0a\u751f\u6210 HTML\uff0c\u5e76\u5728\u521d\u59cb\u8bf7\u6c42\u65f6\u5c06\u6807\u8bb0\u4e0b\u53d1\uff0c\u4ee5\u52a0\u5feb\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\uff0c\u5e76\u5141\u8bb8\u641c\u7d22\u5f15\u64ce\u6293\u53d6\u4f60\u7684\u9875\u9762\u4ee5\u8fbe\u5230 SEO \u4f18\u5316\u7684\u76ee\u7684\u3002</p>\n<p>\u5982\u679c\u4f60\u5728\u5df2\u6709\u670d\u52a1\u7aef\u6e32\u67d3\u6807\u8bb0\u7684\u8282\u70b9\u4e0a\u8c03\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code></a> \u65b9\u6cd5\uff0cReact \u5c06\u4f1a\u4fdd\u7559\u8be5\u8282\u70b9\u4e14\u53ea\u8fdb\u884c\u4e8b\u4ef6\u5904\u7406\u7ed1\u5b9a\uff0c\u4ece\u800c\u8ba9\u4f60\u6709\u4e00\u4e2a\u975e\u5e38\u9ad8\u6027\u80fd\u7684\u9996\u6b21\u52a0\u8f7d\u4f53\u9a8c\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u8fd9\u4e2a API \u4ec5\u5141\u8bb8\u5728\u670d\u52a1\u7aef\u4f7f\u7528\u3002\u4e0d\u5141\u8bb8\u5728\u6d4f\u89c8\u5668\u4f7f\u7528\u3002</p>\n<p>\u901a\u8fc7\u672c\u65b9\u6cd5\u8fd4\u56de\u7684\u6d41\u4f1a\u8fd4\u56de\u4e00\u4e2a\u7531 utf-8 \u7f16\u7801\u7684\u5b57\u8282\u6d41\u3002\u5982\u679c\u4f60\u9700\u8981\u53e6\u4e00\u79cd\u7f16\u7801\u7684\u6d41\uff0c\u8bf7\u67e5\u770b\u50cf <a class=\"external-link\" href=\"https://www.npmjs.com/package/iconv-lite\">iconv-lite</a> \u8fd9\u6837\u7684\u9879\u76ee\uff0c\u5b83\u4e3a\u8f6c\u6362\u6587\u672c\u63d0\u4f9b\u4e86\u8f6c\u6362\u6d41\u3002</p>\n</div>\n\n<h3 id=\"rendertostaticnodestream\"><a class=\"anchor\" href=\"/react/react-dom-server#rendertostaticnodestream\"></a><code class=\"language-javascript\">renderToStaticNodeStream()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToStaticNodeStream</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u6b64\u65b9\u6cd5\u4e0e <a href=\"/react/react-dom-server#rendertonodestream\"><code class=\"language-javascript\">renderToNodeStream</code></a> \u76f8\u4f3c\uff0c\u4f46\u6b64\u65b9\u6cd5\u4e0d\u4f1a\u5728 React \u5185\u90e8\u521b\u5efa\u7684\u989d\u5916 DOM \u5c5e\u6027\uff0c\u4f8b\u5982 <code class=\"language-javascript\">data-reactroot</code>\u3002\u5982\u679c\u4f60\u5e0c\u671b\u628a React \u5f53\u4f5c\u9759\u6001\u9875\u9762\u751f\u6210\u5668\u6765\u4f7f\u7528\uff0c\u6b64\u65b9\u6cd5\u4f1a\u975e\u5e38\u6709\u7528\uff0c\u56e0\u4e3a\u53bb\u9664\u989d\u5916\u7684\u5c5e\u6027\u53ef\u4ee5\u8282\u7701\u4e00\u4e9b\u5b57\u8282\u3002</p>\n<p>\u901a\u8fc7\u53ef\u8bfb\u6d41\u8f93\u51fa\u7684 HTML\uff0c\u5b8c\u5168\u7b49\u540c\u4e8e <a href=\"/react/react-dom-server#rendertostaticmarkup\"><code class=\"language-javascript\">ReactDOMServer.renderToStaticMarkup</code></a> \u8fd4\u56de\u7684 HTML\u3002</p>\n<p>\u5982\u679c\u4f60\u8ba1\u5212\u5728\u524d\u7aef\u4f7f\u7528 React \u4ee5\u4f7f\u5f97\u6807\u8bb0\u53ef\u4ea4\u4e92\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528\u6b64\u65b9\u6cd5\u3002\u4f60\u53ef\u4ee5\u5728\u670d\u52a1\u7aef\u4e0a\u4f7f\u7528 <a href=\"/react/react-dom-server#rendertonodestream\"><code class=\"language-javascript\">renderToNodeStream</code></a> \u6216\u5728\u524d\u7aef\u4e0a\u4f7f\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code></a> \u6765\u4ee3\u66ff\u6b64\u65b9\u6cd5\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u6b64 API \u4ec5\u9650\u4e8e\u670d\u52a1\u7aef\u4f7f\u7528\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u662f\u4e0d\u53ef\u7528\u7684\u3002</p>\n<p>\u901a\u8fc7\u672c\u65b9\u6cd5\u8fd4\u56de\u7684\u6d41\u4f1a\u8fd4\u56de\u4e00\u4e2a\u7531 utf-8 \u7f16\u7801\u7684\u5b57\u8282\u6d41\u3002\u5982\u679c\u4f60\u9700\u8981\u53e6\u4e00\u79cd\u7f16\u7801\u7684\u6d41\uff0c\u8bf7\u67e5\u770b\u50cf <a class=\"external-link\" href=\"https://www.npmjs.com/package/iconv-lite\">iconv-lite</a> \u8fd9\u6837\u7684\u9879\u76ee\uff0c\u5b83\u4e3a\u8f6c\u6362\u6587\u672c\u63d0\u4f9b\u4e86\u8f6c\u6362\u6d41\u3002</p>\n</div>\n\n<h3 id=\"rendertostring\"><a class=\"anchor\" href=\"/react/react-dom-server#rendertostring\"></a><code class=\"language-javascript\">renderToString()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToString</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5c06\u4e00\u4e2a React \u5143\u7d20\u6e32\u67d3\u6210\u5176\u521d\u59cb\u7684 HTML\u3002React \u5c06\u8fd4\u56de\u4e00\u4e2a HTML \u5b57\u7b26\u4e32\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u79cd\u65b9\u6cd5\u5728\u670d\u52a1\u5668\u4e0a\u751f\u4ea7 HTML\uff0c\u5e76\u5728\u521d\u59cb\u8bf7\u6c42\u4e2d\u53d1\u9001\u6807\u8bb0\u3002\u4ee5\u52a0\u5feb\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\uff0c\u5e76\u5141\u8bb8\u641c\u7d22\u5f15\u64ce\u4ee5 SEO \u4e3a\u76ee\u7684\u6293\u53d6\u4f60\u7684\u9875\u9762\u3002</p>\n<p>\u5982\u679c\u4f60\u5728\u4e00\u4e2a\u5df2\u88ab\u670d\u52a1\u7aef\u6e32\u67d3\u6807\u8bb0\u7684\u8282\u70b9\u4e0a\u8c03\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code></a>\uff0cReact \u4f1a\u4fdd\u7559\u5b83\uff0c\u53ea\u9644\u52a0\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\uff0c\u8ba9\u4f60\u6709\u4e00\u4e2a\u975e\u5e38\u826f\u597d\u7684\u9996\u6b21\u52a0\u8f7d\u4f53\u9a8c\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u6b64 API \u5bf9 Suspense \u652f\u6301\u6709\u9650\uff0c\u5e76\u4e14\u4e0d\u652f\u6301\u6d41\u3002</p>\n<p>\u5728\u670d\u52a1\u7aef\uff0c\u5efa\u8bae\u4f7f\u7528 <a href=\"/react/react-dom-server#rendertopipeablestream\"><code class=\"language-javascript\">renderToPipeableStream</code></a> (Node.js) \u6216\u8005 <a href=\"/react/react-dom-server#rendertoreadablestream\"><code class=\"language-javascript\">renderToReadableStream</code></a> (for Web Streams) \u4ee3\u66ff\u3002</p>\n</div>\n\n<h3 id=\"rendertostaticmarkup\"><a class=\"anchor\" href=\"/react/react-dom-server#rendertostaticmarkup\"></a><code class=\"language-javascript\">renderToStaticMarkup()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactDOMServer<span class=\"token punctuation\">.</span><span class=\"token function\">renderToStaticMarkup</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u4e0e <a href=\"/react/react-dom-server#rendertostring\"><code class=\"language-javascript\">renderToString</code></a> \u76f8\u4f3c\uff0c\u53ea\u662f\u8be5\u65b9\u6cd5\u4e0d\u4f1a\u521b\u5efa React \u5185\u90e8\u4f7f\u7528\u7684\u989d\u5916 DOM \u5c5e\u6027\uff0c\u5982 <code class=\"language-javascript\">data-reactroot</code>\u3002\u5982\u679c\u4f60\u53ea\u60f3\u628a React \u4f5c\u4e3a\u7b80\u5355\u7684\u9759\u6001\u9875\u9762\u751f\u6210\u5668\u4f7f\u7528\uff0c\u6b64\u65b9\u6cd5\u4f1a\u975e\u5e38\u5b9e\u7528\u3002\u56e0\u4e3a\u5265\u79bb\u591a\u4f59\u7684\u5c5e\u6027\u53ef\u4ee5\u8282\u7701\u4e00\u4e9b\u5b57\u8282\u5360\u7528\u3002</p>\n<p>\u5982\u679c\u4f60\u6253\u7b97\u5728\u5ba2\u6237\u7aef\u4f7f\u7528 React \u8fdb\u884c\u4ea4\u4e92\u6807\u8bb0\uff0c\u90a3\u8bf7\u4e0d\u8981\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002\u4f5c\u4e3a\u66ff\u4ee3\uff0c\u4f60\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u4f7f\u7528 <a href=\"/react/react-dom-server#rendertostring\"><code class=\"language-javascript\">renderToString</code></a>\uff0c\u540c\u65f6\u5728\u5ba2\u6237\u7aef\u4f7f\u7528 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code></a>\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-react-dom-server.md\">Edit this page</a></p></div></article>", "path": "/react/react-dom-server", "nav": ["/react/react-dom-client", "/react/dom-elements"]}, {"key": "DOM \u5143\u7d20", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u5b9e\u73b0\u4e86\u4e00\u5957\u72ec\u7acb\u4e8e\u6d4f\u89c8\u5668\u7684 DOM \u7cfb\u7edf\uff0c\u517c\u987e\u4e86\u6027\u80fd\u548c\u8de8\u6d4f\u89c8\u5668\u7684\u517c\u5bb9\u6027\u3002\u6211\u4eec\u501f\u6b64\u673a\u4f1a\u5b8c\u5584\u4e86\u6d4f\u89c8\u5668 DOM \u5b9e\u73b0\u7684\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u3002</p>\n<p>\u5728 React \u4e2d\uff0c\u6240\u6709\u7684 DOM \u7279\u6027\u548c\u5c5e\u6027\uff08\u5305\u62ec\u4e8b\u4ef6\u5904\u7406\uff09\u90fd\u5e94\u8be5\u662f\u5c0f\u9a7c\u5cf0\u547d\u540d\u7684\u65b9\u5f0f\u3002\u4f8b\u5982\uff0c\u4e0e HTML \u4e2d\u7684 <code class=\"language-javascript\">tabindex</code> \u5c5e\u6027\u5bf9\u5e94\u7684 React \u7684\u5c5e\u6027\u662f <code class=\"language-javascript\">tabIndex</code>\u3002\u4f8b\u5916\u7684\u60c5\u51b5\u662f <code class=\"language-javascript\">aria-*</code> \u4ee5\u53ca <code class=\"language-javascript\">data-*</code> \u5c5e\u6027\uff0c\u4e00\u5f8b\u4f7f\u7528\u5c0f\u5199\u5b57\u6bcd\u547d\u540d\u3002\u6bd4\u5982, \u4f60\u4f9d\u7136\u53ef\u4ee5\u7528 <code class=\"language-javascript\">aria-label</code> \u4f5c\u4e3a <code class=\"language-javascript\">aria-label</code>\u3002</p>\n<h2 id=\"differences-in-attributes\"><a class=\"anchor\" href=\"/react/dom-elements#differences-in-attributes\"></a>\u5c5e\u6027\u5dee\u5f02 </h2>\n<p>React \u4e0e HTML \u4e4b\u95f4\u6709\u5f88\u591a\u5c5e\u6027\u5b58\u5728\u5dee\u5f02\uff1a</p>\n<h3 id=\"checked\"><a class=\"anchor\" href=\"/react/dom-elements#checked\"></a>checked </h3>\n<p>\u5f53 <code class=\"language-javascript\">&lt;input&gt;</code> \u7ec4\u4ef6\u7684 type \u7c7b\u578b\u4e3a <code class=\"language-javascript\">checkbox</code> \u6216 <code class=\"language-javascript\">radio</code> \u65f6\uff0c\u7ec4\u4ef6\u652f\u6301 <code class=\"language-javascript\">checked</code> \u5c5e\u6027\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u8bbe\u7f6e\u7ec4\u4ef6\u662f\u5426\u88ab\u9009\u4e2d\u3002\u8fd9\u5bf9\u4e8e\u6784\u5efa\u53d7\u63a7\u7ec4\u4ef6\uff08controlled components\uff09\u5f88\u6709\u5e2e\u52a9\u3002\u800c <code class=\"language-javascript\">defaultChecked</code> \u5219\u662f\u975e\u53d7\u63a7\u7ec4\u4ef6\u7684\u5c5e\u6027\uff0c\u7528\u4e8e\u8bbe\u7f6e\u7ec4\u4ef6\u9996\u6b21\u6302\u8f7d\u65f6\u662f\u5426\u88ab\u9009\u4e2d\u3002</p>\n<h3 id=\"classname\"><a class=\"anchor\" href=\"/react/dom-elements#classname\"></a>className </h3>\n<p><code class=\"language-javascript\">className</code> \u5c5e\u6027\u7528\u4e8e\u6307\u5b9a CSS \u7684 class\uff0c\u6b64\u7279\u6027\u9002\u7528\u4e8e\u6240\u6709\u5e38\u89c4 DOM \u8282\u70b9\u548c SVG \u5143\u7d20\uff0c\u5982 <code class=\"language-javascript\">&lt;div&gt;</code>\uff0c<code class=\"language-javascript\">&lt;a&gt;</code> \u53ca\u5176\u5b83\u6807\u7b7e\u3002</p>\n<p>\u5982\u679c\u4f60\u5728 React \u4e2d\u4f7f\u7528 Web Components\uff08\u8fd9\u662f\u4e00\u79cd\u4e0d\u5e38\u89c1\u7684\u4f7f\u7528\u65b9\u5f0f\uff09\uff0c\u8bf7\u4f7f\u7528 class \u5c5e\u6027\u4ee3\u66ff\u3002</p>\n<h3 id=\"dangerouslysetinnerhtml\"><a class=\"anchor\" href=\"/react/dom-elements#dangerouslysetinnerhtml\"></a>dangerouslySetInnerHTML </h3>\n<p><code class=\"language-javascript\">dangerouslySetInnerHTML</code> \u662f React \u4e3a\u6d4f\u89c8\u5668 DOM \u63d0\u4f9b <code class=\"language-javascript\">innerHTML</code> \u7684\u66ff\u6362\u65b9\u6848\u3002\u901a\u5e38\u6765\u8bb2\uff0c\u4f7f\u7528\u4ee3\u7801\u76f4\u63a5\u8bbe\u7f6e HTML \u5b58\u5728\u98ce\u9669\uff0c\u56e0\u4e3a\u5f88\u5bb9\u6613\u65e0\u610f\u4e2d\u4f7f\u7528\u6237\u66b4\u9732\u4e8e<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\">\u8de8\u7ad9\u811a\u672c\uff08XSS\uff09</a>\u7684\u653b\u51fb\u3002\u56e0\u6b64\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728 React \u4e2d\u8bbe\u7f6e HTML\uff0c\u4f46\u5f53\u4f60\u60f3\u8bbe\u7f6e <code class=\"language-javascript\">dangerouslySetInnerHTML</code> \u65f6\uff0c\u9700\u8981\u5411\u5176\u4f20\u9012\u5305\u542b key \u4e3a <code class=\"language-javascript\">__html</code> \u7684\u5bf9\u8c61\uff0c\u4ee5\u6b64\u6765\u8b66\u793a\u4f60\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">createMarkup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> <span class=\"token string\">'First &amp;middot; Second'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">createMarkup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"htmlfor\"><a class=\"anchor\" href=\"/react/dom-elements#htmlfor\"></a>htmlFor </h3>\n<p>\u7531\u4e8e <code class=\"language-javascript\">for</code> \u5728 JavaScript \u4e2d\u662f\u4fdd\u7559\u5b57\uff0c\u6240\u4ee5 React \u5143\u7d20\u4e2d\u4f7f\u7528\u4e86 <code class=\"language-javascript\">htmlFor</code> \u6765\u4ee3\u66ff\u3002</p>\n<h3 id=\"onchange\"><a class=\"anchor\" href=\"/react/dom-elements#onchange\"></a>onChange </h3>\n<p><code class=\"language-javascript\">onChange</code> \u4e8b\u4ef6\u4e0e\u9884\u671f\u884c\u4e3a\u4e00\u81f4\uff1a\u6bcf\u5f53\u8868\u5355\u5b57\u6bb5\u53d8\u5316\u65f6\uff0c\u8be5\u4e8b\u4ef6\u90fd\u4f1a\u88ab\u89e6\u53d1\u3002\u6211\u4eec\u6545\u610f\u6ca1\u6709\u4f7f\u7528\u6d4f\u89c8\u5668\u5df2\u6709\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0c\u662f\u56e0\u4e3a <code class=\"language-javascript\">onChange</code> \u5728\u6d4f\u89c8\u5668\u4e2d\u7684\u884c\u4e3a\u548c\u540d\u79f0\u4e0d\u5bf9\u5e94\uff0c\u5e76\u4e14 React \u4f9d\u9760\u4e86\u8be5\u4e8b\u4ef6\u5b9e\u65f6\u5904\u7406\u7528\u6237\u8f93\u5165\u3002</p>\n<h3 id=\"selected\"><a class=\"anchor\" href=\"/react/dom-elements#selected\"></a>selected </h3>\n<p>\u5982\u679c\u8981\u5c06 <code class=\"language-javascript\">&lt;option&gt;</code> \u6807\u8bb0\u4e3a\u5df2\u9009\u4e2d\u72b6\u6001\uff0c\u8bf7\u5728 <code class=\"language-javascript\">select</code> \u7684 <code class=\"language-javascript\">value</code> \u4e2d\u5f15\u7528\u8be5\u9009\u9879\u7684\u503c\u3002\n\u8bf7\u67e5\u9605 <a href=\"/react/forms#the-select-tag\">\u201cselect \u6807\u7b7e\u201d</a> \u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</p>\n<h3 id=\"style\"><a class=\"anchor\" href=\"/react/dom-elements#style\"></a>style </h3>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5728\u6587\u6863\u4e2d\uff0c\u90e8\u5206\u4f8b\u5b50\u4e3a\u4e86\u65b9\u4fbf\uff0c\u76f4\u63a5\u4f7f\u7528\u4e86 <code class=\"language-javascript\">style</code>\uff0c\u4f46\u662f<strong>\u901a\u5e38\u4e0d\u63a8\u8350\u5c06 <code class=\"language-javascript\">style</code> \u5c5e\u6027\u4f5c\u4e3a\u8bbe\u7f6e\u5143\u7d20\u6837\u5f0f\u7684\u4e3b\u8981\u65b9\u5f0f</strong>\u3002\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5e94\u4f7f\u7528 <a href=\"/react/dom-elements#classname\"><code class=\"language-javascript\">className</code></a> \u5c5e\u6027\u6765\u5f15\u7528\u5916\u90e8 CSS \u6837\u5f0f\u8868\u4e2d\u5b9a\u4e49\u7684 class\u3002<code class=\"language-javascript\">style</code> \u5728 React \u5e94\u7528\u4e2d\u591a\u7528\u4e8e\u5728\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u6dfb\u52a0\u52a8\u6001\u8ba1\u7b97\u7684\u6837\u5f0f\u3002\u53e6\u8bf7\u53c2\u9605\uff1a<a href=\"/react/faq-styling\">FAQ\uff1aStyling \u548c CSS</a>\u3002</p>\n</div>\n<p><code class=\"language-javascript\">style</code> \u63a5\u53d7\u4e00\u4e2a\u91c7\u7528\u5c0f\u9a7c\u5cf0\u547d\u540d\u5c5e\u6027\u7684 JavaScript \u5bf9\u8c61\uff0c\u800c\u4e0d\u662f CSS \u5b57\u7b26\u4e32\u3002\u8fd9\u4e0e DOM \u4e2d <code class=\"language-javascript\">style</code> \u7684 JavaScript \u5c5e\u6027\u662f\u4e00\u81f4\u7684\uff0c\u540c\u65f6\u4f1a\u66f4\u9ad8\u6548\u7684\uff0c\u4e14\u80fd\u9884\u9632\u8de8\u7ad9\u811a\u672c\uff08XSS\uff09\u7684\u5b89\u5168\u6f0f\u6d1e\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> divStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">backgroundImage</span><span class=\"token operator\">:</span> <span class=\"token string\">'url('</span> <span class=\"token operator\">+</span> imgUrl <span class=\"token operator\">+</span> <span class=\"token string\">')'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorldComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>divStyle<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello World!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\uff1a\u6837\u5f0f\u4e0d\u4f1a\u81ea\u52a8\u8865\u9f50\u524d\u7f00\u3002\u5982\u9700\u652f\u6301\u65e7\u7248\u6d4f\u89c8\u5668\uff0c\u8bf7\u624b\u52a8\u8865\u5145\u5bf9\u5e94\u7684\u6837\u5f0f\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> divStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">WebkitTransition</span><span class=\"token operator\">:</span> <span class=\"token string\">'all'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// note the capital 'W' here</span>\n  <span class=\"token literal-property property\">msTransition</span><span class=\"token operator\">:</span> <span class=\"token string\">'all'</span> <span class=\"token comment\">// 'ms' is the only lowercase vendor prefix</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ComponentWithTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>divStyle<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">This should work cross-browser</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Style \u4e2d\u7684 key \u91c7\u7528\u5c0f\u9a7c\u5cf0\u547d\u540d\u662f\u4e3a\u4e86\u4e0e JS \u8bbf\u95ee DOM \u8282\u70b9\u7684\u5c5e\u6027\u4fdd\u6301\u4e00\u81f4\uff08\u4f8b\u5982\uff1a<code class=\"language-javascript\">node.style.backgroundImage</code> \uff09\u3002\u6d4f\u89c8\u5668\u5f15\u64ce\u524d\u7f00\u90fd\u5e94\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\uff0c<a class=\"external-link\" href=\"https://www.andismith.com/blog/2012/02/modernizr-prefixed/\">\u9664\u4e86 <code class=\"language-javascript\">ms</code></a>\u3002\u56e0\u6b64\uff0c<code class=\"language-javascript\">WebkitTransition</code> \u9996\u5b57\u6bcd\u4e3a \u201dW\u201d\u3002</p>\n<p>React \u4f1a\u81ea\u52a8\u6dfb\u52a0 \u201dpx\u201d \u540e\u7f00\u5230\u5185\u8054\u6837\u5f0f\u4e3a\u6570\u5b57\u7684\u5c5e\u6027\u540e\u3002\u5982\u9700\u4f7f\u7528 \u201dpx\u201d \u4ee5\u5916\u7684\u5355\u4f4d\uff0c\u8bf7\u5c06\u6b64\u503c\u8bbe\u4e3a\u6570\u5b57\u4e0e\u6240\u9700\u5355\u4f4d\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Result style: '10px'</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  Hello World!\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token comment\">// Result style: '10%'</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'10%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  Hello World!\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u4f46\u5e76\u975e\u6240\u6709\u6837\u5f0f\u5c5e\u6027\u90fd\u8f6c\u6362\u4e3a\u50cf\u7d20\u5b57\u7b26\u4e32\u3002\u6709\u4e9b\u6837\u5f0f\u5c5e\u6027\u662f\u6ca1\u6709\u5355\u4f4d\u7684(\u4f8b\u5982 <code class=\"language-javascript\">zoom</code>\uff0c<code class=\"language-javascript\">order</code>\uff0c<code class=\"language-javascript\">flex</code>)\u3002\u65e0\u5355\u4f4d\u5c5e\u6027\u7684\u5b8c\u6574\u5217\u8868\u5728<a class=\"external-link\" href=\"https://github.com/facebook/react/blob/4131af3e4bf52f3a003537ec95a1655147c81270/src/renderers/dom/shared/CSSProperty.js#L15-L59\">\u6b64\u5904</a>\u3002</p>\n<h3 id=\"suppresscontenteditablewarning\"><a class=\"anchor\" href=\"/react/dom-elements#suppresscontenteditablewarning\"></a>suppressContentEditableWarning </h3>\n<p>\u901a\u5e38\uff0c\u5f53\u62e5\u6709\u5b50\u8282\u70b9\u7684\u5143\u7d20\u88ab\u6807\u8bb0\u4e3a <code class=\"language-javascript\">contentEditable</code> \u65f6\uff0cReact \u4f1a\u53d1\u51fa\u4e00\u4e2a\u8b66\u544a\uff0c\u56e0\u4e3a\u8fd9\u4e0d\u4f1a\u751f\u6548\u3002\u8be5\u5c5e\u6027\u5c06\u7981\u6b62\u6b64\u8b66\u544a\u3002\u5c3d\u91cf\u4e0d\u8981\u4f7f\u7528\u8be5\u5c5e\u6027\uff0c\u9664\u975e\u4f60\u8981\u6784\u5efa\u4e00\u4e2a\u7c7b\u4f3c <a class=\"external-link\" href=\"https://facebook.github.io/draft-js/\">Draft.js</a> \u7684\u624b\u52a8\u7ba1\u7406 <code class=\"language-javascript\">contentEditable</code> \u5c5e\u6027\u7684\u5e93\u3002</p>\n<h3 id=\"suppresshydrationwarning\"><a class=\"anchor\" href=\"/react/dom-elements#suppresshydrationwarning\"></a>suppressHydrationWarning </h3>\n<p>\u5982\u679c\u4f60\u4f7f\u7528 React \u670d\u52a1\u7aef\u6e32\u67d3\uff0c\u901a\u5e38\u4f1a\u5728\u5f53\u670d\u52a1\u7aef\u4e0e\u5ba2\u6237\u7aef\u6e32\u67d3\u4e0d\u540c\u7684\u5185\u5bb9\u65f6\u53d1\u51fa\u8b66\u544a\u3002\u4f46\u662f\uff0c\u5728\u4e00\u4e9b\u6781\u5c11\u6570\u7684\u60c5\u51b5\u4e0b\uff0c\u5f88\u96be\u751a\u81f3\u4e8e\u4e0d\u53ef\u80fd\u4fdd\u8bc1\u5185\u5bb9\u7684\u4e00\u81f4\u6027\u3002\u4f8b\u5982\uff0c\u5728\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u4e0a\uff0c\u65f6\u95f4\u6233\u901a\u5e38\u662f\u4e0d\u540c\u7684\u3002 </p>\n<p>\u5982\u679c\u8bbe\u7f6e <code class=\"language-javascript\">suppressHydrationWarning</code> \u4e3a <code class=\"language-javascript\">true</code>\uff0cReact \u5c06\u4e0d\u4f1a\u8b66\u544a\u4f60\u5c5e\u6027\u4e0e\u5143\u7d20\u5185\u5bb9\u4e0d\u4e00\u81f4\u3002\u5b83\u53ea\u4f1a\u5bf9\u5143\u7d20\u4e00\u7ea7\u6df1\u5ea6\u6709\u6548\uff0c\u5e76\u4e14\u6253\u7b97\u4f5c\u4e3a\u5e94\u6025\u65b9\u6848\u3002\u56e0\u6b64\u4e0d\u8981\u8fc7\u5ea6\u4f7f\u7528\u5b83\u3002\u4f60\u53ef\u4ee5\u5728 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">ReactDOM.hydrateRoot()</code> \u6587\u6863</a> \u4e2d\u4e86\u89e3\u66f4\u591a\u5173\u4e8e hydration \u7684\u4fe1\u606f\u3002</p>\n<h3 id=\"value\"><a class=\"anchor\" href=\"/react/dom-elements#value\"></a>value </h3>\n<p><code class=\"language-javascript\">&lt;input&gt;</code>\u3001<code class=\"language-javascript\">&lt;select&gt;</code> \u548c <code class=\"language-javascript\">&lt;textarea&gt;</code> \u7ec4\u4ef6\u652f\u6301 <code class=\"language-javascript\">value</code> \u5c5e\u6027\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u4e3a\u7ec4\u4ef6\u8bbe\u7f6e value\u3002\u8fd9\u5bf9\u4e8e\u6784\u5efa\u53d7\u63a7\u7ec4\u4ef6\u662f\u975e\u5e38\u6709\u5e2e\u52a9\u3002<code class=\"language-javascript\">defaultValue</code> \u5c5e\u6027\u5bf9\u5e94\u7684\u662f\u975e\u53d7\u63a7\u7ec4\u4ef6\u7684\u5c5e\u6027\uff0c\u7528\u4e8e\u8bbe\u7f6e\u7ec4\u4ef6\u7b2c\u4e00\u6b21\u6302\u8f7d\u65f6\u7684 value\u3002</p>\n<h2 id=\"all-supported-html-attributes\"><a class=\"anchor\" href=\"/react/dom-elements#all-supported-html-attributes\"></a>All Supported HTML Attributes </h2>\n<p>\u5728 React 16 \u4e2d\uff0c\u4efb\u4f55\u6807\u51c6\u7684<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2017/09/08/dom-attributes-in-react-16.html\">\u6216\u81ea\u5b9a\u4e49\u7684</a> DOM \u5c5e\u6027\u90fd\u662f\u5b8c\u5168\u652f\u6301\u7684\u3002</p>\n<p>React \u4e3a DOM \u63d0\u4f9b\u4e86\u4e00\u5957\u4ee5 JavaScript \u4e3a\u4e2d\u5fc3\u7684 API\u3002\u7531\u4e8e React \u7ec4\u4ef6\u7ecf\u5e38\u91c7\u7528\u81ea\u5b9a\u4e49\u6216\u548c DOM \u76f8\u5173\u7684 props \u7684\u5173\u7cfb\uff0cReact \u91c7\u7528\u4e86<code class=\"language-javascript\">\u5c0f\u9a7c\u5cf0\u547d\u540d</code>\u7684\u65b9\u5f0f\uff0c\u6b63\u5982 DOM APIs \u90a3\u6837\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">tabIndex</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>      <span class=\"token comment\">// Just like node.tabIndex DOM API</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Button<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span> <span class=\"token comment\">// Just like node.className DOM API</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">readOnly</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>  <span class=\"token comment\">// Just like node.readOnly DOM API</span></code></pre></div>\n<p>\u9664\u4e86\u4e0a\u8ff0\u6587\u6863\u63d0\u5230\u7684\u7279\u6b8a\u62fc\u5199\u65b9\u5f0f\u4ee5\u5916\uff0c\u8fd9\u4e9b props \u7684\u7528\u6cd5\u4e0e HTML \u7684\u5c5e\u6027\u4e5f\u6781\u4e3a\u7c7b\u4f3c\u3002</p>\n<p>React \u652f\u6301\u7684 DOM \u5c5e\u6027\u6709\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">accept acceptCharset accessKey action allowFullScreen alt async autoComplete\nautoFocus autoPlay capture cellPadding cellSpacing challenge charSet checked\ncite classID className colSpan cols content contentEditable contextMenu controls\ncontrolsList coords crossOrigin data dateTime default defer dir disabled\ndownload draggable encType form formAction formEncType formMethod formNoValidate\nformTarget frameBorder headers height hidden high href hrefLang htmlFor\nhttpEquiv icon id inputMode integrity is keyParams keyType kind label lang list\nloop low manifest marginHeight marginWidth max maxLength media mediaGroup method\nmin minLength multiple muted name noValidate nonce open optimum pattern\nplaceholder poster preload profile radioGroup readOnly rel required reversed\nrole rowSpan rows sandbox scope scoped scrolling seamless selected shape size\nsizes span spellCheck src srcDoc srcLang srcSet start step style summary\ntabIndex target title type useMap value width wmode wrap</code></pre></div>\n<p>\u540c\u6837\uff0c\u6240\u6709\u7684 SVG \u5c5e\u6027\u4e5f\u5b8c\u5168\u5f97\u5230\u4e86\u652f\u6301\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">accentHeight accumulate additive alignmentBaseline allowReorder alphabetic\namplitude arabicForm ascent attributeName attributeType autoReverse azimuth\nbaseFrequency baseProfile baselineShift bbox begin bias by calcMode capHeight\nclip clipPath clipPathUnits clipRule colorInterpolation\ncolorInterpolationFilters colorProfile colorRendering contentScriptType\ncontentStyleType cursor cx cy d decelerate descent diffuseConstant direction\ndisplay divisor dominantBaseline dur dx dy edgeMode elevation enableBackground\nend exponent externalResourcesRequired fill fillOpacity fillRule filter\nfilterRes filterUnits floodColor floodOpacity focusable fontFamily fontSize\nfontSizeAdjust fontStretch fontStyle fontVariant fontWeight format from fx fy\ng1 g2 glyphName glyphOrientationHorizontal glyphOrientationVertical glyphRef\ngradientTransform gradientUnits hanging horizAdvX horizOriginX ideographic\nimageRendering in in2 intercept k k1 k2 k3 k4 kernelMatrix kernelUnitLength\nkerning keyPoints keySplines keyTimes lengthAdjust letterSpacing lightingColor\nlimitingConeAngle local markerEnd markerHeight markerMid markerStart\nmarkerUnits markerWidth mask maskContentUnits maskUnits mathematical mode\nnumOctaves offset opacity operator order orient orientation origin overflow\noverlinePosition overlineThickness paintOrder panose1 pathLength\npatternContentUnits patternTransform patternUnits pointerEvents points\npointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits\nr radius refX refY renderingIntent repeatCount repeatDur requiredExtensions\nrequiredFeatures restart result rotate rx ry scale seed shapeRendering slope\nspacing specularConstant specularExponent speed spreadMethod startOffset\nstdDeviation stemh stemv stitchTiles stopColor stopOpacity\nstrikethroughPosition strikethroughThickness string stroke strokeDasharray\nstrokeDashoffset strokeLinecap strokeLinejoin strokeMiterlimit strokeOpacity\nstrokeWidth surfaceScale systemLanguage tableValues targetX targetY textAnchor\ntextDecoration textLength textRendering to transform u1 u2 underlinePosition\nunderlineThickness unicode unicodeBidi unicodeRange unitsPerEm vAlphabetic\nvHanging vIdeographic vMathematical values vectorEffect version vertAdvY\nvertOriginX vertOriginY viewBox viewTarget visibility widths wordSpacing\nwritingMode x x1 x2 xChannelSelector xHeight xlinkActuate xlinkArcrole\nxlinkHref xlinkRole xlinkShow xlinkTitle xlinkType xmlns xmlnsXlink xmlBase\nxmlLang xmlSpace y y1 y2 yChannelSelector z zoomAndPan</code></pre></div>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u5c5e\u6027\uff0c\u4f46\u8981\u6ce8\u610f\u5c5e\u6027\u540d\u5168\u90fd\u4e3a\u5c0f\u5199\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-dom-elements.md\">Edit this page</a></p></div></article>", "path": "/react/dom-elements", "nav": ["/react/react-dom-server", "/react/events"]}, {"key": "\u5408\u6210\u4e8b\u4ef6", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u6b64\u53c2\u8003\u6307\u5357\u8bb0\u5f55\u4e86\u6784\u6210 React \u4e8b\u4ef6\u7cfb\u7edf\u4e00\u90e8\u5206\u7684 <code class=\"language-javascript\">SyntheticEvent</code> \u5305\u88c5\u5668\u3002\u8bf7\u53c2\u8003\u6709\u5173<a href=\"/react/handling-events\">\u4e8b\u4ef6\u5904\u7406</a>\u7684\u6307\u5357\u6765\u4e86\u89e3\u66f4\u591a\u3002</p>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/events#overview\"></a>\u6982\u89c8 </h2>\n<p><code class=\"language-javascript\">SyntheticEvent</code> \u5b9e\u4f8b\u5c06\u88ab\u4f20\u9012\u7ed9\u4f60\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u5b83\u662f\u6d4f\u89c8\u5668\u7684\u539f\u751f\u4e8b\u4ef6\u7684\u8de8\u6d4f\u89c8\u5668\u5305\u88c5\u5668\u3002\u9664\u517c\u5bb9\u6240\u6709\u6d4f\u89c8\u5668\u5916\uff0c\u5b83\u8fd8\u62e5\u6709\u548c\u6d4f\u89c8\u5668\u539f\u751f\u4e8b\u4ef6\u76f8\u540c\u7684\u63a5\u53e3\uff0c\u5305\u62ec <code class=\"language-javascript\">stopPropagation()</code> \u548c <code class=\"language-javascript\">preventDefault()</code>\u3002</p>\n<p>\u5982\u679c\u56e0\u4e3a\u67d0\u4e9b\u539f\u56e0\uff0c\u5f53\u4f60\u9700\u8981\u4f7f\u7528\u6d4f\u89c8\u5668\u7684\u5e95\u5c42\u4e8b\u4ef6\u65f6\uff0c\u53ea\u9700\u8981\u4f7f\u7528 <code class=\"language-javascript\">nativeEvent</code> \u5c5e\u6027\u6765\u83b7\u53d6\u5373\u53ef\u3002\u5408\u6210\u4e8b\u4ef6\u4e0e\u6d4f\u89c8\u5668\u7684\u539f\u751f\u4e8b\u4ef6\u4e0d\u540c\uff0c\u4e5f\u4e0d\u4f1a\u76f4\u63a5\u6620\u5c04\u5230\u539f\u751f\u4e8b\u4ef6\u3002\u4f8b\u5982\uff0c\u5728 <code class=\"language-javascript\">onMouseLeave</code> \u4e8b\u4ef6\u4e2d <code class=\"language-javascript\">event.nativeEvent</code> \u5c06\u6307\u5411 <code class=\"language-javascript\">mouseout</code> \u4e8b\u4ef6\u3002\u6bcf\u4e2a <code class=\"language-javascript\">SyntheticEvent</code> \u5bf9\u8c61\u90fd\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">boolean bubbles\nboolean cancelable\nDOMEventTarget currentTarget\nboolean defaultPrevented\nnumber eventPhase\nboolean isTrusted\nDOMEvent nativeEvent\n<span class=\"token keyword\">void</span> <span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nboolean <span class=\"token function\">isDefaultPrevented</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nboolean <span class=\"token function\">isPropagationStopped</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">persist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nDOMEventTarget target\nnumber timeStamp\nstring type</code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4ece v17 \u5f00\u59cb\uff0c<code class=\"language-javascript\">e.persist()</code> \u5c06\u4e0d\u518d\u751f\u6548\uff0c\u56e0\u4e3a <code class=\"language-javascript\">SyntheticEvent</code> \u4e0d\u518d\u653e\u5165<a href=\"/react/legacy-event-pooling\">\u4e8b\u4ef6\u6c60</a>\u4e2d\u3002</p>\n</div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4ece v0.14 \u5f00\u59cb\uff0c\u4e8b\u4ef6\u5904\u7406\u5668\u8fd4\u56de <code class=\"language-javascript\">false</code> \u65f6\uff0c\u4e0d\u518d\u963b\u6b62\u4e8b\u4ef6\u4f20\u9012\u3002\u4f60\u53ef\u4ee5\u914c\u60c5\u624b\u52a8\u8c03\u7528 <code class=\"language-javascript\">e.stopPropagation()</code> \u6216 <code class=\"language-javascript\">e.preventDefault()</code> \u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\u3002</p>\n</div>\n<h2 id=\"supported-events\"><a class=\"anchor\" href=\"/react/events#supported-events\"></a>\u652f\u6301\u7684\u4e8b\u4ef6 </h2>\n<p>React \u901a\u8fc7\u5c06\u4e8b\u4ef6 normalize \u4ee5\u8ba9\u4ed6\u4eec\u5728\u4e0d\u540c\u6d4f\u89c8\u5668\u4e2d\u62e5\u6709\u4e00\u81f4\u7684\u5c5e\u6027\u3002</p>\n<p>\u4ee5\u4e0b\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5728\u5192\u6ce1\u9636\u6bb5\u88ab\u89e6\u53d1\u3002\u5982\u9700\u6ce8\u518c\u6355\u83b7\u9636\u6bb5\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\uff0c\u5219\u5e94\u4e3a\u4e8b\u4ef6\u540d\u6dfb\u52a0 <code class=\"language-javascript\">Capture</code>\u3002\u4f8b\u5982\uff0c\u5904\u7406\u6355\u83b7\u9636\u6bb5\u7684\u70b9\u51fb\u4e8b\u4ef6\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">onClickCapture</code>\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">onClick</code>\u3002</p>\n<ul>\n<li><a href=\"/react/events#clipboard-events\">Clipboard Events</a></li>\n<li><a href=\"/react/events#composition-events\">Composition Events</a></li>\n<li><a href=\"/react/events#keyboard-events\">Keyboard Events</a></li>\n<li><a href=\"/react/events#focus-events\">Focus Events</a></li>\n<li><a href=\"/react/events#form-events\">Form Events</a></li>\n<li><a href=\"/react/events#generic-events\">Generic Events</a></li>\n<li><a href=\"/react/events#mouse-events\">Mouse Events</a></li>\n<li><a href=\"/react/events#pointer-events\">Pointer Events</a></li>\n<li><a href=\"/react/events#selection-events\">Selection Events</a></li>\n<li><a href=\"/react/events#touch-events\">Touch Events</a></li>\n<li><a href=\"/react/events#ui-events\">UI Events</a></li>\n<li><a href=\"/react/events#wheel-events\">Wheel Events</a></li>\n<li><a href=\"/react/events#media-events\">Media Events</a></li>\n<li><a href=\"/react/events#image-events\">Image Events</a></li>\n<li><a href=\"/react/events#animation-events\">Animation Events</a></li>\n<li><a href=\"/react/events#transition-events\">Transition Events</a></li>\n<li><a href=\"/react/events#other-events\">Other Events</a></li>\n</ul>\n\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/events#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"clipboard-events\"><a class=\"anchor\" href=\"/react/events#clipboard-events\"></a>\u526a\u8d34\u677f\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onCopy onCut onPaste</code></pre></div>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">DOMDataTransfer clipboardData</code></pre></div>\n\n<h3 id=\"composition-events\"><a class=\"anchor\" href=\"/react/events#composition-events\"></a>\u590d\u5408\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onCompositionEnd onCompositionStart onCompositionUpdate</code></pre></div>\n<p>\u5c5e\u6027:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">string data</code></pre></div>\n\n<h3 id=\"keyboard-events\"><a class=\"anchor\" href=\"/react/events#keyboard-events\"></a>\u952e\u76d8\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onKeyDown onKeyPress onKeyUp</code></pre></div>\n<p>\u5c5e\u6027:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">boolean altKey\nnumber charCode\nboolean ctrlKey\nboolean <span class=\"token function\">getModifierState</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\nstring key\nnumber keyCode\nstring locale\nnumber location\nboolean metaKey\nboolean repeat\nboolean shiftKey\nnumber which</code></pre></div>\n<p><code class=\"language-javascript\">key</code> \u5c5e\u6027\u53ef\u4ee5\u662f <a class=\"external-link\" href=\"https://www.w3.org/TR/uievents-key/#named-key-attribute-values\">DOM Level 3 Events spec</a> \u91cc\u8bb0\u5f55\u7684\u4efb\u610f\u503c\u3002</p>\n\n<h3 id=\"focus-events\"><a class=\"anchor\" href=\"/react/events#focus-events\"></a>\u7126\u70b9\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onFocus onBlur</code></pre></div>\n<p>\u8fd9\u4e9b\u7126\u70b9\u4e8b\u4ef6\u5728 React DOM \u4e0a\u7684\u6240\u6709\u5143\u7d20\u90fd\u6709\u6548\uff0c\u4e0d\u53ea\u662f\u8868\u5355\u5143\u7d20\u3002</p>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">DOMEventTarget relatedTarget</code></pre></div>\n<h4 id=\"onfocus\"><a class=\"anchor\" href=\"/react/events#onfocus\"></a>onFocus </h4>\n<p><code class=\"language-javascript\">onFocus</code> \u4e8b\u4ef6\u5728\u5143\u7d20\uff08\u6216\u5176\u5185\u90e8\u67d0\u4e9b\u5143\u7d20\uff09\u805a\u7126\u65f6\u88ab\u8c03\u7528\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u6587\u672c\u8f93\u5165\u6846\u65f6\uff0c\u5c31\u4f1a\u8c03\u7528\u8be5\u4e8b\u4ef6\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">onFocus</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Focused on input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onFocus is triggered when you click this input.<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"onblur\"><a class=\"anchor\" href=\"/react/events#onblur\"></a>onBlur </h4>\n<p><code class=\"language-javascript\">onBlur</code> \u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u5728\u5143\u7d20\uff08\u6216\u5143\u7d20\u5185\u67d0\u4e9b\u5143\u7d20\uff09\u5931\u53bb\u7126\u70b9\u65f6\u88ab\u8c03\u7528\u3002\u4f8b\u5982\uff0c\u5f53\u7528\u6237\u5728\u5df2\u805a\u7126\u7684\u6587\u672c\u8f93\u5165\u6846\u5916\u70b9\u51fb\u65f6\uff0c\u5c31\u4f1a\u88ab\u8c03\u7528\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">onBlur</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Triggered because this input lost focus'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>onBlur is triggered when you click this input and then you click outside of it.<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"detecting-focus-entering-and-leaving\"><a class=\"anchor\" href=\"/react/events#detecting-focus-entering-and-leaving\"></a>\u76d1\u542c\u7126\u70b9\u7684\u8fdb\u5165\u4e0e\u79bb\u5f00 </h4>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">currentTarget</code> \u548c <code class=\"language-javascript\">relatedTarget</code> \u6765\u533a\u5206\u805a\u7126\u548c\u5931\u53bb\u7126\u70b9\u662f\u5426\u6765\u81ea\u7236\u5143\u7d20<em>\u5916\u90e8</em>\u3002\u8fd9\u91cc\u6709\u4e2a DEMO\uff0c\u4f60\u53ef\u4ee5\u590d\u5236\u5e76\u5728\u672c\u5730\u8fd0\u884c\uff0c\u5b83\u5c55\u793a\u4e86\u5982\u4f55\u76d1\u542c\u4e00\u4e2a\u5b50\u5143\u7d20\u7684\u805a\u7126\uff0c\u5143\u7d20\u672c\u8eab\u7684\u805a\u7126\uff0c\u4ee5\u53ca\u6574\u4e2a\u5b50\u6811\u8fdb\u5165\u7126\u70b9\u6216\u79bb\u5f00\u7126\u70b9\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n      <span class=\"token attr-name\">tabIndex</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">onFocus</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>currentTarget <span class=\"token operator\">===</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'focused self'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'focused child'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>e<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>relatedTarget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// Not triggered when swapping focus between children</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'focus entered self'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">onBlur</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>currentTarget <span class=\"token operator\">===</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'unfocused self'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'unfocused child'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>e<span class=\"token punctuation\">.</span>currentTarget<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>relatedTarget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// Not triggered when swapping focus between children</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'focus left self'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n\n<h3 id=\"form-events\"><a class=\"anchor\" href=\"/react/events#form-events\"></a>\u8868\u5355\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onChange onInput onInvalid onReset onSubmit </code></pre></div>\n<p>\u60f3\u4e86\u89e3 onChange \u4e8b\u4ef6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u67e5\u770b <a href=\"/react/forms\">Forms</a> \u3002</p>\n\n<h3 id=\"generic-events\"><a class=\"anchor\" href=\"/react/events#generic-events\"></a>\u901a\u7528\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onError onLoad</code></pre></div>\n\n<h3 id=\"mouse-events\"><a class=\"anchor\" href=\"/react/events#mouse-events\"></a>\u9f20\u6807\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onClick onContextMenu onDoubleClick onDrag onDragEnd onDragEnter onDragExit\nonDragLeave onDragOver onDragStart onDrop onMouseDown onMouseEnter onMouseLeave\nonMouseMove onMouseOut onMouseOver onMouseUp</code></pre></div>\n<p><code class=\"language-javascript\">onMouseEnter</code> \u548c <code class=\"language-javascript\">onMouseLeave</code> \u4e8b\u4ef6\u4ece\u79bb\u5f00\u7684\u5143\u7d20\u5411\u8fdb\u5165\u7684\u5143\u7d20\u4f20\u64ad\uff0c\u4e0d\u662f\u6b63\u5e38\u7684\u5192\u6ce1\uff0c\u4e5f\u6ca1\u6709\u6355\u83b7\u9636\u6bb5\u3002</p>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">boolean altKey\nnumber button\nnumber buttons\nnumber clientX\nnumber clientY\nboolean ctrlKey\nboolean <span class=\"token function\">getModifierState</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\nboolean metaKey\nnumber pageX\nnumber pageY\nDOMEventTarget relatedTarget\nnumber screenX\nnumber screenY\nboolean shiftKey</code></pre></div>\n\n<h3 id=\"pointer-events\"><a class=\"anchor\" href=\"/react/events#pointer-events\"></a>\u6307\u9488\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onPointerDown onPointerMove onPointerUp onPointerCancel onGotPointerCapture\nonLostPointerCapture onPointerEnter onPointerLeave onPointerOver onPointerOut</code></pre></div>\n<p><code class=\"language-javascript\">onPointerEnter</code> \u548c <code class=\"language-javascript\">onPointerLeave</code> \u4e8b\u4ef6\u4ece\u79bb\u5f00\u7684\u5143\u7d20\u5411\u8fdb\u5165\u7684\u5143\u7d20\u4f20\u64ad\uff0c\u4e0d\u662f\u6b63\u5e38\u7684\u5192\u6ce1\uff0c\u4e5f\u6ca1\u6709\u6355\u83b7\u9636\u6bb5\u3002</p>\n<p>\u5c5e\u6027\uff1a</p>\n<p>\u5982 <a class=\"external-link\" href=\"https://www.w3.org/TR/pointerevents/\">W3 spec</a> \u4e2d\u5b9a\u4e49\u7684\uff0c\u6307\u9488\u4e8b\u4ef6\u901a\u8fc7\u4ee5\u4e0b\u5c5e\u6027\u6269\u5c55\u4e86<a href=\"/react/events#mouse-events\">\u9f20\u6807\u4e8b\u4ef6</a>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">number pointerId\nnumber width\nnumber height\nnumber pressure\nnumber tangentialPressure\nnumber tiltX\nnumber tiltY\nnumber twist\nstring pointerType\nboolean isPrimary</code></pre></div>\n<p>\u5173\u4e8e\u8de8\u6d4f\u89c8\u5668\u652f\u6301\u7684\u8bf4\u660e\uff1a</p>\n<p>\u5e76\u975e\u6bcf\u4e2a\u6d4f\u89c8\u5668\u90fd\u652f\u6301\u6307\u9488\u4e8b\u4ef6\uff08\u5728\u5199\u8fd9\u7bc7\u6587\u7ae0\u65f6\uff0c\u5df2\u652f\u6301\u7684\u6d4f\u89c8\u5668\u6709\uff1aChrome\uff0cFirefox\uff0cEdge \u548c Internet Explorer\uff09\u3002React \u6545\u610f\u4e0d\u901a\u8fc7 polyfill \u7684\u65b9\u5f0f\u9002\u914d\u5176\u4ed6\u6d4f\u89c8\u5668\uff0c\u4e3b\u8981\u662f\u7b26\u5408\u6807\u51c6\u7684 polyfill \u4f1a\u663e\u8457\u589e\u52a0 react-dom \u7684 bundle \u5927\u5c0f\u3002</p>\n<p>\u5982\u679c\u4f60\u7684\u5e94\u7528\u8981\u6c42\u6307\u9488\u4e8b\u4ef6\uff0c\u6211\u4eec\u63a8\u8350\u6dfb\u52a0\u7b2c\u4e09\u65b9\u7684\u6307\u9488\u4e8b\u4ef6 polyfill\u3002</p>\n\n<h3 id=\"selection-events\"><a class=\"anchor\" href=\"/react/events#selection-events\"></a>\u9009\u62e9\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onSelect</code></pre></div>\n\n<h3 id=\"touch-events\"><a class=\"anchor\" href=\"/react/events#touch-events\"></a>\u89e6\u6478\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onTouchCancel onTouchEnd onTouchMove onTouchStart</code></pre></div>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">boolean altKey\nDOMTouchList changedTouches\nboolean ctrlKey\nboolean <span class=\"token function\">getModifierState</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\nboolean metaKey\nboolean shiftKey\nDOMTouchList targetTouches\nDOMTouchList touches</code></pre></div>\n\n<h3 id=\"ui-events\"><a class=\"anchor\" href=\"/react/events#ui-events\"></a>UI \u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onScroll</code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4ece React 17 \u5f00\u59cb\uff0c<code class=\"language-javascript\">onScroll</code> \u4e8b\u4ef6\u5728 React \u4e2d<strong>\u4e0d\u518d\u5192\u6ce1</strong>\u3002\u8fd9\u4e0e\u6d4f\u89c8\u5668\u7684\u884c\u4e3a\u4e00\u81f4\uff0c\u5e76\u4e14\u907f\u514d\u4e86\u5f53\u4e00\u4e2a\u5d4c\u5957\u4e14\u53ef\u6eda\u52a8\u7684\u5143\u7d20\u5728\u5176\u7236\u5143\u7d20\u89e6\u53d1\u4e8b\u4ef6\u65f6\u9020\u6210\u6df7\u4e71\u3002</p>\n</div>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">number detail\nDOMAbstractView view</code></pre></div>\n\n<h3 id=\"wheel-events\"><a class=\"anchor\" href=\"/react/events#wheel-events\"></a>\u6eda\u8f6e\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onWheel</code></pre></div>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">number deltaMode\nnumber deltaX\nnumber deltaY\nnumber deltaZ</code></pre></div>\n\n<h3 id=\"media-events\"><a class=\"anchor\" href=\"/react/events#media-events\"></a>\u5a92\u4f53\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onAbort onCanPlay onCanPlayThrough onDurationChange onEmptied onEncrypted\nonEnded onError onLoadedData onLoadedMetadata onLoadStart onPause onPlay\nonPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend\nonTimeUpdate onVolumeChange onWaiting</code></pre></div>\n\n<h3 id=\"image-events\"><a class=\"anchor\" href=\"/react/events#image-events\"></a>\u56fe\u50cf\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onLoad onError</code></pre></div>\n\n<h3 id=\"animation-events\"><a class=\"anchor\" href=\"/react/events#animation-events\"></a>\u52a8\u753b\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onAnimationStart onAnimationEnd onAnimationIteration</code></pre></div>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">string animationName\nstring pseudoElement\nfloat elapsedTime</code></pre></div>\n\n<h3 id=\"transition-events\"><a class=\"anchor\" href=\"/react/events#transition-events\"></a>\u8fc7\u6e21\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onTransitionEnd</code></pre></div>\n<p>\u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">string propertyName\nstring pseudoElement\nfloat elapsedTime</code></pre></div>\n\n<h3 id=\"other-events\"><a class=\"anchor\" href=\"/react/events#other-events\"></a>\u5176\u4ed6\u4e8b\u4ef6 </h3>\n<p>\u4e8b\u4ef6\u540d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">onToggle</code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-events.md\">Edit this page</a></p></div></article>", "path": "/react/events", "nav": ["/react/dom-elements", "/react/test-utils"]}, {"key": "Test Utilities", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><strong>\u5982\u4f55\u5f15\u5165</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> ReactTestUtils <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/test-utils'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES6</span>\n<span class=\"token keyword\">var</span> ReactTestUtils <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-dom/test-utils'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES5 \u4f7f\u7528 npm \u7684\u65b9\u5f0f</span></code></pre></div>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/test-utils#overview\"></a>\u6982\u89c8 </h2>\n<p><code class=\"language-javascript\">ReactTestUtils</code> \u53ef\u642d\u914d\u4f60\u6240\u9009\u7684\u6d4b\u8bd5\u6846\u67b6\uff0c\u8f7b\u677e\u5b9e\u73b0 React \u7ec4\u4ef6\u6d4b\u8bd5\u3002\u5728 Facebook \u5185\u90e8\uff0c\u6211\u4eec\u4f7f\u7528 <a class=\"external-link\" href=\"https://facebook.github.io/jest/\">Jest</a> \u6765\u8f7b\u677e\u5b9e\u73b0 JavaScript \u6d4b\u8bd5\u3002\u4f60\u53ef\u4ee5\u4ece Jest \u5b98\u7f51\u7684 <a class=\"external-link\" href=\"https://jestjs.io/docs/tutorial-react\">React \u6559\u7a0b</a>\u4e2d\u4e86\u89e3\u5982\u4f55\u5f00\u59cb\u4f7f\u7528\u5b83\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <a class=\"external-link\" href=\"https://testing-library.com/react\">React Testing Library</a>\uff0c\u5b83\u4f7f\u5f97\u9488\u5bf9\u7ec4\u4ef6\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b\u5c31\u50cf\u7ec8\u7aef\u7528\u6237\u5728\u4f7f\u7528\u5b83\u4e00\u6837\u65b9\u4fbf\u3002</p>\n<p>\u5f53\u4f7f\u7528\u7684 React \u7248\u672c &lt;= 16 \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://airbnb.io/enzyme/\">Enzyme</a> \u7684\u6d4b\u8bd5\u5de5\u5177\uff0c\u901a\u8fc7\u5b83\u80fd\u591f\u8f7b\u677e\u5bf9 React \u7ec4\u4ef6\u7684\u8f93\u51fa\u8fdb\u884c\u65ad\u8a00\u3001\u64cd\u63a7\u548c\u904d\u5386\u3002</p>\n</div>\n<ul>\n<li><a href=\"/react/test-utils#act\"><code class=\"language-javascript\">act()</code></a></li>\n<li><a href=\"/react/test-utils#mockcomponent\"><code class=\"language-javascript\">mockComponent()</code></a></li>\n<li><a href=\"/react/test-utils#iselement\"><code class=\"language-javascript\">isElement()</code></a></li>\n<li><a href=\"/react/test-utils#iselementoftype\"><code class=\"language-javascript\">isElementOfType()</code></a></li>\n<li><a href=\"/react/test-utils#isdomcomponent\"><code class=\"language-javascript\">isDOMComponent()</code></a></li>\n<li><a href=\"/react/test-utils#iscompositecomponent\"><code class=\"language-javascript\">isCompositeComponent()</code></a></li>\n<li><a href=\"/react/test-utils#iscompositecomponentwithtype\"><code class=\"language-javascript\">isCompositeComponentWithType()</code></a></li>\n<li><a href=\"/react/test-utils#findallinrenderedtree\"><code class=\"language-javascript\">findAllInRenderedTree()</code></a></li>\n<li><a href=\"/react/test-utils#scryrendereddomcomponentswithclass\"><code class=\"language-javascript\">scryRenderedDOMComponentsWithClass()</code></a></li>\n<li><a href=\"/react/test-utils#findrendereddomcomponentwithclass\"><code class=\"language-javascript\">findRenderedDOMComponentWithClass()</code></a></li>\n<li><a href=\"/react/test-utils#scryrendereddomcomponentswithtag\"><code class=\"language-javascript\">scryRenderedDOMComponentsWithTag()</code></a></li>\n<li><a href=\"/react/test-utils#findrendereddomcomponentwithtag\"><code class=\"language-javascript\">findRenderedDOMComponentWithTag()</code></a></li>\n<li><a href=\"/react/test-utils#scryrenderedcomponentswithtype\"><code class=\"language-javascript\">scryRenderedComponentsWithType()</code></a></li>\n<li><a href=\"/react/test-utils#findrenderedcomponentwithtype\"><code class=\"language-javascript\">findRenderedComponentWithType()</code></a></li>\n<li><a href=\"/react/test-utils#renderintodocument\"><code class=\"language-javascript\">renderIntoDocument()</code></a></li>\n<li><a href=\"/react/test-utils#simulate\"><code class=\"language-javascript\">Simulate</code></a></li>\n</ul>\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/test-utils#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"act\"><a class=\"anchor\" href=\"/react/test-utils#act\"></a><code class=\"language-javascript\">act()</code> </h3>\n<p>\u4e3a\u65ad\u8a00\u51c6\u5907\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5305\u88f9\u8981\u6e32\u67d3\u7684\u4ee3\u7801\u5e76\u5728\u8c03\u7528 <code class=\"language-javascript\">act()</code> \u65f6\u6267\u884c\u66f4\u65b0\u3002\u8fd9\u4f1a\u4f7f\u5f97\u6d4b\u8bd5\u66f4\u63a5\u8fd1 React \u5728\u6d4f\u89c8\u5668\u4e2d\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c\u4f60\u4f7f\u7528\u4e86 <code class=\"language-javascript\">react-test-renderer</code>\uff0c\u5b83\u4e5f\u63d0\u4f9b\u4e86\u4e0e <code class=\"language-javascript\">act</code> \u884c\u4e3a\u76f8\u540c\u7684\u51fd\u6570\u3002</p>\n</div>\n<p>\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e2a <code class=\"language-javascript\">Counter</code> \u7ec4\u4ef6:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          Click me\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4ee5\u4e0b\u662f\u5176\u6d4b\u8bd5\u4ee3\u7801\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/test-utils'</span><span class=\"token punctuation\">;</span></span><span class=\"token keyword\">import</span> Counter <span class=\"token keyword\">from</span> <span class=\"token string\">'./Counter'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container<span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'can render and update a counter'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9996\u5148\u6d4b\u8bd5 render \u548c componentDidMount</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 0 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 0 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u518d\u6d4b\u8bd5 render \u548c componentDidUpdate</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    button<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 1 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 1 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5343\u4e07\u4e0d\u8981\u5fd8\u8bb0\uff0c\u53ea\u6709\u5c06 DOM \u5bb9\u5668\u6dfb\u52a0\u5230 <code class=\"language-javascript\">document</code> \u65f6\uff0c\u89e6\u53d1 DOM \u4e8b\u4ef6\u624d\u751f\u6548\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\u4e8e <a class=\"external-link\" href=\"https://testing-library.com/react\">React Testing Library</a> \u7b49\u5e93\u6765\u51cf\u5c11\u6837\u677f\u4ee3\u7801\uff08boilerplate code\uff09\u3002</p>\n<ul>\n<li><a href=\"/react/testing-recipes\"><code class=\"language-javascript\">recipes</code></a> \u6587\u6863\u5305\u542b\u4e86\u5173\u4e8e <code class=\"language-javascript\">act()</code> \u51fd\u6570\u7684\u793a\u4f8b\u3001\u7528\u6cd5\u53ca\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</li>\n</ul>\n\n<h3 id=\"mockcomponent\"><a class=\"anchor\" href=\"/react/test-utils#mockcomponent\"></a><code class=\"language-javascript\">mockComponent()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">mockComponent</span><span class=\"token punctuation\">(</span>\n  componentClass<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>mockTagName<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5c06\u6a21\u62df\u7ec4\u4ef6\u6a21\u5757\u4f20\u5165\u8fd9\u4e2a\u65b9\u6cd5\u540e\uff0cReact \u5185\u90e8\u4f1a\u4f7f\u7528\u6709\u6548\u7684\u65b9\u6cd5\u586b\u5145\u8be5\u6a21\u5757\uff0c\u4f7f\u5176\u6210\u4e3a\u865a\u62df\u7684 React \u7ec4\u4ef6\u3002\u4e0e\u901a\u5e38\u7684\u6e32\u67d3\u4e0d\u540c\uff0c\u7ec4\u4ef6\u5c06\u53d8\u6210\u4e00\u4e2a\u7b80\u5355\u7684 <code class=\"language-javascript\">&lt;div&gt;</code> (\u5982\u679c\u63d0\u4f9b\u4e86 <code class=\"language-javascript\">mockTagName</code> \u5219\u662f\u5176\u4ed6\u6807\u7b7e)\uff0c\u5305\u542b\u4efb\u4f55\u63d0\u4f9b\u7684\u5b50\u7ea7\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">mockComponent()</code> \u662f\u4e00\u4e2a\u8fc7\u65f6\u7684 API\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <a class=\"external-link\" href=\"https://jestjs.io/docs/tutorial-react-native#mock-native-modules-using-jestmock\"><code class=\"language-javascript\">jest.mock()</code></a> \u6765\u4ee3\u66ff\u3002</p>\n</div>\n\n<h3 id=\"iselement\"><a class=\"anchor\" href=\"/react/test-utils#iselement\"></a><code class=\"language-javascript\">isElement()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">isElement</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5f53 <code class=\"language-javascript\">element</code> \u662f\u4efb\u4f55\u4e00\u79cd React \u5143\u7d20\u65f6\uff0c\u8fd4\u56de <code class=\"language-javascript\">true</code>\u3002</p>\n\n<h3 id=\"iselementoftype\"><a class=\"anchor\" href=\"/react/test-utils#iselementoftype\"></a><code class=\"language-javascript\">isElementOfType()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">isElementOfType</span><span class=\"token punctuation\">(</span>\n  element<span class=\"token punctuation\">,</span>\n  componentClass\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5f53 <code class=\"language-javascript\">element</code> \u662f\u4e00\u79cd React \u5143\u7d20\uff0c\u5e76\u4e14\u5b83\u7684\u7c7b\u578b\u662f\u53c2\u6570 <code class=\"language-javascript\">componentClass</code> \u7684\u7c7b\u578b\u65f6\uff0c\u8fd4\u56de <code class=\"language-javascript\">true</code>\u3002</p>\n\n<h3 id=\"isdomcomponent\"><a class=\"anchor\" href=\"/react/test-utils#isdomcomponent\"></a><code class=\"language-javascript\">isDOMComponent()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">isDOMComponent</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5f53 <code class=\"language-javascript\">instance</code> \u662f\u4e00\u4e2a DOM \u7ec4\u4ef6\uff08\u6bd4\u5982 <code class=\"language-javascript\">&lt;div&gt;</code> \u6216 <code class=\"language-javascript\">&lt;span&gt;</code>\uff09\u65f6\uff0c\u8fd4\u56de <code class=\"language-javascript\">true</code>\u3002</p>\n\n<h3 id=\"iscompositecomponent\"><a class=\"anchor\" href=\"/react/test-utils#iscompositecomponent\"></a><code class=\"language-javascript\">isCompositeComponent()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">isCompositeComponent</span><span class=\"token punctuation\">(</span>instance<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5f53 <code class=\"language-javascript\">instance</code> \u662f\u4e00\u4e2a\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7ec4\u4ef6\uff0c\u6bd4\u5982\u4e00\u4e2a\u7c7b\u6216\u8005\u4e00\u4e2a\u51fd\u6570\u65f6\uff0c\u8fd4\u56de <code class=\"language-javascript\">true</code>\u3002</p>\n\n<h3 id=\"iscompositecomponentwithtype\"><a class=\"anchor\" href=\"/react/test-utils#iscompositecomponentwithtype\"></a><code class=\"language-javascript\">isCompositeComponentWithType()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">isCompositeComponentWithType</span><span class=\"token punctuation\">(</span>\n  instance<span class=\"token punctuation\">,</span>\n  componentClass\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5f53 <code class=\"language-javascript\">instance</code> \u662f\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5e76\u4e14\u5b83\u7684\u7c7b\u578b\u662f\u53c2\u6570 <code class=\"language-javascript\">componentClass</code> \u7684\u7c7b\u578b\u65f6\uff0c\u8fd4\u56de <code class=\"language-javascript\">true</code>\u3002</p>\n\n<h3 id=\"findallinrenderedtree\"><a class=\"anchor\" href=\"/react/test-utils#findallinrenderedtree\"></a><code class=\"language-javascript\">findAllInRenderedTree()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">findAllInRenderedTree</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  test\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u904d\u5386\u6240\u6709\u5728\u53c2\u6570 <code class=\"language-javascript\">tree</code> \u4e2d\u7684\u7ec4\u4ef6\uff0c\u8bb0\u5f55\u6240\u6709 <code class=\"language-javascript\">test(component)</code> \u4e3a <code class=\"language-javascript\">true</code> \u7684\u7ec4\u4ef6\u3002\u5355\u72ec\u8c03\u7528\u6b64\u65b9\u6cd5\u4e0d\u662f\u5f88\u6709\u7528\uff0c\u4f46\u662f\u5b83\u5e38\u5e38\u88ab\u4f5c\u4e3a\u5e95\u5c42 API \u88ab\u5176\u4ed6\u6d4b\u8bd5\u65b9\u6cd5\u4f7f\u7528\u3002</p>\n\n<h3 id=\"scryrendereddomcomponentswithclass\"><a class=\"anchor\" href=\"/react/test-utils#scryrendereddomcomponentswithclass\"></a><code class=\"language-javascript\">scryRenderedDOMComponentsWithClass()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">scryRenderedDOMComponentsWithClass</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  className\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u67e5\u627e\u6e32\u67d3\u6811\u4e2d\u7ec4\u4ef6\u7684\u6240\u6709 DOM \u5143\u7d20\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u662f css \u7c7b\u540d\u4e0e\u53c2\u6570 <code class=\"language-javascript\">className</code> \u5339\u914d\u7684 DOM \u7ec4\u4ef6\u3002</p>\n\n<h3 id=\"findrendereddomcomponentwithclass\"><a class=\"anchor\" href=\"/react/test-utils#findrendereddomcomponentwithclass\"></a><code class=\"language-javascript\">findRenderedDOMComponentWithClass()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">findRenderedDOMComponentWithClass</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  className\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u7528\u6cd5\u4e0e <a href=\"/react/test-utils#scryrendereddomcomponentswithclass\"><code class=\"language-javascript\">scryRenderedDOMComponentsWithClass()</code></a> \u4fdd\u6301\u4e00\u81f4\uff0c\u4f46\u671f\u671b\u4ec5\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u3002\u4e0d\u7b26\u5408\u9884\u671f\u7684\u60c5\u51b5\u4e0b\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</p>\n\n<h3 id=\"scryrendereddomcomponentswithtag\"><a class=\"anchor\" href=\"/react/test-utils#scryrendereddomcomponentswithtag\"></a><code class=\"language-javascript\">scryRenderedDOMComponentsWithTag()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">scryRenderedDOMComponentsWithTag</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  tagName\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u67e5\u627e\u6e32\u67d3\u6811\u4e2d\u7ec4\u4ef6\u7684\u6240\u6709\u7684 DOM \u5143\u7d20\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u662f\u6807\u8bb0\u540d\u4e0e\u53c2\u6570 <code class=\"language-javascript\">tagName</code> \u5339\u914d\u7684 DOM \u7ec4\u4ef6\u3002</p>\n\n<h3 id=\"findrendereddomcomponentwithtag\"><a class=\"anchor\" href=\"/react/test-utils#findrendereddomcomponentwithtag\"></a><code class=\"language-javascript\">findRenderedDOMComponentWithTag()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">findRenderedDOMComponentWithTag</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  tagName\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u7528\u6cd5\u4e0e <a href=\"/react/test-utils#scryrendereddomcomponentswithtag\"><code class=\"language-javascript\">scryRenderedDOMComponentsWithTag()</code></a> \u4fdd\u6301\u4e00\u81f4\uff0c\u4f46\u671f\u671b\u4ec5\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u3002\u4e0d\u7b26\u5408\u9884\u671f\u7684\u60c5\u51b5\u4e0b\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</p>\n\n<h3 id=\"scryrenderedcomponentswithtype\"><a class=\"anchor\" href=\"/react/test-utils#scryrenderedcomponentswithtype\"></a><code class=\"language-javascript\">scryRenderedComponentsWithType()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">scryRenderedComponentsWithType</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  componentClass\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u67e5\u627e\u7ec4\u4ef6\u7c7b\u578b\u7b49\u4e8e <code class=\"language-javascript\">componentClass</code> \u7ec4\u4ef6\u7684\u6240\u6709\u5b9e\u4f8b\u3002</p>\n\n<h3 id=\"findrenderedcomponentwithtype\"><a class=\"anchor\" href=\"/react/test-utils#findrenderedcomponentwithtype\"></a><code class=\"language-javascript\">findRenderedComponentWithType()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">findRenderedComponentWithType</span><span class=\"token punctuation\">(</span>\n  tree<span class=\"token punctuation\">,</span>\n  componentClass\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u7528\u6cd5\u4e0e <a href=\"/react/test-utils#scryrenderedcomponentswithtype\"><code class=\"language-javascript\">scryRenderedComponentsWithType()</code></a> \u4fdd\u6301\u4e00\u81f4\uff0c\u4f46\u671f\u671b\u4ec5\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u3002\u4e0d\u7b26\u5408\u9884\u671f\u7684\u60c5\u51b5\u4e0b\u4f1a\u629b\u51fa\u5f02\u5e38\u3002</p>\n\n<h3 id=\"renderintodocument\"><a class=\"anchor\" href=\"/react/test-utils#renderintodocument\"></a><code class=\"language-javascript\">renderIntoDocument()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">renderIntoDocument</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u6e32\u67d3 React \u5143\u7d20\u5230 document \u4e2d\u7684\u67d0\u4e2a\u5355\u72ec\u7684 DOM \u8282\u70b9\u4e0a\u3002<strong>\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u4e00\u4e2a DOM \u5bf9\u8c61\u3002</strong> \u5b83\u5b9e\u9645\u76f8\u5f53\u4e8e\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> domContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>domContainer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4f60\u9700\u8981\u5728\u5f15\u5165 <code class=\"language-javascript\">React</code> <strong>\u4e4b\u524d</strong>\u786e\u4fdd <code class=\"language-javascript\">window</code> \u5b58\u5728\uff0c<code class=\"language-javascript\">window.document</code> \u548c <code class=\"language-javascript\">window.document.createElement</code> \u80fd\u5728\u5168\u5c40\u73af\u5883\u4e2d\u83b7\u53d6\u5230\u3002\u4e0d\u7136 React \u4f1a\u8ba4\u4e3a\u5b83\u6ca1\u6709\u6743\u9650\u53bb\u64cd\u4f5c DOM\uff0c\u4ee5\u53ca\u50cf <code class=\"language-javascript\">setState</code> \u8fd9\u6837\u7684\u65b9\u6cd5\u5c06\u4e0d\u53ef\u7528\u3002</p>\n</div>\n\n<h2 id=\"other-utilities\"><a class=\"anchor\" href=\"/react/test-utils#other-utilities\"></a>\u5176\u4ed6\u5de5\u5177\u65b9\u6cd5 </h2>\n<h3 id=\"simulate\"><a class=\"anchor\" href=\"/react/test-utils#simulate\"></a><code class=\"language-javascript\">Simulate</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">Simulate<span class=\"token punctuation\">.</span><span class=\"token punctuation\">{</span>eventName<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span>\n  element<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>eventData<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u4f7f\u7528\u53ef\u9009\u7684 <code class=\"language-javascript\">eventData</code> \u4e8b\u4ef6\u6570\u636e\u6765\u6a21\u62df\u5728 DOM \u8282\u70b9\u4e0a\u89e6\u53d1\u4e8b\u4ef6\u3002</p>\n<p><a href=\"/react/events#supported-events\">React \u6240\u652f\u6301\u7684\u6240\u6709\u4e8b\u4ef6</a> \u5728 <code class=\"language-javascript\">Simulate</code> \u4e2d\u90fd\u6709\u5bf9\u5e94\u7684\u65b9\u6cd5\u3002</p>\n<p><strong>\u70b9\u51fb\u5143\u7d20</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// &lt;button ref={(node) =&gt; this.button = node}&gt;...&lt;/button&gt;</span>\n<span class=\"token keyword\">const</span> node <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">;</span>\nReactTestUtils<span class=\"token punctuation\">.</span>Simulate<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>\u4fee\u6539\u4e00\u4e2a input \u8f93\u5165\u6846\u7684\u503c\uff0c\u7136\u540e\u6309\u56de\u8f66\u952e\u3002</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// &lt;input ref={(node) =&gt; this.textInput = node} /&gt;</span>\n<span class=\"token keyword\">const</span> node <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">;</span>\nnode<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'giraffe'</span><span class=\"token punctuation\">;</span>\nReactTestUtils<span class=\"token punctuation\">.</span>Simulate<span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nReactTestUtils<span class=\"token punctuation\">.</span>Simulate<span class=\"token punctuation\">.</span><span class=\"token function\">keyDown</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Enter\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">keyCode</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">which</span><span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4f60\u5fc5\u987b\u63d0\u4f9b\u4e00\u5207\u9700\u8981\u5728\u7ec4\u4ef6\u4e2d\u7528\u5230\u7684\u4e8b\u4ef6\u5c5e\u6027\uff08\u6bd4\u5982\uff1akeyCode\u3001which \u7b49\u7b49\uff09\uff0c\u56e0\u4e3a React \u6ca1\u6709\u4e3a\u4f60\u521b\u5efa\u8fd9\u4e9b\u5c5e\u6027\u3002</p>\n</div>\n</div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/addons-test-utils.md\">Edit this page</a></p></div></article>", "path": "/react/test-utils", "nav": ["/react/events", "/react/test-renderer"]}, {"key": "Test Renderer", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><strong>\u5982\u4f55\u5f15\u5165</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> TestRenderer <span class=\"token keyword\">from</span> <span class=\"token string\">'react-test-renderer'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES6</span>\n<span class=\"token keyword\">const</span> TestRenderer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-test-renderer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ES5 with npm</span></code></pre></div>\n<h2 id=\"overview\"><a class=\"anchor\" href=\"/react/test-renderer#overview\"></a>\u6982\u89c8 </h2>\n<p>\u8fd9\u4e2a package \u63d0\u4f9b\u4e86\u4e00\u4e2a React \u6e32\u67d3\u5668\uff0c\u7528\u4e8e\u5c06 React \u7ec4\u4ef6\u6e32\u67d3\u6210\u7eaf JavaScript \u5bf9\u8c61\uff0c\u65e0\u9700\u4f9d\u8d56 DOM \u6216\u539f\u751f\u79fb\u52a8\u73af\u5883\u3002</p>\n<p>\u8fd9\u4e2a package \u63d0\u4f9b\u7684\u4e3b\u8981\u529f\u80fd\u662f\u5728\u4e0d\u4f9d\u8d56\u6d4f\u89c8\u5668\u6216 <a class=\"external-link\" href=\"https://github.com/tmpvar/jsdom\">jsdom</a> \u7684\u60c5\u51b5\u4e0b\uff0c\u8fd4\u56de\u67d0\u4e2a\u65f6\u95f4\u70b9\u7531 React DOM \u6216\u8005 React Native \u5e73\u53f0\u6e32\u67d3\u51fa\u7684\u89c6\u56fe\u7ed3\u6784\uff08\u7c7b\u4f3c\u4e0e DOM \u6811\uff09\u5feb\u7167\u3002</p>\n<p>\u793a\u4f8b:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> TestRenderer <span class=\"token keyword\">from</span> <span class=\"token string\">'react-test-renderer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Link</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> testRenderer <span class=\"token operator\">=</span> TestRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">page</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.facebook.com/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Facebook</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>testRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// { type: 'a',</span>\n<span class=\"token comment\">//   props: { href: 'https://www.facebook.com/' },</span>\n<span class=\"token comment\">//   children: [ 'Facebook' ] }</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 Jest \u7684\u5feb\u7167\u6d4b\u8bd5\u529f\u80fd\u6765\u81ea\u52a8\u4fdd\u5b58\u5f53\u524d <code class=\"language-javascript\">JSON</code> \u6811\u7ed3\u6784\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u5e76\u5728\u6d4b\u8bd5\u4e2d\u68c0\u67e5\u5b83\u662f\u5426\u88ab\u4fee\u6539\uff1a<a class=\"external-link\" href=\"https://jestjs.io/docs/en/snapshot-testing\">\u4e86\u89e3\u66f4\u591a</a>\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u904d\u5386\u8f93\u51fa\u6765\u67e5\u627e\u7279\u5b9a\u8282\u70b9\uff0c\u5e76\u5bf9\u5b83\u4eec\u8fdb\u884c\u65ad\u8a00\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> TestRenderer <span class=\"token keyword\">from</span> <span class=\"token string\">'react-test-renderer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SubComponent</span></span> <span class=\"token attr-name\">foo</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>my<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">SubComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sub<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Sub</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> testRenderer <span class=\"token operator\">=</span> TestRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> testInstance <span class=\"token operator\">=</span> testRenderer<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findByType</span><span class=\"token punctuation\">(</span>SubComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findByProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sub\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Sub'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"testrenderer\"><a class=\"anchor\" href=\"/react/test-renderer#testrenderer\"></a>TestRenderer </h3>\n<ul>\n<li><a href=\"/react/test-renderer#testrenderercreate\"><code class=\"language-javascript\">TestRenderer.create()</code></a></li>\n<li><a href=\"/react/test-renderer#testrendereract\"><code class=\"language-javascript\">TestRenderer.act()</code></a></li>\n</ul>\n<h3 id=\"testrenderer-instance\"><a class=\"anchor\" href=\"/react/test-renderer#testrenderer-instance\"></a>TestRenderer instance </h3>\n<ul>\n<li><a href=\"/react/test-renderer#testrenderertojson\"><code class=\"language-javascript\">testRenderer.toJSON()</code></a></li>\n<li><a href=\"/react/test-renderer#testrenderertotree\"><code class=\"language-javascript\">testRenderer.toTree()</code></a></li>\n<li><a href=\"/react/test-renderer#testrendererupdate\"><code class=\"language-javascript\">testRenderer.update()</code></a></li>\n<li><a href=\"/react/test-renderer#testrendererunmount\"><code class=\"language-javascript\">testRenderer.unmount()</code></a></li>\n<li><a href=\"/react/test-renderer#testrenderergetinstance\"><code class=\"language-javascript\">testRenderer.getInstance()</code></a></li>\n<li><a href=\"/react/test-renderer#testrendererroot\"><code class=\"language-javascript\">testRenderer.root</code></a></li>\n</ul>\n<h3 id=\"testinstance\"><a class=\"anchor\" href=\"/react/test-renderer#testinstance\"></a>TestInstance </h3>\n<ul>\n<li><a href=\"/react/test-renderer#testinstancefind\"><code class=\"language-javascript\">testInstance.find()</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancefindbytype\"><code class=\"language-javascript\">testInstance.findByType()</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancefindbyprops\"><code class=\"language-javascript\">testInstance.findByProps()</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancefindall\"><code class=\"language-javascript\">testInstance.findAll()</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancefindallbytype\"><code class=\"language-javascript\">testInstance.findAllByType()</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancefindallbyprops\"><code class=\"language-javascript\">testInstance.findAllByProps()</code></a></li>\n<li><a href=\"/react/test-renderer#testinstanceinstance\"><code class=\"language-javascript\">testInstance.instance</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancetype\"><code class=\"language-javascript\">testInstance.type</code></a></li>\n<li><a href=\"/react/test-renderer#testinstanceprops\"><code class=\"language-javascript\">testInstance.props</code></a></li>\n<li><a href=\"/react/test-renderer#testinstanceparent\"><code class=\"language-javascript\">testInstance.parent</code></a></li>\n<li><a href=\"/react/test-renderer#testinstancechildren\"><code class=\"language-javascript\">testInstance.children</code></a></li>\n</ul>\n<h2 id=\"reference\"><a class=\"anchor\" href=\"/react/test-renderer#reference\"></a>\u53c2\u8003 </h2>\n<h3 id=\"testrenderercreate\"><a class=\"anchor\" href=\"/react/test-renderer#testrenderercreate\"></a><code class=\"language-javascript\">TestRenderer.create()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">TestRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u901a\u8fc7\u4f20\u6765\u7684 React \u5143\u7d20\u521b\u5efa\u4e00\u4e2a <code class=\"language-javascript\">TestRenderer</code> \u5b9e\u4f8b\u3002\u5b83\u5e76\u4e0d\u4f7f\u7528\u771f\u5b9e\u7684 DOM\uff0c\u4f46\u662f\u5b83\u4f9d\u7136\u5c06\u7ec4\u4ef6\u6811\u5b8c\u6574\u5730\u6e32\u67d3\u5230\u5185\u5b58\uff0c\u4ee5\u4fbf\u4e8e\u4f60\u5bf9\u5b83\u8fdb\u884c\u65ad\u8a00\u3002\u6b64\u65f6\u5c06\u8fd4\u56de\u4e00\u4e2a <a href=\"/react/test-renderer#testrenderer-instance\">TestRenderer \u5b9e\u4f8b</a>\u3002</p>\n<h3 id=\"testrendereract\"><a class=\"anchor\" href=\"/react/test-renderer#testrendereract\"></a><code class=\"language-javascript\">TestRenderer.act()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">TestRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">act</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e0e <a href=\"/react/test-utils#act\"><code class=\"language-javascript\">react-dom/test-utils</code> \u4e2d\u7684 <code class=\"language-javascript\">act()</code></a> \u76f8\u4f3c\uff0c<code class=\"language-javascript\">TestRender.act</code> \u4e3a\u65ad\u8a00\u51c6\u5907\u4e00\u4e2a\u7ec4\u4ef6\u3002\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">act()</code> \u6765\u5305\u88c5 <code class=\"language-javascript\">TestRenderer.create</code> \u548c <code class=\"language-javascript\">testRenderer.update</code>\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>create<span class=\"token punctuation\">,</span> act<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-test-renderer'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./app.js'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// The component being tested</span>\n\n<span class=\"token comment\">// \u6e32\u67d3\u7ec4\u4ef6</span>\n<span class=\"token keyword\">let</span> root<span class=\"token punctuation\">;</span> \n<span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  root <span class=\"token operator\">=</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u5bf9\u6839\u5143\u7d20\u8fdb\u884c\u65ad\u8a00</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span><span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// \u66f4\u65b0 props</span>\n<span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  root<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// \u5bf9\u6839\u5143\u7d20\u8fdb\u884c\u65ad\u8a00</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">.</span><span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"testrenderertojson\"><a class=\"anchor\" href=\"/react/test-renderer#testrenderertojson\"></a><code class=\"language-javascript\">testRenderer.toJSON()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5df2\u6e32\u67d3\u7684\u7684\u6811\u5bf9\u8c61\u3002\u8be5\u6811\u4ec5\u5305\u542b\u7279\u5b9a\u5e73\u53f0\u7684\u8282\u70b9\uff0c\u4f8b\u5982 <code class=\"language-javascript\">&lt;div&gt;</code> \u6216 <code class=\"language-javascript\">&lt;View&gt;</code> \u548c\u5b83\u4eec\u7684 props\uff0c\u4f46\u5e76\u4e0d\u5305\u542b\u4efb\u4f55\u7528\u6237\u7f16\u5199\u7684\u7ec4\u4ef6\u3002\u8fd9\u5bf9\u4e8e<a class=\"external-link\" href=\"http://facebook.github.io/jest/docs/en/snapshot-testing.html#snapshot-testing-with-jest\">\u5feb\u7167\u6d4b\u8bd5</a>\u975e\u5e38\u65b9\u4fbf\u3002</p>\n<h3 id=\"testrenderertotree\"><a class=\"anchor\" href=\"/react/test-renderer#testrenderertotree\"></a><code class=\"language-javascript\">testRenderer.toTree()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">toTree</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u8fd4\u56de\u4e00\u4e2a\u5df2\u6e32\u67d3\u7684\u7684\u6811\u5bf9\u8c61\u3002\u5b83\u6240\u8868\u793a\u7684\u5185\u5bb9\u6bd4 <code class=\"language-javascript\">toJSON()</code> \u63d0\u4f9b\u7684\u5185\u5bb9\u8981\u66f4\u52a0\u8be6\u7ec6\uff0c\u5e76\u4e14\u5305\u542b\u7528\u6237\u7f16\u5199\u7684\u7ec4\u4ef6\u3002\u9664\u975e\u4f60\u8981\u5728\u6d4b\u8bd5\u6e32\u67d3\u5668\uff08test renderer\uff09\u4e4b\u4e0a\u7f16\u5199\u81ea\u5df1\u7684\u65ad\u8a00\u5e93\uff0c\u5426\u5219\u4f60\u53ef\u80fd\u5e76\u4e0d\u9700\u8981\u8fd9\u4e2a\u65b9\u6cd5\u3002</p>\n<h3 id=\"testrendererupdate\"><a class=\"anchor\" href=\"/react/test-renderer#testrendererupdate\"></a><code class=\"language-javascript\">testRenderer.update()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u4f7f\u7528\u65b0\u7684\u6839\u5143\u7d20\u91cd\u65b0\u6e32\u67d3\u5185\u5b58\u4e2d\u7684\u6811\u3002\u5b83\u6a21\u62df\u6839\u5143\u7d20\u7684\u4e00\u6b21 React \u66f4\u65b0\u3002\u5982\u679c\u65b0\u7684\u5143\u7d20\u548c\u4e4b\u524d\u7684\u5143\u7d20\u6709\u76f8\u540c\u7684 type \u548c key\uff0c\u8be5\u6811\u5c06\u4f1a\u88ab\u66f4\u65b0\uff1b\u5426\u5219\uff0c\u5b83\u5c06\u91cd\u6302\u8f7d\u4e00\u4e2a\u65b0\u6811\u3002</p>\n<h3 id=\"testrendererunmount\"><a class=\"anchor\" href=\"/react/test-renderer#testrendererunmount\"></a><code class=\"language-javascript\">testRenderer.unmount()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5378\u8f7d\u5185\u5b58\u4e2d\u7684\u6811\uff0c\u4f1a\u89e6\u53d1\u76f8\u5e94\u7684\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u3002</p>\n<h3 id=\"testrenderergetinstance\"><a class=\"anchor\" href=\"/react/test-renderer#testrenderergetinstance\"></a><code class=\"language-javascript\">testRenderer.getInstance()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u5982\u679c\u53ef\u7528\u7684\u8bdd\uff0c\u8fd4\u56de\u4e0e\u6839\u5143\u7d20\u76f8\u5bf9\u5e94\u7684\u5b9e\u4f8b\u3002\u5982\u679c\u6839\u5143\u7d20\u662f\u51fd\u6570\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u8be5\u65b9\u6cd5\u65e0\u6548\uff0c\u56e0\u4e3a\u51fd\u6570\u5b9a\u4e49\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\u3002</p>\n<h3 id=\"testrendererroot\"><a class=\"anchor\" href=\"/react/test-renderer#testrendererroot\"></a><code class=\"language-javascript\">testRenderer.root</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testRenderer<span class=\"token punctuation\">.</span>root</code></pre></div>\n<p>\u8fd4\u56de\u6839\u5143\u7d20\u201c\u6d4b\u8bd5\u5b9e\u4f8b\u201d\u5bf9\u8c61\uff0c\u5b83\u5bf9\u4e8e\u65ad\u8a00\u6811\u4e2d\u7684\u7279\u5b9a\u8282\u70b9\u5341\u5206\u6709\u7528\u3002\u4f60\u53ef\u4ee5\u5229\u7528\u5b83\u6765\u67e5\u627e\u5176\u4ed6\u66f4\u6df1\u5c42\u7684\u201c\u6d4b\u8bd5\u5b9e\u4f8b\u201d\u3002</p>\n<h3 id=\"testinstancefind\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancefind\"></a><code class=\"language-javascript\">testInstance.find()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u627e\u5230\u4e00\u4e2a <code class=\"language-javascript\">test(testInstance)</code> \u8fd4\u56de <code class=\"language-javascript\">true</code> \u7684\u540e\u4ee3\u6d4b\u8bd5\u5b9e\u4f8b\u3002\u5982\u679c\u4e0d\u53ea\u6709\u4e00\u4e2a\u6d4b\u8bd5\u5b9e\u4f8b\u5339\u914d\uff0c\u5c06\u4f1a\u62a5\u9519\u3002</p>\n<h3 id=\"testinstancefindbytype\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancefindbytype\"></a><code class=\"language-javascript\">testInstance.findByType()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findByType</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u627e\u5230\u5339\u914d\u6307\u5b9a <code class=\"language-javascript\">type</code> \u7684\u540e\u4ee3\u6d4b\u8bd5\u5b9e\u4f8b\uff0c\u5982\u679c\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u6d4b\u8bd5\u5b9e\u4f8b\u5339\u914d\u6307\u5b9a\u7684 <code class=\"language-javascript\">type</code>\uff0c\u5c06\u4f1a\u62a5\u9519\u3002</p>\n<h3 id=\"testinstancefindbyprops\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancefindbyprops\"></a><code class=\"language-javascript\">testInstance.findByProps()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findByProps</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u627e\u5230\u5339\u914d\u6307\u5b9a <code class=\"language-javascript\">props</code>\u7684\u540e\u4ee3\u6d4b\u8bd5\u5b9e\u4f8b\uff0c\u5982\u679c\u4e0d\u662f\u6b63\u597d\u53ea\u6709\u4e00\u4e2a\u6d4b\u8bd5\u5b9e\u4f8b\u5339\u914d\u6307\u5b9a\u7684 <code class=\"language-javascript\">props</code>\uff0c\u5c06\u4f1a\u62a5\u9519\u3002</p>\n<h3 id=\"testinstancefindall\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancefindall\"></a><code class=\"language-javascript\">testInstance.findAll()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span>test<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u627e\u5230\u6240\u6709 <code class=\"language-javascript\">test(testInstance)</code> \u8fd4\u56de <code class=\"language-javascript\">true</code> \u7684\u540e\u4ee3\u6d4b\u8bd5\u5b9e\u4f8b\u3002</p>\n<h3 id=\"testinstancefindallbytype\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancefindallbytype\"></a><code class=\"language-javascript\">testInstance.findAllByType()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findAllByType</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u627e\u5230\u6240\u6709\u5339\u914d\u6307\u5b9a <code class=\"language-javascript\">type</code> \u7684\u540e\u4ee3\u6d4b\u8bd5\u5b9e\u4f8b\u3002</p>\n<h3 id=\"testinstancefindallbyprops\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancefindallbyprops\"></a><code class=\"language-javascript\">testInstance.findAllByProps()</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span><span class=\"token function\">findAllByProps</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span></code></pre></div>\n<p>\u627e\u5230\u6240\u6709\u5339\u914d\u6307\u5b9a <code class=\"language-javascript\">props</code> \u7684\u540e\u4ee3\u6d4b\u8bd5\u5b9e\u4f8b\u3002</p>\n<h3 id=\"testinstanceinstance\"><a class=\"anchor\" href=\"/react/test-renderer#testinstanceinstance\"></a><code class=\"language-javascript\">testInstance.instance</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span>instance</code></pre></div>\n<p>\u8be5\u6d4b\u8bd5\u5b9e\u4f8b\u76f8\u5bf9\u5e94\u7684\u7ec4\u4ef6\u5b9e\u4f8b\u3002\u5b83\u53ea\u80fd\u7528\u4e8e\u7c7b\u5b9a\u4e49\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u51fd\u6570\u5b9a\u4e49\u7ec4\u4ef6\u6ca1\u6709\u5b9e\u4f8b\u3002\u5b83\u5339\u914d\u7ed9\u5b9a\u7684\u7ec4\u4ef6\u5185\u90e8\u7684 <code class=\"language-javascript\">this</code> \u7684\u503c\u3002</p>\n<h3 id=\"testinstancetype\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancetype\"></a><code class=\"language-javascript\">testInstance.type</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span>type</code></pre></div>\n<p>\u8be5\u6d4b\u8bd5\u5b9e\u4f8b\u76f8\u5bf9\u5e94\u7684\u7ec4\u4ef6\u7684\u7c7b\u578b\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a <code class=\"language-javascript\">&lt;Button /&gt;</code> \u7ec4\u4ef6\u6709\u4e00\u4e2a <code class=\"language-javascript\">Button</code> \u7c7b\u578b\u3002</p>\n<h3 id=\"testinstanceprops\"><a class=\"anchor\" href=\"/react/test-renderer#testinstanceprops\"></a><code class=\"language-javascript\">testInstance.props</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span>props</code></pre></div>\n<p>\u8be5\u6d4b\u8bd5\u5b9e\u4f8b\u76f8\u5bf9\u5e94\u7684\u7ec4\u4ef6\u7684 props\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a <code class=\"language-javascript\">&lt;Button size=\"small\" /&gt;</code> \u7ec4\u4ef6\u7684 props \u4e3a <code class=\"language-javascript\">{size: 'small'}</code>\u3002</p>\n<h3 id=\"testinstanceparent\"><a class=\"anchor\" href=\"/react/test-renderer#testinstanceparent\"></a><code class=\"language-javascript\">testInstance.parent</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span>parent</code></pre></div>\n<p>\u8be5\u6d4b\u8bd5\u5b9e\u4f8b\u7684\u7236\u6d4b\u8bd5\u5b9e\u4f8b\u3002</p>\n<h3 id=\"testinstancechildren\"><a class=\"anchor\" href=\"/react/test-renderer#testinstancechildren\"></a><code class=\"language-javascript\">testInstance.children</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">testInstance<span class=\"token punctuation\">.</span>children</code></pre></div>\n<p>\u8be5\u6d4b\u8bd5\u5b9e\u4f8b\u7684\u5b50\u6d4b\u8bd5\u5b9e\u4f8b\u3002</p>\n<h2 id=\"ideas\"><a class=\"anchor\" href=\"/react/test-renderer#ideas\"></a>\u60f3\u6cd5 </h2>\n<p>\u4f60\u53ef\u4ee5\u628a <code class=\"language-javascript\">createNodeMock</code> \u51fd\u6570\u4f5c\u4e3a\u9009\u9879\uff08option\uff09\u4f20\u9012\u7ed9 <code class=\"language-javascript\">TestRenderer.create</code>\uff0c\u8fdb\u884c\u81ea\u5b9a\u4e49 refs \u6a21\u62df\u3002<code class=\"language-javascript\">createNodeMock</code> \u63a5\u53d7\u5f53\u524d\u5143\u7d20\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u4e14\u8fd4\u56de\u4e00\u4e2a\u6a21\u62df ref \u5bf9\u8c61\u7684\u3002\u8fd9\u5341\u5206\u6709\u5229\u4e8e\u4f9d\u8d56 refs \u7ec4\u4ef6\u7684\u6d4b\u8bd5\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> TestRenderer <span class=\"token keyword\">from</span> <span class=\"token string\">'react-test-renderer'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">el</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> el<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> focused <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\nTestRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyComponent</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">createNodeMock</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// \u6a21\u62df focus \u51fd\u6570</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function-variable function\">focus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n            focused <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>focused<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-test-renderer.md\">Edit this page</a></p></div></article>", "path": "/react/test-renderer", "nav": ["/react/test-utils", "/react/javascript-environment-requirements"]}, {"key": "JavaScript \u73af\u5883\u8981\u6c42", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React 18 \u652f\u6301\u6240\u6709\u73b0\u4ee3\u6d4f\u89c8\u5668\uff08Edge, Firefox, Chrome, Safari \u7b49\uff09\u3002</p>\n<p>\u5982\u679c\u4f60\u652f\u6301\u65e7\u7684\u6d4f\u89c8\u5668\u548c\u8bbe\u5907\uff0c\u5982\u679c Internet Explorer\uff0c\u5b83\u4eec\u6ca1\u6709\u63d0\u4f9b\u539f\u751f\u7684\u73b0\u4ee3\u6d4f\u89c8\u5668\u7279\u6027\uff0c\u6216\u6709\u4e9b\u4e0d\u7b26\u5408\u6807\u51c6\u7684\u5b9e\u73b0\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5f15\u5165\u4e00\u4e2a\u5168\u5c40\u7684 polyfill\u3002</p>\n<p>\u4ee5\u4e0b\u662f React 18 \u4f7f\u7528\u7684\u73b0\u4ee3\u6d4f\u89c8\u5668\u7279\u6027\u7684\u5217\u8868\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code class=\"language-javascript\">Promise</code></a></li>\n<li><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\"><code class=\"language-javascript\">Symbol</code></a></li>\n<li><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\"><code class=\"language-javascript\">Object.assign</code></a></li>\n</ul>\n<p>\u8fd9\u4e9b\u7279\u6027\u7684 polyfill \u53d6\u51b3\u4e8e\u4f60\u7684\u73af\u5883\uff0c\u5bf9\u4e8e\u5927\u90e8\u5206\u7528\u6237\u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u914d\u7f6e\u4f60\u7684 <a class=\"external-link\" href=\"https://github.com/browserslist/browserslist\">Browserlist</a>\u3002\u5bf9\u4e8e\u5176\u4ed6\u7528\u6237\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u76f4\u63a5\u5f15\u5165\u7c7b\u4f3c\u4e8e <a class=\"external-link\" href=\"https://github.com/zloirock/core-js\"><code class=\"language-javascript\">core-js</code></a> \u8fd9\u6837\u7684 polyfills\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-javascript-environment-requirements.md\">Edit this page</a></p></div></article>", "path": "/react/javascript-environment-requirements", "nav": ["/react/test-renderer", "/react/glossary"]}, {"key": "\u672f\u8bed\u8868", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h2 id=\"single-page-application\"><a class=\"anchor\" href=\"/react/glossary#single-page-application\"></a>\u5355\u9875\u9762\u5e94\u7528 </h2>\n<p>\u5355\u9875\u9762\u5e94\u7528(single-page application)\uff0c\u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u52a0\u8f7d\u5355\u4e2a HTML \u9875\u9762\uff0c\u4ee5\u53ca\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u6240\u6709\u5fc5\u8981\u8d44\u6e90\uff08\u4f8b\u5982 JavaScript \u548c CSS\uff09\u3002\u4e0e\u9875\u9762\u6216\u540e\u7eed\u9875\u9762\u7684\u4efb\u4f55\u4ea4\u4e92\uff0c\u90fd\u4e0d\u518d\u9700\u8981\u5f80\u8fd4 server \u52a0\u8f7d\u8d44\u6e90\uff0c\u5373\u9875\u9762\u4e0d\u4f1a\u91cd\u65b0\u52a0\u8f7d\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 React \u6765\u6784\u5efa\u5355\u9875\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f46\u4e0d\u662f\u5fc5\u987b\u5982\u6b64\u3002React \u8fd8\u53ef\u7528\u4e8e\u589e\u5f3a\u73b0\u6709\u7f51\u7ad9\u7684\u5c0f\u90e8\u5206\uff0c\u4f7f\u5176\u589e\u52a0\u989d\u5916\u4ea4\u4e92\u3002\u7528 React \u7f16\u5199\u7684\u4ee3\u7801\uff0c\u53ef\u4ee5\u4e0e\u670d\u52a1\u5668\u7aef\u6e32\u67d3\u7684\u6807\u8bb0\uff08\u4f8b\u5982 PHP\uff09\u6216\u5176\u4ed6\u5ba2\u6237\u7aef\u5e93\u548c\u5e73\u5171\u5904\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e5f\u6b63\u662f Facebook \u5185\u90e8\u4f7f\u7528 React \u7684\u65b9\u5f0f\u3002</p>\n<h2 id=\"es6-es2015-es2016-etc\"><a class=\"anchor\" href=\"/react/glossary#es6-es2015-es2016-etc\"></a>ES6, ES2015, ES2016 \u7b49 </h2>\n<p>\u8fd9\u4e9b\u9996\u5b57\u6bcd\u7f29\u5199\u90fd\u662f\u6307 ECMAScript \u8bed\u8a00\u89c4\u8303\u6807\u51c6\u7684\u6700\u65b0\u7248\u672c\uff0cJavaScript \u8bed\u8a00\u662f\u6b64\u6807\u51c6\u7684\u4e00\u4e2a\u5b9e\u73b0\u3002\u5176\u4e2d ES6 \u7248\u672c\uff08\u4e5f\u79f0\u4e3a ES2015\uff09\u5305\u62ec\u5bf9\u524d\u9762\u7248\u672c\u7684\u8bb8\u591a\u8865\u5145\uff0c\u4f8b\u5982\uff1a\u7bad\u5934\u51fd\u6570\u3001class\u3001\u6a21\u677f\u5b57\u9762\u91cf\u3001<code class=\"language-javascript\">let</code> \u548c <code class=\"language-javascript\">const</code> \u8bed\u53e5\u3002\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/ECMAScript#Versions\">\u8fd9\u91cc</a>\u4e86\u89e3\u6b64\u89c4\u8303\u7279\u5b9a\u7248\u672c\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p>\n<h2 id=\"compilers\"><a class=\"anchor\" href=\"/react/glossary#compilers\"></a>Compiler\uff08\u7f16\u8bd1\u5668\uff09 </h2>\n<p>JavaScript compiler \u63a5\u6536 JavaScript \u4ee3\u7801\uff0c\u7136\u540e\u5bf9\u5176\u8fdb\u884c\u8f6c\u6362\uff0c\u6700\u7ec8\u8fd4\u56de\u4e0d\u540c\u683c\u5f0f\u7684 JavaScript \u4ee3\u7801\u3002\u6700\u4e3a\u5e38\u89c1\u7684\u4f7f\u7528\u793a\u4f8b\u662f\uff0c\u63a5\u6536 ES6 \u8bed\u6cd5\uff0c\u7136\u540e\u5c06\u5176\u8f6c\u6362\u4e3a\u65e7\u7248\u672c\u6d4f\u89c8\u5668\u80fd\u591f\u89e3\u91ca\u6267\u884c\u7684\u8bed\u6cd5\u3002<a class=\"external-link\" href=\"https://babeljs.io/\">Babel</a> \u662f React \u6700\u5e38\u7528\u7684 compiler\u3002</p>\n<h2 id=\"bundlers\"><a class=\"anchor\" href=\"/react/glossary#bundlers\"></a>Bundler\uff08\u6253\u5305\u5de5\u5177\uff09 </h2>\n<p>bundler \u4f1a\u63a5\u6536\u5199\u6210\u5355\u72ec\u6a21\u5757\uff08\u901a\u5e38\u6709\u6570\u767e\u4e2a\uff09\u7684 JavaScript \u548c CSS \u4ee3\u7801\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u6700\u7ec8\u751f\u6210\u51fa\u4e00\u4e9b\u4e3a\u6d4f\u89c8\u5668\u4f18\u5316\u7684\u6587\u4ef6\u3002\u5e38\u7528\u7684\u6253\u5305 React \u5e94\u7528\u7684\u5de5\u5177\u6709 <a class=\"external-link\" href=\"https://webpack.js.org/\">webpack</a> \u548c <a class=\"external-link\" href=\"http://browserify.org/\">Browserify</a>\u3002</p>\n<h2 id=\"package-managers\"><a class=\"anchor\" href=\"/react/glossary#package-managers\"></a>Package \u7ba1\u7406\u5de5\u5177 </h2>\n<p>package \u7ba1\u7406\u5de5\u5177\uff0c\u662f\u5e2e\u52a9\u4f60\u7ba1\u7406\u9879\u76ee\u4f9d\u8d56\u7684\u5de5\u5177\u3002<a class=\"external-link\" href=\"https://www.npmjs.com/\">npm</a> \u548c <a class=\"external-link\" href=\"https://yarnpkg.com/\">Yarn</a> \u662f\u4e24\u4e2a\u5e38\u7528\u7684\u7ba1\u7406 React \u5e94\u7528\u4f9d\u8d56\u7684 package \u7ba1\u7406\u5de5\u5177\u3002\u5b83\u4eec\u90fd\u662f\u4f7f\u7528\u4e86\u76f8\u540c npm package registry \u7684\u5ba2\u6237\u7aef\u3002</p>\n<h2 id=\"cdn\"><a class=\"anchor\" href=\"/react/glossary#cdn\"></a>CDN </h2>\n<p>CDN \u4ee3\u8868\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff08Content Delivery Network\uff09\u3002CDN \u4f1a\u901a\u8fc7\u4e00\u4e2a\u904d\u5e03\u5168\u7403\u7684\u670d\u52a1\u5668\u7f51\u7edc\u6765\u5206\u53d1\u7f13\u5b58\u7684\u9759\u6001\u5185\u5bb9\u3002</p>\n<h2 id=\"jsx\"><a class=\"anchor\" href=\"/react/glossary#jsx\"></a>JSX </h2>\n<p>JSX \u662f\u4e00\u4e2a JavaScript \u8bed\u6cd5\u6269\u5c55\u3002\u5b83\u7c7b\u4f3c\u4e8e\u6a21\u677f\u8bed\u8a00\uff0c\u4f46\u5b83\u5177\u6709 JavaScript \u7684\u5168\u90e8\u80fd\u529b\u3002JSX \u6700\u7ec8\u4f1a\u88ab\u7f16\u8bd1\u4e3a <code class=\"language-javascript\">React.createElement()</code> \u51fd\u6570\u8c03\u7528\uff0c\u8fd4\u56de\u79f0\u4e3a \u201cReact \u5143\u7d20\u201d \u7684\u666e\u901a JavaScript \u5bf9\u8c61\u3002\u901a\u8fc7<a href=\"/react/introducing-jsx\">\u67e5\u770b\u8fd9\u7bc7\u6587\u6863</a>\u83b7\u53d6 JSX \u8bed\u6cd5\u7684\u57fa\u672c\u4ecb\u7ecd\uff0c\u5728<a href=\"/react/jsx-in-depth\">\u8fd9\u7bc7\u6587\u6863</a>\u4e2d\u53ef\u4ee5\u627e\u5230 JSX \u8bed\u6cd5\u7684\u66f4\u591a\u6df1\u5165\u6559\u7a0b\u3002</p>\n<p>React DOM \u4f7f\u7528 camelCase\uff08\u9a7c\u5cf0\u5f0f\u547d\u540d\uff09\u6765\u5b9a\u4e49\u5c5e\u6027\u7684\u540d\u79f0\uff0c\u800c\u4e0d\u4f7f\u7528 HTML \u5c5e\u6027\u540d\u79f0\u7684\u547d\u540d\u7ea6\u5b9a\u3002\u4f8b\u5982\uff0cHTML \u7684 <code class=\"language-javascript\">tabindex</code> \u5c5e\u6027\u53d8\u6210\u4e86 JSX \u7684 <code class=\"language-javascript\">tabIndex</code>\u3002\u800c <code class=\"language-javascript\">class</code> \u5c5e\u6027\u5219\u53d8\u4e3a <code class=\"language-javascript\">className</code>\uff0c\u8fd9\u662f\u56e0\u4e3a <code class=\"language-javascript\">class</code> \u662f JavaScript \u4e2d\u7684\u4fdd\u7559\u5b57\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hello<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">My name is Clementine!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<h2 id=\"elements\"><a class=\"anchor\" href=\"/react/glossary#elements\"></a><a href=\"/react/rendering-elements\">\u5143\u7d20</a> </h2>\n<p>React \u5143\u7d20\u662f\u6784\u6210 React \u5e94\u7528\u7684\u57fa\u7840\u7816\u5757\u3002\u4eba\u4eec\u53ef\u80fd\u4f1a\u628a\u5143\u7d20\u4e0e\u5e7f\u4e3a\u4eba\u77e5\u7684\u201c\u7ec4\u4ef6\u201d\u6982\u5ff5\u76f8\u4e92\u6df7\u6dc6\u3002\u5143\u7d20\u63cf\u8ff0\u4e86\u4f60\u5728\u5c4f\u5e55\u4e0a\u60f3\u770b\u5230\u7684\u5185\u5bb9\u3002React \u5143\u7d20\u662f\u4e0d\u53ef\u53d8\u5bf9\u8c61\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u901a\u5e38\u6211\u4eec\u4e0d\u4f1a\u76f4\u63a5\u4f7f\u7528\u5143\u7d20\uff0c\u800c\u662f\u4ece\u7ec4\u4ef6\u4e2d\u8fd4\u56de\u5143\u7d20\u3002</p>\n<h2 id=\"components\"><a class=\"anchor\" href=\"/react/glossary#components\"></a><a href=\"/react/components-and-props\">\u7ec4\u4ef6</a> </h2>\n<p>React \u7ec4\u4ef6\u662f\u53ef\u590d\u7528\u7684\u5c0f\u7684\u4ee3\u7801\u7247\u6bb5\uff0c\u5b83\u4eec\u8fd4\u56de\u8981\u5728\u9875\u9762\u4e2d\u6e32\u67d3\u7684 React \u5143\u7d20\u3002React \u7ec4\u4ef6\u7684\u6700\u7b80\u7248\u672c\u662f\uff0c\u4e00\u4e2a\u8fd4\u56de React \u5143\u7d20\u7684\u666e\u901a JavaScript \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Welcome</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u4f7f\u7528 ES6 \u7684 class \u7f16\u5199\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Welcome</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7ec4\u4ef6\u53ef\u88ab\u62c6\u5206\u4e3a\u4e0d\u540c\u7684\u529f\u80fd\u7247\u6bb5\uff0c\u8fd9\u4e9b\u7247\u6bb5\u53ef\u4ee5\u5728\u5176\u4ed6\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u3002\u7ec4\u4ef6\u53ef\u4ee5\u8fd4\u56de\u5176\u4ed6\u7ec4\u4ef6\u3001\u6570\u7ec4\u3001\u5b57\u7b26\u4e32\u548c\u6570\u5b57\u3002\u6839\u636e\u7ecf\u9a8c\u6765\u770b\uff0c\u5982\u679c UI \u4e2d\u6709\u4e00\u90e8\u5206\u88ab\u591a\u6b21\u4f7f\u7528\uff08Button\uff0cPanel\uff0cAvatar\uff09\uff0c\u6216\u8005\u7ec4\u4ef6\u672c\u8eab\u5c31\u8db3\u591f\u590d\u6742\uff08App\uff0cFeedStory\uff0cComment\uff09\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u4e00\u4e2a\u53ef\u590d\u7528\u7ec4\u4ef6\u7684\u5019\u9009\u9879\u3002\u7ec4\u4ef6\u540d\u79f0\u5e94\u8be5\u59cb\u7ec8\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\uff08<code class=\"language-javascript\">&lt;Wrapper/&gt;</code> <strong>\u800c\u4e0d\u662f</strong> <code class=\"language-javascript\">&lt;wrapper/&gt;</code>\uff09\u3002\u6709\u5173\u6e32\u67d3\u7ec4\u4ef6\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605<a href=\"/react/components-and-props#rendering-a-component\">\u8fd9\u7bc7\u6587\u6863</a>\u3002</p>\n<h3 id=\"props\"><a class=\"anchor\" href=\"/react/glossary#props\"></a><a href=\"/react/components-and-props\"><code class=\"language-javascript\">props</code></a> </h3>\n<p><code class=\"language-javascript\">props</code> \u662f React \u7ec4\u4ef6\u7684\u8f93\u5165\u3002\u5b83\u4eec\u662f\u4ece\u7236\u7ec4\u4ef6\u5411\u4e0b\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u7684\u6570\u636e\u3002</p>\n<p>\u8bb0\u4f4f\uff0c<code class=\"language-javascript\">props</code> \u662f\u53ea\u8bfb\u7684\u3002\u4e0d\u5e94\u4ee5\u4efb\u4f55\u65b9\u5f0f\u4fee\u6539\u5b83\u4eec\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u9519\u8bef\u505a\u6cd5\uff01</span>\nprops<span class=\"token punctuation\">.</span>number <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u60f3\u8981\u4fee\u6539\u67d0\u4e9b\u503c\uff0c\u4ee5\u54cd\u5e94\u7528\u6237\u8f93\u5165\u6216\u7f51\u7edc\u54cd\u5e94\uff0c\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">state</code> \u6765\u4f5c\u4e3a\u66ff\u4ee3\u3002</p>\n<h3 id=\"propschildren\"><a class=\"anchor\" href=\"/react/glossary#propschildren\"></a><code class=\"language-javascript\">props.children</code> </h3>\n<p>\u6bcf\u4e2a\u7ec4\u4ef6\u90fd\u53ef\u4ee5\u83b7\u53d6\u5230 <code class=\"language-javascript\">props.children</code>\u3002\u5b83\u5305\u542b\u7ec4\u4ef6\u7684\u5f00\u59cb\u6807\u7b7e\u548c\u7ed3\u675f\u6807\u7b7e\u4e4b\u95f4\u7684\u5185\u5bb9\u3002\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Welcome</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Welcome</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728 <code class=\"language-javascript\">Welcome</code> \u7ec4\u4ef6\u4e2d\u83b7\u53d6 <code class=\"language-javascript\">props.children</code>\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u5b57\u7b26\u4e32 <code class=\"language-javascript\">Hello world!</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Welcome</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5bf9\u4e8e class \u7ec4\u4ef6\uff0c\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">this.props.children</code> \u6765\u83b7\u53d6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Welcome</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"state\"><a class=\"anchor\" href=\"/react/glossary#state\"></a><a href=\"/react/state-and-lifecycle#adding-local-state-to-a-class\"><code class=\"language-javascript\">state</code></a> </h3>\n<p>\u5f53\u7ec4\u4ef6\u4e2d\u7684\u4e00\u4e9b\u6570\u636e\u5728\u67d0\u4e9b\u65f6\u523b\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8fd9\u65f6\u5c31\u9700\u8981\u4f7f\u7528 <code class=\"language-javascript\">state</code> \u6765\u8ddf\u8e2a\u72b6\u6001\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">Checkbox</code> \u7ec4\u4ef6\u53ef\u80fd\u9700\u8981 <code class=\"language-javascript\">isChecked</code> \u72b6\u6001\uff0c\u800c <code class=\"language-javascript\">NewsFeed</code> \u7ec4\u4ef6\u53ef\u80fd\u9700\u8981\u8ddf\u8e2a <code class=\"language-javascript\">fetchedPosts</code> \u72b6\u6001\u3002</p>\n<p><code class=\"language-javascript\">state</code> \u548c <code class=\"language-javascript\">props</code> \u4e4b\u95f4\u6700\u91cd\u8981\u7684\u533a\u522b\u662f\uff1a<code class=\"language-javascript\">props</code> \u7531\u7236\u7ec4\u4ef6\u4f20\u5165\uff0c\u800c <code class=\"language-javascript\">state</code> \u7531\u7ec4\u4ef6\u672c\u8eab\u7ba1\u7406\u3002\u7ec4\u4ef6\u4e0d\u80fd\u4fee\u6539 <code class=\"language-javascript\">props</code>\uff0c\u4f46\u5b83\u53ef\u4ee5\u4fee\u6539 <code class=\"language-javascript\">state</code>\u3002</p>\n<p>\u5bf9\u4e8e\u6240\u6709\u53d8\u5316\u6570\u636e\u4e2d\u7684\u6bcf\u4e2a\u7279\u5b9a\u90e8\u5206\uff0c\u53ea\u5e94\u8be5\u7531\u4e00\u4e2a\u7ec4\u4ef6\u5728\u5176 state \u4e2d\u201c\u6301\u6709\u201d\u5b83\u3002\u4e0d\u8981\u8bd5\u56fe\u540c\u6b65\u6765\u81ea\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7ec4\u4ef6\u7684 state\u3002\u76f8\u53cd\uff0c\u5e94\u5f53\u5c06\u5176<a href=\"/react/lifting-state-up\">\u63d0\u5347</a>\u5230\u6700\u8fd1\u7684\u5171\u540c\u7956\u5148\u7ec4\u4ef6\u4e2d\uff0c\u5e76\u5c06\u8fd9\u4e2a state \u4f5c\u4e3a props \u4f20\u9012\u5230\u4e24\u4e2a\u5b50\u7ec4\u4ef6\u3002</p>\n<h2 id=\"lifecycle-methods\"><a class=\"anchor\" href=\"/react/glossary#lifecycle-methods\"></a><a href=\"/react/state-and-lifecycle#adding-lifecycle-methods-to-a-class\">\u751f\u547d\u5468\u671f\u65b9\u6cd5</a> </h2>\n<p>\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u7528\u4e8e\u5728\u7ec4\u4ef6\u4e0d\u540c\u9636\u6bb5\u6267\u884c\u81ea\u5b9a\u4e49\u529f\u80fd\u3002\u5728\u7ec4\u4ef6\u88ab\u521b\u5efa\u5e76\u63d2\u5165\u5230 DOM \u65f6\uff08\u5373<a href=\"/react/react-component#mounting\">\u6302\u8f7d\u4e2d\u9636\u6bb5\uff08mounting\uff09</a>\uff09\uff0c\u7ec4\u4ef6\u66f4\u65b0\u65f6\uff0c\u7ec4\u4ef6\u53d6\u6d88\u6302\u8f7d\u6216\u4ece DOM \u4e2d\u5220\u9664\u65f6\uff0c\u90fd\u6709\u53ef\u4ee5\u4f7f\u7528\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u3002</p>\n<h2 id=\"\u53d7\u63a7\u7ec4\u4ef6-vs-\u975e\u53d7\u63a7\u7ec4\u4ef6\"><a class=\"anchor\" href=\"/react/glossary#%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6-vs-%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6\"></a><a href=\"/react/forms#controlled-components\">\u53d7\u63a7\u7ec4\u4ef6</a> vs <a href=\"/react/uncontrolled-components\">\u975e\u53d7\u63a7\u7ec4\u4ef6</a></h2>\n<p>React \u6709\u4e24\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\u6765\u5904\u7406\u8868\u5355\u8f93\u5165\u3002</p>\n<p>\u5982\u679c\u4e00\u4e2a input \u8868\u5355\u5143\u7d20\u7684\u503c\u662f\u7531 React \u63a7\u5236\uff0c\u5c31\u5176\u79f0\u4e3a<em>\u53d7\u63a7\u7ec4\u4ef6</em>\u3002\u5f53\u7528\u6237\u5c06\u6570\u636e\u8f93\u5165\u5230\u53d7\u63a7\u7ec4\u4ef6\u65f6\uff0c\u4f1a\u89e6\u53d1\u4fee\u6539\u72b6\u6001\u7684\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u8fd9\u65f6\u7531\u4f60\u7684\u4ee3\u7801\u6765\u51b3\u5b9a\u6b64\u8f93\u5165\u662f\u5426\u6709\u6548\uff08\u5982\u679c\u6709\u6548\u5c31\u4f7f\u7528\u66f4\u65b0\u540e\u7684\u503c\u91cd\u65b0\u6e32\u67d3\uff09\u3002\u5982\u679c\u4e0d\u91cd\u65b0\u6e32\u67d3\uff0c\u5219\u8868\u5355\u5143\u7d20\u5c06\u4fdd\u6301\u4e0d\u53d8\u3002</p>\n<p>\u4e00\u4e2a<em>\u975e\u53d7\u63a7\u7ec4\u4ef6</em>\uff0c\u5c31\u50cf\u662f\u8fd0\u884c\u5728 React \u4f53\u7cfb\u4e4b\u5916\u7684\u8868\u5355\u5143\u7d20\u3002\u5f53\u7528\u6237\u5c06\u6570\u636e\u8f93\u5165\u5230\u8868\u5355\u5b57\u6bb5\uff08\u4f8b\u5982 input\uff0cdropdown \u7b49\uff09\u65f6\uff0cReact \u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4e8b\u60c5\u5c31\u53ef\u4ee5\u6620\u5c04\u66f4\u65b0\u540e\u7684\u4fe1\u606f\u3002\u7136\u800c\uff0c\u8fd9\u4e5f\u610f\u5473\u7740\uff0c\u4f60\u65e0\u6cd5\u5f3a\u5236\u7ed9\u8fd9\u4e2a\u8868\u5355\u5b57\u6bb5\u8bbe\u7f6e\u4e00\u4e2a\u7279\u5b9a\u503c\u3002</p>\n<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u5e94\u8be5\u4f7f\u7528\u53d7\u63a7\u7ec4\u4ef6\u3002</p>\n<h2 id=\"keys\"><a class=\"anchor\" href=\"/react/glossary#keys\"></a><a href=\"/react/lists-and-keys\">key</a> </h2>\n<p>\u201ckey\u201d \u662f\u5728\u521b\u5efa\u5143\u7d20\u6570\u7ec4\u65f6\uff0c\u9700\u8981\u7528\u5230\u7684\u4e00\u4e2a\u7279\u6b8a\u5b57\u7b26\u4e32\u5c5e\u6027\u3002key \u5e2e\u52a9 React \u8bc6\u522b\u51fa\u88ab\u4fee\u6539\u3001\u6dfb\u52a0\u6216\u5220\u9664\u7684 item\u3002\u5e94\u5f53\u7ed9\u6570\u7ec4\u5185\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u8bbe\u5b9a key\uff0c\u4ee5\u4f7f\u5143\u7d20\u5177\u6709\u56fa\u5b9a\u8eab\u4efd\u6807\u8bc6\u3002</p>\n<p>\u53ea\u9700\u8981\u4fdd\u8bc1\uff0c\u5728\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u5144\u5f1f\u5143\u7d20\u4e4b\u95f4\u7684 key \u662f\u552f\u4e00\u7684\u3002\u800c\u4e0d\u9700\u8981\u5728\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u751a\u81f3\u5355\u4e2a\u7ec4\u4ef6\u4e2d\u4fdd\u6301\u552f\u4e00\u3002</p>\n<p>\u4e0d\u8981\u5c06 <code class=\"language-javascript\">Math.random()</code> \u4e4b\u7c7b\u7684\u503c\u4f20\u9012\u7ed9 key\u3002\u91cd\u8981\u7684\u662f\uff0c\u5728\u524d\u540e\u4e24\u6b21\u6e32\u67d3\u4e4b\u95f4\u7684 key \u8981\u5177\u6709\u201c\u56fa\u5b9a\u8eab\u4efd\u6807\u8bc6\u201d\u7684\u7279\u70b9\uff0c\u4ee5\u4fbf React \u53ef\u4ee5\u5728\u6dfb\u52a0\u3001\u5220\u9664\u6216\u91cd\u65b0\u6392\u5e8f item \u65f6\uff0c\u524d\u540e\u5bf9\u5e94\u8d77\u6765\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff0ckey \u5e94\u8be5\u4ece\u6570\u636e\u4e2d\u83b7\u53d6\uff0c\u5bf9\u5e94\u7740\u552f\u4e00\u4e14\u56fa\u5b9a\u7684\u6807\u8bc6\u7b26\uff0c\u4f8b\u5982 <code class=\"language-javascript\">post.id</code>\u3002</p>\n<h2 id=\"refs\"><a class=\"anchor\" href=\"/react/glossary#refs\"></a><a href=\"/react/refs-and-the-dom\">Ref</a> </h2>\n<p>React \u652f\u6301\u4e00\u4e2a\u7279\u6b8a\u7684\u3001\u53ef\u4ee5\u9644\u52a0\u5230\u4efb\u4f55\u7ec4\u4ef6\u4e0a\u7684 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u3002\u6b64\u5c5e\u6027\u53ef\u4ee5\u662f\u4e00\u4e2a\u7531 <a href=\"/react/react-api#reactcreateref\"><code class=\"language-javascript\">React.createRef()</code> \u51fd\u6570</a>\u521b\u5efa\u7684\u5bf9\u8c61\u3001\u6216\u8005\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u3001\u6216\u8005\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u9057\u7559 API\uff09\u3002\u5f53 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u65f6\uff0c\u6b64\u51fd\u6570\u4f1a\uff08\u6839\u636e\u5143\u7d20\u7684\u7c7b\u578b\uff09\u63a5\u6536\u5e95\u5c42 DOM \u5143\u7d20\u6216 class \u5b9e\u4f8b\u4f5c\u4e3a\u5176\u53c2\u6570\u3002\u8fd9\u80fd\u591f\u8ba9\u4f60\u76f4\u63a5\u8bbf\u95ee DOM \u5143\u7d20\u6216\u7ec4\u4ef6\u5b9e\u4f8b\u3002</p>\n<p>\u8c28\u614e\u4f7f\u7528 ref\u3002\u5982\u679c\u4f60\u53d1\u73b0\u81ea\u5df1\u7ecf\u5e38\u4f7f\u7528 ref \u6765\u5728\u5e94\u7528\u4e2d\u201c\u5b9e\u73b0\u60f3\u8981\u7684\u529f\u80fd\u201d\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u53bb\u4e86\u89e3\u4e00\u4e0b<a href=\"/react/lifting-state-up\">\u81ea\u4e0a\u800c\u4e0b\u7684\u6570\u636e\u6d41</a>\u3002</p>\n<h2 id=\"events\"><a class=\"anchor\" href=\"/react/glossary#events\"></a><a href=\"/react/handling-events\">\u4e8b\u4ef6</a> </h2>\n<p>\u4f7f\u7528 React \u5143\u7d20\u5904\u7406\u4e8b\u4ef6\u65f6\uff0c\u6709\u4e00\u4e9b\u8bed\u6cd5\u4e0a\u5dee\u5f02\uff1a</p>\n<ul>\n<li>React \u4e8b\u4ef6\u5904\u7406\u5668\u4f7f\u7528 camelCase\uff08\u9a7c\u5cf0\u5f0f\u547d\u540d\uff09\u800c\u4e0d\u4f7f\u7528\u5c0f\u5199\u547d\u540d\u3002</li>\n<li>\u901a\u8fc7 JSX\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4f20\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6765\u4f5c\u4e3a\u4e8b\u4ef6\u5904\u7406\u5668\u3002</li>\n</ul>\n<h2 id=\"reconciliation\"><a class=\"anchor\" href=\"/react/glossary#reconciliation\"></a><a href=\"/react/reconciliation\">\u534f\u8c03</a> </h2>\n<p>\u5f53\u7ec4\u4ef6\u7684 props \u6216 state \u53d1\u751f\u53d8\u5316\u65f6\uff0cReact \u901a\u8fc7\u5c06\u6700\u65b0\u8fd4\u56de\u7684\u5143\u7d20\u4e0e\u539f\u5148\u6e32\u67d3\u7684\u5143\u7d20\u8fdb\u884c\u6bd4\u8f83\uff0c\u6765\u51b3\u5b9a\u662f\u5426\u6709\u5fc5\u8981\u8fdb\u884c\u4e00\u6b21\u5b9e\u9645\u7684 DOM \u66f4\u65b0\u3002\u5f53\u5b83\u4eec\u4e0d\u76f8\u7b49\u65f6\uff0cReact \u624d\u4f1a\u66f4\u65b0 DOM\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u201c\u534f\u8c03\u201d\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/reference-glossary.md\">Edit this page</a></p></div></article>", "path": "/react/glossary", "nav": ["/react/javascript-environment-requirements", "/react/hooks-intro"]}]}, {"key": "Hook", "values": [{"key": "1. Hook \u7b80\u4ecb", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u58f0\u660e\u4e00\u4e2a\u65b0\u7684\u53eb\u505a \u201ccount\u201d \u7684 state \u53d8\u91cf</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">useState</code> \u662f\u6211\u4eec\u8981\u5b66\u4e60\u7684\u7b2c\u4e00\u4e2a \u201cHook\u201d\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u662f\u7b80\u5355\u6f14\u793a\u3002\u5982\u679c\u4e0d\u7406\u89e3\u4e5f\u4e0d\u7528\u62c5\u5fc3\u3002</p>\n<p><strong>\u4f60\u5c06\u5728<a href=\"/react/hooks-overview\">\u4e0b\u4e00\u7ae0\u8282</a>\u6b63\u5f0f\u5f00\u59cb\u5b66\u4e60 Hook\u3002</strong> \u8fd9\u4e00\u7ae0\u8282\uff0c\u6211\u4eec\u5c06\u4f1a\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4f1a\u5728 React \u4e2d\u52a0\u5165 Hook\uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 Hook \u5199\u51fa\u66f4\u597d\u7684\u5e94\u7528\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>React 16.8.0 \u662f\u7b2c\u4e00\u4e2a\u652f\u6301 Hook \u7684\u7248\u672c\u3002\u5347\u7ea7\u65f6\uff0c\u8bf7\u6ce8\u610f\u66f4\u65b0\u6240\u6709\u7684 package\uff0c\u5305\u62ec React DOM\u3002\nReact Native \u4ece <a class=\"external-link\" href=\"https://reactnative.dev/blog/2019/03/12/releasing-react-native-059\">0.59 \u7248\u672c</a>\u5f00\u59cb\u652f\u6301 Hook\u3002</p>\n</div>\n<h2 id=\"video-introduction\"><a class=\"anchor\" href=\"/react/hooks-intro#video-introduction\"></a>\u89c6\u9891\u4ecb\u7ecd </h2>\n<p>\u5728 React Conf 2018 \u4e0a\uff0cSophie Alpert \u548c Dan Abramov \u4ecb\u7ecd\u4e86 Hook\uff0c\u7d27\u63a5\u7740 Ryan Florence \u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 Hook \u91cd\u6784\u5e94\u7528\u3002\u4f60\u53ef\u4ee5\u5728\u8fd9\u91cc\u770b\u5230\u8fd9\u4e2a\u89c6\u9891\uff1a</p>\n<br/>\n<a class=\"external-link\" href=\"//www.youtube.com/embed/dpw9EHDh2bM\">link</a>\n<h2 id=\"no-breaking-changes\"><a class=\"anchor\" href=\"/react/hooks-intro#no-breaking-changes\"></a>\u6ca1\u6709\u7834\u574f\u6027\u6539\u52a8 </h2>\n<p>\u5728\u6211\u4eec\u7ee7\u7eed\u4e4b\u524d\uff0c\u8bf7\u8bb0\u4f4f Hook \u662f\uff1a</p>\n<ul>\n<li><strong>\u5b8c\u5168\u53ef\u9009\u7684\u3002</strong> \u4f60\u65e0\u9700\u91cd\u5199\u4efb\u4f55\u5df2\u6709\u4ee3\u7801\u5c31\u53ef\u4ee5\u5728\u4e00\u4e9b\u7ec4\u4ef6\u4e2d\u5c1d\u8bd5 Hook\u3002\u4f46\u662f\u5982\u679c\u4f60\u4e0d\u60f3\uff0c\u4f60\u4e0d\u5fc5\u73b0\u5728\u5c31\u53bb\u5b66\u4e60\u6216\u4f7f\u7528 Hook\u3002</li>\n<li><strong>100% \u5411\u540e\u517c\u5bb9\u7684\u3002</strong> Hook \u4e0d\u5305\u542b\u4efb\u4f55\u7834\u574f\u6027\u6539\u52a8\u3002</li>\n<li><strong>\u73b0\u5728\u53ef\u7528\u3002</strong> Hook \u5df2\u53d1\u5e03\u4e8e v16.8.0\u3002</li>\n</ul>\n<p><strong>\u6ca1\u6709\u8ba1\u5212\u4ece React \u4e2d\u79fb\u9664 class\u3002</strong> \u4f60\u53ef\u4ee5\u5728\u672c\u9875<a href=\"/react/hooks-intro#gradual-adoption-strategy\">\u5e95\u90e8\u7684\u7ae0\u8282</a>\u8bfb\u5230\u66f4\u591a\u5173\u4e8e Hook \u7684\u6e10\u8fdb\u7b56\u7565\u3002</p>\n<p><strong>Hook \u4e0d\u4f1a\u5f71\u54cd\u4f60\u5bf9 React \u6982\u5ff5\u7684\u7406\u89e3\u3002</strong> \u6070\u6070\u76f8\u53cd\uff0cHook \u4e3a\u5df2\u77e5\u7684 React \u6982\u5ff5\u63d0\u4f9b\u4e86\u66f4\u76f4\u63a5\u7684 API\uff1aprops\uff0c state\uff0ccontext\uff0crefs \u4ee5\u53ca\u751f\u547d\u5468\u671f\u3002\u7a0d\u540e\u6211\u4eec\u5c06\u770b\u5230\uff0cHook \u8fd8\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u5f3a\u5927\u7684\u65b9\u5f0f\u6765\u7ec4\u5408\u4ed6\u4eec\u3002</p>\n<p><strong>\u5982\u679c\u4e0d\u60f3\u4e86\u89e3\u6dfb\u52a0 Hook \u7684\u5177\u4f53\u539f\u56e0\uff0c\u53ef\u4ee5\u76f4\u63a5<a href=\"/react/hooks-overview\">\u8df3\u5230\u4e0b\u4e00\u7ae0\u8282\u5f00\u59cb\u5b66\u4e60 Hook\uff01</a></strong> \u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u9605\u8bfb\u8fd9\u4e00\u7ae0\u8282\u6765\u4e86\u89e3\u539f\u56e0\uff0c\u5e76\u4e14\u53ef\u4ee5\u5b66\u4e60\u5230\u5982\u4f55\u5728\u4e0d\u91cd\u5199\u5e94\u7528\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 Hook\u3002</p>\n<h2 id=\"motivation\"><a class=\"anchor\" href=\"/react/hooks-intro#motivation\"></a>\u52a8\u673a </h2>\n<p>Hook \u89e3\u51b3\u4e86\u6211\u4eec\u4e94\u5e74\u6765\u7f16\u5199\u548c\u7ef4\u62a4\u6210\u5343\u4e0a\u4e07\u7684\u7ec4\u4ef6\u65f6\u9047\u5230\u7684\u5404\u79cd\u5404\u6837\u770b\u8d77\u6765\u4e0d\u76f8\u5173\u7684\u95ee\u9898\u3002\u65e0\u8bba\u4f60\u6b63\u5728\u5b66\u4e60 React\uff0c\u6216\u6bcf\u5929\u4f7f\u7528\uff0c\u6216\u8005\u66f4\u613f\u5c1d\u8bd5\u53e6\u4e00\u4e2a\u548c React \u6709\u76f8\u4f3c\u7ec4\u4ef6\u6a21\u578b\u7684\u6846\u67b6\uff0c\u4f60\u90fd\u53ef\u80fd\u5bf9\u8fd9\u4e9b\u95ee\u9898\u4f3c\u66fe\u76f8\u8bc6\u3002</p>\n<h3 id=\"its-hard-to-reuse-stateful-logic-between-components\"><a class=\"anchor\" href=\"/react/hooks-intro#its-hard-to-reuse-stateful-logic-between-components\"></a>\u5728\u7ec4\u4ef6\u4e4b\u95f4\u590d\u7528\u72b6\u6001\u903b\u8f91\u5f88\u96be </h3>\n<p>React \u6ca1\u6709\u63d0\u4f9b\u5c06\u53ef\u590d\u7528\u6027\u884c\u4e3a\u201c\u9644\u52a0\u201d\u5230\u7ec4\u4ef6\u7684\u9014\u5f84\uff08\u4f8b\u5982\uff0c\u628a\u7ec4\u4ef6\u8fde\u63a5\u5230 store\uff09\u3002\u5982\u679c\u4f60\u4f7f\u7528\u8fc7 React \u4e00\u6bb5\u65f6\u95f4\uff0c\u4f60\u4e5f\u8bb8\u4f1a\u719f\u6089\u4e00\u4e9b\u89e3\u51b3\u6b64\u7c7b\u95ee\u9898\u7684\u65b9\u6848\uff0c\u6bd4\u5982 <a href=\"/react/render-props\">render props</a> \u548c <a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a>\u3002\u4f46\u662f\u8fd9\u7c7b\u65b9\u6848\u9700\u8981\u91cd\u65b0\u7ec4\u7ec7\u4f60\u7684\u7ec4\u4ef6\u7ed3\u6784\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f88\u9ebb\u70e6\uff0c\u4f7f\u4f60\u7684\u4ee3\u7801\u96be\u4ee5\u7406\u89e3\u3002\u5982\u679c\u4f60\u5728 React DevTools \u4e2d\u89c2\u5bdf\u8fc7 React \u5e94\u7528\uff0c\u4f60\u4f1a\u53d1\u73b0\u7531 providers\uff0cconsumers\uff0c\u9ad8\u9636\u7ec4\u4ef6\uff0crender props \u7b49\u5176\u4ed6\u62bd\u8c61\u5c42\u7ec4\u6210\u7684\u7ec4\u4ef6\u4f1a\u5f62\u6210\u201c\u5d4c\u5957\u5730\u72f1\u201d\u3002\u5c3d\u7ba1\u6211\u4eec\u53ef\u4ee5<a class=\"external-link\" href=\"https://github.com/facebook/react-devtools/pull/503\">\u5728 DevTools \u8fc7\u6ee4\u6389\u5b83\u4eec</a>\uff0c\u4f46\u8fd9\u8bf4\u660e\u4e86\u4e00\u4e2a\u66f4\u6df1\u5c42\u6b21\u7684\u95ee\u9898\uff1aReact \u9700\u8981\u4e3a\u5171\u4eab\u72b6\u6001\u903b\u8f91\u63d0\u4f9b\u66f4\u597d\u7684\u539f\u751f\u9014\u5f84\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 Hook \u4ece\u7ec4\u4ef6\u4e2d\u63d0\u53d6\u72b6\u6001\u903b\u8f91\uff0c\u4f7f\u5f97\u8fd9\u4e9b\u903b\u8f91\u53ef\u4ee5\u5355\u72ec\u6d4b\u8bd5\u5e76\u590d\u7528\u3002<strong>Hook \u4f7f\u4f60\u5728\u65e0\u9700\u4fee\u6539\u7ec4\u4ef6\u7ed3\u6784\u7684\u60c5\u51b5\u4e0b\u590d\u7528\u72b6\u6001\u903b\u8f91\u3002</strong> \u8fd9\u4f7f\u5f97\u5728\u7ec4\u4ef6\u95f4\u6216\u793e\u533a\u5185\u5171\u4eab Hook \u53d8\u5f97\u66f4\u4fbf\u6377\u3002</p>\n<p>\u5177\u4f53\u5c06\u5728<a href=\"/react/hooks-custom\">\u81ea\u5b9a\u4e49 Hook</a> \u4e2d\u5bf9\u6b64\u5c55\u5f00\u66f4\u591a\u8ba8\u8bba\u3002</p>\n<h3 id=\"complex-components-become-hard-to-understand\"><a class=\"anchor\" href=\"/react/hooks-intro#complex-components-become-hard-to-understand\"></a>\u590d\u6742\u7ec4\u4ef6\u53d8\u5f97\u96be\u4ee5\u7406\u89e3 </h3>\n<p>\u6211\u4eec\u7ecf\u5e38\u7ef4\u62a4\u4e00\u4e9b\u7ec4\u4ef6\uff0c\u7ec4\u4ef6\u8d77\u521d\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u9010\u6e10\u4f1a\u88ab\u72b6\u6001\u903b\u8f91\u548c\u526f\u4f5c\u7528\u5145\u65a5\u3002\u6bcf\u4e2a\u751f\u547d\u5468\u671f\u5e38\u5e38\u5305\u542b\u4e00\u4e9b\u4e0d\u76f8\u5173\u7684\u903b\u8f91\u3002\u4f8b\u5982\uff0c\u7ec4\u4ef6\u5e38\u5e38\u5728 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentDidUpdate</code> \u4e2d\u83b7\u53d6\u6570\u636e\u3002\u4f46\u662f\uff0c\u540c\u4e00\u4e2a <code class=\"language-javascript\">componentDidMount</code> \u4e2d\u53ef\u80fd\u4e5f\u5305\u542b\u5f88\u591a\u5176\u5b83\u7684\u903b\u8f91\uff0c\u5982\u8bbe\u7f6e\u4e8b\u4ef6\u76d1\u542c\uff0c\u800c\u4e4b\u540e\u9700\u5728 <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u6e05\u9664\u3002\u76f8\u4e92\u5173\u8054\u4e14\u9700\u8981\u5bf9\u7167\u4fee\u6539\u7684\u4ee3\u7801\u88ab\u8fdb\u884c\u4e86\u62c6\u5206\uff0c\u800c\u5b8c\u5168\u4e0d\u76f8\u5173\u7684\u4ee3\u7801\u5374\u5728\u540c\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u7ec4\u5408\u5728\u4e00\u8d77\u3002\u5982\u6b64\u5f88\u5bb9\u6613\u4ea7\u751f bug\uff0c\u5e76\u4e14\u5bfc\u81f4\u903b\u8f91\u4e0d\u4e00\u81f4\u3002</p>\n<p>\u5728\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u4e0d\u53ef\u80fd\u5c06\u7ec4\u4ef6\u62c6\u5206\u4e3a\u66f4\u5c0f\u7684\u7c92\u5ea6\uff0c\u56e0\u4e3a\u72b6\u6001\u903b\u8f91\u65e0\u5904\u4e0d\u5728\u3002\u8fd9\u4e5f\u7ed9\u6d4b\u8bd5\u5e26\u6765\u4e86\u4e00\u5b9a\u6311\u6218\u3002\u540c\u65f6\uff0c\u8fd9\u4e5f\u662f\u5f88\u591a\u4eba\u5c06 React \u4e0e\u72b6\u6001\u7ba1\u7406\u5e93\u7ed3\u5408\u4f7f\u7528\u7684\u539f\u56e0\u4e4b\u4e00\u3002\u4f46\u662f\uff0c\u8fd9\u5f80\u5f80\u4f1a\u5f15\u5165\u4e86\u5f88\u591a\u62bd\u8c61\u6982\u5ff5\uff0c\u9700\u8981\u4f60\u5728\u4e0d\u540c\u7684\u6587\u4ef6\u4e4b\u95f4\u6765\u56de\u5207\u6362\uff0c\u4f7f\u5f97\u590d\u7528\u53d8\u5f97\u66f4\u52a0\u56f0\u96be\u3002</p>\n<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c<strong>Hook \u5c06\u7ec4\u4ef6\u4e2d\u76f8\u4e92\u5173\u8054\u7684\u90e8\u5206\u62c6\u5206\u6210\u66f4\u5c0f\u7684\u51fd\u6570\uff08\u6bd4\u5982\u8bbe\u7f6e\u8ba2\u9605\u6216\u8bf7\u6c42\u6570\u636e\uff09</strong>\uff0c\u800c\u5e76\u975e\u5f3a\u5236\u6309\u7167\u751f\u547d\u5468\u671f\u5212\u5206\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 reducer \u6765\u7ba1\u7406\u7ec4\u4ef6\u7684\u5185\u90e8\u72b6\u6001\uff0c\u4f7f\u5176\u66f4\u52a0\u53ef\u9884\u6d4b\u3002</p>\n<p>\u6211\u4eec\u5c06\u5728<a href=\"/react/hooks-effect#tip-use-multiple-effects-to-separate-concerns\">\u4f7f\u7528 Effect Hook</a> \u4e2d\u5bf9\u6b64\u5c55\u5f00\u66f4\u591a\u8ba8\u8bba\u3002</p>\n<h3 id=\"classes-confuse-both-people-and-machines\"><a class=\"anchor\" href=\"/react/hooks-intro#classes-confuse-both-people-and-machines\"></a>\u96be\u4ee5\u7406\u89e3\u7684 class </h3>\n<p>\u9664\u4e86\u4ee3\u7801\u590d\u7528\u548c\u4ee3\u7801\u7ba1\u7406\u4f1a\u9047\u5230\u56f0\u96be\u5916\uff0c\u6211\u4eec\u8fd8\u53d1\u73b0 class \u662f\u5b66\u4e60 React \u7684\u4e00\u5927\u5c4f\u969c\u3002\u4f60\u5fc5\u987b\u53bb\u7406\u89e3 JavaScript \u4e2d <code class=\"language-javascript\">this</code> \u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u8fd9\u4e0e\u5176\u4ed6\u8bed\u8a00\u5b58\u5728\u5de8\u5927\u5dee\u5f02\u3002\u8fd8\u4e0d\u80fd\u5fd8\u8bb0\u7ed1\u5b9a\u4e8b\u4ef6\u5904\u7406\u5668\u3002\u5982\u679c\u4e0d\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Public_class_fields#public_instance_fields\">ES2022 public class fields</a>\uff0c\u8fd9\u4e9b\u4ee3\u7801\u975e\u5e38\u5197\u4f59\u3002\u5927\u5bb6\u53ef\u4ee5\u5f88\u597d\u5730\u7406\u89e3 props\uff0cstate \u548c\u81ea\u9876\u5411\u4e0b\u7684\u6570\u636e\u6d41\uff0c\u4f46\u5bf9 class \u5374\u4e00\u7b79\u83ab\u5c55\u3002\u5373\u4fbf\u5728\u6709\u7ecf\u9a8c\u7684 React \u5f00\u53d1\u8005\u4e4b\u95f4\uff0c\u5bf9\u4e8e\u51fd\u6570\u7ec4\u4ef6\u4e0e class \u7ec4\u4ef6\u7684\u5dee\u5f02\u4e5f\u5b58\u5728\u5206\u6b67\uff0c\u751a\u81f3\u8fd8\u8981\u533a\u5206\u4e24\u79cd\u7ec4\u4ef6\u7684\u4f7f\u7528\u573a\u666f\u3002</p>\n<p>\u53e6\u5916\uff0cReact \u5df2\u7ecf\u53d1\u5e03\u4e94\u5e74\u4e86\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u80fd\u5728\u4e0b\u4e00\u4e2a\u4e94\u5e74\u4e5f\u4e0e\u65f6\u4ff1\u8fdb\u3002\u5c31\u50cf <a class=\"external-link\" href=\"https://svelte.dev/\">Svelte</a>\uff0c<a class=\"external-link\" href=\"https://angular.io/\">Angular</a>\uff0c<a class=\"external-link\" href=\"https://glimmerjs.com/\">Glimmer</a>\u7b49\u5176\u5b83\u7684\u5e93\u5c55\u793a\u7684\u90a3\u6837\uff0c\u7ec4\u4ef6<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Ahead-of-time_compilation\">\u9884\u7f16\u8bd1</a>\u4f1a\u5e26\u6765\u5de8\u5927\u7684\u6f5c\u529b\u3002\u5c24\u5176\u662f\u5728\u5b83\u4e0d\u5c40\u9650\u4e8e\u6a21\u677f\u7684\u65f6\u5019\u3002\u6700\u8fd1\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u4f7f\u7528 <a class=\"external-link\" href=\"https://prepack.io/\">Prepack</a> \u6765\u8bd5\u9a8c <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/7323\">component folding</a>\uff0c\u4e5f\u53d6\u5f97\u4e86\u521d\u6b65\u6210\u6548\u3002\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u4f7f\u7528 class \u7ec4\u4ef6\u4f1a\u65e0\u610f\u4e2d\u9f13\u52b1\u5f00\u53d1\u8005\u4f7f\u7528\u4e00\u4e9b\u8ba9\u4f18\u5316\u63aa\u65bd\u65e0\u6548\u7684\u65b9\u6848\u3002class \u4e5f\u7ed9\u76ee\u524d\u7684\u5de5\u5177\u5e26\u6765\u4e86\u4e00\u4e9b\u95ee\u9898\u3002\u4f8b\u5982\uff0cclass \u4e0d\u80fd\u5f88\u597d\u7684\u538b\u7f29\uff0c\u5e76\u4e14\u4f1a\u4f7f\u70ed\u91cd\u8f7d\u51fa\u73b0\u4e0d\u7a33\u5b9a\u7684\u60c5\u51b5\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u60f3\u63d0\u4f9b\u4e00\u4e2a\u4f7f\u4ee3\u7801\u66f4\u6613\u4e8e\u4f18\u5316\u7684 API\u3002</p>\n<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c<strong>Hook \u4f7f\u4f60\u5728\u975e class \u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4f7f\u7528\u66f4\u591a\u7684 React \u7279\u6027\u3002</strong> \u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0cReact \u7ec4\u4ef6\u4e00\u76f4\u66f4\u50cf\u662f\u51fd\u6570\u3002\u800c Hook \u5219\u62e5\u62b1\u4e86\u51fd\u6570\uff0c\u540c\u65f6\u4e5f\u6ca1\u6709\u727a\u7272 React \u7684\u7cbe\u795e\u539f\u5219\u3002Hook \u63d0\u4f9b\u4e86\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u65e0\u9700\u5b66\u4e60\u590d\u6742\u7684\u51fd\u6570\u5f0f\u6216\u54cd\u5e94\u5f0f\u7f16\u7a0b\u6280\u672f\u3002</p>\n<div class=\"blockquote\">\n<strong>\u793a\u4f8b</strong>\n<p><a href=\"/react/hooks-overview\">Hook \u6982\u89c8</a>\u662f\u5f00\u59cb\u5b66\u4e60 Hook \u7684\u4e0d\u9519\u9009\u62e9\u3002</p>\n</div>\n<h2 id=\"gradual-adoption-strategy\"><a class=\"anchor\" href=\"/react/hooks-intro#gradual-adoption-strategy\"></a>\u6e10\u8fdb\u7b56\u7565 </h2>\n<div class=\"blockquote\">\n<strong>\u603b\u7ed3\uff1a\u6ca1\u6709\u8ba1\u5212\u4ece React \u4e2d\u79fb\u9664 class\u3002</strong>\n</div>\n<p>\u5927\u90e8\u5206 React \u5f00\u53d1\u8005\u4f1a\u4e13\u6ce8\u4e8e\u5f00\u53d1\u4ea7\u54c1\uff0c\u800c\u6ca1\u65f6\u95f4\u5173\u6ce8\u6bcf\u4e00\u4e2a\u65b0 API \u7684\u53d1\u5e03\u3002Hook \u8fd8\u5f88\u65b0\uff0c\u4e5f\u8bb8\u7b49\u5230\u6709\u66f4\u591a\u793a\u4f8b\u548c\u6559\u7a0b\u540e\uff0c\u518d\u8003\u8651\u5b66\u4e60\u6216\u4f7f\u7528\u5b83\u4eec\u4e5f\u4e0d\u8fdf\u3002</p>\n<p>\u6211\u4eec\u4e5f\u660e\u767d\u5411 React \u6dfb\u52a0\u65b0\u7684\u539f\u751f\u6982\u5ff5\u7684\u95e8\u69db\u975e\u5e38\u9ad8\u3002\u6211\u4eec\u4e3a\u597d\u5947\u7684\u8bfb\u8005\u51c6\u5907\u4e86<a class=\"external-link\" href=\"https://github.com/reactjs/rfcs/pull/68\">\u8be6\u7ec6\u7684\u5f81\u6c42\u610f\u89c1\u6587\u6863</a>\uff0c\u5728\u6587\u6863\u4e2d\u7528\u66f4\u591a\u7ec6\u8282\u6df1\u5165\u8ba8\u8bba\u4e86\u6211\u4eec\u63a8\u8fdb\u8fd9\u4ef6\u4e8b\u7684\u52a8\u673a\uff0c\u4e5f\u5728\u5177\u4f53\u8bbe\u8ba1\u51b3\u7b56\u548c\u76f8\u5173\u5148\u8fdb\u6280\u672f\u4e0a\u63d0\u4f9b\u4e86\u989d\u5916\u7684\u89c6\u89d2\u3002</p>\n<p><strong>\u6700\u91cd\u8981\u7684\u662f\uff0cHook \u548c\u73b0\u6709\u4ee3\u7801\u53ef\u4ee5\u540c\u65f6\u5de5\u4f5c\uff0c\u4f60\u53ef\u4ee5\u6e10\u8fdb\u5f0f\u5730\u4f7f\u7528\u4ed6\u4eec\u3002</strong> \u4e0d\u7528\u6025\u7740\u8fc1\u79fb\u5230 Hook\u3002\u6211\u4eec\u5efa\u8bae\u907f\u514d\u4efb\u4f55\u201c\u5927\u89c4\u6a21\u91cd\u5199\u201d\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u73b0\u6709\u7684\u3001\u590d\u6742\u7684 class \u7ec4\u4ef6\u3002\u5f00\u59cb\u201c\u7528 Hook \u7684\u65b9\u5f0f\u601d\u8003\u201d\u524d\uff0c\u9700\u8981\u505a\u4e00\u4e9b\u601d\u7ef4\u4e0a\u7684\u8f6c\u53d8\u3002\u6309\u7167\u6211\u4eec\u7684\u7ecf\u9a8c\uff0c\u6700\u597d\u5148\u5728\u65b0\u7684\u4e0d\u590d\u6742\u7684\u7ec4\u4ef6\u4e2d\u5c1d\u8bd5\u4f7f\u7528 Hook\uff0c\u5e76\u786e\u4fdd\u56e2\u961f\u4e2d\u7684\u6bcf\u4e00\u4f4d\u6210\u5458\u90fd\u80fd\u9002\u5e94\u3002\u5728\u4f60\u5c1d\u8bd5\u4f7f\u7528 Hook \u540e\uff0c\u6b22\u8fce\u7ed9\u6211\u4eec\u63d0\u4f9b<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/new\">\u53cd\u9988</a>\uff0c\u65e0\u8bba\u597d\u574f\u3002</p>\n<p>\u6211\u4eec\u51c6\u5907\u8ba9 Hook \u8986\u76d6\u6240\u6709 class \u7ec4\u4ef6\u7684\u4f7f\u7528\u573a\u666f\uff0c\u4f46\u662f<strong>\u6211\u4eec\u5c06\u7ee7\u7eed\u4e3a class \u7ec4\u4ef6\u63d0\u4f9b\u652f\u6301\u3002</strong>\u5728 Facebook\uff0c\u6211\u4eec\u6709\u6210\u5343\u4e0a\u4e07\u7684\u7ec4\u4ef6\u7528 class \u4e66\u5199\uff0c\u6211\u4eec\u5b8c\u5168\u6ca1\u6709\u91cd\u5199\u5b83\u4eec\u7684\u8ba1\u5212\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u5f00\u59cb\u5728\u65b0\u7684\u4ee3\u7801\u4e2d\u540c\u65f6\u4f7f\u7528 Hook \u548c class\u3002</p>\n<h2 id=\"frequently-asked-questions\"><a class=\"anchor\" href=\"/react/hooks-intro#frequently-asked-questions\"></a>FAQ </h2>\n<p>\u6211\u4eec\u51c6\u5907\u4e86 <a href=\"/react/hooks-faq\">Hooks FAQ</a> \u6765\u89e3\u7b54\u6700\u5e38\u89c1\u7684\u5173\u4e8e Hook \u7684\u95ee\u9898\u3002</p>\n<h2 id=\"next-steps\"><a class=\"anchor\" href=\"/react/hooks-intro#next-steps\"></a>\u4e0b\u4e00\u6b65 </h2>\n<p>\u5728\u672c\u7ae0\u8282\u7684\u6700\u540e\uff0c\u4f60\u5e94\u8be5\u5bf9 Hook \u80fd\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\u6709\u4e86\u7c97\u7565\u7684\u7406\u89e3\uff0c\u4f46\u53ef\u80fd\u8fd8\u6709\u8bb8\u591a\u7ec6\u8282\u4e0d\u6e05\u695a\u3002\u4e0d\u8981\u62c5\u5fc3\uff01<strong>\u8ba9\u6211\u4eec\u53bb<a href=\"/react/hooks-overview\">\u4e0b\u4e00\u7ae0\u8282</a>\u901a\u8fc7\u4f8b\u5b50\u5b66\u4e60 Hook\u3002</strong></p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-intro.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-intro", "nav": ["/react/glossary", "/react/hooks-overview"]}, {"key": "2. Hook \u6982\u89c8", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p>Hook \u662f<a href=\"/react/hooks-intro#no-breaking-changes\">\u5411\u4e0b\u517c\u5bb9\u7684</a>\u3002\u672c\u9875\u9762\u4e3a\u6709\u7ecf\u9a8c\u7684 React \u7528\u6237\u63d0\u4f9b\u4e00\u4e2a\u5bf9 Hook \u7684\u6982\u89c8\u3002\u8fd9\u662f\u4e00\u4e2a\u76f8\u5f53\u5feb\u901f\u7684\u6982\u89c8\uff0c\u5982\u679c\u4f60\u6709\u7591\u60d1\uff0c\u53ef\u4ee5\u53c2\u9605\u4e0b\u9762\u8fd9\u6837\u7684\u9ec4\u8272\u63d0\u793a\u6846\u3002</p>\n<div class=\"blockquote\">\n<strong>\u8be6\u7ec6\u8bf4\u660e</strong>\n<p>\u6709\u5173\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u5728 React \u4e2d\u5f15\u5165 Hook \u7684\u539f\u56e0\uff0c\u8bf7\u53c2\u8003<a href=\"/react/hooks-intro#motivation\">\u52a8\u673a</a>\u3002</p>\n</div>\n<p><strong>\u2191\u2191\u2191 \u6bcf\u4e2a\u90e8\u5206\u7684\u7ed3\u5c3e\u90fd\u4f1a\u6709\u4e00\u4e2a\u5982\u4e0a\u6240\u793a\u7684\u9ec4\u8272\u65b9\u6846\u3002</strong> \u5b83\u4eec\u4f1a\u94fe\u63a5\u5230\u66f4\u8be6\u7ec6\u7684\u8bf4\u660e\u3002</p>\n<h2 id=\"state-hook\"><a class=\"anchor\" href=\"/react/hooks-overview#state-hook\"></a>\ud83d\udccc State Hook </h2>\n<p>\u8fd9\u4e2a\u4f8b\u5b50\u7528\u6765\u663e\u793a\u4e00\u4e2a\u8ba1\u6570\u5668\u3002\u5f53\u4f60\u70b9\u51fb\u6309\u94ae\uff0c\u8ba1\u6570\u5668\u7684\u503c\u5c31\u4f1a\u589e\u52a0\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u58f0\u660e\u4e00\u4e2a\u53eb \u201ccount\u201d \u7684 state \u53d8\u91cf\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u91cc\uff0c<code class=\"language-javascript\">useState</code> \u5c31\u662f\u4e00\u4e2a <em>Hook</em> \uff08\u7b49\u4e0b\u6211\u4eec\u4f1a\u8bb2\u5230\u8fd9\u662f\u4ec0\u4e48\u610f\u601d\uff09\u3002\u901a\u8fc7\u5728\u51fd\u6570\u7ec4\u4ef6\u91cc\u8c03\u7528\u5b83\u6765\u7ed9\u7ec4\u4ef6\u6dfb\u52a0\u4e00\u4e9b\u5185\u90e8 state\u3002React \u4f1a\u5728\u91cd\u590d\u6e32\u67d3\u65f6\u4fdd\u7559\u8fd9\u4e2a state\u3002<code class=\"language-javascript\">useState</code> \u4f1a\u8fd4\u56de\u4e00\u5bf9\u503c\uff1a<strong>\u5f53\u524d</strong>\u72b6\u6001\u548c\u4e00\u4e2a\u8ba9\u4f60\u66f4\u65b0\u5b83\u7684\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u5728\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u4e2d\u6216\u5176\u4ed6\u4e00\u4e9b\u5730\u65b9\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002\u5b83\u7c7b\u4f3c class \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">this.setState</code>\uff0c\u4f46\u662f\u5b83\u4e0d\u4f1a\u628a\u65b0\u7684 state \u548c\u65e7\u7684 state \u8fdb\u884c\u5408\u5e76\u3002\uff08\u6211\u4eec\u4f1a\u5728<a href=\"/react/hooks-state\">\u4f7f\u7528 State Hook</a> \u91cc\u5c55\u793a\u4e00\u4e2a\u5bf9\u6bd4 <code class=\"language-javascript\">useState</code> \u548c <code class=\"language-javascript\">this.state</code> \u7684\u4f8b\u5b50\uff09\u3002</p>\n<p><code class=\"language-javascript\">useState</code> \u552f\u4e00\u7684\u53c2\u6570\u5c31\u662f\u521d\u59cb state\u3002\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u7684\u8ba1\u6570\u5668\u662f\u4ece\u96f6\u5f00\u59cb\u7684\uff0c\u6240\u4ee5\u521d\u59cb state \u5c31\u662f <code class=\"language-javascript\">0</code>\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u540c\u4e8e <code class=\"language-javascript\">this.state</code>\uff0c\u8fd9\u91cc\u7684 state \u4e0d\u4e00\u5b9a\u8981\u662f\u4e00\u4e2a\u5bf9\u8c61 \u2014\u2014 \u5982\u679c\u4f60\u6709\u9700\u8981\uff0c\u5b83\u4e5f\u53ef\u4ee5\u662f\u3002\u8fd9\u4e2a\u521d\u59cb state \u53c2\u6570\u53ea\u6709\u5728\u7b2c\u4e00\u6b21\u6e32\u67d3\u65f6\u4f1a\u88ab\u7528\u5230\u3002</p>\n<h4 id=\"declaring-multiple-state-variables\"><a class=\"anchor\" href=\"/react/hooks-overview#declaring-multiple-state-variables\"></a>\u58f0\u660e\u591a\u4e2a state \u53d8\u91cf </h4>\n<p>\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u591a\u6b21\u4f7f\u7528 State Hook:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ExampleWithManyStates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u58f0\u660e\u591a\u4e2a state \u53d8\u91cf\uff01</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>age<span class=\"token punctuation\">,</span> setAge<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fruit<span class=\"token punctuation\">,</span> setFruit<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> setTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">'Learn Hooks'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring\">\u6570\u7ec4\u89e3\u6784</a>\u7684\u8bed\u6cd5\u8ba9\u6211\u4eec\u5728\u8c03\u7528 <code class=\"language-javascript\">useState</code> \u65f6\u53ef\u4ee5\u7ed9 state \u53d8\u91cf\u53d6\u4e0d\u540c\u7684\u540d\u5b57\u3002\u5f53\u7136\uff0c\u8fd9\u4e9b\u540d\u5b57\u5e76\u4e0d\u662f <code class=\"language-javascript\">useState</code> API \u7684\u4e00\u90e8\u5206\u3002React \u5047\u8bbe\u5f53\u4f60\u591a\u6b21\u8c03\u7528 <code class=\"language-javascript\">useState</code> \u7684\u65f6\u5019\uff0c\u4f60\u80fd\u4fdd\u8bc1\u6bcf\u6b21\u6e32\u67d3\u65f6\u5b83\u4eec\u7684\u8c03\u7528\u987a\u5e8f\u662f\u4e0d\u53d8\u7684\u3002\u540e\u9762\u6211\u4eec\u4f1a\u518d\u6b21\u89e3\u91ca\u5b83\u662f\u5982\u4f55\u5de5\u4f5c\u7684\u4ee5\u53ca\u5728\u4ec0\u4e48\u573a\u666f\u4e0b\u4f7f\u7528\u3002</p>\n<h4 id=\"but-what-is-a-hook\"><a class=\"anchor\" href=\"/react/hooks-overview#but-what-is-a-hook\"></a>\u90a3\u4e48\uff0c\u4ec0\u4e48\u662f Hook? </h4>\n<p>Hook \u662f\u4e00\u4e9b\u53ef\u4ee5\u8ba9\u4f60\u5728\u51fd\u6570\u7ec4\u4ef6\u91cc\u201c\u94a9\u5165\u201d React state \u53ca\u751f\u547d\u5468\u671f\u7b49\u7279\u6027\u7684\u51fd\u6570\u3002Hook \u4e0d\u80fd\u5728 class \u7ec4\u4ef6\u4e2d\u4f7f\u7528 \u2014\u2014 \u8fd9\u4f7f\u5f97\u4f60\u4e0d\u4f7f\u7528 class \u4e5f\u80fd\u4f7f\u7528 React\u3002\uff08\u6211\u4eec<a href=\"/react/hooks-intro#gradual-adoption-strategy\">\u4e0d\u63a8\u8350</a>\u628a\u4f60\u5df2\u6709\u7684\u7ec4\u4ef6\u5168\u90e8\u91cd\u5199\uff0c\u4f46\u662f\u4f60\u53ef\u4ee5\u5728\u65b0\u7ec4\u4ef6\u91cc\u5f00\u59cb\u4f7f\u7528 Hook\u3002\uff09</p>\n<p>React \u5185\u7f6e\u4e86\u4e00\u4e9b\u50cf <code class=\"language-javascript\">useState</code> \u8fd9\u6837\u7684 Hook\u3002\u4f60\u4e5f\u53ef\u4ee5\u521b\u5efa\u4f60\u81ea\u5df1\u7684 Hook \u6765\u590d\u7528\u4e0d\u540c\u7ec4\u4ef6\u4e4b\u95f4\u7684\u72b6\u6001\u903b\u8f91\u3002\u6211\u4eec\u4f1a\u5148\u4ecb\u7ecd\u8fd9\u4e9b\u5185\u7f6e\u7684 Hook\u3002</p>\n<div class=\"blockquote\">\n<strong>\u8be6\u7ec6\u8bf4\u660e</strong>\n<p>\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e00\u7ae0\u8282\u4e86\u89e3\u66f4\u591a\u5173\u4e8e State Hook \u7684\u5185\u5bb9\uff1a<a href=\"/react/hooks-state\">\u4f7f\u7528 State Hook</a>\u3002</p>\n</div>\n<h2 id=\"effect-hook\"><a class=\"anchor\" href=\"/react/hooks-overview#effect-hook\"></a>\u26a1\ufe0f Effect Hook </h2>\n<p>\u4f60\u4e4b\u524d\u53ef\u80fd\u5df2\u7ecf\u5728 React \u7ec4\u4ef6\u4e2d\u6267\u884c\u8fc7\u6570\u636e\u83b7\u53d6\u3001\u8ba2\u9605\u6216\u8005\u624b\u52a8\u4fee\u6539\u8fc7 DOM\u3002\u6211\u4eec\u7edf\u4e00\u628a\u8fd9\u4e9b\u64cd\u4f5c\u79f0\u4e3a\u201c\u526f\u4f5c\u7528\u201d\uff0c\u6216\u8005\u7b80\u79f0\u4e3a\u201c\u4f5c\u7528\u201d\u3002</p>\n<p><code class=\"language-javascript\">useEffect</code> \u5c31\u662f\u4e00\u4e2a Effect Hook\uff0c\u7ed9\u51fd\u6570\u7ec4\u4ef6\u589e\u52a0\u4e86\u64cd\u4f5c\u526f\u4f5c\u7528\u7684\u80fd\u529b\u3002\u5b83\u8ddf class \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">componentDidMount</code>\u3001<code class=\"language-javascript\">componentDidUpdate</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u5177\u6709\u76f8\u540c\u7684\u7528\u9014\uff0c\u53ea\u4e0d\u8fc7\u88ab\u5408\u5e76\u6210\u4e86\u4e00\u4e2a API\u3002\uff08\u6211\u4eec\u4f1a\u5728<a href=\"/react/hooks-effect\">\u4f7f\u7528 Effect Hook</a> \u91cc\u5c55\u793a\u5bf9\u6bd4 <code class=\"language-javascript\">useEffect</code> \u548c\u8fd9\u4e9b\u65b9\u6cd5\u7684\u4f8b\u5b50\u3002\uff09</p>\n<p>\u4f8b\u5982\uff0c\u4e0b\u9762\u8fd9\u4e2a\u7ec4\u4ef6\u5728 React \u66f4\u65b0 DOM \u540e\u4f1a\u8bbe\u7f6e\u4e00\u4e2a\u9875\u9762\u6807\u9898\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u76f8\u5f53\u4e8e componentDidMount \u548c componentDidUpdate:</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u4f7f\u7528\u6d4f\u89c8\u5668\u7684 API \u66f4\u65b0\u9875\u9762\u6807\u9898</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5f53\u4f60\u8c03\u7528 <code class=\"language-javascript\">useEffect</code> \u65f6\uff0c\u5c31\u662f\u5728\u544a\u8bc9 React \u5728\u5b8c\u6210\u5bf9 DOM \u7684\u66f4\u6539\u540e\u8fd0\u884c\u4f60\u7684\u201c\u526f\u4f5c\u7528\u201d\u51fd\u6570\u3002\u7531\u4e8e\u526f\u4f5c\u7528\u51fd\u6570\u662f\u5728\u7ec4\u4ef6\u5185\u58f0\u660e\u7684\uff0c\u6240\u4ee5\u5b83\u4eec\u53ef\u4ee5\u8bbf\u95ee\u5230\u7ec4\u4ef6\u7684 props \u548c state\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cReact \u4f1a\u5728\u6bcf\u6b21\u6e32\u67d3\u540e\u8c03\u7528\u526f\u4f5c\u7528\u51fd\u6570 \u2014\u2014 <strong>\u5305\u62ec</strong>\u7b2c\u4e00\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u3002\uff08\u6211\u4eec\u4f1a\u5728<a href=\"/react/hooks-effect\">\u4f7f\u7528 Effect Hook</a> \u4e2d\u8ddf class \u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u505a\u66f4\u8be6\u7ec6\u7684\u5bf9\u6bd4\u3002\uff09</p>\n<p>\u526f\u4f5c\u7528\u51fd\u6570\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u6765\u6307\u5b9a\u5982\u4f55\u201c\u6e05\u9664\u201d\u526f\u4f5c\u7528\u3002\u4f8b\u5982\uff0c\u5728\u4e0b\u9762\u7684\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u526f\u4f5c\u7528\u51fd\u6570\u6765\u8ba2\u9605\u597d\u53cb\u7684\u5728\u7ebf\u72b6\u6001\uff0c\u5e76\u901a\u8fc7\u53d6\u6d88\u8ba2\u9605\u6765\u8fdb\u884c\u6e05\u9664\u64cd\u4f5c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0cReact \u4f1a\u5728\u7ec4\u4ef6\u9500\u6bc1\u65f6\u53d6\u6d88\u5bf9 <code class=\"language-javascript\">ChatAPI</code> \u7684\u8ba2\u9605\uff0c\u7136\u540e\u5728\u540e\u7eed\u6e32\u67d3\u65f6\u91cd\u65b0\u6267\u884c\u526f\u4f5c\u7528\u51fd\u6570\u3002\uff08\u5982\u679c\u4f20\u7ed9 <code class=\"language-javascript\">ChatAPI</code> \u7684 <code class=\"language-javascript\">props.friend.id</code> \u6ca1\u6709\u53d8\u5316\uff0c\u4f60\u4e5f\u53ef\u4ee5<a href=\"/react/hooks-effect#tip-optimizing-performance-by-skipping-effects\">\u544a\u8bc9 React \u8df3\u8fc7\u91cd\u65b0\u8ba2\u9605</a>\u3002\uff09</p>\n<p>\u8ddf <code class=\"language-javascript\">useState</code> \u4e00\u6837\uff0c\u4f60\u53ef\u4ee5\u5728\u7ec4\u4ef6\u4e2d\u591a\u6b21\u4f7f\u7528 <code class=\"language-javascript\">useEffect</code> \uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatusWithCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span>    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u901a\u8fc7\u4f7f\u7528 Hook\uff0c\u4f60\u53ef\u4ee5\u628a\u7ec4\u4ef6\u5185\u76f8\u5173\u7684\u526f\u4f5c\u7528\u7ec4\u7ec7\u5728\u4e00\u8d77\uff08\u4f8b\u5982\u521b\u5efa\u8ba2\u9605\u53ca\u53d6\u6d88\u8ba2\u9605\uff09\uff0c\u800c\u4e0d\u8981\u628a\u5b83\u4eec\u62c6\u5206\u5230\u4e0d\u540c\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u91cc\u3002</p>\n<div class=\"blockquote\">\n<strong>\u8be6\u7ec6\u8bf4\u660e</strong>\n<p>\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e00\u7ae0\u8282\u4e86\u89e3\u66f4\u591a\u5173\u4e8e <code class=\"language-javascript\">useEffect</code> \u7684\u5185\u5bb9\uff1a<a href=\"/react/hooks-effect\">\u4f7f\u7528 Effect Hook</a></p>\n</div>\n<h2 id=\"rules-of-hooks\"><a class=\"anchor\" href=\"/react/hooks-overview#rules-of-hooks\"></a>\u270c\ufe0f Hook \u4f7f\u7528\u89c4\u5219 </h2>\n<p>Hook \u5c31\u662f JavaScript \u51fd\u6570\uff0c\u4f46\u662f\u4f7f\u7528\u5b83\u4eec\u4f1a\u6709\u4e24\u4e2a\u989d\u5916\u7684\u89c4\u5219\uff1a</p>\n<ul>\n<li>\u53ea\u80fd\u5728<strong>\u51fd\u6570\u6700\u5916\u5c42</strong>\u8c03\u7528 Hook\u3002\u4e0d\u8981\u5728\u5faa\u73af\u3001\u6761\u4ef6\u5224\u65ad\u6216\u8005\u5b50\u51fd\u6570\u4e2d\u8c03\u7528\u3002</li>\n<li>\u53ea\u80fd\u5728 <strong>React \u7684\u51fd\u6570\u7ec4\u4ef6</strong>\u4e2d\u8c03\u7528 Hook\u3002\u4e0d\u8981\u5728\u5176\u4ed6 JavaScript \u51fd\u6570\u4e2d\u8c03\u7528\u3002\uff08\u8fd8\u6709\u4e00\u4e2a\u5730\u65b9\u53ef\u4ee5\u8c03\u7528 Hook \u2014\u2014 \u5c31\u662f\u81ea\u5b9a\u4e49\u7684 Hook \u4e2d\uff0c\u6211\u4eec\u7a0d\u540e\u4f1a\u5b66\u4e60\u5230\u3002\uff09</li>\n</ul>\n<p>\u540c\u65f6\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86 <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\">linter \u63d2\u4ef6</a>\u6765\u81ea\u52a8\u6267\u884c\u8fd9\u4e9b\u89c4\u5219\u3002\u8fd9\u4e9b\u89c4\u5219\u4e4d\u770b\u8d77\u6765\u4f1a\u6709\u4e00\u4e9b\u9650\u5236\u548c\u4ee4\u4eba\u56f0\u60d1\uff0c\u4f46\u662f\u8981\u8ba9 Hook \u6b63\u5e38\u5de5\u4f5c\uff0c\u5b83\u4eec\u81f3\u5173\u91cd\u8981\u3002</p>\n<div class=\"blockquote\">\n<strong>\u8be6\u7ec6\u8bf4\u660e</strong>\n<p>\u4f60\u53ef\u4ee5\u5728\u8fd9\u7ae0\u8282\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u8fd9\u4e9b\u89c4\u5219\u7684\u5185\u5bb9\uff1a<a href=\"/react/hooks-rules\">Hook \u4f7f\u7528\u89c4\u5219</a>\u3002</p>\n</div>\n<h2 id=\"building-your-own-hooks\"><a class=\"anchor\" href=\"/react/hooks-overview#building-your-own-hooks\"></a>\ud83d\udca1 \u81ea\u5b9a\u4e49 Hook </h2>\n<p>\u6709\u65f6\u5019\u6211\u4eec\u4f1a\u60f3\u8981\u5728\u7ec4\u4ef6\u4e4b\u95f4\u91cd\u7528\u4e00\u4e9b\u72b6\u6001\u903b\u8f91\u3002\u76ee\u524d\u4e3a\u6b62\uff0c\u6709\u4e24\u79cd\u4e3b\u6d41\u65b9\u6848\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a<a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a>\u548c <a href=\"/react/render-props\">render props</a>\u3002\u81ea\u5b9a\u4e49 Hook \u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u589e\u52a0\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u8fbe\u5230\u540c\u6837\u7684\u76ee\u7684\u3002</p>\n<p>\u524d\u9762\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u4e00\u4e2a\u53eb <code class=\"language-javascript\">FriendStatus</code> \u7684\u7ec4\u4ef6\uff0c\u5b83\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">useState</code> \u548c <code class=\"language-javascript\">useEffect</code> \u7684 Hook \u6765\u8ba2\u9605\u4e00\u4e2a\u597d\u53cb\u7684\u5728\u7ebf\u72b6\u6001\u3002\u5047\u8bbe\u6211\u4eec\u60f3\u5728\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u91cc\u91cd\u7528\u8fd9\u4e2a\u8ba2\u9605\u903b\u8f91\u3002</p>\n<p>\u9996\u5148\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u903b\u8f91\u62bd\u53d6\u5230\u4e00\u4e2a\u53eb\u505a <code class=\"language-javascript\">useFriendStatus</code> \u7684\u81ea\u5b9a\u4e49 Hook \u91cc\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friendID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>friendID<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>friendID<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> isOnline<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5b83\u5c06 <code class=\"language-javascript\">friendID</code> \u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u8be5\u597d\u53cb\u662f\u5426\u5728\u7ebf\uff1a</p>\n<p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5728\u4e24\u4e2a\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u5b83\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'green'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'black'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6bcf\u4e2a\u7ec4\u4ef6\u95f4\u7684 state \u662f\u5b8c\u5168\u72ec\u7acb\u7684\u3002Hook \u662f\u4e00\u79cd\u590d\u7528<em>\u72b6\u6001\u903b\u8f91</em>\u7684\u65b9\u5f0f\uff0c\u5b83\u4e0d\u590d\u7528 state \u672c\u8eab\u3002\u4e8b\u5b9e\u4e0a Hook \u7684\u6bcf\u6b21<em>\u8c03\u7528</em>\u90fd\u6709\u4e00\u4e2a\u5b8c\u5168\u72ec\u7acb\u7684 state \u2014\u2014 \u56e0\u6b64\u4f60\u53ef\u4ee5\u5728\u5355\u4e2a\u7ec4\u4ef6\u4e2d\u591a\u6b21\u8c03\u7528\u540c\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook\u3002</p>\n<p>\u81ea\u5b9a\u4e49 Hook \u66f4\u50cf\u662f\u4e00\u79cd\u7ea6\u5b9a\u800c\u4e0d\u662f\u529f\u80fd\u3002\u5982\u679c\u51fd\u6570\u7684\u540d\u5b57\u4ee5 \u201c<code class=\"language-javascript\">use</code>\u201d \u5f00\u5934\u5e76\u8c03\u7528\u5176\u4ed6 Hook\uff0c\u6211\u4eec\u5c31\u8bf4\u8fd9\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook\u3002 <code class=\"language-javascript\">useSomething</code> \u7684\u547d\u540d\u7ea6\u5b9a\u53ef\u4ee5\u8ba9\u6211\u4eec\u7684 linter \u63d2\u4ef6\u5728\u4f7f\u7528 Hook \u7684\u4ee3\u7801\u4e2d\u627e\u5230 bug\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u521b\u5efa\u6db5\u76d6\u5404\u79cd\u573a\u666f\u7684\u81ea\u5b9a\u4e49 Hook\uff0c\u5982\u8868\u5355\u5904\u7406\u3001\u52a8\u753b\u3001\u8ba2\u9605\u58f0\u660e\u3001\u8ba1\u65f6\u5668\uff0c\u751a\u81f3\u53ef\u80fd\u8fd8\u6709\u66f4\u591a\u6211\u4eec\u6ca1\u60f3\u5230\u7684\u573a\u666f\u3002\u6211\u4eec\u5f88\u671f\u5f85\u770b\u5230 React \u793e\u533a\u4f1a\u51fa\u73b0\u4ec0\u4e48\u6837\u7684\u81ea\u5b9a\u4e49 Hook\u3002</p>\n<div class=\"blockquote\">\n<strong>\u8be6\u7ec6\u8bf4\u660e</strong>\n<p>\u6211\u4eec\u4f1a\u5728\u8fd9\u4e00\u7ae0\u8282\u4ecb\u7ecd\u66f4\u591a\u5173\u4e8e\u81ea\u5b9a\u4e49 Hook \u7684\u5185\u5bb9\uff1a <a href=\"/react/hooks-custom\">\u521b\u5efa\u4f60\u81ea\u5df1\u7684 Hook</a>\u3002</p>\n</div>\n<h2 id=\"-other-hooks\"><a class=\"anchor\" href=\"/react/hooks-overview#-other-hooks\"></a>\ud83d\udd0c \u5176\u4ed6 Hook </h2>\n<p>\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u4f7f\u7528\u9891\u7387\u8f83\u4f4e\u7684\u4f46\u662f\u5f88\u6709\u7528\u7684 Hook\u3002\u6bd4\u5982\uff0c<a href=\"/react/hooks-reference#usecontext\"><code class=\"language-javascript\">useContext</code></a> \u8ba9\u4f60\u4e0d\u4f7f\u7528\u7ec4\u4ef6\u5d4c\u5957\u5c31\u53ef\u4ee5\u8ba2\u9605 React \u7684 Context\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> locale <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>LocaleContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ThemeContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u53e6\u5916 <a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code></a> \u53ef\u4ee5\u8ba9\u4f60\u901a\u8fc7 reducer \u6765\u7ba1\u7406\u7ec4\u4ef6\u672c\u5730\u7684\u590d\u6742 state\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>todosReducer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token comment\">// ...</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u8be6\u7ec6\u8bf4\u660e</strong>\n<p>\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e00\u7ae0\u8282\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u6240\u6709\u5185\u7f6e Hook \u7684\u5185\u5bb9\uff1a<a href=\"/react/hooks-reference\">Hook API \u7d22\u5f15</a>\u3002</p>\n</div>\n<h2 id=\"next-steps\"><a class=\"anchor\" href=\"/react/hooks-overview#next-steps\"></a>\u4e0b\u4e00\u6b65 </h2>\n<p>\u55ef\uff0c\u771f\u5feb\uff01\u5982\u679c\u4f60\u8fd8\u6709\u4ec0\u4e48\u4e1c\u897f\u4e0d\u662f\u5f88\u7406\u89e3\u6216\u8005\u60f3\u8981\u4e86\u89e3\u66f4\u8be6\u7ec6\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u7ee7\u7eed\u9605\u8bfb\u4e0b\u4e00\u7ae0\u8282\uff1a<a href=\"/react/hooks-state\">State Hook</a>\u3002</p>\n<p>\u4f60\u4e5f\u53ef\u4ee5\u67e5\u9605 <a href=\"/react/hooks-reference\">Hook API \u7d22\u5f15</a> \u548c <a href=\"/react/hooks-faq\">Hooks FAQ</a>\u3002</p>\n<p>\u6700\u540e\uff0c\u4e0d\u8981\u5fd8\u8bb0\u67e5\u9605 <a href=\"/react/hooks-intro\">Hook \u7b80\u4ecb</a>\uff0c\u5b83\u4ecb\u7ecd\u4e86\u6211\u4eec<em>\u4e3a\u4ec0\u4e48</em>\u8981\u589e\u52a0 Hook \u4ee5\u53ca\u5982\u4f55\u5728\u4e0d\u91cd\u5199\u6574\u4e2a\u5e94\u7528\u7684\u60c5\u51b5\u4e0b\u5c06 Hook \u8ddf class \u7ec4\u4ef6\u540c\u65f6\u4f7f\u7528\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-overview.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-overview", "nav": ["/react/hooks-intro", "/react/hooks-state"]}, {"key": "3. \u4f7f\u7528 State Hook", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p><a href=\"/react/hooks-intro\">Hook \u7b80\u4ecb\u7ae0\u8282</a>\u4e2d\u4f7f\u7528\u4e0b\u9762\u7684\u4f8b\u5b50\u4ecb\u7ecd\u4e86 Hook\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u58f0\u660e\u4e00\u4e2a\u53eb \"count\" \u7684 state \u53d8\u91cf</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u5c06\u901a\u8fc7\u5c06\u8fd9\u6bb5\u4ee3\u7801\u4e0e\u4e00\u4e2a\u7b49\u4ef7\u7684 class \u793a\u4f8b\u8fdb\u884c\u6bd4\u8f83\u6765\u5f00\u59cb\u5b66\u4e60 Hook\u3002</p>\n<h2 id=\"equivalent-class-example\"><a class=\"anchor\" href=\"/react/hooks-state#equivalent-class-example\"></a>\u7b49\u4ef7\u7684 class \u793a\u4f8b </h2>\n<p>\u5982\u679c\u4f60\u4e4b\u524d\u5728 React \u4e2d\u4f7f\u7528\u8fc7 class\uff0c\u8fd9\u6bb5\u4ee3\u7801\u770b\u8d77\u6765\u5e94\u8be5\u5f88\u719f\u6089\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          Click me\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>state \u521d\u59cb\u503c\u4e3a <code class=\"language-javascript\">{ count: 0 }</code> \uff0c\u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u540e\uff0c\u6211\u4eec\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">this.setState()</code> \u6765\u589e\u52a0 <code class=\"language-javascript\">state.count</code>\u3002\u6574\u4e2a\u7ae0\u8282\u4e2d\u90fd\u5c06\u4f7f\u7528\u8be5 class \u7684\u4ee3\u7801\u7247\u6bb5\u505a\u793a\u4f8b\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4f60\u53ef\u80fd\u60f3\u77e5\u9053\u4e3a\u4ec0\u4e48\u6211\u4eec\u5728\u8fd9\u91cc\u4f7f\u7528\u4e00\u4e2a\u8ba1\u6570\u5668\u4f8b\u5b50\u800c\u4e0d\u662f\u4e00\u4e2a\u66f4\u5b9e\u9645\u7684\u793a\u4f8b\u3002\u56e0\u4e3a\u6211\u4eec\u8fd8\u53ea\u662f\u521d\u6b65\u63a5\u89e6 Hook \uff0c\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5c06\u6ce8\u610f\u529b\u96c6\u4e2d\u5230 API \u672c\u8eab\u3002</p>\n</div>\n<h2 id=\"hooks-and-function-components\"><a class=\"anchor\" href=\"/react/hooks-state#hooks-and-function-components\"></a>Hook \u548c\u51fd\u6570\u7ec4\u4ef6 </h2>\n<p>\u590d\u4e60\u4e00\u4e0b\uff0c React \u7684\u51fd\u6570\u7ec4\u4ef6\u662f\u8fd9\u6837\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Example</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u5728\u8fd9\u4f7f\u7528 Hook</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6216\u662f\u8fd9\u6837\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4f60\u53ef\u4ee5\u5728\u8fd9\u4f7f\u7528 Hook</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u4e4b\u524d\u53ef\u80fd\u628a\u5b83\u4eec\u53eb\u505a\u201c\u65e0\u72b6\u6001\u7ec4\u4ef6\u201d\u3002\u4f46\u73b0\u5728\u6211\u4eec\u4e3a\u5b83\u4eec\u5f15\u5165\u4e86\u4f7f\u7528 React state \u7684\u80fd\u529b\uff0c\u6240\u4ee5\u6211\u4eec\u66f4\u559c\u6b22\u53eb\u5b83\u201d\u51fd\u6570\u7ec4\u4ef6\u201d\u3002</p>\n<p>Hook \u5728 class \u5185\u90e8\u662f<strong>\u4e0d</strong>\u8d77\u4f5c\u7528\u7684\u3002\u4f46\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u6765\u53d6\u4ee3 class \u3002</p>\n<h2 id=\"whats-a-hook\"><a class=\"anchor\" href=\"/react/hooks-state#whats-a-hook\"></a>Hook \u662f\u4ec0\u4e48\uff1f </h2>\n<p>\u5728\u65b0\u793a\u4f8b\u4e2d\uff0c\u9996\u5148\u5f15\u5165 React \u4e2d <code class=\"language-javascript\">useState</code> \u7684 Hook</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Hook \u662f\u4ec0\u4e48\uff1f</strong> Hook \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u8ba9\u4f60\u201c\u94a9\u5165\u201d React \u7684\u7279\u6027\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">useState</code> \u662f\u5141\u8bb8\u4f60\u5728 React \u51fd\u6570\u7ec4\u4ef6\u4e2d\u6dfb\u52a0 state \u7684 Hook\u3002\u7a0d\u540e\u6211\u4eec\u5c06\u5b66\u4e60\u5176\u4ed6 Hook\u3002</p>\n<p><strong>\u4ec0\u4e48\u65f6\u5019\u6211\u4f1a\u7528 Hook\uff1f</strong> \u5982\u679c\u4f60\u5728\u7f16\u5199\u51fd\u6570\u7ec4\u4ef6\u5e76\u610f\u8bc6\u5230\u9700\u8981\u5411\u5176\u6dfb\u52a0\u4e00\u4e9b state\uff0c\u4ee5\u524d\u7684\u505a\u6cd5\u662f\u5fc5\u987b\u5c06\u5176\u8f6c\u5316\u4e3a class\u3002\u73b0\u5728\u4f60\u53ef\u4ee5\u5728\u73b0\u6709\u7684\u51fd\u6570\u7ec4\u4ef6\u4e2d\u4f7f\u7528 Hook\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728\u7ec4\u4ef6\u4e2d\u6709\u4e9b\u7279\u6b8a\u7684\u89c4\u5219\uff0c\u89c4\u5b9a\u4ec0\u4e48\u5730\u65b9\u80fd\u4f7f\u7528 Hook\uff0c\u4ec0\u4e48\u5730\u65b9\u4e0d\u80fd\u4f7f\u7528\u3002\u6211\u4eec\u5c06\u5728 <a href=\"/react/hooks-rules\">Hook \u89c4\u5219</a>\u4e2d\u5b66\u4e60\u5b83\u4eec\u3002</p>\n</div>\n<h2 id=\"declaring-a-state-variable\"><a class=\"anchor\" href=\"/react/hooks-state#declaring-a-state-variable\"></a>\u58f0\u660e State \u53d8\u91cf  </h2>\n<p>\u5728 class \u4e2d\uff0c\u6211\u4eec\u901a\u8fc7\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8bbe\u7f6e <code class=\"language-javascript\">this.state</code> \u4e3a <code class=\"language-javascript\">{ count: 0 }</code> \u6765\u521d\u59cb\u5316 <code class=\"language-javascript\">count</code> state \u4e3a <code class=\"language-javascript\">0</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709 <code class=\"language-javascript\">this</code>\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u5206\u914d\u6216\u8bfb\u53d6 <code class=\"language-javascript\">this.state</code>\u3002\u6211\u4eec\u76f4\u63a5\u5728\u7ec4\u4ef6\u4e2d\u8c03\u7528 <code class=\"language-javascript\">useState</code> Hook\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u58f0\u660e\u4e00\u4e2a\u53eb \u201ccount\u201d \u7684 state \u53d8\u91cf</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p><strong><code class=\"language-javascript\">\u8c03\u7528 useState</code> \u65b9\u6cd5\u7684\u65f6\u5019\u505a\u4e86\u4ec0\u4e48?</strong> \u5b83\u5b9a\u4e49\u4e00\u4e2a \u201cstate \u53d8\u91cf\u201d\u3002\u6211\u4eec\u7684\u53d8\u91cf\u53eb <code class=\"language-javascript\">count</code>\uff0c \u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u53eb\u4ed6\u4efb\u4f55\u540d\u5b57\uff0c\u6bd4\u5982 <code class=\"language-javascript\">banana</code>\u3002\u8fd9\u662f\u4e00\u79cd\u5728\u51fd\u6570\u8c03\u7528\u65f6\u4fdd\u5b58\u53d8\u91cf\u7684\u65b9\u5f0f \u2014\u2014 <code class=\"language-javascript\">useState</code> \u662f\u4e00\u79cd\u65b0\u65b9\u6cd5\uff0c\u5b83\u4e0e class \u91cc\u9762\u7684 <code class=\"language-javascript\">this.state</code> \u63d0\u4f9b\u7684\u529f\u80fd\u5b8c\u5168\u76f8\u540c\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5728\u51fd\u6570\u9000\u51fa\u540e\u53d8\u91cf\u5c31\u4f1a\u201d\u6d88\u5931\u201d\uff0c\u800c state \u4e2d\u7684\u53d8\u91cf\u4f1a\u88ab React \u4fdd\u7559\u3002</p>\n<p><strong><code class=\"language-javascript\">useState</code> \u9700\u8981\u54ea\u4e9b\u53c2\u6570\uff1f</strong> <code class=\"language-javascript\">useState()</code> \u65b9\u6cd5\u91cc\u9762\u552f\u4e00\u7684\u53c2\u6570\u5c31\u662f\u521d\u59cb state\u3002\u4e0d\u540c\u4e8e class \u7684\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u9700\u8981\u4f7f\u7528\u6570\u5b57\u6216\u5b57\u7b26\u4e32\u5bf9\u5176\u8fdb\u884c\u8d4b\u503c\uff0c\u800c\u4e0d\u4e00\u5b9a\u662f\u5bf9\u8c61\u3002\u5728\u793a\u4f8b\u4e2d\uff0c\u53ea\u9700\u4f7f\u7528\u6570\u5b57\u6765\u8bb0\u5f55\u7528\u6237\u70b9\u51fb\u6b21\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u4f20\u4e86 <code class=\"language-javascript\">0</code> \u4f5c\u4e3a\u53d8\u91cf\u7684\u521d\u59cb state\u3002\uff08\u5982\u679c\u6211\u4eec\u60f3\u8981\u5728 state \u4e2d\u5b58\u50a8\u4e24\u4e2a\u4e0d\u540c\u7684\u53d8\u91cf\uff0c\u53ea\u9700\u8c03\u7528 <code class=\"language-javascript\">useState()</code> \u4e24\u6b21\u5373\u53ef\u3002\uff09</p>\n<p><strong><code class=\"language-javascript\">useState</code> \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u662f\u4ec0\u4e48\uff1f</strong> \u8fd4\u56de\u503c\u4e3a\uff1a\u5f53\u524d state \u4ee5\u53ca\u66f4\u65b0 state \u7684\u51fd\u6570\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u5199 <code class=\"language-javascript\">const [count, setCount] = useState()</code> \u7684\u539f\u56e0\u3002\u8fd9\u4e0e class \u91cc\u9762 <code class=\"language-javascript\">this.state.count</code> \u548c <code class=\"language-javascript\">this.setState</code> \u7c7b\u4f3c\uff0c\u552f\u4e00\u533a\u522b\u5c31\u662f\u4f60\u9700\u8981\u6210\u5bf9\u7684\u83b7\u53d6\u5b83\u4eec\u3002\u5982\u679c\u4f60\u4e0d\u719f\u6089\u6211\u4eec\u4f7f\u7528\u7684\u8bed\u6cd5\uff0c\u6211\u4eec\u4f1a\u5728<a href=\"/react/hooks-state#tip-what-do-square-brackets-mean\">\u672c\u7ae0\u8282\u7684\u5e95\u90e8</a>\u4ecb\u7ecd\u5b83\u3002</p>\n<p>\u65e2\u7136\u6211\u4eec\u77e5\u9053\u4e86 <code class=\"language-javascript\">useState</code> \u7684\u4f5c\u7528\uff0c\u6211\u4eec\u7684\u793a\u4f8b\u5e94\u8be5\u66f4\u5bb9\u6613\u7406\u89e3\u4e86\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u58f0\u660e\u4e00\u4e2a\u53eb \"count\" \u7684 state \u53d8\u91cf</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>\u6211\u4eec\u58f0\u660e\u4e86\u4e00\u4e2a\u53eb <code class=\"language-javascript\">count</code> \u7684 state \u53d8\u91cf\uff0c\u7136\u540e\u628a\u5b83\u8bbe\u4e3a <code class=\"language-javascript\">0</code>\u3002React \u4f1a\u5728\u91cd\u590d\u6e32\u67d3\u65f6\u8bb0\u4f4f\u5b83\u5f53\u524d\u7684\u503c\uff0c\u5e76\u4e14\u63d0\u4f9b\u6700\u65b0\u7684\u503c\u7ed9\u6211\u4eec\u7684\u51fd\u6570\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">setCount</code> \u6765\u66f4\u65b0\u5f53\u524d\u7684 <code class=\"language-javascript\">count</code>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4f60\u53ef\u80fd\u60f3\u77e5\u9053\uff1a\u4e3a\u4ec0\u4e48\u53eb <code class=\"language-javascript\">useState</code> \u800c\u4e0d\u53eb <code class=\"language-javascript\">createState</code>?</p>\n<p>\u201cCreate\u201d \u53ef\u80fd\u4e0d\u662f\u5f88\u51c6\u786e\uff0c\u56e0\u4e3a state \u53ea\u5728\u7ec4\u4ef6\u9996\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u88ab\u521b\u5efa\u3002\u5728\u4e0b\u4e00\u6b21\u91cd\u65b0\u6e32\u67d3\u65f6\uff0c<code class=\"language-javascript\">useState</code> \u8fd4\u56de\u7ed9\u6211\u4eec\u5f53\u524d\u7684 state\u3002\u5426\u5219\u5b83\u5c31\u4e0d\u662f \u201cstate\u201d\u4e86\uff01\u8fd9\u4e5f\u662f Hook \u7684\u540d\u5b57<em>\u603b\u662f</em>\u4ee5 <code class=\"language-javascript\">use</code> \u5f00\u5934\u7684\u4e00\u4e2a\u539f\u56e0\u3002\u6211\u4eec\u5c06\u5728\u540e\u9762\u7684 <a href=\"/react/hooks-rules\">Hook \u89c4\u5219</a>\u4e2d\u4e86\u89e3\u539f\u56e0\u3002</p>\n</div>\n<h2 id=\"reading-state\"><a class=\"anchor\" href=\"/react/hooks-state#reading-state\"></a>\u8bfb\u53d6 State </h2>\n<p>\u5f53\u6211\u4eec\u60f3\u5728 class \u4e2d\u663e\u793a\u5f53\u524d\u7684 count\uff0c\u6211\u4eec\u8bfb\u53d6 <code class=\"language-javascript\">this.state.count</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528 <code class=\"language-javascript\">count</code>:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<h2 id=\"updating-state\"><a class=\"anchor\" href=\"/react/hooks-state#updating-state\"></a>\u66f4\u65b0 State </h2>\n<p>\u5728 class \u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8c03\u7528 <code class=\"language-javascript\">this.setState()</code> \u6765\u66f4\u65b0 <code class=\"language-javascript\">count</code> \u503c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    Click me</span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5728\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u6709\u4e86 <code class=\"language-javascript\">setCount</code> \u548c <code class=\"language-javascript\">count</code> \u53d8\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u9700\u8981 <code class=\"language-javascript\">this</code>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    Click me</span>\n<span class=\"token plain-text\">  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<h2 id=\"recap\"><a class=\"anchor\" href=\"/react/hooks-state#recap\"></a>\u603b\u7ed3 </h2>\n<p>\u73b0\u5728\u8ba9\u6211\u4eec\u6765<strong>\u4ed4\u7ec6\u56de\u987e\u4e00\u4e0b\u5b66\u5230\u7684\u77e5\u8bc6</strong>\uff0c\u770b\u4e0b\u6211\u4eec\u662f\u5426\u771f\u6b63\u7406\u89e3\u4e86\u3002</p>\n<!--\n  I'm not proud of this line markup. Please somebody fix this.\n  But if GitHub got away with it for years we can cheat.\n-->\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"> <span class=\"token number\">1</span><span class=\"token operator\">:</span>  <span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span> <span class=\"token number\">2</span><span class=\"token operator\">:</span>\n <span class=\"token number\">3</span><span class=\"token operator\">:</span>  <span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\"> <span class=\"token number\">4</span><span class=\"token operator\">:</span>    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span> <span class=\"token number\">5</span><span class=\"token operator\">:</span>\n <span class=\"token number\">6</span><span class=\"token operator\">:</span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n <span class=\"token number\">7</span><span class=\"token operator\">:</span>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\"> 8:        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\"> 9:        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">10:         Click me</span>\n<span class=\"token plain-text\">11:        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">12:      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token number\">13</span><span class=\"token operator\">:</span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token number\">14</span><span class=\"token operator\">:</span>  <span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><strong>\u7b2c\u4e00\u884c:</strong> \u5f15\u5165 React \u4e2d\u7684 <code class=\"language-javascript\">useState</code> Hook\u3002\u5b83\u8ba9\u6211\u4eec\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u5b58\u50a8\u5185\u90e8 state\u3002</li>\n<li><strong>\u7b2c\u56db\u884c:</strong> \u5728 <code class=\"language-javascript\">Example</code> \u7ec4\u4ef6\u5185\u90e8\uff0c\u6211\u4eec\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">useState</code> Hook \u58f0\u660e\u4e86\u4e00\u4e2a\u65b0\u7684 state \u53d8\u91cf\u3002\u5b83\u8fd4\u56de\u4e00\u5bf9\u503c\u7ed9\u5230\u6211\u4eec\u547d\u540d\u7684\u53d8\u91cf\u4e0a\u3002\u6211\u4eec\u628a\u53d8\u91cf\u547d\u540d\u4e3a <code class=\"language-javascript\">count</code>\uff0c\u56e0\u4e3a\u5b83\u5b58\u50a8\u7684\u662f\u70b9\u51fb\u6b21\u6570\u3002\u6211\u4eec\u901a\u8fc7\u4f20 <code class=\"language-javascript\">0</code> \u4f5c\u4e3a <code class=\"language-javascript\">useState</code> \u552f\u4e00\u7684\u53c2\u6570\u6765\u5c06\u5176\u521d\u59cb\u5316\u4e3a <code class=\"language-javascript\">0</code>\u3002\u7b2c\u4e8c\u4e2a\u8fd4\u56de\u7684\u503c\u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u5b83\u8ba9\u6211\u4eec\u53ef\u4ee5\u66f4\u65b0 <code class=\"language-javascript\">count</code> \u7684\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u53eb\u5b83 <code class=\"language-javascript\">setCount</code>\u3002</li>\n<li><strong>\u7b2c\u4e5d\u884c:</strong> \u5f53\u7528\u6237\u70b9\u51fb\u6309\u94ae\u540e\uff0c\u6211\u4eec\u4f20\u9012\u4e00\u4e2a\u65b0\u7684\u503c\u7ed9 <code class=\"language-javascript\">setCount</code>\u3002React \u4f1a\u91cd\u65b0\u6e32\u67d3 <code class=\"language-javascript\">Example</code> \u7ec4\u4ef6\uff0c\u5e76\u628a\u6700\u65b0\u7684 <code class=\"language-javascript\">count</code> \u4f20\u7ed9\u5b83\u3002</li>\n</ul>\n<p>\u4e4d\u4e00\u770b\u8fd9\u4f3c\u4e4e\u6709\u70b9\u592a\u591a\u4e86\u3002\u4e0d\u8981\u6025\u4e8e\u6c42\u6210\uff01\u5982\u679c\u4f60\u6709\u4e0d\u7406\u89e3\u7684\u5730\u65b9\uff0c\u8bf7\u518d\u6b21\u67e5\u770b\u4ee5\u4e0a\u4ee3\u7801\u5e76\u4ece\u5934\u5230\u5c3e\u9605\u8bfb\u3002\u6211\u4eec\u4fdd\u8bc1\u4e00\u65e6\u4f60\u8bd5\u7740\u201d\u5fd8\u8bb0\u201d class \u91cc\u9762 state \u662f\u5982\u4f55\u5de5\u4f5c\u7684\uff0c\u5e76\u7528\u65b0\u7684\u773c\u5149\u770b\u8fd9\u6bb5\u4ee3\u7801\uff0c\u5c31\u5bb9\u6613\u7406\u89e3\u4e86\u3002 </p>\n<h3 id=\"tip-what-do-square-brackets-mean\"><a class=\"anchor\" href=\"/react/hooks-state#tip-what-do-square-brackets-mean\"></a>\u63d0\u793a\uff1a\u65b9\u62ec\u53f7\u6709\u4ec0\u4e48\u7528\uff1f </h3>\n<p>\u4f60\u53ef\u80fd\u6ce8\u610f\u5230\u6211\u4eec\u7528\u65b9\u62ec\u53f7\u5b9a\u4e49\u4e86\u4e00\u4e2a state \u53d8\u91cf</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7b49\u53f7\u5de6\u8fb9\u540d\u5b57\u5e76\u4e0d\u662f React API \u7684\u90e8\u5206\uff0c\u4f60\u53ef\u4ee5\u81ea\u5df1\u53d6\u540d\u5b57\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fruit<span class=\"token punctuation\">,</span> setFruit<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u79cd JavaScript \u8bed\u6cd5\u53eb<a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring\">\u6570\u7ec4\u89e3\u6784</a>\u3002\u5b83\u610f\u5473\u7740\u6211\u4eec\u540c\u65f6\u521b\u5efa\u4e86 <code class=\"language-javascript\">fruit</code> \u548c <code class=\"language-javascript\">setFruit</code> \u4e24\u4e2a\u53d8\u91cf\uff0c<code class=\"language-javascript\">fruit</code> \u7684\u503c\u4e3a <code class=\"language-javascript\">useState</code> \u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a\u503c\uff0c<code class=\"language-javascript\">setFruit</code> \u662f\u8fd4\u56de\u7684\u7b2c\u4e8c\u4e2a\u503c\u3002\u5b83\u7b49\u4ef7\u4e8e\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">var</span> fruitStateVariable <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u8fd4\u56de\u4e00\u4e2a\u6709\u4e24\u4e2a\u5143\u7d20\u7684\u6570\u7ec4</span>\n  <span class=\"token keyword\">var</span> fruit <span class=\"token operator\">=</span> fruitStateVariable<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u6570\u7ec4\u91cc\u7684\u7b2c\u4e00\u4e2a\u503c</span>\n  <span class=\"token keyword\">var</span> setFruit <span class=\"token operator\">=</span> fruitStateVariable<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u6570\u7ec4\u91cc\u7684\u7b2c\u4e8c\u4e2a\u503c</span></code></pre></div>\n<p>\u5f53\u6211\u4eec\u4f7f\u7528 <code class=\"language-javascript\">useState</code> \u5b9a\u4e49 state \u53d8\u91cf\u65f6\u5019\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u6709\u4e24\u4e2a\u503c\u7684\u6570\u7ec4\u3002\u7b2c\u4e00\u4e2a\u503c\u662f\u5f53\u524d\u7684 state\uff0c\u7b2c\u4e8c\u4e2a\u503c\u662f\u66f4\u65b0 state \u7684\u51fd\u6570\u3002\u4f7f\u7528 <code class=\"language-javascript\">[0]</code> \u548c <code class=\"language-javascript\">[1]</code> \u6765\u8bbf\u95ee\u6709\u70b9\u4ee4\u4eba\u56f0\u60d1\uff0c\u56e0\u4e3a\u5b83\u4eec\u6709\u7279\u5b9a\u7684\u542b\u4e49\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u4f7f\u7528\u6570\u7ec4\u89e3\u6784\u7684\u539f\u56e0\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4f60\u53ef\u80fd\u4f1a\u597d\u5947 React \u600e\u4e48\u77e5\u9053 <code class=\"language-javascript\">useState</code> \u5bf9\u5e94\u7684\u662f\u54ea\u4e2a\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u6211\u4eec\u5e76\u6ca1\u6709\u4f20\u9012 <code class=\"language-javascript\">this</code> \u7ed9 React\u3002\u6211\u4eec\u5c06\u5728 FAQ \u90e8\u5206\u56de\u7b54<a href=\"/react/hooks-faq#how-does-react-associate-hook-calls-with-components\">\u8fd9\u4e2a\u95ee\u9898</a>\u4ee5\u53ca\u8bb8\u591a\u5176\u4ed6\u95ee\u9898\u3002</p>\n</div>\n<h3 id=\"tip-using-multiple-state-variables\"><a class=\"anchor\" href=\"/react/hooks-state#tip-using-multiple-state-variables\"></a>\u63d0\u793a\uff1a\u4f7f\u7528\u591a\u4e2a state \u53d8\u91cf </h3>\n<p>\u5c06 state \u53d8\u91cf\u58f0\u660e\u4e3a\u4e00\u5bf9 <code class=\"language-javascript\">[something, setSomething]</code> \u4e5f\u5f88\u65b9\u4fbf\uff0c\u56e0\u4e3a\u5982\u679c\u6211\u4eec\u60f3\u4f7f\u7528\u591a\u4e2a state \u53d8\u91cf\uff0c\u5b83\u5141\u8bb8\u6211\u4eec\u7ed9\u4e0d\u540c\u7684 state \u53d8\u91cf\u53d6\u4e0d\u540c\u7684\u540d\u79f0\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ExampleWithManyStates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u58f0\u660e\u591a\u4e2a state \u53d8\u91cf</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>age<span class=\"token punctuation\">,</span> setAge<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fruit<span class=\"token punctuation\">,</span> setFruit<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> setTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">'\u5b66\u4e60 Hook'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u4ee5\u4e0a\u7ec4\u4ef6\u4e2d\uff0c\u6211\u4eec\u6709\u5c40\u90e8\u53d8\u91cf <code class=\"language-javascript\">age</code>\uff0c<code class=\"language-javascript\">fruit</code> \u548c <code class=\"language-javascript\">todos</code>\uff0c\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u5355\u72ec\u66f4\u65b0\u5b83\u4eec\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">function</span> <span class=\"token function\">handleOrangeClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u548c this.setState({ fruit: 'orange' }) \u7c7b\u4f3c</span>\n    <span class=\"token function\">setFruit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'orange'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60<strong>\u4e0d\u5fc5</strong>\u4f7f\u7528\u591a\u4e2a state \u53d8\u91cf\u3002State \u53d8\u91cf\u53ef\u4ee5\u5f88\u597d\u5730\u5b58\u50a8\u5bf9\u8c61\u548c\u6570\u7ec4\uff0c\u56e0\u6b64\uff0c\u4f60\u4ecd\u7136\u53ef\u4ee5\u5c06\u76f8\u5173\u6570\u636e\u5206\u4e3a\u4e00\u7ec4\u3002\u7136\u800c\uff0c\u4e0d\u50cf class \u4e2d\u7684 <code class=\"language-javascript\">this.setState</code>\uff0c\u66f4\u65b0 state \u53d8\u91cf\u603b\u662f<em>\u66ff\u6362</em>\u5b83\u800c\u4e0d\u662f\u5408\u5e76\u5b83\u3002</p>\n<p>\u6211\u4eec<a href=\"/react/hooks-faq#should-i-use-one-or-many-state-variables\">\u5728 FAQ \u4e2d</a>\u63d0\u4f9b\u4e86\u66f4\u591a\u5173\u4e8e\u5206\u79bb\u72ec\u7acb state \u53d8\u91cf\u7684\u5efa\u8bae\u3002</p>\n<h2 id=\"next-steps\"><a class=\"anchor\" href=\"/react/hooks-state#next-steps\"></a>\u4e0b\u4e00\u6b65 </h2>\n<p>\u4ece\u4e0a\u8ff0\u5185\u5bb9\u4e2d\uff0c\u6211\u4eec\u4e86\u89e3\u4e86 React \u63d0\u4f9b\u7684 <code class=\"language-javascript\">useState</code> Hook\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e5f\u53eb\u5b83 \u201cState Hook\u201d\u3002\u5b83\u8ba9\u6211\u4eec\u5728 React \u51fd\u6570\u7ec4\u4ef6\u4e0a\u6dfb\u52a0\u5185\u90e8 state \u2014\u2014 \u8fd9\u662f\u6211\u4eec\u9996\u6b21\u5c1d\u8bd5\u3002</p>\n<p>\u6211\u4eec\u8fd8\u5b66\u5230\u4e86\u4e00\u4e9b\u77e5\u8bc6\u6bd4\u5982\u4ec0\u4e48\u662f Hook\u3002Hook \u662f\u80fd\u8ba9\u4f60\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u201c\u94a9\u5165\u201d React \u7279\u6027\u7684\u51fd\u6570\u3002\u5b83\u4eec\u540d\u5b57\u901a\u5e38\u90fd\u4ee5 <code class=\"language-javascript\">use</code> \u5f00\u59cb\uff0c\u8fd8\u6709\u66f4\u591a Hook \u7b49\u7740\u6211\u4eec\u53bb\u63a2\u7d22\u3002</p>\n<p><strong>\u73b0\u5728\u6211\u4eec\u5c06<a href=\"/react/hooks-effect\">\u5b66\u4e60\u53e6\u4e00\u4e2a Hook: <code class=\"language-javascript\">useEffect</code></a>\u3002</strong> \u5b83\u80fd\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u6267\u884c\u526f\u4f5c\u7528\uff0c\u5e76\u4e14\u5b83\u4e0e class \u4e2d\u7684\u751f\u547d\u5468\u671f\u51fd\u6570\u6781\u4e3a\u7c7b\u4f3c\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-state.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-state", "nav": ["/react/hooks-overview", "/react/hooks-effect"]}, {"key": "4. \u4f7f\u7528 Effect Hook", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p><em>Effect Hook</em> \u53ef\u4ee5\u8ba9\u4f60\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d\u6267\u884c\u526f\u4f5c\u7528\u64cd\u4f5c</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// Similar to componentDidMount and componentDidUpdate:</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// Update the document title using the browser API</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u6bb5\u4ee3\u7801\u57fa\u4e8e<a href=\"/react/hooks-state\">\u4e0a\u4e00\u7ae0\u8282\u4e2d\u7684\u8ba1\u6570\u5668\u793a\u4f8b</a>\u8fdb\u884c\u4fee\u6539\uff0c\u6211\u4eec\u4e3a\u8ba1\u6570\u5668\u589e\u52a0\u4e86\u4e00\u4e2a\u5c0f\u529f\u80fd\uff1a\u5c06 document \u7684 title \u8bbe\u7f6e\u4e3a\u5305\u542b\u4e86\u70b9\u51fb\u6b21\u6570\u7684\u6d88\u606f\u3002</p>\n<p>\u6570\u636e\u83b7\u53d6\uff0c\u8bbe\u7f6e\u8ba2\u9605\u4ee5\u53ca\u624b\u52a8\u66f4\u6539 React \u7ec4\u4ef6\u4e2d\u7684 DOM \u90fd\u5c5e\u4e8e\u526f\u4f5c\u7528\u3002\u4e0d\u7ba1\u4f60\u77e5\u4e0d\u77e5\u9053\u8fd9\u4e9b\u64cd\u4f5c\uff0c\u6216\u662f\u201c\u526f\u4f5c\u7528\u201d\u8fd9\u4e2a\u540d\u5b57\uff0c\u5e94\u8be5\u90fd\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u8fc7\u5b83\u4eec\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u5982\u679c\u4f60\u719f\u6089 React class \u7684\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u4f60\u53ef\u4ee5\u628a <code class=\"language-javascript\">useEffect</code> Hook \u770b\u505a <code class=\"language-javascript\">componentDidMount</code>\uff0c<code class=\"language-javascript\">componentDidUpdate</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u8fd9\u4e09\u4e2a\u51fd\u6570\u7684\u7ec4\u5408\u3002</p>\n</div>\n<p>\u5728 React \u7ec4\u4ef6\u4e2d\u6709\u4e24\u79cd\u5e38\u89c1\u526f\u4f5c\u7528\u64cd\u4f5c\uff1a\u9700\u8981\u6e05\u9664\u7684\u548c\u4e0d\u9700\u8981\u6e05\u9664\u7684\u3002\u6211\u4eec\u6765\u66f4\u4ed4\u7ec6\u5730\u770b\u4e00\u4e0b\u4ed6\u4eec\u4e4b\u95f4\u7684\u533a\u522b\u3002</p>\n<h2 id=\"effects-without-cleanup\"><a class=\"anchor\" href=\"/react/hooks-effect#effects-without-cleanup\"></a>\u65e0\u9700\u6e05\u9664\u7684 effect </h2>\n<p>\u6709\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u60f3<strong>\u5728 React \u66f4\u65b0 DOM \u4e4b\u540e\u8fd0\u884c\u4e00\u4e9b\u989d\u5916\u7684\u4ee3\u7801\u3002</strong>\u6bd4\u5982\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42\uff0c\u624b\u52a8\u53d8\u66f4 DOM\uff0c\u8bb0\u5f55\u65e5\u5fd7\uff0c\u8fd9\u4e9b\u90fd\u662f\u5e38\u89c1\u7684\u65e0\u9700\u6e05\u9664\u7684\u64cd\u4f5c\u3002\u56e0\u4e3a\u6211\u4eec\u5728\u6267\u884c\u5b8c\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5ffd\u7565\u4ed6\u4eec\u4e86\u3002\u8ba9\u6211\u4eec\u5bf9\u6bd4\u4e00\u4e0b\u4f7f\u7528 class \u548c Hook \u90fd\u662f\u600e\u4e48\u5b9e\u73b0\u8fd9\u4e9b\u526f\u4f5c\u7528\u7684\u3002</p>\n<h3 id=\"example-using-classes\"><a class=\"anchor\" href=\"/react/hooks-effect#example-using-classes\"></a>\u4f7f\u7528 class \u7684\u793a\u4f8b </h3>\n<p>\u5728 React \u7684 class \u7ec4\u4ef6\u4e2d\uff0c<code class=\"language-javascript\">render</code> \u51fd\u6570\u662f\u4e0d\u5e94\u8be5\u6709\u4efb\u4f55\u526f\u4f5c\u7528\u7684\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5728\u8fd9\u91cc\u6267\u884c\u64cd\u4f5c\u592a\u65e9\u4e86\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u90fd\u5e0c\u671b\u5728 React \u66f4\u65b0 DOM \u4e4b\u540e\u624d\u6267\u884c\u6211\u4eec\u7684\u64cd\u4f5c\u3002</p>\n<p>\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5728 React class \u4e2d\uff0c\u6211\u4eec\u628a\u526f\u4f5c\u7528\u64cd\u4f5c\u653e\u5230 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentDidUpdate</code> \u51fd\u6570\u4e2d\u3002\u56de\u5230\u793a\u4f8b\u4e2d\uff0c\u8fd9\u662f\u4e00\u4e2a React \u8ba1\u6570\u5668\u7684 class \u7ec4\u4ef6\u3002\u5b83\u5728 React \u5bf9 DOM \u8fdb\u884c\u64cd\u4f5c\u4e4b\u540e\uff0c\u7acb\u5373\u66f4\u65b0\u4e86 document \u7684 title \u5c5e\u6027</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          Click me</span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\uff0c<strong>\u5728\u8fd9\u4e2a class \u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u4e24\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u7f16\u5199\u91cd\u590d\u7684\u4ee3\u7801\u3002</strong></p>\n<p>\u8fd9\u662f\u56e0\u4e3a\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u5728\u7ec4\u4ef6\u52a0\u8f7d\u548c\u66f4\u65b0\u65f6\u6267\u884c\u540c\u6837\u7684\u64cd\u4f5c\u3002\u4ece\u6982\u5ff5\u4e0a\u8bf4\uff0c\u6211\u4eec\u5e0c\u671b\u5b83\u5728\u6bcf\u6b21\u6e32\u67d3\u4e4b\u540e\u6267\u884c \u2014\u2014 \u4f46 React \u7684 class \u7ec4\u4ef6\u6ca1\u6709\u63d0\u4f9b\u8fd9\u6837\u7684\u65b9\u6cd5\u3002\u5373\u4f7f\u6211\u4eec\u63d0\u53d6\u51fa\u4e00\u4e2a\u65b9\u6cd5\uff0c\u6211\u4eec\u8fd8\u662f\u8981\u5728\u4e24\u4e2a\u5730\u65b9\u8c03\u7528\u5b83\u3002</p>\n<p>\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u770b\u770b\u5982\u4f55\u4f7f\u7528 <code class=\"language-javascript\">useEffect</code> \u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u3002</p>\n<h3 id=\"example-using-hooks\"><a class=\"anchor\" href=\"/react/hooks-effect#example-using-hooks\"></a>\u4f7f\u7528 Hook \u7684\u793a\u4f8b </h3>\n<p>\u6211\u4eec\u5728\u672c\u7ae0\u8282\u5f00\u59cb\u65f6\u5df2\u7ecf\u770b\u5230\u4e86\u8fd9\u4e2a\u793a\u4f8b\uff0c\u4f46\u8ba9\u6211\u4eec\u518d\u4ed4\u7ec6\u89c2\u5bdf\u5b83\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><code class=\"language-javascript\">useEffect</code> \u505a\u4e86\u4ec0\u4e48\uff1f</strong> \u901a\u8fc7\u4f7f\u7528\u8fd9\u4e2a Hook\uff0c\u4f60\u53ef\u4ee5\u544a\u8bc9 React \u7ec4\u4ef6\u9700\u8981\u5728\u6e32\u67d3\u540e\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u3002React \u4f1a\u4fdd\u5b58\u4f60\u4f20\u9012\u7684\u51fd\u6570\uff08\u6211\u4eec\u5c06\u5b83\u79f0\u4e4b\u4e3a \u201ceffect\u201d\uff09\uff0c\u5e76\u4e14\u5728\u6267\u884c DOM \u66f4\u65b0\u4e4b\u540e\u8c03\u7528\u5b83\u3002\u5728\u8fd9\u4e2a effect \u4e2d\uff0c\u6211\u4eec\u8bbe\u7f6e\u4e86 document \u7684 title \u5c5e\u6027\uff0c\u4e0d\u8fc7\u6211\u4eec\u4e5f\u53ef\u4ee5\u6267\u884c\u6570\u636e\u83b7\u53d6\u6216\u8c03\u7528\u5176\u4ed6\u547d\u4ee4\u5f0f\u7684 API\u3002</p>\n<p><strong>\u4e3a\u4ec0\u4e48\u5728\u7ec4\u4ef6\u5185\u90e8\u8c03\u7528 <code class=\"language-javascript\">useEffect</code>\uff1f</strong> \u5c06 <code class=\"language-javascript\">useEffect</code> \u653e\u5728\u7ec4\u4ef6\u5185\u90e8\u8ba9\u6211\u4eec\u53ef\u4ee5\u5728 effect \u4e2d\u76f4\u63a5\u8bbf\u95ee <code class=\"language-javascript\">count</code> state \u53d8\u91cf\uff08\u6216\u5176\u4ed6 props\uff09\u3002\u6211\u4eec\u4e0d\u9700\u8981\u7279\u6b8a\u7684 API \u6765\u8bfb\u53d6\u5b83 \u2014\u2014 \u5b83\u5df2\u7ecf\u4fdd\u5b58\u5728\u51fd\u6570\u4f5c\u7528\u57df\u4e2d\u3002Hook \u4f7f\u7528\u4e86 JavaScript \u7684\u95ed\u5305\u673a\u5236\uff0c\u800c\u4e0d\u7528\u5728 JavaScript \u5df2\u7ecf\u63d0\u4f9b\u4e86\u89e3\u51b3\u65b9\u6848\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd8\u5f15\u5165\u7279\u5b9a\u7684 React API\u3002</p>\n<p><strong><code class=\"language-javascript\">useEffect</code> \u4f1a\u5728\u6bcf\u6b21\u6e32\u67d3\u540e\u90fd\u6267\u884c\u5417\uff1f</strong> \u662f\u7684\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u5728\u7b2c\u4e00\u6b21\u6e32\u67d3\u4e4b\u540e<em>\u548c</em>\u6bcf\u6b21\u66f4\u65b0\u4e4b\u540e\u90fd\u4f1a\u6267\u884c\u3002\uff08\u6211\u4eec\u7a0d\u540e\u4f1a\u8c08\u5230<a href=\"/react/hooks-effect#tip-optimizing-performance-by-skipping-effects\">\u5982\u4f55\u63a7\u5236\u5b83</a>\u3002\uff09\u4f60\u53ef\u80fd\u4f1a\u66f4\u5bb9\u6613\u63a5\u53d7 effect \u53d1\u751f\u5728\u201c\u6e32\u67d3\u4e4b\u540e\u201d\u8fd9\u79cd\u6982\u5ff5\uff0c\u4e0d\u7528\u518d\u53bb\u8003\u8651\u201c\u6302\u8f7d\u201d\u8fd8\u662f\u201c\u66f4\u65b0\u201d\u3002React \u4fdd\u8bc1\u4e86\u6bcf\u6b21\u8fd0\u884c effect \u7684\u540c\u65f6\uff0cDOM \u90fd\u5df2\u7ecf\u66f4\u65b0\u5b8c\u6bd5\u3002</p>\n<h3 id=\"detailed-explanation\"><a class=\"anchor\" href=\"/react/hooks-effect#detailed-explanation\"></a>\u8be6\u7ec6\u8bf4\u660e </h3>\n<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u5bf9 effect \u6709\u4e86\u5927\u81f4\u4e86\u89e3\uff0c\u4e0b\u9762\u8fd9\u4e9b\u4ee3\u7801\u5e94\u8be5\u4e0d\u96be\u770b\u61c2\u4e86\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u58f0\u660e\u4e86 <code class=\"language-javascript\">count</code> state \u53d8\u91cf\uff0c\u5e76\u544a\u8bc9 React \u6211\u4eec\u9700\u8981\u4f7f\u7528 effect\u3002\u7d27\u63a5\u7740\u4f20\u9012\u51fd\u6570\u7ed9 <code class=\"language-javascript\">useEffect</code> Hook\u3002\u6b64\u51fd\u6570\u5c31\u662f\u6211\u4eec\u7684 effect\u3002\u7136\u540e\u4f7f\u7528 <code class=\"language-javascript\">document.title</code> \u6d4f\u89c8\u5668 API \u8bbe\u7f6e document \u7684 title\u3002\u6211\u4eec\u53ef\u4ee5\u5728 effect \u4e2d\u83b7\u53d6\u5230\u6700\u65b0\u7684 <code class=\"language-javascript\">count</code> \u503c\uff0c\u56e0\u4e3a\u4ed6\u5728\u51fd\u6570\u7684\u4f5c\u7528\u57df\u5185\u3002\u5f53 React \u6e32\u67d3\u7ec4\u4ef6\u65f6\uff0c\u4f1a\u4fdd\u5b58\u5df2\u4f7f\u7528\u7684 effect\uff0c\u5e76\u5728\u66f4\u65b0\u5b8c DOM \u540e\u6267\u884c\u5b83\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u90fd\u4f1a\u53d1\u751f\uff0c\u5305\u62ec\u9996\u6b21\u6e32\u67d3\u3002</p>\n<p>\u7ecf\u9a8c\u4e30\u5bcc\u7684 JavaScript \u5f00\u53d1\u4eba\u5458\u53ef\u80fd\u4f1a\u6ce8\u610f\u5230\uff0c\u4f20\u9012\u7ed9 <code class=\"language-javascript\">useEffect</code> \u7684\u51fd\u6570\u5728\u6bcf\u6b21\u6e32\u67d3\u4e2d\u90fd\u4f1a\u6709\u6240\u4e0d\u540c\uff0c\u8fd9\u662f\u523b\u610f\u4e3a\u4e4b\u7684\u3002\u4e8b\u5b9e\u4e0a\u8fd9\u6b63\u662f\u6211\u4eec\u53ef\u4ee5\u5728 effect \u4e2d\u83b7\u53d6\u6700\u65b0\u7684 <code class=\"language-javascript\">count</code> \u7684\u503c\uff0c\u800c\u4e0d\u7528\u62c5\u5fc3\u5176\u8fc7\u671f\u7684\u539f\u56e0\u3002\u6bcf\u6b21\u6211\u4eec\u91cd\u65b0\u6e32\u67d3\uff0c\u90fd\u4f1a\u751f\u6210<em>\u65b0\u7684</em> effect\uff0c\u66ff\u6362\u6389\u4e4b\u524d\u7684\u3002\u67d0\u79cd\u610f\u4e49\u4e0a\u8bb2\uff0ceffect \u66f4\u50cf\u662f\u6e32\u67d3\u7ed3\u679c\u7684\u4e00\u90e8\u5206 \u2014\u2014 \u6bcf\u4e2a effect \u201c\u5c5e\u4e8e\u201d\u4e00\u6b21\u7279\u5b9a\u7684\u6e32\u67d3\u3002\u6211\u4eec\u5c06\u5728<a href=\"/react/hooks-effect#explanation-why-effects-run-on-each-update\">\u672c\u7ae0\u8282\u540e\u7eed\u90e8\u5206</a>\u66f4\u6e05\u695a\u5730\u4e86\u89e3\u8fd9\u6837\u505a\u7684\u610f\u4e49\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u4e0e <code class=\"language-javascript\">componentDidMount</code> \u6216 <code class=\"language-javascript\">componentDidUpdate</code> \u4e0d\u540c\uff0c\u4f7f\u7528 <code class=\"language-javascript\">useEffect</code> \u8c03\u5ea6\u7684 effect \u4e0d\u4f1a\u963b\u585e\u6d4f\u89c8\u5668\u66f4\u65b0\u5c4f\u5e55\uff0c\u8fd9\u8ba9\u4f60\u7684\u5e94\u7528\u770b\u8d77\u6765\u54cd\u5e94\u66f4\u5feb\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0ceffect \u4e0d\u9700\u8981\u540c\u6b65\u5730\u6267\u884c\u3002\u5728\u4e2a\u522b\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\u6d4b\u91cf\u5e03\u5c40\uff09\uff0c\u6709\u5355\u72ec\u7684 <a href=\"/react/hooks-reference#uselayouteffect\"><code class=\"language-javascript\">useLayoutEffect</code></a> Hook \u4f9b\u4f60\u4f7f\u7528\uff0c\u5176 API \u4e0e <code class=\"language-javascript\">useEffect</code> \u76f8\u540c\u3002</p>\n</div>\n<h2 id=\"\u9700\u8981\u6e05\u9664\u7684-effect\"><a class=\"anchor\" href=\"/react/hooks-effect#%E9%9C%80%E8%A6%81%E6%B8%85%E9%99%A4%E7%9A%84-effect\"></a>\u9700\u8981\u6e05\u9664\u7684 effect</h2>\n<p>\u4e4b\u524d\uff0c\u6211\u4eec\u7814\u7a76\u4e86\u5982\u4f55\u4f7f\u7528\u4e0d\u9700\u8981\u6e05\u9664\u7684\u526f\u4f5c\u7528\uff0c\u8fd8\u6709\u4e00\u4e9b\u526f\u4f5c\u7528\u662f\u9700\u8981\u6e05\u9664\u7684\u3002\u4f8b\u5982<strong>\u8ba2\u9605\u5916\u90e8\u6570\u636e\u6e90</strong>\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6e05\u9664\u5de5\u4f5c\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u53ef\u4ee5\u9632\u6b62\u5f15\u8d77\u5185\u5b58\u6cc4\u9732\uff01\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u6bd4\u8f83\u4e00\u4e0b\u5982\u4f55\u7528 Class \u548c Hook \u6765\u5b9e\u73b0\u3002</p>\n<h3 id=\"example-using-classes-1\"><a class=\"anchor\" href=\"/react/hooks-effect#example-using-classes-1\"></a>\u4f7f\u7528 Class \u7684\u793a\u4f8b </h3>\n<p>\u5728 React class \u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u5728 <code class=\"language-javascript\">componentDidMount</code> \u4e2d\u8bbe\u7f6e\u8ba2\u9605\uff0c\u5e76\u5728 <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u6e05\u9664\u5b83\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a <code class=\"language-javascript\">ChatAPI</code> \u6a21\u5757\uff0c\u5b83\u5141\u8bb8\u6211\u4eec\u8ba2\u9605\u597d\u53cb\u7684\u5728\u7ebf\u72b6\u6001\u3002\u4ee5\u4e0b\u662f\u6211\u4eec\u5982\u4f55\u4f7f\u7528 class \u8ba2\u9605\u548c\u663e\u793a\u8be5\u72b6\u6001\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FriendStatus</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> status<span class=\"token punctuation\">.</span>isOnline</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f60\u4f1a\u6ce8\u610f\u5230 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u4e4b\u95f4\u76f8\u4e92\u5bf9\u5e94\u3002\u4f7f\u7528\u751f\u547d\u5468\u671f\u51fd\u6570\u8feb\u4f7f\u6211\u4eec\u62c6\u5206\u8fd9\u4e9b\u903b\u8f91\u4ee3\u7801\uff0c\u5373\u4f7f\u8fd9\u4e24\u90e8\u5206\u4ee3\u7801\u90fd\u4f5c\u7528\u4e8e\u76f8\u540c\u7684\u526f\u4f5c\u7528\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u773c\u5c16\u7684\u8bfb\u8005\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u4e86\uff0c\u8fd9\u4e2a\u793a\u4f8b\u8fd8\u9700\u8981\u7f16\u5199 <code class=\"language-javascript\">componentDidUpdate</code> \u65b9\u6cd5\u624d\u80fd\u4fdd\u8bc1\u5b8c\u5168\u6b63\u786e\u3002\u6211\u4eec\u5148\u6682\u65f6\u5ffd\u7565\u8fd9\u4e00\u70b9\uff0c\u672c\u7ae0\u8282\u4e2d<a href=\"/react/hooks-effect#explanation-why-effects-run-on-each-update\">\u540e\u7eed\u90e8\u5206</a>\u4f1a\u4ecb\u7ecd\u5b83\u3002</p>\n</div>\n<h3 id=\"\u4f7f\u7528-hook-\u7684\u793a\u4f8b\"><a class=\"anchor\" href=\"/react/hooks-effect#%E4%BD%BF%E7%94%A8-hook-%E7%9A%84%E7%A4%BA%E4%BE%8B\"></a>\u4f7f\u7528 Hook \u7684\u793a\u4f8b</h3>\n<p>\u5982\u4f55\u4f7f\u7528 Hook \u7f16\u5199\u8fd9\u4e2a\u7ec4\u4ef6\u3002</p>\n<p>\u4f60\u53ef\u80fd\u8ba4\u4e3a\u9700\u8981\u5355\u72ec\u7684 effect \u6765\u6267\u884c\u6e05\u9664\u64cd\u4f5c\u3002\u4f46\u7531\u4e8e\u6dfb\u52a0\u548c\u5220\u9664\u8ba2\u9605\u7684\u4ee3\u7801\u7684\u7d27\u5bc6\u6027\uff0c\u6240\u4ee5 <code class=\"language-javascript\">useEffect</code> \u7684\u8bbe\u8ba1\u662f\u5728\u540c\u4e00\u4e2a\u5730\u65b9\u6267\u884c\u3002\u5982\u679c\u4f60\u7684 effect \u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0cReact \u5c06\u4f1a\u5728\u6267\u884c\u6e05\u9664\u64cd\u4f5c\u65f6\u8c03\u7528\u5b83\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// Specify how to clean up after this effect:</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">cleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u4e3a\u4ec0\u4e48\u8981\u5728 effect \u4e2d\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff1f</strong> \u8fd9\u662f effect \u53ef\u9009\u7684\u6e05\u9664\u673a\u5236\u3002\u6bcf\u4e2a effect \u90fd\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u6e05\u9664\u51fd\u6570\u3002\u5982\u6b64\u53ef\u4ee5\u5c06\u6dfb\u52a0\u548c\u79fb\u9664\u8ba2\u9605\u7684\u903b\u8f91\u653e\u5728\u4e00\u8d77\u3002\u5b83\u4eec\u90fd\u5c5e\u4e8e effect \u7684\u4e00\u90e8\u5206\u3002</p>\n<p><strong>React \u4f55\u65f6\u6e05\u9664 effect\uff1f</strong> React \u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u7684\u65f6\u5019\u6267\u884c\u6e05\u9664\u64cd\u4f5c\u3002\u6b63\u5982\u4e4b\u524d\u5b66\u5230\u7684\uff0ceffect \u5728\u6bcf\u6b21\u6e32\u67d3\u7684\u65f6\u5019\u90fd\u4f1a\u6267\u884c\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 React <em>\u4f1a</em>\u5728\u6267\u884c\u5f53\u524d effect \u4e4b\u524d\u5bf9\u4e0a\u4e00\u4e2a effect \u8fdb\u884c\u6e05\u9664\u3002\u6211\u4eec\u7a0d\u540e\u5c06\u8ba8\u8bba<a href=\"/react/hooks-effect#explanation-why-effects-run-on-each-update\">\u4e3a\u4ec0\u4e48\u8fd9\u5c06\u52a9\u4e8e\u907f\u514d bug</a>\u4ee5\u53ca<a href=\"/react/hooks-effect#tip-optimizing-performance-by-skipping-effects\">\u5982\u4f55\u5728\u9047\u5230\u6027\u80fd\u95ee\u9898\u65f6\u8df3\u8fc7\u6b64\u884c\u4e3a</a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5e76\u4e0d\u662f\u5fc5\u987b\u4e3a effect \u4e2d\u8fd4\u56de\u7684\u51fd\u6570\u547d\u540d\u3002\u8fd9\u91cc\u6211\u4eec\u5c06\u5176\u547d\u540d\u4e3a <code class=\"language-javascript\">cleanup</code> \u662f\u4e3a\u4e86\u8868\u660e\u6b64\u51fd\u6570\u7684\u76ee\u7684\uff0c\u4f46\u5176\u5b9e\u4e5f\u53ef\u4ee5\u8fd4\u56de\u4e00\u4e2a\u7bad\u5934\u51fd\u6570\u6216\u8005\u7ed9\u8d77\u4e00\u4e2a\u522b\u7684\u540d\u5b57\u3002</p>\n</div>\n<h2 id=\"recap\"><a class=\"anchor\" href=\"/react/hooks-effect#recap\"></a>\u5c0f\u7ed3 </h2>\n<p>\u4e86\u89e3\u4e86 <code class=\"language-javascript\">useEffect</code> \u53ef\u4ee5\u5728\u7ec4\u4ef6\u6e32\u67d3\u540e\u5b9e\u73b0\u5404\u79cd\u4e0d\u540c\u7684\u526f\u4f5c\u7528\u3002\u6709\u4e9b\u526f\u4f5c\u7528\u53ef\u80fd\u9700\u8981\u6e05\u9664\uff0c\u6240\u4ee5\u9700\u8981\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5176\u4ed6\u7684 effect \u53ef\u80fd\u4e0d\u5fc5\u6e05\u9664\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u8fd4\u56de\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>effect Hook \u4f7f\u7528\u540c\u4e00\u4e2a API \u6765\u6ee1\u8db3\u8fd9\u4e24\u79cd\u60c5\u51b5\u3002</p>\n\n<p><strong>\u5982\u679c\u4f60\u5bf9 Effect Hook \u7684\u673a\u5236\u5df2\u7ecf\u6709\u5f88\u597d\u7684\u628a\u63e1\uff0c\u6216\u8005\u6682\u65f6\u96be\u4ee5\u6d88\u5316\u66f4\u591a\u5185\u5bb9\uff0c\u4f60\u73b0\u5728\u5c31\u53ef\u4ee5\u8df3\u8f6c\u5230<a href=\"/react/hooks-rules\">\u4e0b\u4e00\u7ae0\u8282\u5b66\u4e60 Hook \u7684\u89c4\u5219</a>\u3002</strong></p>\n\n<h2 id=\"tips-for-using-effects\"><a class=\"anchor\" href=\"/react/hooks-effect#tips-for-using-effects\"></a>\u4f7f\u7528 Effect \u7684\u63d0\u793a </h2>\n<p>\u5728\u672c\u8282\u4e2d\u5c06\u7ee7\u7eed\u6df1\u5165\u4e86\u89e3 <code class=\"language-javascript\">useEffect</code> \u7684\u67d0\u4e9b\u7279\u6027\uff0c\u6709\u7ecf\u9a8c\u7684 React \u4f7f\u7528\u8005\u53ef\u80fd\u4f1a\u5bf9\u6b64\u611f\u5174\u8da3\u3002\u4f60\u4e0d\u4e00\u5b9a\u8981\u5728\u73b0\u5728\u4e86\u89e3\u4ed6\u4eec\uff0c\u4f60\u53ef\u4ee5\u968f\u65f6\u67e5\u770b\u6b64\u9875\u9762\u4ee5\u4e86\u89e3\u6709\u5173 Effect Hook \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>\n<h3 id=\"tip-use-multiple-effects-to-separate-concerns\"><a class=\"anchor\" href=\"/react/hooks-effect#tip-use-multiple-effects-to-separate-concerns\"></a>\u63d0\u793a: \u4f7f\u7528\u591a\u4e2a Effect \u5b9e\u73b0\u5173\u6ce8\u70b9\u5206\u79bb </h3>\n<p>\u4f7f\u7528 Hook \u5176\u4e2d\u4e00\u4e2a<a href=\"/react/hooks-intro#complex-components-become-hard-to-understand\">\u76ee\u7684</a>\u5c31\u662f\u8981\u89e3\u51b3 class \u4e2d\u751f\u547d\u5468\u671f\u51fd\u6570\u7ecf\u5e38\u5305\u542b\u4e0d\u76f8\u5173\u7684\u903b\u8f91\uff0c\u4f46\u53c8\u628a\u76f8\u5173\u903b\u8f91\u5206\u79bb\u5230\u4e86\u51e0\u4e2a\u4e0d\u540c\u65b9\u6cd5\u4e2d\u7684\u95ee\u9898\u3002\u4e0b\u8ff0\u4ee3\u7801\u662f\u5c06\u524d\u8ff0\u793a\u4f8b\u4e2d\u7684\u8ba1\u6570\u5668\u548c\u597d\u53cb\u5728\u7ebf\u72b6\u6001\u6307\u793a\u5668\u903b\u8f91\u7ec4\u5408\u5728\u4e00\u8d77\u7684\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FriendStatusWithCounter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> status<span class=\"token punctuation\">.</span>isOnline\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u53ef\u4ee5\u53d1\u73b0\u8bbe\u7f6e <code class=\"language-javascript\">document.title</code> \u7684\u903b\u8f91\u662f\u5982\u4f55\u88ab\u5206\u5272\u5230 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentDidUpdate</code> \u4e2d\u7684\uff0c\u8ba2\u9605\u903b\u8f91\u53c8\u662f\u5982\u4f55\u88ab\u5206\u5272\u5230 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u7684\u3002\u800c\u4e14 <code class=\"language-javascript\">componentDidMount</code> \u4e2d\u540c\u65f6\u5305\u542b\u4e86\u4e24\u4e2a\u4e0d\u540c\u529f\u80fd\u7684\u4ee3\u7801\u3002</p>\n<p>\u90a3\u4e48 Hook \u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u5c31\u50cf<a href=\"/react/hooks-state#tip-using-multiple-state-variables\">\u4f60\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a <em>state</em> \u7684 Hook</a> \u4e00\u6837\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a effect\u3002\u8fd9\u4f1a\u5c06\u4e0d\u76f8\u5173\u903b\u8f91\u5206\u79bb\u5230\u4e0d\u540c\u7684 effect \u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatusWithCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Hook \u5141\u8bb8\u6211\u4eec\u6309\u7167\u4ee3\u7801\u7684\u7528\u9014\u5206\u79bb\u4ed6\u4eec\uff0c</strong> \u800c\u4e0d\u662f\u50cf\u751f\u547d\u5468\u671f\u51fd\u6570\u90a3\u6837\u3002React \u5c06\u6309\u7167 effect \u58f0\u660e\u7684\u987a\u5e8f\u4f9d\u6b21\u8c03\u7528\u7ec4\u4ef6\u4e2d\u7684<em>\u6bcf\u4e00\u4e2a</em> effect\u3002</p>\n<h3 id=\"explanation-why-effects-run-on-each-update\"><a class=\"anchor\" href=\"/react/hooks-effect#explanation-why-effects-run-on-each-update\"></a>\u89e3\u91ca: \u4e3a\u4ec0\u4e48\u6bcf\u6b21\u66f4\u65b0\u7684\u65f6\u5019\u90fd\u8981\u8fd0\u884c Effect </h3>\n<p>\u5982\u679c\u4f60\u5df2\u7ecf\u4e60\u60ef\u4e86\u4f7f\u7528 class\uff0c\u90a3\u4e48\u4f60\u6216\u8bb8\u4f1a\u7591\u60d1\u4e3a\u4ec0\u4e48 effect \u7684\u6e05\u9664\u9636\u6bb5\u5728\u6bcf\u6b21\u91cd\u65b0\u6e32\u67d3\u65f6\u90fd\u4f1a\u6267\u884c\uff0c\u800c\u4e0d\u662f\u53ea\u5728\u5378\u8f7d\u7ec4\u4ef6\u7684\u65f6\u5019\u6267\u884c\u4e00\u6b21\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u5b9e\u9645\u7684\u4f8b\u5b50\uff0c\u770b\u770b\u4e3a\u4ec0\u4e48\u8fd9\u4e2a\u8bbe\u8ba1\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u521b\u5efa bug \u66f4\u5c11\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u5728<a href=\"/react/hooks-effect#example-using-classes-1\">\u672c\u7ae0\u8282\u5f00\u59cb\u65f6</a>\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e86\u4e00\u4e2a\u7528\u4e8e\u663e\u793a\u597d\u53cb\u662f\u5426\u5728\u7ebf\u7684 <code class=\"language-javascript\">FriendStatus</code> \u7ec4\u4ef6\u3002\u4ece class \u4e2d props \u8bfb\u53d6 <code class=\"language-javascript\">friend.id</code>\uff0c\u7136\u540e\u5728\u7ec4\u4ef6\u6302\u8f7d\u540e\u8ba2\u9605\u597d\u53cb\u7684\u72b6\u6001\uff0c\u5e76\u5728\u5378\u8f7d\u7ec4\u4ef6\u7684\u65f6\u5019\u53d6\u6d88\u8ba2\u9605\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u4f46\u662f\u5f53\u7ec4\u4ef6\u5df2\u7ecf\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u65f6\uff0c<code class=\"language-javascript\">friend</code> prop \u53d1\u751f\u53d8\u5316\u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f</strong> \u6211\u4eec\u7684\u7ec4\u4ef6\u5c06\u7ee7\u7eed\u5c55\u793a\u539f\u6765\u7684\u597d\u53cb\u72b6\u6001\u3002\u8fd9\u662f\u4e00\u4e2a bug\u3002\u800c\u4e14\u6211\u4eec\u8fd8\u4f1a\u56e0\u4e3a\u53d6\u6d88\u8ba2\u9605\u65f6\u4f7f\u7528\u9519\u8bef\u7684\u597d\u53cb ID \u5bfc\u81f4\u5185\u5b58\u6cc4\u9732\u6216\u5d29\u6e83\u7684\u95ee\u9898\u3002</p>\n<p>\u5728 class \u7ec4\u4ef6\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u6dfb\u52a0 <code class=\"language-javascript\">componentDidUpdate</code> \u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u53d6\u6d88\u8ba2\u9605\u4e4b\u524d\u7684 friend.id</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      prevProps<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u8ba2\u9605\u65b0\u7684 friend.id</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5fd8\u8bb0\u6b63\u786e\u5730\u5904\u7406 <code class=\"language-javascript\">componentDidUpdate</code> \u662f React \u5e94\u7528\u4e2d\u5e38\u89c1\u7684 bug \u6765\u6e90\u3002</p>\n<p>\u73b0\u5728\u770b\u4e00\u4e0b\u4f7f\u7528 Hook \u7684\u7248\u672c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5b83\u5e76\u4e0d\u4f1a\u53d7\u5230\u6b64 bug \u5f71\u54cd\u3002(\u867d\u7136\u6211\u4eec\u6ca1\u6709\u5bf9\u5b83\u505a\u4efb\u4f55\u6539\u52a8\u3002)</p>\n<p>\u5e76\u4e0d\u9700\u8981\u7279\u5b9a\u7684\u4ee3\u7801\u6765\u5904\u7406\u66f4\u65b0\u903b\u8f91\uff0c\u56e0\u4e3a <code class=\"language-javascript\">useEffect</code> <em>\u9ed8\u8ba4</em>\u5c31\u4f1a\u5904\u7406\u3002\u5b83\u4f1a\u5728\u8c03\u7528\u4e00\u4e2a\u65b0\u7684 effect \u4e4b\u524d\u5bf9\u524d\u4e00\u4e2a effect \u8fdb\u884c\u6e05\u7406\u3002\u4e3a\u4e86\u8bf4\u660e\u8fd9\u4e00\u70b9\uff0c\u4e0b\u9762\u6309\u65f6\u95f4\u5217\u51fa\u4e00\u4e2a\u53ef\u80fd\u4f1a\u4ea7\u751f\u7684\u8ba2\u9605\u548c\u53d6\u6d88\u8ba2\u9605\u64cd\u4f5c\u8c03\u7528\u5e8f\u5217\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// Mount with { friend: { id: 100 } } props</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// \u8fd0\u884c\u7b2c\u4e00\u4e2a effect</span>\n\n<span class=\"token comment\">// Update with { friend: { id: 200 } } props</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u6e05\u9664\u4e0a\u4e00\u4e2a effect</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// \u8fd0\u884c\u4e0b\u4e00\u4e2a effect</span>\n\n<span class=\"token comment\">// Update with { friend: { id: 300 } } props</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u6e05\u9664\u4e0a\u4e00\u4e2a effect</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// \u8fd0\u884c\u4e0b\u4e00\u4e2a effect</span>\n\n<span class=\"token comment\">// Unmount</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u6e05\u9664\u6700\u540e\u4e00\u4e2a effect</span></code></pre></div>\n<p>\u6b64\u9ed8\u8ba4\u884c\u4e3a\u4fdd\u8bc1\u4e86\u4e00\u81f4\u6027\uff0c\u907f\u514d\u4e86\u5728 class \u7ec4\u4ef6\u4e2d\u56e0\u4e3a\u6ca1\u6709\u5904\u7406\u66f4\u65b0\u903b\u8f91\u800c\u5bfc\u81f4\u5e38\u89c1\u7684 bug\u3002</p>\n<h3 id=\"tip-optimizing-performance-by-skipping-effects\"><a class=\"anchor\" href=\"/react/hooks-effect#tip-optimizing-performance-by-skipping-effects\"></a>\u63d0\u793a: \u901a\u8fc7\u8df3\u8fc7 Effect \u8fdb\u884c\u6027\u80fd\u4f18\u5316 </h3>\n<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6bcf\u6b21\u6e32\u67d3\u540e\u90fd\u6267\u884c\u6e05\u7406\u6216\u8005\u6267\u884c effect \u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002\u5728 class \u7ec4\u4ef6\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728 <code class=\"language-javascript\">componentDidUpdate</code> \u4e2d\u6dfb\u52a0\u5bf9 <code class=\"language-javascript\">prevProps</code> \u6216 <code class=\"language-javascript\">prevState</code> \u7684\u6bd4\u8f83\u903b\u8f91\u89e3\u51b3\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevState<span class=\"token punctuation\">.</span>count <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u662f\u5f88\u5e38\u89c1\u7684\u9700\u6c42\uff0c\u6240\u4ee5\u5b83\u88ab\u5185\u7f6e\u5230\u4e86 <code class=\"language-javascript\">useEffect</code> \u7684 Hook API \u4e2d\u3002\u5982\u679c\u67d0\u4e9b\u7279\u5b9a\u503c\u5728\u4e24\u6b21\u91cd\u6e32\u67d3\u4e4b\u95f4\u6ca1\u6709\u53d1\u751f\u53d8\u5316\uff0c\u4f60\u53ef\u4ee5\u901a\u77e5 React <strong>\u8df3\u8fc7</strong>\u5bf9 effect \u7684\u8c03\u7528\uff0c\u53ea\u8981\u4f20\u9012\u6570\u7ec4\u4f5c\u4e3a <code class=\"language-javascript\">useEffect</code> \u7684\u7b2c\u4e8c\u4e2a\u53ef\u9009\u53c2\u6570\u5373\u53ef\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u4ec5\u5728 count \u66f4\u6539\u65f6\u66f4\u65b0</span></span></code></pre></div>\n<p>\u4e0a\u9762\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f20\u5165 <code class=\"language-javascript\">[count]</code> \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8fd9\u4e2a\u53c2\u6570\u662f\u4ec0\u4e48\u4f5c\u7528\u5462\uff1f\u5982\u679c <code class=\"language-javascript\">count</code> \u7684\u503c\u662f <code class=\"language-javascript\">5</code>\uff0c\u800c\u4e14\u6211\u4eec\u7684\u7ec4\u4ef6\u91cd\u6e32\u67d3\u7684\u65f6\u5019 <code class=\"language-javascript\">count</code> \u8fd8\u662f\u7b49\u4e8e <code class=\"language-javascript\">5</code>\uff0cReact \u5c06\u5bf9\u524d\u4e00\u6b21\u6e32\u67d3\u7684 <code class=\"language-javascript\">[5]</code> \u548c\u540e\u4e00\u6b21\u6e32\u67d3\u7684 <code class=\"language-javascript\">[5]</code> \u8fdb\u884c\u6bd4\u8f83\u3002\u56e0\u4e3a\u6570\u7ec4\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u76f8\u7b49\u7684(<code class=\"language-javascript\">5 === 5</code>)\uff0cReact \u4f1a\u8df3\u8fc7\u8fd9\u4e2a effect\uff0c\u8fd9\u5c31\u5b9e\u73b0\u4e86\u6027\u80fd\u7684\u4f18\u5316\u3002</p>\n<p>\u5f53\u6e32\u67d3\u65f6\uff0c\u5982\u679c <code class=\"language-javascript\">count</code> \u7684\u503c\u66f4\u65b0\u6210\u4e86 <code class=\"language-javascript\">6</code>\uff0cReact \u5c06\u4f1a\u628a\u524d\u4e00\u6b21\u6e32\u67d3\u65f6\u7684\u6570\u7ec4 <code class=\"language-javascript\">[5]</code> \u548c\u8fd9\u6b21\u6e32\u67d3\u7684\u6570\u7ec4 <code class=\"language-javascript\">[6]</code> \u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u5bf9\u6bd4\u3002\u8fd9\u6b21\u56e0\u4e3a <code class=\"language-javascript\">5 !== 6</code>\uff0cReact \u5c31\u4f1a\u518d\u6b21\u8c03\u7528 effect\u3002\u5982\u679c\u6570\u7ec4\u4e2d\u6709\u591a\u4e2a\u5143\u7d20\uff0c\u5373\u4f7f\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u53d1\u751f\u53d8\u5316\uff0cReact \u4e5f\u4f1a\u6267\u884c effect\u3002</p>\n<p>\u5bf9\u4e8e\u6709\u6e05\u9664\u64cd\u4f5c\u7684 effect \u540c\u6837\u9002\u7528\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u4ec5\u5728 props.friend.id \u53d1\u751f\u53d8\u5316\u65f6\uff0c\u91cd\u65b0\u8ba2\u9605</span></span></code></pre></div>\n<p>\u672a\u6765\u7248\u672c\uff0c\u53ef\u80fd\u4f1a\u5728\u6784\u5efa\u65f6\u81ea\u52a8\u6dfb\u52a0\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5982\u679c\u4f60\u8981\u4f7f\u7528\u6b64\u4f18\u5316\u65b9\u5f0f\uff0c\u8bf7\u786e\u4fdd\u6570\u7ec4\u4e2d\u5305\u542b\u4e86<strong>\u6240\u6709\u5916\u90e8\u4f5c\u7528\u57df\u4e2d\u4f1a\u968f\u65f6\u95f4\u53d8\u5316\u5e76\u4e14\u5728 effect \u4e2d\u4f7f\u7528\u7684\u53d8\u91cf</strong>\uff0c\u5426\u5219\u4f60\u7684\u4ee3\u7801\u4f1a\u5f15\u7528\u5230\u5148\u524d\u6e32\u67d3\u4e2d\u7684\u65e7\u53d8\u91cf\u3002\u53c2\u9605\u6587\u6863\uff0c\u4e86\u89e3\u66f4\u591a\u5173\u4e8e<a href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\">\u5982\u4f55\u5904\u7406\u51fd\u6570</a>\u4ee5\u53ca<a href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\">\u6570\u7ec4\u9891\u7e41\u53d8\u5316\u65f6\u7684\u63aa\u65bd</a>\u5185\u5bb9\u3002</p>\n<p>\u5982\u679c\u60f3\u6267\u884c\u53ea\u8fd0\u884c\u4e00\u6b21\u7684 effect\uff08\u4ec5\u5728\u7ec4\u4ef6\u6302\u8f7d\u548c\u5378\u8f7d\u65f6\u6267\u884c\uff09\uff0c\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff08<code class=\"language-javascript\">[]</code>\uff09\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8fd9\u5c31\u544a\u8bc9 React \u4f60\u7684 effect \u4e0d\u4f9d\u8d56\u4e8e props \u6216 state \u4e2d\u7684\u4efb\u4f55\u503c\uff0c\u6240\u4ee5\u5b83\u6c38\u8fdc\u90fd\u4e0d\u9700\u8981\u91cd\u590d\u6267\u884c\u3002\u8fd9\u5e76\u4e0d\u5c5e\u4e8e\u7279\u6b8a\u60c5\u51b5 \u2014\u2014 \u5b83\u4f9d\u7136\u9075\u5faa\u4f9d\u8d56\u6570\u7ec4\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002</p>\n<p>\u5982\u679c\u4f60\u4f20\u5165\u4e86\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff08<code class=\"language-javascript\">[]</code>\uff09\uff0ceffect \u5185\u90e8\u7684 props \u548c state \u5c31\u4f1a\u4e00\u76f4\u62e5\u6709\u5176\u521d\u59cb\u503c\u3002\u5c3d\u7ba1\u4f20\u5165 <code class=\"language-javascript\">[]</code> \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u66f4\u63a5\u8fd1\u5927\u5bb6\u66f4\u719f\u6089\u7684 <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u601d\u7ef4\u6a21\u5f0f\uff0c\u4f46\u6211\u4eec\u6709<a href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\">\u66f4\u597d\u7684</a><a href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\">\u65b9\u5f0f</a>\u6765\u907f\u514d\u8fc7\u4e8e\u9891\u7e41\u7684\u91cd\u590d\u8c03\u7528 effect\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8bf7\u8bb0\u5f97 React \u4f1a\u7b49\u5f85\u6d4f\u89c8\u5668\u5b8c\u6210\u753b\u9762\u6e32\u67d3\u4e4b\u540e\u624d\u4f1a\u5ef6\u8fdf\u8c03\u7528 <code class=\"language-javascript\">useEffect</code>\uff0c\u56e0\u6b64\u4f1a\u4f7f\u5f97\u989d\u5916\u64cd\u4f5c\u5f88\u65b9\u4fbf\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u542f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u4e2d\u7684 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/14920\"><code class=\"language-javascript\">exhaustive-deps</code></a> \u89c4\u5219\u3002\u6b64\u89c4\u5219\u4f1a\u5728\u6dfb\u52a0\u9519\u8bef\u4f9d\u8d56\u65f6\u53d1\u51fa\u8b66\u544a\u5e76\u7ed9\u51fa\u4fee\u590d\u5efa\u8bae\u3002</p>\n</div>\n<h2 id=\"next-steps\"><a class=\"anchor\" href=\"/react/hooks-effect#next-steps\"></a>\u4e0b\u4e00\u6b65 </h2>\n<p>\u606d\u559c\u4f60\uff01\u5b8c\u6210\u672c\u7ae0\u8282\u5b66\u4e60\uff0c\u5e0c\u671b\u5173\u4e8e effect \u7684\u5927\u591a\u6570\u95ee\u9898\u90fd\u5f97\u5230\u4e86\u89e3\u7b54\u3002\u4f60\u5df2\u7ecf\u5b66\u4e60\u4e86 State Hook \u548c Effect Hook\uff0c\u5c06\u5b83\u4eec\u7ed3\u5408\u8d77\u6765\u4f60\u53ef\u4ee5\u505a\u5f88\u591a\u4e8b\u60c5\u4e86\u3002\u5b83\u4eec\u6db5\u76d6\u4e86\u5927\u591a\u6570\u4f7f\u7528 class \u7684\u7528\u4f8b \u2014\u2014 \u5982\u679c\u6ca1\u6709\uff0c\u4f60\u53ef\u4ee5\u67e5\u770b<a href=\"/react/hooks-reference\">\u5176\u4ed6\u7684 Hook</a>\u3002</p>\n<p>\u6211\u4eec\u770b\u5230\u4e86 Hook \u5982\u4f55\u89e3\u51b3<a href=\"/react/hooks-intro#motivation\">\u7b80\u4ecb\u7ae0\u8282\u4e2d\u52a8\u673a\u90e8\u5206</a>\u63d0\u51fa\u7684\u95ee\u9898\u3002\u6211\u4eec\u4e5f\u53d1\u73b0 effect \u7684\u6e05\u9664\u673a\u5236\u53ef\u4ee5\u907f\u514d <code class=\"language-javascript\">componentDidUpdate</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u7684\u91cd\u590d\uff0c\u540c\u65f6\u8ba9\u76f8\u5173\u7684\u4ee3\u7801\u5173\u8054\u66f4\u52a0\u7d27\u5bc6\uff0c\u5e2e\u52a9\u6211\u4eec\u907f\u514d\u4e00\u4e9b bug\u3002\u6211\u4eec\u8fd8\u770b\u5230\u4e86\u6211\u4eec\u5982\u4f55\u6839\u636e effect \u7684\u529f\u80fd\u5206\u9694\u4ed6\u4eec\uff0c\u8fd9\u662f\u5728 class \u4e2d\u65e0\u6cd5\u505a\u5230\u7684\u3002</p>\n<p>\u6b64\u65f6\u4f60\u53ef\u80fd\u4f1a\u597d\u5947 Hook \u662f\u5982\u4f55\u5de5\u4f5c\u7684\u3002\u5728\u4e24\u6b21\u6e32\u67d3\u95f4\uff0cReact\u5982\u4f55\u77e5\u9053\u54ea\u4e2a <code class=\"language-javascript\">useState</code> \u8c03\u7528\u5bf9\u5e94\u4e8e\u54ea\u4e2a state \u53d8\u91cf\uff1fReact \u53c8\u662f\u5982\u4f55\u5339\u914d\u524d\u540e\u4e24\u6b21\u6e32\u67d3\u4e2d\u7684\u6bcf\u4e00\u4e2a effect \u7684\uff1f<strong>\u5728\u4e0b\u4e00\u7ae0\u8282\u4e2d\u6211\u4eec\u4f1a\u5b66\u4e60<a href=\"/react/hooks-rules\">\u4f7f\u7528 Hook \u7684\u89c4\u5219</a> \u2014\u2014 \u8fd9\u5bf9 Hook \u7684\u5de5\u4f5c\u81f3\u5173\u91cd\u8981\u3002</strong></p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-effect.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-effect", "nav": ["/react/hooks-state", "/react/hooks-rules"]}, {"key": "5. Hook \u89c4\u5219", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p>Hook \u672c\u8d28\u5c31\u662f JavaScript \u51fd\u6570\uff0c\u4f46\u662f\u5728\u4f7f\u7528\u5b83\u65f6\u9700\u8981\u9075\u5faa\u4e24\u6761\u89c4\u5219\u3002\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\">linter \u63d2\u4ef6</a>\u6765\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u89c4\u5219\uff1a</p>\n<h3 id=\"only-call-hooks-at-the-top-level\"><a class=\"anchor\" href=\"/react/hooks-rules#only-call-hooks-at-the-top-level\"></a>\u53ea\u5728\u6700\u9876\u5c42\u4f7f\u7528 Hook </h3>\n<p><strong>\u4e0d\u8981\u5728\u5faa\u73af\uff0c\u6761\u4ef6\u6216\u5d4c\u5957\u51fd\u6570\u4e2d\u8c03\u7528 Hook\uff0c</strong> \u786e\u4fdd\u603b\u662f\u5728\u4f60\u7684 React \u51fd\u6570\u7684\u6700\u9876\u5c42\u4ee5\u53ca\u4efb\u4f55 return \u4e4b\u524d\u8c03\u7528\u4ed6\u4eec\u3002\u9075\u5b88\u8fd9\u6761\u89c4\u5219\uff0c\u4f60\u5c31\u80fd\u786e\u4fdd Hook \u5728\u6bcf\u4e00\u6b21\u6e32\u67d3\u4e2d\u90fd\u6309\u7167\u540c\u6837\u7684\u987a\u5e8f\u88ab\u8c03\u7528\u3002\u8fd9\u8ba9 React \u80fd\u591f\u5728\u591a\u6b21\u7684 <code class=\"language-javascript\">useState</code> \u548c <code class=\"language-javascript\">useEffect</code> \u8c03\u7528\u4e4b\u95f4\u4fdd\u6301 hook \u72b6\u6001\u7684\u6b63\u786e\u3002(\u5982\u679c\u4f60\u5bf9\u6b64\u611f\u5230\u597d\u5947\uff0c\u6211\u4eec\u5728<a href=\"/react/hooks-rules#explanation\">\u4e0b\u9762</a>\u4f1a\u6709\u66f4\u6df1\u5165\u7684\u89e3\u91ca\u3002)</p>\n<h3 id=\"only-call-hooks-from-react-functions\"><a class=\"anchor\" href=\"/react/hooks-rules#only-call-hooks-from-react-functions\"></a>\u53ea\u5728 React \u51fd\u6570\u4e2d\u8c03\u7528 Hook </h3>\n<p><strong>\u4e0d\u8981\u5728\u666e\u901a\u7684 JavaScript \u51fd\u6570\u4e2d\u8c03\u7528 Hook\u3002</strong>\u4f60\u53ef\u4ee5\uff1a</p>\n<ul>\n<li>\u2705 \u5728 React \u7684\u51fd\u6570\u7ec4\u4ef6\u4e2d\u8c03\u7528 Hook</li>\n<li>\u2705 \u5728\u81ea\u5b9a\u4e49 Hook \u4e2d\u8c03\u7528\u5176\u4ed6 Hook (\u6211\u4eec\u5c06\u4f1a\u5728<a href=\"/react/hooks-custom\">\u4e0b\u4e00\u9875</a> \u4e2d\u5b66\u4e60\u8fd9\u4e2a\u3002)</li>\n</ul>\n<p>\u9075\u5faa\u6b64\u89c4\u5219\uff0c\u786e\u4fdd\u7ec4\u4ef6\u7684\u72b6\u6001\u903b\u8f91\u5728\u4ee3\u7801\u4e2d\u6e05\u6670\u53ef\u89c1\u3002</p>\n<h2 id=\"eslint-plugin\"><a class=\"anchor\" href=\"/react/hooks-rules#eslint-plugin\"></a>ESLint \u63d2\u4ef6 </h2>\n<p>\u6211\u4eec\u53d1\u5e03\u4e86\u4e00\u4e2a\u540d\u4e3a <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u7684 ESLint \u63d2\u4ef6\u6765\u5f3a\u5236\u6267\u884c\u8fd9\u4e24\u6761\u89c4\u5219\u3002\u5982\u679c\u4f60\u60f3\u5c1d\u8bd5\u4e00\u4e0b\uff0c\u53ef\u4ee5\u5c06\u6b64\u63d2\u4ef6\u6dfb\u52a0\u5230\u4f60\u7684\u9879\u76ee\u4e2d\uff1a</p>\n<p>\u6211\u4eec\u6253\u7b97\u540e\u7eed\u7248\u672c\u9ed8\u8ba4\u6dfb\u52a0\u6b64\u63d2\u4ef6\u5230 <a href=\"/react/create-a-new-react-app#create-react-app\">Create React App</a> \u53ca\u5176\u4ed6\u7c7b\u4f3c\u7684\u5de5\u5177\u5305\u4e2d\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> eslint-plugin-react-hooks --save-dev</code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u4f60\u7684 ESLint \u914d\u7f6e</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token string\">\"react-hooks\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token string-property property\">\"react-hooks/rules-of-hooks\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// \u68c0\u67e5 Hook \u7684\u89c4\u5219</span>\n    <span class=\"token string-property property\">\"react-hooks/exhaustive-deps\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"warn\"</span> <span class=\"token comment\">// \u68c0\u67e5 effect \u7684\u4f9d\u8d56</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u73b0\u5728\u4f60\u53ef\u4ee5\u8df3\u8f6c\u5230\u4e0b\u4e00\u7ae0\u8282\u5b66\u4e60\u5982\u4f55\u7f16\u5199<a href=\"/react/hooks-custom\">\u4f60\u81ea\u5df1\u7684 Hook</a>\u3002</strong>\u5728\u672c\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u7ee7\u7eed\u89e3\u91ca\u8fd9\u4e9b\u89c4\u5219\u80cc\u540e\u7684\u539f\u56e0\u3002</p>\n<h2 id=\"explanation\"><a class=\"anchor\" href=\"/react/hooks-rules#explanation\"></a>\u8bf4\u660e </h2>\n<p>\u6b63\u5982\u6211\u4eec<a href=\"/react/hooks-state#tip-using-multiple-state-variables\">\u4e4b\u524d\u5b66\u5230</a>\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5355\u4e2a\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u591a\u4e2a State Hook \u6216 Effect Hook\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 1. Use the name state variable</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> setName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 2. Use an effect for persisting the form</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">persistForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'formData'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 3. Use the surname state variable</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>surname<span class=\"token punctuation\">,</span> setSurname<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Poppins'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 4. Use an effect for updating the title</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">updateTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> name <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> surname<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u90a3\u4e48 React \u600e\u4e48\u77e5\u9053\u54ea\u4e2a state \u5bf9\u5e94\u54ea\u4e2a <code class=\"language-javascript\">useState</code>\uff1f\u7b54\u6848\u662f React \u9760\u7684\u662f Hook \u8c03\u7528\u7684\u987a\u5e8f\u3002\u56e0\u4e3a\u6211\u4eec\u7684\u793a\u4f8b\u4e2d\uff0cHook \u7684\u8c03\u7528\u987a\u5e8f\u5728\u6bcf\u6b21\u6e32\u67d3\u4e2d\u90fd\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u5b83\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// ------------</span>\n<span class=\"token comment\">// \u9996\u6b21\u6e32\u67d3</span>\n<span class=\"token comment\">// ------------</span>\n<span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">)</span>           <span class=\"token comment\">// 1. \u4f7f\u7528 'Mary' \u521d\u59cb\u5316\u53d8\u91cf\u540d\u4e3a name \u7684 state</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>persistForm<span class=\"token punctuation\">)</span>     <span class=\"token comment\">// 2. \u6dfb\u52a0 effect \u4ee5\u4fdd\u5b58 form \u64cd\u4f5c</span>\n<span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Poppins'</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\">// 3. \u4f7f\u7528 'Poppins' \u521d\u59cb\u5316\u53d8\u91cf\u540d\u4e3a surname \u7684 state</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>updateTitle<span class=\"token punctuation\">)</span>     <span class=\"token comment\">// 4. \u6dfb\u52a0 effect \u4ee5\u66f4\u65b0\u6807\u9898</span>\n\n<span class=\"token comment\">// -------------</span>\n<span class=\"token comment\">// \u4e8c\u6b21\u6e32\u67d3</span>\n<span class=\"token comment\">// -------------</span>\n<span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">)</span>           <span class=\"token comment\">// 1. \u8bfb\u53d6\u53d8\u91cf\u540d\u4e3a name \u7684 state\uff08\u53c2\u6570\u88ab\u5ffd\u7565\uff09</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>persistForm<span class=\"token punctuation\">)</span>     <span class=\"token comment\">// 2. \u66ff\u6362\u4fdd\u5b58 form \u7684 effect</span>\n<span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Poppins'</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\">// 3. \u8bfb\u53d6\u53d8\u91cf\u540d\u4e3a surname \u7684 state\uff08\u53c2\u6570\u88ab\u5ffd\u7565\uff09</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>updateTitle<span class=\"token punctuation\">)</span>     <span class=\"token comment\">// 4. \u66ff\u6362\u66f4\u65b0\u6807\u9898\u7684 effect</span>\n\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u53ea\u8981 Hook \u7684\u8c03\u7528\u987a\u5e8f\u5728\u591a\u6b21\u6e32\u67d3\u4e4b\u95f4\u4fdd\u6301\u4e00\u81f4\uff0cReact \u5c31\u80fd\u6b63\u786e\u5730\u5c06\u5185\u90e8 state \u548c\u5bf9\u5e94\u7684 Hook \u8fdb\u884c\u5173\u8054\u3002\u4f46\u5982\u679c\u6211\u4eec\u5c06\u4e00\u4e2a Hook (\u4f8b\u5982 <code class=\"language-javascript\">persistForm</code> effect) \u8c03\u7528\u653e\u5230\u4e00\u4e2a\u6761\u4ef6\u8bed\u53e5\u4e2d\u4f1a\u53d1\u751f\u4ec0\u4e48\u5462\uff1f</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token comment\">// \ud83d\udd34 \u5728\u6761\u4ef6\u8bed\u53e5\u4e2d\u4f7f\u7528 Hook \u8fdd\u53cd\u7b2c\u4e00\u6761\u89c4\u5219</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">!==</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">persistForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'formData'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u7b2c\u4e00\u6b21\u6e32\u67d3\u4e2d <code class=\"language-javascript\">name !== ''</code> \u8fd9\u4e2a\u6761\u4ef6\u503c\u4e3a <code class=\"language-javascript\">true</code>\uff0c\u6240\u4ee5\u6211\u4eec\u4f1a\u6267\u884c\u8fd9\u4e2a Hook\u3002\u4f46\u662f\u4e0b\u4e00\u6b21\u6e32\u67d3\u65f6\u6211\u4eec\u53ef\u80fd\u6e05\u7a7a\u4e86\u8868\u5355\uff0c\u8868\u8fbe\u5f0f\u503c\u53d8\u4e3a <code class=\"language-javascript\">false</code>\u3002\u6b64\u65f6\u7684\u6e32\u67d3\u4f1a\u8df3\u8fc7\u8be5 Hook\uff0cHook \u7684\u8c03\u7528\u987a\u5e8f\u53d1\u751f\u4e86\u6539\u53d8\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">)</span>           <span class=\"token comment\">// 1. \u8bfb\u53d6\u53d8\u91cf\u540d\u4e3a name \u7684 state\uff08\u53c2\u6570\u88ab\u5ffd\u7565\uff09</span>\n<span class=\"token comment\">// useEffect(persistForm)  // \ud83d\udd34 \u6b64 Hook \u88ab\u5ffd\u7565\uff01</span>\n<span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Poppins'</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\">// \ud83d\udd34 2 \uff08\u4e4b\u524d\u4e3a 3\uff09\u3002\u8bfb\u53d6\u53d8\u91cf\u540d\u4e3a surname \u7684 state \u5931\u8d25</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>updateTitle<span class=\"token punctuation\">)</span>     <span class=\"token comment\">// \ud83d\udd34 3 \uff08\u4e4b\u524d\u4e3a 4\uff09\u3002\u66ff\u6362\u66f4\u65b0\u6807\u9898\u7684 effect \u5931\u8d25</span></code></pre></div>\n<p>React \u4e0d\u77e5\u9053\u7b2c\u4e8c\u4e2a <code class=\"language-javascript\">useState</code> \u7684 Hook \u5e94\u8be5\u8fd4\u56de\u4ec0\u4e48\u3002React \u4f1a\u4ee5\u4e3a\u5728\u8be5\u7ec4\u4ef6\u4e2d\u7b2c\u4e8c\u4e2a Hook \u7684\u8c03\u7528\u50cf\u4e0a\u6b21\u7684\u6e32\u67d3\u4e00\u6837\uff0c\u5bf9\u5e94\u7684\u662f <code class=\"language-javascript\">persistForm</code> \u7684 effect\uff0c\u4f46\u5e76\u975e\u5982\u6b64\u3002\u4ece\u8fd9\u91cc\u5f00\u59cb\uff0c\u540e\u9762\u7684 Hook \u8c03\u7528\u90fd\u88ab\u63d0\u524d\u6267\u884c\uff0c\u5bfc\u81f4 bug \u7684\u4ea7\u751f\u3002</p>\n<p><strong>\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 Hook \u9700\u8981\u5728\u6211\u4eec\u7ec4\u4ef6\u7684\u6700\u9876\u5c42\u8c03\u7528\u3002</strong>\u5982\u679c\u6211\u4eec\u60f3\u8981\u6709\u6761\u4ef6\u5730\u6267\u884c\u4e00\u4e2a effect\uff0c\u53ef\u4ee5\u5c06\u5224\u65ad\u653e\u5230 Hook \u7684<em>\u5185\u90e8</em>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">persistForm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \ud83d\udc4d \u5c06\u6761\u4ef6\u5224\u65ad\u653e\u7f6e\u5728 effect \u4e2d</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>name <span class=\"token operator\">!==</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'formData'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>\u6ce8\u610f\uff1a\u5982\u679c\u4f7f\u7528\u4e86<a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\">\u63d0\u4f9b\u7684 lint \u63d2\u4ef6</a>\uff0c\u5c31\u65e0\u9700\u62c5\u5fc3\u6b64\u95ee\u9898\u3002</strong> \u4e0d\u8fc7\u4f60\u73b0\u5728\u77e5\u9053\u4e86\u4e3a\u4ec0\u4e48 Hook \u4f1a\u8fd9\u6837\u5de5\u4f5c\uff0c\u4e5f\u77e5\u9053\u4e86\u8fd9\u4e2a\u89c4\u5219\u662f\u4e3a\u4e86\u907f\u514d\u4ec0\u4e48\u95ee\u9898\u3002</p>\n<h2 id=\"next-steps\"><a class=\"anchor\" href=\"/react/hooks-rules#next-steps\"></a>\u4e0b\u4e00\u6b65 </h2>\n<p>\u6700\u540e\uff0c\u63a5\u4e0b\u6765\u4f1a\u5b66\u4e60<a href=\"/react/hooks-custom\">\u5982\u4f55\u7f16\u5199\u81ea\u5b9a\u4e49 Hook</a>\uff01\u81ea\u5b9a\u4e49 Hook \u53ef\u4ee5\u5c06 React \u4e2d\u63d0\u4f9b\u7684 Hook \u7ec4\u5408\u5230\u5b9a\u5236\u7684 Hook \u4e2d\uff0c\u4ee5\u590d\u7528\u4e0d\u540c\u7ec4\u4ef6\u4e4b\u95f4\u5e38\u89c1\u7684\u72b6\u6001\u903b\u8f91\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-rules.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-rules", "nav": ["/react/hooks-effect", "/react/hooks-custom"]}, {"key": "6. \u81ea\u5b9a\u4e49 Hook", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p>\u901a\u8fc7\u81ea\u5b9a\u4e49 Hook\uff0c\u53ef\u4ee5\u5c06\u7ec4\u4ef6\u903b\u8f91\u63d0\u53d6\u5230\u53ef\u91cd\u7528\u7684\u51fd\u6570\u4e2d\u3002</p>\n<p>\u5728\u6211\u4eec\u5b66\u4e60<a href=\"/react/hooks-effect#example-using-hooks-1\">\u4f7f\u7528 Effect Hook</a> \u65f6\uff0c\u6211\u4eec\u5df2\u7ecf\u89c1\u8fc7\u8fd9\u4e2a\u804a\u5929\u7a0b\u5e8f\u4e2d\u7684\u7ec4\u4ef6\uff0c\u8be5\u7ec4\u4ef6\u7528\u4e8e\u663e\u793a\u597d\u53cb\u7684\u5728\u7ebf\u72b6\u6001\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\u6211\u4eec\u5047\u8bbe\u804a\u5929\u5e94\u7528\u4e2d\u6709\u4e00\u4e2a\u8054\u7cfb\u4eba\u5217\u8868\uff0c\u5f53\u7528\u6237\u5728\u7ebf\u65f6\u9700\u8981\u628a\u540d\u5b57\u8bbe\u7f6e\u4e3a\u7eff\u8272\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u9762\u7c7b\u4f3c\u7684\u903b\u8f91\u590d\u5236\u5e76\u7c98\u8d34\u5230 <code class=\"language-javascript\">FriendListItem</code> \u7ec4\u4ef6\u4e2d\u6765\uff0c\u4f46\u8fd9\u5e76\u4e0d\u662f\u7406\u60f3\u7684\u89e3\u51b3\u65b9\u6848\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'green'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'black'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u76f8\u53cd\uff0c\u6211\u4eec\u5e0c\u671b\u5728 <code class=\"language-javascript\">FriendStatus</code> \u548c <code class=\"language-javascript\">FriendListItem</code> \u4e4b\u95f4\u5171\u4eab\u903b\u8f91\u3002</p>\n<p>\u76ee\u524d\u4e3a\u6b62\uff0c\u5728 React \u4e2d\u6709\u4e24\u79cd\u6d41\u884c\u7684\u65b9\u5f0f\u6765\u5171\u4eab\u7ec4\u4ef6\u4e4b\u95f4\u7684\u72b6\u6001\u903b\u8f91: <a href=\"/react/render-props\">render props</a> \u548c<a href=\"/react/higher-order-components\">\u9ad8\u9636\u7ec4\u4ef6</a>\uff0c\u73b0\u5728\u8ba9\u6211\u4eec\u6765\u770b\u770b Hook \u662f\u5982\u4f55\u5728\u8ba9\u4f60\u4e0d\u589e\u52a0\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u89e3\u51b3\u76f8\u540c\u95ee\u9898\u7684\u3002</p>\n<h2 id=\"extracting-a-custom-hook\"><a class=\"anchor\" href=\"/react/hooks-custom#extracting-a-custom-hook\"></a>\u63d0\u53d6\u81ea\u5b9a\u4e49 Hook </h2>\n<p>\u5f53\u6211\u4eec\u60f3\u5728\u4e24\u4e2a\u51fd\u6570\u4e4b\u95f4\u5171\u4eab\u903b\u8f91\u65f6\uff0c\u6211\u4eec\u4f1a\u628a\u5b83\u63d0\u53d6\u5230\u7b2c\u4e09\u4e2a\u51fd\u6570\u4e2d\u3002\u800c\u7ec4\u4ef6\u548c Hook \u90fd\u662f\u51fd\u6570\uff0c\u6240\u4ee5\u4e5f\u540c\u6837\u9002\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002</p>\n<p><strong>\u81ea\u5b9a\u4e49 Hook \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5176\u540d\u79f0\u4ee5 \u201c<code class=\"language-javascript\">use</code>\u201d \u5f00\u5934\uff0c\u51fd\u6570\u5185\u90e8\u53ef\u4ee5\u8c03\u7528\u5176\u4ed6\u7684 Hook\u3002</strong> \u4f8b\u5982\uff0c\u4e0b\u9762\u7684 <code class=\"language-javascript\">useFriendStatus</code> \u662f\u6211\u4eec\u7b2c\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 Hook:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friendID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>friendID<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>friendID<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> isOnline<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6b64\u5904\u5e76\u672a\u5305\u542b\u4efb\u4f55\u65b0\u7684\u5185\u5bb9\u2014\u2014\u903b\u8f91\u662f\u4ece\u4e0a\u8ff0\u7ec4\u4ef6\u62f7\u8d1d\u6765\u7684\u3002\u4e0e\u7ec4\u4ef6\u4e2d\u4e00\u81f4\uff0c\u8bf7\u786e\u4fdd\u53ea\u5728\u81ea\u5b9a\u4e49 Hook \u7684\u9876\u5c42\u65e0\u6761\u4ef6\u5730\u8c03\u7528\u5176\u4ed6 Hook\u3002</p>\n<p>\u4e0e React \u7ec4\u4ef6\u4e0d\u540c\u7684\u662f\uff0c\u81ea\u5b9a\u4e49 Hook \u4e0d\u9700\u8981\u5177\u6709\u7279\u6b8a\u7684\u6807\u8bc6\u3002\u6211\u4eec\u53ef\u4ee5\u81ea\u7531\u7684\u51b3\u5b9a\u5b83\u7684\u53c2\u6570\u662f\u4ec0\u4e48\uff0c\u4ee5\u53ca\u5b83\u5e94\u8be5\u8fd4\u56de\u4ec0\u4e48\uff08\u5982\u679c\u9700\u8981\u7684\u8bdd\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5b83\u5c31\u50cf\u4e00\u4e2a\u6b63\u5e38\u7684\u51fd\u6570\u3002\u4f46\u662f\u5b83\u7684\u540d\u5b57\u5e94\u8be5\u59cb\u7ec8\u4ee5 <code class=\"language-javascript\">use</code> \u5f00\u5934\uff0c\u8fd9\u6837\u53ef\u4ee5\u4e00\u773c\u770b\u51fa\u5176\u7b26\u5408 <a href=\"/react/hooks-rules\">Hook \u7684\u89c4\u5219</a>\u3002</p>\n<p>\u6b64\u5904 <code class=\"language-javascript\">useFriendStatus</code> \u7684 Hook \u76ee\u7684\u662f\u8ba2\u9605\u67d0\u4e2a\u597d\u53cb\u7684\u5728\u7ebf\u72b6\u6001\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u9700\u8981\u5c06 <code class=\"language-javascript\">friendID</code> \u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u8fd9\u4f4d\u597d\u53cb\u7684\u5728\u7ebf\u72b6\u6001\u7684\u539f\u56e0\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friendID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token keyword\">return</span> isOnline<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\u8ba9\u6211\u4eec\u770b\u770b\u5e94\u8be5\u5982\u4f55\u4f7f\u7528\u81ea\u5b9a\u4e49 Hook\u3002</p>\n<h2 id=\"using-a-custom-hook\"><a class=\"anchor\" href=\"/react/hooks-custom#using-a-custom-hook\"></a>\u4f7f\u7528\u81ea\u5b9a\u4e49 Hook </h2>\n<p>\u6211\u4eec\u4e00\u5f00\u59cb\u7684\u76ee\u6807\u662f\u5728 <code class=\"language-javascript\">FriendStatus</code> \u548c <code class=\"language-javascript\">FriendListItem</code> \u7ec4\u4ef6\u4e2d\u53bb\u9664\u91cd\u590d\u7684\u903b\u8f91\uff0c\u5373\uff1a\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u90fd\u60f3\u77e5\u9053\u597d\u53cb\u662f\u5426\u5728\u7ebf\u3002</p>\n<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u628a\u8fd9\u4e2a\u903b\u8f91\u63d0\u53d6\u5230 <code class=\"language-javascript\">useFriendStatus</code> \u7684\u81ea\u5b9a\u4e49 Hook \u4e2d\uff0c\u7136\u540e\u5c31\u53ef\u4ee5<em>\u4f7f\u7528\u5b83\u4e86\uff1a</em></p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'green'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'black'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u8fd9\u6bb5\u4ee3\u7801\u7b49\u4ef7\u4e8e\u539f\u6765\u7684\u793a\u4f8b\u4ee3\u7801\u5417\uff1f</strong>\u7b49\u4ef7\uff0c\u5b83\u7684\u5de5\u4f5c\u65b9\u5f0f\u5b8c\u5168\u4e00\u6837\u3002\u5982\u679c\u4f60\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u4f60\u4f1a\u53d1\u73b0\u6211\u4eec\u6ca1\u6709\u5bf9\u5176\u884c\u4e3a\u505a\u4efb\u4f55\u7684\u6539\u53d8\uff0c\u6211\u4eec\u53ea\u662f\u5c06\u4e24\u4e2a\u51fd\u6570\u4e4b\u95f4\u4e00\u4e9b\u5171\u540c\u7684\u4ee3\u7801\u63d0\u53d6\u5230\u5355\u72ec\u7684\u51fd\u6570\u4e2d\u3002<strong>\u81ea\u5b9a\u4e49 Hook \u662f\u4e00\u79cd\u81ea\u7136\u9075\u5faa Hook \u8bbe\u8ba1\u7684\u7ea6\u5b9a\uff0c\u800c\u5e76\u4e0d\u662f React \u7684\u7279\u6027\u3002</strong></p>\n<p><strong>\u81ea\u5b9a\u4e49 Hook \u5fc5\u987b\u4ee5 \u201c<code class=\"language-javascript\">use</code>\u201d \u5f00\u5934\u5417\uff1f</strong>\u5fc5\u987b\u5982\u6b64\u3002\u8fd9\u4e2a\u7ea6\u5b9a\u975e\u5e38\u91cd\u8981\u3002\u4e0d\u9075\u5faa\u7684\u8bdd\uff0c\u7531\u4e8e\u65e0\u6cd5\u5224\u65ad\u67d0\u4e2a\u51fd\u6570\u662f\u5426\u5305\u542b\u5bf9\u5176\u5185\u90e8 Hook \u7684\u8c03\u7528\uff0cReact \u5c06\u65e0\u6cd5\u81ea\u52a8\u68c0\u67e5\u4f60\u7684 Hook \u662f\u5426\u8fdd\u53cd\u4e86 <a href=\"/react/hooks-rules\">Hook \u7684\u89c4\u5219</a>\u3002</p>\n<p><strong>\u5728\u4e24\u4e2a\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u76f8\u540c\u7684 Hook \u4f1a\u5171\u4eab state \u5417\uff1f</strong>\u4e0d\u4f1a\u3002\u81ea\u5b9a\u4e49 Hook \u662f\u4e00\u79cd\u91cd\u7528<em>\u72b6\u6001\u903b\u8f91</em>\u7684\u673a\u5236(\u4f8b\u5982\u8bbe\u7f6e\u4e3a\u8ba2\u9605\u5e76\u5b58\u50a8\u5f53\u524d\u503c)\uff0c\u6240\u4ee5\u6bcf\u6b21\u4f7f\u7528\u81ea\u5b9a\u4e49 Hook \u65f6\uff0c\u5176\u4e2d\u7684\u6240\u6709 state \u548c\u526f\u4f5c\u7528\u90fd\u662f\u5b8c\u5168\u9694\u79bb\u7684\u3002</p>\n<p><strong>\u81ea\u5b9a\u4e49 Hook \u5982\u4f55\u83b7\u53d6\u72ec\u7acb\u7684 state\uff1f</strong>\u6bcf\u6b21<em>\u8c03\u7528</em> Hook\uff0c\u5b83\u90fd\u4f1a\u83b7\u53d6\u72ec\u7acb\u7684 state\u3002\u7531\u4e8e\u6211\u4eec\u76f4\u63a5\u8c03\u7528\u4e86 <code class=\"language-javascript\">useFriendStatus</code>\uff0c\u4ece React \u7684\u89d2\u5ea6\u6765\u770b\uff0c\u6211\u4eec\u7684\u7ec4\u4ef6\u53ea\u662f\u8c03\u7528\u4e86 <code class=\"language-javascript\">useState</code> \u548c <code class=\"language-javascript\">useEffect</code>\u3002 \u6b63\u5982\u6211\u4eec\u5728<a href=\"/react/hooks-effect#tip-use-multiple-effects-to-separate-concerns\">\u4e4b\u524d\u7ae0\u8282</a>\u4e2d<a href=\"/react/hooks-state#tip-using-multiple-state-variables\">\u4e86\u89e3\u5230\u7684</a>\u4e00\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2a\u7ec4\u4ef6\u4e2d\u591a\u6b21\u8c03\u7528 <code class=\"language-javascript\">useState</code> \u548c <code class=\"language-javascript\">useEffect</code>\uff0c\u5b83\u4eec\u662f\u5b8c\u5168\u72ec\u7acb\u7684\u3002</p>\n<h3 id=\"tip-pass-information-between-hooks\"><a class=\"anchor\" href=\"/react/hooks-custom#tip-pass-information-between-hooks\"></a>\u63d0\u793a\uff1a\u5728\u591a\u4e2a Hook \u4e4b\u95f4\u4f20\u9012\u4fe1\u606f </h3>\n<p>\u7531\u4e8e Hook \u672c\u8eab\u5c31\u662f\u51fd\u6570\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5728\u5b83\u4eec\u4e4b\u95f4\u4f20\u9012\u4fe1\u606f\u3002</p>\n<p>\u6211\u4eec\u5c06\u4f7f\u7528\u804a\u5929\u7a0b\u5e8f\u4e2d\u7684\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u6765\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002\u8fd9\u662f\u4e00\u4e2a\u804a\u5929\u6d88\u606f\u63a5\u6536\u8005\u7684\u9009\u62e9\u5668\uff0c\u5b83\u4f1a\u663e\u793a\u5f53\u524d\u9009\u5b9a\u7684\u597d\u53cb\u662f\u5426\u5728\u7ebf:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> friendList <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Phoebe'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Rachel'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Ross'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ChatRecipientPicker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>recipientID<span class=\"token punctuation\">,</span> setRecipientID<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isRecipientOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>recipientID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Circle</span></span> <span class=\"token attr-name\">color</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isRecipientOnline <span class=\"token operator\">?</span> <span class=\"token string\">'green'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>recipientID<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setRecipientID</span><span class=\"token punctuation\">(</span><span class=\"token function\">Number</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>friendList<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friend</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">            </span><span class=\"token punctuation\">{</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u5c06\u5f53\u524d\u9009\u62e9\u7684\u597d\u53cb ID \u4fdd\u5b58\u5728 <code class=\"language-javascript\">recipientID</code> \u72b6\u6001\u53d8\u91cf\u4e2d\uff0c\u5e76\u5728\u7528\u6237\u4ece <code class=\"language-javascript\">&lt;select&gt;</code> \u4e2d\u9009\u62e9\u5176\u4ed6\u597d\u53cb\u65f6\u66f4\u65b0\u8fd9\u4e2a state\u3002</p>\n<p>\u7531\u4e8e <code class=\"language-javascript\">useState</code> \u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86 <code class=\"language-javascript\">recipientID</code> \u72b6\u6001\u53d8\u91cf\u7684\u6700\u65b0\u503c\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u81ea\u5b9a\u4e49\u7684 <code class=\"language-javascript\">useFriendStatus</code> Hook\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>recipientID<span class=\"token punctuation\">,</span> setRecipientID<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> isRecipientOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>recipientID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5982\u6b64\u53ef\u4ee5\u8ba9\u6211\u4eec\u77e5\u9053<em>\u5f53\u524d\u9009\u4e2d</em>\u7684\u597d\u53cb\u662f\u5426\u5728\u7ebf\u3002\u5f53\u6211\u4eec\u9009\u62e9\u4e0d\u540c\u7684\u597d\u53cb\u5e76\u66f4\u65b0 <code class=\"language-javascript\">recipientID</code> \u72b6\u6001\u53d8\u91cf\u65f6\uff0c<code class=\"language-javascript\">useFriendStatus</code> Hook \u5c06\u4f1a\u53d6\u6d88\u8ba2\u9605\u4e4b\u524d\u9009\u4e2d\u7684\u597d\u53cb\uff0c\u5e76\u8ba2\u9605\u65b0\u9009\u4e2d\u7684\u597d\u53cb\u72b6\u6001\u3002</p>\n<h2 id=\"useyourimagination\"><a class=\"anchor\" href=\"/react/hooks-custom#useyourimagination\"></a><code class=\"language-javascript\">useYourImagination()</code> </h2>\n<p>\u81ea\u5b9a\u4e49 Hook \u89e3\u51b3\u4e86\u4ee5\u524d\u5728 React \u7ec4\u4ef6\u4e2d\u65e0\u6cd5\u7075\u6d3b\u5171\u4eab\u903b\u8f91\u7684\u95ee\u9898\u3002\u4f60\u53ef\u4ee5\u521b\u5efa\u6db5\u76d6\u5404\u79cd\u573a\u666f\u7684\u81ea\u5b9a\u4e49 Hook\uff0c\u5982\u8868\u5355\u5904\u7406\u3001\u52a8\u753b\u3001\u8ba2\u9605\u58f0\u660e\u3001\u8ba1\u65f6\u5668\uff0c\u751a\u81f3\u53ef\u80fd\u8fd8\u6709\u5176\u4ed6\u6211\u4eec\u6ca1\u60f3\u5230\u7684\u573a\u666f\u3002\u66f4\u91cd\u8981\u7684\u662f\uff0c\u521b\u5efa\u81ea\u5b9a\u4e49 Hook \u5c31\u50cf\u4f7f\u7528 React \u5185\u7f6e\u7684\u529f\u80fd\u4e00\u6837\u7b80\u5355\u3002</p>\n<p>\u5c3d\u91cf\u907f\u514d\u8fc7\u65e9\u5730\u589e\u52a0\u62bd\u8c61\u903b\u8f91\u3002\u65e2\u7136\u51fd\u6570\u7ec4\u4ef6\u80fd\u591f\u505a\u7684\u66f4\u591a\uff0c\u90a3\u4e48\u4ee3\u7801\u5e93\u4e2d\u51fd\u6570\u7ec4\u4ef6\u7684\u4ee3\u7801\u884c\u6570\u53ef\u80fd\u4f1a\u5267\u589e\u3002\u8fd9\u5c5e\u4e8e\u6b63\u5e38\u73b0\u8c61 \u2014\u2014 \u4e0d\u5fc5\u7acb\u5373\u5c06\u5b83\u4eec\u62c6\u5206\u4e3a Hook\u3002\u4f46\u6211\u4eec\u4ecd\u9f13\u52b1\u4f60\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49 Hook \u5bfb\u627e\u53ef\u80fd\uff0c\u4ee5\u8fbe\u5230\u7b80\u5316\u4ee3\u7801\u903b\u8f91\uff0c\u89e3\u51b3\u7ec4\u4ef6\u6742\u4e71\u65e0\u7ae0\u7684\u76ee\u7684\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6709\u4e2a\u590d\u6742\u7684\u7ec4\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u5927\u91cf\u4ee5\u7279\u6b8a\u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u7684\u5185\u90e8\u72b6\u6001\u3002<code class=\"language-javascript\">useState</code> \u5e76\u4e0d\u4f1a\u4f7f\u5f97\u96c6\u4e2d\u66f4\u65b0\u903b\u8f91\u53d8\u5f97\u5bb9\u6613\uff0c\u56e0\u6b64\u4f60\u53ef\u80fd\u66f4\u613f\u610f\u4f7f\u7528 <a class=\"external-link\" href=\"http://redux.js.org/\">redux</a> \u4e2d\u7684 reducer \u6765\u7f16\u5199\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">todosReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'add'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">completed</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ... other actions ...</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Reducers \u975e\u5e38\u4fbf\u4e8e\u5355\u72ec\u6d4b\u8bd5\uff0c\u4e14\u6613\u4e8e\u6269\u5c55\uff0c\u4ee5\u8868\u8fbe\u590d\u6742\u7684\u66f4\u65b0\u903b\u8f91\u3002\u5982\u6709\u5fc5\u8981\uff0c\u60a8\u53ef\u4ee5\u5c06\u5b83\u4eec\u5206\u6210\u66f4\u5c0f\u7684 reducer\u3002\u4f46\u662f\uff0c\u4f60\u53ef\u80fd\u8fd8\u4eab\u53d7\u7740 React \u5185\u90e8 state \u5e26\u6765\u7684\u597d\u5904\uff0c\u6216\u8005\u53ef\u80fd\u6839\u672c\u4e0d\u60f3\u5b89\u88c5\u5176\u4ed6\u5e93\u3002</p>\n<p>\u90a3\u4e48\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u7f16\u5199\u4e00\u4e2a <code class=\"language-javascript\">useReducer</code> \u7684 Hook\uff0c\u4f7f\u7528 reducer \u7684\u65b9\u5f0f\u6765\u7ba1\u7406\u7ec4\u4ef6\u7684\u5185\u90e8 state \u5462\uff1f\u5176\u7b80\u5316\u7248\u672c\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reducer<span class=\"token punctuation\">,</span> initialState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> nextState <span class=\"token operator\">=</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u5b83\uff0c\u8ba9 reducer \u9a71\u52a8\u5b83\u7ba1\u7406 state\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>todosReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleAddClick</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'add'</span><span class=\"token punctuation\">,</span> text <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u590d\u6742\u7ec4\u4ef6\u4e2d\u4f7f\u7528 reducer \u7ba1\u7406\u5185\u90e8 state \u7684\u9700\u6c42\u5f88\u5e38\u89c1\uff0c\u6211\u4eec\u5df2\u7ecf\u5c06 <code class=\"language-javascript\">useReducer</code> \u7684 Hook \u5185\u7f6e\u5230 React \u4e2d\u3002\u4f60\u53ef\u4ee5\u5728 <a href=\"/react/hooks-reference\">Hook API \u7d22\u5f15</a>\u4e2d\u627e\u5230\u5b83\u4f7f\u7528\uff0c\u642d\u914d\u5176\u4ed6\u5185\u7f6e\u7684 Hook \u4e00\u8d77\u4f7f\u7528\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-custom.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-custom", "nav": ["/react/hooks-rules", "/react/hooks-reference"]}, {"key": "7. Hook API \u7d22\u5f15", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p>\u672c\u9875\u9762\u4e3b\u8981\u63cf\u8ff0 React \u4e2d\u5185\u7f6e\u7684 Hook API\u3002</p>\n<p>\u5982\u679c\u4f60\u521a\u5f00\u59cb\u63a5\u89e6 Hook\uff0c\u90a3\u4e48\u53ef\u80fd\u9700\u8981\u5148\u67e5\u9605 <a href=\"/react/hooks-overview\">Hook \u6982\u89c8</a>\u3002\u4f60\u4e5f\u53ef\u4ee5\u5728 <a href=\"/react/hooks-faq\">Hooks FAQ</a> \u7ae0\u8282\u4e2d\u83b7\u53d6\u6709\u7528\u7684\u4fe1\u606f\u3002</p>\n<ul>\n<li>\n<p><a href=\"/react/hooks-reference#basic-hooks\">\u57fa\u7840 Hook</a></p>\n<ul>\n<li><a href=\"/react/hooks-reference#usestate\"><code class=\"language-javascript\">useState</code></a></li>\n<li><a href=\"/react/hooks-reference#useeffect\"><code class=\"language-javascript\">useEffect</code></a></li>\n<li><a href=\"/react/hooks-reference#usecontext\"><code class=\"language-javascript\">useContext</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/react/hooks-reference#additional-hooks\">\u989d\u5916\u7684 Hook</a></p>\n<ul>\n<li><a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code></a></li>\n<li><a href=\"/react/hooks-reference#usecallback\"><code class=\"language-javascript\">useCallback</code></a></li>\n<li><a href=\"/react/hooks-reference#usememo\"><code class=\"language-javascript\">useMemo</code></a></li>\n<li><a href=\"/react/hooks-reference#useref\"><code class=\"language-javascript\">useRef</code></a></li>\n<li><a href=\"/react/hooks-reference#useimperativehandle\"><code class=\"language-javascript\">useImperativeHandle</code></a></li>\n<li><a href=\"/react/hooks-reference#uselayouteffect\"><code class=\"language-javascript\">useLayoutEffect</code></a></li>\n<li><a href=\"/react/hooks-reference#usedebugvalue\"><code class=\"language-javascript\">useDebugValue</code></a></li>\n<li><a href=\"/react/hooks-reference#usedeferredvalue\"><code class=\"language-javascript\">useDeferredValue</code></a></li>\n<li><a href=\"/react/hooks-reference#usetransition\"><code class=\"language-javascript\">useTransition</code></a></li>\n<li><a href=\"/react/hooks-reference#useid\"><code class=\"language-javascript\">useId</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/react/hooks-reference#library-hooks\">Library Hooks</a></p>\n<ul>\n<li><a href=\"/react/hooks-reference#usesyncexternalstore\"><code class=\"language-javascript\">useSyncExternalStore</code></a></li>\n<li><a href=\"/react/hooks-reference#useinsertioneffect\"><code class=\"language-javascript\">useInsertionEffect</code></a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"basic-hooks\"><a class=\"anchor\" href=\"/react/hooks-reference#basic-hooks\"></a>\u57fa\u7840 Hook </h2>\n<h3 id=\"usestate\"><a class=\"anchor\" href=\"/react/hooks-reference#usestate\"></a><code class=\"language-javascript\">useState</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd4\u56de\u4e00\u4e2a state\uff0c\u4ee5\u53ca\u66f4\u65b0 state \u7684\u51fd\u6570\u3002</p>\n<p>\u5728\u521d\u59cb\u6e32\u67d3\u671f\u95f4\uff0c\u8fd4\u56de\u7684\u72b6\u6001 (<code class=\"language-javascript\">state</code>) \u4e0e\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570 (<code class=\"language-javascript\">initialState</code>) \u503c\u76f8\u540c\u3002</p>\n<p><code class=\"language-javascript\">setState</code> \u51fd\u6570\u7528\u4e8e\u66f4\u65b0 state\u3002\u5b83\u63a5\u6536\u4e00\u4e2a\u65b0\u7684 state \u503c\u5e76\u5c06\u7ec4\u4ef6\u7684\u4e00\u6b21\u91cd\u65b0\u6e32\u67d3\u52a0\u5165\u961f\u5217\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>newState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u540e\u7eed\u7684\u91cd\u65b0\u6e32\u67d3\u4e2d\uff0c<code class=\"language-javascript\">useState</code> \u8fd4\u56de\u7684\u7b2c\u4e00\u4e2a\u503c\u5c06\u59cb\u7ec8\u662f\u66f4\u65b0\u540e\u6700\u65b0\u7684 state\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>React \u4f1a\u786e\u4fdd <code class=\"language-javascript\">setState</code> \u51fd\u6570\u7684\u6807\u8bc6\u662f\u7a33\u5b9a\u7684\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5728\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u65f6\u53d1\u751f\u53d8\u5316\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u5b89\u5168\u5730\u4ece <code class=\"language-javascript\">useEffect</code> \u6216 <code class=\"language-javascript\">useCallback</code> \u7684\u4f9d\u8d56\u5217\u8868\u4e2d\u7701\u7565 <code class=\"language-javascript\">setState</code>\u3002</p>\n</div>\n<h4 id=\"functional-updates\"><a class=\"anchor\" href=\"/react/hooks-reference#functional-updates\"></a>\u51fd\u6570\u5f0f\u66f4\u65b0 </h4>\n<p>\u5982\u679c\u65b0\u7684 state \u9700\u8981\u901a\u8fc7\u4f7f\u7528\u5148\u524d\u7684 state \u8ba1\u7b97\u5f97\u51fa\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u51fd\u6570\u4f20\u9012\u7ed9 <code class=\"language-javascript\">setState</code>\u3002\u8be5\u51fd\u6570\u5c06\u63a5\u6536\u5148\u524d\u7684 state\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u66f4\u65b0\u540e\u7684\u503c\u3002\u4e0b\u9762\u7684\u8ba1\u6570\u5668\u7ec4\u4ef6\u793a\u4f8b\u5c55\u793a\u4e86 <code class=\"language-javascript\">setState</code> \u7684\u4e24\u79cd\u7528\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>initialCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      Count: </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>initialCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Reset</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevCount</span> <span class=\"token operator\">=&gt;</span> prevCount <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevCount</span> <span class=\"token operator\">=&gt;</span> prevCount <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u201c+\u201d \u548c \u201c-\u201d \u6309\u94ae\u91c7\u7528\u51fd\u6570\u5f0f\u5f62\u5f0f\uff0c\u56e0\u4e3a\u88ab\u66f4\u65b0\u7684 state \u9700\u8981\u57fa\u4e8e\u4e4b\u524d\u7684 state\u3002\u4f46\u662f\u201c\u91cd\u7f6e\u201d\u6309\u94ae\u5219\u91c7\u7528\u666e\u901a\u5f62\u5f0f\uff0c\u56e0\u4e3a\u5b83\u603b\u662f\u628a count \u8bbe\u7f6e\u56de\u521d\u59cb\u503c\u3002</p>\n<p>\u5982\u679c\u4f60\u7684\u66f4\u65b0\u51fd\u6570\u8fd4\u56de\u503c\u4e0e\u5f53\u524d state \u5b8c\u5168\u76f8\u540c\uff0c\u5219\u968f\u540e\u7684\u91cd\u6e32\u67d3\u4f1a\u88ab\u5b8c\u5168\u8df3\u8fc7\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4e0e class \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">setState</code> \u65b9\u6cd5\u4e0d\u540c\uff0c<code class=\"language-javascript\">useState</code> \u4e0d\u4f1a\u81ea\u52a8\u5408\u5e76\u66f4\u65b0\u5bf9\u8c61\u3002\u4f60\u53ef\u4ee5\u7528\u51fd\u6570\u5f0f\u7684 <code class=\"language-javascript\">setState</code> \u7ed3\u5408\u5c55\u5f00\u8fd0\u7b97\u7b26\u6765\u8fbe\u5230\u5408\u5e76\u66f4\u65b0\u5bf9\u8c61\u7684\u6548\u679c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevState</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4e5f\u53ef\u4ee5\u4f7f\u7528 Object.assign</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prevState<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>updatedValues<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">useReducer</code> \u662f\u53e6\u4e00\u79cd\u53ef\u9009\u65b9\u6848\uff0c\u5b83\u66f4\u9002\u5408\u7528\u4e8e\u7ba1\u7406\u5305\u542b\u591a\u4e2a\u5b50\u503c\u7684 state \u5bf9\u8c61\u3002</p>\n</div>\n<h4 id=\"lazy-initial-state\"><a class=\"anchor\" href=\"/react/hooks-reference#lazy-initial-state\"></a>\u60f0\u6027\u521d\u59cb state </h4>\n<p><code class=\"language-javascript\">initialState</code> \u53c2\u6570\u53ea\u4f1a\u5728\u7ec4\u4ef6\u7684\u521d\u59cb\u6e32\u67d3\u4e2d\u8d77\u4f5c\u7528\uff0c\u540e\u7eed\u6e32\u67d3\u65f6\u4f1a\u88ab\u5ffd\u7565\u3002\u5982\u679c\u521d\u59cb state \u9700\u8981\u901a\u8fc7\u590d\u6742\u8ba1\u7b97\u83b7\u5f97\uff0c\u5219\u53ef\u4ee5\u4f20\u5165\u4e00\u4e2a\u51fd\u6570\uff0c\u5728\u51fd\u6570\u4e2d\u8ba1\u7b97\u5e76\u8fd4\u56de\u521d\u59cb\u7684 state\uff0c\u6b64\u51fd\u6570\u53ea\u5728\u521d\u59cb\u6e32\u67d3\u65f6\u88ab\u8c03\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token function\">someExpensiveComputation</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> initialState<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h4 id=\"bailing-out-of-a-state-update\"><a class=\"anchor\" href=\"/react/hooks-reference#bailing-out-of-a-state-update\"></a>\u8df3\u8fc7 state \u66f4\u65b0 </h4>\n<p>\u5982\u679c\u4f60\u66f4\u65b0 State Hook \u540e\u7684 state \u4e0e\u5f53\u524d\u7684 state \u76f8\u540c\u65f6\uff0cReact \u5c06\u8df3\u8fc7\u5b50\u7ec4\u4ef6\u7684\u6e32\u67d3\u5e76\u4e14\u4e0d\u4f1a\u89e6\u53d1 effect \u7684\u6267\u884c\u3002\uff08React \u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description\"><code class=\"language-javascript\">Object.is</code> \u6bd4\u8f83\u7b97\u6cd5</a> \u6765\u6bd4\u8f83 state\u3002\uff09</p>\n<p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cReact \u53ef\u80fd\u4ecd\u9700\u8981\u5728\u8df3\u8fc7\u6e32\u67d3\u524d\u6e32\u67d3\u8be5\u7ec4\u4ef6\u3002\u4e0d\u8fc7\u7531\u4e8e React \u4e0d\u4f1a\u5bf9\u7ec4\u4ef6\u6811\u7684\u201c\u6df1\u5c42\u201d\u8282\u70b9\u8fdb\u884c\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3\uff0c\u6240\u4ee5\u5927\u53ef\u4e0d\u5fc5\u62c5\u5fc3\u3002\u5982\u679c\u4f60\u5728\u6e32\u67d3\u671f\u95f4\u6267\u884c\u4e86\u9ad8\u5f00\u9500\u7684\u8ba1\u7b97\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">useMemo</code> \u6765\u8fdb\u884c\u4f18\u5316\u3002</p>\n<h4 id=\"batching-of-state-updates\"><a class=\"anchor\" href=\"/react/hooks-reference#batching-of-state-updates\"></a>Batching of state updates </h4>\n<p>React may group several state updates into a single re-render to improve performance. Normally, this improves performance and shouldn\u2019t affect your application\u2019s behavior.</p>\n<p>Before React 18, only updates inside React event handlers were batched. Starting with React 18, <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2022/03/08/react-18-upgrade-guide.html#automatic-batching\">batching is enabled for all updates by default</a>. Note that React makes sure that updates from several <em>different</em> user-initiated events \u2014 for example, clicking a button twice \u2014 are always processed separately and do not get batched. This prevents logical mistakes.</p>\n<p>In the rare case that you need to force the DOM update to be applied synchronously, you may wrap it in <a href=\"/react/react-dom#flushsync\"><code class=\"language-javascript\">flushSync</code></a>. However, this can hurt performance so do this only where needed.</p>\n<h3 id=\"useeffect\"><a class=\"anchor\" href=\"/react/hooks-reference#useeffect\"></a><code class=\"language-javascript\">useEffect</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>didUpdate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8be5 Hook \u63a5\u6536\u4e00\u4e2a\u5305\u542b\u547d\u4ee4\u5f0f\u3001\u4e14\u53ef\u80fd\u6709\u526f\u4f5c\u7528\u4ee3\u7801\u7684\u51fd\u6570\u3002</p>\n<p>\u5728\u51fd\u6570\u7ec4\u4ef6\u4e3b\u4f53\u5185\uff08\u8fd9\u91cc\u6307\u5728 React \u6e32\u67d3\u9636\u6bb5\uff09\u6539\u53d8 DOM\u3001\u6dfb\u52a0\u8ba2\u9605\u3001\u8bbe\u7f6e\u5b9a\u65f6\u5668\u3001\u8bb0\u5f55\u65e5\u5fd7\u4ee5\u53ca\u6267\u884c\u5176\u4ed6\u5305\u542b\u526f\u4f5c\u7528\u7684\u64cd\u4f5c\u90fd\u662f\u4e0d\u88ab\u5141\u8bb8\u7684\uff0c\u56e0\u4e3a\u8fd9\u53ef\u80fd\u4f1a\u4ea7\u751f\u83ab\u540d\u5176\u5999\u7684 bug \u5e76\u7834\u574f UI \u7684\u4e00\u81f4\u6027\u3002</p>\n<p>\u4f7f\u7528 <code class=\"language-javascript\">useEffect</code> \u5b8c\u6210\u526f\u4f5c\u7528\u64cd\u4f5c\u3002\u8d4b\u503c\u7ed9 <code class=\"language-javascript\">useEffect</code> \u7684\u51fd\u6570\u4f1a\u5728\u7ec4\u4ef6\u6e32\u67d3\u5230\u5c4f\u5e55\u4e4b\u540e\u6267\u884c\u3002\u4f60\u53ef\u4ee5\u628a effect \u770b\u4f5c\u4ece React \u7684\u7eaf\u51fd\u6570\u5f0f\u4e16\u754c\u901a\u5f80\u547d\u4ee4\u5f0f\u4e16\u754c\u7684\u9003\u751f\u901a\u9053\u3002</p>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ceffect \u5c06\u5728\u6bcf\u8f6e\u6e32\u67d3\u7ed3\u675f\u540e\u6267\u884c\uff0c\u4f46\u4f60\u53ef\u4ee5\u9009\u62e9\u8ba9\u5b83 <a href=\"/react/hooks-reference#conditionally-firing-an-effect\">\u5728\u53ea\u6709\u67d0\u4e9b\u503c\u6539\u53d8\u7684\u65f6\u5019</a> \u624d\u6267\u884c\u3002</p>\n<h4 id=\"cleaning-up-an-effect\"><a class=\"anchor\" href=\"/react/hooks-reference#cleaning-up-an-effect\"></a>\u6e05\u9664 effect </h4>\n<p>\u901a\u5e38\uff0c\u7ec4\u4ef6\u5378\u8f7d\u65f6\u9700\u8981\u6e05\u9664 effect \u521b\u5efa\u7684\u8bf8\u5982\u8ba2\u9605\u6216\u8ba1\u65f6\u5668 ID \u7b49\u8d44\u6e90\u3002\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c<code class=\"language-javascript\">useEffect</code> \u51fd\u6570\u9700\u8fd4\u56de\u4e00\u4e2a\u6e05\u9664\u51fd\u6570\u3002\u4ee5\u4e0b\u5c31\u662f\u4e00\u4e2a\u521b\u5efa\u8ba2\u9605\u7684\u4f8b\u5b50\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u6e05\u9664\u8ba2\u9605</span>\n    subscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4e3a\u9632\u6b62\u5185\u5b58\u6cc4\u6f0f\uff0c\u6e05\u9664\u51fd\u6570\u4f1a\u5728\u7ec4\u4ef6\u5378\u8f7d\u524d\u6267\u884c\u3002\u53e6\u5916\uff0c\u5982\u679c\u7ec4\u4ef6\u591a\u6b21\u6e32\u67d3\uff08\u901a\u5e38\u5982\u6b64\uff09\uff0c\u5219<strong>\u5728\u6267\u884c\u4e0b\u4e00\u4e2a effect \u4e4b\u524d\uff0c\u4e0a\u4e00\u4e2a effect \u5c31\u5df2\u88ab\u6e05\u9664</strong>\u3002\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u610f\u5473\u7740\u7ec4\u4ef6\u7684\u6bcf\u4e00\u6b21\u66f4\u65b0\u90fd\u4f1a\u521b\u5efa\u65b0\u7684\u8ba2\u9605\u3002\u82e5\u60f3\u907f\u514d\u6bcf\u6b21\u66f4\u65b0\u90fd\u89e6\u53d1 effect \u7684\u6267\u884c\uff0c\u8bf7\u53c2\u9605\u4e0b\u4e00\u5c0f\u8282\u3002</p>\n<h4 id=\"timing-of-effects\"><a class=\"anchor\" href=\"/react/hooks-reference#timing-of-effects\"></a>effect \u7684\u6267\u884c\u65f6\u673a </h4>\n<p>\u4e0e <code class=\"language-javascript\">componentDidMount</code>\u3001<code class=\"language-javascript\">componentDidUpdate</code> \u4e0d\u540c\u7684\u662f\uff0c\u4f20\u7ed9 <code class=\"language-javascript\">useEffect</code> \u7684\u51fd\u6570\u4f1a\u5728\u6d4f\u89c8\u5668\u5b8c\u6210\u5e03\u5c40\u4e0e\u7ed8\u5236<strong>\u4e4b\u540e</strong>\uff0c\u5728\u4e00\u4e2a\u5ef6\u8fdf\u4e8b\u4ef6\u4e2d\u88ab\u8c03\u7528\u3002\u8fd9\u4f7f\u5f97\u5b83\u9002\u7528\u4e8e\u8bb8\u591a\u5e38\u89c1\u7684\u526f\u4f5c\u7528\u573a\u666f\uff0c\u6bd4\u5982\u8bbe\u7f6e\u8ba2\u9605\u548c\u4e8b\u4ef6\u5904\u7406\u7b49\u60c5\u51b5\uff0c\u56e0\u4e3a\u7edd\u5927\u591a\u6570\u64cd\u4f5c\u4e0d\u5e94\u963b\u585e\u6d4f\u89c8\u5668\u5bf9\u5c4f\u5e55\u7684\u66f4\u65b0\u3002</p>\n<p>\u7136\u800c\uff0c\u5e76\u975e\u6240\u6709 effect \u90fd\u53ef\u4ee5\u88ab\u5ef6\u8fdf\u6267\u884c\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u5bf9\u7528\u6237\u53ef\u89c1\u7684 DOM \u53d8\u66f4\u5c31\u5fc5\u987b\u5728\u6d4f\u89c8\u5668\u6267\u884c\u4e0b\u4e00\u6b21\u7ed8\u5236\u524d\u88ab\u540c\u6b65\u6267\u884c\uff0c\u8fd9\u6837\u7528\u6237\u624d\u4e0d\u4f1a\u611f\u89c9\u5230\u89c6\u89c9\u4e0a\u7684\u4e0d\u4e00\u81f4\u3002\uff08\u6982\u5ff5\u4e0a\u7c7b\u4f3c\u4e8e\u88ab\u52a8\u76d1\u542c\u4e8b\u4ef6\u548c\u4e3b\u52a8\u76d1\u542c\u4e8b\u4ef6\u7684\u533a\u522b\u3002\uff09React \u4e3a\u6b64\u63d0\u4f9b\u4e86\u4e00\u4e2a\u989d\u5916\u7684 <a href=\"/react/hooks-reference#uselayouteffect\"><code class=\"language-javascript\">useLayoutEffect</code></a> Hook \u6765\u5904\u7406\u8fd9\u7c7b effect\u3002\u5b83\u548c <code class=\"language-javascript\">useEffect</code> \u7684\u7ed3\u6784\u76f8\u540c\uff0c\u533a\u522b\u53ea\u662f\u8c03\u7528\u65f6\u673a\u4e0d\u540c\u3002</p>\n<p>\u6b64\u5916\uff0c\u4ece React 18 \u5f00\u59cb\uff0c\u5f53\u5b83\u662f\u79bb\u6563\u7684\u7528\u6237\u8f93\u5165\uff08\u5982\u70b9\u51fb\uff09\u7684\u7ed3\u679c\u65f6\uff0c\u6216\u8005\u5f53\u5b83\u662f\u7531 <a href=\"/react/react-dom#flushsync\"><code class=\"language-javascript\">flushSync</code></a> \u5305\u88c5\u7684\u66f4\u65b0\u7ed3\u679c\u65f6\uff0c\u4f20\u9012\u7ed9 <code class=\"language-javascript\">useEffect</code> \u7684\u51fd\u6570\u5c06\u5728\u5c4f\u5e55\u5e03\u5c40\u548c\u7ed8\u5236<strong>\u4e4b\u524d</strong>\u540c\u6b65\u6267\u884c\u3002\u8fd9\u79cd\u884c\u4e3a\u4fbf\u4e8e\u4e8b\u4ef6\u7cfb\u7edf\u6216 <a href=\"/react/react-dom#flushsync\"><code class=\"language-javascript\">flushSync</code></a> \u7684\u8c03\u7528\u8005\u89c2\u5bdf\u8be5\u6548\u679c\u7684\u7ed3\u679c\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u8fd9\u53ea\u5f71\u54cd\u4f20\u9012\u7ed9 <code class=\"language-javascript\">useEffect</code> \u7684\u51fd\u6570\u88ab\u8c03\u7528\u65f6 \u2014 \u5728\u8fd9\u4e9b effect \u4e2d\u6267\u884c\u7684\u66f4\u65b0\u4ecd\u4f1a\u88ab\u63a8\u8fdf\u3002\u8fd9\u4e0e <a href=\"/react/hooks-reference#uselayouteffect\"><code class=\"language-javascript\">useLayoutEffect</code></a> \u4e0d\u540c\uff0c\u540e\u8005\u4f1a\u7acb\u5373\u542f\u52a8\u8be5\u51fd\u6570\u5e76\u5904\u7406\u5176\u4e2d\u7684\u66f4\u65b0\u3002</p>\n</div>\n<p>\u5373\u4f7f\u5728 <code class=\"language-javascript\">useEffect</code> \u88ab\u63a8\u8fdf\u5230\u6d4f\u89c8\u5668\u7ed8\u5236\u4e4b\u540e\u7684\u60c5\u51b5\u4e0b\uff0c\u5b83\u4e5f\u80fd\u4fdd\u8bc1\u5728\u4efb\u4f55\u65b0\u7684\u6e32\u67d3\u524d\u542f\u52a8\u3002React \u5728\u5f00\u59cb\u65b0\u7684\u66f4\u65b0\u524d\uff0c\u603b\u4f1a\u5148\u5237\u65b0\u4e4b\u524d\u7684\u6e32\u67d3\u7684 effect\u3002</p>\n<h4 id=\"conditionally-firing-an-effect\"><a class=\"anchor\" href=\"/react/hooks-reference#conditionally-firing-an-effect\"></a>effect \u7684\u6761\u4ef6\u6267\u884c </h4>\n<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ceffect \u4f1a\u5728\u6bcf\u8f6e\u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u540e\u6267\u884c\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u4e00\u65e6 effect \u7684\u4f9d\u8d56\u53d1\u751f\u53d8\u5316\uff0c\u5b83\u5c31\u4f1a\u88ab\u91cd\u65b0\u521b\u5efa\u3002</p>\n<p>\u7136\u800c\uff0c\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u8fd9\u4e48\u505a\u53ef\u80fd\u4f1a\u77eb\u6789\u8fc7\u6b63\u3002\u6bd4\u5982\uff0c\u5728\u4e0a\u4e00\u7ae0\u8282\u7684\u8ba2\u9605\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5728\u6bcf\u6b21\u7ec4\u4ef6\u66f4\u65b0\u65f6\u90fd\u521b\u5efa\u65b0\u7684\u8ba2\u9605\uff0c\u800c\u662f\u4ec5\u9700\u8981\u5728 <code class=\"language-javascript\">source</code> prop \u6539\u53d8\u65f6\u91cd\u65b0\u521b\u5efa\u3002</p>\n<p>\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u53ef\u4ee5\u7ed9 <code class=\"language-javascript\">useEffect</code> \u4f20\u9012\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5b83\u662f effect \u6240\u4f9d\u8d56\u7684\u503c\u6570\u7ec4\u3002\u66f4\u65b0\u540e\u7684\u793a\u4f8b\u5982\u4e0b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> subscription <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      subscription<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6b64\u65f6\uff0c\u53ea\u6709\u5f53 <code class=\"language-javascript\">props.source</code> \u6539\u53d8\u540e\u624d\u4f1a\u91cd\u65b0\u521b\u5efa\u8ba2\u9605\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u5982\u679c\u4f60\u8981\u4f7f\u7528\u6b64\u4f18\u5316\u65b9\u5f0f\uff0c\u8bf7\u786e\u4fdd\u6570\u7ec4\u4e2d\u5305\u542b\u4e86<strong>\u6240\u6709\u5916\u90e8\u4f5c\u7528\u57df\u4e2d\u4f1a\u53d1\u751f\u53d8\u5316\u4e14\u5728 effect \u4e2d\u4f7f\u7528\u7684\u53d8\u91cf</strong>\uff0c\u5426\u5219\u4f60\u7684\u4ee3\u7801\u4f1a\u5f15\u7528\u5230\u5148\u524d\u6e32\u67d3\u4e2d\u7684\u65e7\u53d8\u91cf\u3002\u8bf7\u53c2\u9605\u6587\u6863\uff0c\u4e86\u89e3\u66f4\u591a\u5173\u4e8e<a href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\">\u5982\u4f55\u5904\u7406\u51fd\u6570</a> \u4ee5\u53ca<a href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\">\u6570\u7ec4\u9891\u7e41\u53d8\u5316\u65f6\u7684\u63aa\u65bd</a> \u7684\u5185\u5bb9\u3002</p>\n<p>\u5982\u679c\u60f3\u6267\u884c\u53ea\u8fd0\u884c\u4e00\u6b21\u7684 effect\uff08\u4ec5\u5728\u7ec4\u4ef6\u6302\u8f7d\u548c\u5378\u8f7d\u65f6\u6267\u884c\uff09\uff0c\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff08<code class=\"language-javascript\">[]</code>\uff09\u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8fd9\u5c31\u544a\u8bc9 React \u4f60\u7684 effect \u4e0d\u4f9d\u8d56\u4e8e props \u6216 state \u4e2d\u7684\u4efb\u4f55\u503c\uff0c\u6240\u4ee5\u5b83\u6c38\u8fdc\u90fd\u4e0d\u9700\u8981\u91cd\u590d\u6267\u884c\u3002\u8fd9\u5e76\u4e0d\u5c5e\u4e8e\u7279\u6b8a\u60c5\u51b5 \u2014\u2014 \u5b83\u4f9d\u7136\u9075\u5faa\u8f93\u5165\u6570\u7ec4\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002</p>\n<p>\u5982\u679c\u4f60\u4f20\u5165\u4e86\u4e00\u4e2a\u7a7a\u6570\u7ec4\uff08<code class=\"language-javascript\">[]</code>\uff09\uff0ceffect \u5185\u90e8\u7684 props \u548c state \u5c31\u4f1a\u4e00\u76f4\u6301\u6709\u5176\u521d\u59cb\u503c\u3002\u5c3d\u7ba1\u4f20\u5165 <code class=\"language-javascript\">[]</code> \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6709\u70b9\u7c7b\u4f3c\u4e8e <code class=\"language-javascript\">componentDidMount</code> \u548c <code class=\"language-javascript\">componentWillUnmount</code> \u7684\u601d\u7ef4\u6a21\u5f0f\uff0c\u4f46\u6211\u4eec\u6709 <a href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\">\u66f4\u597d\u7684</a> <a href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\">\u65b9\u5f0f</a> \u6765\u907f\u514d\u8fc7\u4e8e\u9891\u7e41\u7684\u91cd\u590d\u8c03\u7528 effect\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8bf7\u8bb0\u5f97 React \u4f1a\u7b49\u5f85\u6d4f\u89c8\u5668\u5b8c\u6210\u753b\u9762\u6e32\u67d3\u4e4b\u540e\u624d\u4f1a\u5ef6\u8fdf\u8c03\u7528 <code class=\"language-javascript\">useEffect</code>\uff0c\u56e0\u6b64\u4f1a\u4f7f\u5f97\u5904\u7406\u989d\u5916\u64cd\u4f5c\u5f88\u65b9\u4fbf\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u542f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u4e2d\u7684 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/14920\"><code class=\"language-javascript\">exhaustive-deps</code></a> \u89c4\u5219\u3002\u6b64\u89c4\u5219\u4f1a\u5728\u6dfb\u52a0\u9519\u8bef\u4f9d\u8d56\u65f6\u53d1\u51fa\u8b66\u544a\u5e76\u7ed9\u51fa\u4fee\u590d\u5efa\u8bae\u3002</p>\n</div>\n<p>\u4f9d\u8d56\u9879\u6570\u7ec4\u4e0d\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9 effect \u51fd\u6570\u3002\u867d\u7136\u4ece\u6982\u5ff5\u4e0a\u6765\u8bf4\u5b83\u8868\u73b0\u4e3a\uff1a\u6240\u6709 effect \u51fd\u6570\u4e2d\u5f15\u7528\u7684\u503c\u90fd\u5e94\u8be5\u51fa\u73b0\u5728\u4f9d\u8d56\u9879\u6570\u7ec4\u4e2d\u3002\u672a\u6765\u7f16\u8bd1\u5668\u4f1a\u66f4\u52a0\u667a\u80fd\uff0c\u5c4a\u65f6\u81ea\u52a8\u521b\u5efa\u6570\u7ec4\u5c06\u6210\u4e3a\u53ef\u80fd\u3002</p>\n<h3 id=\"usecontext\"><a class=\"anchor\" href=\"/react/hooks-reference#usecontext\"></a><code class=\"language-javascript\">useContext</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>MyContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u63a5\u6536\u4e00\u4e2a context \u5bf9\u8c61\uff08<code class=\"language-javascript\">React.createContext</code> \u7684\u8fd4\u56de\u503c\uff09\u5e76\u8fd4\u56de\u8be5 context \u7684\u5f53\u524d\u503c\u3002\u5f53\u524d\u7684 context \u503c\u7531\u4e0a\u5c42\u7ec4\u4ef6\u4e2d\u8ddd\u79bb\u5f53\u524d\u7ec4\u4ef6\u6700\u8fd1\u7684 <code class=\"language-javascript\">&lt;MyContext.Provider&gt;</code> \u7684 <code class=\"language-javascript\">value</code> prop \u51b3\u5b9a\u3002</p>\n<p>\u5f53\u7ec4\u4ef6\u4e0a\u5c42\u6700\u8fd1\u7684 <code class=\"language-javascript\">&lt;MyContext.Provider&gt;</code> \u66f4\u65b0\u65f6\uff0c\u8be5 Hook \u4f1a\u89e6\u53d1\u91cd\u6e32\u67d3\uff0c\u5e76\u4f7f\u7528\u6700\u65b0\u4f20\u9012\u7ed9 <code class=\"language-javascript\">MyContext</code> provider \u7684 context <code class=\"language-javascript\">value</code> \u503c\u3002\u5373\u4f7f\u7956\u5148\u4f7f\u7528 <a href=\"/react/react-api#reactmemo\"><code class=\"language-javascript\">React.memo</code></a> \u6216 <a href=\"/react/react-component#shouldcomponentupdate\"><code class=\"language-javascript\">shouldComponentUpdate</code></a>\uff0c\u4e5f\u4f1a\u5728\u7ec4\u4ef6\u672c\u8eab\u4f7f\u7528 <code class=\"language-javascript\">useContext</code> \u65f6\u91cd\u65b0\u6e32\u67d3\u3002</p>\n<p>\u522b\u5fd8\u8bb0 <code class=\"language-javascript\">useContext</code> \u7684\u53c2\u6570\u5fc5\u987b\u662f <em>context \u5bf9\u8c61\u672c\u8eab</em>\uff1a</p>\n<ul>\n<li><strong>\u6b63\u786e\uff1a</strong> <code class=\"language-javascript\">useContext(MyContext)</code></li>\n<li><strong>\u9519\u8bef\uff1a</strong> <code class=\"language-javascript\">useContext(MyContext.Consumer)</code></li>\n<li><strong>\u9519\u8bef\uff1a</strong> <code class=\"language-javascript\">useContext(MyContext.Provider)</code></li>\n</ul>\n<p>\u8c03\u7528\u4e86 <code class=\"language-javascript\">useContext</code> \u7684\u7ec4\u4ef6\u603b\u4f1a\u5728 context \u503c\u53d8\u5316\u65f6\u91cd\u65b0\u6e32\u67d3\u3002\u5982\u679c\u91cd\u6e32\u67d3\u7ec4\u4ef6\u7684\u5f00\u9500\u8f83\u5927\uff0c\u4f60\u53ef\u4ee5 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/15156#issuecomment-474590693\">\u901a\u8fc7\u4f7f\u7528 memoization \u6765\u4f18\u5316</a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u5982\u679c\u4f60\u5728\u63a5\u89e6 Hook \u524d\u5df2\u7ecf\u5bf9 context API \u6bd4\u8f83\u719f\u6089\uff0c\u90a3\u5e94\u8be5\u53ef\u4ee5\u7406\u89e3\uff0c<code class=\"language-javascript\">useContext(MyContext)</code> \u76f8\u5f53\u4e8e class \u7ec4\u4ef6\u4e2d\u7684 <code class=\"language-javascript\">static contextType = MyContext</code> \u6216\u8005 <code class=\"language-javascript\">&lt;MyContext.Consumer&gt;</code>\u3002</p>\n<p><code class=\"language-javascript\">useContext(MyContext)</code> \u53ea\u662f\u8ba9\u4f60\u80fd\u591f<em>\u8bfb\u53d6</em> context \u7684\u503c\u4ee5\u53ca\u8ba2\u9605 context \u7684\u53d8\u5316\u3002\u4f60\u4ecd\u7136\u9700\u8981\u5728\u4e0a\u5c42\u7ec4\u4ef6\u6811\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">&lt;MyContext.Provider&gt;</code> \u6765\u4e3a\u4e0b\u5c42\u7ec4\u4ef6<em>\u63d0\u4f9b</em> context\u3002</p>\n</div>\n<p><strong>\u628a\u5982\u4e0b\u4ee3\u7801\u4e0e Context.Provider \u653e\u5728\u4e00\u8d77</strong></p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> themes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">light</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">foreground</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#000000\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#eeeeee\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">dark</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">foreground</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#ffffff\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#222222\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span>themes<span class=\"token punctuation\">.</span>light<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>themes<span class=\"token punctuation\">.</span>dark<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toolbar</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Provider</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Toolbar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemedButton</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ThemedButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ThemeContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>background<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>foreground <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      I am styled by theme context!</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5bf9\u5148\u524d <a href=\"/react/context\">Context \u9ad8\u7ea7\u6307\u5357</a>\u4e2d\u7684\u793a\u4f8b\u4f7f\u7528 hook \u8fdb\u884c\u4e86\u4fee\u6539\uff0c\u4f60\u53ef\u4ee5\u5728\u94fe\u63a5\u4e2d\u627e\u5230\u6709\u5173\u5982\u4f55 Context \u7684\u66f4\u591a\u4fe1\u606f\u3002</p>\n<h2 id=\"additional-hooks\"><a class=\"anchor\" href=\"/react/hooks-reference#additional-hooks\"></a>\u989d\u5916\u7684 Hook </h2>\n<p>\u4ee5\u4e0b\u4ecb\u7ecd\u7684 Hook\uff0c\u6709\u4e9b\u662f\u4e0a\u4e00\u8282\u4e2d\u57fa\u7840 Hook \u7684\u53d8\u4f53\uff0c\u6709\u4e9b\u5219\u4ec5\u5728\u7279\u6b8a\u60c5\u51b5\u4e0b\u4f1a\u7528\u5230\u3002\u4e0d\u7528\u7279\u610f\u9884\u5148\u5b66\u4e60\u5b83\u4eec\u3002</p>\n<h3 id=\"usereducer\"><a class=\"anchor\" href=\"/react/hooks-reference#usereducer\"></a><code class=\"language-javascript\">useReducer</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> initialArg<span class=\"token punctuation\">,</span> init<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a href=\"/react/hooks-reference#usestate\"><code class=\"language-javascript\">useState</code></a> \u7684\u66ff\u4ee3\u65b9\u6848\u3002\u5b83\u63a5\u6536\u4e00\u4e2a\u5f62\u5982 <code class=\"language-javascript\">(state, action) =&gt; newState</code> \u7684 reducer\uff0c\u5e76\u8fd4\u56de\u5f53\u524d\u7684 state \u4ee5\u53ca\u4e0e\u5176\u914d\u5957\u7684 <code class=\"language-javascript\">dispatch</code> \u65b9\u6cd5\u3002\uff08\u5982\u679c\u4f60\u719f\u6089 Redux \u7684\u8bdd\uff0c\u5c31\u5df2\u7ecf\u77e5\u9053\u5b83\u5982\u4f55\u5de5\u4f5c\u4e86\u3002\uff09</p>\n<p>\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\uff0c<code class=\"language-javascript\">useReducer</code> \u4f1a\u6bd4 <code class=\"language-javascript\">useState</code> \u66f4\u9002\u7528\uff0c\u4f8b\u5982 state \u903b\u8f91\u8f83\u590d\u6742\u4e14\u5305\u542b\u591a\u4e2a\u5b50\u503c\uff0c\u6216\u8005\u4e0b\u4e00\u4e2a state \u4f9d\u8d56\u4e8e\u4e4b\u524d\u7684 state \u7b49\u3002\u5e76\u4e14\uff0c\u4f7f\u7528 <code class=\"language-javascript\">useReducer</code> \u8fd8\u80fd\u7ed9\u90a3\u4e9b\u4f1a\u89e6\u53d1\u6df1\u66f4\u65b0\u7684\u7ec4\u4ef6\u505a\u6027\u80fd\u4f18\u5316\uff0c\u56e0\u4e3a<a href=\"/react/hooks-faq#how-to-avoid-passing-callbacks-down\">\u4f60\u53ef\u4ee5\u5411\u5b50\u7ec4\u4ef6\u4f20\u9012 <code class=\"language-javascript\">dispatch</code> \u800c\u4e0d\u662f\u56de\u8c03\u51fd\u6570</a> \u3002</p>\n<p>\u4ee5\u4e0b\u662f\u7528 reducer \u91cd\u5199 <a href=\"/react/hooks-reference#usestate\"><code class=\"language-javascript\">useState</code></a> \u4e00\u8282\u7684\u8ba1\u6570\u5668\u793a\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'increment'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'decrement'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      Count: </span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'decrement'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'increment'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>React \u4f1a\u786e\u4fdd <code class=\"language-javascript\">dispatch</code> \u51fd\u6570\u7684\u6807\u8bc6\u662f\u7a33\u5b9a\u7684\uff0c\u5e76\u4e14\u4e0d\u4f1a\u5728\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u65f6\u6539\u53d8\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u5b89\u5168\u5730\u4ece <code class=\"language-javascript\">useEffect</code> \u6216 <code class=\"language-javascript\">useCallback</code> \u7684\u4f9d\u8d56\u5217\u8868\u4e2d\u7701\u7565 <code class=\"language-javascript\">dispatch</code>\u3002</p>\n</div>\n<h4 id=\"specifying-the-initial-state\"><a class=\"anchor\" href=\"/react/hooks-reference#specifying-the-initial-state\"></a>\u6307\u5b9a\u521d\u59cb state </h4>\n<p>\u6709\u4e24\u79cd\u4e0d\u540c\u521d\u59cb\u5316 <code class=\"language-javascript\">useReducer</code> state \u7684\u65b9\u5f0f\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5176\u4e2d\u7684\u4e00\u79cd\u3002\u5c06\u521d\u59cb state \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f20\u5165 <code class=\"language-javascript\">useReducer</code> \u662f\u6700\u7b80\u5355\u7684\u65b9\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>\n    reducer<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> initialCount<span class=\"token punctuation\">}</span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>React \u4e0d\u4f7f\u7528 <code class=\"language-javascript\">state = initialState</code> \u8fd9\u4e00\u7531 Redux \u63a8\u5e7f\u5f00\u6765\u7684\u53c2\u6570\u7ea6\u5b9a\u3002\u6709\u65f6\u5019\u521d\u59cb\u503c\u4f9d\u8d56\u4e8e props\uff0c\u56e0\u6b64\u9700\u8981\u5728\u8c03\u7528 Hook \u65f6\u6307\u5b9a\u3002\u5982\u679c\u4f60\u7279\u522b\u559c\u6b22\u4e0a\u8ff0\u7684\u53c2\u6570\u7ea6\u5b9a\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">useReducer(reducer, undefined, reducer)</code> \u6765\u6a21\u62df Redux \u7684\u884c\u4e3a\uff0c\u4f46\u6211\u4eec\u4e0d\u9f13\u52b1\u4f60\u8fd9\u4e48\u505a\u3002</p>\n</div>\n<h4 id=\"lazy-initialization\"><a class=\"anchor\" href=\"/react/hooks-reference#lazy-initialization\"></a>\u60f0\u6027\u521d\u59cb\u5316 </h4>\n<p>\u4f60\u53ef\u4ee5\u9009\u62e9\u60f0\u6027\u5730\u521b\u5efa\u521d\u59cb state\u3002\u4e3a\u6b64\uff0c\u9700\u8981\u5c06 <code class=\"language-javascript\">init</code> \u51fd\u6570\u4f5c\u4e3a <code class=\"language-javascript\">useReducer</code> \u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u4f20\u5165\uff0c\u8fd9\u6837\u521d\u59cb state \u5c06\u88ab\u8bbe\u7f6e\u4e3a <code class=\"language-javascript\">init(initialArg)</code>\u3002</p>\n<p>\u8fd9\u4e48\u505a\u53ef\u4ee5\u5c06\u7528\u4e8e\u8ba1\u7b97 state \u7684\u903b\u8f91\u63d0\u53d6\u5230 reducer \u5916\u90e8\uff0c\u8fd9\u4e5f\u4e3a\u5c06\u6765\u5bf9\u91cd\u7f6e state \u7684 action \u505a\u5904\u7406\u63d0\u4f9b\u4e86\u4fbf\u5229\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialCount</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> initialCount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'increment'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'decrement'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">case</span> <span class=\"token string\">'reset'</span><span class=\"token operator\">:</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>initialCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> initialCount<span class=\"token punctuation\">,</span> init<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      Count: </span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n<span class=\"gatsby-highlight-code-line\">        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'reset'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> initialCount<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">        Reset</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'decrement'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'increment'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"bailing-out-of-a-dispatch\"><a class=\"anchor\" href=\"/react/hooks-reference#bailing-out-of-a-dispatch\"></a>\u8df3\u8fc7 dispatch </h4>\n<p>\u5982\u679c Reducer Hook \u7684\u8fd4\u56de\u503c\u4e0e\u5f53\u524d state \u76f8\u540c\uff0cReact \u5c06\u8df3\u8fc7\u5b50\u7ec4\u4ef6\u7684\u6e32\u67d3\u53ca\u526f\u4f5c\u7528\u7684\u6267\u884c\u3002\uff08React \u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is#Description\"><code class=\"language-javascript\">Object.is</code> \u6bd4\u8f83\u7b97\u6cd5</a> \u6765\u6bd4\u8f83 state\u3002\uff09</p>\n<p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cReact \u53ef\u80fd\u4ecd\u9700\u8981\u5728\u8df3\u8fc7\u6e32\u67d3\u524d\u518d\u6b21\u6e32\u67d3\u8be5\u7ec4\u4ef6\u3002\u4e0d\u8fc7\u7531\u4e8e React \u4e0d\u4f1a\u5bf9\u7ec4\u4ef6\u6811\u7684\u201c\u6df1\u5c42\u201d\u8282\u70b9\u8fdb\u884c\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3\uff0c\u6240\u4ee5\u5927\u53ef\u4e0d\u5fc5\u62c5\u5fc3\u3002\u5982\u679c\u4f60\u5728\u6e32\u67d3\u671f\u95f4\u6267\u884c\u4e86\u9ad8\u5f00\u9500\u7684\u8ba1\u7b97\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">useMemo</code> \u6765\u8fdb\u884c\u4f18\u5316\u3002</p>\n<h3 id=\"usecallback\"><a class=\"anchor\" href=\"/react/hooks-reference#usecallback\"></a><code class=\"language-javascript\">useCallback</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd4\u56de\u4e00\u4e2a <a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Memoization\">memoized</a> \u56de\u8c03\u51fd\u6570\u3002</p>\n<p>\u628a\u5185\u8054\u56de\u8c03\u51fd\u6570\u53ca\u4f9d\u8d56\u9879\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165 <code class=\"language-javascript\">useCallback</code>\uff0c\u5b83\u5c06\u8fd4\u56de\u8be5\u56de\u8c03\u51fd\u6570\u7684 memoized \u7248\u672c\uff0c\u8be5\u56de\u8c03\u51fd\u6570\u4ec5\u5728\u67d0\u4e2a\u4f9d\u8d56\u9879\u6539\u53d8\u65f6\u624d\u4f1a\u66f4\u65b0\u3002\u5f53\u4f60\u628a\u56de\u8c03\u51fd\u6570\u4f20\u9012\u7ed9\u7ecf\u8fc7\u4f18\u5316\u7684\u5e76\u4f7f\u7528\u5f15\u7528\u76f8\u7b49\u6027\u53bb\u907f\u514d\u975e\u5fc5\u8981\u6e32\u67d3\uff08\u4f8b\u5982 <code class=\"language-javascript\">shouldComponentUpdate</code>\uff09\u7684\u5b50\u7ec4\u4ef6\u65f6\uff0c\u5b83\u5c06\u975e\u5e38\u6709\u7528\u3002</p>\n<p><code class=\"language-javascript\">useCallback(fn, deps)</code> \u76f8\u5f53\u4e8e <code class=\"language-javascript\">useMemo(() =&gt; fn, deps)</code>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4f9d\u8d56\u9879\u6570\u7ec4\u4e0d\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u56de\u8c03\u51fd\u6570\u3002\u867d\u7136\u4ece\u6982\u5ff5\u4e0a\u6765\u8bf4\u5b83\u8868\u73b0\u4e3a\uff1a\u6240\u6709\u56de\u8c03\u51fd\u6570\u4e2d\u5f15\u7528\u7684\u503c\u90fd\u5e94\u8be5\u51fa\u73b0\u5728\u4f9d\u8d56\u9879\u6570\u7ec4\u4e2d\u3002\u672a\u6765\u7f16\u8bd1\u5668\u4f1a\u66f4\u52a0\u667a\u80fd\uff0c\u5c4a\u65f6\u81ea\u52a8\u521b\u5efa\u6570\u7ec4\u5c06\u6210\u4e3a\u53ef\u80fd\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u542f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u4e2d\u7684 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/14920\"><code class=\"language-javascript\">exhaustive-deps</code></a> \u89c4\u5219\u3002\u6b64\u89c4\u5219\u4f1a\u5728\u6dfb\u52a0\u9519\u8bef\u4f9d\u8d56\u65f6\u53d1\u51fa\u8b66\u544a\u5e76\u7ed9\u51fa\u4fee\u590d\u5efa\u8bae\u3002</p>\n</div>\n<h3 id=\"usememo\"><a class=\"anchor\" href=\"/react/hooks-reference#usememo\"></a><code class=\"language-javascript\">useMemo</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd4\u56de\u4e00\u4e2a <a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Memoization\">memoized</a> \u503c\u3002</p>\n<p>\u628a\u201c\u521b\u5efa\u201d\u51fd\u6570\u548c\u4f9d\u8d56\u9879\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\u4f20\u5165 <code class=\"language-javascript\">useMemo</code>\uff0c\u5b83\u4ec5\u4f1a\u5728\u67d0\u4e2a\u4f9d\u8d56\u9879\u6539\u53d8\u65f6\u624d\u91cd\u65b0\u8ba1\u7b97 memoized \u503c\u3002\u8fd9\u79cd\u4f18\u5316\u6709\u52a9\u4e8e\u907f\u514d\u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u90fd\u8fdb\u884c\u9ad8\u5f00\u9500\u7684\u8ba1\u7b97\u3002</p>\n<p>\u8bb0\u4f4f\uff0c\u4f20\u5165 <code class=\"language-javascript\">useMemo</code> \u7684\u51fd\u6570\u4f1a\u5728\u6e32\u67d3\u671f\u95f4\u6267\u884c\u3002\u8bf7\u4e0d\u8981\u5728\u8fd9\u4e2a\u51fd\u6570\u5185\u90e8\u6267\u884c\u4e0d\u5e94\u8be5\u5728\u6e32\u67d3\u671f\u95f4\u5185\u6267\u884c\u7684\u64cd\u4f5c\uff0c\u8bf8\u5982\u526f\u4f5c\u7528\u8fd9\u7c7b\u7684\u64cd\u4f5c\u5c5e\u4e8e <code class=\"language-javascript\">useEffect</code> \u7684\u9002\u7528\u8303\u7574\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">useMemo</code>\u3002</p>\n<p>\u5982\u679c\u6ca1\u6709\u63d0\u4f9b\u4f9d\u8d56\u9879\u6570\u7ec4\uff0c<code class=\"language-javascript\">useMemo</code> \u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u90fd\u4f1a\u8ba1\u7b97\u65b0\u7684\u503c\u3002</p>\n<p> <strong>\u4f60\u53ef\u4ee5\u628a <code class=\"language-javascript\">useMemo</code> \u4f5c\u4e3a\u6027\u80fd\u4f18\u5316\u7684\u624b\u6bb5\uff0c\u4f46\u4e0d\u8981\u628a\u5b83\u5f53\u6210\u8bed\u4e49\u4e0a\u7684\u4fdd\u8bc1\u3002</strong>\u5c06\u6765\uff0cReact \u53ef\u80fd\u4f1a\u9009\u62e9\u201c\u9057\u5fd8\u201d\u4ee5\u524d\u7684\u4e00\u4e9b memoized \u503c\uff0c\u5e76\u5728\u4e0b\u6b21\u6e32\u67d3\u65f6\u91cd\u65b0\u8ba1\u7b97\u5b83\u4eec\uff0c\u6bd4\u5982\u4e3a\u79bb\u5c4f\u7ec4\u4ef6\u91ca\u653e\u5185\u5b58\u3002\u5148\u7f16\u5199\u5728\u6ca1\u6709 <code class=\"language-javascript\">useMemo</code> \u7684\u60c5\u51b5\u4e0b\u4e5f\u53ef\u4ee5\u6267\u884c\u7684\u4ee3\u7801 \u2014\u2014 \u4e4b\u540e\u518d\u5728\u4f60\u7684\u4ee3\u7801\u4e2d\u6dfb\u52a0 <code class=\"language-javascript\">useMemo</code>\uff0c\u4ee5\u8fbe\u5230\u4f18\u5316\u6027\u80fd\u7684\u76ee\u7684\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u4f9d\u8d56\u9879\u6570\u7ec4\u4e0d\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u201c\u521b\u5efa\u201d\u51fd\u6570\u3002\u867d\u7136\u4ece\u6982\u5ff5\u4e0a\u6765\u8bf4\u5b83\u8868\u73b0\u4e3a\uff1a\u6240\u6709\u201c\u521b\u5efa\u201d\u51fd\u6570\u4e2d\u5f15\u7528\u7684\u503c\u90fd\u5e94\u8be5\u51fa\u73b0\u5728\u4f9d\u8d56\u9879\u6570\u7ec4\u4e2d\u3002\u672a\u6765\u7f16\u8bd1\u5668\u4f1a\u66f4\u52a0\u667a\u80fd\uff0c\u5c4a\u65f6\u81ea\u52a8\u521b\u5efa\u6570\u7ec4\u5c06\u6210\u4e3a\u53ef\u80fd\u3002</p>\n<p>\u6211\u4eec\u63a8\u8350\u542f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u4e2d\u7684 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/14920\"><code class=\"language-javascript\">exhaustive-deps</code></a> \u89c4\u5219\u3002\u6b64\u89c4\u5219\u4f1a\u5728\u6dfb\u52a0\u9519\u8bef\u4f9d\u8d56\u65f6\u53d1\u51fa\u8b66\u544a\u5e76\u7ed9\u51fa\u4fee\u590d\u5efa\u8bae\u3002</p>\n</div>\n<h3 id=\"useref\"><a class=\"anchor\" href=\"/react/hooks-reference#useref\"></a><code class=\"language-javascript\">useRef</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> refContainer <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>initialValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">useRef</code> \u8fd4\u56de\u4e00\u4e2a\u53ef\u53d8\u7684 ref \u5bf9\u8c61\uff0c\u5176 <code class=\"language-javascript\">.current</code> \u5c5e\u6027\u88ab\u521d\u59cb\u5316\u4e3a\u4f20\u5165\u7684\u53c2\u6570\uff08<code class=\"language-javascript\">initialValue</code>\uff09\u3002\u8fd4\u56de\u7684 ref \u5bf9\u8c61\u5728\u7ec4\u4ef6\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u5185\u6301\u7eed\u5b58\u5728\u3002</p>\n<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4f8b\u4fbf\u662f\u547d\u4ee4\u5f0f\u5730\u8bbf\u95ee\u5b50\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">TextInputWithFocusButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputEl <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onButtonClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// `current` \u6307\u5411\u5df2\u6302\u8f7d\u5230 DOM \u4e0a\u7684\u6587\u672c\u8f93\u5165\u5143\u7d20</span>\n    inputEl<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>inputEl<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onButtonClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Focus the input</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u672c\u8d28\u4e0a\uff0c<code class=\"language-javascript\">useRef</code> \u5c31\u50cf\u662f\u53ef\u4ee5\u5728\u5176 <code class=\"language-javascript\">.current</code> \u5c5e\u6027\u4e2d\u4fdd\u5b58\u4e00\u4e2a\u53ef\u53d8\u503c\u7684\u201c\u76d2\u5b50\u201d\u3002</p>\n<p>\u4f60\u5e94\u8be5\u719f\u6089 ref \u8fd9\u4e00\u79cd<a href=\"/react/refs-and-the-dom\">\u8bbf\u95ee DOM</a> \u7684\u4e3b\u8981\u65b9\u5f0f\u3002\u5982\u679c\u4f60\u5c06 ref \u5bf9\u8c61\u4ee5 <code class=\"language-javascript\">&lt;div ref={myRef} /&gt;</code> \u5f62\u5f0f\u4f20\u5165\u7ec4\u4ef6\uff0c\u5219\u65e0\u8bba\u8be5\u8282\u70b9\u5982\u4f55\u6539\u53d8\uff0cReact \u90fd\u4f1a\u5c06 ref \u5bf9\u8c61\u7684 <code class=\"language-javascript\">.current</code> \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u76f8\u5e94\u7684 DOM \u8282\u70b9\u3002</p>\n<p>\u7136\u800c\uff0c<code class=\"language-javascript\">useRef()</code> \u6bd4 <code class=\"language-javascript\">ref</code> \u5c5e\u6027\u66f4\u6709\u7528\u3002\u5b83\u53ef\u4ee5<a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">\u5f88\u65b9\u4fbf\u5730\u4fdd\u5b58\u4efb\u4f55\u53ef\u53d8\u503c</a>\uff0c\u5176\u7c7b\u4f3c\u4e8e\u5728 class \u4e2d\u4f7f\u7528\u5b9e\u4f8b\u5b57\u6bb5\u7684\u65b9\u5f0f\u3002</p>\n<p>\u8fd9\u662f\u56e0\u4e3a\u5b83\u521b\u5efa\u7684\u662f\u4e00\u4e2a\u666e\u901a Javascript \u5bf9\u8c61\u3002\u800c <code class=\"language-javascript\">useRef()</code> \u548c\u81ea\u5efa\u4e00\u4e2a <code class=\"language-javascript\">{current: ...}</code> \u5bf9\u8c61\u7684\u552f\u4e00\u533a\u522b\u662f\uff0c<code class=\"language-javascript\">useRef</code> \u4f1a\u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u8fd4\u56de\u540c\u4e00\u4e2a ref \u5bf9\u8c61\u3002</p>\n<p>\u8bf7\u8bb0\u4f4f\uff0c\u5f53 ref \u5bf9\u8c61\u5185\u5bb9\u53d1\u751f\u53d8\u5316\u65f6\uff0c<code class=\"language-javascript\">useRef</code> \u5e76<em>\u4e0d\u4f1a</em>\u901a\u77e5\u4f60\u3002\u53d8\u66f4 <code class=\"language-javascript\">.current</code> \u5c5e\u6027\u4e0d\u4f1a\u5f15\u53d1\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\u3002\u5982\u679c\u60f3\u8981\u5728 React \u7ed1\u5b9a\u6216\u89e3\u7ed1 DOM \u8282\u70b9\u7684 ref \u65f6\u8fd0\u884c\u67d0\u4e9b\u4ee3\u7801\uff0c\u5219\u9700\u8981\u4f7f\u7528<a href=\"/react/hooks-faq#how-can-i-measure-a-dom-node\">\u56de\u8c03 ref</a> \u6765\u5b9e\u73b0\u3002</p>\n<h3 id=\"useimperativehandle\"><a class=\"anchor\" href=\"/react/hooks-reference#useimperativehandle\"></a><code class=\"language-javascript\">useImperativeHandle</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> createHandle<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>deps<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">useImperativeHandle</code> \u53ef\u4ee5\u8ba9\u4f60\u5728\u4f7f\u7528 <code class=\"language-javascript\">ref</code> \u65f6\u81ea\u5b9a\u4e49\u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u503c\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u5e94\u5f53\u907f\u514d\u4f7f\u7528 ref \u8fd9\u6837\u7684\u547d\u4ee4\u5f0f\u4ee3\u7801\u3002<code class=\"language-javascript\">useImperativeHandle</code> \u5e94\u5f53\u4e0e <a href=\"/react/react-api#reactforwardref\"><code class=\"language-javascript\">forwardRef</code></a> \u4e00\u8d77\u4f7f\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> inputRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">focus</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>inputRef<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nFancyInput <span class=\"token operator\">=</span> <span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span>FancyInput<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u672c\u4f8b\u4e2d\uff0c\u6e32\u67d3 <code class=\"language-javascript\">&lt;FancyInput ref={inputRef} /&gt;</code> \u7684\u7236\u7ec4\u4ef6\u53ef\u4ee5\u8c03\u7528 <code class=\"language-javascript\">inputRef.current.focus()</code>\u3002</p>\n<h3 id=\"uselayouteffect\"><a class=\"anchor\" href=\"/react/hooks-reference#uselayouteffect\"></a><code class=\"language-javascript\">useLayoutEffect</code> </h3>\n<p>\u5176\u51fd\u6570\u7b7e\u540d\u4e0e <code class=\"language-javascript\">useEffect</code> \u76f8\u540c\uff0c\u4f46\u5b83\u4f1a\u5728\u6240\u6709\u7684 DOM \u53d8\u66f4\u4e4b\u540e\u540c\u6b65\u8c03\u7528 effect\u3002\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u8bfb\u53d6 DOM \u5e03\u5c40\u5e76\u540c\u6b65\u89e6\u53d1\u91cd\u6e32\u67d3\u3002\u5728\u6d4f\u89c8\u5668\u6267\u884c\u7ed8\u5236\u4e4b\u524d\uff0c<code class=\"language-javascript\">useLayoutEffect</code> \u5185\u90e8\u7684\u66f4\u65b0\u8ba1\u5212\u5c06\u88ab\u540c\u6b65\u5237\u65b0\u3002</p>\n<p>\u5c3d\u53ef\u80fd\u4f7f\u7528\u6807\u51c6\u7684 <code class=\"language-javascript\">useEffect</code> \u4ee5\u907f\u514d\u963b\u585e\u89c6\u89c9\u66f4\u65b0\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u5982\u679c\u4f60\u6b63\u5728\u5c06\u4ee3\u7801\u4ece class \u7ec4\u4ef6\u8fc1\u79fb\u5230\u4f7f\u7528 Hook \u7684\u51fd\u6570\u7ec4\u4ef6\uff0c\u5219\u9700\u8981\u6ce8\u610f <code class=\"language-javascript\">useLayoutEffect</code> \u4e0e <code class=\"language-javascript\">componentDidMount</code>\u3001<code class=\"language-javascript\">componentDidUpdate</code> \u7684\u8c03\u7528\u9636\u6bb5\u662f\u4e00\u6837\u7684\u3002\u4f46\u662f\uff0c\u6211\u4eec\u63a8\u8350\u4f60<strong>\u4e00\u5f00\u59cb\u5148\u7528 <code class=\"language-javascript\">useEffect</code></strong>\uff0c\u53ea\u6709\u5f53\u5b83\u51fa\u95ee\u9898\u7684\u65f6\u5019\u518d\u5c1d\u8bd5\u4f7f\u7528 <code class=\"language-javascript\">useLayoutEffect</code>\u3002</p>\n<p>\u5982\u679c\u4f60\u4f7f\u7528\u670d\u52a1\u7aef\u6e32\u67d3\uff0c\u8bf7\u8bb0\u4f4f\uff0c<em>\u65e0\u8bba</em> <code class=\"language-javascript\">useLayoutEffect</code> <em>\u8fd8\u662f</em> <code class=\"language-javascript\">useEffect</code> \u90fd\u65e0\u6cd5\u5728 Javascript \u4ee3\u7801\u52a0\u8f7d\u5b8c\u6210\u4e4b\u524d\u6267\u884c\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5728\u670d\u52a1\u7aef\u6e32\u67d3\u7ec4\u4ef6\u4e2d\u5f15\u5165 <code class=\"language-javascript\">useLayoutEffect</code> \u4ee3\u7801\u65f6\u4f1a\u89e6\u53d1 React \u544a\u8b66\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u5c06\u4ee3\u7801\u903b\u8f91\u79fb\u81f3 <code class=\"language-javascript\">useEffect</code> \u4e2d\uff08\u5982\u679c\u9996\u6b21\u6e32\u67d3\u4e0d\u9700\u8981\u8fd9\u6bb5\u903b\u8f91\u7684\u60c5\u51b5\u4e0b\uff09\uff0c\u6216\u662f\u5c06\u8be5\u7ec4\u4ef6\u5ef6\u8fdf\u5230\u5ba2\u6237\u7aef\u6e32\u67d3\u5b8c\u6210\u540e\u518d\u663e\u793a\uff08\u5982\u679c\u76f4\u5230 <code class=\"language-javascript\">useLayoutEffect</code> \u6267\u884c\u4e4b\u524d HTML \u90fd\u663e\u793a\u9519\u4e71\u7684\u60c5\u51b5\u4e0b\uff09\u3002</p>\n<p>\u82e5\u8981\u4ece\u670d\u52a1\u7aef\u6e32\u67d3\u7684 HTML \u4e2d\u6392\u9664\u4f9d\u8d56\u5e03\u5c40 effect \u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 <code class=\"language-javascript\">showChild &amp;&amp; &lt;Child /&gt;</code> \u8fdb\u884c\u6761\u4ef6\u6e32\u67d3\uff0c\u5e76\u4f7f\u7528 <code class=\"language-javascript\">useEffect(() =&gt; { setShowChild(true); }, [])</code> \u5ef6\u8fdf\u5c55\u793a\u7ec4\u4ef6\u3002\u8fd9\u6837\uff0c\u5728\u5ba2\u6237\u7aef\u6e32\u67d3\u5b8c\u6210\u4e4b\u524d\uff0cUI \u5c31\u4e0d\u4f1a\u50cf\u4e4b\u524d\u90a3\u6837\u663e\u793a\u9519\u4e71\u4e86\u3002</p>\n</div>\n<h3 id=\"usedebugvalue\"><a class=\"anchor\" href=\"/react/hooks-reference#usedebugvalue\"></a><code class=\"language-javascript\">useDebugValue</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useDebugValue</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">useDebugValue</code> \u53ef\u7528\u4e8e\u5728 React \u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u663e\u793a\u81ea\u5b9a\u4e49 hook \u7684\u6807\u7b7e\u3002</p>\n<p>\u4f8b\u5982\uff0c<a href=\"/react/hooks-custom\">\u201c\u81ea\u5b9a\u4e49 Hook\u201d</a> \u7ae0\u8282\u4e2d\u63cf\u8ff0\u7684\u540d\u4e3a <code class=\"language-javascript\">useFriendStatus</code> \u7684\u81ea\u5b9a\u4e49 Hook\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friendID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u7684\u8fd9\u4e2a Hook \u65c1\u8fb9\u663e\u793a\u6807\u7b7e</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// e.g. \"FriendStatus: Online\"</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useDebugValue</span><span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> isOnline<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u6211\u4eec\u4e0d\u63a8\u8350\u4f60\u5411\u6bcf\u4e2a\u81ea\u5b9a\u4e49 Hook \u6dfb\u52a0 debug \u503c\u3002\u5f53\u5b83\u4f5c\u4e3a\u5171\u4eab\u5e93\u7684\u4e00\u90e8\u5206\u65f6\u624d\u6700\u6709\u4ef7\u503c\u3002</p>\n</div>\n<h4 id=\"defer-formatting-debug-values\"><a class=\"anchor\" href=\"/react/hooks-reference#defer-formatting-debug-values\"></a>\u5ef6\u8fdf\u683c\u5f0f\u5316 debug \u503c </h4>\n<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u683c\u5f0f\u5316\u503c\u7684\u663e\u793a\u53ef\u80fd\u662f\u4e00\u9879\u5f00\u9500\u5f88\u5927\u7684\u64cd\u4f5c\u3002\u9664\u975e\u9700\u8981\u68c0\u67e5 Hook\uff0c\u5426\u5219\u6ca1\u6709\u5fc5\u8981\u8fd9\u4e48\u505a\u3002</p>\n<p>\u56e0\u6b64\uff0c<code class=\"language-javascript\">useDebugValue</code> \u63a5\u53d7\u4e00\u4e2a\u683c\u5f0f\u5316\u51fd\u6570\u4f5c\u4e3a\u53ef\u9009\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\u8be5\u51fd\u6570\u53ea\u6709\u5728 Hook \u88ab\u68c0\u67e5\u65f6\u624d\u4f1a\u88ab\u8c03\u7528\u3002\u5b83\u63a5\u53d7 debug \u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u4e14\u4f1a\u8fd4\u56de\u4e00\u4e2a\u683c\u5f0f\u5316\u7684\u663e\u793a\u503c\u3002</p>\n<p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u8fd4\u56de <code class=\"language-javascript\">Date</code> \u503c\u7684\u81ea\u5b9a\u4e49 Hook \u53ef\u4ee5\u901a\u8fc7\u683c\u5f0f\u5316\u51fd\u6570\u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684 <code class=\"language-javascript\">toDateString</code> \u51fd\u6570\u8c03\u7528\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useDebugValue</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token parameter\">date</span> <span class=\"token operator\">=&gt;</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">toDateString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"usedeferredvalue\"><a class=\"anchor\" href=\"/react/hooks-reference#usedeferredvalue\"></a><code class=\"language-javascript\">useDeferredValue</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> deferredValue <span class=\"token operator\">=</span> <span class=\"token function\">useDeferredValue</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">useDeferredValue</code> \u63a5\u53d7\u4e00\u4e2a\u503c\uff0c\u5e76\u8fd4\u56de\u8be5\u503c\u7684\u65b0\u526f\u672c\uff0c\u8be5\u526f\u672c\u5c06\u63a8\u8fdf\u5230\u66f4\u7d27\u6025\u5730\u66f4\u65b0\u4e4b\u540e\u3002\u5982\u679c\u5f53\u524d\u6e32\u67d3\u662f\u4e00\u4e2a\u7d27\u6025\u66f4\u65b0\u7684\u7ed3\u679c\uff0c\u6bd4\u5982\u7528\u6237\u8f93\u5165\uff0cReact \u5c06\u8fd4\u56de\u4e4b\u524d\u7684\u503c\uff0c\u7136\u540e\u5728\u7d27\u6025\u6e32\u67d3\u5b8c\u6210\u540e\u6e32\u67d3\u65b0\u7684\u503c\u3002</p>\n<p>\u8be5 hook \u4e0e\u4f7f\u7528\u9632\u6296\u548c\u8282\u6d41\u53bb\u5ef6\u8fdf\u66f4\u65b0\u7684\u7528\u6237\u7a7a\u95f4 hooks \u7c7b\u4f3c\u3002\u4f7f\u7528 <code class=\"language-javascript\">useDeferredValue</code> \u7684\u597d\u5904\u662f\uff0cReact \u5c06\u5728\u5176\u4ed6\u5de5\u4f5c\u5b8c\u6210\uff08\u800c\u4e0d\u662f\u7b49\u5f85\u4efb\u610f\u65f6\u95f4\uff09\u540e\u7acb\u5373\u8fdb\u884c\u66f4\u65b0\uff0c\u5e76\u4e14\u50cf <a href=\"/react/react-api#starttransition\"><code class=\"language-javascript\">startTransition</code></a> \u4e00\u6837\uff0c\u5ef6\u8fdf\u503c\u53ef\u4ee5\u6682\u505c\uff0c\u800c\u4e0d\u4f1a\u89e6\u53d1\u73b0\u6709\u5185\u5bb9\u7684\u610f\u5916\u964d\u7ea7\u3002</p>\n<h4 id=\"memoizing-deferred-children\"><a class=\"anchor\" href=\"/react/hooks-reference#memoizing-deferred-children\"></a>Memoizing deferred children </h4>\n<p><code class=\"language-javascript\">useDeferredValue</code> \u4ec5\u5ef6\u8fdf\u4f60\u4f20\u9012\u7ed9\u5b83\u7684\u503c\u3002\u5982\u679c\u4f60\u60f3\u8981\u5728\u7d27\u6025\u66f4\u65b0\u671f\u95f4\u9632\u6b62\u5b50\u7ec4\u4ef6\u91cd\u65b0\u6e32\u67d3\uff0c\u5219\u8fd8\u5fc5\u987b\u4f7f\u7528 React.memo \u6216 React.useMemo \u8bb0\u5fc6\u8be5\u5b50\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Typeahead</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> query <span class=\"token operator\">=</span> <span class=\"token function\">useSearchQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> deferredQuery <span class=\"token operator\">=</span> <span class=\"token function\">useDeferredValue</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Memoizing \u544a\u8bc9 React \u4ec5\u5f53 deferredQuery \u6539\u53d8\uff0c</span>\n  <span class=\"token comment\">// \u800c\u4e0d\u662f query \u6539\u53d8\u7684\u65f6\u5019\u624d\u91cd\u65b0\u6e32\u67d3</span>\n  <span class=\"token keyword\">const</span> suggestions <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SearchSuggestions</span></span> <span class=\"token attr-name\">query</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>deferredQuery<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>deferredQuery<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SearchInput</span></span> <span class=\"token attr-name\">query</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Loading results...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>suggestions<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8bb0\u5fc6\u8be5\u5b50\u7ec4\u4ef6\u544a\u8bc9 React \u5b83\u4ec5\u5f53 <code class=\"language-javascript\">deferredQuery</code> \u6539\u53d8\u800c\u4e0d\u662f <code class=\"language-javascript\">query</code> \u6539\u53d8\u7684\u65f6\u5019\u624d\u9700\u8981\u53bb\u91cd\u65b0\u6e32\u67d3\u3002\u8fd9\u4e2a\u9650\u5236\u4e0d\u662f <code class=\"language-javascript\">useDeferredValue</code> \u72ec\u6709\u7684\uff0c\u5b83\u548c\u4f7f\u7528\u9632\u6296\u6216\u8282\u6d41\u7684 hooks \u4f7f\u7528\u7684\u76f8\u540c\u6a21\u5f0f\u3002</p>\n<h3 id=\"usetransition\"><a class=\"anchor\" href=\"/react/hooks-reference#usetransition\"></a><code class=\"language-javascript\">useTransition</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPending<span class=\"token punctuation\">,</span> startTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd4\u56de\u4e00\u4e2a\u72b6\u6001\u503c\u8868\u793a\u8fc7\u6e21\u4efb\u52a1\u7684\u7b49\u5f85\u72b6\u6001\uff0c\u4ee5\u53ca\u4e00\u4e2a\u542f\u52a8\u8be5\u8fc7\u6e21\u4efb\u52a1\u7684\u51fd\u6570\u3002</p>\n<p><code class=\"language-javascript\">startTransition</code> \u5141\u8bb8\u4f60\u901a\u8fc7\u6807\u8bb0\u66f4\u65b0\u5c06\u63d0\u4f9b\u7684\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u4e00\u4e2a\u8fc7\u6e21\u4efb\u52a1\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-javascript\">isPending</code> \u6307\u793a\u8fc7\u6e21\u4efb\u52a1\u4f55\u65f6\u6d3b\u8dc3\u4ee5\u663e\u793a\u4e00\u4e2a\u7b49\u5f85\u72b6\u6001\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPending<span class=\"token punctuation\">,</span> startTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=&gt;</span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isPending <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Spinner</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fc7\u6e21\u4efb\u52a1\u4e2d\u89e6\u53d1\u7684\u66f4\u65b0\u4f1a\u8ba9\u66f4\u7d27\u6025\u5730\u66f4\u65b0\u5148\u8fdb\u884c\uff0c\u6bd4\u5982\u70b9\u51fb\u3002</p>\n<p>\u8fc7\u6e21\u4efb\u52a1\u4e2d\u7684\u66f4\u65b0\u5c06\u4e0d\u4f1a\u5c55\u793a\u7531\u4e8e\u518d\u6b21\u6302\u8d77\u800c\u5bfc\u81f4\u964d\u7ea7\u7684\u5185\u5bb9\u3002\u8fd9\u4e2a\u673a\u5236\u5141\u8bb8\u7528\u6237\u5728 React \u6e32\u67d3\u66f4\u65b0\u7684\u65f6\u5019\u7ee7\u7eed\u4e0e\u5f53\u524d\u5185\u5bb9\u8fdb\u884c\u4ea4\u4e92\u3002</p>\n</div>\n<h3 id=\"useid\"><a class=\"anchor\" href=\"/react/hooks-reference#useid\"></a><code class=\"language-javascript\">useId</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">useId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">useId</code> \u662f\u4e00\u4e2a\u7528\u4e8e\u751f\u6210\u6a2a\u8de8\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u7684\u7a33\u5b9a\u7684\u552f\u4e00 ID \u7684\u540c\u65f6\u907f\u514d hydration \u4e0d\u5339\u914d\u7684 hook\u3002</p>\n<div class=\"blockquote\">\n<strong>Note</strong>\n<p><code class=\"language-javascript\">useId</code> is <strong>not</strong> for generating <a href=\"/react/lists-and-keys#keys\">keys in a list</a>. Keys should be generated from your data.</p>\n</div>\n<p>For a basic example, pass the <code class=\"language-javascript\">id</code> directly to the elements that need it:\n\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u76f4\u63a5\u4f20\u9012 <code class=\"language-javascript\">id</code> \u7ed9\u9700\u8981\u5b83\u7684\u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Checkbox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">useId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Do you like React?</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>react<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5bf9\u4e8e\u540c\u4e00\u7ec4\u4ef6\u4e2d\u7684\u591a\u4e2a ID\uff0c\u4f7f\u7528\u76f8\u540c\u7684 <code class=\"language-javascript\">id</code> \u5e76\u6dfb\u52a0\u540e\u7f00\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">NameFields</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">useId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id <span class=\"token operator\">+</span> <span class=\"token string\">'-firstName'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">First Name</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id <span class=\"token operator\">+</span> <span class=\"token string\">'-firstName'</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id <span class=\"token operator\">+</span> <span class=\"token string\">'-lastName'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Last Name</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id <span class=\"token operator\">+</span> <span class=\"token string\">'-lastName'</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">useId</code> \u751f\u6210\u4e00\u4e2a\u5305\u542b <code class=\"language-javascript\">:</code> \u7684\u5b57\u7b26\u4e32 token\u3002\u8fd9\u6709\u52a9\u4e8e\u786e\u4fdd token \u662f\u552f\u4e00\u7684\uff0c\u4f46\u5728 CSS \u9009\u62e9\u5668\u6216 <code class=\"language-javascript\">querySelectorAll</code> \u7b49 API \u4e2d\u4e0d\u53d7\u652f\u6301\u3002</p>\n<p><code class=\"language-javascript\">useId</code> \u652f\u6301 <code class=\"language-javascript\">identifierPrefix</code> \u4ee5\u9632\u6b62\u5728\u591a\u4e2a\u6839\u5e94\u7528\u7684\u7a0b\u5e8f\u4e2d\u53d1\u751f\u51b2\u7a81\u3002 \u8981\u8fdb\u884c\u914d\u7f6e\uff0c\u8bf7\u53c2\u9605 <a href=\"/react/react-dom-client#hydrateroot\"><code class=\"language-javascript\">hydrateRoot</code></a> \u548c <a href=\"/react/react-dom-server\"><code class=\"language-javascript\">ReactDOMServer</code></a> \u7684\u9009\u9879\u3002</p>\n</div>\n<h2 id=\"library-hooks\"><a class=\"anchor\" href=\"/react/hooks-reference#library-hooks\"></a>Library Hooks </h2>\n<p>\u4ee5\u4e0b hook \u662f\u4e3a\u5e93\u4f5c\u8005\u63d0\u4f9b\u7684\uff0c\u7528\u4e8e\u5c06\u5e93\u6df1\u5165\u96c6\u6210\u5230 React \u6a21\u578b\u4e2d\uff0c\u901a\u5e38\u4e0d\u4f1a\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e2d\u4f7f\u7528\u3002</p>\n<h3 id=\"usesyncexternalstore\"><a class=\"anchor\" href=\"/react/hooks-reference#usesyncexternalstore\"></a><code class=\"language-javascript\">useSyncExternalStore</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>subscribe<span class=\"token punctuation\">,</span> getSnapshot<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> getServerSnapshot<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">useSyncExternalStore</code> \u662f\u4e00\u4e2a\u63a8\u8350\u7528\u4e8e\u8bfb\u53d6\u548c\u8ba2\u9605\u5916\u90e8\u6570\u636e\u6e90\u7684 hook\uff0c\u5176\u65b9\u5f0f\u4e0e\u9009\u62e9\u6027\u7684 hydration \u548c\u65f6\u95f4\u5207\u7247\u7b49\u5e76\u53d1\u6e32\u67d3\u529f\u80fd\u517c\u5bb9\u3002</p>\n<p>\u6b64\u65b9\u6cd5\u8fd4\u56de\u5b58\u50a8\u7684\u503c\u5e76\u63a5\u53d7\u4e09\u4e2a\u53c2\u6570\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">subscribe</code>\uff1a\u7528\u4e8e\u6ce8\u518c\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5f53\u5b58\u50a8\u503c\u53d1\u751f\u66f4\u6539\u65f6\u88ab\u8c03\u7528\u3002</li>\n<li><code class=\"language-javascript\">getSnapshot</code>\uff1a \u8fd4\u56de\u5f53\u524d\u5b58\u50a8\u503c\u7684\u51fd\u6570\u3002</li>\n<li><code class=\"language-javascript\">getServerSnapshot</code>\uff1a\u8fd4\u56de\u670d\u52a1\u7aef\u6e32\u67d3\u671f\u95f4\u4f7f\u7528\u7684\u5b58\u50a8\u503c\u7684\u51fd\u6570</li>\n</ul>\n<p>\u6700\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662f\u8ba2\u9605\u6574\u4e2a\u5b58\u50a8\u503c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>subscribe<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">.</span>getSnapshot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7136\u800c\uff0c\u4f60\u4e5f\u53ef\u4ee5\u8ba2\u9605\u7279\u5b9a\u5b57\u6bb5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> selectedField <span class=\"token operator\">=</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>\n  store<span class=\"token punctuation\">.</span>subscribe<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>selectedField<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5f53\u670d\u52a1\u7aef\u6e32\u67d3\u7684\u65f6\u5019\uff0c\u4f60\u5fc5\u987b\u5e8f\u5217\u5316\u5728\u670d\u52a1\u7aef\u4f7f\u7528\u7684\u5b58\u50a8\u503c\uff0c\u5e76\u5c06\u5176\u63d0\u4f9b\u7ed9 <code class=\"language-javascript\">usencexternalSternore</code>\u3002React \u5c06\u5728 hydration \u8fc7\u7a0b\u4e2d\u4f7f\u7528\u6b64\u5feb\u7167\u6765\u9632\u6b62\u670d\u52a1\u7aef\u4e0d\u5339\u914d\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> selectedField <span class=\"token operator\">=</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>\n  store<span class=\"token punctuation\">.</span>subscribe<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>selectedField<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token constant\">INITIAL_SERVER_SNAPSHOT</span><span class=\"token punctuation\">.</span>selectedField<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">getSnapshot</code> \u5fc5\u987b\u8fd4\u56de\u7f13\u5b58\u7684\u503c\u3002\u5982\u679c getSnapshot \u8fde\u7eed\u591a\u6b21\u8c03\u7528\uff0c\u5219\u5fc5\u987b\u8fd4\u56de\u76f8\u540c\u7684\u786e\u5207\u503c\uff0c\u9664\u975e\u4e2d\u95f4\u6709\u5b58\u50a8\u503c\u66f4\u65b0\u3002</p>\n<p>\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6954\u5b50\uff0c\u53d1\u5e03\u4e3a <code class=\"language-javascript\">use-sync-external-store/shim</code>\uff0c\u7528\u4e8e\u652f\u6301\u591a\u79cd\u7248\u672c\u7684 React\u3002\u5982\u679c\u53ef\u7528\uff0c\u6954\u5b50\u5c06\u9996\u9009 <code class=\"language-javascript\">useSyncExternalStore</code>\uff0c\u5982\u679c\u4e0d\u53ef\u7528\uff0c\u5219\u964d\u7ea7\u9009\u62e9\u7528\u6237\u7a7a\u95f4\u7684\u5b9e\u73b0\u3002</p>\n<p>\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7248\u672c\u7684 API\uff0c\u8be5 API \u53d1\u5e03\u4e3a <code class=\"language-javascript\">use-sync-external-store/with-selector</code>\uff0c\u5176\u81ea\u52a8\u652f\u6301\u8bb0\u5fc6 getSnapshot \u7684\u7ed3\u679c\u3002</p>\n</div>\n<h3 id=\"useinsertioneffect\"><a class=\"anchor\" href=\"/react/hooks-reference#useinsertioneffect\"></a><code class=\"language-javascript\">useInsertionEffect</code> </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useInsertionEffect</span><span class=\"token punctuation\">(</span>didUpdate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8be5\u7b7e\u540d\u4e0e <code class=\"language-javascript\">useEffect</code> \u76f8\u540c\uff0c\u4f46\u5b83\u5728\u6240\u6709 DOM \u7a81\u53d8 <em>\u4e4b\u524d</em> \u540c\u6b65\u89e6\u53d1\u3002\u4f7f\u7528\u5b83\u5728\u8bfb\u53d6 <a href=\"/react/hooks-reference#useLayoutEffect\"><code class=\"language-javascript\">useLayoutEffect</code></a> \u4e2d\u7684\u5e03\u5c40\u4e4b\u524d\u5c06\u6837\u5f0f\u6ce8\u5165 DOM\u3002\u7531\u4e8e\u8fd9\u4e2a hook \u7684\u4f5c\u7528\u57df\u6709\u9650\uff0c\u6240\u4ee5\u8fd9\u4e2a hook \u4e0d\u80fd\u8bbf\u95ee refs\uff0c\u4e5f\u4e0d\u80fd\u5b89\u6392\u66f4\u65b0\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">useInsertionEffect</code> \u5e94\u4ec5\u9650\u4e8e css-in-js \u5e93\u4f5c\u8005\u4f7f\u7528\u3002\u4f18\u5148\u8003\u8651\u4f7f\u7528 <a href=\"/react/hooks-reference#useeffect\"><code class=\"language-javascript\">useEffect</code></a> \u6216 <a href=\"/react/hooks-reference#uselayouteffect\"><code class=\"language-javascript\">useLayoutEffect</code></a> \u6765\u66ff\u4ee3\u3002</p>\n</div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-reference.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-reference", "nav": ["/react/hooks-custom", "/react/hooks-faq"]}, {"key": "8. Hooks FAQ", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p><em>Hook</em> \u662f React 16.8 \u7684\u65b0\u589e\u7279\u6027\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u5728\u4e0d\u7f16\u5199 class \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 state \u4ee5\u53ca\u5176\u4ed6\u7684 React \u7279\u6027\u3002</p>\n<p>\u6b64\u7ae0\u8282\u56de\u7b54\u4e86\u5173\u4e8e <a href=\"/react/hooks-overview\">Hook</a> \u7684\u5e38\u89c1\u95ee\u9898\u3002</p>\n<!--\n  if you ever need to regenerate this, this snippet in the devtools console might help:\n\n  $$('.anchor').map(a =>\n    `${' '.repeat(2 * +a.parentNode.nodeName.slice(1))}` +\n    `[${a.parentNode.textContent}](${a.getAttribute('href')})`\n  ).join('\\n')\n-->\n<ul>\n<li>\n<p><strong><a href=\"/react/hooks-faq#adoption-strategy\">\u91c7\u7eb3\u7b56\u7565</a></strong></p>\n<ul>\n<li><a href=\"/react/hooks-faq#which-versions-of-react-include-hooks\">\u54ea\u4e2a\u7248\u672c\u7684 React \u5305\u542b\u4e86 Hook\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#do-i-need-to-rewrite-all-my-class-components\">\u6211\u9700\u8981\u91cd\u5199\u6240\u6709\u7684 class \u7ec4\u4ef6\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#what-can-i-do-with-hooks-that-i-couldnt-with-classes\">\u6709\u4ec0\u4e48\u662f Hook \u80fd\u505a\u800c class \u505a\u4e0d\u5230\u7684\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-much-of-my-react-knowledge-stays-relevant\">\u6211\u7684 React \u77e5\u8bc6\u8fd8\u6709\u591a\u5c11\u662f\u4ecd\u7136\u6709\u7528\u7684\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#should-i-use-hooks-classes-or-a-mix-of-both\">\u6211\u5e94\u8be5\u4f7f\u7528 Hook\uff0cclass\uff0c\u8fd8\u662f\u4e24\u8005\u6df7\u7528\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#do-hooks-cover-all-use-cases-for-classes\">Hook \u80fd\u5426\u8986\u76d6 class \u7684\u6240\u6709\u4f7f\u7528\u573a\u666f\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#do-hooks-replace-render-props-and-higher-order-components\">Hook \u4f1a\u66ff\u4ee3 render props \u548c\u9ad8\u9636\u7ec4\u4ef6\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router\">Hook \u5bf9\u4e8e Redux connect() \u548c React Router \u7b49\u6d41\u884c\u7684 API \u6765\u8bf4\uff0c\u610f\u5473\u7740\u4ec0\u4e48\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#do-hooks-work-with-static-typing\">Hook \u80fd\u548c\u9759\u6001\u7c7b\u578b\u4e00\u8d77\u7528\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-to-test-components-that-use-hooks\">\u5982\u4f55\u6d4b\u8bd5\u4f7f\u7528\u4e86 Hook \u7684\u7ec4\u4ef6\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#what-exactly-do-the-lint-rules-enforce\">lint \u89c4\u5219\u5177\u4f53\u5f3a\u5236\u4e86\u54ea\u4e9b\u5185\u5bb9\uff1f</a></li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"/react/hooks-faq#from-classes-to-hooks\">\u4ece Class \u8fc1\u79fb\u5230 Hook</a></strong></p>\n<ul>\n<li><a href=\"/react/hooks-faq#how-do-lifecycle-methods-correspond-to-hooks\">\u751f\u547d\u5468\u671f\u65b9\u6cd5\u8981\u5982\u4f55\u5bf9\u5e94\u5230 Hook\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-can-i-do-data-fetching-with-hooks\">\u6211\u8be5\u5982\u4f55\u4f7f\u7528 Hook \u8fdb\u884c\u6570\u636e\u83b7\u53d6\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">\u6709\u7c7b\u4f3c\u5b9e\u4f8b\u53d8\u91cf\u7684\u4e1c\u897f\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#should-i-use-one-or-many-state-variables\">\u6211\u5e94\u8be5\u4f7f\u7528\u5355\u4e2a\u8fd8\u662f\u591a\u4e2a state \u53d8\u91cf\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#can-i-run-an-effect-only-on-updates\">\u6211\u53ef\u4ee5\u53ea\u5728\u66f4\u65b0\u65f6\u8fd0\u884c effect \u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-to-get-the-previous-props-or-state\">\u5982\u4f55\u83b7\u53d6\u4e0a\u4e00\u8f6e\u7684 props \u6216 state\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#why-am-i-seeing-stale-props-or-state-inside-my-function\">\u4e3a\u4ec0\u4e48\u6211\u4f1a\u5728\u6211\u7684\u51fd\u6570\u4e2d\u770b\u5230\u9648\u65e7\u7684 props \u548c state \uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-do-i-implement-getderivedstatefromprops\">\u6211\u8be5\u5982\u4f55\u5b9e\u73b0 getDerivedStateFromProps\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#is-there-something-like-forceupdate\">\u6709\u7c7b\u4f3c forceUpdate \u7684\u4e1c\u897f\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#can-i-make-a-ref-to-a-function-component\">\u6211\u53ef\u4ee5\u5f15\u7528\u4e00\u4e2a\u51fd\u6570\u7ec4\u4ef6\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-can-i-measure-a-dom-node\">\u6211\u8be5\u5982\u4f55\u6d4b\u91cf DOM \u8282\u70b9\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#what-does-const-thing-setthing--usestate-mean\">const [thing, setThing] = useState() \u662f\u4ec0\u4e48\u610f\u601d\uff1f</a></li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"/react/hooks-faq#performance-optimizations\">\u6027\u80fd\u4f18\u5316</a></strong></p>\n<ul>\n<li><a href=\"/react/hooks-faq#can-i-skip-an-effect-on-updates\">\u6211\u53ef\u4ee5\u5728\u66f4\u65b0\u65f6\u8df3\u8fc7 effect \u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\">\u5728\u4f9d\u8d56\u5217\u8868\u4e2d\u7701\u7565\u51fd\u6570\u662f\u5426\u5b89\u5168\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\">\u5982\u679c\u6211\u7684 effect \u7684\u4f9d\u8d56\u9891\u7e41\u53d8\u5316\uff0c\u6211\u8be5\u600e\u4e48\u529e\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-do-i-implement-shouldcomponentupdate\">\u6211\u8be5\u5982\u4f55\u5b9e\u73b0 shouldComponentUpdate\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-to-memoize-calculations\">\u5982\u4f55\u8bb0\u5fc6\u8ba1\u7b97\u7ed3\u679c\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-to-create-expensive-objects-lazily\">\u5982\u4f55\u60f0\u6027\u521b\u5efa\u6602\u8d35\u7684\u5bf9\u8c61\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#are-hooks-slow-because-of-creating-functions-in-render\">Hook \u4f1a\u56e0\u4e3a\u5728\u6e32\u67d3\u65f6\u521b\u5efa\u51fd\u6570\u800c\u53d8\u6162\u5417\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-to-avoid-passing-callbacks-down\">\u5982\u4f55\u907f\u514d\u5411\u4e0b\u4f20\u9012\u56de\u8c03\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#how-to-read-an-often-changing-value-from-usecallback\">\u5982\u4f55\u4ece useCallback \u8bfb\u53d6\u4e00\u4e2a\u7ecf\u5e38\u53d8\u5316\u7684\u503c\uff1f</a></li>\n</ul>\n</li>\n<li>\n<p><strong><a href=\"/react/hooks-faq#under-the-hood\">\u5e95\u5c42\u539f\u7406</a></strong></p>\n<ul>\n<li><a href=\"/react/hooks-faq#how-does-react-associate-hook-calls-with-components\">React \u662f\u5982\u4f55\u628a\u5bf9 Hook \u7684\u8c03\u7528\u548c\u7ec4\u4ef6\u8054\u7cfb\u8d77\u6765\u7684\uff1f</a></li>\n<li><a href=\"/react/hooks-faq#what-is-the-prior-art-for-hooks\">Hook \u4f7f\u7528\u4e86\u54ea\u4e9b\u73b0\u6709\u6280\u672f\uff1f</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"adoption-strategy\"><a class=\"anchor\" href=\"/react/hooks-faq#adoption-strategy\"></a>\u91c7\u7eb3\u7b56\u7565 </h2>\n<h3 id=\"which-versions-of-react-include-hooks\"><a class=\"anchor\" href=\"/react/hooks-faq#which-versions-of-react-include-hooks\"></a>\u54ea\u4e2a\u7248\u672c\u7684 React \u5305\u542b\u4e86 Hook\uff1f </h3>\n<p>\u4ece 16.8.0 \u5f00\u59cb\uff0cReact \u5728\u4ee5\u4e0b\u6a21\u5757\u4e2d\u5305\u542b\u4e86 React Hook \u7684\u7a33\u5b9a\u5b9e\u73b0\uff1a</p>\n<ul>\n<li>React DOM</li>\n<li>React Native</li>\n<li>React DOM Server</li>\n<li>React Test Renderer</li>\n<li>React Shallow Renderer</li>\n</ul>\n<p>\u8bf7\u6ce8\u610f\uff0c<strong>\u8981\u542f\u7528 Hook\uff0c\u6240\u6709 React \u76f8\u5173\u7684 package \u90fd\u5fc5\u987b\u5347\u7ea7\u5230 16.8.0 \u6216\u66f4\u9ad8\u7248\u672c</strong>\u3002\u5982\u679c\u4f60\u5fd8\u8bb0\u66f4\u65b0\u8bf8\u5982 React DOM \u4e4b\u7c7b\u7684 package\uff0cHook \u5c06\u65e0\u6cd5\u8fd0\u884c\u3002</p>\n<p><a class=\"external-link\" href=\"https://reactnative.dev/blog/2019/03/12/releasing-react-native-059\">React Native 0.59</a> \u53ca\u4ee5\u4e0a\u7248\u672c\u652f\u6301 Hook\u3002</p>\n<h3 id=\"do-i-need-to-rewrite-all-my-class-components\"><a class=\"anchor\" href=\"/react/hooks-faq#do-i-need-to-rewrite-all-my-class-components\"></a>\u6211\u9700\u8981\u91cd\u5199\u6240\u6709\u7684 class \u7ec4\u4ef6\u5417\uff1f </h3>\n<p>\u4e0d\u3002\u6211\u4eec\u5e76 <a href=\"/react/hooks-intro#gradual-adoption-strategy\">\u6ca1\u6709\u8ba1\u5212</a> \u4ece React \u4e2d\u79fb\u9664 class \u2014\u2014 \u6211\u4eec\u4e5f\u9700\u8981\u4e0d\u65ad\u5730\u53d1\u5e03\u4ea7\u54c1\uff0c\u91cd\u5199\u6210\u672c\u8f83\u9ad8\u3002\u6211\u4eec\u63a8\u8350\u5728\u65b0\u4ee3\u7801\u4e2d\u5c1d\u8bd5 Hook\u3002</p>\n<h3 id=\"what-can-i-do-with-hooks-that-i-couldnt-with-classes\"><a class=\"anchor\" href=\"/react/hooks-faq#what-can-i-do-with-hooks-that-i-couldnt-with-classes\"></a>\u6709\u4ec0\u4e48\u662f Hook \u80fd\u505a\u800c class \u505a\u4e0d\u5230\u7684\uff1f </h3>\n<p>Hook \u63d0\u4f9b\u4e86\u5f3a\u5927\u800c\u5bcc\u6709\u8868\u73b0\u529b\u7684\u65b9\u5f0f\u6765\u5728\u7ec4\u4ef6\u95f4\u590d\u7528\u529f\u80fd\u3002\u901a\u8fc7 <a href=\"/react/hooks-custom\">\u300c\u81ea\u5b9a\u4e49 Hook\u300d</a> \u8fd9\u4e00\u8282\u53ef\u4ee5\u4e86\u89e3\u80fd\u7528\u5b83\u505a\u4e9b\u4ec0\u4e48\u3002\u8fd9\u7bc7\u6765\u81ea\u4e00\u4f4d React \u6838\u5fc3\u56e2\u961f\u7684\u6210\u5458\u7684 <a class=\"external-link\" href=\"https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889\">\u6587\u7ae0</a> \u5219\u66f4\u52a0\u6df1\u5165\u5730\u5256\u6790\u4e86 Hook \u89e3\u9501\u4e86\u54ea\u4e9b\u65b0\u7684\u80fd\u529b\u3002</p>\n<h3 id=\"how-much-of-my-react-knowledge-stays-relevant\"><a class=\"anchor\" href=\"/react/hooks-faq#how-much-of-my-react-knowledge-stays-relevant\"></a>\u6211\u7684 React \u77e5\u8bc6\u8fd8\u6709\u591a\u5c11\u662f\u4ecd\u7136\u6709\u7528\u7684\uff1f </h3>\n<p>Hook \u662f\u4f7f\u7528\u4f60\u5df2\u7ecf\u77e5\u9053\u7684 React \u7279\u6027\u7684\u4e00\u79cd\u66f4\u76f4\u63a5\u7684\u65b9\u5f0f \u2014\u2014 \u6bd4\u5982 state\uff0c\u751f\u547d\u5468\u671f\uff0ccontext\uff0c\u4ee5\u53ca refs\u3002\u5b83\u4eec\u5e76\u6ca1\u6709\u4ece\u6839\u672c\u4e0a\u6539\u53d8 React \u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u4f60\u5bf9\u7ec4\u4ef6\uff0cprops, \u4ee5\u53ca\u81ea\u9876\u5411\u4e0b\u7684\u6570\u636e\u6d41\u7684\u77e5\u8bc6\u5e76\u6ca1\u6709\u6539\u53d8\u3002</p>\n<p>Hook \u786e\u5b9e\u6709\u5b83\u4eec\u81ea\u5df1\u7684\u5b66\u4e60\u66f2\u7ebf\u3002\u5982\u679c\u8fd9\u4efd\u6587\u6863\u4e2d\u9057\u5931\u4e86\u4e00\u4e9b\u4ec0\u4e48\uff0c<a class=\"external-link\" href=\"https://github.com/reactjs/reactjs.org/issues/new\">\u63d0\u4e00\u4e2a issue</a>\uff0c\u6211\u4eec\u4f1a\u5c3d\u53ef\u80fd\u5730\u5e2e\u4f60\u3002</p>\n<h3 id=\"should-i-use-hooks-classes-or-a-mix-of-both\"><a class=\"anchor\" href=\"/react/hooks-faq#should-i-use-hooks-classes-or-a-mix-of-both\"></a>\u6211\u5e94\u8be5\u4f7f\u7528 Hook\uff0cclass\uff0c\u8fd8\u662f\u4e24\u8005\u6df7\u7528\uff1f </h3>\n<p>\u5f53\u4f60\u51c6\u5907\u597d\u4e86\uff0c\u6211\u4eec\u9f13\u52b1\u4f60\u5728\u5199\u65b0\u7ec4\u4ef6\u7684\u65f6\u5019\u5f00\u59cb\u5c1d\u8bd5 Hook\u3002\u8bf7\u786e\u4fdd\u4f60\u56e2\u961f\u4e2d\u7684\u6bcf\u4e2a\u4eba\u90fd\u613f\u610f\u4f7f\u7528\u5b83\u4eec\u5e76\u4e14\u719f\u77e5\u8fd9\u4efd\u6587\u6863\u4e2d\u7684\u5185\u5bb9\u3002\u6211\u4eec\u4e0d\u63a8\u8350\u7528 Hook \u91cd\u5199\u4f60\u5df2\u6709\u7684 class\uff0c\u9664\u975e\u4f60\u672c\u5c31\u6253\u7b97\u91cd\u5199\u5b83\u4eec\u3002\uff08\u4f8b\u5982\uff1a\u4e3a\u4e86\u4fee\u590dbug\uff09\u3002</p>\n<p>\u4f60\u4e0d\u80fd\u5728 class \u7ec4\u4ef6<em>\u5185\u90e8</em>\u4f7f\u7528 Hook\uff0c\u4f46\u6beb\u65e0\u7591\u95ee\u4f60\u53ef\u4ee5\u5728\u7ec4\u4ef6\u6811\u91cc\u6df7\u5408\u4f7f\u7528 class \u7ec4\u4ef6\u548c\u4f7f\u7528\u4e86 Hook \u7684\u51fd\u6570\u7ec4\u4ef6\u3002\u4e0d\u8bba\u4e00\u4e2a\u7ec4\u4ef6\u662f class \u8fd8\u662f\u4e00\u4e2a\u4f7f\u7528\u4e86 Hook \u7684\u51fd\u6570\uff0c\u90fd\u53ea\u662f\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u5b9e\u73b0\u7ec6\u8282\u800c\u5df2\u3002\u957f\u8fdc\u6765\u770b\uff0c\u6211\u4eec\u671f\u671b Hook \u80fd\u591f\u6210\u4e3a\u4eba\u4eec\u7f16\u5199 React \u7ec4\u4ef6\u7684\u4e3b\u8981\u65b9\u5f0f\u3002</p>\n<h3 id=\"do-hooks-cover-all-use-cases-for-classes\"><a class=\"anchor\" href=\"/react/hooks-faq#do-hooks-cover-all-use-cases-for-classes\"></a>Hook \u80fd\u5426\u8986\u76d6 class \u7684\u6240\u6709\u4f7f\u7528\u573a\u666f\uff1f </h3>\n<p>\u6211\u4eec\u7ed9 Hook \u8bbe\u5b9a\u7684\u76ee\u6807\u662f\u5c3d\u65e9\u8986\u76d6 class \u7684\u6240\u6709\u4f7f\u7528\u573a\u666f\u3002\u76ee\u524d\u6682\u65f6\u8fd8\u6ca1\u6709\u5bf9\u5e94\u4e0d\u5e38\u7528\u7684 <code class=\"language-javascript\">getSnapshotBeforeUpdate</code>\uff0c<code class=\"language-javascript\">getDerivedStateFromError</code> \u548c <code class=\"language-javascript\">componentDidCatch</code> \u751f\u547d\u5468\u671f\u7684 Hook \u7b49\u4ef7\u5199\u6cd5\uff0c\u4f46\u6211\u4eec\u8ba1\u5212\u5c3d\u65e9\u628a\u5b83\u4eec\u52a0\u8fdb\u6765\u3002</p>\n<h3 id=\"do-hooks-replace-render-props-and-higher-order-components\"><a class=\"anchor\" href=\"/react/hooks-faq#do-hooks-replace-render-props-and-higher-order-components\"></a>Hook \u4f1a\u66ff\u4ee3 render props \u548c\u9ad8\u9636\u7ec4\u4ef6\u5417\uff1f </h3>\n<p>\u901a\u5e38\uff0crender props \u548c\u9ad8\u9636\u7ec4\u4ef6\u53ea\u6e32\u67d3\u4e00\u4e2a\u5b50\u8282\u70b9\u3002\u6211\u4eec\u8ba4\u4e3a\u8ba9 Hook \u6765\u670d\u52a1\u8fd9\u4e2a\u4f7f\u7528\u573a\u666f\u66f4\u52a0\u7b80\u5355\u3002\u8fd9\u4e24\u79cd\u6a21\u5f0f\u4ecd\u6709\u7528\u6b66\u4e4b\u5730\uff0c\uff08\u4f8b\u5982\uff0c\u4e00\u4e2a\u865a\u62df\u6eda\u52a8\u6761\u7ec4\u4ef6\u6216\u8bb8\u4f1a\u6709\u4e00\u4e2a <code class=\"language-javascript\">renderItem</code> \u5c5e\u6027\uff0c\u6216\u662f\u4e00\u4e2a\u53ef\u89c1\u7684\u5bb9\u5668\u7ec4\u4ef6\u6216\u8bb8\u4f1a\u6709\u5b83\u81ea\u5df1\u7684 DOM \u7ed3\u6784\uff09\u3002\u4f46\u5728\u5927\u90e8\u5206\u573a\u666f\u4e0b\uff0cHook \u8db3\u591f\u4e86\uff0c\u5e76\u4e14\u80fd\u591f\u5e2e\u52a9\u51cf\u5c11\u5d4c\u5957\u3002</p>\n<h3 id=\"what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router\"><a class=\"anchor\" href=\"/react/hooks-faq#what-do-hooks-mean-for-popular-apis-like-redux-connect-and-react-router\"></a>Hook \u5bf9\u4e8e Redux <code class=\"language-javascript\">connect()</code> \u548c React Router \u7b49\u6d41\u884c\u7684 API \u6765\u8bf4\uff0c\u610f\u5473\u7740\u4ec0\u4e48\uff1f </h3>\n<p>\u4f60\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528\u4e4b\u524d\u4f7f\u7528\u7684 API\uff1b\u5b83\u4eec\u4ecd\u4f1a\u7ee7\u7eed\u6709\u6548\u3002</p>\n<p>React Redux \u4ece v7.1.0 \u5f00\u59cb<a class=\"external-link\" href=\"https://react-redux.js.org/api/hooks\">\u652f\u6301 Hook API</a> \u5e76\u66b4\u9732\u4e86 <code class=\"language-javascript\">useDispatch</code> \u548c <code class=\"language-javascript\">useSelector</code> \u7b49 hook\u3002</p>\n<p>React Router \u4ece v5.1 \u5f00\u59cb<a class=\"external-link\" href=\"https://reacttraining.com/react-router/web/api/Hooks\">\u652f\u6301 hook</a>\u3002</p>\n<p>\u5176\u5b83\u7b2c\u4e09\u5e93\u4e5f\u5c06\u5373\u5c06\u652f\u6301 hook\u3002</p>\n<h3 id=\"do-hooks-work-with-static-typing\"><a class=\"anchor\" href=\"/react/hooks-faq#do-hooks-work-with-static-typing\"></a>Hook \u80fd\u548c\u9759\u6001\u7c7b\u578b\u4e00\u8d77\u7528\u5417\uff1f </h3>\n<p>Hook \u5728\u8bbe\u8ba1\u9636\u6bb5\u5c31\u8003\u8651\u4e86\u9759\u6001\u7c7b\u578b\u7684\u95ee\u9898\u3002\u56e0\u4e3a\u5b83\u4eec\u662f\u51fd\u6570\uff0c\u6240\u4ee5\u5b83\u4eec\u6bd4\u50cf\u9ad8\u9636\u7ec4\u4ef6\u8fd9\u6837\u7684\u6a21\u5f0f\u66f4\u6613\u4e8e\u8bbe\u5b9a\u6b63\u786e\u7684\u7c7b\u578b\u3002\u6700\u65b0\u7248\u7684 Flow \u548c TypeScript React \u5b9a\u4e49\u5df2\u7ecf\u5305\u542b\u4e86\u5bf9 React Hook \u7684\u652f\u6301\u3002</p>\n<p>\u91cd\u8981\u7684\u662f\uff0c\u5728\u4f60\u9700\u8981\u4e25\u683c\u9650\u5236\u7c7b\u578b\u7684\u65f6\u5019\uff0c\u81ea\u5b9a\u4e49 Hook \u80fd\u591f\u5e2e\u4f60\u9650\u5236 React \u7684 API\u3002React \u53ea\u662f\u7ed9\u4f60\u63d0\u4f9b\u4e86\u57fa\u7840\u529f\u80fd\uff0c\u5177\u4f53\u600e\u4e48\u7528\u5c31\u662f\u4f60\u81ea\u5df1\u7684\u4e8b\u4e86\u3002</p>\n<h3 id=\"how-to-test-components-that-use-hooks\"><a class=\"anchor\" href=\"/react/hooks-faq#how-to-test-components-that-use-hooks\"></a>\u5982\u4f55\u6d4b\u8bd5\u4f7f\u7528\u4e86 Hook \u7684\u7ec4\u4ef6\uff1f </h3>\n<p>\u5728 React \u770b\u6765\uff0c\u4e00\u4e2a\u4f7f\u7528\u4e86 Hook \u7684\u7ec4\u4ef6\u53ea\u4e0d\u8fc7\u662f\u4e00\u4e2a\u5e38\u89c4\u7ec4\u4ef6\u3002\u5982\u679c\u4f60\u7684\u6d4b\u8bd5\u65b9\u6848\u4e0d\u4f9d\u8d56\u4e8e React \u7684\u5185\u90e8\u5b9e\u73b0\uff0c\u6d4b\u8bd5\u5e26 Hook \u7684\u7ec4\u4ef6\u5e94\u8be5\u548c\u4f60\u901a\u5e38\u6d4b\u8bd5\u7ec4\u4ef6\u7684\u65b9\u5f0f\u6ca1\u4ec0\u4e48\u5dee\u522b\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p><a href=\"/react/testing-recipes\">\u6d4b\u8bd5\u6280\u5de7</a> \u4e2d\u5305\u542b\u4e86\u8bb8\u591a\u53ef\u4ee5\u62f7\u8d1d\u7c98\u8d34\u7684\u793a\u4f8b\u3002</p>\n</div>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u6211\u4eec\u6709\u8fd9\u4e48\u4e2a\u8ba1\u6570\u5668\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Click me\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u4f1a\u4f7f\u7528 React DOM \u6765\u6d4b\u8bd5\u5b83\u3002\u4e3a\u4e86\u786e\u4fdd\u5b83\u8868\u73b0\u5f97\u548c\u5728\u6d4f\u89c8\u5668\u4e2d\u4e00\u6837\uff0c\u6211\u4eec\u4f1a\u628a\u4ee3\u7801\u6e32\u67d3\u7684\u90e8\u5206\u5305\u88f9\u8d77\u6765\uff0c\u5e76\u66f4\u65b0\u4e3a <a href=\"/react/test-utils#act\"><code class=\"language-javascript\">ReactTestUtils.act()</code></a> \u8c03\u7528:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/client'</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom/test-utils'</span><span class=\"token punctuation\">;</span></span><span class=\"token keyword\">import</span> Counter <span class=\"token keyword\">from</span> <span class=\"token string\">'./Counter'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container<span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'can render and update a counter'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u6d4b\u8bd5\u9996\u6b21\u6e32\u67d3\u548c effect</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 0 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 0 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u6d4b\u8bd5\u7b2c\u4e8c\u6b21\u6e32\u67d3\u548c effect</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    button<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 1 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked 1 times'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5bf9 <code class=\"language-javascript\">act()</code> \u7684\u8c03\u7528\u4e5f\u4f1a\u6e05\u7a7a\u5b83\u4eec\u5185\u90e8\u7684 effect\u3002</p>\n<p>\u5982\u679c\u4f60\u9700\u8981\u6d4b\u8bd5\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook\uff0c\u4f60\u53ef\u4ee5\u5728\u4f60\u7684\u6d4b\u8bd5\u4ee3\u7801\u4e2d\u521b\u5efa\u4e00\u4e2a\u7ec4\u4ef6\u5e76\u5728\u5176\u4e2d\u4f7f\u7528\u4f60\u7684 Hook\u3002\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u6d4b\u8bd5\u4f60\u521a\u5199\u7684\u7ec4\u4ef6\u4e86\u3002</p>\n<p>\u4e3a\u4e86\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u6a21\u677f\u9879\u76ee\uff0c\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <a class=\"external-link\" href=\"https://testing-library.com/react\">React Testing Library</a>\uff0c\u8be5\u9879\u76ee\u65e8\u5728\u9f13\u52b1\u4f60\u6309\u7167\u7ec8\u7aef\u7528\u6237\u4f7f\u7528\u7ec4\u4ef6\u7684\u65b9\u5f0f\u6765\u7f16\u5199\u6d4b\u8bd5\u3002</p>\n<p>\u6b32\u4e86\u89e3\u66f4\u591a\uff0c\u8bf7\u53c2\u9605<a href=\"/react/testing-recipes\">\u6d4b\u8bd5\u6280\u5de7</a>\u4e00\u8282\u3002</p>\n<h3 id=\"what-exactly-do-the-lint-rules-enforce\"><a class=\"anchor\" href=\"/react/hooks-faq#what-exactly-do-the-lint-rules-enforce\"></a><a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\">lint \u89c4\u5219</a>\u5177\u4f53\u5f3a\u5236\u4e86\u54ea\u4e9b\u5185\u5bb9\uff1f </h3>\n<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\">ESLint \u63d2\u4ef6</a> \u6765\u5f3a\u5236 <a href=\"/react/hooks-rules\">Hook \u89c4\u8303</a> \u4ee5\u907f\u514d Bug\u3002\u5b83\u5047\u8bbe\u4efb\u4f55\u4ee5 \u300c<code class=\"language-javascript\">use</code>\u300d \u5f00\u5934\u5e76\u7d27\u8ddf\u7740\u4e00\u4e2a\u5927\u5199\u5b57\u6bcd\u7684\u51fd\u6570\u5c31\u662f\u4e00\u4e2a Hook\u3002\u6211\u4eec\u77e5\u9053\u8fd9\u79cd\u542f\u53d1\u65b9\u5f0f\u5e76\u4e0d\u5b8c\u7f8e\uff0c\u751a\u81f3\u5b58\u5728\u4e00\u4e9b\u5047\u9633\u6027\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u4e00\u4e2a\u5168\u751f\u6001\u8303\u56f4\u7684\u7ea6\u5b9a\u5c31\u6ca1\u6cd5\u8ba9 Hook \u5f88\u597d\u7684\u5de5\u4f5c \u2014\u2014 \u800c\u540d\u5b57\u592a\u957f\u4f1a\u8ba9\u4eba\u8981\u4e48\u4e0d\u613f\u610f\u91c7\u7528 Hook\uff0c\u8981\u4e48\u4e0d\u613f\u610f\u9075\u5b88\u7ea6\u5b9a\u3002</p>\n<p>\u89c4\u8303\u5c24\u5176\u5f3a\u5236\u4e86\u4ee5\u4e0b\u5185\u5bb9\uff1a</p>\n<ul>\n<li>\u5bf9 Hook \u7684\u8c03\u7528\u8981\u4e48\u5728\u4e00\u4e2a<code class=\"language-javascript\">\u5927\u9a7c\u5cf0\u6cd5</code>\u547d\u540d\u7684\u51fd\u6570\uff08\u89c6\u4f5c\u4e00\u4e2a\u7ec4\u4ef6\uff09\u5185\u90e8\uff0c\u8981\u4e48\u5728\u53e6\u4e00\u4e2a <code class=\"language-javascript\">useSomething</code> \u51fd\u6570\uff08\u89c6\u4f5c\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook\uff09\u4e2d\u3002</li>\n<li>Hook \u5728\u6bcf\u6b21\u6e32\u67d3\u65f6\u90fd\u6309\u7167\u76f8\u540c\u7684\u987a\u5e8f\u88ab\u8c03\u7528\u3002</li>\n</ul>\n<p>\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u542f\u53d1\u65b9\u5f0f\uff0c\u4f46\u968f\u7740\u6211\u4eec\u4e0d\u65ad\u5730\u8c03\u4f18\u4ee5\u5728\u53d1\u73b0 Bug \u548c\u907f\u514d\u5047\u9633\u6027\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\uff0c\u8fd9\u4e9b\u65b9\u5f0f\u968f\u65f6\u4f1a\u6539\u53d8\u3002</p>\n<h2 id=\"from-classes-to-hooks\"><a class=\"anchor\" href=\"/react/hooks-faq#from-classes-to-hooks\"></a>\u4ece Class \u8fc1\u79fb\u5230 Hook </h2>\n<h3 id=\"how-do-lifecycle-methods-correspond-to-hooks\"><a class=\"anchor\" href=\"/react/hooks-faq#how-do-lifecycle-methods-correspond-to-hooks\"></a>\u751f\u547d\u5468\u671f\u65b9\u6cd5\u8981\u5982\u4f55\u5bf9\u5e94\u5230 Hook\uff1f </h3>\n<ul>\n<li><code class=\"language-javascript\">constructor</code>\uff1a\u51fd\u6570\u7ec4\u4ef6\u4e0d\u9700\u8981\u6784\u9020\u51fd\u6570\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <a href=\"/react/hooks-reference#usestate\"><code class=\"language-javascript\">useState</code></a> \u6765\u521d\u59cb\u5316 state\u3002\u5982\u679c\u8ba1\u7b97\u7684\u4ee3\u4ef7\u6bd4\u8f83\u6602\u8d35\uff0c\u4f60\u53ef\u4ee5\u4f20\u4e00\u4e2a\u51fd\u6570\u7ed9 <code class=\"language-javascript\">useState</code>\u3002</li>\n<li><code class=\"language-javascript\">getDerivedStateFromProps</code>\uff1a\u6539\u4e3a <a href=\"/react/hooks-faq#how-do-i-implement-getderivedstatefromprops\">\u5728\u6e32\u67d3\u65f6</a> \u5b89\u6392\u4e00\u6b21\u66f4\u65b0\u3002</li>\n<li><code class=\"language-javascript\">shouldComponentUpdate</code>\uff1a\u8be6\u89c1 <a href=\"/react/hooks-faq#how-do-i-implement-shouldcomponentupdate\">\u4e0b\u65b9</a> <code class=\"language-javascript\">React.memo</code>.</li>\n<li><code class=\"language-javascript\">render</code>\uff1a\u8fd9\u662f\u51fd\u6570\u7ec4\u4ef6\u4f53\u672c\u8eab\u3002</li>\n<li><code class=\"language-javascript\">componentDidMount</code>, <code class=\"language-javascript\">componentDidUpdate</code>, <code class=\"language-javascript\">componentWillUnmount</code>\uff1a<a href=\"/react/hooks-reference#useeffect\"><code class=\"language-javascript\">useEffect</code> Hook</a> \u53ef\u4ee5\u8868\u8fbe\u6240\u6709\u8fd9\u4e9b(\u5305\u62ec <a href=\"/react/hooks-faq#can-i-skip-an-effect-on-updates\">\u4e0d\u90a3\u4e48</a> <a href=\"/react/hooks-faq#can-i-run-an-effect-only-on-updates\">\u5e38\u89c1</a> \u7684\u573a\u666f)\u7684\u7ec4\u5408\u3002</li>\n<li><code class=\"language-javascript\">getSnapshotBeforeUpdate</code>\uff0c<code class=\"language-javascript\">componentDidCatch</code> \u4ee5\u53ca <code class=\"language-javascript\">getDerivedStateFromError</code>\uff1a\u76ee\u524d\u8fd8\u6ca1\u6709\u8fd9\u4e9b\u65b9\u6cd5\u7684 Hook \u7b49\u4ef7\u5199\u6cd5\uff0c\u4f46\u5f88\u5feb\u4f1a\u88ab\u6dfb\u52a0\u3002</li>\n</ul>\n<h3 id=\"how-can-i-do-data-fetching-with-hooks\"><a class=\"anchor\" href=\"/react/hooks-faq#how-can-i-do-data-fetching-with-hooks\"></a>\u6211\u8be5\u5982\u4f55\u4f7f\u7528 Hook \u8fdb\u884c\u6570\u636e\u83b7\u53d6\uff1f </h3>\n<p>\u8be5 <a class=\"external-link\" href=\"https://codesandbox.io/s/jvvkoo8pq3\">demo</a> \u4f1a\u5e2e\u52a9\u4f60\u5f00\u59cb\u7406\u89e3\u3002\u6b32\u4e86\u89e3\u66f4\u591a\uff0c\u8bf7\u67e5\u9605 <a class=\"external-link\" href=\"https://www.robinwieruch.de/react-hooks-fetch-data/\">\u6b64\u6587\u7ae0</a> \u6765\u4e86\u89e3\u5982\u4f55\u4f7f\u7528 Hook \u8fdb\u884c\u6570\u636e\u83b7\u53d6\u3002</p>\n<h3 id=\"is-there-something-like-instance-variables\"><a class=\"anchor\" href=\"/react/hooks-faq#is-there-something-like-instance-variables\"></a>\u6709\u7c7b\u4f3c\u5b9e\u4f8b\u53d8\u91cf\u7684\u4e1c\u897f\u5417\uff1f </h3>\n<p>\u6709\uff01<a href=\"/react/hooks-reference#useref\"><code class=\"language-javascript\">useRef()</code></a> Hook \u4e0d\u4ec5\u53ef\u4ee5\u7528\u4e8e DOM refs\u3002\u300cref\u300d \u5bf9\u8c61\u662f\u4e00\u4e2a <code class=\"language-javascript\">current</code> \u5c5e\u6027\u53ef\u53d8\u4e14\u53ef\u4ee5\u5bb9\u7eb3\u4efb\u610f\u503c\u7684\u901a\u7528\u5bb9\u5668\uff0c\u7c7b\u4f3c\u4e8e\u4e00\u4e2a class \u7684\u5b9e\u4f8b\u5c5e\u6027\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728 <code class=\"language-javascript\">useEffect</code> \u5185\u90e8\u5bf9\u5176\u8fdb\u884c\u5199\u5165:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Timer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> intervalRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    intervalRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>intervalRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u6211\u4eec\u53ea\u662f\u60f3\u8bbe\u5b9a\u4e00\u4e2a\u5faa\u73af\u5b9a\u65f6\u5668\uff0c\u6211\u4eec\u4e0d\u4f1a\u9700\u8981\u8fd9\u4e2a ref\uff08<code class=\"language-javascript\">id</code> \u53ef\u4ee5\u662f\u5728 effect \u672c\u5730\u7684\uff09\uff0c\u4f46\u5982\u679c\u6211\u4eec\u60f3\u8981\u5728\u4e00\u4e2a\u4e8b\u4ef6\u5904\u7406\u5668\u4e2d\u6e05\u9664\u8fd9\u4e2a\u5faa\u73af\u5b9a\u65f6\u5668\u7684\u8bdd\u8fd9\u5c31\u5f88\u6709\u7528\u4e86\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token comment\">// ...</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleCancelClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>intervalRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u4f60\u53ef\u4ee5\u8ba4\u4e3a refs \u5c31\u50cf\u662f\u4e00\u4e2a class \u7684\u5b9e\u4f8b\u53d8\u91cf\u3002\u9664\u975e\u4f60\u6b63\u5728\u505a <a href=\"/react/hooks-faq#how-to-create-expensive-objects-lazily\">\u61d2\u52a0\u8f7d</a>\uff0c\u5426\u5219\u907f\u514d\u5728\u6e32\u67d3\u671f\u95f4\u8bbe\u7f6e refs \u2014\u2014 \u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u610f\u5916\u7684\u884c\u4e3a\u3002\u76f8\u53cd\u7684\uff0c\u901a\u5e38\u4f60\u5e94\u8be5\u5728\u4e8b\u4ef6\u5904\u7406\u5668\u548c effects \u4e2d\u4fee\u6539 refs\u3002</p>\n<h3 id=\"should-i-use-one-or-many-state-variables\"><a class=\"anchor\" href=\"/react/hooks-faq#should-i-use-one-or-many-state-variables\"></a>\u6211\u5e94\u8be5\u4f7f\u7528\u5355\u4e2a\u8fd8\u662f\u591a\u4e2a state \u53d8\u91cf\uff1f </h3>\n<p>\u5982\u679c\u4f60\u4e4b\u524d\u7528\u8fc7 class\uff0c\u4f60\u6216\u8bb8\u4f1a\u8bd5\u56fe\u603b\u662f\u5728\u4e00\u6b21 <code class=\"language-javascript\">useState()</code> \u8c03\u7528\u4e2d\u4f20\u5165\u4e00\u4e2a\u5305\u542b\u4e86\u6240\u6709 state \u7684\u5bf9\u8c61\u3002\u5982\u679c\u4f60\u613f\u610f\u7684\u8bdd\u4f60\u53ef\u4ee5\u8fd9\u4e48\u505a\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u8ddf\u8e2a\u9f20\u6807\u79fb\u52a8\u7684\u7ec4\u4ef6\u7684\u4f8b\u5b50\u3002\u6211\u4eec\u5728\u672c\u5730 state \u4e2d\u8bb0\u5f55\u5b83\u7684\u4f4d\u7f6e\u548c\u5c3a\u5bf8\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\u5047\u8bbe\u6211\u4eec\u60f3\u8981\u7f16\u5199\u4e00\u4e9b\u903b\u8f91\u4ee5\u4fbf\u5728\u7528\u6237\u79fb\u52a8\u9f20\u6807\u65f6\u6539\u53d8 <code class=\"language-javascript\">left</code> \u548c <code class=\"language-javascript\">top</code>\u3002\u6ce8\u610f\u5230\u6211\u4eec\u662f\u5982\u4f55\u5fc5\u987b\u624b\u52a8\u628a\u8fd9\u4e9b\u5b57\u6bb5\u5408\u5e76\u5230\u4e4b\u524d\u7684 state \u5bf9\u8c61\u7684\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleWindowMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// \u5c55\u5f00 \u300c...state\u300d \u4ee5\u786e\u4fdd\u6211\u4eec\u6ca1\u6709 \u300c\u4e22\u5931\u300d width \u548c height</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>pageX<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>pageY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// \u6ce8\u610f\uff1a\u8fd9\u662f\u4e2a\u7b80\u5316\u7248\u7684\u5b9e\u73b0</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mousemove'</span><span class=\"token punctuation\">,</span> handleWindowMouseMove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mousemove'</span><span class=\"token punctuation\">,</span> handleWindowMouseMove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u8fd9\u662f\u56e0\u4e3a\u5f53\u6211\u4eec\u66f4\u65b0\u4e00\u4e2a state \u53d8\u91cf\uff0c\u6211\u4eec\u4f1a <em>\u66ff\u6362</em> \u5b83\u7684\u503c\u3002\u8fd9\u548c class \u4e2d\u7684 <code class=\"language-javascript\">this.setState</code> \u4e0d\u4e00\u6837\uff0c\u540e\u8005\u4f1a\u628a\u66f4\u65b0\u540e\u7684\u5b57\u6bb5 <em>\u5408\u5e76</em> \u5165\u5bf9\u8c61\u4e2d\u3002</p>\n<p>\u5982\u679c\u4f60\u8fd8\u6000\u5ff5\u81ea\u52a8\u5408\u5e76\uff0c\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684 <code class=\"language-javascript\">useLegacyState</code> Hook \u6765\u5408\u5e76\u5bf9\u8c61 state \u7684\u66f4\u65b0\u3002\u7136\u800c\uff0c<strong>\u6211\u4eec\u63a8\u8350\u628a state \u5207\u5206\u6210\u591a\u4e2a state \u53d8\u91cf\uff0c\u6bcf\u4e2a\u53d8\u91cf\u5305\u542b\u7684\u4e0d\u540c\u503c\u4f1a\u5728\u540c\u65f6\u53d1\u751f\u53d8\u5316\u3002</strong></p>\n<p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u7ec4\u4ef6\u7684 state \u62c6\u5206\u4e3a <code class=\"language-javascript\">position</code> \u548c <code class=\"language-javascript\">size</code> \u4e24\u4e2a\u5bf9\u8c61\uff0c\u5e76\u6c38\u8fdc\u4ee5\u975e\u5408\u5e76\u7684\u65b9\u5f0f\u53bb\u66ff\u6362 <code class=\"language-javascript\">position</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">,</span> setPosition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>size<span class=\"token punctuation\">,</span> setSize<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleWindowMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>pageX<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>pageY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u628a\u72ec\u7acb\u7684 state \u53d8\u91cf\u62c6\u5206\u5f00\u8fd8\u6709\u53e6\u5916\u7684\u597d\u5904\u3002\u8fd9\u4f7f\u5f97\u540e\u671f\u628a\u4e00\u4e9b\u76f8\u5173\u7684\u903b\u8f91\u62bd\u53d6\u5230\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook \u53d8\u5f97\u5bb9\u6613\uff0c\u6bd4\u5982\u8bf4:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Box</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> position <span class=\"token operator\">=</span> <span class=\"token function\">useWindowPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>size<span class=\"token punctuation\">,</span> setSize<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useWindowPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>position<span class=\"token punctuation\">,</span> setPosition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">left</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">top</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> position<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\u770b\u6211\u4eec\u662f\u5982\u4f55\u505a\u5230\u4e0d\u6539\u52a8\u4ee3\u7801\u5c31\u628a\u5bf9 <code class=\"language-javascript\">position</code> \u8fd9\u4e2a state \u53d8\u91cf\u7684 <code class=\"language-javascript\">useState</code> \u8c03\u7528\u548c\u76f8\u5173\u7684 effect \u79fb\u52a8\u5230\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook \u7684\u3002\u5982\u679c\u6240\u6709\u7684 state \u90fd\u5b58\u5728\u540c\u4e00\u4e2a\u5bf9\u8c61\u4e2d\uff0c\u60f3\u8981\u62bd\u53d6\u51fa\u6765\u5c31\u6bd4\u8f83\u96be\u4e86\u3002</p>\n<p>\u628a\u6240\u6709 state \u90fd\u653e\u5728\u540c\u4e00\u4e2a <code class=\"language-javascript\">useState</code> \u8c03\u7528\u4e2d\uff0c\u6216\u662f\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u90fd\u5bf9\u5e94\u4e00\u4e2a <code class=\"language-javascript\">useState</code> \u8c03\u7528\uff0c\u8fd9\u4e24\u65b9\u5f0f\u90fd\u80fd\u8dd1\u901a\u3002\u5f53\u4f60\u5728\u8fd9\u4e24\u4e2a\u6781\u7aef\u4e4b\u95f4\u627e\u5230\u5e73\u8861\uff0c\u7136\u540e\u628a\u76f8\u5173 state \u7ec4\u5408\u5230\u51e0\u4e2a\u72ec\u7acb\u7684 state \u53d8\u91cf\u65f6\uff0c\u7ec4\u4ef6\u5c31\u4f1a\u66f4\u52a0\u7684\u53ef\u8bfb\u3002\u5982\u679c state \u7684\u903b\u8f91\u5f00\u59cb\u53d8\u5f97\u590d\u6742\uff0c\u6211\u4eec\u63a8\u8350 <a href=\"/react/hooks-reference#usereducer\">\u7528 reducer \u6765\u7ba1\u7406\u5b83</a>\uff0c\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49 Hook\u3002</p>\n<h3 id=\"can-i-run-an-effect-only-on-updates\"><a class=\"anchor\" href=\"/react/hooks-faq#can-i-run-an-effect-only-on-updates\"></a>\u6211\u53ef\u4ee5\u53ea\u5728\u66f4\u65b0\u65f6\u8fd0\u884c effect \u5417\uff1f </h3>\n<p>\u8fd9\u662f\u4e2a\u6bd4\u8f83\u7f55\u89c1\u7684\u4f7f\u7528\u573a\u666f\u3002\u5982\u679c\u4f60\u9700\u8981\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5 <a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">\u4f7f\u7528\u4e00\u4e2a\u53ef\u53d8\u7684 ref</a> \u624b\u52a8\u5b58\u50a8\u4e00\u4e2a\u5e03\u5c14\u503c\u6765\u8868\u793a\u662f\u9996\u6b21\u6e32\u67d3\u8fd8\u662f\u540e\u7eed\u6e32\u67d3\uff0c\u7136\u540e\u5728\u4f60\u7684 effect \u4e2d\u68c0\u67e5\u8fd9\u4e2a\u6807\u8bc6\u3002\uff08\u5982\u679c\u4f60\u53d1\u73b0\u81ea\u5df1\u7ecf\u5e38\u5728\u8fd9\u4e48\u505a\uff0c\u4f60\u53ef\u4ee5\u4e3a\u4e4b\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook\u3002\uff09</p>\n<h3 id=\"how-to-get-the-previous-props-or-state\"><a class=\"anchor\" href=\"/react/hooks-faq#how-to-get-the-previous-props-or-state\"></a>\u5982\u4f55\u83b7\u53d6\u4e0a\u4e00\u8f6e\u7684 props \u6216 state\uff1f </h3>\n<p>\u5728\u4ee5\u4e0b\u4e24\u79cd\u573a\u666f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u80fd\u4f1a\u9700\u8981\u83b7\u53d6\u4e0a\u4e00\u8f6e\u7684 props \u6216 state\u3002</p>\n<p>\u6709\u65f6\uff0c\u4f60\u9700\u8981\u83b7\u53d6\u4e4b\u524d\u7684 props \u6765 <strong>\u8fdb\u884c\u526f\u4f5c\u7528\u7684\u6e05\u7406</strong>\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u6709\u8fd9\u6837\u4e00\u4e2a\u526f\u4f5c\u7528\uff0c\u4f9d\u8d56 <code class=\"language-javascript\">userId</code> props \u6765\u8ba2\u9605 socket\u3002\u5982\u679c <code class=\"language-javascript\">userId</code> \u53d1\u751f\u4e86\u53d8\u5316\uff0c\u4f60\u9700\u8981\u53d6\u6d88 <strong>\u4e4b\u524d</strong> <code class=\"language-javascript\">userId</code> \u7684\u8ba2\u9605\uff0c\u518d\u8fdb\u884c\u540e\u7eed\u8ba2\u9605\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u65e0\u9700\u505a\u989d\u5916\u64cd\u4f5c\u5373\u53ef\u5b9e\u73b0\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToSocket</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromSocket</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>userId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u5728\u4e0a\u8ff0\u793a\u4f8b\u4e2d\uff0c\u5982\u679c <code class=\"language-javascript\">userId</code> \u4ece <code class=\"language-javascript\">3</code> \u53d8\u4e3a <code class=\"language-javascript\">4</code>\uff0c<code class=\"language-javascript\">ChatAPI.unsubscribeFromSocket(3)</code> \u5c06\u4f1a\u4f18\u5148\u8fd0\u884c\uff0c\u7136\u540e\u624d\u4f1a\u6267\u884c <code class=\"language-javascript\">ChatAPI.subscribeToSocket(4)</code>\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u6ca1\u5fc5\u8981\u83b7\u53d6\u4e4b\u524d\u7684 <code class=\"language-javascript\">userId</code>\uff0c\u56e0\u4e3a\u6e05\u7406\u51fd\u6570\u5c06\u5728\u95ed\u5305\u4e2d\u6355\u83b7\u5b83\uff0c</p>\n<p>\u5176\u4ed6\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u9700\u8981 <strong>\u6839\u636e props \u6216\u5176\u4ed6 state \u7684\u53d8\u5316\u6765\u8c03\u6574 state</strong>\u3002\u4f46\u8fd9\u4e00\u822c\u5e76\u4e0d\u5e38\u7528\uff0c\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u8bf4\u660e\u4f60\u4ee3\u7801\u4e2d\u5b58\u5728\u91cd\u590d\u6216\u591a\u4f59\u7684 state\u3002\u7136\u800c\uff0c\u5982\u679c\u4f60\u9700\u8981\u5e94\u5bf9\u8fd9\u79cd\u573a\u666f\uff0c\u4f60\u53ef\u4ee5\u5728 <a href=\"/react/hooks-faq#how-do-i-implement-getderivedstatefromprops\">\u72b6\u6001\u4e2d\u5b58\u50a8\u4e4b\u524d\u7684 state \u6216 props\uff0c\u5e76\u5728\u6e32\u67d3\u65f6\u66f4\u65b0\u5b83\u4eec</a>\u3002</p>\n<p>\u6211\u4eec\u4e4b\u524d\u66fe\u5efa\u8bae\u4f7f\u7528 <code class=\"language-javascript\">usePrevious</code> \u7684\u81ea\u5b9a\u4e49 Hook \u6765\u4fdd\u6301\u524d\u503c\u3002\u7136\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u5927\u591a\u6570\u7528\u4f8b\uff0c\u90fd\u5c5e\u4e8e\u4e0a\u8ff0\u4e24\u79cd\u573a\u666f\u3002\u5982\u679c\u4f60\u7684\u7528\u4f8b\u4e0e\u4e0a\u8ff0\u4e24\u79cd\u60c5\u51b5\u4e0d\u540c\uff0c\u4f60\u53ef\u4ee5\u5728 <a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">Ref \u4e2d\u5bf9\u8be5\u503c\u8fdb\u884c\u5b58\u50a8</a> \u5e76\u5728\u9700\u8981\u65f6\u624b\u52a8\u66f4\u65b0\u5b83\u3002\u6ce8\u610f\uff0c\u5e94\u907f\u514d\u5728\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u8bfb\u53d6\u548c\u66f4\u65b0 refs\uff0c\u56e0\u4e3a\u8fd9\u4f7f\u5f97\u4f60\u7ec4\u4ef6\u7684\u884c\u4e3a\u96be\u4ee5\u9884\u6d4b\uff0c\u4e14\u96be\u4ee5\u7406\u89e3\u3002</p>\n<h3 id=\"why-am-i-seeing-stale-props-or-state-inside-my-function\"><a class=\"anchor\" href=\"/react/hooks-faq#why-am-i-seeing-stale-props-or-state-inside-my-function\"></a>\u4e3a\u4ec0\u4e48\u6211\u4f1a\u5728\u6211\u7684\u51fd\u6570\u4e2d\u770b\u5230\u9648\u65e7\u7684 props \u548c state \uff1f </h3>\n<p>\u7ec4\u4ef6\u5185\u90e8\u7684\u4efb\u4f55\u51fd\u6570\uff0c\u5305\u62ec\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u548c effect\uff0c\u90fd\u662f\u4ece\u5b83\u88ab\u521b\u5efa\u7684\u90a3\u6b21\u6e32\u67d3\u4e2d\u88ab\u300c\u770b\u5230\u300d\u7684\u3002\u4f8b\u5982\uff0c\u8003\u8651\u8fd9\u6837\u7684\u4ee3\u7801\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleAlertClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'You clicked on: '</span> <span class=\"token operator\">+</span> count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Click me\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleAlertClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Show alert\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4f60\u5148\u70b9\u51fb\u300cShow alert\u300d\u7136\u540e\u589e\u52a0\u8ba1\u6570\u5668\u7684\u8ba1\u6570\uff0c\u90a3\u8fd9\u4e2a alert \u4f1a\u663e\u793a<strong>\u5728\u4f60\u70b9\u51fb\u300eShow alert\u300f\u6309\u94ae\u65f6</strong>\u7684 <code class=\"language-javascript\">count</code> \u53d8\u91cf\u3002\u8fd9\u907f\u514d\u4e86\u90a3\u4e9b\u56e0\u4e3a\u5047\u8bbe props \u548c state \u6ca1\u6709\u6539\u53d8\u7684\u4ee3\u7801\u5f15\u8d77\u95ee\u9898\u3002</p>\n<p>\u5982\u679c\u4f60\u523b\u610f\u5730\u60f3\u8981\u4ece\u67d0\u4e9b\u5f02\u6b65\u56de\u8c03\u4e2d\u8bfb\u53d6 <em>\u6700\u65b0\u7684</em> state\uff0c\u4f60\u53ef\u4ee5\u7528 <a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">\u4e00\u4e2a ref</a> \u6765\u4fdd\u5b58\u5b83\uff0c\u4fee\u6539\u5b83\uff0c\u5e76\u4ece\u4e2d\u8bfb\u53d6\u3002</p>\n<p>\u6700\u540e\uff0c\u4f60\u770b\u5230\u9648\u65e7\u7684 props \u548c state \u7684\u53e6\u4e00\u4e2a\u53ef\u80fd\u7684\u539f\u56e0\uff0c\u662f\u4f60\u4f7f\u7528\u4e86\u300c\u4f9d\u8d56\u6570\u7ec4\u300d\u4f18\u5316\u4f46\u6ca1\u6709\u6b63\u786e\u5730\u6307\u5b9a\u6240\u6709\u7684\u4f9d\u8d56\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4e00\u4e2a effect \u6307\u5b9a\u4e86 <code class=\"language-javascript\">[]</code> \u4f5c\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4f46\u5728\u5185\u90e8\u8bfb\u53d6\u4e86 <code class=\"language-javascript\">someProp</code>\uff0c\u5b83\u4f1a\u4e00\u76f4\u300c\u770b\u5230\u300d <code class=\"language-javascript\">someProp</code> \u7684\u521d\u59cb\u503c\u3002\u89e3\u51b3\u529e\u6cd5\u662f\u8981\u4e48\u79fb\u9664\u4f9d\u8d56\u6570\u7ec4\uff0c\u8981\u4e48\u4fee\u6b63\u5b83\u3002 \u8fd9\u91cc\u4ecb\u7ecd\u4e86 <a href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\">\u4f60\u8be5\u5982\u4f55\u5904\u7406\u51fd\u6570</a>\uff0c\u800c\u8fd9\u91cc\u4ecb\u7ecd\u4e86\u5173\u4e8e\u5982\u4f55\u51cf\u5c11 effect \u7684\u8fd0\u884c\u800c\u4e0d\u5fc5\u9519\u8bef\u7684\u8df3\u8fc7\u4f9d\u8d56\u7684 <a href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\">\u4e00\u4e9b\u5e38\u89c1\u7b56\u7565</a>\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/14920\"><code class=\"language-javascript\">exhaustive-deps</code></a> ESLint \u89c4\u5219\u4f5c\u4e3a <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u5305\u7684\u4e00\u90e8\u5206\u3002\u5b83\u4f1a\u5728\u4f9d\u8d56\u88ab\u9519\u8bef\u6307\u5b9a\u65f6\u53d1\u51fa\u8b66\u544a\uff0c\u5e76\u7ed9\u51fa\u4fee\u590d\u5efa\u8bae\u3002</p>\n</div>\n<h3 id=\"how-do-i-implement-getderivedstatefromprops\"><a class=\"anchor\" href=\"/react/hooks-faq#how-do-i-implement-getderivedstatefromprops\"></a>\u6211\u8be5\u5982\u4f55\u5b9e\u73b0 <code class=\"language-javascript\">getDerivedStateFromProps</code>\uff1f </h3>\n<p>\u5c3d\u7ba1\u4f60\u53ef\u80fd <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2018/06/07/you-probably-dont-need-derived-state.html\">\u4e0d\u9700\u8981\u5b83</a>\uff0c\u4f46\u5728\u4e00\u4e9b\u7f55\u89c1\u7684\u4f60\u9700\u8981\u7528\u5230\u7684\u573a\u666f\u4e0b\uff08\u6bd4\u5982\u5b9e\u73b0\u4e00\u4e2a <code class=\"language-javascript\">&lt;Transition&gt;</code> \u7ec4\u4ef6\uff09\uff0c\u4f60\u53ef\u4ee5\u5728\u6e32\u67d3\u8fc7\u7a0b\u4e2d\u66f4\u65b0 state \u3002React \u4f1a\u7acb\u5373\u9000\u51fa\u7b2c\u4e00\u6b21\u6e32\u67d3\u5e76\u7528\u66f4\u65b0\u540e\u7684 state \u91cd\u65b0\u8fd0\u884c\u7ec4\u4ef6\u4ee5\u907f\u514d\u8017\u8d39\u592a\u591a\u6027\u80fd\u3002</p>\n<p>\u8fd9\u91cc\u6211\u4eec\u628a <code class=\"language-javascript\">row</code> prop \u4e0a\u4e00\u8f6e\u7684\u503c\u5b58\u5728\u4e00\u4e2a state \u53d8\u91cf\u4e2d\u4ee5\u4fbf\u6bd4\u8f83\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ScrollView</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>row<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isScrollingDown<span class=\"token punctuation\">,</span> setIsScrollingDown<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>prevRow<span class=\"token punctuation\">,</span> setPrevRow<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>row <span class=\"token operator\">!==</span> prevRow<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Row \u81ea\u4e0a\u6b21\u6e32\u67d3\u4ee5\u6765\u53d1\u751f\u8fc7\u6539\u53d8\u3002\u66f4\u65b0 isScrollingDown\u3002</span>\n    <span class=\"token function\">setIsScrollingDown</span><span class=\"token punctuation\">(</span>prevRow <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> row <span class=\"token operator\">&gt;</span> prevRow<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setPrevRow</span><span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Scrolling down: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>isScrollingDown<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u521d\u770b\u8fd9\u6216\u8bb8\u6709\u70b9\u5947\u602a\uff0c\u4f46\u6e32\u67d3\u671f\u95f4\u7684\u4e00\u6b21\u66f4\u65b0\u6070\u6070\u5c31\u662f <code class=\"language-javascript\">getDerivedStateFromProps</code> \u4e00\u76f4\u4ee5\u6765\u7684\u6982\u5ff5\u3002</p>\n<h3 id=\"is-there-something-like-forceupdate\"><a class=\"anchor\" href=\"/react/hooks-faq#is-there-something-like-forceupdate\"></a>\u6709\u7c7b\u4f3c forceUpdate \u7684\u4e1c\u897f\u5417\uff1f </h3>\n<p>\u5982\u679c\u524d\u540e\u4e24\u6b21\u7684\u503c\u76f8\u540c\uff0c<code class=\"language-javascript\">useState</code> \u548c <code class=\"language-javascript\">useReducer</code> Hook <a href=\"/react/hooks-reference#bailing-out-of-a-state-update\">\u90fd\u4f1a\u653e\u5f03\u66f4\u65b0</a>\u3002\u539f\u5730\u4fee\u6539 state \u5e76\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u4e0d\u4f1a\u5f15\u8d77\u91cd\u65b0\u6e32\u67d3\u3002</p>\n<p>\u901a\u5e38\uff0c\u4f60\u4e0d\u5e94\u8be5\u5728 React \u4e2d\u4fee\u6539\u672c\u5730 state\u3002\u7136\u800c\uff0c\u4f5c\u4e3a\u4e00\u6761\u51fa\u8def\uff0c\u4f60\u53ef\u4ee5\u7528\u4e00\u4e2a\u589e\u957f\u7684\u8ba1\u6570\u5668\u6765\u5728 state \u6ca1\u53d8\u7684\u65f6\u5019\u4f9d\u7136\u5f3a\u5236\u4e00\u6b21\u91cd\u65b0\u6e32\u67d3\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>ignored<span class=\"token punctuation\">,</span> forceUpdate<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token operator\">=&gt;</span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">forceUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u53ef\u80fd\u7684\u8bdd\u5c3d\u91cf\u907f\u514d\u8fd9\u79cd\u6a21\u5f0f\u3002</p>\n<h3 id=\"can-i-make-a-ref-to-a-function-component\"><a class=\"anchor\" href=\"/react/hooks-faq#can-i-make-a-ref-to-a-function-component\"></a>\u6211\u53ef\u4ee5\u5f15\u7528\u4e00\u4e2a\u51fd\u6570\u7ec4\u4ef6\u5417\uff1f </h3>\n<p>\u5c3d\u7ba1\u4f60\u4e0d\u5e94\u8be5\u7ecf\u5e38\u9700\u8981\u8fd9\u4e48\u505a\uff0c\u4f46\u4f60\u53ef\u4ee5\u901a\u8fc7 <a href=\"/react/hooks-reference#useimperativehandle\"><code class=\"language-javascript\">useImperativeHandle</code></a> Hook \u66b4\u9732\u4e00\u4e9b\u547d\u4ee4\u5f0f\u7684\u65b9\u6cd5\u7ed9\u7236\u7ec4\u4ef6\u3002</p>\n<h3 id=\"how-can-i-measure-a-dom-node\"><a class=\"anchor\" href=\"/react/hooks-faq#how-can-i-measure-a-dom-node\"></a>\u6211\u8be5\u5982\u4f55\u6d4b\u91cf DOM \u8282\u70b9\uff1f </h3>\n<p>\u83b7\u53d6 DOM \u8282\u70b9\u7684\u4f4d\u7f6e\u6216\u662f\u5927\u5c0f\u7684\u57fa\u672c\u65b9\u5f0f\u662f\u4f7f\u7528 <a href=\"/react/refs-and-the-dom#callback-refs\">callback ref</a>\u3002\u6bcf\u5f53 ref \u88ab\u9644\u52a0\u5230\u4e00\u4e2a\u53e6\u4e00\u4e2a\u8282\u70b9\uff0cReact \u5c31\u4f1a\u8c03\u7528 callback\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a <a class=\"external-link\" href=\"https://codesandbox.io/s/l7m0v5x4v9\">\u5c0f demo</a>:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">MeasureExample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>height<span class=\"token punctuation\">,</span> setHeight<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> measuredRef <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setHeight</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>measuredRef<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">The above header is </span><span class=\"token punctuation\">{</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">px tall</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u8fd9\u4e2a\u6848\u4f8b\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u9009\u62e9\u4f7f\u7528 <code class=\"language-javascript\">useRef</code>\uff0c\u56e0\u4e3a\u5f53 ref \u662f\u4e00\u4e2a\u5bf9\u8c61\u65f6\u5b83\u5e76\u4e0d\u4f1a\u628a\u5f53\u524d ref \u7684\u503c\u7684 <em>\u53d8\u5316</em> \u901a\u77e5\u5230\u6211\u4eec\u3002\u4f7f\u7528 callback ref \u53ef\u4ee5\u786e\u4fdd <a class=\"external-link\" href=\"https://codesandbox.io/s/818zzk8m78\">\u5373\u4fbf\u5b50\u7ec4\u4ef6\u5ef6\u8fdf\u663e\u793a\u88ab\u6d4b\u91cf\u7684\u8282\u70b9</a> (\u6bd4\u5982\u4e3a\u4e86\u54cd\u5e94\u4e00\u6b21\u70b9\u51fb)\uff0c\u6211\u4eec\u4f9d\u7136\u80fd\u591f\u5728\u7236\u7ec4\u4ef6\u63a5\u6536\u5230\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4ee5\u4fbf\u66f4\u65b0\u6d4b\u91cf\u7ed3\u679c\u3002</p>\n<p>\u6ce8\u610f\u5230\u6211\u4eec\u4f20\u9012\u4e86 <code class=\"language-javascript\">[]</code> \u4f5c\u4e3a <code class=\"language-javascript\">useCallback</code> \u7684\u4f9d\u8d56\u5217\u8868\u3002\u8fd9\u786e\u4fdd\u4e86 ref callback \u4e0d\u4f1a\u5728\u518d\u6b21\u6e32\u67d3\u65f6\u6539\u53d8\uff0c\u56e0\u6b64 React \u4e0d\u4f1a\u5728\u975e\u5fc5\u8981\u7684\u65f6\u5019\u8c03\u7528\u5b83\u3002</p>\n<p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5f53\u4e14\u4ec5\u5f53\u7ec4\u4ef6\u6302\u8f7d\u548c\u5378\u8f7d\u65f6\uff0ccallback ref \u624d\u4f1a\u88ab\u8c03\u7528\uff0c\u56e0\u4e3a\u6e32\u67d3\u7684 <code class=\"language-javascript\">&lt;h1&gt;</code> \u7ec4\u4ef6\u5728\u6574\u4e2a\u91cd\u65b0\u6e32\u67d3\u671f\u95f4\u59cb\u7ec8\u5b58\u5728\u3002\u5982\u679c\u4f60\u5e0c\u671b\u5728\u6bcf\u6b21\u7ec4\u4ef6\u8c03\u6574\u5927\u5c0f\u65f6\u90fd\u6536\u5230\u901a\u77e5\uff0c\u5219\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <a class=\"external-link\" href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ResizeObserver\"><code class=\"language-javascript\">ResizeObserver</code></a> \u6216\u57fa\u4e8e\u5176\u6784\u5efa\u7684\u7b2c\u4e09\u65b9 Hook\u3002</p>\n<p>\u5982\u679c\u4f60\u613f\u610f\uff0c\u4f60\u53ef\u4ee5 <a class=\"external-link\" href=\"https://codesandbox.io/s/m5o42082xy\">\u628a\u8fd9\u4e2a\u903b\u8f91\u62bd\u53d6\u51fa\u6765\u4f5c\u4e3a</a> \u4e00\u4e2a\u53ef\u590d\u7528\u7684 Hook:</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">MeasureExample</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rect<span class=\"token punctuation\">,</span> ref<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Hello, world</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>rect <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">The above header is </span><span class=\"token punctuation\">{</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">round</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">px tall</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rect<span class=\"token punctuation\">,</span> setRect<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">node</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setRect</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>rect<span class=\"token punctuation\">,</span> ref<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"what-does-const-thing-setthing--usestate-mean\"><a class=\"anchor\" href=\"/react/hooks-faq#what-does-const-thing-setthing--usestate-mean\"></a><code class=\"language-javascript\">const [thing, setThing] = useState()</code> \u662f\u4ec0\u4e48\u610f\u601d\uff1f </h3>\n<p>\u5982\u679c\u4f60\u4e0d\u719f\u6089\u8fd9\u4e2a\u8bed\u6cd5\uff0c\u53ef\u4ee5\u67e5\u770b State Hook \u6587\u6863\u4e2d\u7684 <a href=\"/react/hooks-state#tip-what-do-square-brackets-mean\">\u89e3\u91ca</a> \u4e00\u8282\u3002</p>\n<h2 id=\"performance-optimizations\"><a class=\"anchor\" href=\"/react/hooks-faq#performance-optimizations\"></a>\u6027\u80fd\u4f18\u5316 </h2>\n<h3 id=\"can-i-skip-an-effect-on-updates\"><a class=\"anchor\" href=\"/react/hooks-faq#can-i-skip-an-effect-on-updates\"></a>\u6211\u53ef\u4ee5\u5728\u66f4\u65b0\u65f6\u8df3\u8fc7 effect \u5417\uff1f </h3>\n<p>\u53ef\u4ee5\u7684\u3002\u53c2\u89c1 <a href=\"/react/hooks-reference#conditionally-firing-an-effect\">\u6761\u4ef6\u5f0f\u7684\u53d1\u8d77 effect</a>\u3002\u6ce8\u610f\uff0c\u5fd8\u8bb0\u5904\u7406\u66f4\u65b0\u5e38\u4f1a <a href=\"/react/hooks-effect#explanation-why-effects-run-on-each-update\">\u5bfc\u81f4 bug</a>\uff0c\u8fd9\u4e5f\u6b63\u662f\u6211\u4eec\u6ca1\u6709\u9ed8\u8ba4\u4f7f\u7528\u6761\u4ef6\u5f0f effect \u7684\u539f\u56e0\u3002</p>\n<h3 id=\"is-it-safe-to-omit-functions-from-the-list-of-dependencies\"><a class=\"anchor\" href=\"/react/hooks-faq#is-it-safe-to-omit-functions-from-the-list-of-dependencies\"></a>\u5728\u4f9d\u8d56\u5217\u8868\u4e2d\u7701\u7565\u51fd\u6570\u662f\u5426\u5b89\u5168\uff1f </h3>\n<p>\u4e00\u822c\u6765\u8bf4\uff0c\u4e0d\u5b89\u5168\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> someProp <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>someProp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \ud83d\udd34 \u8fd9\u6837\u4e0d\u5b89\u5168\uff08\u5b83\u8c03\u7528\u7684 `doSomething` \u51fd\u6570\u4f7f\u7528\u4e86 `someProp`\uff09</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8981\u8bb0\u4f4f effect \u5916\u90e8\u7684\u51fd\u6570\u4f7f\u7528\u4e86\u54ea\u4e9b props \u548c state \u5f88\u96be\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48 <strong>\u901a\u5e38\u4f60\u4f1a\u60f3\u8981\u5728 effect <em>\u5185\u90e8</em> \u53bb\u58f0\u660e\u5b83\u6240\u9700\u8981\u7684\u51fd\u6570\u3002</strong> \u8fd9\u6837\u5c31\u80fd\u5bb9\u6613\u7684\u770b\u51fa\u90a3\u4e2a effect \u4f9d\u8d56\u4e86\u7ec4\u4ef6\u4f5c\u7528\u57df\u4e2d\u7684\u54ea\u4e9b\u503c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> someProp <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>someProp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>someProp<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 \u5b89\u5168\uff08\u6211\u4eec\u7684 effect \u4ec5\u7528\u5230\u4e86 `someProp`\uff09</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u8fd9\u6837\u4e4b\u540e\u6211\u4eec\u4f9d\u7136\u6ca1\u7528\u5230\u7ec4\u4ef6\u4f5c\u7528\u57df\u4e2d\u7684\u4efb\u4f55\u503c\uff0c\u5c31\u53ef\u4ee5\u5b89\u5168\u5730\u628a\u5b83\u6307\u5b9a\u4e3a <code class=\"language-javascript\">[]</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 \u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u662f\u5b89\u5168\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u6ca1\u6709\u7528\u5230\u7ec4\u4ef6\u4f5c\u7528\u57df\u4e2d\u7684 *\u4efb\u4f55* \u503c</span></span></code></pre></div>\n<p>\u6839\u636e\u4f60\u7684\u7528\u4f8b\uff0c\u4e0b\u9762\u5217\u4e3e\u4e86\u4e00\u4e9b\u5176\u4ed6\u7684\u529e\u6cd5\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/14920\"><code class=\"language-javascript\">exhaustive-deps</code></a> ESLint \u89c4\u5219\u4f5c\u4e3a <a class=\"external-link\" href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\"><code class=\"language-javascript\">eslint-plugin-react-hooks</code></a> \u5305\u7684\u4e00\u90e8\u5206\u3002\u5b83\u4f1a\u5e2e\u52a9\u4f60\u627e\u51fa\u65e0\u6cd5\u4e00\u81f4\u5730\u5904\u7406\u66f4\u65b0\u7684\u7ec4\u4ef6\u3002</p>\n</div>\n<p>\u8ba9\u6211\u4eec\u6765\u770b\u770b\u8fd9\u6709\u4ec0\u4e48\u5173\u7cfb\u3002</p>\n<p>\u5982\u679c\u4f60\u6307\u5b9a\u4e86\u4e00\u4e2a <a href=\"/react/hooks-reference#conditionally-firing-an-effect\">\u4f9d\u8d56\u5217\u8868</a> \u4f5c\u4e3a <code class=\"language-javascript\">useEffect</code>\u3001<code class=\"language-javascript\">useLayoutEffect</code>\u3001<code class=\"language-javascript\">useMemo</code>\u3001<code class=\"language-javascript\">useCallback</code> \u6216 <code class=\"language-javascript\">useImperativeHandle</code> \u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570\uff0c\u5b83\u5fc5\u987b\u5305\u542b\u56de\u8c03\u4e2d\u7684\u6240\u6709\u503c\uff0c\u5e76\u53c2\u4e0e React \u6570\u636e\u6d41\u3002\u8fd9\u5c31\u5305\u62ec props\u3001state\uff0c\u4ee5\u53ca\u4efb\u4f55\u7531\u5b83\u4eec\u884d\u751f\u800c\u6765\u7684\u4e1c\u897f\u3002</p>\n<p><strong>\u53ea\u6709</strong> \u5f53\u51fd\u6570\uff08\u4ee5\u53ca\u5b83\u6240\u8c03\u7528\u7684\u51fd\u6570\uff09\u4e0d\u5f15\u7528 props\u3001state \u4ee5\u53ca\u7531\u5b83\u4eec\u884d\u751f\u800c\u6765\u7684\u503c\u65f6\uff0c\u4f60\u624d\u80fd\u653e\u5fc3\u5730\u628a\u5b83\u4eec\u4ece\u4f9d\u8d56\u5217\u8868\u4e2d\u7701\u7565\u3002\u4e0b\u9762\u8fd9\u4e2a\u6848\u4f8b\u6709\u4e00\u4e2a Bug\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ProductPage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> productId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>product<span class=\"token punctuation\">,</span> setProduct<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://myapi/product/'</span> <span class=\"token operator\">+</span> productId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u4f7f\u7528\u4e86 productId prop</span></span>    <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setProduct</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \ud83d\udd34 \u8fd9\u6837\u662f\u65e0\u6548\u7684\uff0c\u56e0\u4e3a `fetchProduct` \u4f7f\u7528\u4e86 `productId`</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>\u63a8\u8350\u7684\u4fee\u590d\u65b9\u6848\u662f\u628a\u90a3\u4e2a\u51fd\u6570\u79fb\u52a8\u5230\u4f60\u7684 effect <em>\u5185\u90e8</em></strong>\u3002\u8fd9\u6837\u5c31\u80fd\u5f88\u5bb9\u6613\u7684\u770b\u51fa\u6765\u4f60\u7684 effect \u4f7f\u7528\u4e86\u54ea\u4e9b props \u548c state\uff0c\u5e76\u786e\u4fdd\u5b83\u4eec\u90fd\u88ab\u58f0\u660e\u4e86\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ProductPage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> productId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>product<span class=\"token punctuation\">,</span> setProduct<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// \u628a\u8fd9\u4e2a\u51fd\u6570\u79fb\u52a8\u5230 effect \u5185\u90e8\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6e05\u695a\u5730\u770b\u5230\u5b83\u7528\u5230\u7684\u503c\u3002</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://myapi/product/'</span> <span class=\"token operator\">+</span> productId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setProduct</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>\n    <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>productId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 \u6709\u6548\uff0c\u56e0\u4e3a\u6211\u4eec\u7684 effect \u53ea\u7528\u5230\u4e86 productId</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u540c\u65f6\u4e5f\u5141\u8bb8\u4f60\u901a\u8fc7 effect \u5185\u90e8\u7684\u5c40\u90e8\u53d8\u91cf\u6765\u5904\u7406\u65e0\u5e8f\u7684\u54cd\u5e94\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">let</span> ignore <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://myapi/product/'</span> <span class=\"token operator\">+</span> productId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ignore<span class=\"token punctuation\">)</span> <span class=\"token function\">setProduct</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span> ignore <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>productId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6211\u4eec\u628a\u8fd9\u4e2a\u51fd\u6570\u79fb\u52a8\u5230 effect \u5185\u90e8\uff0c\u8fd9\u6837\u5b83\u5c31\u4e0d\u7528\u51fa\u73b0\u5728\u5b83\u7684\u4f9d\u8d56\u5217\u8868\u4e2d\u4e86\u3002</p>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u770b\u770b <a class=\"external-link\" href=\"https://codesandbox.io/s/jvvkoo8pq3\">\u8fd9\u4e2a\u5c0f demo</a> \u548c <a class=\"external-link\" href=\"https://www.robinwieruch.de/react-hooks-fetch-data/\">\u8fd9\u7bc7\u6587\u7ae0</a> \u6765\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u7528 Hook \u8fdb\u884c\u6570\u636e\u83b7\u53d6\u3002</p>\n</div>\n<p><strong>\u5982\u679c\u51fa\u4e8e\u67d0\u4e9b\u539f\u56e0\u4f60 <em>\u65e0\u6cd5</em> \u628a\u4e00\u4e2a\u51fd\u6570\u79fb\u52a8\u5230 effect \u5185\u90e8\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u529e\u6cd5\uff1a</strong></p>\n<ul>\n<li><strong>\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u628a\u90a3\u4e2a\u51fd\u6570\u79fb\u52a8\u5230\u4f60\u7684\u7ec4\u4ef6\u4e4b\u5916</strong>\u3002\u90a3\u6837\u4e00\u6765\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c31\u80af\u5b9a\u4e0d\u4f1a\u4f9d\u8d56\u4efb\u4f55 props \u6216 state\uff0c\u5e76\u4e14\u4e5f\u4e0d\u7528\u51fa\u73b0\u5728\u4f9d\u8d56\u5217\u8868\u4e2d\u4e86\u3002</li>\n<li>\u5982\u679c\u4f60\u6240\u8c03\u7528\u7684\u65b9\u6cd5\u662f\u4e00\u4e2a\u7eaf\u8ba1\u7b97\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6e32\u67d3\u65f6\u8c03\u7528\uff0c\u4f60\u53ef\u4ee5 <strong>\u8f6c\u800c\u5728 effect \u4e4b\u5916\u8c03\u7528\u5b83\uff0c</strong> \u5e76\u8ba9 effect \u4f9d\u8d56\u4e8e\u5b83\u7684\u8fd4\u56de\u503c\u3002</li>\n<li>\u4e07\u4e0d\u5f97\u5df2\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5 <strong>\u628a\u51fd\u6570\u52a0\u5165 effect \u7684\u4f9d\u8d56\u4f46 <em>\u628a\u5b83\u7684\u5b9a\u4e49\u5305\u88f9</em></strong> \u8fdb <a href=\"/react/hooks-reference#usecallback\"><code class=\"language-javascript\">useCallback</code></a> Hook\u3002\u8fd9\u5c31\u786e\u4fdd\u4e86\u5b83\u4e0d\u968f\u6e32\u67d3\u800c\u6539\u53d8\uff0c\u9664\u975e <em>\u5b83\u81ea\u8eab</em> \u7684\u4f9d\u8d56\u53d1\u751f\u4e86\u6539\u53d8\uff1a</li>\n</ul>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">ProductPage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> productId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u2705 \u7528 useCallback \u5305\u88f9\u4ee5\u907f\u514d\u968f\u6e32\u67d3\u53d1\u751f\u6539\u53d8</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> fetchProduct <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// ... Does something with productId ...</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>productId<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 useCallback \u7684\u6240\u6709\u4f9d\u8d56\u90fd\u88ab\u6307\u5b9a\u4e86</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ProductDetails</span></span> <span class=\"token attr-name\">fetchProduct</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>fetchProduct<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ProductDetails</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> fetchProduct <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>fetchProduct<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 useEffect \u7684\u6240\u6709\u4f9d\u8d56\u90fd\u88ab\u6307\u5b9a\u4e86</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\u5728\u4e0a\u9762\u7684\u6848\u4f8b\u4e2d\uff0c\u6211\u4eec <strong>\u9700\u8981</strong> \u8ba9\u51fd\u6570\u51fa\u73b0\u5728\u4f9d\u8d56\u5217\u8868\u4e2d\u3002\u8fd9\u786e\u4fdd\u4e86 <code class=\"language-javascript\">ProductPage</code> \u7684 <code class=\"language-javascript\">productId</code> prop \u7684\u53d8\u5316\u4f1a\u81ea\u52a8\u89e6\u53d1 <code class=\"language-javascript\">ProductDetails</code> \u7684\u91cd\u65b0\u83b7\u53d6\u3002</p>\n<h3 id=\"what-can-i-do-if-my-effect-dependencies-change-too-often\"><a class=\"anchor\" href=\"/react/hooks-faq#what-can-i-do-if-my-effect-dependencies-change-too-often\"></a>\u5982\u679c\u6211\u7684 effect \u7684\u4f9d\u8d56\u9891\u7e41\u53d8\u5316\uff0c\u6211\u8be5\u600e\u4e48\u529e\uff1f</h3>\n<p>\u6709\u65f6\u5019\uff0c\u4f60\u7684 effect \u53ef\u80fd\u4f1a\u4f7f\u7528\u4e00\u4e9b\u9891\u7e41\u53d8\u5316\u7684\u503c\u3002\u4f60\u53ef\u80fd\u4f1a\u5ffd\u7565\u4f9d\u8d56\u5217\u8868\u4e2d state\uff0c\u4f46\u8fd9\u901a\u5e38\u4f1a\u5f15\u8d77 Bug\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u8fd9\u4e2a effect \u4f9d\u8d56\u4e8e `count` state</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \ud83d\udd34 Bug: `count` \u6ca1\u6709\u88ab\u6307\u5b9a\u4e3a\u4f9d\u8d56</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4f20\u5165\u7a7a\u7684\u4f9d\u8d56\u6570\u7ec4 <code class=\"language-javascript\">[]</code>\uff0c\u610f\u5473\u7740\u8be5 hook \u53ea\u5728\u7ec4\u4ef6\u6302\u8f7d\u65f6\u8fd0\u884c\u4e00\u6b21\uff0c\u5e76\u975e\u91cd\u65b0\u6e32\u67d3\u65f6\u3002\u4f46\u5982\u6b64\u4f1a\u6709\u95ee\u9898\uff0c\u5728 <code class=\"language-javascript\">setInterval</code> \u7684\u56de\u8c03\u4e2d\uff0c<code class=\"language-javascript\">count</code> \u7684\u503c\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\u3002\u56e0\u4e3a\u5f53 effect \u6267\u884c\u65f6\uff0c\u6211\u4eec\u4f1a\u521b\u5efa\u4e00\u4e2a\u95ed\u5305\uff0c\u5e76\u5c06 <code class=\"language-javascript\">count</code> \u7684\u503c\u88ab\u4fdd\u5b58\u5728\u8be5\u95ed\u5305\u5f53\u4e2d\uff0c\u4e14\u521d\u503c\u4e3a <code class=\"language-javascript\">0</code>\u3002\u6bcf\u9694\u4e00\u79d2\uff0c\u56de\u8c03\u5c31\u4f1a\u6267\u884c <code class=\"language-javascript\">setCount(0 + 1)</code>\uff0c\u56e0\u6b64\uff0c<code class=\"language-javascript\">count</code> \u6c38\u8fdc\u4e0d\u4f1a\u8d85\u8fc7 1\u3002</p>\n<p>\u6307\u5b9a <code class=\"language-javascript\">[count]</code> \u4f5c\u4e3a\u4f9d\u8d56\u5217\u8868\u5c31\u80fd\u4fee\u590d\u8fd9\u4e2a Bug\uff0c\u4f46\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u6539\u53d8\u53d1\u751f\u65f6\u5b9a\u65f6\u5668\u90fd\u88ab\u91cd\u7f6e\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6bcf\u4e2a <code class=\"language-javascript\">setInterval</code> \u5728\u88ab\u6e05\u9664\u524d\uff08\u7c7b\u4f3c\u4e8e <code class=\"language-javascript\">setTimeout</code>\uff09\u90fd\u4f1a\u8c03\u7528\u4e00\u6b21\u3002\u4f46\u8fd9\u5e76\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <a href=\"/react/hooks-reference#functional-updates\"><code class=\"language-javascript\">setState</code> \u7684\u51fd\u6570\u5f0f\u66f4\u65b0\u5f62\u5f0f</a>\u3002\u5b83\u5141\u8bb8\u6211\u4eec\u6307\u5b9a state \u8be5 <em>\u5982\u4f55</em> \u6539\u53d8\u800c\u4e0d\u7528\u5f15\u7528 <em>\u5f53\u524d</em> state\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=&gt;</span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 \u5728\u8fd9\u4e0d\u4f9d\u8d56\u4e8e\u5916\u90e8\u7684 `count` \u53d8\u91cf</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u2705 \u6211\u4eec\u7684 effect \u4e0d\u4f7f\u7528\u7ec4\u4ef6\u4f5c\u7528\u57df\u4e2d\u7684\u4efb\u4f55\u53d8\u91cf</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\uff08<code class=\"language-javascript\">setCount</code> \u51fd\u6570\u7684\u8eab\u4efd\u662f\u88ab\u786e\u4fdd\u7a33\u5b9a\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u653e\u5fc3\u7684\u7701\u7565\u6389\uff09</p>\n<p>\u6b64\u65f6\uff0c<code class=\"language-javascript\">setInterval</code> \u7684\u56de\u8c03\u4f9d\u65e7\u6bcf\u79d2\u8c03\u7528\u4e00\u6b21\uff0c\u4f46\u6bcf\u6b21 <code class=\"language-javascript\">setCount</code> \u5185\u90e8\u7684\u56de\u8c03\u53d6\u5230\u7684 <code class=\"language-javascript\">count</code> \u662f\u6700\u65b0\u503c\uff08\u5728\u56de\u8c03\u4e2d\u53d8\u91cf\u547d\u540d\u4e3a <code class=\"language-javascript\">c</code>\uff09\u3002</p>\n<p>\u5728\u4e00\u4e9b\u66f4\u52a0\u590d\u6742\u7684\u573a\u666f\u4e2d\uff08\u6bd4\u5982\u4e00\u4e2a state \u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a state\uff09\uff0c\u5c1d\u8bd5\u7528 <a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code> Hook</a> \u628a state \u66f4\u65b0\u903b\u8f91\u79fb\u5230 effect \u4e4b\u5916\u3002<a class=\"external-link\" href=\"https://adamrackis.dev/state-and-use-reducer/\">\u8fd9\u7bc7\u6587\u7ae0</a> \u63d0\u4f9b\u4e86\u4e00\u4e2a\u4f60\u8be5\u5982\u4f55\u505a\u5230\u8fd9\u4e00\u70b9\u7684\u6848\u4f8b\u3002 <strong><code class=\"language-javascript\">useReducer</code> \u7684 <code class=\"language-javascript\">dispatch</code> \u7684\u8eab\u4efd\u6c38\u8fdc\u662f\u7a33\u5b9a\u7684</strong> \u2014\u2014 \u5373\u4f7f reducer \u51fd\u6570\u662f\u5b9a\u4e49\u5728\u7ec4\u4ef6\u5185\u90e8\u5e76\u4e14\u4f9d\u8d56 props\u3002</p>\n<p>\u4e07\u4e0d\u5f97\u5df2\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f60\u60f3\u8981\u7c7b\u4f3c class \u4e2d\u7684 <code class=\"language-javascript\">this</code> \u7684\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5 <a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">\u4f7f\u7528\u4e00\u4e2a ref</a> \u6765\u4fdd\u5b58\u4e00\u4e2a\u53ef\u53d8\u7684\u53d8\u91cf\u3002\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u5bf9\u5b83\u8fdb\u884c\u8bfb\u5199\u4e86\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u628a\u6700\u65b0\u7684 props \u4fdd\u5b58\u5728\u4e00\u4e2a ref \u4e2d</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> latestProps <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    latestProps<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// \u5728\u4efb\u4f55\u65f6\u5019\u8bfb\u53d6\u6700\u65b0\u7684 props</span></span><span class=\"gatsby-highlight-code-line\">      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>latestProps<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u8fd9\u4e2a effect \u4ece\u4e0d\u4f1a\u91cd\u65b0\u6267\u884c</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4ec5\u5f53\u4f60\u5b9e\u5728\u627e\u4e0d\u5230\u66f4\u597d\u529e\u6cd5\u7684\u65f6\u5019\u624d\u8fd9\u4e48\u505a\uff0c\u56e0\u4e3a\u4f9d\u8d56\u4e8e\u53d8\u66f4\u4f1a\u4f7f\u5f97\u7ec4\u4ef6\u66f4\u96be\u4ee5\u9884\u6d4b\u3002\u5982\u679c\u6709\u67d0\u4e9b\u7279\u5b9a\u7684\u6a21\u5f0f\u65e0\u6cd5\u5f88\u597d\u5730\u8f6c\u5316\u6210\u8fd9\u6837\uff0c<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/new\">\u53d1\u8d77\u4e00\u4e2a issue</a> \u5e76\u914d\u4e0a\u53ef\u8fd0\u884c\u7684\u5b9e\u4f8b\u4ee3\u7801\u4ee5\u4fbf\uff0c\u6211\u4eec\u4f1a\u5c3d\u53ef\u80fd\u5e2e\u52a9\u4f60\u3002</p>\n<h3 id=\"how-do-i-implement-shouldcomponentupdate\"><a class=\"anchor\" href=\"/react/hooks-faq#how-do-i-implement-shouldcomponentupdate\"></a>\u6211\u8be5\u5982\u4f55\u5b9e\u73b0 <code class=\"language-javascript\">shouldComponentUpdate</code>? </h3>\n<p>\u4f60\u53ef\u4ee5\u7528 <code class=\"language-javascript\">React.memo</code> \u5305\u88f9\u4e00\u4e2a\u7ec4\u4ef6\u6765\u5bf9\u5b83\u7684 props \u8fdb\u884c\u6d45\u6bd4\u8f83\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> Button <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4f60\u7684\u7ec4\u4ef6</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u4e0d\u662f\u4e00\u4e2a Hook \u56e0\u4e3a\u5b83\u7684\u5199\u6cd5\u548c Hook \u4e0d\u540c\u3002<code class=\"language-javascript\">React.memo</code> \u7b49\u6548\u4e8e <code class=\"language-javascript\">PureComponent</code>\uff0c\u4f46\u5b83\u53ea\u6bd4\u8f83 props\u3002\uff08\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7684\u6bd4\u8f83\u51fd\u6570\u6765\u6bd4\u8f83\u65b0\u65e7 props\u3002\u5982\u679c\u51fd\u6570\u8fd4\u56de true\uff0c\u5c31\u4f1a\u8df3\u8fc7\u66f4\u65b0\u3002\uff09</p>\n<p><code class=\"language-javascript\">React.memo</code> \u4e0d\u6bd4\u8f83 state\uff0c\u56e0\u4e3a\u6ca1\u6709\u5355\u4e00\u7684 state \u5bf9\u8c61\u53ef\u4f9b\u6bd4\u8f83\u3002\u4f46\u4f60\u4e5f\u53ef\u4ee5\u8ba9\u5b50\u8282\u70b9\u53d8\u4e3a\u7eaf\u7ec4\u4ef6\uff0c\u6216\u8005 <a href=\"/react/hooks-faq#how-to-memoize-calculations\">\u7528 <code class=\"language-javascript\">useMemo</code> \u4f18\u5316\u6bcf\u4e00\u4e2a\u5177\u4f53\u7684\u5b50\u8282\u70b9</a>\u3002</p>\n<h3 id=\"how-to-memoize-calculations\"><a class=\"anchor\" href=\"/react/hooks-faq#how-to-memoize-calculations\"></a>\u5982\u4f55\u8bb0\u5fc6\u8ba1\u7b97\u7ed3\u679c\uff1f </h3>\n<p><a href=\"/react/hooks-reference#usememo\"><code class=\"language-javascript\">useMemo</code></a> Hook \u5141\u8bb8\u4f60\u901a\u8fc7\u300c\u8bb0\u4f4f\u300d\u4e0a\u4e00\u6b21\u8ba1\u7b97\u7ed3\u679c\u7684\u65b9\u5f0f\u5728\u591a\u6b21\u6e32\u67d3\u7684\u4e4b\u95f4\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u884c\u4ee3\u7801\u4f1a\u8c03\u7528 <code class=\"language-javascript\">computeExpensiveValue(a, b)</code>\u3002\u4f46\u5982\u679c\u4f9d\u8d56\u6570\u7ec4 <code class=\"language-javascript\">[a, b]</code> \u81ea\u4e0a\u6b21\u8d4b\u503c\u4ee5\u6765\u6ca1\u6709\u6539\u53d8\u8fc7\uff0c<code class=\"language-javascript\">useMemo</code> \u4f1a\u8df3\u8fc7\u4e8c\u6b21\u8c03\u7528\uff0c\u53ea\u662f\u7b80\u5355\u590d\u7528\u5b83\u4e0a\u4e00\u6b21\u8fd4\u56de\u7684\u503c\u3002</p>\n<p>\u8bb0\u4f4f\uff0c\u4f20\u7ed9 <code class=\"language-javascript\">useMemo</code> \u7684\u51fd\u6570\u662f\u5728\u6e32\u67d3\u671f\u95f4\u8fd0\u884c\u7684\u3002\u4e0d\u8981\u5728\u5176\u4e2d\u505a\u4efb\u4f55\u4f60\u901a\u5e38\u4e0d\u4f1a\u5728\u6e32\u67d3\u671f\u95f4\u505a\u7684\u4e8b\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u526f\u4f5c\u7528\u5c5e\u4e8e <code class=\"language-javascript\">useEffect</code>\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">useMemo</code>\u3002</p>\n<p><strong>\u4f60\u53ef\u4ee5\u628a <code class=\"language-javascript\">useMemo</code> \u4f5c\u4e3a\u4e00\u79cd\u6027\u80fd\u4f18\u5316\u7684\u624b\u6bb5\uff0c\u4f46\u4e0d\u8981\u628a\u5b83\u5f53\u505a\u4e00\u79cd\u8bed\u4e49\u4e0a\u7684\u4fdd\u8bc1\u3002</strong>\u672a\u6765\uff0cReact \u53ef\u80fd\u4f1a\u9009\u62e9\u300c\u5fd8\u6389\u300d\u4e00\u4e9b\u4e4b\u524d\u8bb0\u4f4f\u7684\u503c\u5e76\u5728\u4e0b\u4e00\u6b21\u6e32\u67d3\u65f6\u91cd\u65b0\u8ba1\u7b97\u5b83\u4eec\uff0c\u6bd4\u5982\u4e3a\u79bb\u5c4f\u7ec4\u4ef6\u91ca\u653e\u5185\u5b58\u3002\u5efa\u8bae\u81ea\u5df1\u7f16\u5199\u76f8\u5173\u4ee3\u7801\u4ee5\u4fbf\u6ca1\u6709 <code class=\"language-javascript\">useMemo</code> \u4e5f\u80fd\u6b63\u5e38\u5de5\u4f5c \u2014\u2014 \u7136\u540e\u628a\u5b83\u52a0\u5165\u6027\u80fd\u4f18\u5316\u3002\uff08\u5728\u67d0\u4e9b\u53d6\u503c\u5fc5\u987b <em>\u4ece\u4e0d</em> \u88ab\u91cd\u65b0\u8ba1\u7b97\u7684\u7f55\u89c1\u573a\u666f\uff0c\u4f60\u53ef\u4ee5 <a href=\"/react/hooks-faq#how-to-create-expensive-objects-lazily\">\u60f0\u6027\u521d\u59cb\u5316</a> \u4e00\u4e2a ref\u3002\uff09</p>\n<p>\u65b9\u4fbf\u8d77\u89c1\uff0c<code class=\"language-javascript\">useMemo</code> \u4e5f\u5141\u8bb8\u4f60\u8df3\u8fc7\u4e00\u6b21\u5b50\u8282\u70b9\u7684\u6602\u8d35\u7684\u91cd\u65b0\u6e32\u67d3\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Parent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">,</span> b <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Only re-rendered if `a` changes:</span>\n  <span class=\"token keyword\">const</span> child1 <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child1</span></span> <span class=\"token attr-name\">a</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>a<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Only re-rendered if `b` changes:</span>\n  <span class=\"token keyword\">const</span> child2 <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child2</span></span> <span class=\"token attr-name\">b</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>b<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>child1<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>child2<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6ce8\u610f\u8fd9\u79cd\u65b9\u5f0f\u5728\u5faa\u73af\u4e2d\u662f\u65e0\u6548\u7684\uff0c\u56e0\u4e3a Hook \u8c03\u7528 <a href=\"/react/hooks-rules\">\u4e0d\u80fd</a> \u88ab\u653e\u5728\u5faa\u73af\u4e2d\u3002\u4f46\u4f60\u53ef\u4ee5\u4e3a\u5217\u8868\u9879\u62bd\u53d6\u4e00\u4e2a\u5355\u72ec\u7684\u7ec4\u4ef6\uff0c\u5e76\u5728\u5176\u4e2d\u8c03\u7528 <code class=\"language-javascript\">useMemo</code>\u3002</p>\n<h3 id=\"how-to-create-expensive-objects-lazily\"><a class=\"anchor\" href=\"/react/hooks-faq#how-to-create-expensive-objects-lazily\"></a>\u5982\u4f55\u60f0\u6027\u521b\u5efa\u6602\u8d35\u7684\u5bf9\u8c61\uff1f </h3>\n<p>\u5982\u679c\u4f9d\u8d56\u6570\u7ec4\u7684\u503c\u76f8\u540c\uff0c<code class=\"language-javascript\">useMemo</code> \u5141\u8bb8\u4f60 <a href=\"/react/hooks-faq#how-to-memoize-calculations\">\u8bb0\u4f4f\u4e00\u6b21\u6602\u8d35\u7684\u8ba1\u7b97</a>\u3002\u4f46\u662f\uff0c\u8fd9\u4ec5\u4f5c\u4e3a\u4e00\u79cd\u63d0\u793a\uff0c\u5e76\u4e0d <em>\u4fdd\u8bc1</em> \u8ba1\u7b97\u4e0d\u4f1a\u91cd\u65b0\u8fd0\u884c\u3002\u4f46\u6709\u65f6\u5019\u9700\u8981\u786e\u4fdd\u4e00\u4e2a\u5bf9\u8c61\u4ec5\u88ab\u521b\u5efa\u4e00\u6b21\u3002</p>\n<p><strong>\u7b2c\u4e00\u4e2a\u5e38\u89c1\u7684\u4f7f\u7528\u573a\u666f\u662f\u5f53\u521b\u5efa\u521d\u59cb state \u5f88\u6602\u8d35\u65f6\uff1a</strong></p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Table</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u26a0\ufe0f createRows() \u6bcf\u6b21\u6e32\u67d3\u90fd\u4f1a\u88ab\u8c03\u7528</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rows<span class=\"token punctuation\">,</span> setRows<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token function\">createRows</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e3a\u907f\u514d\u91cd\u65b0\u521b\u5efa\u88ab\u5ffd\u7565\u7684\u521d\u59cb state\uff0c\u6211\u4eec\u53ef\u4ee5\u4f20\u4e00\u4e2a <strong>\u51fd\u6570</strong> \u7ed9 <code class=\"language-javascript\">useState</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Table</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u2705 createRows() \u53ea\u4f1a\u88ab\u8c03\u7528\u4e00\u6b21</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>rows<span class=\"token punctuation\">,</span> setRows<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">createRows</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>React \u53ea\u4f1a\u5728\u9996\u6b21\u6e32\u67d3\u65f6\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u3002\u53c2\u89c1 <a href=\"/react/hooks-reference#usestate\"><code class=\"language-javascript\">useState</code> API \u53c2\u8003</a>\u3002</p>\n<p><strong>\u4f60\u6216\u8bb8\u4e5f\u4f1a\u5076\u5c14\u60f3\u8981\u907f\u514d\u91cd\u65b0\u521b\u5efa <code class=\"language-javascript\">useRef()</code> \u7684\u521d\u59cb\u503c\u3002</strong>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6216\u8bb8\u4f60\u60f3\u786e\u4fdd\u67d0\u4e9b\u547d\u4ee4\u5f0f\u7684 class \u5b9e\u4f8b\u53ea\u88ab\u521b\u5efa\u4e00\u6b21\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Image</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u26a0\ufe0f IntersectionObserver \u5728\u6bcf\u6b21\u6e32\u67d3\u90fd\u4f1a\u88ab\u521b\u5efa</span>\n  <span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>onIntersect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">useRef</code> <strong>\u4e0d\u4f1a</strong> \u50cf <code class=\"language-javascript\">useState</code> \u90a3\u6837\u63a5\u53d7\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\u91cd\u8f7d\u3002\u76f8\u53cd\uff0c\u4f60\u53ef\u4ee5\u7f16\u5199\u4f60\u81ea\u5df1\u7684\u51fd\u6570\u6765\u521b\u5efa\u5e76\u5c06\u5176\u8bbe\u4e3a\u60f0\u6027\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Image</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u2705 IntersectionObserver \u53ea\u4f1a\u88ab\u60f0\u6027\u521b\u5efa\u4e00\u6b21</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">getObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">.</span>current <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      ref<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>onIntersect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// \u5f53\u4f60\u9700\u8981\u65f6\uff0c\u8c03\u7528 getObserver()</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u907f\u514d\u4e86\u6211\u4eec\u5728\u4e00\u4e2a\u5bf9\u8c61\u88ab\u9996\u6b21\u771f\u6b63\u9700\u8981\u4e4b\u524d\u5c31\u521b\u5efa\u5b83\u3002\u5982\u679c\u4f60\u4f7f\u7528 Flow \u6216 TypeScript\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4e3a\u4e86\u65b9\u4fbf\u7ed9 <code class=\"language-javascript\">getObserver()</code> \u4e00\u4e2a\u4e0d\u53ef\u4e3a null \u7684\u7c7b\u578b\u3002</p>\n<h3 id=\"are-hooks-slow-because-of-creating-functions-in-render\"><a class=\"anchor\" href=\"/react/hooks-faq#are-hooks-slow-because-of-creating-functions-in-render\"></a>Hook \u4f1a\u56e0\u4e3a\u5728\u6e32\u67d3\u65f6\u521b\u5efa\u51fd\u6570\u800c\u53d8\u6162\u5417\uff1f </h3>\n<p>\u4e0d\u4f1a\u3002\u5728\u73b0\u4ee3\u6d4f\u89c8\u5668\u4e2d\uff0c\u95ed\u5305\u548c\u7c7b\u7684\u539f\u59cb\u6027\u80fd\u53ea\u6709\u5728\u6781\u7aef\u573a\u666f\u4e0b\u624d\u4f1a\u6709\u660e\u663e\u7684\u5dee\u522b\u3002</p>\n<p>\u9664\u6b64\u4e4b\u5916\uff0c\u53ef\u4ee5\u8ba4\u4e3a Hook \u7684\u8bbe\u8ba1\u5728\u67d0\u4e9b\u65b9\u9762\u66f4\u52a0\u9ad8\u6548\uff1a</p>\n<ul>\n<li>Hook \u907f\u514d\u4e86 class \u9700\u8981\u7684\u989d\u5916\u5f00\u652f\uff0c\u50cf\u662f\u521b\u5efa\u7c7b\u5b9e\u4f8b\u548c\u5728\u6784\u9020\u51fd\u6570\u4e2d\u7ed1\u5b9a\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u6210\u672c\u3002</li>\n<li><strong>\u7b26\u5408\u8bed\u8a00\u4e60\u60ef\u7684\u4ee3\u7801\u5728\u4f7f\u7528 Hook \u65f6\u4e0d\u9700\u8981\u5f88\u6df1\u7684\u7ec4\u4ef6\u6811\u5d4c\u5957</strong>\u3002\u8fd9\u4e2a\u73b0\u8c61\u5728\u4f7f\u7528\u9ad8\u9636\u7ec4\u4ef6\u3001render props\u3001\u548c context \u7684\u4ee3\u7801\u5e93\u4e2d\u975e\u5e38\u666e\u904d\u3002\u7ec4\u4ef6\u6811\u5c0f\u4e86\uff0cReact \u7684\u5de5\u4f5c\u91cf\u4e5f\u968f\u4e4b\u51cf\u5c11\u3002</li>\n</ul>\n<p>\u4f20\u7edf\u4e0a\u8ba4\u4e3a\uff0c\u5728 React \u4e2d\u4f7f\u7528\u5185\u8054\u51fd\u6570\u5bf9\u6027\u80fd\u7684\u5f71\u54cd\uff0c\u4e0e\u6bcf\u6b21\u6e32\u67d3\u90fd\u4f20\u9012\u65b0\u7684\u56de\u8c03\u4f1a\u5982\u4f55\u7834\u574f\u5b50\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">shouldComponentUpdate</code> \u4f18\u5316\u6709\u5173\u3002Hook \u4ece\u4e09\u4e2a\u65b9\u9762\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</p>\n<ul>\n<li>\n<p><a href=\"/react/hooks-reference#usecallback\"><code class=\"language-javascript\">useCallback</code></a> Hook \u5141\u8bb8\u4f60\u5728\u91cd\u65b0\u6e32\u67d3\u4e4b\u95f4\u4fdd\u6301\u5bf9\u76f8\u540c\u7684\u56de\u8c03\u5f15\u7528\u4ee5\u4f7f\u5f97 <code class=\"language-javascript\">shouldComponentUpdate</code> \u7ee7\u7eed\u5de5\u4f5c\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// \u9664\u975e `a` \u6216 `b` \u6539\u53d8\uff0c\u5426\u5219\u4e0d\u4f1a\u53d8</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li><a href=\"/react/hooks-faq#how-to-memoize-calculations\"><code class=\"language-javascript\">useMemo</code></a> Hook \u4f7f\u5f97\u63a7\u5236\u5177\u4f53\u5b50\u8282\u70b9\u4f55\u65f6\u66f4\u65b0\u53d8\u5f97\u66f4\u5bb9\u6613\uff0c\u51cf\u5c11\u4e86\u5bf9\u7eaf\u7ec4\u4ef6\u7684\u9700\u8981\u3002</li>\n<li>\u6700\u540e\uff0c<a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code></a> Hook \u51cf\u5c11\u4e86\u5bf9\u6df1\u5c42\u4f20\u9012\u56de\u8c03\u7684\u4f9d\u8d56\uff0c\u6b63\u5982\u4e0b\u9762\u89e3\u91ca\u7684\u90a3\u6837\u3002</li>\n</ul>\n<h3 id=\"how-to-avoid-passing-callbacks-down\"><a class=\"anchor\" href=\"/react/hooks-faq#how-to-avoid-passing-callbacks-down\"></a>\u5982\u4f55\u907f\u514d\u5411\u4e0b\u4f20\u9012\u56de\u8c03\uff1f </h3>\n<p>\u6211\u4eec\u5df2\u7ecf\u53d1\u73b0\u5927\u90e8\u5206\u4eba\u5e76\u4e0d\u559c\u6b22\u5728\u7ec4\u4ef6\u6811\u7684\u6bcf\u4e00\u5c42\u624b\u52a8\u4f20\u9012\u56de\u8c03\u3002\u5c3d\u7ba1\u8fd9\u79cd\u5199\u6cd5\u66f4\u660e\u786e\uff0c\u4f46\u8fd9\u7ed9\u4eba\u611f\u89c9\u50cf\u9519\u7efc\u590d\u6742\u7684\u7ba1\u9053\u5de5\u7a0b\u4e00\u6837\u9ebb\u70e6\u3002</p>\n<p>\u5728\u5927\u578b\u7684\u7ec4\u4ef6\u6811\u4e2d\uff0c\u6211\u4eec\u63a8\u8350\u7684\u66ff\u4ee3\u65b9\u6848\u662f\u901a\u8fc7 context \u7528 <a href=\"/react/hooks-reference#usereducer\"><code class=\"language-javascript\">useReducer</code></a> \u5f80\u4e0b\u4f20\u4e00\u4e2a <code class=\"language-javascript\">dispatch</code> \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> TodosDispatch <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">TodosApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u63d0\u793a\uff1a`dispatch` \u4e0d\u4f1a\u5728\u91cd\u65b0\u6e32\u67d3\u4e4b\u95f4\u53d8\u5316</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>todosReducer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TodosDispatch.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DeepTree</span></span> <span class=\"token attr-name\">todos</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">TodosDispatch.Provider</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">TodosApp</code> \u5185\u90e8\u7ec4\u4ef6\u6811\u91cc\u7684\u4efb\u4f55\u5b50\u8282\u70b9\u90fd\u53ef\u4ee5\u4f7f\u7528 <code class=\"language-javascript\">dispatch</code> \u51fd\u6570\u6765\u5411\u4e0a\u4f20\u9012 actions \u5230 <code class=\"language-javascript\">TodosApp</code>\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">DeepChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u5982\u679c\u6211\u4eec\u60f3\u8981\u6267\u884c\u4e00\u4e2a action\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece context \u4e2d\u83b7\u53d6 dispatch\u3002</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>TodosDispatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'add'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> <span class=\"token string\">'hello'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Add todo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u603b\u800c\u8a00\u4e4b\uff0c\u4ece\u7ef4\u62a4\u7684\u89d2\u5ea6\u6765\u8fd9\u6837\u770b\u66f4\u52a0\u65b9\u4fbf\uff08\u4e0d\u7528\u4e0d\u65ad\u8f6c\u53d1\u56de\u8c03\uff09\uff0c\u540c\u65f6\u4e5f\u907f\u514d\u4e86\u56de\u8c03\u7684\u95ee\u9898\u3002\u50cf\u8fd9\u6837\u5411\u4e0b\u4f20\u9012 <code class=\"language-javascript\">dispatch</code> \u662f\u5904\u7406\u6df1\u5ea6\u66f4\u65b0\u7684\u63a8\u8350\u6a21\u5f0f\u3002</p>\n<p>\u6ce8\u610f\uff0c\u4f60\u4f9d\u7136\u53ef\u4ee5\u9009\u62e9\u5c06\u5e94\u7528\u7684 <em>state</em> \u4f5c\u4e3a props\uff08\u66f4\u663e\u660e\u786e\uff09\u5411\u4e0b\u4f20\u9012\u6216\u8005\u4f7f\u7528 context\uff08\u5bf9\u5f88\u6df1\u7684\u66f4\u65b0\u800c\u8a00\u66f4\u52a0\u65b9\u4fbf\uff09\u5411\u4e0b\u4f20\u9012\u3002\u5982\u679c\u4f60\u9009\u62e9\u4f7f\u7528 context \u6765\u5411\u4e0b\u4f20\u9012 state\uff0c\u8bf7\u4f7f\u7528\u4e24\u79cd\u4e0d\u540c\u7684 context \u7c7b\u578b\u4f20\u9012 state \u548c dispatch \u2014\u2014 \u7531\u4e8e <code class=\"language-javascript\">dispatch</code> context \u6c38\u8fdc\u4e0d\u4f1a\u53d8\uff0c\u56e0\u6b64\u8bfb\u53d6\u5b83\u7684\u7ec4\u4ef6\u4e0d\u9700\u8981\u91cd\u65b0\u6e32\u67d3\uff0c\u9664\u975e\u8fd9\u4e9b\u7ec4\u4ef6\u4e5f\u9700\u8981\u7528\u5230\u5e94\u7528\u7a0b\u5e8f\u7684 state\u3002</p>\n<h3 id=\"how-to-read-an-often-changing-value-from-usecallback\"><a class=\"anchor\" href=\"/react/hooks-faq#how-to-read-an-often-changing-value-from-usecallback\"></a>\u5982\u4f55\u4ece <code class=\"language-javascript\">useCallback</code> \u8bfb\u53d6\u4e00\u4e2a\u7ecf\u5e38\u53d8\u5316\u7684\u503c\uff1f </h3>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f</strong>\n<p>\u6211\u4eec\u63a8\u8350 <a href=\"/react/hooks-faq#how-to-avoid-passing-callbacks-down\">\u5728 context \u4e2d\u5411\u4e0b\u4f20\u9012 <code class=\"language-javascript\">dispatch</code></a> \u800c\u975e\u5728 props \u4e2d\u4f7f\u7528\u72ec\u7acb\u7684\u56de\u8c03\u3002\u4e0b\u9762\u7684\u65b9\u6cd5\u4ec5\u4ec5\u51fa\u4e8e\u6587\u6863\u5b8c\u6574\u6027\u8003\u8651\uff0c\u4ee5\u53ca\u4f5c\u4e3a\u4e00\u6761\u51fa\u8def\u5728\u6b64\u63d0\u53ca\u3002</p>\n</div>\n<p>\u5728\u67d0\u4e9b\u7f55\u89c1\u573a\u666f\u4e2d\uff0c\u4f60\u53ef\u80fd\u4f1a\u9700\u8981\u7528 <a href=\"/react/hooks-reference#usecallback\"><code class=\"language-javascript\">useCallback</code></a> \u8bb0\u4f4f\u4e00\u4e2a\u56de\u8c03\uff0c\u4f46\u7531\u4e8e\u5185\u90e8\u51fd\u6570\u5fc5\u987b\u7ecf\u5e38\u91cd\u65b0\u521b\u5efa\uff0c\u8bb0\u5fc6\u6548\u679c\u4e0d\u662f\u5f88\u597d\u3002\u5982\u679c\u4f60\u60f3\u8981\u8bb0\u4f4f\u7684\u51fd\u6570\u662f\u4e00\u4e2a\u4e8b\u4ef6\u5904\u7406\u5668\u5e76\u4e14\u5728\u6e32\u67d3\u671f\u95f4\u6ca1\u6709\u88ab\u7528\u5230\uff0c\u4f60\u53ef\u4ee5 <a href=\"/react/hooks-faq#is-there-something-like-instance-variables\">\u628a ref \u5f53\u505a\u5b9e\u4f8b\u53d8\u91cf</a> \u6765\u7528\uff0c\u5e76\u624b\u52a8\u628a\u6700\u540e\u63d0\u4ea4\u7684\u503c\u4fdd\u5b58\u5728\u5b83\u5f53\u4e2d\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>text<span class=\"token punctuation\">,</span> updateText<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> textRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    textRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u628a\u5b83\u5199\u5165 ref</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> handleSubmit <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> currentText <span class=\"token operator\">=</span> textRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u4ece ref \u8bfb\u53d6\u5b83</span></span>    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>currentText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>textRef<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \u4e0d\u8981\u50cf [text] \u90a3\u6837\u91cd\u65b0\u521b\u5efa handleSubmit</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">updateText</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ExpensiveTree</span></span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u9ebb\u70e6\u7684\u6a21\u5f0f\uff0c\u4f46\u8fd9\u8868\u793a\u5982\u679c\u4f60\u9700\u8981\u7684\u8bdd\u4f60\u53ef\u4ee5\u7528\u8fd9\u6761\u51fa\u8def\u8fdb\u884c\u4f18\u5316\u3002\u5982\u679c\u4f60\u628a\u5b83\u62bd\u53d6\u6210\u4e00\u4e2a\u81ea\u5b9a\u4e49 Hook \u7684\u8bdd\u4f1a\u66f4\u52a0\u597d\u53d7\u4e9b\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>text<span class=\"token punctuation\">,</span> updateText<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// \u5373\u4fbf `text` \u53d8\u4e86\u4e5f\u4f1a\u88ab\u8bb0\u4f4f:</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> handleSubmit <span class=\"token operator\">=</span> <span class=\"token function\">useEventCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span>    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>text<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">updateText</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ExpensiveTree</span></span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useEventCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> dependencies</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cannot call an event handler while rendering.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    ref<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> fn<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>fn<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>dependencies<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fn <span class=\"token operator\">=</span> ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>ref<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u4eec\u90fd <strong>\u4e0d\u63a8\u8350\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f</strong> \uff0c\u53ea\u662f\u4e3a\u4e86\u6587\u6863\u7684\u5b8c\u6574\u6027\u800c\u628a\u5b83\u5c55\u793a\u5728\u8fd9\u91cc\u3002\u76f8\u53cd\u7684\uff0c\u6211\u4eec\u66f4\u503e\u5411\u4e8e <a href=\"/react/hooks-faq#how-to-avoid-passing-callbacks-down\">\u907f\u514d\u5411\u4e0b\u6df1\u5165\u4f20\u9012\u56de\u8c03</a>\u3002</p>\n<h2 id=\"under-the-hood\"><a class=\"anchor\" href=\"/react/hooks-faq#under-the-hood\"></a>\u5e95\u5c42\u539f\u7406 </h2>\n<h3 id=\"how-does-react-associate-hook-calls-with-components\"><a class=\"anchor\" href=\"/react/hooks-faq#how-does-react-associate-hook-calls-with-components\"></a>React \u662f\u5982\u4f55\u628a\u5bf9 Hook \u7684\u8c03\u7528\u548c\u7ec4\u4ef6\u8054\u7cfb\u8d77\u6765\u7684\uff1f </h3>\n<p>React \u4fdd\u6301\u5bf9\u5f53\u524d\u6e32\u67d3\u4e2d\u7684\u7ec4\u4ef6\u7684\u8ffd\u8e2a\u3002\u591a\u4e8f\u4e86 <a href=\"/react/hooks-rules\">Hook \u89c4\u8303</a>\uff0c\u6211\u4eec\u5f97\u77e5 Hook \u53ea\u4f1a\u5728 React \u7ec4\u4ef6\u4e2d\u88ab\u8c03\u7528\uff08\u6216\u81ea\u5b9a\u4e49 Hook \u2014\u2014 \u540c\u6837\u53ea\u4f1a\u5728 React \u7ec4\u4ef6\u4e2d\u88ab\u8c03\u7528\uff09\u3002</p>\n<p>\u6bcf\u4e2a\u7ec4\u4ef6\u5185\u90e8\u90fd\u6709\u4e00\u4e2a\u300c\u8bb0\u5fc6\u5355\u5143\u683c\u300d\u5217\u8868\u3002\u5b83\u4eec\u53ea\u4e0d\u8fc7\u662f\u6211\u4eec\u7528\u6765\u5b58\u50a8\u4e00\u4e9b\u6570\u636e\u7684 JavaScript \u5bf9\u8c61\u3002\u5f53\u4f60\u7528 <code class=\"language-javascript\">useState()</code> \u8c03\u7528\u4e00\u4e2a Hook \u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u8bfb\u53d6\u5f53\u524d\u7684\u5355\u5143\u683c\uff08\u6216\u5728\u9996\u6b21\u6e32\u67d3\u65f6\u5c06\u5176\u521d\u59cb\u5316\uff09\uff0c\u7136\u540e\u628a\u6307\u9488\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u3002\u8fd9\u5c31\u662f\u591a\u4e2a <code class=\"language-javascript\">useState()</code> \u8c03\u7528\u4f1a\u5f97\u5230\u5404\u81ea\u72ec\u7acb\u7684\u672c\u5730 state \u7684\u539f\u56e0\u3002</p>\n<h3 id=\"what-is-the-prior-art-for-hooks\"><a class=\"anchor\" href=\"/react/hooks-faq#what-is-the-prior-art-for-hooks\"></a>Hook \u4f7f\u7528\u4e86\u54ea\u4e9b\u73b0\u6709\u6280\u672f\uff1f </h3>\n<p>Hook \u7531\u4e0d\u540c\u7684\u6765\u6e90\u7684\u591a\u4e2a\u60f3\u6cd5\u6784\u6210\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/reactjs/react-future/tree/master/07%20-%20Returning%20State\">react-future</a> \u8fd9\u4e2a\u4ed3\u5e93\u4e2d\u5305\u542b\u6211\u4eec\u5bf9\u51fd\u6570\u5f0f API \u7684\u8001\u65e7\u5b9e\u9a8c\u3002</li>\n<li>React \u793e\u533a\u5bf9 render prop API \u7684\u5b9e\u9a8c\uff0c\u5176\u4e2d\u5305\u62ec <a class=\"external-link\" href=\"https://github.com/ryanflorence\">Ryan Florence</a> \u7684 <a class=\"external-link\" href=\"https://github.com/reactions/component\">Reactions Component</a> \u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/trueadm\">Dominic Gannaway</a> \u7684\u7528 <a class=\"external-link\" href=\"https://gist.github.com/trueadm/17beb64288e30192f3aa29cad0218067\"><code class=\"language-javascript\">adopt</code> \u5173\u952e\u5b57</a> \u4f5c\u4e3a render props \u7684\u8bed\u6cd5\u7cd6\u7684\u63d0\u6848\u3002</li>\n<li><a class=\"external-link\" href=\"http://displayscript.org/introduction.html\">DisplayScript</a> \u4e2d\u7684 state \u53d8\u91cf\u548c state \u5355\u5143\u683c\u3002</li>\n<li>ReasonReact \u4e2d\u7684 <a class=\"external-link\" href=\"https://reasonml.github.io/reason-react/docs/en/state-actions-reducer.html\">Reducer components</a>\u3002</li>\n<li>Rx \u4e2d\u7684 <a class=\"external-link\" href=\"http://reactivex.io/rxjs/class/es6/Subscription.js~Subscription.html\">Subscriptions</a>\u3002</li>\n<li>Multicore OCaml \u63d0\u5230\u7684 <a class=\"external-link\" href=\"https://github.com/ocamllabs/ocaml-effects-tutorial#2-effectful-computations-in-a-pure-setting\">Algebraic effects</a>\u3002</li>\n</ul>\n<p><a class=\"external-link\" href=\"https://github.com/sebmarkbage\">Sebastian Markb\u00e5ge</a> \u60f3\u5230\u4e86 Hook \u6700\u521d\u7684\u8bbe\u8ba1\uff0c\u540e\u6765\u7ecf\u8fc7 <a class=\"external-link\" href=\"https://github.com/acdlite\">Andrew Clark</a>\uff0c<a class=\"external-link\" href=\"https://github.com/sophiebits\">Sophie Alpert</a>\uff0c<a class=\"external-link\" href=\"https://github.com/trueadm\">Dominic Gannaway</a>\uff0c\u548c React \u56e2\u961f\u7684\u5176\u4ed6\u6210\u5458\u7684\u63d0\u70bc\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/hooks-faq.md\">Edit this page</a></p></div></article>", "path": "/react/hooks-faq", "nav": ["/react/hooks-reference", "/react/testing"]}]}, {"key": "\u6d4b\u8bd5", "values": [{"key": "\u6d4b\u8bd5\u6982\u89c8", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u4f60\u53ef\u4ee5\u7528\u50cf\u6d4b\u8bd5\u5176\u4ed6 JavaScript \u4ee3\u7801\u7c7b\u4f3c\u7684\u65b9\u5f0f\u6d4b\u8bd5 React \u7ec4\u4ef6\u3002</p>\n<p>\u73b0\u5728\u6709\u8bb8\u591a\u79cd\u6d4b\u8bd5 React \u7ec4\u4ef6\u7684\u65b9\u6cd5\u3002\u5927\u4f53\u4e0a\u53ef\u4ee5\u88ab\u5206\u4e3a\u4e24\u7c7b\uff1a</p>\n<ul>\n<li><strong>\u6e32\u67d3\u7ec4\u4ef6\u6811</strong> \u5728\u4e00\u4e2a\u7b80\u5316\u7684\u6d4b\u8bd5\u73af\u5883\u4e2d\u6e32\u67d3\u7ec4\u4ef6\u6811\u5e76\u5bf9\u5b83\u4eec\u7684\u8f93\u51fa\u505a\u65ad\u8a00\u68c0\u67e5\u3002</li>\n<li><strong>\u8fd0\u884c\u5b8c\u6574\u5e94\u7528</strong> \u5728\u4e00\u4e2a\u771f\u5b9e\u7684\u6d4f\u89c8\u5668\u73af\u5883\u4e2d\u8fd0\u884c\u6574\u4e2a\u5e94\u7528\uff08\u4e5f\u88ab\u79f0\u4e3a\u201c\u7aef\u5230\u7aef\uff08end-to-end\uff09\u201d\u6d4b\u8bd5\uff09\u3002</li>\n</ul>\n<p>\u672c\u7ae0\u8282\u4e3b\u8981\u4e13\u6ce8\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e0b\u7684\u6d4b\u8bd5\u7b56\u7565\u3002\u867d\u7136\u5b8c\u6574\u7684\u7aef\u5230\u7aef\u6d4b\u8bd5\u5728\u9632\u6b62\u5bf9\u91cd\u8981\u5de5\u4f5c\u6d41\u7684\u591a\u6b21\u56de\u5f52\u65b9\u9762\u5f88\u6709\u4ef7\u503c\uff0c\u4f46\u5bf9 React \u7ec4\u4ef6\u6765\u8bf4\u8fd9\u7c7b\u6d4b\u8bd5\u5e76\u4e0d\u600e\u4e48\u9700\u8981\u5173\u6ce8\uff0c\u56e0\u6b64\u4e0d\u5728\u672c\u7ae0\u8282\u7684\u8ba8\u8bba\u8303\u56f4\u4e4b\u5185\u3002</p>\n<h3 id=\"tradeoffs\"><a class=\"anchor\" href=\"/react/testing#tradeoffs\"></a>\u6743\u8861 </h3>\n<p>\u5f53\u6311\u9009\u6d4b\u8bd5\u5de5\u5177\u7684\u65f6\u5019\uff0c\u6709\u4e9b\u7ec6\u8282\u503c\u5f97\u6211\u4eec\u6743\u8861\u8003\u8651\uff1a</p>\n<ul>\n<li><strong>\u8fed\u4ee3\u901f\u5ea6 vs \u771f\u5b9e\u73af\u5883\uff1a</strong> \u4e00\u4e9b\u5de5\u5177\u5728\u505a\u51fa\u6539\u52a8\u548c\u770b\u5230\u7ed3\u679c\u4e4b\u95f4\u63d0\u4f9b\u4e86\u975e\u5e38\u5feb\u901f\u7684\u53cd\u9988\u5faa\u73af\uff0c\u4f46\u6ca1\u6709\u7cbe\u786e\u7684\u6a21\u62df\u6d4f\u89c8\u5668\u7684\u884c\u4e3a\u3002\u53e6\u4e00\u4e9b\u5de5\u5177\uff0c\u4e5f\u8bb8\u4f7f\u7528\u4e86\u771f\u5b9e\u7684\u6d4f\u89c8\u5668\u73af\u5883\uff0c\u4f46\u5374\u964d\u4f4e\u4e86\u8fed\u4ee3\u901f\u5ea6\uff0c\u800c\u4e14\u5728\u6301\u7eed\u96c6\u6210\u670d\u52a1\u5668\u4e2d\u4e0d\u592a\u53ef\u9760\u3002</li>\n<li><strong>mock \u5230\u4ec0\u4e48\u7a0b\u5ea6\uff1a</strong> \u5bf9\u7ec4\u4ef6\u6765\u8bf4\uff0c\u201c\u5355\u5143\u6d4b\u8bd5\u201d\u548c\u201c\u96c6\u6210\u6d4b\u8bd5\u201d\u4e4b\u95f4\u7684\u5dee\u522b\u53ef\u80fd\u4f1a\u5f88\u6a21\u7cca\u3002\u5982\u679c\u4f60\u5728\u6d4b\u8bd5\u4e00\u4e2a\u8868\u5355\uff0c\u7528\u4f8b\u662f\u5426\u5e94\u8be5\u4e5f\u6d4b\u8bd5\u8868\u5355\u91cc\u7684\u6309\u94ae\u5462\uff1f\u4e00\u4e2a\u6309\u94ae\u7ec4\u4ef6\u53c8\u9700\u4e0d\u9700\u8981\u6709\u4ed6\u81ea\u5df1\u7684\u6d4b\u8bd5\u5957\u4ef6\uff1f\u91cd\u6784\u6309\u94ae\u7ec4\u4ef6\u662f\u5426\u5e94\u8be5\u5f71\u54cd\u8868\u5355\u7684\u6d4b\u8bd5\u7528\u4f8b\uff1f</li>\n</ul>\n<p>\u4e0d\u540c\u7684\u56e2\u961f\u6216\u4ea7\u54c1\u53ef\u80fd\u4f1a\u5f97\u51fa\u4e0d\u540c\u7684\u7b54\u6848\u3002</p>\n<h3 id=\"tools\"><a class=\"anchor\" href=\"/react/testing#tools\"></a>\u63a8\u8350\u7684\u5de5\u5177 </h3>\n<p><strong><a class=\"external-link\" href=\"https://facebook.github.io/jest/\">Jest</a></strong> \u662f\u4e00\u4e2a JavaScript \u6d4b\u8bd5\u8fd0\u884c\u5668\u3002\u5b83\u5141\u8bb8\u4f60\u4f7f\u7528 <a href=\"/react/testing-environments#mocking-a-rendering-surface\"><code class=\"language-javascript\">jsdom</code></a> \u64cd\u4f5c DOM \u3002\u5c3d\u7ba1 jsdom \u53ea\u662f\u5bf9\u6d4f\u89c8\u5668\u5de5\u4f5c\u8868\u73b0\u7684\u4e00\u4e2a\u8fd1\u4f3c\u6a21\u62df\uff0c\u5bf9\u6d4b\u8bd5 React \u7ec4\u4ef6\u6765\u8bf4\u5b83\u901a\u5e38\u4e5f\u5df2\u7ecf\u591f\u7528\u4e86\u3002Jest \u6709\u7740\u5341\u5206\u4f18\u79c0\u7684\u8fed\u4ee3\u901f\u5ea6\uff0c\u540c\u65f6\u8fd8\u63d0\u4f9b\u4e86\u82e5\u5e72\u5f3a\u5927\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u5b83\u53ef\u4ee5\u6a21\u62df <a href=\"/react/testing-environments#mocking-modules\">modules</a> \u548c <a href=\"/react/testing-environments#mocking-timers\">timers</a> \u8ba9\u4f60\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\u4ee3\u7801\u5982\u4f55\u6267\u884c\u3002</p>\n<p><strong><a class=\"external-link\" href=\"https://testing-library.com/react\">React \u6d4b\u8bd5\u5e93</a></strong>\u662f\u4e00\u7ec4\u80fd\u8ba9\u4f60\u4e0d\u4f9d\u8d56 React \u7ec4\u4ef6\u5177\u4f53\u5b9e\u73b0\u5bf9\u4ed6\u4eec\u8fdb\u884c\u6d4b\u8bd5\u7684\u8f85\u52a9\u5de5\u5177\u3002\u5b83\u8ba9\u91cd\u6784\u5de5\u4f5c\u53d8\u5f97\u8f7b\u800c\u6613\u4e3e\uff0c\u8fd8\u4f1a\u63a8\u52a8\u4f60\u62e5\u62b1\u6709\u5173\u65e0\u969c\u788d\u7684\u6700\u4f73\u5b9e\u8df5\u3002\u867d\u7136\u5b83\u4e0d\u80fd\u8ba9\u4f60\u7701\u7565\u5b50\u5143\u7d20\u6765\u6d45\uff08shallowly\uff09\u6e32\u67d3\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u4f46\u50cf Jest \u8fd9\u6837\u7684\u6d4b\u8bd5\u8fd0\u884c\u5668\u53ef\u4ee5\u901a\u8fc7 <a href=\"/react/testing-recipes#mocking-modules\">mocking</a> \u8ba9\u4f60\u505a\u5230\u3002</p>\n<h3 id=\"learn-more\"><a class=\"anchor\" href=\"/react/testing#learn-more\"></a>\u4e86\u89e3\u66f4\u591a </h3>\n<p>\u8fd9\u4e00\u7ae0\u8282\u88ab\u5212\u5206\u6210\u4e86\u4e24\u9875\u5185\u5bb9\uff1a</p>\n<ul>\n<li><a href=\"/react/testing-recipes\">\u6280\u5de7</a>\uff1a\u4e3a React \u7ec4\u4ef6\u7f16\u5199\u6d4b\u8bd5\u65f6\u7684\u5e38\u89c1\u6a21\u5f0f\u3002</li>\n<li><a href=\"/react/testing-environments\">\u73af\u5883</a>\uff1a\u4e3a React \u7ec4\u4ef6\u642d\u5efa\u6d4b\u8bd5\u73af\u5883\u7684\u65f6\u5019\u6709\u54ea\u4e9b\u8981\u8003\u8651\u7684\u4e1c\u897f\u3002</li>\n</ul></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/testing.md\">Edit this page</a></p></div></article>", "path": "/react/testing", "nav": ["/react/hooks-faq", "/react/testing-recipes"]}, {"key": "\u6d4b\u8bd5\u6280\u5de7", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u7ec4\u4ef6\u7684\u5e38\u89c1\u6d4b\u8bd5\u6a21\u5f0f\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u6b64\u7ae0\u8282\u5047\u8bbe\u4f60\u6b63\u5728\u4f7f\u7528 <a class=\"external-link\" href=\"https://jestjs.io/\">Jest</a> \u4f5c\u4e3a\u6d4b\u8bd5\u8fd0\u884c\u5668\u3002\u5982\u679c\u4f60\u4f7f\u7528\u4e0d\u540c\u7684\u6d4b\u8bd5\u8fd0\u884c\u5668\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8c03\u6574 API\uff0c\u4f46\u6574\u4f53\u7684\u89e3\u51b3\u65b9\u6848\u662f\u76f8\u540c\u7684\u3002\u5728<a href=\"/react/testing-environments\">\u6d4b\u8bd5\u73af\u5883</a>\u7ae0\u8282\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u8bbe\u7f6e\u6d4b\u8bd5\u73af\u5883\u7684\u7ec6\u8282\u3002</p>\n</div>\n<p>\u5728\u672c\u7ae0\u4e2d\uff0c\u6211\u4eec\u5c06\u4e3b\u8981\u4f7f\u7528\u51fd\u6570\u7ec4\u4ef6\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u6d4b\u8bd5\u7b56\u7565\u5e76\u4e0d\u4f9d\u8d56\u4e8e\u5b9e\u73b0\u7ec6\u8282\uff0c\u5b83\u5bf9\u4e8e class \u7ec4\u4ef6\u4e5f\u540c\u6837\u6709\u6548\u3002</p>\n<ul>\n<li><a href=\"/react/testing-recipes#setup--teardown\">\u521b\u5efa/\u6e05\u7406</a></li>\n<li><a href=\"/react/testing-recipes#act\"><code class=\"language-javascript\">act()</code></a></li>\n<li><a href=\"/react/testing-recipes#rendering\">\u6e32\u67d3</a></li>\n<li><a href=\"/react/testing-recipes#data-fetching\">\u6570\u636e\u83b7\u53d6</a></li>\n<li><a href=\"/react/testing-recipes#mocking-modules\">mock \u6a21\u5757</a></li>\n<li><a href=\"/react/testing-recipes#events\">\u4e8b\u4ef6</a></li>\n<li><a href=\"/react/testing-recipes#timers\">\u8ba1\u65f6\u5668</a></li>\n<li><a href=\"/react/testing-recipes#snapshot-testing\">\u5feb\u7167\u6d4b\u8bd5</a></li>\n<li><a href=\"/react/testing-recipes#multiple-renderers\">\u591a\u6e32\u67d3\u5668</a></li>\n<li><a href=\"/react/testing-recipes#something-missing\">\u7f3a\u5c11\u4ec0\u4e48?</a></li>\n</ul>\n\n<h3 id=\"setup--teardown\"><a class=\"anchor\" href=\"/react/testing-recipes#setup--teardown\"></a>\u521b\u5efa/\u6e05\u7406 </h3>\n<p>\u5bf9\u4e8e\u6bcf\u4e2a\u6d4b\u8bd5\uff0c\u6211\u4eec\u901a\u5e38\u5e0c\u671b\u5c06 React \u6811\u6e32\u67d3\u7ed9\u9644\u52a0\u5230 <code class=\"language-javascript\">document</code>\u7684 DOM \u5143\u7d20\u3002\u8fd9\u70b9\u5f88\u91cd\u8981\uff0c\u4ee5\u4fbf\u5b83\u53ef\u4ee5\u63a5\u6536 DOM \u4e8b\u4ef6\u3002\u5f53\u6d4b\u8bd5\u7ed3\u675f\u65f6\uff0c\u6211\u4eec\u9700\u8981\u201c\u6e05\u7406\u201d\u5e76\u4ece <code class=\"language-javascript\">document</code> \u4e2d\u5378\u8f7d\u6811\u3002</p>\n<p>\u5e38\u89c1\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u4e00\u5bf9 <code class=\"language-javascript\">beforeEach</code> \u548c <code class=\"language-javascript\">afterEach</code> \u5757\uff0c\u4ee5\u4fbf\u5b83\u4eec\u4e00\u76f4\u8fd0\u884c\uff0c\u5e76\u9694\u79bb\u6d4b\u8bd5\u672c\u8eab\u9020\u6210\u7684\u5f71\u54cd\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u6d4b\u8bd5\u6a21\u5f0f\uff0c\u4f46\u8bf7\u6ce8\u610f\uff0c<em>\u5373\u4f7f\u6d4b\u8bd5\u5931\u8d25</em>\uff0c\u4e5f\u9700\u8981\u6267\u884c\u6e05\u7406\u3002\u5426\u5219\uff0c\u6d4b\u8bd5\u53ef\u80fd\u4f1a\u5bfc\u81f4\u201c\u6cc4\u6f0f\u201d\uff0c\u5e76\u4e14\u4e00\u4e2a\u6d4b\u8bd5\u53ef\u80fd\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u6d4b\u8bd5\u7684\u884c\u4e3a\u3002\u8fd9\u4f7f\u5f97\u5176\u96be\u4ee5\u8c03\u8bd5\u3002</p>\n\n<h3 id=\"act\"><a class=\"anchor\" href=\"/react/testing-recipes#act\"></a><code class=\"language-javascript\">act()</code> </h3>\n<p>\u5728\u7f16\u5199 UI \u6d4b\u8bd5\u65f6\uff0c\u53ef\u4ee5\u5c06\u6e32\u67d3\u3001\u7528\u6237\u4e8b\u4ef6\u6216\u6570\u636e\u83b7\u53d6\u7b49\u4efb\u52a1\u89c6\u4e3a\u4e0e\u7528\u6237\u754c\u9762\u4ea4\u4e92\u7684\u201c\u5355\u5143\u201d\u3002<code class=\"language-javascript\">react-dom/test-utils</code> \u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a <a href=\"/react/test-utils#act\"><code class=\"language-javascript\">act()</code></a> \u7684 helper\uff0c\u5b83\u786e\u4fdd\u5728\u8fdb\u884c\u4efb\u4f55\u65ad\u8a00\u4e4b\u524d\uff0c\u4e0e\u8fd9\u4e9b\u201c\u5355\u5143\u201d\u76f8\u5173\u7684\u6240\u6709\u66f4\u65b0\u90fd\u5df2\u5904\u7406\u5e76\u5e94\u7528\u4e8e DOM\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u6e32\u67d3\u7ec4\u4ef6</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \u8fdb\u884c\u65ad\u8a00</span></code></pre></div>\n<p>\u8fd9\u6709\u52a9\u4e8e\u4f7f\u6d4b\u8bd5\u8fd0\u884c\u66f4\u63a5\u8fd1\u771f\u5b9e\u7528\u6237\u5728\u4f7f\u7528\u5e94\u7528\u7a0b\u5e8f\u65f6\u7684\u4f53\u9a8c\u3002\u8fd9\u4e9b\u793a\u4f8b\u7684\u5176\u4f59\u90e8\u5206\u4f7f\u7528 <code class=\"language-javascript\">act()</code> \u6765\u4f5c\u51fa\u8fd9\u4e9b\u4fdd\u8bc1\u3002</p>\n<p>\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\u76f4\u63a5\u4f7f\u7528 <code class=\"language-javascript\">act()</code> \u6709\u70b9\u8fc7\u4e8e\u5197\u957f\u3002\u4e3a\u4e86\u907f\u514d\u4e00\u4e9b\u6837\u677f\u4ee3\u7801\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://testing-library.com/react\">React \u6d4b\u8bd5\u5e93</a>\uff0c\u8fd9\u4e9b helper \u662f\u4f7f\u7528 <code class=\"language-javascript\">act()</code> \u51fd\u6570\u8fdb\u884c\u5c01\u88c5\u7684\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">act</code> \u540d\u79f0\u6765\u81ea <a class=\"external-link\" href=\"http://wiki.c2.com/?ArrangeActAssert\">Arrange-Act-Assert</a> \u6a21\u5f0f\u3002</p>\n</div>\n\n<h3 id=\"rendering\"><a class=\"anchor\" href=\"/react/testing-recipes#rendering\"></a>\u6e32\u67d3 </h3>\n<p>\u901a\u5e38\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u6d4b\u8bd5\u7ec4\u4ef6\u5bf9\u4e8e\u7ed9\u5b9a\u7684 prop \u6e32\u67d3\u662f\u5426\u6b63\u786e\u3002\u6b64\u65f6\u5e94\u8003\u8651\u5b9e\u73b0\u57fa\u4e8e prop \u6e32\u67d3\u6d88\u606f\u7684\u7b80\u5355\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// hello.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u4f60\u597d\uff0c</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\uff01</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u563f\uff0c\u964c\u751f\u4eba</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u53ef\u4ee5\u4e3a\u8fd9\u4e2a\u7ec4\u4ef6\u7f16\u5199\u6d4b\u8bd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// hello.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Hello <span class=\"token keyword\">from</span> <span class=\"token string\">\"./hello\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u6e32\u67d3\u6709\u6216\u65e0\u540d\u79f0\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u563f\uff0c\u964c\u751f\u4eba\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Jenny<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u4f60\u597d\uff0cJenny\uff01\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Margaret<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u4f60\u597d\uff0cMargaret\uff01\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n<h3 id=\"data-fetching\"><a class=\"anchor\" href=\"/react/testing-recipes#data-fetching\"></a>\u6570\u636e\u83b7\u53d6 </h3>\n<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u5047\u6570\u636e\u6765 mock \u8bf7\u6c42\uff0c\u800c\u4e0d\u662f\u5728\u6240\u6709\u6d4b\u8bd5\u4e2d\u8c03\u7528\u771f\u6b63\u7684 API\u3002\u4f7f\u7528\u201c\u5047\u201d\u6570\u636e mock \u6570\u636e\u83b7\u53d6\u53ef\u4ee5\u9632\u6b62\u7531\u4e8e\u540e\u7aef\u4e0d\u53ef\u7528\u800c\u5bfc\u81f4\u7684\u6d4b\u8bd5\u4e0d\u7a33\u5b9a\uff0c\u5e76\u4f7f\u5b83\u4eec\u8fd0\u884c\u5f97\u66f4\u5feb\u3002\u6ce8\u610f\uff1a\u4f60\u53ef\u80fd\u4ecd\u7136\u5e0c\u671b\u4f7f\u7528\u4e00\u4e2a<a href=\"/react/testing-environments#end-to-end-tests-aka-e2e-tests\">\u201c\u7aef\u5230\u7aef\u201d</a>\u7684\u6846\u67b6\u6765\u8fd0\u884c\u6d4b\u8bd5\u5b50\u96c6\uff0c\u8be5\u6846\u67b6\u53ef\u663e\u793a\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u4e00\u8d77\u5de5\u4f5c\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// user.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">,</span> setUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchUserData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchUserData</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"\u52a0\u8f7d\u4e2d...\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"> \u5c81\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      \u4f4f\u5728 </span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u53ef\u4ee5\u4e3a\u5b83\u7f16\u5199\u6d4b\u8bd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// user.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> User <span class=\"token keyword\">from</span> <span class=\"token string\">\"./user\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u6e32\u67d3\u7528\u6237\u6570\u636e\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> fakeUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joni Baez\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token string\">\"32\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">\"123, Charming Avenue\"</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>global<span class=\"token punctuation\">,</span> <span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span></span><span class=\"gatsby-highlight-code-line\">    Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token function-variable function\">json</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token comment\">// \u4f7f\u7528\u5f02\u6b65\u7684 act \u5e94\u7528\u6267\u884c\u6210\u529f\u7684 promise</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>123<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"summary\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"strong\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toContain</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u6e05\u7406 mock \u4ee5\u786e\u4fdd\u6d4b\u8bd5\u5b8c\u5168\u9694\u79bb</span></span><span class=\"gatsby-highlight-code-line\">  global<span class=\"token punctuation\">.</span>fetch<span class=\"token punctuation\">.</span><span class=\"token function\">mockRestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n<h3 id=\"mocking-modules\"><a class=\"anchor\" href=\"/react/testing-recipes#mocking-modules\"></a>mock \u6a21\u5757 </h3>\n<p>\u6709\u4e9b\u6a21\u5757\u53ef\u80fd\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u4e0d\u80fd\u5f88\u597d\u5730\u5de5\u4f5c\uff0c\u6216\u8005\u5bf9\u6d4b\u8bd5\u672c\u8eab\u4e0d\u662f\u5f88\u91cd\u8981\u3002\u4f7f\u7528\u865a\u62df\u6570\u636e\u6765 mock \u8fd9\u4e9b\u6a21\u5757\u53ef\u4ee5\u4f7f\u4f60\u4e3a\u4ee3\u7801\u7f16\u5199\u6d4b\u8bd5\u53d8\u5f97\u66f4\u5bb9\u6613\u3002</p>\n<p>\u8003\u8651\u4e00\u4e2a\u5d4c\u5165\u7b2c\u4e09\u65b9 <code class=\"language-javascript\">GoogleMap</code> \u7ec4\u4ef6\u7684 <code class=\"language-javascript\">Contact</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// map.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> LoadScript<span class=\"token punctuation\">,</span> GoogleMap <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-google-maps\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadScript</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>script-loader<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">googleMapsApiKey</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>YOUR_API_KEY<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GoogleMap</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example-map<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">center</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LoadScript</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// contact.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Map <span class=\"token keyword\">from</span> <span class=\"token string\">\"./map\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Contact</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        \u8054\u7cfb </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\uff0c\u901a\u8fc7</span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"mailto:\"</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          email\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        \u6216\u8005\u4ed6\u4eec\u7684 </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          \u7f51\u7ad9\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\u3002\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>address</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span></span> <span class=\"token attr-name\">center</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u4e0d\u60f3\u5728\u6d4b\u8bd5\u4e2d\u52a0\u8f7d\u8fd9\u4e2a\u7ec4\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u4f9d\u8d56 mock \u5230\u4e00\u4e2a\u865a\u62df\u7ec4\u4ef6\uff0c\u7136\u540e\u8fd0\u884c\u6211\u4eec\u7684\u6d4b\u8bd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// contact.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Contact <span class=\"token keyword\">from</span> <span class=\"token string\">\"./contact\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MockedMap <span class=\"token keyword\">from</span> <span class=\"token string\">\"./map\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">jest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./map\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">DummyMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>lat<span class=\"token punctuation\">}</span><span class=\"token plain-text\">:</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>long<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u5e94\u6e32\u67d3\u8054\u7cfb\u4fe1\u606f\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> center <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">long</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Contact</span></span>\n        <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Joni Baez<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">email</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>test@example.com<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">site</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://test.com<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">center</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>center<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n      container\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[data-testid='email']\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mailto:test@example.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[data-testid=\"site\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://test.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[data-testid=\"map\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"0:0\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n<h3 id=\"events\"><a class=\"anchor\" href=\"/react/testing-recipes#events\"></a>Events </h3>\n<p>\u6211\u4eec\u5efa\u8bae\u5728 DOM \u5143\u7d20\u4e0a\u89e6\u53d1\u771f\u6b63\u7684 DOM \u4e8b\u4ef6\uff0c\u7136\u540e\u5bf9\u7ed3\u679c\u8fdb\u884c\u65ad\u8a00\u3002\u8003\u8651\u4e00\u4e2a <code class=\"language-javascript\">Toggle</code> \u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// toggle.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Toggle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">previousState</span> <span class=\"token operator\">=&gt;</span> <span class=\"token operator\">!</span>previousState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toggle<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>state <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"Turn off\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"Turn on\"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u53ef\u4ee5\u4e3a\u5b83\u7f16\u5199\u6d4b\u8bd5\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// toggle.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Toggle <span class=\"token keyword\">from</span> <span class=\"token string\">\"./toggle\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u70b9\u51fb\u65f6\u66f4\u65b0\u503c\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onChange <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toggle</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u83b7\u53d6\u6309\u94ae\u5143\u7d20\uff0c\u5e76\u89e6\u53d1\u70b9\u51fb\u4e8b\u4ef6</span>\n  <span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[data-testid=toggle]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn on\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    button<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn off\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      button<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn on\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent\">MDN</a>\u63cf\u8ff0\u4e86\u4e0d\u540c\u7684 DOM \u4e8b\u4ef6\u53ca\u5176\u5c5e\u6027\u3002\u6ce8\u610f\uff0c\u4f60\u9700\u8981\u5728\u521b\u5efa\u7684\u6bcf\u4e2a\u4e8b\u4ef6\u4e2d\u4f20\u9012 <code class=\"language-javascript\">{ bubbles: true }</code> \u624d\u80fd\u5230\u8fbe React \u76d1\u542c\u5668\uff0c\u56e0\u4e3a React \u4f1a\u81ea\u52a8\u5c06\u4e8b\u4ef6\u59d4\u6258\u7ed9 root\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>React \u6d4b\u8bd5\u5e93\u4e3a\u89e6\u53d1\u4e8b\u4ef6\u63d0\u4f9b\u4e86\u4e00\u4e2a<a class=\"external-link\" href=\"https://testing-library.com/docs/dom-testing-library/api-events\">\u66f4\u7b80\u6d01 helper</a>\u3002</p>\n</div>\n\n<h3 id=\"timers\"><a class=\"anchor\" href=\"/react/testing-recipes#timers\"></a>\u8ba1\u65f6\u5668 </h3>\n<p>\u4f60\u7684\u4ee3\u7801\u53ef\u80fd\u4f1a\u4f7f\u7528\u57fa\u4e8e\u8ba1\u65f6\u5668\u7684\u51fd\u6570\uff08\u5982 <code class=\"language-javascript\">setTimeout</code>\uff09\u6765\u5b89\u6392\u5c06\u6765\u66f4\u591a\u7684\u5de5\u4f5c\u3002\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u591a\u9879\u9009\u62e9\u9762\u677f\u7b49\u5f85\u9009\u62e9\u5e76\u524d\u8fdb\uff0c\u5982\u679c\u5728 5 \u79d2\u5185\u6ca1\u6709\u505a\u51fa\u9009\u62e9\uff0c\u5219\u8d85\u65f6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// card.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Card</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> timeoutID <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      props<span class=\"token punctuation\">.</span><span class=\"token function\">onSelect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeoutID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>onSelect<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">choice</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>choice<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">data-testid</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>choice<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> props<span class=\"token punctuation\">.</span><span class=\"token function\">onSelect</span><span class=\"token punctuation\">(</span>choice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>choice<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528 <a class=\"external-link\" href=\"https://jestjs.io/docs/en/timer-mocks\">Jest \u7684\u8ba1\u65f6\u5668 mock</a> \u4e3a\u8fd9\u4e2a\u7ec4\u4ef6\u7f16\u5199\u6d4b\u8bd5\uff0c\u5e76\u6d4b\u8bd5\u5b83\u53ef\u80fd\u5904\u4e8e\u7684\u4e0d\u540c\u72b6\u6001\u3002</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// card.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> Card <span class=\"token keyword\">from</span> <span class=\"token string\">\"./card\"</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  jest<span class=\"token punctuation\">.</span><span class=\"token function\">useFakeTimers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  jest<span class=\"token punctuation\">.</span><span class=\"token function\">useRealTimers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u8d85\u65f6\u540e\u5e94\u9009\u62e9 null\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onSelect <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Card</span></span> <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u63d0\u524d 100 \u6beb\u79d2\u6267\u884c</span></span>  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// \u7136\u540e\u63d0\u524d 5 \u79d2\u6267\u884c</span></span>  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u79fb\u9664\u65f6\u5e94\u8fdb\u884c\u6e05\u7406\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onSelect <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Card</span></span> <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"></span>  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u5378\u8f7d\u5e94\u7528\u7a0b\u5e8f</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"></span>  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u5e94\u63a5\u53d7\u9009\u62e9\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onSelect <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Card</span></span> <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    container\n      <span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[data-testid='2']\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4f60\u53ea\u80fd\u5728\u67d0\u4e9b\u6d4b\u8bd5\u4e2d\u4f7f\u7528\u5047\u8ba1\u65f6\u5668\u3002\u5728\u4e0a\u9762\uff0c\u6211\u4eec\u901a\u8fc7\u8c03\u7528 <code class=\"language-javascript\">jest.useFakeTimers()</code> \u6765\u542f\u7528\u5b83\u4eec\u3002\u5b83\u4eec\u63d0\u4f9b\u7684\u4e3b\u8981\u4f18\u52bf\u662f\uff0c\u4f60\u7684\u6d4b\u8bd5\u5b9e\u9645\u4e0a\u4e0d\u9700\u8981\u7b49\u5f85 5 \u79d2\u6765\u6267\u884c\uff0c\u800c\u4e14\u4f60\u4e5f\u4e0d\u9700\u8981\u4e3a\u4e86\u6d4b\u8bd5\u800c\u4f7f\u7ec4\u4ef6\u4ee3\u7801\u66f4\u52a0\u590d\u6742\u3002</p>\n\n<h3 id=\"snapshot-testing\"><a class=\"anchor\" href=\"/react/testing-recipes#snapshot-testing\"></a>\u5feb\u7167\u6d4b\u8bd5 </h3>\n<p>\u50cf Jest \u8fd9\u6837\u7684\u6846\u67b6\u8fd8\u5141\u8bb8\u4f60\u4f7f\u7528 <a class=\"external-link\" href=\"https://jestjs.io/docs/en/snapshot-testing\"><code class=\"language-javascript\">toMatchSnapshot</code> / <code class=\"language-javascript\">toMatchInlineSnapshot</code></a> \u4fdd\u5b58\u6570\u636e\u7684\u201c\u5feb\u7167\u201d\u3002\u6709\u4e86\u8fd9\u4e9b\uff0c\u6211\u4eec\u53ef\u4ee5\u201c\u4fdd\u5b58\u201d\u6e32\u67d3\u7684\u7ec4\u4ef6\u8f93\u51fa\uff0c\u5e76\u786e\u4fdd\u5bf9\u5b83\u7684\u66f4\u65b0\u4f5c\u4e3a\u5bf9\u5feb\u7167\u7684\u66f4\u65b0\u663e\u5f0f\u63d0\u4ea4\u3002</p>\n<p>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6e32\u67d3\u4e00\u4e2a\u7ec4\u4ef6\u5e76\u4f7f\u7528 <a class=\"external-link\" href=\"https://www.npmjs.com/package/pretty\"><code class=\"language-javascript\">pretty</code></a> \u5305\u5bf9\u6e32\u67d3\u7684 HTML \u8fdb\u884c\u683c\u5f0f\u5316\uff0c\u7136\u540e\u5c06\u5176\u4fdd\u5b58\u4e3a\u5185\u8054\u5feb\u7167\uff1a</p>\n<div class=\"gatsby-highlight has-highlighted-lines\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token comment\">// hello.test.js, again</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> pretty <span class=\"token keyword\">from</span> <span class=\"token string\">\"pretty\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Hello <span class=\"token keyword\">from</span> <span class=\"token string\">\"./hello\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u4e00\u4e2a DOM \u5143\u7d20\u4f5c\u4e3a\u6e32\u67d3\u76ee\u6807</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9000\u51fa\u65f6\u8fdb\u884c\u6e05\u7406</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\u5e94\u6e32\u67d3\u95ee\u5019\u8bed\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchInlineSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* ... \u7531 jest \u81ea\u52a8\u586b\u5145 ... */</span></span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Jenny<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchInlineSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* ... \u7531 jest \u81ea\u52a8\u586b\u5145 ... */</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Margaret<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchInlineSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* ... \u7531 jest \u81ea\u52a8\u586b\u5145 ... */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u901a\u5e38\uff0c\u8fdb\u884c\u5177\u4f53\u7684\u65ad\u8a00\u6bd4\u4f7f\u7528\u5feb\u7167\u66f4\u597d\u3002\u8fd9\u7c7b\u6d4b\u8bd5\u5305\u62ec\u5b9e\u73b0\u7ec6\u8282\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613\u4e2d\u65ad\uff0c\u5e76\u4e14\u56e2\u961f\u53ef\u80fd\u5bf9\u5feb\u7167\u4e2d\u65ad\u4e0d\u654f\u611f\u3002\u9009\u62e9\u6027\u5730 <a href=\"/react/testing-recipes#mocking-modules\">mock \u4e00\u4e9b\u5b50\u7ec4\u4ef6</a>\u53ef\u4ee5\u5e2e\u52a9\u51cf\u5c0f\u5feb\u7167\u7684\u5927\u5c0f\uff0c\u5e76\u4f7f\u5b83\u4eec\u5728\u4ee3\u7801\u8bc4\u5ba1\u4e2d\u4fdd\u6301\u53ef\u8bfb\u6027\u3002</p>\n\n<h3 id=\"multiple-renderers\"><a class=\"anchor\" href=\"/react/testing-recipes#multiple-renderers\"></a>\u591a\u6e32\u67d3\u5668 </h3>\n<p>\u5728\u6781\u5c11\u6570\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u6b63\u5728\u4f7f\u7528\u591a\u4e2a\u6e32\u67d3\u5668\u7684\u7ec4\u4ef6\u4e0a\u8fd0\u884c\u6d4b\u8bd5\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u6b63\u5728\u4f7f\u7528 <code class=\"language-javascript\">react-test-renderer</code> \u7ec4\u4ef6\u4e0a\u8fd0\u884c\u5feb\u7167\u6d4b\u8bd5\uff0c\u8be5\u7ec4\u4ef6\u5185\u90e8\u4f7f\u7528 <code class=\"language-javascript\">react-dom</code> \u7684 <code class=\"language-javascript\">render</code> \u6765\u6e32\u67d3\u5b50\u7ec4\u4ef6\u7684\u4e00\u4e9b\u5185\u5bb9\u3002\u5728\u8fd9\u4e2a\u573a\u666f\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0e\u5b83\u4eec\u7684\u6e32\u67d3\u5668\u76f8\u5bf9\u5e94\u7684 <code class=\"language-javascript\">act()</code> \u6765\u5305\u88c5\u66f4\u65b0\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token keyword\">as</span> domAct <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token keyword\">as</span> testAct<span class=\"token punctuation\">,</span> create <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-test-renderer\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">let</span> root<span class=\"token punctuation\">;</span>\n<span class=\"token function\">domAct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">testAct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    root <span class=\"token operator\">=</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n<h3 id=\"something-missing\"><a class=\"anchor\" href=\"/react/testing-recipes#something-missing\"></a>\u7f3a\u5c11\u4ec0\u4e48\uff1f </h3>\n<p>\u5982\u679c\u6709\u4e00\u4e9b\u5e38\u89c1\u573a\u666f\u6ca1\u6709\u8986\u76d6\uff0c\u8bf7\u5728\u6587\u6863\u7f51\u7ad9\u7684 <a class=\"external-link\" href=\"https://github.com/reactjs/reactjs.org/issues\">issue \u8ddf\u8e2a\u5668</a>\u4e0a\u544a\u8bc9\u6211\u4eec\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/testing-recipes.md\">Edit this page</a></p></div></article>", "path": "/react/testing-recipes", "nav": ["/react/testing", "/react/testing-environments"]}, {"key": "\u6d4b\u8bd5\u73af\u5883", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><!-- \u672c\u6587\u6863\u9002\u7528\u4e8e\u90a3\u4e9b\u719f\u6089 JavaScript \u5e76\u4e14\u53ef\u80fd\u5df2\u7ecf\u4f7f\u7528\u5b83\u7f16\u5199\u8fc7\u6d4b\u8bd5\u7684\u4eba\u3002\u5b83\u53ef\u4ee5\u4f5c\u4e3a React \u7ec4\u4ef6\u6d4b\u8bd5\u73af\u5883\u5dee\u5f02\u7684\u53c2\u8003\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u5dee\u5f02\u4f1a\u5982\u4f55\u5f71\u54cd\u4ed6\u4eec\u7f16\u5199\u7684\u6d4b\u8bd5\u3002\u672c\u6587\u6863\u503e\u5411\u57fa\u4e8e Web \u7684 react-dom \u7ec4\u4ef6\u7684\u6d4b\u8bd5\uff0c\u4f46\u4e5f\u6709\u57fa\u4e8e\u5176\u4ed6\u6e32\u67d3\u5668\u6d4b\u8bd5\u7684\u6ce8\u91ca\u3002 -->\n<p>\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86\u53ef\u80fd\u4f1a\u5f71\u54cd\u4f60\u6d4b\u8bd5\u73af\u5883\u7684\u56e0\u7d20\uff0c\u5e76\u5305\u542b\u67d0\u4e9b\u573a\u666f\u4e0b\u7684\u5efa\u8bae\u3002</p>\n<h3 id=\"test-runners\"><a class=\"anchor\" href=\"/react/testing-environments#test-runners\"></a>\u6d4b\u8bd5\u8fd0\u884c\u5668 </h3>\n<p>\u4f7f\u7528 <a class=\"external-link\" href=\"https://jestjs.io/\">Jest</a>\uff0c<a class=\"external-link\" href=\"https://mochajs.org/\">mocha</a>\uff0c<a class=\"external-link\" href=\"https://github.com/avajs/ava\">ava</a> \u7b49\u6d4b\u8bd5\u8fd0\u884c\u5668\u80fd\u50cf\u7f16\u5199 JavaScript \u4e00\u6837\u7f16\u5199\u6d4b\u8bd5\u5957\u4ef6\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a\u5f00\u53d1\u8fc7\u7a0b\u7684\u73af\u8282\u8fd0\u884c\u3002\u6b64\u5916\uff0c\u6d4b\u8bd5\u5957\u4ef6\u4e5f\u5c06\u4f5c\u4e3a\u6301\u7eed\u96c6\u6210\u7684\u73af\u8282\u8fd0\u884c\u3002</p>\n<ul>\n<li>Jest \u4e0e React \u9879\u76ee\u5e7f\u6cdb\u517c\u5bb9\uff0c\u652f\u6301\u8bf8\u5982\u6a21\u62df <a href=\"/react/testing-environments#mocking-modules\">\u6a21\u5757</a>\u3001<a href=\"/react/testing-environments#mocking-timers\">\u8ba1\u65f6\u5668</a> \u548c <a href=\"/react/testing-environments#mocking-a-rendering-surface\"><code class=\"language-javascript\">jsdom</code></a> \u7b49\u7279\u6027\u3002<strong>\u5982\u679c\u4f60\u4f7f\u7528 Create React App\uff0c<a class=\"external-link\" href=\"https://facebook.github.io/create-react-app/docs/running-tests\">Jest \u5df2\u7ecf\u80fd\u591f\u5f00\u7bb1\u5373\u7528</a>\u4e14\u5305\u542b\u8bb8\u591a\u5b9e\u7528\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002</strong></li>\n<li>\u50cf <a class=\"external-link\" href=\"https://mochajs.org/#running-mocha-in-the-browser\">mocha</a> \u8fd9\u6837\u7684\u5e93\u5728\u771f\u5b9e\u6d4f\u89c8\u5668\u73af\u5883\u4e0b\u8fd0\u884c\u826f\u597d\uff0c\u5e76\u4e14\u53ef\u4ee5\u4e3a\u660e\u786e\u9700\u8981\u5b83\u7684\u6d4b\u8bd5\u63d0\u4f9b\u5e2e\u52a9\u3002</li>\n<li>\u7aef\u5bf9\u7aef\u6d4b\u8bd5\u7528\u4e8e\u6d4b\u8bd5\u8de8\u591a\u4e2a\u9875\u9762\u7684\u957f\u6d41\u7a0b\uff0c\u5e76\u4e14\u9700\u8981<a href=\"/react/testing-environments#end-to-end-tests-aka-e2e-tests\">\u4e0d\u540c\u7684\u8bbe\u7f6e</a>\u3002</li>\n</ul>\n<h3 id=\"mocking-a-rendering-surface\"><a class=\"anchor\" href=\"/react/testing-environments#mocking-a-rendering-surface\"></a>\u6a21\u62df\u6e32\u67d3\u8868\u9762 </h3>\n<p>\u6d4b\u8bd5\u901a\u5e38\u5728\u65e0\u6cd5\u8bbf\u95ee\u771f\u5b9e\u6e32\u67d3\u8868\u9762\uff08\u5982\u6d4f\u89c8\u5668\uff09\u7684\u73af\u5883\u4e2d\u8fd0\u884c\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u73af\u5883\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/jsdom/jsdom\"><code class=\"language-javascript\">jsdom</code></a> \u6765\u6a21\u62df\u6d4f\u89c8\u5668\uff0c\u8fd9\u662f\u4e00\u4e2a\u5728 Node.js \u5185\u8fd0\u884c\u7684\u8f7b\u91cf\u7ea7\u6d4f\u89c8\u5668\u5b9e\u73b0\u3002</p>\n<p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0cjsdom \u7684\u884c\u4e3a\u7c7b\u4f3c\u4e8e\u5e38\u89c4\u6d4f\u89c8\u5668\uff0c\u4f46\u4e0d\u5177\u5907\u5982<a class=\"external-link\" href=\"https://github.com/jsdom/jsdom#unimplemented-parts-of-the-web-platform\">\u5e03\u5c40\u548c\u5bfc\u822a</a>\u7684\u529f\u80fd\u3002\u8fd9\u5bf9\u4e8e\u5927\u591a\u6570\u57fa\u4e8e Web \u7684\u7ec4\u4ef6\u6d4b\u8bd5\u4ecd\u7136\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u7684\u8fd0\u884c\u6bd4\u4e3a\u6bcf\u4e2a\u6d4b\u8bd5\u542f\u52a8\u6d4f\u89c8\u5668\u7684\u65b9\u5f0f\u6548\u7387\u66f4\u9ad8\u3002\u5e76\u4e14\u7531\u4e8e\u5b83\u4e0e\u4f60\u7f16\u5199\u7684\u6d4b\u8bd5\u8fd0\u884c\u5728\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\uff0c\u6240\u4ee5\u4f60\u80fd\u591f\u7f16\u5199\u4ee3\u7801\u6765\u68c0\u67e5\u548c\u65ad\u8a00\u6e32\u67d3\u7684 DOM\u3002</p>\n<p>\u5c31\u50cf\u5728\u771f\u5b9e\u7684\u6d4f\u89c8\u5668\u4e2d\u4e00\u6837\uff0cjsdom \u8ba9\u6211\u4eec\u6a21\u62df\u7528\u6237\u4ea4\u4e92\uff1b\u6d4b\u8bd5\u53ef\u4ee5\u5728 DOM \u8282\u70b9\u4e0a\u6d3e\u53d1\u4e8b\u4ef6\uff0c\u7136\u540e\u89c2\u5bdf\u5e76\u65ad\u8a00\u8fd9\u4e9b\u64cd\u4f5c\u7684\u526f\u4f5c\u7528<a href=\"/react/testing-recipes#events\"><small>(\u4f8b\u5b50)</small></a>\u3002</p>\n<p>\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u8bbe\u7f6e\u7f16\u5199\u5927\u90e8\u5206 UI \u6d4b\u8bd5\uff1a\u4f7f\u7528 Jest \u4f5c\u4e3a\u6d4b\u8bd5\u8fd0\u884c\u5668\uff0c\u6e32\u67d3\u5230 jsdom\uff0c\u4f7f\u7528 <code class=\"language-javascript\">act()</code> \u8f85\u52a9\u51fd\u6570<a href=\"/react/testing-recipes\"><small>(\u4f8b\u5b50)</small></a>\u63d0\u4f9b\u7684\u80fd\u529b\u901a\u8fc7\u4e00\u7cfb\u5217\u7684\u6d4f\u89c8\u5668\u4e8b\u4ef6\u6765\u6a21\u62df\u7528\u6237\u4ea4\u4e92\u884c\u4e3a\u3002\u4f8b\u5982\uff0c\u5927\u91cf React \u81ea\u5df1\u7684\u6d4b\u8bd5\u90fd\u662f\u7528\u8fd9\u79cd\u7ec4\u5408\u7f16\u5199\u7684\u3002</p>\n<p>\u5982\u679c\u60a8\u6b63\u5728\u7f16\u5199\u4e00\u4e2a\u4e3b\u8981\u6d4b\u8bd5\u6d4f\u89c8\u5668\u7279\u5b9a\u884c\u4e3a\u7684\u5e93\uff0c\u5e76\u4e14\u9700\u8981\u5e03\u5c40\u6216\u771f\u5b9e\u8f93\u5165\u7b49\u539f\u751f\u6d4f\u89c8\u5668\u884c\u4e3a\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u4f7f\u7528\u50cf <a class=\"external-link\" href=\"https://mochajs.org/\">mocha</a> \u8fd9\u6837\u7684\u6846\u67b6\u3002</p>\n<p>\u5728\u4f60 <em>\u65e0\u6cd5</em> \u6a21\u62df DOM \u73af\u5883\uff08\u4f8b\u5982\uff0c\u5728 Node.js \u4e0a\u6d4b\u8bd5 React Native \u7ec4\u4ef6\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528 <a href=\"/react/test-utils#simulate\">\u4e8b\u4ef6\u6a21\u62df\u8f85\u52a9\u51fd\u6570</a> \u6765\u6a21\u62df\u4e0e\u5143\u7d20\u7684\u4ea4\u4e92\u3002\u6216\u8005\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://testing-library.com/docs/react-native-testing-library/intro\"><code class=\"language-javascript\">@testing-library/react-native</code></a> \u4e2d\u7684 <code class=\"language-javascript\">fireEvent</code> \u8f85\u52a9\u51fd\u6570\u3002</p>\n<p>\u8bf8\u5982 <a class=\"external-link\" href=\"https://www.cypress.io/\">Cypress</a>\uff0c<a class=\"external-link\" href=\"https://github.com/GoogleChrome/puppeteer\">puppeteer</a> \u548c <a class=\"external-link\" href=\"https://www.seleniumhq.org/projects/webdriver/\">webdriver</a> \u7b49\u6846\u67b6\u5bf9\u4e8e\u8fd0\u884c<a href=\"/react/testing-environments#end-to-end-tests-aka-e2e-tests\">\u7aef\u5bf9\u7aef\u6d4b\u8bd5</a> \u90fd\u975e\u5e38\u6709\u7528\u3002</p>\n<h3 id=\"mocking-functions\"><a class=\"anchor\" href=\"/react/testing-environments#mocking-functions\"></a>\u6a21\u62df\u529f\u80fd </h3>\n<p>\u5728\u7f16\u5199\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5e0c\u671b\u6a21\u62df\u4ee3\u7801\u5728\u6d4b\u8bd5\u73af\u5883\u8f83\u771f\u5b9e\u73af\u5883\u4e2d\u7f3a\u5931\u7684\u7b49\u6548\u90e8\u5206\uff08\u4f8b\u5982\uff0c\u5728 Node.js \u4e2d\u68c0\u67e5 <code class=\"language-javascript\">navigator.onLine</code> \u7684\u72b6\u6001\uff09\u3002\u6d4b\u8bd5\u8fd8\u53ef\u4ee5\u76d1\u89c6\u67d0\u4e9b\u529f\u80fd\uff0c\u5e76\u89c2\u5bdf\u6d4b\u8bd5\u7684\u5176\u4ed6\u90e8\u5206\u5982\u4f55\u4e0e\u5b83\u4eec\u8fdb\u884c\u4ea4\u4e92\u3002\u6709\u9009\u62e9\u7684\u5c06\u8fd9\u4e9b\u529f\u80fd\u6a21\u62df\u4e3a\u6d4b\u8bd5\u53cb\u597d\u7684\u7248\u672c\u662f\u5f88\u6709\u7528\u7684\u3002</p>\n<p>\u8fd9\u5bf9\u4e8e\u6570\u636e\u83b7\u53d6\u5c24\u5176\u6709\u7528\u3002\u901a\u5e38\u6700\u597d\u4f7f\u7528\u201c\u5047\u201d\u6570\u636e\u8fdb\u884c\u6d4b\u8bd5\uff0c\u4ee5\u907f\u514d\u4ece\u5b9e\u9645 API \u7aef\u83b7\u53d6\u6570\u636e\u53ef\u80fd\u5bfc\u81f4\u7684\u7f13\u6162\u548c\u4e0d\u7a33\u5b9a<a href=\"/react/testing-recipes#data-fetching\"><small>\uff08\u4f8b\u5b50\uff09</small></a>\u3002\u8fd9\u6837\u505a\u6709\u52a9\u4e8e\u8ba9\u6d4b\u8bd5\u53d8\u5f97\u53ef\u9884\u6d4b\u3002\u50cf <a class=\"external-link\" href=\"https://jestjs.io/\">Jest</a> \u4e0e <a class=\"external-link\" href=\"https://sinonjs.org/\">sinon</a> \u8fd9\u6837\u7684\u7c7b\u5e93\uff0c\u652f\u6301\u6a21\u62df\u529f\u80fd\u3002\u5bf9\u4e8e\u7aef\u5bf9\u7aef\u6d4b\u8bd5\uff0c\u867d\u7136\u6a21\u62df\u7f51\u7edc\u53ef\u80fd\u66f4\u52a0\u56f0\u96be\uff0c\u4f46\u4f60\u53ef\u80fd\u8fd8\u60f3\u5bf9\u771f\u5b9e\u7684 API \u7aef\u8fdb\u884c\u6d4b\u8bd5\u3002</p>\n<h3 id=\"mocking-modules\"><a class=\"anchor\" href=\"/react/testing-environments#mocking-modules\"></a>\u6a21\u62df\u6a21\u5757 </h3>\n<p>\u4e00\u4e9b\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u4f9d\u8d56\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u65e0\u6cd5\u6b63\u5e38\u8fd0\u884c\u7684\u6a21\u5757\uff0c\u6216\u8005\u8bf4\u8fd9\u4e9b\u6a21\u5757\u5bf9\u4e8e\u6211\u4eec\u7684\u6d4b\u8bd5\u5e76\u4e0d\u5fc5\u8981\u3002\u90a3\u4e48\uff0c\u901a\u8fc7\u9009\u62e9\u6027\u5730\u6a21\u62df\u6765\u66ff\u6362\u8fd9\u4e9b\u6a21\u5757\u662f\u5f88\u6709\u7528\u7684<a href=\"/react/testing-recipes#mocking-modules\"><small>\uff08\u4f8b\u5b50\uff09</small></a>\u3002</p>\n<p>\u5728 Node.js \u4e2d\uff0c\u6d4b\u8bd5\u8fd0\u884c\u5668\u5982 Jest <a class=\"external-link\" href=\"https://jestjs.io/docs/en/manual-mocks\">\u652f\u6301\u6a21\u62df\u6a21\u5757</a>\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u50cf <a class=\"external-link\" href=\"https://www.npmjs.com/package/mock-require\"><code class=\"language-javascript\">mock-require</code></a> \u8fd9\u6837\u7684\u7c7b\u5e93\u3002</p>\n<h3 id=\"mocking-timers\"><a class=\"anchor\" href=\"/react/testing-environments#mocking-timers\"></a>\u6a21\u62df\u8ba1\u65f6\u5668 </h3>\n<p>\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u4f7f\u7528\u57fa\u4e8e\u65f6\u95f4\u7684\u51fd\u6570\u5982 <code class=\"language-javascript\">setTimeout</code>\u3001<code class=\"language-javascript\">setInterval</code> \u548c <code class=\"language-javascript\">Date.now</code> \u7b49\u3002\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\uff0c\u4f7f\u7528\u53ef\u4ee5\u624b\u52a8\u201c\u63a8\u8fdb\u201d\u65f6\u95f4\u7684\u66ff\u4ee3\u7269\u6765\u6a21\u62df\u8fd9\u4e9b\u529f\u80fd\u4f1a\u5f88\u6709\u5e2e\u52a9\u3002\u5b83\u4f1a\u786e\u4fdd\u4f60\u7684\u6d4b\u8bd5\u5feb\u901f\u8fd0\u884c\uff01\u4f9d\u8d56\u4e8e\u8ba1\u65f6\u5668\u7684\u6d4b\u8bd5\u4ecd\u5c06\u6309\u7167\u987a\u5e8f\u89e3\u6790\uff0c\u4f46\u4f1a\u66f4\u5feb<a href=\"/react/testing-recipes#timers\"><small>\uff08\u4f8b\u5b50\uff09</small></a>\u3002\u5927\u90e8\u5206\u6d4b\u8bd5\u6846\u67b6\uff0c\u5305\u62ec <a class=\"external-link\" href=\"https://jestjs.io/docs/en/timer-mocks\">Jest</a>\u3001<a class=\"external-link\" href=\"https://sinonjs.org/releases/latest/fake-timers/\">sinon</a> \u548c <a class=\"external-link\" href=\"https://github.com/sinonjs/lolex\">lolex</a> \u90fd\u5141\u8bb8\u4f60\u5728\u6d4b\u8bd5\u4e2d\u6a21\u62df\u8ba1\u65f6\u5668\u3002</p>\n<p>\u6709\u4e9b\u65f6\u5019\u53ef\u80fd\u4f60\u4e0d\u60f3\u8981\u6a21\u62df\u8ba1\u65f6\u5668\u3002\u4f8b\u5982\uff0c\u5728\u4f60\u6d4b\u8bd5\u52a8\u753b\u65f6\uff0c\u6216\u662f\u4ea4\u4e92\u7aef\u5bf9\u65f6\u95f4\u8f83\u4e3a\u654f\u611f\u7684\u60c5\u51b5\u4e0b\uff08\u5982 API \u8bbf\u95ee\u901f\u7387\u9650\u5236\u5668\uff09\u3002\u5177\u6709\u8ba1\u65f6\u5668\u6a21\u62df\u7684\u5e93\u5141\u8bb8\u4f60\u5728\u6bcf\u4e2a\u6d4b\u8bd5/\u5957\u4ef6\u4e0a\u542f\u7528\u6216\u7981\u7528\u8fd9\u4e2a\u529f\u80fd\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u660e\u786e\u5730\u9009\u62e9\u8fd9\u4e9b\u6d4b\u8bd5\u7684\u8fd0\u884c\u65b9\u5f0f\u3002</p>\n<h3 id=\"end-to-end-tests-aka-e2e-tests\"><a class=\"anchor\" href=\"/react/testing-environments#end-to-end-tests-aka-e2e-tests\"></a>\u7aef\u5bf9\u7aef\u6d4b\u8bd5 </h3>\n<p>\u7aef\u5bf9\u7aef\u6d4b\u8bd5\u5bf9\u4e8e\u6d4b\u8bd5\u66f4\u957f\u7684\u5de5\u4f5c\u6d41\u7a0b\u975e\u5e38\u6709\u7528\uff0c\u7279\u522b\u662f\u5f53\u5b83\u4eec\u5bf9\u4e8e\u4f60\u7684\u4e1a\u52a1\uff08\u4f8b\u5982\u4ed8\u6b3e\u6216\u6ce8\u518c\uff09\u7279\u522b\u91cd\u8981\u65f6\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u6d4b\u8bd5\uff0c\u4f60\u53ef\u80fd\u4f1a\u5e0c\u671b\u6d4b\u8bd5\u771f\u5b9e\u6d4f\u89c8\u5668\u5982\u4f55\u6e32\u67d3\u6574\u4e2a\u5e94\u7528\u3001\u4ece\u771f\u5b9e\u7684 API \u7aef\u83b7\u53d6\u6570\u636e\u3001\u4f7f\u7528 session \u548c cookies \u4ee5\u53ca\u5728\u4e0d\u540c\u7684\u94fe\u63a5\u95f4\u5bfc\u822a\u7b49\u529f\u80fd\u3002\u4f60\u53ef\u80fd\u8fd8\u5e0c\u671b\u4e0d\u4ec5\u5728 DOM \u72b6\u6001\u4e0a\u8fdb\u884c\u65ad\u8a00\uff0c\u800c\u540c\u65f6\u4e5f\u5728\u540e\u7aef\u6570\u636e\u4e0a\u8fdb\u884c\u6821\u9a8c\uff08\u4f8b\u5982\uff0c\u9a8c\u8bc1\u66f4\u65b0\u662f\u5426\u5df2\u7ecf\u5728\u6570\u636e\u5e93\u4e2d\u6301\u4e45\u5316\uff09\u3002</p>\n<p>\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u50cf <a class=\"external-link\" href=\"https://www.cypress.io/\">Cypress</a>\uff0c<a class=\"external-link\" href=\"https://playwright.dev\">Playwright</a> \u7b49\u7c7b\u4f3c\u6846\u67b6\u6216\u8005\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/GoogleChrome/puppeteer\">Puppeteer</a> \u8fd9\u6837\u7684\u5e93\uff0c\u8fd9\u6837\u4f60\u5c31\u53ef\u4ee5\u5728\u591a\u4e2a\u8def\u7531\u4e4b\u95f4\u5bfc\u822a\u5207\u6362\uff0c\u5e76\u4e14\u4e0d\u4ec5\u80fd\u591f\u5728\u6d4f\u89c8\u5668\u4e2d\u5bf9\u526f\u4f5c\u7528\u8fdb\u884c\u65ad\u8a00\u4e5f\u80fd\u591f\u5728\u540e\u7aef\u8fd9\u4e48\u505a\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/testing-environments.md\">Edit this page</a></p></div></article>", "path": "/react/testing-environments", "nav": ["/react/testing-recipes", "/react/how-to-contribute"]}]}, {"key": "\u8d21\u732e", "values": [{"key": "\u5982\u4f55\u53c2\u4e0e", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>React \u662f Facebook \u9996\u6279\u5f00\u6e90\u9879\u76ee\u4e2d\u7684\u4e00\u5458\uff0c\u5f00\u53d1\u72b6\u6001\u4fdd\u6301\u6d3b\u8dc3\uff0c\u5e76\u5728 <a class=\"external-link\" href=\"https://www.facebook.com\">facebook.com</a> \u4e0a\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u6e90\u4ee3\u7801\u3002\u73b0\u5728\uff0c\u6211\u4eec\u6b63\u4e0d\u65ad\u89e3\u51b3\u82e5\u5e72\u4e2a\u95ee\u9898\u4ee5\u4f7f\u53c2\u4e0e\u8d21\u732e React \u5c3d\u53ef\u80fd\u5bb9\u6613\u548c\u516c\u5f00\u900f\u660e\uff0c\u867d\u7136\u76ee\u524d\u8fd8\u5dee\u5f97\u5f88\u8fdc\u3002\u6211\u4eec\u5e0c\u671b\u672c\u7bc7\u6587\u7ae0\u80fd\u591f\u89e3\u91ca\u6e05\u695a\u8d21\u732e\u7684\u6d41\u7a0b\uff0c\u56de\u7b54\u4f60\u53ef\u80fd\u4f1a\u6709\u7684\u4e00\u4e9b\u95ee\u9898\u3002</p>\n<h3 id=\"code-of-conduct\"><a class=\"anchor\" href=\"/react/how-to-contribute#code-of-conduct\"></a><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/main/CODE_OF_CONDUCT.md\">\u884c\u4e3a\u89c4\u8303</a> </h3>\n<p>Facebook \u5c06<a class=\"external-link\" href=\"https://www.contributor-covenant.org/zh-cn/version/1/4/code-of-conduct\">\u53c2\u4e0e\u8005\u516c\u7ea6</a>\u4f5c\u4e3a\u884c\u4e3a\u89c4\u8303\uff0c\u6211\u4eec\u5e0c\u671b\u53c2\u4e0e\u9879\u76ee\u7684\u5404\u4f4d\u4e25\u683c\u9075\u5b88\u3002\u8bf7\u9605\u8bfb<a class=\"external-link\" href=\"https://github.com/facebook/react/blob/main/CODE_OF_CONDUCT.md\">\u5168\u6587</a>\u53bb\u4e86\u89e3\u4ec0\u4e48\u884c\u4e3a\u5141\u8bb8\uff0c\u4ec0\u4e48\u884c\u4e3a\u4e0d\u5141\u8bb8\u3002</p>\n<h3 id=\"open-development\"><a class=\"anchor\" href=\"/react/how-to-contribute#open-development\"></a>\u4eba\u4eba\u7686\u53ef\u5f00\u53d1 </h3>\n<p>React \u7684\u4e00\u5207\u5de5\u4f5c\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react\">GitHub</a> \u4e0a\u5b8c\u6210\uff0c\u6838\u5fc3\u56e2\u961f\u53ca\u5176\u4ee5\u5916\u7684\u8d21\u732e\u8005\u53d1\u9001 pull requests\uff0c\u5176\u4ee3\u7801\u8bc4\u5ba1\u6d41\u7a0b\u7686\u4e3a\u4e00\u81f4\u3002</p>\n<h3 id=\"semantic-versioning\"><a class=\"anchor\" href=\"/react/how-to-contribute#semantic-versioning\"></a>\u8bed\u4e49\u5316\u7248\u672c </h3>\n<p>React \u9075\u5faa<a class=\"external-link\" href=\"https://semver.org/lang/zh-CN/\">\u8bed\u4e49\u5316\u7248\u672c</a>\u3002\u6211\u4eec\u5bf9\u91cd\u8981\u7684\u6f0f\u6d1e\u4fee\u590d\u53d1\u5e03\u4fee\u8ba2\u53f7\uff1b\u5bf9\u65b0\u7279\u6027\u6216\u4e0d\u91cd\u8981\u7684\u53d8\u66f4\u53d1\u5e03\u6b21\u7248\u672c\u53f7\uff1b\u5bf9\u91cd\u5927\u4e14\u4e0d\u517c\u5bb9\u7684\u53d8\u66f4\u53d1\u5e03\u4e3b\u7248\u672c\u53f7\u3002\u6211\u4eec\u5728\u5f00\u53d1\u91cd\u5927\u4e14\u4e0d\u517c\u5bb9\u7684\u53d8\u66f4\u65f6\uff0c\u8fd8\u4f1a\u5728\u6b21\u7248\u672c\u53f7\u7528 deprecation warnings \u8ba9\u7528\u6237\u5f97\u77e5\u5c06\u6765\u7684\u53d8\u66f4\u5e76\u63d0\u524d\u8fc1\u79fb\u4ee3\u7801\u3002\u8bf7\u67e5\u770b<a href=\"/react/faq-versioning\">\u7248\u672c\u53f7\u89c4\u5219</a>\u6765\u4e86\u89e3\u66f4\u591a\u6211\u4eec\u5728\u7a33\u5b9a\u6027\u548c\u6e10\u8fdb\u8fc1\u79fb\u65b9\u9762\u8981\u505a\u54ea\u4e9b\u4e8b\u60c5\u3002</p>\n<p>\u6bcf\u4e00\u4e2a\u91cd\u8981\u53d8\u66f4\u53c2\u89c1 <a class=\"external-link\" href=\"https://github.com/facebook/react/blob/main/CHANGELOG.md\">changelog file</a>\u3002</p>\n<h3 id=\"branch-organization\"><a class=\"anchor\" href=\"/react/how-to-contribute#branch-organization\"></a>\u5206\u652f\u7ba1\u7406 </h3>\n<p>\u8bf7\u76f4\u63a5\u63d0\u4ea4\u4f60\u7684\u53d8\u66f4\u81f3 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main\"><code class=\"language-javascript\">main branch</code></a>\u3002\u5bf9\u4e8e\u5f00\u53d1\u6216\u5373\u5c06\u63a8\u51fa\u7684\u7248\u672c\uff0c\u6211\u4eec\u4e0d\u4f1a\u53e6\u5efa\u5206\u652f\u3002\u6211\u4eec\u5c3d\u529b\u4fdd\u6301 <code class=\"language-javascript\">main</code> \u4e0d\u51fa\u95ee\u9898\uff0c\u5e76\u901a\u8fc7\u6240\u6709\u6d4b\u8bd5\u3002</p>\n<p>\u5408\u5e76\u8fdb\u5165 <code class=\"language-javascript\">main</code> \u7684\u4ee3\u7801\u5fc5\u987b\u4e0e\u6700\u65b0\u7a33\u5b9a\u7248\u672c\u517c\u5bb9\uff0c\u53ef\u4ee5\u6709\u989d\u5916\u7279\u6027\uff0c\u4f46\u4e0d\u80fd\u6709\u91cd\u5927\u53d8\u66f4\u3002\u6211\u4eec\u5e94\u4ece <code class=\"language-javascript\">main</code> \u968f\u65f6\u80fd\u53d1\u5e03\u65b0\u7684\u6b21\u7248\u672c\u53f7\u3002</p>\n<h3 id=\"feature-flags\"><a class=\"anchor\" href=\"/react/how-to-contribute#feature-flags\"></a>\u7279\u6027\u5207\u6362\uff08Feature Flags\uff09</h3>\n<p>\u6211\u4eec\u4e3a\u4e86\u4f7f <code class=\"language-javascript\">main</code> \u80fd\u591f\u53d1\u5e03\uff0c\u8981\u6c42\u91cd\u5927\u4e14\u4e0d\u517c\u5bb9\u7684\u53d8\u66f4\u548c\u5b9e\u9a8c\u6027\u7684\u7279\u6027\u5fc5\u987b\u7528\u7279\u6027\u5207\u6362\u3002</p>\n<p><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/main/packages/shared/ReactFeatureFlags.js\"><code class=\"language-javascript\">packages/shared/ReactFeatureFlags.js</code></a> \u4e2d\u5b9a\u4e49\u4e86\u7279\u6027\u5207\u6362\u3002React \u7684\u4e00\u4e9b\u7248\u672c\u53ef\u80fd\u542f\u7528\u4e86\u4e0d\u540c\u7684\u7279\u6027\u5207\u6362\uff1b\u6bd4\u5982\uff0cReact Native \u53ef\u80fd\u4e0e React DOM \u6709\u4e0d\u540c\u7684\u914d\u7f6e\u3002\u8fd9\u4e9b\u7279\u6027\u5207\u6362\u89c1\u4e8e <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/shared/forks\"><code class=\"language-javascript\">packages/shared/forks</code></a>\u3002\u7279\u6027\u5207\u6362\u4f7f\u7528\u4e86\u9759\u6001\u7c7b\u578b\u68c0\u67e5\u5668 Flow\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u8fd0\u884c <code class=\"language-javascript\">yarn flow</code> \u6765\u786e\u8ba4\u6240\u6709\u5fc5\u8981\u6587\u4ef6\u5df2\u66f4\u65b0\u3002</p>\n<p>React \u7684\u6784\u5efa\u7cfb\u7edf\uff08Build System\uff09\u4f1a\u5148\u5220\u53bb\u7981\u7528\u7684\u7279\u6027\u5206\u652f\uff0c\u4e4b\u540e\u518d\u53d1\u5e03\u3002\u6bcf\u6b21 commit \u90fd\u4f1a\u8fd0\u884c\u6301\u7eed\u96c6\u6210\uff08Continuous Integration\uff09\u6765\u68c0\u67e5\u5305\uff08Bundle\uff09\u5927\u5c0f\u7684\u53d8\u5316\u3002\u5305\u5927\u5c0f\u7684\u53d8\u5316\u53ef\u4ee5\u7528\u6765\u8868\u660e\u67d0\u7279\u6027\u6b63\u786e\u5408\u5e76\u3002</p>\n<h3 id=\"bugs\"><a class=\"anchor\" href=\"/react/how-to-contribute#bugs\"></a>\u6f0f\u6d1e </h3>\n<h4 id=\"where-to-find-known-issues\"><a class=\"anchor\" href=\"/react/how-to-contribute#where-to-find-known-issues\"></a>\u4f55\u5904\u67e5\u627e\u5df2\u77e5 issue </h4>\n<p>\u6211\u4eec\u7528 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues\">GitHub Issues</a> \u6765\u516c\u5f00\u6f0f\u6d1e\u3002\u6211\u4eec\u5bc6\u5207\u5173\u6ce8\u8be5\u7248\u5757\uff0c\u5185\u90e8\u89e3\u51b3 bug \u65f6\u4e5f\u4f1a\u60f3\u529e\u6cd5\u8bf4\u660e\u6e05\u695a\u3002\u5728\u4f60\u63d0\u4ea4 issue \u524d\uff0c\u8bf7\u786e\u5b9a\u6ca1\u6709\u91cd\u590d issue \u51fa\u73b0\u3002</p>\n<h4 id=\"reporting-new-issues\"><a class=\"anchor\" href=\"/react/how-to-contribute#reporting-new-issues\"></a>\u62a5\u544a\u65b0\u7684 issue </h4>\n<p>\u4fee\u590d bug \u7684\u6700\u4f73\u65b9\u6cd5\u662f\u7ed9\u51fa\u7f29\u7565\u7248\u7684\u6d4b\u8bd5\u7528\u4f8b\u3002\u8fd9\u4e2a <a class=\"external-link\" href=\"https://jsfiddle.net/Luktwrdm/\">JSFiddle \u6a21\u677f</a>\u662f\u4e2a\u4e0d\u9519\u7684\u8d77\u70b9\u3002</p>\n<h4 id=\"security-bugs\"><a class=\"anchor\" href=\"/react/how-to-contribute#security-bugs\"></a>\u5b89\u5168\u6f0f\u6d1e </h4>\n<p>\u4e3a\u4e86\u53d1\u73b0\u5b89\u5168\u6f0f\u6d1e\uff0cFacebook \u5b9e\u884c\u4e86\u6f0f\u6d1e<a class=\"external-link\" href=\"https://www.facebook.com/whitehat/\">\u4e3e\u62a5\u5956\u52b1\u5236\u5ea6</a>\uff08Bounty Program\uff09\u3002\u4e3a\u6b64\uff0c\u8bf7\u4e0d\u8981\u5c06\u8fd9\u7c7b\u6f0f\u6d1e\u63d0\u4ea4\u5230 public issues\uff0c\u800c\u8981\u9075\u5faa\u4e3e\u62a5\u5956\u52b1\u5236\u5ea6\u9875\u9762\u6240\u63cf\u8ff0\u7684\u6d41\u7a0b\u3002</p>\n<h3 id=\"how-to-get-in-touch\"><a class=\"anchor\" href=\"/react/how-to-contribute#how-to-get-in-touch\"></a>\u5982\u4f55\u8054\u7cfb\u6211\u4eec </h3>\n<ul>\n<li>\u56e0\u7279\u7f51\u4e2d\u7ee7\u804a\u5929\uff08IRC\uff09\uff1a <a class=\"external-link\" href=\"https://webchat.freenode.net/?channels=reactjs\">#reactjs on freenode</a></li>\n<li><a class=\"external-link\" href=\"https://zh-hans.reactjs.org//community/support.html#popular-discussion-forums\">\u8bba\u575b</a></li>\n</ul>\n<p>\u4f60\u5982\u679c\u9700\u8981\u6709\u5173 React \u7684\u5e2e\u52a9\uff0c\u8fd8\u53ef\u4ee5\u524d\u5f80 Discord \u804a\u5929\u5e73\u53f0\uff0c\u8fd9\u91cc\u5efa\u6709 React \u7528\u6237\u4eec\u7684<a class=\"external-link\" href=\"https://www.reactiflux.com/\">\u6d3b\u8dc3\u793e\u533a</a>\u3002</p>\n<h3 id=\"proposing-a-change\"><a class=\"anchor\" href=\"/react/how-to-contribute#proposing-a-change\"></a>\u63d0\u51fa\u53d8\u66f4 </h3>\n<p>\u5982\u679c\u4f60\u60f3\u6539\u53d8\u516c\u5f00\u7684 API\uff0c\u6216\u8005\u5bf9\u5b9e\u73b0\u6709\u4e0d\u5c0f\u7684\u53d8\u66f4\uff0c\u6211\u4eec\u5efa\u8bae\u4f60<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/new\">\u53d1\u8d77 issue</a>\uff0c\u8fd9\u4f1a\u8ba9\u6211\u4eec\u5148\u5bf9\u4f60\u7684\u63d0\u8bae\u8fbe\u6210\u4e00\u81f4\uff0c\u7136\u540e\u4f60\u518d\u7740\u624b\u5de5\u4f5c\u3002</p>\n<p>\u5982\u679c\u53ea\u662f\u4fee\u590d\u6f0f\u6d1e\uff0c\u4f60\u5f53\u7136\u53ef\u4ee5\u7acb\u5373\u63d0\u4ea4 pull request\uff0c\u4e0d\u8fc7\u6211\u4eec\u8fd8\u662f\u5efa\u8bae\u5148\u53bb\u63d0\u51fa issue \u6765\u8bf4\u660e\u4f60\u4fee\u590d\u4e86\u4ec0\u4e48\uff0c\u8fd9\u5c31\u5bf9\u4e00\u79cd\u60c5\u51b5\u6765\u8bf4\u5c31\u5f88\u65b9\u4fbf\uff1a\u6211\u4eec\u6ca1\u6709\u63a5\u53d7\u7279\u5b9a bug \u7684\u4fee\u590d\u4f46\u60f3\u8ddf\u8fdb\u8be5 issue \u7684\u60c5\u51b5\u3002</p>\n<h3 id=\"your-first-pull-request\"><a class=\"anchor\" href=\"/react/how-to-contribute#your-first-pull-request\"></a>\u9996\u4e2a Pull Request </h3>\n<p>\u5728\u5199\u7b2c\u4e00\u4e2a Pull Request\uff1f\u4f60\u53ef\u4ee5\u4ece\u8fd9\u4e00\u7cfb\u5217\u89c6\u9891\u4e2d\u5b66\u4e60\u600e\u4e48\u505a\uff1a</p>\n<p><strong><a class=\"external-link\" href=\"https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github\">How to Contribute to an Open Source Project on GitHub</a></strong></p>\n<p>\u4e3a\u4e86\u4f7f\u4f60\u80fd\u591f\u5feb\u901f\u4e0a\u624b\u548c\u719f\u6089\u8d21\u732e\u6d41\u7a0b\uff0c\u6211\u4eec\u8fd9\u91cc\u6709\u4e2a\u5217\u8868 <strong><a class=\"external-link\" href=\"https://github.com/facebook/react/issues?q=is:open+is:issue+label:%22good+first+issue%22\">good first issues</a></strong>\uff0c\u91cc\u9762\u6709\u76f8\u5bf9\u6ca1\u90a3\u4e48\u7b3c\u7edf\u7684\u6f0f\u6d1e\uff0c\u4ece\u8fd9\u5f00\u59cb\u662f\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002</p>\n<p>\u5982\u679c\u4f60\u60f3\u89e3\u51b3\u4e00\u4e2a issue\uff0c\u8bf7\u786e\u5b9a\u68c0\u67e5\u4e86\u8be5 issue \u4e0b\u7684\u8bc4\u8bba\u4ee5\u9632\u6709\u4eba\u6b63\u5728\u5904\u7406\u5b83\u3002\u5982\u679c\u76ee\u524d\u6ca1\u4eba\u5728\u5904\u7406\u8be5 issue\uff0c\u90a3\u4e48\u8bf7\u7559\u4e0b\u8bc4\u8bba\u53bb\u8868\u660e\u4f60\u60f3\u5904\u7406\u8be5 issue \u4ee5\u4fbf\u5176\u4ed6\u4eba\u4e0d\u4f1a\u610f\u5916\u91cd\u590d\u4f60\u7684\u5de5\u4f5c\u3002</p>\n<p>\u5982\u679c\u6709\u4eba\u7559\u8a00\u8868\u660e\u8981\u5904\u7406\u8be5 issue \u4f46\u662f\u8d85\u8fc7\u4e24\u5468\u6ca1\u6709\u8ddf\u8fdb\uff0c\u4f60\u53ef\u4ee5\u63a5\u624b\u5de5\u4f5c\uff0c\u4e0d\u8fc7\u4e5f\u5e94\u8be5\u7559\u8a00\u8bf4\u660e\u3002</p>\n<h3 id=\"sending-a-pull-request\"><a class=\"anchor\" href=\"/react/how-to-contribute#sending-a-pull-request\"></a>\u63d0\u4ea4 Pull Request </h3>\n<p>\u6838\u5fc3\u56e2\u961f\u65f6\u523b\u5173\u6ce8 pull requests\uff0c\u6211\u4eec\u4f1a\u5148\u8bc4\u5ba1\u4f60\u7684 pull request\uff0c\u4e4b\u540e\u53ef\u80fd\u4f1a\u5408\u5e76\uff0c\u53ef\u80fd\u4f1a\u8981\u6c42\u518d\u6b21\u66f4\u6539\uff0c\u4e5f\u53ef\u80fd\u4f1a\u5173\u95ed\u8be5 pull request \u5e76\u5bf9\u6b64\u4f5c\u51fa\u89e3\u91ca\u3002\u5bf9\u4e8e API \u4e0a\u7684\u53d8\u66f4\uff0c\u6211\u4eec\u53ef\u80fd\u5f97\u786e\u8ba4\u5728 Facebook.com \u4e0a\u7684\u5185\u90e8 API \u4f7f\u7528\u65b9\u6cd5\uff0c\u56e0\u6b64\u8be5\u53d8\u66f4\u53ef\u80fd\u4f1a\u63a8\u8fdf\u3002\u6211\u4eec\u4f1a\u5c3d\u529b\u5168\u7a0b\u66f4\u65b0\u548c\u53cd\u9988\u3002</p>\n<p><strong>\u63d0\u4ea4 pull request \u524d</strong>\uff0c\u8bf7\u786e\u4fdd\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p>\n<ol>\n<li>Fork <a class=\"external-link\" href=\"https://github.com/facebook/react\">\u6b64\u4ed3\u5e93</a>\uff0c\u4ece <code class=\"language-javascript\">main</code> \u521b\u5efa\u5206\u652f\u3002</li>\n<li>\u5728\u4ed3\u5e93\u6839\u76ee\u5f55\u4e0b\u6267\u884c <code class=\"language-javascript\">yarn</code>\u3002</li>\n<li>\u5982\u679c\u4f60\u4fee\u590d\u4e86 bug \u6216\u8005\u6dfb\u52a0\u4e86\u4ee3\u7801\uff0c\u800c\u8fd9\u4e9b\u5185\u5bb9\u9700\u8981\u6d4b\u8bd5\uff0c\u8bf7\u6dfb\u52a0\u6d4b\u8bd5\uff01</li>\n<li>\u786e\u4fdd\u901a\u8fc7\u6d4b\u8bd5\u5957\u4ef6\uff08<code class=\"language-javascript\">yarn test</code>\uff09\u3002\u63d0\u793a\uff1a\u5f00\u53d1\u73af\u5883\u4e0b\uff0c<code class=\"language-javascript\">yarn test --watch TestName</code> \u5f88\u6709\u7528\u3002</li>\n<li>\u751f\u4ea7\u73af\u5883\u4e0b\uff0c\u6267\u884c <code class=\"language-javascript\">yarn test --prod</code>  \u6765\u8fdb\u884c\u6d4b\u8bd5\u3002</li>\n<li>\u5982\u679c\u9700\u8981\u8c03\u8bd5\uff0c\u8bf7\u6267\u884c <code class=\"language-javascript\">yarn debug-test --watch TestName</code>\uff0c\u6253\u5f00 <code class=\"language-javascript\">chrome://inspect</code>\uff0c \u4e4b\u540e\u518d\u6253\u5f00 \u201c\u5ba1\u67e5\u201d\u3002</li>\n<li>\u4f7f\u7528 <a class=\"external-link\" href=\"https://github.com/prettier/prettier\">prettier</a>\uff08<code class=\"language-javascript\">yarn prettier</code>\uff09\u6765\u683c\u5f0f\u5316\u4ee3\u7801\u3002</li>\n<li>\u786e\u4fdd lint \u6821\u9a8c\u4ee3\u7801\uff08<code class=\"language-javascript\">yarn lint</code>\uff09\u3002\u63d0\u793a\uff1a\u6267\u884c <code class=\"language-javascript\">yarn linc</code> \u53bb\u53ea\u68c0\u67e5\u66f4\u6539\u8fc7\u7684\u6587\u4ef6\u3002</li>\n<li>\u8fd0\u884c <a class=\"external-link\" href=\"https://flowtype.org/\">Flow</a> \u6765\u7c7b\u578b\u68c0\u67e5\uff08<code class=\"language-javascript\">yarn flow</code>\uff09\u3002</li>\n<li>\u8bf7\u7b7e\u8ba2\u8d21\u732e\u8005\u8bb8\u53ef\u8bc1\u534f\u8bae\uff08Contributor License Agreement\uff09\u3002</li>\n</ol>\n<h3 id=\"contributor-license-agreement-cla\"><a class=\"anchor\" href=\"/react/how-to-contribute#contributor-license-agreement-cla\"></a>\u8d21\u732e\u8005\u8bb8\u53ef\u8bc1\u534f\u8bae </h3>\n<p>\u4e3a\u4e86\u8ba9\u4f60\u7684 pull request \u5f97\u5230\u63a5\u53d7\uff0c\u4f60\u5f97\u63d0\u4ea4\u8d21\u732e\u8005\u8bb8\u53ef\u8bc1\u534f\u8bae\u3002\u4f60\u53ea\u9700\u63d0\u4ea4\u8be5\u534f\u8bae\u4e00\u6b21\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u66fe\u7ecf\u5bf9\u53e6\u4e00\u4e2a Facebook \u5f00\u6e90\u9879\u76ee\u63d0\u4ea4\u8fc7\uff0c\u90a3\u4e48\u4f60\u5df2\u7ecf\u51c6\u5907\u597d\u4e86\u3002\u5982\u679c\u4f60\u662f\u7b2c\u4e00\u6b21\u63d0\u4ea4 pull request\uff0c\u8bf7\u8ba9\u6211\u4eec\u5f97\u77e5\u4f60\u5df2\u63d0\u4ea4\u534f\u8bae\uff0c\u8fd9\u6837\u6211\u4eec\u80fd\u591a\u65b9\u6838\u5bf9\u4f60\u7684 GitHub \u7528\u6237\u540d\u3002</p>\n<p><strong><a class=\"external-link\" href=\"https://code.facebook.com/cla\">\u8bf7\u5728\u8fd9\u91cc\u7b7e\u8ba2\u8d21\u732e\u8005\u8bb8\u53ef\u8bc1\u534f\u8bae</a></strong></p>\n<h3 id=\"contribution-prerequisites\"><a class=\"anchor\" href=\"/react/how-to-contribute#contribution-prerequisites\"></a>\u5fc5\u8981\u6761\u4ef6 </h3>\n<ul>\n<li>\u4f60\u9700\u8981\u5b89\u88c5 <a class=\"external-link\" href=\"https://nodejs.org\">Node</a> \u7684 LTS \u7248\u672c\u548c <a class=\"external-link\" href=\"https://yarnpkg.com/en/\">Yarn</a> v1.2.0+\u3002</li>\n<li>\u5df2\u5b89\u88c5 <a class=\"external-link\" href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\">JDK</a>\u3002</li>\n<li>\u4f60\u5df2\u5b89\u88c5 <code class=\"language-javascript\">gcc</code>\uff08\u6216\u8005\u4f60\u5728\u6709\u5fc5\u8981\u5b89\u88c5\u7f16\u8bd1\u5668\u7684\u60c5\u51b5\u4e0b\u4e5f\u4e0d\u89c9\u5f97\u9ebb\u70e6\uff09\uff0c\u56e0\u4e3a\u4e00\u4e9b\u4f9d\u8d56\u53ef\u80fd\u5f97\u7ecf\u8fc7\u7f16\u8bd1\uff0c\u800c\u5728 OS X\uff0cXcode \u547d\u4ee4\u884c\u5de5\u5177\u4f1a\u5e2e\u4f60\u5904\u7406\uff1b\u5728 Ubuntu\uff0c<code class=\"language-javascript\">apt-get install build-essential</code> \u4f1a\u5b89\u88c5\u6240\u9700\u7684 package\uff08\u5176\u5b83 Linux \u53d1\u884c\u7248\u7684\u7c7b\u4f3c\u547d\u4ee4\u4e5f\u6709\u6548\uff09\uff1b\u5728 Windows \u4e0a\u5f97\u505a\u4e9b\u989d\u5916\u6b65\u9aa4\uff0c\u8bf7\u53c2\u8003 <a class=\"external-link\" href=\"https://github.com/nodejs/node-gyp#installation\"><code class=\"language-javascript\">node-gyp</code> \u5b89\u88c5\u6b65\u9aa4</a>\u3002</li>\n<li>\u719f\u6089 Git\u3002</li>\n</ul>\n<h3 id=\"development-workflow\"><a class=\"anchor\" href=\"/react/how-to-contribute#development-workflow\"></a>\u5f00\u53d1\u5de5\u4f5c\u6d41\u7a0b </h3>\n<p>\u514b\u9686 React \u9879\u76ee\u540e\uff0c\u6267\u884c <code class=\"language-javascript\">yarn</code> \u6765\u83b7\u53d6\u4f9d\u8d56\u3002\n\u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">yarn lint</code> \u68c0\u67e5\u4ee3\u7801\u98ce\u683c\u3002</li>\n<li><code class=\"language-javascript\">yarn linc</code> \u548c <code class=\"language-javascript\">yarn lint</code> \u5dee\u4e0d\u591a\uff0c\u4f46\u662f\u8fd0\u884c\u5730\u66f4\u5feb\uff0c\u56e0\u4e3a\u53ea\u68c0\u67e5\u4e86\u5206\u652f\u4e2d\u7684\u4e0d\u540c\u6587\u4ef6\u3002</li>\n<li><code class=\"language-javascript\">yarn test</code> \u8fd0\u884c\u5b8c\u6574\u7684\u6d4b\u8bd5\u5957\u88c5\u3002</li>\n<li><code class=\"language-javascript\">yarn test --watch</code> \u8fd0\u884c\u4ea4\u4e92\u5f0f\u7684\u6d4b\u8bd5\u76d1\u542c\u5668\u3002</li>\n<li><code class=\"language-javascript\">yarn test --prod</code> \u5728\u751f\u4ea7\u73af\u5883\u4e0b\u8fd0\u884c\u6d4b\u8bd5\u3002</li>\n<li><code class=\"language-javascript\">yarn test &lt;pattern&gt;</code> \u5339\u914d\u6587\u4ef6\u540d\uff0c\u8fd0\u884c\u54cd\u5e94\u6d4b\u8bd5\u3002</li>\n<li><code class=\"language-javascript\">yarn debug-test</code> \u548c <code class=\"language-javascript\">yarn test</code> \u5dee\u4e0d\u591a\uff0c\u4e0d\u8fc7\u591a\u4e86\u4e2a\u8c03\u8bd5\u5668\uff0c\u4f60\u53ef\u4ee5\u6253\u5f00 <code class=\"language-javascript\">chrome://inspect</code> \u5e76\u5ba1\u67e5\u3002</li>\n<li><code class=\"language-javascript\">yarn flow</code> \u8fd0\u884c <a class=\"external-link\" href=\"https://flowtype.org/\">Flow</a> \u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\u3002</li>\n<li><code class=\"language-javascript\">yarn build</code> \u65b0\u5efa\u6d89\u53ca\u6240\u6709\u5305\u7684 <code class=\"language-javascript\">build</code> \u6587\u4ef6\u5939\u3002</li>\n<li><code class=\"language-javascript\">yarn build react/index,react-dom/index --type=UMD</code> \u751f\u6210\u53ea\u6709 React \u548c ReactDOM \u7684 UMD \u7248\u672c\u3002</li>\n</ul>\n<p>\u6211\u4eec\u5efa\u8bae\u8fd0\u884c <code class=\"language-javascript\">yarn test</code>\uff08\u6216\u4e0a\u8ff0\u547d\u4ee4\uff09\u4ee5\u786e\u4fdd\u4f60\u7684\u4ee3\u7801\u6ca1\u6709\u5f15\u5165\u56de\u5f52\uff0c\u4e0d\u7ba1\u600e\u6837\uff0c\u8fd9\u6709\u52a9\u4e8e\u5c1d\u8bd5\u4f60\u7684 React \u6784\u5efa\u7248\u672c\u3002</p>\n<p>\u9996\u5148\uff0c\u8fd0\u884c <code class=\"language-javascript\">yarn build</code>\uff0c\u8fd9\u4f1a\u4e8e <code class=\"language-javascript\">build</code> \u6587\u4ef6\u5939\u4e2d\u751f\u6210\u9884\u5148\u6784\u5efa\u7684 bundle\uff0c\u8fd8\u4f1a\u4e8e <code class=\"language-javascript\">build/packages</code> \u4e2d\u751f\u6210 npm \u5305\u3002</p>\n<p>\u60f3\u6d4b\u8bd5\u4f60\u505a\u51fa\u7684\u66f4\u6539\u7684\u8bdd\uff0c\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u5c31\u662f\u8fd0\u884c <code class=\"language-javascript\">yarn build react/index,react-dom/index --type=UMD</code>\uff0c\u4e4b\u540e\u518d\u6253\u5f00 <code class=\"language-javascript\">fixtures/packaging/babel-standalone/dev.html</code>\uff0c\u8be5\u6587\u4ef6\u5df2\u4f7f\u7528 <code class=\"language-javascript\">build</code> \u6587\u4ef6\u5939\u5185\u7684 <code class=\"language-javascript\">react.development.js</code> \u6765\u641e\u5b9a\u4f60\u7684\u66f4\u6539\u3002</p>\n<p>\u5982\u679c\u4f60\u60f3\u6d4b\u8bd5\u4f60\u5bf9\u5df2\u6709 React \u9879\u76ee\u505a\u51fa\u7684\u66f4\u6539\uff0c\u4f60\u53ef\u4ee5\u590d\u5236 <code class=\"language-javascript\">build/node_modules/react/umd/react.development.js</code> \u548c <code class=\"language-javascript\">build/node_modules/react-dom/umd/react-dom.development.js</code> \u6216\u5176\u5b83\u6784\u5efa\u7248\u672c\uff0c\u653e\u5165\u4f60\u7684\u5e94\u7528\u4e2d\u5e76\u4f7f\u7528\u8fd9\u4e9b\u6784\u5efa\u7248\u672c\u800c\u975e\u7a33\u5b9a\u7248\u3002</p>\n<p>\u5982\u679c\u4f60\u7684\u9879\u76ee\u7528 npm\uff0c\u4f60\u53ef\u4ee5\u4ece\u4f9d\u8d56\u4e2d\u5220\u53bb <code class=\"language-javascript\">react</code> \u548c <code class=\"language-javascript\">react-dom</code>\uff0c\u4f7f\u7528 <code class=\"language-javascript\">yarn link</code> \u5c06\u5176\u6307\u5411\u672c\u5730\u6587\u4ef6\u5939\u7684 <code class=\"language-javascript\">build</code> \u76ee\u5f55\u3002\u8bf7\u6ce8\u610f\uff0c**\u5f53\u8bf7\u5728\u6784\u5efa\u65f6\uff0c\u4f20\u9012 <code class=\"language-javascript\">--type=NODE</code>\uff0c\u800c\u4e0d\u662f <code class=\"language-javascript\">--type=UMD</code>\u3002\u540c\u65f6\uff0c\u4f60\u8fd8\u9700\u8981\u6784\u5efa <code class=\"language-javascript\">scheduler</code> \u7684 package\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-bash\"><code class=\"language-javascript\"><span class=\"token builtin class-name\">cd</span> ~/path_to_your_react_clone/\n<span class=\"token function\">yarn</span> build react/index,react/jsx,react-dom/index,scheduler --type<span class=\"token operator\">=</span>NODE\n\n<span class=\"token builtin class-name\">cd</span> build/node_modules/react\n<span class=\"token function\">yarn</span> <span class=\"token function\">link</span>\n<span class=\"token builtin class-name\">cd</span> build/node_modules/react-dom\n<span class=\"token function\">yarn</span> <span class=\"token function\">link</span>\n\n<span class=\"token builtin class-name\">cd</span> ~/path/to/your/project\n<span class=\"token function\">yarn</span> <span class=\"token function\">link</span> react react-dom</code></pre></div>\n<p>\u6bcf\u5f53\u4f60\u5728\u9879\u76ee\u6587\u4ef6\u5939\u4e0b\u8fd0\u884c <code class=\"language-javascript\">yarn build</code>\uff0c\u66f4\u65b0\u7248\u672c\u4f1a\u51fa\u73b0\u5728 <code class=\"language-javascript\">node_modules</code> \u6587\u4ef6\u5939\uff0c\u4e4b\u540e\u53ef\u4ee5\u91cd\u65b0\u6784\u5efa\u9879\u76ee\u6765\u6d4b\u8bd5\u66f4\u6539\u3002</p>\n<p>\u5982\u679c\u4f9d\u7136\u7f3a\u5c11\u67d0\u4e9b package\uff08\u4f8b\u5982\uff0c\u53ef\u80fd\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u5230 <code class=\"language-javascript\">react-dom/server</code>\uff09\uff0c\u5219\u5e94\u59cb\u7ec8\u6267\u884c <code class=\"language-javascript\">yarn build</code> \u8fdb\u884c\u5b8c\u6574\u6784\u5efa\u3002\u8bf7\u6ce8\u610f\uff0c\u4e0d\u5e26\u9009\u9879\u8fd0\u884c <code class=\"language-javascript\">yarn build</code> \u4f1a\u8017\u8d39\u5f88\u957f\u65f6\u95f4\u3002</p>\n<p>\u6211\u4eec\u4ecd\u8981\u6c42\uff1a<code class=\"language-javascript\">pull request</code> \u5f97\u5305\u62ec\u65b0\u529f\u80fd\u5bf9\u5e94\u7684\u5355\u5143\u6d4b\u8bd5\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u80fd\u786e\u4fdd\u4ee5\u540e\u4f60\u7684\u4ee3\u7801\u4e0d\u51fa\u95ee\u9898\u3002</p>\n<h3 id=\"style-guide\"><a class=\"anchor\" href=\"/react/how-to-contribute#style-guide\"></a>\u98ce\u683c\u6307\u5357 </h3>\n<p>\u6211\u4eec\u4f7f\u7528\u81ea\u52a8\u5316\u4ee3\u7801\u683c\u5f0f\u5316\u8f6f\u4ef6 <a class=\"external-link\" href=\"https://prettier.io/\">Prettier</a>\u3002\n\u5bf9\u4ee3\u7801\u505a\u51fa\u66f4\u6539\u540e\uff0c\u8fd0\u884c <code class=\"language-javascript\">yarn prettier</code>\u3002</p>\n<p>\u4e4b\u540e\uff0clinter \u4f1a\u6355\u83b7\u4ee3\u7801\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u591a\u6570\u95ee\u9898\u3002\n\u4f60\u53ef\u4ee5\u8fd0\u884c <code class=\"language-javascript\">yarn linc</code> \u6765\u68c0\u67e5\u4ee3\u7801\u98ce\u683c\u72b6\u6001\u3002</p>\n<p>\u4e0d\u8fc7\uff0clinter \u4e5f\u6709\u4e0d\u80fd\u641e\u5b9a\u7684\u4e00\u4e9b\u98ce\u683c\u3002\u5982\u679c\u6709\u4e9b\u4e1c\u897f\u4e0d\u786e\u5b9a\uff0c\u8bf7\u67e5\u770b <a class=\"external-link\" href=\"https://github.com/airbnb/javascript\">Airbnb\u2019s Style Guide</a> \u6765\u6307\u5bfc\u81ea\u5df1\u3002</p>\n<h3 id=\"request-for-comments-rfc\"><a class=\"anchor\" href=\"/react/how-to-contribute#request-for-comments-rfc\"></a>\u8bf7\u6c42\u610f\u89c1\u7a3f\uff08RFC\uff09 </h3>\n<p>\u8bb8\u591a\u66f4\u6539\uff08\u5305\u62ec\u4fee\u590d bug \u548c\u5b8c\u5584\u6587\u6863\uff09\u4f1a\u7ecf\u8fc7\u901a\u5e38\u6240\u7528\u7684 GitHub pull request \u5de5\u4f5c\u6d41\u7a0b\u6765\u8bc4\u5ba1\u3002</p>\n<p>\u4e0d\u8fc7\u6709\u4e9b\u66f4\u6539\u8f83\u5927\uff0c\u5bf9\u6b64\uff0c\u6211\u4eec\u8981\u6c42\u8fd9\u4e9b\u66f4\u6539\u5f97\u7ecf\u8fc7\u4e00\u756a\u8bbe\u8ba1\u6d41\u7a0b\uff0c \u5e76\u5728\u6838\u5fc3\u56e2\u961f\u4e2d\u8fbe\u6210\u5171\u8bc6\u3002</p>\n<p>\u8bf7\u6c42\u610f\u89c1\u7a3f\u8ba9\u65b0\u7279\u6027\u7684\u5408\u5e76\u5165\u5e93\u7ecf\u8fc7\u4e00\u81f4\u4e14\u53d7\u63a7\u7684\u6d41\u7a0b\u3002\u4f60\u53ef\u4ee5\u524d\u5f80 <a class=\"external-link\" href=\"https://github.com/reactjs/rfcs\">rfcs repository</a> \u53bb\u8d21\u732e\u3002</p>\n<h3 id=\"license\"><a class=\"anchor\" href=\"/react/how-to-contribute#license\"></a>License </h3>\n<p>\u4f60\u8d21\u732e React \u7684\u540c\u65f6\u4e5f\u5c31\u540c\u610f\u4e86\u4f60\u7684\u8d21\u732e\u90e8\u5206\u4f7f\u7528\u4e86 MIT \u534f\u8bae\u3002</p>\n<h3 id=\"what-next\"><a class=\"anchor\" href=\"/react/how-to-contribute#what-next\"></a>\u63a5\u4e0b\u6765\u505a\u4ec0\u4e48\uff1f </h3>\n<p>\u8bf7\u9605\u8bfb<a href=\"/react/codebase-overview\">\u4e0b\u4e00\u90e8\u5206</a>\u6765\u5b66\u4e60\u4ee3\u7801\u5e93\u662f\u5982\u4f55\u7ec4\u7ec7\u7684.</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/how-to-contribute.md\">Edit this page</a></p></div></article>", "path": "/react/how-to-contribute", "nav": ["/react/testing-environments", "/react/codebase-overview"]}, {"key": "\u6e90\u7801\u6982\u8ff0", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u672c\u8282\u5c06\u5bf9 React \u7684\u6e90\u7801\u67b6\u6784\uff0c\u7ea6\u5b9a\u53ca\u5176\u5b9e\u73b0\u8fdb\u884c\u6982\u8ff0\u3002</p>\n<p>\u5982\u679c\u60a8\u60f3<a href=\"/react/how-to-contribute\">\u53c2\u4e0e React</a> \u7684\u5f00\u53d1\uff0c\u6211\u4eec\u5e0c\u671b\u8fd9\u4efd\u6307\u5357\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u52a0\u8f7b\u677e\u5730\u8fdb\u884c\u4fee\u6539\u3002</p>\n<p>\u6211\u4eec\u5e76\u4e0d\u63a8\u8350\u5728 React \u5e94\u7528\u4e2d\u9075\u5faa\u8fd9\u4e9b\u7ea6\u5b9a\u3002\u6709\u8bb8\u591a\u7ea6\u5b9a\u662f\u5386\u53f2\u539f\u56e0\uff0c\u5e76\u4e14\u4e4b\u540e\u4e5f\u8bb8\u4f1a\u6709\u6240\u4fee\u6539\u3002</p>\n<h3 id=\"top-level-folders\"><a class=\"anchor\" href=\"/react/codebase-overview#top-level-folders\"></a>\u9879\u76ee\u6839\u76ee\u5f55 </h3>\n<p>\u5f53\u514b\u9686 <a class=\"external-link\" href=\"https://github.com/facebook/react\">React \u4ed3\u5e93</a>\u4e4b\u540e\uff0c\u4f60\u4eec\u5c06\u770b\u5230\u9879\u76ee\u6839\u76ee\u5f55\u7684\u4fe1\u606f\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages\"><code class=\"language-javascript\">packages</code></a> \u5305\u542b\u5143\u6570\u636e\uff08\u6bd4\u5982 <code class=\"language-javascript\">package.json</code>\uff09\u548c React \u4ed3\u5e93\u4e2d\u6240\u6709 package \u7684\u6e90\u7801\uff08\u5b50\u76ee\u5f55 <code class=\"language-javascript\">src</code>\uff09\u3002<strong>\u5982\u679c\u4f60\u9700\u8981\u4fee\u6539\u6e90\u4ee3\u7801, \u90a3\u4e48\u6bcf\u4e2a\u5305\u7684 <code class=\"language-javascript\">src</code> \u5b50\u76ee\u5f55\u662f\u4f60\u6700\u9700\u8981\u82b1\u8d39\u7cbe\u529b\u7684\u5730\u65b9\u3002</strong></li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/fixtures\"><code class=\"language-javascript\">fixtures</code></a> \u5305\u542b\u4e00\u4e9b\u7ed9\u8d21\u732e\u8005\u51c6\u5907\u7684\u5c0f\u578b React \u6d4b\u8bd5\u9879\u76ee\u3002</li>\n<li><code class=\"language-javascript\">build</code> \u662f React \u7684\u8f93\u51fa\u76ee\u5f55\u3002\u6e90\u7801\u4ed3\u5e93\u4e2d\u5e76\u6ca1\u6709\u8fd9\u4e2a\u76ee\u5f55\uff0c\u4f46\u662f\u5b83\u4f1a\u5728\u4f60\u514b\u9686 React \u5e76\u4e14\u7b2c\u4e00\u6b21<a href=\"/react/how-to-contribute#development-workflow\">\u6784\u5efa\u5b83</a>\u4e4b\u540e\u51fa\u73b0\u3002</li>\n</ul>\n<p>\u6587\u6863\u4f4d\u4e8e <a class=\"external-link\" href=\"https://github.com/reactjs/reactjs.org\">React \u4ed3\u5e93\u4e4b\u5916\u7684\u4e00\u4e2a\u72ec\u7acb\u4ed3\u5e93\u4e2d</a>\u3002</p>\n<p>\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u9876\u5c42\u76ee\u5f55\uff0c\u4f46\u662f\u5b83\u4eec\u51e0\u4e4e\u90fd\u662f\u5de5\u5177\u7c7b\u7684\uff0c\u5e76\u4e14\u5728\u8d21\u732e\u4ee3\u7801\u65f6\u57fa\u672c\u4e0d\u4f1a\u6d89\u53ca\u3002</p>\n<h3 id=\"colocated-tests\"><a class=\"anchor\" href=\"/react/codebase-overview#colocated-tests\"></a>\u5171\u7f6e\u6d4b\u8bd5 </h3>\n<p>\u6211\u4eec\u6ca1\u6709\u5355\u5143\u6d4b\u8bd5\u7684\u9876\u5c42\u76ee\u5f55\u3002\u800c\u662f\u5c06\u5b83\u4eec\u653e\u7f6e\u5728\u6240\u9700\u6d4b\u8bd5\u6587\u4ef6\u7684\u76f8\u540c\u76ee\u5f55\u4e0b\u7684 <code class=\"language-javascript\">__tests__</code> \u7684\u76ee\u5f55\u4e4b\u4e2d\u3002</p>\n<p>\u6bd4\u5982\uff0c\u4e00\u4e2a\u7528\u4e8e <a class=\"external-link\" href=\"https://github.com/facebook/react/blob/87724bd87506325fcaf2648c70fc1f43411a87be/src/renderers/dom/client/utils/setInnerHTML.js\"><code class=\"language-javascript\">setInnerHTML.js</code></a> \u7684\u6d4b\u8bd5\u6587\u4ef6\uff0c\u4f1a\u5b58\u653e\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react/blob/87724bd87506325fcaf2648c70fc1f43411a87be/src/renderers/dom/client/utils/__tests__/setInnerHTML-test.js\"><code class=\"language-javascript\">__tests__/setInnerHTML-test.js</code></a>\uff0c\u5c31\u5728\u5b83\u540c\u7ea7\u76ee\u5f55\u4e0b\u3002</p>\n<h3 id=\"warnings-and-invariants\"><a class=\"anchor\" href=\"/react/codebase-overview#warnings-and-invariants\"></a>warning \u548c invariant </h3>\n<p>React \u4ee3\u7801\u5e93\u76f4\u63a5\u4f7f\u7528 <code class=\"language-javascript\">console.error</code> \u6765\u5c55\u793a warnings\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>__DEV__<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Something is wrong.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>warning \u4ec5\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u542f\u7528\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4ed6\u4eec\u4f1a\u88ab\u5b8c\u5168\u5254\u9664\u6389\u3002\u5982\u679c\u4f60\u9700\u8981\u5728\u751f\u4ea7\u73af\u5883\u7981\u6b62\u6267\u884c\u67d0\u4e9b\u4ee3\u7801\uff0c\u8bf7\u4f7f\u7528 <code class=\"language-javascript\">invariant</code> \u6a21\u5757\u4ee3\u66ff <code class=\"language-javascript\">warning</code>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> invariant <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'invariant'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">invariant</span><span class=\"token punctuation\">(</span>\n  <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'You shall not pass!'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>\u5f53 <code class=\"language-javascript\">invariant</code> \u5224\u522b\u6761\u4ef6\u4e3a <code class=\"language-javascript\">false</code> \u65f6\uff0c\u4f1a\u5c06 invariant \u7684\u4fe1\u606f\u4f5c\u4e3a\u9519\u8bef\u629b\u51fa</strong></p>\n<p>\u201cInvariant\u201d \u7528\u4e8e\u58f0\u660e \u201c\u8fd9\u4e2a\u6761\u4ef6\u5e94\u603b\u4e3a true\u201d\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u5f53\u6210\u4e00\u79cd\u65ad\u8a00\u3002</p>\n<p>\u4fdd\u6301\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u7684\u884c\u4e3a\u76f8\u4f3c\u662f\u5341\u5206\u91cd\u8981\u7684\uff0c\u56e0\u6b64 <code class=\"language-javascript\">invariant</code> \u5728\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u4e0b\u90fd\u4f1a\u629b\u51fa\u9519\u8bef\u3002\u4e0d\u540c\u70b9\u5728\u4e8e\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8fd9\u4e9b\u9519\u8bef\u4fe1\u606f\u4f1a\u88ab\u81ea\u52a8\u66ff\u6362\u6210\u9519\u8bef\u4ee3\u7801\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u8f93\u51fa\u5e93\u6587\u4ef6\u53d8\u5f97\u66f4\u5c0f\u3002</p>\n<h3 id=\"development-and-production\"><a class=\"anchor\" href=\"/react/codebase-overview#development-and-production\"></a>\u5f00\u53d1\u73af\u5883\u4e0e\u751f\u4ea7\u73af\u5883 </h3>\n<p>\u4f60\u53ef\u4ee5\u5728\u4ee3\u7801\u5e93\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">__DEV__</code> \u8fd9\u4e2a\u4f2a\u5168\u5c40\u53d8\u91cf\uff0c\u7528\u4e8e\u7ba1\u7406\u5f00\u53d1\u73af\u5883\u4e2d\u9700\u8fd0\u884c\u7684\u4ee3\u7801\u5757</p>\n<p>\u8fd9\u5728\u7f16\u8bd1\u9636\u6bb5\u4f1a\u88ab\u5185\u8054\uff0c\u5728 CommonJS \u6784\u5efa\u4e2d\uff0c\u8f6c\u5316\u6210 <code class=\"language-javascript\">process.env.NODE_ENV !== 'production'</code> \u8fd9\u6837\u7684\u5224\u65ad\u3002</p>\n<p>\u5bf9\u4e8e\u72ec\u7acb\u6784\u5efa\u6765\u8bf4\uff0c\u5728\u6ca1\u6709 minify \u7684\u6784\u5efa\u4e2d\uff0c\u5b83\u4f1a\u53d8\u6210 <code class=\"language-javascript\">true</code>\uff0c\u540c\u65f6\u5728 minify \u7684\u6784\u5efa\u4e2d\uff0c\u68c0\u6d4b\u5230\u7684 <code class=\"language-javascript\">if</code> \u4ee3\u7801\u5757\u4f1a\u88ab\u5b8c\u5168\u5254\u9664\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>__DEV__<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4ec5\u5728\u5f00\u53d1\u73af\u5883\u4e0b\u6267\u884c\u7684\u4ee3\u7801</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"flow\"><a class=\"anchor\" href=\"/react/codebase-overview#flow\"></a>Flow </h3>\n<p>\u6211\u4eec\u6700\u8fd1\u5c06 <a class=\"external-link\" href=\"https://flow.org/\">Flow</a> \u5f15\u5165\u6e90\u7801\uff0c\u7528\u4e8e\u7c7b\u578b\u68c0\u67e5\u3002\u5728\u8bb8\u53ef\u8bc1\u5934\u90e8\u7684\u6ce8\u91ca\u4e2d\uff0c\u6807\u8bb0\u4e3a <code class=\"language-javascript\">@flow</code> \u6ce8\u91ca\u7684\u6587\u4ef6\u662f\u5df2\u7ecf\u7ecf\u8fc7\u7c7b\u578b\u68c0\u67e5\u7684\u3002</p>\n<p>\u6211\u4eec\u63a5\u53d7<a class=\"external-link\" href=\"https://github.com/facebook/react/pull/7600/files\">\u6dfb\u52a0 Flow \u6ce8\u91ca\u5230\u73b0\u6709\u4ee3\u7801</a>\u3002Flow \u6ce8\u91ca\u770b\u4e0a\u53bb\u50cf\u8fd9\u6837\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">ReactRef<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">detachRefs</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\"><span class=\"token literal-property property\">instance</span><span class=\"token operator\">:</span> ReactInstance<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">element</span><span class=\"token operator\">:</span> ReactElement <span class=\"token operator\">|</span> string <span class=\"token operator\">|</span> number <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">|</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5982\u679c\u53ef\u4ee5\u7684\u8bdd\uff0c\u65b0\u4ee3\u7801\u5e94\u5c3d\u91cf\u4f7f\u7528 Flow \u6ce8\u91ca\u3002\n\u4f60\u53ef\u4ee5\u8fd0\u884c <code class=\"language-javascript\">yarn flow</code>\uff0c\u7528 Flow \u672c\u5730\u68c0\u67e5\u4f60\u7684\u4ee3\u7801\u3002</p>\n<h3 id=\"multiple-packages\"><a class=\"anchor\" href=\"/react/codebase-overview#multiple-packages\"></a>Multiple Packages </h3>\n<p>React \u91c7\u7528 <a class=\"external-link\" href=\"https://danluu.com/monorepo/\">monorepo</a> \u7684\u7ba1\u7406\u65b9\u5f0f\u3002\u4ed3\u5e93\u4e2d\u5305\u542b\u591a\u4e2a\u72ec\u7acb\u7684\u5305\uff0c\u4ee5\u4fbf\u4e8e\u66f4\u6539\u53ef\u4ee5\u4e00\u8d77\u8054\u8c03\uff0c\u5e76\u4e14\u95ee\u9898\u53ea\u4f1a\u51fa\u73b0\u5728\u540c\u4e00\u5730\u65b9\u3002</p>\n<h3 id=\"react-core\"><a class=\"anchor\" href=\"/react/codebase-overview#react-core\"></a>React Core </h3>\n<p>React \u201cCore\u201d \u4e2d\u5305\u542b\u6240\u6709<a href=\"/react/react-api#react\">\u5168\u5c40 <code class=\"language-javascript\">React</code> API</a>\uff0c\u6bd4\u5982\uff1a</p>\n<ul>\n<li><code class=\"language-javascript\">React.createElement()</code></li>\n<li><code class=\"language-javascript\">React.Component</code></li>\n<li><code class=\"language-javascript\">React.Children</code></li>\n</ul>\n<p><strong>React \u6838\u5fc3\u53ea\u5305\u542b\u5b9a\u4e49\u7ec4\u4ef6\u5fc5\u8981\u7684 API</strong>\u3002\u5b83\u4e0d\u5305\u542b<a href=\"/react/reconciliation\">\u534f\u8c03</a>\u7b97\u6cd5\u6216\u8005\u5176\u4ed6\u5e73\u53f0\u7279\u5b9a\u7684\u4ee3\u7801\u3002\u5b83\u540c\u65f6\u9002\u7528\u4e8e React DOM \u548c React Native \u7ec4\u4ef6\u3002</p>\n<p>React \u6838\u5fc3\u4ee3\u7801\u5728\u6e90\u7801\u7684 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react\"><code class=\"language-javascript\">packages/react</code></a> \u76ee\u5f55\u4e2d\u3002\u5728 npm \u4e0a\u53d1\u5e03\u4e3a <a class=\"external-link\" href=\"https://www.npmjs.com/package/react\"><code class=\"language-javascript\">react</code></a> \u5305\u3002\u76f8\u5e94\u7684\u72ec\u7acb\u6d4f\u89c8\u5668\u6784\u5efa\u7248\u672c\u79f0\u4e3a <code class=\"language-javascript\">react.js</code>\uff0c\u5b83\u4f1a\u5bfc\u51fa\u4e00\u4e2a\u79f0\u4e3a <code class=\"language-javascript\">React</code> \u7684\u5168\u5c40\u5bf9\u8c61\u3002</p>\n<h3 id=\"renderers\"><a class=\"anchor\" href=\"/react/codebase-overview#renderers\"></a>\u6e32\u67d3\u5668 </h3>\n<p>React \u6700\u521d\u53ea\u662f\u670d\u52a1\u4e8e DOM\uff0c\u4f46\u662f\u8fd9\u4e4b\u540e\u88ab\u6539\u7f16\u6210\u4e5f\u80fd\u540c\u65f6\u652f\u6301\u539f\u751f\u5e73\u53f0\u7684 <a class=\"external-link\" href=\"https://reactnative.dev/\">React Native</a>\u3002\u56e0\u6b64\uff0c\u5728 React \u5185\u90e8\u673a\u5236\u4e2d\u5f15\u5165\u4e86\u201c\u6e32\u67d3\u5668\u201d\u8fd9\u4e2a\u6982\u5ff5\u3002</p>\n<p><strong>\u6e32\u67d3\u5668\u7528\u4e8e\u7ba1\u7406\u4e00\u68f5 React \u6811\uff0c\u4f7f\u5176\u6839\u636e\u5e95\u5c42\u5e73\u53f0\u8fdb\u884c\u4e0d\u540c\u7684\u8c03\u7528\u3002</strong></p>\n<p>\u6e32\u67d3\u5668\u540c\u6837\u4f4d\u4e8e <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/\"><code class=\"language-javascript\">packages/</code></a> \u76ee\u5f55\u4e0b\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-dom\">React DOM Renderer</a> \u5c06 React \u7ec4\u4ef6\u6e32\u67d3\u6210 DOM\u3002\u5b83\u5b9e\u73b0\u4e86\u5168\u5c40 <a href=\"/react/react-dom\"><code class=\"language-javascript\">ReactDOM</code>API</a>\uff0c\u8fd9\u5728npm\u4e0a\u4f5c\u4e3a <a class=\"external-link\" href=\"https://www.npmjs.com/package/react-dom\"><code class=\"language-javascript\">react-dom</code></a> \u5305\u3002\u8fd9\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5355\u72ec\u6d4f\u89c8\u5668\u7248\u672c\u4f7f\u7528\uff0c\u79f0\u4e3a <code class=\"language-javascript\">react-dom.js</code>\uff0c\u5bfc\u51fa\u4e00\u4e2a <code class=\"language-javascript\">ReactDOM</code> \u7684\u5168\u5c40\u5bf9\u8c61.</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-native-renderer\">React Native Renderer</a> \u5c06 React \u7ec4\u4ef6\u6e32\u67d3\u4e3a Native \u89c6\u56fe\u3002\u6b64\u6e32\u67d3\u5668\u5728 React Native \u5185\u90e8\u4f7f\u7528\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-test-renderer\">React Test Renderer</a> \u5c06 React \u7ec4\u4ef6\u6e32\u67d3\u4e3a JSON \u6811\u3002\u8fd9\u7528\u4e8e <a class=\"external-link\" href=\"https://facebook.github.io/jest\">Jest</a> \u7684<a class=\"external-link\" href=\"https://facebook.github.io/jest/blog/2016/07/27/jest-14.html\">\u5feb\u7167\u6d4b\u8bd5</a>\u7279\u6027\u3002\u5728 npm \u4e0a\u4f5c\u4e3a <a class=\"external-link\" href=\"https://www.npmjs.com/package/react-test-renderer\">react-test-renderer</a> \u5305\u53d1\u5e03\u3002</li>\n</ul>\n<p>\u53e6\u5916\u4e00\u4e2a\u5b98\u65b9\u652f\u6301\u7684\u6e32\u67d3\u5668\u7684\u662f <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-art\"><code class=\"language-javascript\">react-art</code></a>\u3002\u5b83\u66fe\u7ecf\u662f\u4e00\u4e2a\u72ec\u7acb\u7684 <a class=\"external-link\" href=\"https://github.com/reactjs/react-art\">GitHub \u4ed3\u5e93</a>\uff0c\u4f46\u662f\u73b0\u5728\u6211\u4eec\u5c06\u6b64\u52a0\u5165\u4e86\u4e3b\u6e90\u4ee3\u7801\u6811\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f:</strong>\n<p>\u4e25\u683c\u8bf4\u6765\uff0c<a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-native-renderer\"><code class=\"language-javascript\">react-native-renderer</code></a> \u5b9e\u73b0\u4e86 React \u548c React Native \u7684\u8fde\u63a5\u3002\u771f\u6b63\u6e32\u67d3 Native \u89c6\u56fe\u7684\u5e73\u53f0\u7279\u5b9a\u4ee3\u7801\u53ca\u7ec4\u4ef6\u90fd\u5b58\u50a8\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react-native\">React Native \u4ed3\u5e93</a>\u4e2d\u3002</p>\n</div>\n<h3 id=\"reconcilers\"><a class=\"anchor\" href=\"/react/codebase-overview#reconcilers\"></a>reconcilers </h3>\n<p>\u5373\u4fbf React DOM \u548c React Native \u6e32\u67d3\u5668\u7684\u533a\u522b\u5f88\u5927\uff0c\u4f46\u4e5f\u9700\u8981\u5171\u4eab\u4e00\u4e9b\u903b\u8f91\u3002\u7279\u522b\u662f<a href=\"/react/reconciliation\">\u534f\u8c03</a>\u7b97\u6cd5\u9700\u8981\u5c3d\u53ef\u80fd\u76f8\u4f3c\uff0c\u8fd9\u6837\u53ef\u4ee5\u8ba9\u58f0\u660e\u5f0f\u6e32\u67d3\uff0c\u81ea\u5b9a\u4e49\u7ec4\u4ef6\uff0cstate\uff0c\u751f\u547d\u5468\u671f\u65b9\u6cd5\u548c refs \u7b49\u7279\u6027\uff0c\u4fdd\u6301\u8de8\u5e73\u53f0\u5de5\u4f5c\u4e00\u81f4\u3002</p>\n<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4e0d\u540c\u7684\u6e32\u67d3\u5668\u5f7c\u6b64\u5171\u4eab\u4e00\u4e9b\u4ee3\u7801\u3002\u6211\u4eec\u79f0 React \u7684\u8fd9\u4e00\u90e8\u5206\u4e3a \u201creconciler\u201d\u3002\u5f53\u5904\u7406\u7c7b\u4f3c\u4e8e <code class=\"language-javascript\">setState()</code> \u8fd9\u6837\u7684\u66f4\u65b0\u65f6\uff0creconciler \u4f1a\u8c03\u7528\u6811\u4e2d\u7ec4\u4ef6\u4e0a\u7684 <code class=\"language-javascript\">render()</code>\uff0c\u7136\u540e\u51b3\u5b9a\u662f\u5426\u8fdb\u884c\u6302\u8f7d\uff0c\u66f4\u65b0\u6216\u662f\u5378\u8f7d\u64cd\u4f5c\u3002</p>\n<p>Reconciler \u6ca1\u6709\u5355\u72ec\u7684\u5305\uff0c\u56e0\u4e3a\u4ed6\u4eec\u6682\u65f6\u6ca1\u6709\u516c\u5171 API\u3002\u76f8\u53cd\uff0c\u5b83\u4eec\u88ab\u5982 React DOM \u548c React Native \u7684\u6e32\u67d3\u5668\u6392\u9664\u5728\u5916\u3002</p>\n<h3 id=\"stack-reconciler\"><a class=\"anchor\" href=\"/react/codebase-overview#stack-reconciler\"></a>Stack reconciler </h3>\n<p>\u201cstack\u201d reconciler \u662f React 15 \u53ca\u66f4\u65e9\u7684\u89e3\u51b3\u65b9\u6848\u3002\u867d\u7136\u6211\u4eec\u5df2\u7ecf\u505c\u6b62\u4e86\u5bf9\u5b83\u7684\u4f7f\u7528, \u4f46\u662f\u8fd9\u5728<a href=\"/react/implementation-notes\">\u4e0b\u4e00\u7ae0\u8282</a>\u6709\u8be6\u7ec6\u7684\u6587\u6863\u3002</p>\n<h3 id=\"fiber-reconciler\"><a class=\"anchor\" href=\"/react/codebase-overview#fiber-reconciler\"></a>Fiber reconciler </h3>\n<p>\u201cfiber\u201d reconciler \u662f\u4e00\u4e2a\u65b0\u5c1d\u8bd5\uff0c\u81f4\u529b\u4e8e\u89e3\u51b3 stack reconciler \u4e2d\u56fa\u6709\u7684\u95ee\u9898\uff0c\u540c\u65f6\u89e3\u51b3\u4e00\u4e9b\u5386\u53f2\u9057\u7559\u95ee\u9898\u3002Fiber \u4ece React 16 \u5f00\u59cb\u53d8\u6210\u4e86\u9ed8\u8ba4\u7684 reconciler\u3002</p>\n<p>\u5b83\u7684\u4e3b\u8981\u76ee\u6807\u662f\uff1a</p>\n<ul>\n<li>\u80fd\u591f\u628a\u53ef\u4e2d\u65ad\u7684\u4efb\u52a1\u5207\u7247\u5904\u7406\u3002</li>\n<li>\u80fd\u591f\u8c03\u6574\u4f18\u5148\u7ea7\uff0c\u91cd\u7f6e\u5e76\u590d\u7528\u4efb\u52a1\u3002</li>\n<li>\u80fd\u591f\u5728\u7236\u5143\u7d20\u4e0e\u5b50\u5143\u7d20\u4e4b\u95f4\u4ea4\u9519\u5904\u7406\uff0c\u4ee5\u652f\u6301 React \u4e2d\u7684\u5e03\u5c40\u3002</li>\n<li>\u80fd\u591f\u5728 <code class=\"language-javascript\">render()</code> \u4e2d\u8fd4\u56de\u591a\u4e2a\u5143\u7d20\u3002</li>\n<li>\u66f4\u597d\u5730\u652f\u6301\u9519\u8bef\u8fb9\u754c\u3002</li>\n</ul>\n<p>\u4f60\u53ef\u4ee5\u5728<a class=\"external-link\" href=\"https://github.com/acdlite/react-fiber-architecture\">\u8fd9\u91cc</a>\u548c<a class=\"external-link\" href=\"https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e\">\u8fd9\u91cc</a>\uff0c\u6df1\u5165\u4e86\u89e3 React Fiber \u67b6\u6784\u3002\u867d\u7136\u8fd9\u5df2\u7ecf\u5728 React 16 \u4e2d\u542f\u7528\u4e86\uff0c\u4f46\u662f async \u7279\u6027\u8fd8\u6ca1\u6709\u9ed8\u8ba4\u5f00\u542f\u3002</p>\n<p>\u6e90\u4ee3\u7801\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-reconciler\"><code class=\"language-javascript\">packages/react-reconciler</code></a> \u76ee\u5f55\u4e0b\u3002</p>\n<h3 id=\"event-system\"><a class=\"anchor\" href=\"/react/codebase-overview#event-system\"></a>\u4e8b\u4ef6\u7cfb\u7edf </h3>\n<p>React \u5728\u539f\u751f\u4e8b\u4ef6\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ee5\u62b9\u5e73\u6d4f\u89c8\u5668\u95f4\u5dee\u5f02\u3002\u5176\u6e90\u7801\u5728 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-dom/src/events\"><code class=\"language-javascript\">packages/react-dom/src/events</code></a> \u76ee\u5f55\u4e0b\u3002</p>\n<h3 id=\"what-next\"><a class=\"anchor\" href=\"/react/codebase-overview#what-next\"></a>\u4e0b\u4e00\u7ae0\u8282\u5b66\u4e60\u4ec0\u4e48\uff1f </h3>\n<p>\u67e5\u770b\u4e0b\u4e00\u7ae0\u8282\u53bb\u5b66\u4e60 reconciler \u5728 pre-React 16 \u4e2d\u7684\u5b9e\u73b0\u3002\u6211\u4eec\u8fd8\u6ca1\u6709\u4e3a\u65b0\u7684 reconciler \u5185\u90e8\u539f\u7406\u7f16\u5199\u6587\u6863\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/codebase-overview.md\">Edit this page</a></p></div></article>", "path": "/react/codebase-overview", "nav": ["/react/how-to-contribute", "/react/implementation-notes"]}, {"key": "\u5b9e\u73b0\u8bf4\u660e", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u8fd9\u4e00\u90e8\u5206\u662f\u5173\u4e8e <a href=\"/react/codebase-overview#stack-reconciler\">stack reconciler</a> \u7684\u4e00\u4e9b\u5b9e\u73b0\u8bf4\u660e\u3002</p>\n<p>\u8fd9\u90e8\u5206\u6bd4\u8f83\u5177\u6709\u6280\u672f\u6027\uff0c\u9700\u8981\u5bf9 React \u516c\u5171 API\uff0c\u4ee5\u53ca React \u662f\u5982\u4f55\u5c06\u5176\u5206\u4e3a core\u3001renderer \u548c reconciler \u7684\u5177\u6709\u8f83\u597d\u7684\u7406\u89e3\u3002\u5982\u679c\u4f60\u5bf9\u6e90\u7801\u5e93\u8fd8\u4e0d\u662f\u5f88\u719f\u6089\uff0c\u8bf7\u5148\u9605\u8bfb<a href=\"/react/codebase-overview\">\u6e90\u7801\u603b\u89c8</a>\u3002</p>\n<p>\u8fd9\u90e8\u5206\u8fd8\u8981\u6c42\u4e86\u89e3 <a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2015/12/18/react-components-elements-and-instances.html\">React \u7ec4\u4ef6\u53ca\u5176\u5b9e\u4f8b\u548c\u5143\u7d20\u4e4b\u95f4\u7684\u4e0d\u540c</a>\u3002</p>\n<p>stack reconciler \u662f\u5728 React 15 \u4ee5\u53ca\u66f4\u65e9\u7684\u7248\u672c\u4e2d\u88ab\u91c7\u7528\u3002\u5b83\u7684\u6e90\u7801\u4f4d\u4e8e <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/15-stable/src/renderers/shared/stack/reconciler\">src/renderers/shared/stack/reconciler</a>\u3002</p>\n<h3 id=\"video-building-react-from-scratch\"><a class=\"anchor\" href=\"/react/implementation-notes#video-building-react-from-scratch\"></a>\u89c6\u9891\uff1a\u4ece\u96f6\u5f00\u59cb\u6784\u5efa React </h3>\n<p><a class=\"external-link\" href=\"https://twitter.com/zpao\">Paul O\u2019Shannessy</a> \u8bb2\u89e3\u7684<a class=\"external-link\" href=\"https://www.youtube.com/watch?v=_MAD4Oly9yg\">\u4ece\u96f6\u5f00\u59cb\u6784\u5efa React</a> \u5bf9\u672c\u6587\u6863\u6709\u8f83\u5927\u7684\u542f\u53d1\u3002</p>\n<p>\u672c\u6587\u6863\u548c\u4ed6\u7684\u8bb2\u89e3\u90fd\u662f\u5bf9\u5b9e\u9645\u4ee3\u7801\u5e93\u7684\u7b80\u5316\uff0c\u6240\u4ee5\u4f60\u80fd\u901a\u8fc7\u719f\u6089\u5b83\u4eec\u6765\u83b7\u5f97\u66f4\u597d\u7684\u7406\u89e3\u3002</p>\n<h3 id=\"overview\"><a class=\"anchor\" href=\"/react/implementation-notes#overview\"></a>\u6982\u89c8 </h3>\n<p>reconciler \u672c\u8eab\u6ca1\u6709\u516c\u5171\u7684 API\u3002\u50cf React DOM \u548c React Native \u8fd9\u6837\u7684 <a href=\"/react/codebase-overview#renderers\">renderer</a> \u4f7f\u7528\u5b83\u6765\u6839\u636e\u7528\u6237\u5199\u7684 React \u7ec4\u4ef6\u6765\u9ad8\u6548\u5730\u66f4\u65b0\u7528\u6237\u754c\u9762\u3002</p>\n<h3 id=\"mounting-as-a-recursive-process\"><a class=\"anchor\" href=\"/react/implementation-notes#mounting-as-a-recursive-process\"></a>\u6302\u8f7d\u662f\u9012\u5f52\u8fc7\u7a0b </h3>\n<p>\u8ba9\u6211\u4eec\u8003\u8651\u7b2c\u4e00\u6b21\u6302\u8f7d\u7ec4\u4ef6\u65f6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>rootEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-javascript\">root.render</code> \u628a <code class=\"language-javascript\">&lt;App /&gt;</code> \u4f20\u9012\u7ed9 reconciler\u3002\u8bf7\u8bb0\u4f4f\uff0c<code class=\"language-javascript\">&lt;App /&gt;</code> \u662f\u4e00\u4e2a React \u5143\u7d20\uff0c\u4e5f\u5c31\u662f\u5bf9\u8981\u6e32\u67d3\u7684<em>\u5185\u5bb9</em>\u7684\u63cf\u8ff0\u3002\u53ef\u4ee5\u628a\u5b83\u89c6\u4e3a\u666e\u901a\u7684\u5bf9\u8c61\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// { type: App, props: {} }</span></code></pre></div>\n<p>reconciler \u68c0\u67e5 <code class=\"language-javascript\">App</code> \u662f\u4e00\u4e2a\u7c7b\u8fd8\u662f\u4e00\u4e2a\u51fd\u6570\u3002</p>\n<p>\u5982\u679c <code class=\"language-javascript\">App</code> \u662f\u51fd\u6570\uff0c\u90a3\u4e48 reconciler \u4f1a\u8c03\u7528 <code class=\"language-javascript\">App(props)</code> \u6765\u83b7\u53d6\u6e32\u67d3\u7684\u5143\u7d20\u3002</p>\n<p>\u5982\u679c <code class=\"language-javascript\">App</code> \u662f\u7c7b\uff0c\u90a3\u4e48 reconciler \u4f1a\u901a\u8fc7 <code class=\"language-javascript\">new App(props)</code> \u6765\u5b9e\u4f8b\u5316 <code class=\"language-javascript\">App</code>\uff0c\u5e76\u8c03\u7528\u751f\u547d\u5468\u671f\u65b9\u6cd5 <code class=\"language-javascript\">componentWillMount()</code>\uff0c\u4e4b\u540e\u8c03\u7528 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\u6765\u83b7\u53d6\u6e32\u67d3\u7684\u5143\u7d20\u3002</p>\n<p>\u65e0\u8bba\u54ea\u79cd\u65b9\u5f0f\uff0creconciler \u90fd\u4f1a\u63a2\u6089 <code class=\"language-javascript\">App</code> \u7684\u5185\u5bb9\u5e76\u6e32\u67d3\u3002</p>\n<p>\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u9012\u5f52\u7684\u3002<code class=\"language-javascript\">App</code> \u53ef\u80fd\u4f1a\u6e32\u67d3\u67d0\u4e2a <code class=\"language-javascript\">&lt;Greeting /&gt;</code>\uff0c<code class=\"language-javascript\">Greeting</code> \u53ef\u80fd\u4f1a\u6e32\u67d3\u67d0\u4e2a <code class=\"language-javascript\">&lt;Button /&gt;</code>\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u5f53\u5b83\u63a2\u6089\u5404\u4e2a\u7ec4\u4ef6\u6e32\u67d3\u7684\u5143\u7d20\u65f6\uff0creconciler \u4f1a\u901a\u8fc7\u7528\u6237\u5b9a\u4e49\u7684\u7ec4\u4ef6\u9012\u5f52\u5730 \u201c\u5411\u4e0b\u63a2\u7d22\u201d\u3002</p>\n<p>\u901a\u8fc7\u4ee5\u4e0b\u4f2a\u4ee3\u7801\u60f3\u8c61\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">isClass</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u7c7b\u7ec4\u4ef6\u4f1a\u6709\u8fd9\u4e2a\u6807\u8bc6\u4f4d</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u8fd9\u4e2a\u51fd\u6570\u63a5\u53d7\u4e00\u4e2a React \u5143\u7d20 (\u4f8b\u5982\uff1a &lt;App /&gt;)</span>\n<span class=\"token comment\">// \u5e76\u8fd4\u56de\u8868\u793a\u5df2\u6302\u8f7d\u6811\u7684 DOM \u6216\u8005 \u539f\u751f\u8282\u70b9</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> props <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u5c06\u901a\u8fc7 type \u4f5c\u4e3a\u51fd\u6570\u8fd0\u884c</span>\n  <span class=\"token comment\">// \u6216\u521b\u5efa\u5b9e\u4f8b\u5e76\u8c03\u7528 render() </span>\n  <span class=\"token comment\">// \u8fd4\u56de\u6e32\u67d3\u540e\u7684\u5143\u7d20</span>\n  <span class=\"token keyword\">var</span> renderedElement<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isClass</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u7c7b\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">var</span> publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">type</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u8bbe\u7f6e props</span>\n    publicInstance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u5982\u679c\u6709\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5c31\u8c03\u7528</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>publicInstance<span class=\"token punctuation\">.</span>componentWillMount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// \u8c03\u7528 render() \u8fd4\u56de\u6e32\u67d3\u540e\u7684\u5143\u7d20</span>\n    renderedElement <span class=\"token operator\">=</span> publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u51fd\u6570\u7ec4\u4ef6</span>\n    renderedElement <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// \u8fd9\u4e2a\u8fc7\u7a0b\u662f\u9012\u5f52\u7684</span>\n  <span class=\"token comment\">// \u56e0\u4e3a\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u8fd4\u56de\u5177\u4f53\u53e6\u4e00\u4e2a\u7ec4\u4ef6\u7c7b\u578b\u7684\u5143\u7d20</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span>renderedElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u63d0\u793a\uff1a\u8fd9\u4e2a\u5b9e\u73b0\u662f\u4e0d\u5b8c\u6574\u7684\u5e76\u4e14\u65e0\u9650\u9012\u5f52\uff01</span>\n  <span class=\"token comment\">// \u53ea\u5904\u7406\u50cf &lt;App /&gt; \u6216\u8005 &lt;Button /&gt; \u7684\u5143\u7d20</span>\n  <span class=\"token comment\">// \u8fd8\u4e0d\u80fd\u5904\u7406\u50cf &lt;div /&gt; \u6216\u8005 &lt;p /&gt; \u7684\u5143\u7d20</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrootEl<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u8fd9\u5176\u5b9e<em>\u662f</em>\u4e00\u4efd\u4f2a\u4ee3\u7801\u3002\u5b83\u4e0e\u771f\u5b9e\u7684\u5b9e\u73b0\u5e76\u4e0d\u76f8\u4f3c\u3002\u56e0\u4e3a\u6211\u4eec\u8fd8\u6ca1\u6709\u8ba8\u8bba\u8be5\u9012\u5f52\u8fc7\u7a0b\u4f55\u65f6\u505c\u6b62\uff0c\u6240\u4ee5\u5b83\u4e5f\u4f1a\u9020\u6210\u5806\u6808\u6ea2\u51fa\u3002</p>\n</div>\n<p>\u8ba9\u6211\u4eec\u56de\u987e\u4e0a\u9762\u4f8b\u5b50\u4e2d\u7684\u4e00\u4e9b\u5173\u952e\u7684\u60f3\u6cd5\uff1a</p>\n<ul>\n<li>React \u5143\u7d20\u662f\u7528\u6765\u8868\u793a\u7ec4\u4ef6\u7684\u7c7b\u578b\uff08\u4f8b\u5982\uff1a<code class=\"language-javascript\">App</code>\uff09\u548c props \u7684\u7b80\u5355\u7684\u5bf9\u8c61\u3002</li>\n<li>\u7528\u6237\u5b9a\u4e49\u7684\u7ec4\u4ef6\uff08\u4f8b\u5982\uff1a<code class=\"language-javascript\">App</code>\uff09\u53ef\u4ee5\u662f\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u662f\u51fd\u6570\uff0c\u4f46\u662f\u5b83\u4eec\u90fd\u201c\u6e32\u67d3\u4ea7\u751f\u201d\u5143\u7d20\u3002</li>\n<li>\u201c\u6302\u8f7d\u201d\u662f\u4e00\u4e2a\u9012\u5f52\u7684\u8fc7\u7a0b\uff0c\u6839\u636e\u7279\u5b9a\u7684\u9876\u5c42 React \u5143\u7d20\uff08e.g. <code class=\"language-javascript\">&lt;App /&gt;</code>\uff09\u4ea7\u751f DOM \u6216 Native \u6811\u3002</li>\n</ul>\n<h3 id=\"mounting-host-elements\"><a class=\"anchor\" href=\"/react/implementation-notes#mounting-host-elements\"></a>\u6302\u8f7d\u5bbf\u4e3b\u5143\u7d20 </h3>\n<p>\u5982\u679c\u6211\u4eec\u6ca1\u6709\u6e32\u67d3\u67d0\u4e9b\u4e1c\u897f\u8f93\u51fa\u5230\u7535\u8111\u5c4f\u5e55\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5c06\u4f1a\u662f\u65e0\u7528\u7684\u3002</p>\n<p>\u9664\u4e86\u7528\u6237\u5b9a\u4e49\u7684\uff08\u201c\u7ec4\u5408\u201d\uff09\u7ec4\u4ef6\uff0cReact \u5143\u7d20\u4e5f\u53ef\u80fd\u8868\u793a\u4e3a\u5e73\u53f0\u4e13\u5c5e\uff08\u201c\u5bbf\u4e3b\u201d\uff09\u7ec4\u4ef6\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">Button</code> \u53ef\u80fd\u4f1a\u4ece render \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a <code class=\"language-javascript\">&lt;div /&gt;</code>\u3002</p>\n<p>\u5982\u679c\u5143\u7d20\u7684 <code class=\"language-javascript\">type</code> \u5c5e\u6027\u662f\u5b57\u7b26\u4e32\uff0c\u6211\u4eec\u5904\u7406\u7684\u5c31\u662f\u5bbf\u4e3b\u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// { type: 'div', props: {} }</span></code></pre></div>\n<p>\u5bbf\u4e3b\u5143\u7d20\u4e2d\u6ca1\u6709\u7528\u6237\u5b9a\u4e49\u4ee3\u7801\u3002</p>\n<p>\u5f53 reconciler \u9047\u5230\u5bbf\u4e3b\u5143\u7d20\u65f6\uff0c\u5b83\u4f1a\u8ba9 renderer \u8d1f\u8d23\u6302\u8f7d\u5b83\u3002\u4f8b\u5982\uff0cReact DOM \u4f1a\u521b\u5efa\u4e00\u4e2a DOM \u8282\u70b9\u3002</p>\n<p>\u5982\u679c\u5bbf\u4e3b\u5143\u7d20\u62e5\u6709\u5b50\u5143\u7d20\uff0creconciler \u4f1a\u6839\u636e\u4e0a\u6587\u63d0\u5230\u7684\u7b97\u6cd5\u5bf9\u5176\u8fdb\u884c\u9012\u5f52\u5730\u6302\u8f7d\u3002\u65e0\u8bba\u5b50\u5143\u7d20\u662f\u5bbf\u4e3b\uff08\u50cf <code class=\"language-javascript\">&lt;div&gt;&lt;hr /&gt;&lt;div&gt;</code>\uff09\uff0c\u8fd8\u662f\u7ec4\u5408\uff08\u50cf <code class=\"language-javascript\">&lt;div&gt;&lt;Button /&gt;&lt;/div&gt;</code>\uff09\uff0c\u4e24\u8005\u90fd\u65e0\u6240\u8c13\u3002</p>\n<p>\u5b50\u7ec4\u4ef6\u751f\u6210\u7684 DOM \u8282\u70b9\u4f1a\u9644\u52a0\u5728\u7236 DOM \u8282\u70b9\u4e0a\uff0c\u9012\u5f52\u5730\u5b8c\u6210\u6574\u4e2a DOM \u7ed3\u6784\u7684\u7ec4\u88c5\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>reconciler \u672c\u8eab\u4e0d\u4e0e DOM \u7ed1\u5b9a\u3002\u6302\u8f7d\u7684\u786e\u5207\u7ed3\u679c\uff08\u5728\u6e90\u4ee3\u7801\u4e2d\u6709\u65f6\u53eb\u505a \u201c\u6302\u8f7d\u6620\u50cf\u201d\uff09\u53d6\u51b3\u4e8e renderer\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a DOM \u8282\u70b9\uff08React DOM\uff09\uff0c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08React DOM Server\uff09\uff0c\u6216\u662f\u4e00\u4e2a\u8868\u793a\u539f\u751f\u89c6\u56fe\u7684\u6570\u5b57\uff08React Native\uff09\u3002</p>\n</div>\n<p>\u5982\u679c\u6211\u4eec\u6269\u5c55\u4ee3\u7801\u53bb\u5904\u7406\u5bbf\u4e3b\u5143\u7d20\uff0c\u4f1a\u662f\u5982\u4e0b\u6837\u5b50\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">isClass</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u7c7b\u7ec4\u4ef6\u4f1a\u6709\u8fd9\u4e2a\u6807\u8bc6\u4f4d</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span>\n    <span class=\"token function\">Boolean</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>isReactComponent<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u6b64\u51fd\u6570\u4ec5\u5904\u7406\u7ec4\u5408\u7c7b\u578b\u7684\u5143\u7d20</span>\n<span class=\"token comment\">// \u4f8b\u5982\uff0c\u5904\u7406 &lt;App /&gt; \u548c &lt;Button /&gt;, \u4f46\u4e0d\u5904\u7406 &lt;div /&gt;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">mountComposite</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> props <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> renderedElement<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isClass</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u7c7b\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">var</span> publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">type</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u8bbe\u7f6e props</span>\n    publicInstance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u5982\u679c\u6709\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5c31\u8c03\u7528</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>publicInstance<span class=\"token punctuation\">.</span>componentWillMount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    renderedElement <span class=\"token operator\">=</span> publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u51fd\u6570\u7ec4\u4ef6</span>\n    renderedElement <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// \u8fd9\u662f\u9012\u5f52\u7684\uff0c\u4f46\u662f\u5f53\u5143\u7d20\u662f\u5bbf\u4e3b(\u4f8b\u5982\uff1a &lt;div /&gt;)\u800c\u4e0d\u662f\u7ec4\u5408(\u4f8b\u5982 &lt;App /&gt;)\u65f6\uff0c</span>\n  <span class=\"token comment\">// \u6211\u4eec\u6700\u7ec8\u4f1a\u5230\u8fbe\u9012\u5f52\u7684\u5e95\u90e8\uff1a</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span>renderedElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// \u6b64\u51fd\u6570\u53ea\u5904\u7406\u5bbf\u4e3b\u7c7b\u578b\u7684\u5143\u7d20</span>\n<span class=\"token comment\">// \u4f8b\u5982\uff1a \u5904\u7406 &lt;div /&gt; \u548c &lt;p /&gt;\uff0c\u4f46\u4e0d\u5904\u7406 &lt;App /&gt;.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">mountHost</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> props <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> children <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>children <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    children <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>children<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  children <span class=\"token operator\">=</span> children<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>Boolean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u8fd9\u6bb5\u4ee3\u7801\u4e0d\u5e94\u8be5\u51fa\u73b0\u5728 reconciler\u3002</span>\n  <span class=\"token comment\">// \u4e0d\u540c\u7684 renderer \u53ef\u80fd\u4f1a\u4ee5\u4e0d\u540c\u65b9\u5f0f\u521d\u59cb\u5316\u8282\u70b9\u3002</span>\n  <span class=\"token comment\">// \u4f8b\u5982\uff0cReact Native \u4f1a\u521b\u5efa iOS \u6216 Android \u7684\u89c6\u56fe\u3002</span>\n  <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">propName</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>propName <span class=\"token operator\">!==</span> <span class=\"token string\">'children'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      node<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>propName<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u6302\u8f7d\u5b50\u5143\u7d20</span>\n  children<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">childElement</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5b50\u5143\u7d20\u53ef\u80fd\u662f\u5bbf\u4e3b(\u4f8b\u5982\uff1a&lt;div /&gt;)\u6216\u8005\u7ec4\u5408 (\u4f8b\u5982\uff1a&lt;Button /&gt;).</span>\n    <span class=\"token comment\">// \u6211\u4eec\u8fd8\u662f\u9012\u5f52\u6302\u8f7d\u4ed6\u4eec</span>\n    <span class=\"token keyword\">var</span> childNode <span class=\"token operator\">=</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span>childElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u8fd9\u4e00\u884c\u4ee3\u7801\u4e5f\u662f\u7279\u6b8a\u7684 renderer\u3002</span>\n    <span class=\"token comment\">// \u6839\u636e renderer \u4e0d\u540c\uff0c\u65b9\u5f0f\u4e5f\u4e0d\u540c\uff1a</span>\n    node<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>childNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// DOM \u8282\u70b9\u4f5c\u4e3a\u6302\u8f7d\u7684\u7ed3\u679c\u8fd4\u56de\u3002</span>\n  <span class=\"token comment\">// \u8fd9\u662f\u9012\u5f52\u7ed3\u675f\u7684\u4f4d\u7f6e\u3002</span>\n  <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u7528\u6237\u5b9a\u4e49\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">mountComposite</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5e73\u53f0\u7279\u5b9a\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">mountHost</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nrootEl<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u4ee5\u4e0a\u4ee3\u7801\u662f\u53ef\u4ee5\u8fd0\u4f5c\u7684\uff0c\u4f46\u662f\u4e0e reconciler \u7684\u5b9e\u9645\u5b9e\u73b0\u4f9d\u7136\u76f8\u5dee\u5f88\u8fdc\u3002\u5173\u952e\u7684\u7f3a\u5931\u90e8\u5206\u662f\u5bf9\u66f4\u65b0\u7684\u652f\u6301\u3002</p>\n<h3 id=\"introducing-internal-instances\"><a class=\"anchor\" href=\"/react/implementation-notes#introducing-internal-instances\"></a>\u5f15\u5165\u5185\u90e8\u5b9e\u4f8b </h3>\n<p>React \u7684\u5173\u952e\u7279\u70b9\u662f\u4f60\u53ef\u4ee5\u91cd\u65b0\u6e32\u67d3\u6240\u6709\u5185\u5bb9\uff0c\u5e76\u4e14\u4e0d\u4f1a\u91cd\u65b0\u751f\u6210 DOM \u6216\u91cd\u7f6e state\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">root<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \u5e94\u8be5\u91cd\u7528\u5df2\u7ecf\u5b58\u5728\u7684 DOM\uff1a</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u7136\u800c\uff0c\u4e4b\u524d\u7684\u5b9e\u73b0\u53ea\u662f\u77e5\u9053\u5982\u4f55\u6302\u8f7d\u6700\u521d\u7684\u6811\u3002\u7531\u4e8e\u5b83\u6ca1\u6709\u50a8\u5b58\u6240\u6709\u7684\u5fc5\u8981\u4fe1\u606f\uff0c\u4f8b\u5982\u6240\u6709\u7684 <code class=\"language-javascript\">publicInstance</code>\uff0c\u6216 DOM \u8282\u70b9\u5c5e\u4e8e\u54ea\u4e2a\u7ec4\u4ef6\uff0c\u6240\u4ee5\u5b83\u4e0d\u80fd\u5b8c\u6210\u66f4\u65b0\u64cd\u4f5c\u3002</p>\n<p>stack reconciler \u6e90\u7801\u901a\u8fc7\u628a <code class=\"language-javascript\">mount()</code> \u51fd\u6570\u4f5c\u4e3a\u4e00\u4e2a\u7c7b\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u8fd9\u79cd\u65b9\u6cd5\u662f\u5b58\u5728\u7f3a\u70b9\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6b63\u671d\u7740\u4e0e\u4e4b\u76f8\u5bf9\u7684\u65b9\u5411<a href=\"/react/codebase-overview#fiber-reconciler\">\u8fdb\u884c reconciler \u7684\u91cd\u5199\u5de5\u4f5c</a>\u3002\u4e0d\u8fc7\u8fd9\u5c31\u662f\u5b83\u73b0\u5728\u7684\u8fd0\u4f5c\u65b9\u5f0f\u3002</p>\n<p>\u6211\u4eec\u4f1a\u521b\u5efa\u4e24\u4e2a\u7c7b\uff1a<code class=\"language-javascript\">DOMComponent</code> \u548c <code class=\"language-javascript\">CompositeComponent</code>\uff0c\u800c\u4e0d\u662f\u5206\u79bb\u7684\u4e24\u4e2a\u51fd\u6570 <code class=\"language-javascript\">mountHost</code> \u548c <code class=\"language-javascript\">mountComposite</code>\u3002</p>\n<p>\u4e24\u4e2a\u7c7b\u90fd\u6709\u4e00\u4e2a\u63a5\u53d7 <code class=\"language-javascript\">element</code> \u7684\u6784\u9020\u51fd\u6570\uff0c\u540c\u65f6\u4e5f\u6709\u4e00\u4e2a\u8fd4\u56de\u6302\u8f7d\u540e\u8282\u70b9\u7684 <code class=\"language-javascript\">mount()</code> \u65b9\u6cd5\u3002\u6211\u4eec\u7528\u4e00\u4e2a\u53ef\u4ee5\u5b9e\u4f8b\u5316\u6b63\u786e\u7c7b\u7684\u5de5\u5382\u51fd\u6570\u66ff\u6362\u4e86\u9876\u5c42\u7684 <code class=\"language-javascript\">mount()</code> \u51fd\u6570\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u7528\u6237\u5b9a\u4e49\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CompositeComponent</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5e73\u53f0\u7279\u5b9a\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DOMComponent</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u601d\u8003\u4e00\u4e0b <code class=\"language-javascript\">CompositeComponent</code> \u7684\u5b9e\u73b0\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CompositeComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement <span class=\"token operator\">=</span> element<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedComponent <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getPublicInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5bf9\u4e8e\u7ec4\u5408\u7ec4\u4ef6\uff0c\u516c\u5171\u7c7b\u5b9e\u4f8b</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publicInstance<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> element <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> props <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> publicInstance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> renderedElement<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isClass</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u7ec4\u4ef6\u7c7b</span>\n      publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">type</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// \u8bbe\u7f6e props</span>\n      publicInstance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// \u5982\u679c\u6709\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5c31\u8c03\u7528</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>publicInstance<span class=\"token punctuation\">.</span>componentWillMount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">componentWillMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      renderedElement <span class=\"token operator\">=</span> publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u51fd\u6570\u7ec4\u4ef6</span>\n      publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n      renderedElement <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// \u4fdd\u5b58\u516c\u5171\u5b9e\u4f8b</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publicInstance <span class=\"token operator\">=</span> publicInstance<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u6839\u636e\u5143\u7d20\u5b9e\u4f8b\u5316\u5b50\u5185\u90e8\u5b9e\u4f8b\u3002</span>\n    <span class=\"token comment\">// &lt;div /&gt; \u6216\u8005 &lt;p /&gt; \u662f DOMComponent\uff0c</span>\n    <span class=\"token comment\">// \u800c &lt;App /&gt; \u6216\u8005 &lt;Button /&gt; \u662f CompositeComponent\u3002</span>\n    <span class=\"token keyword\">var</span> renderedComponent <span class=\"token operator\">=</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span>renderedElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedComponent <span class=\"token operator\">=</span> renderedComponent<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u6302\u8f7d\u6e32\u67d3\u540e\u7684\u8f93\u51fa</span>\n    <span class=\"token keyword\">return</span> renderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u4e0e\u4e4b\u524d\u7684 <code class=\"language-javascript\">mountComposite()</code> \u7684\u5b9e\u73b0\u6ca1\u6709\u592a\u591a\u7684\u4e0d\u540c\uff0c\u4f46\u662f\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u4fdd\u5b58\u4e00\u4e9b\u4fe1\u606f\uff0c\u5982 <code class=\"language-javascript\">this.currentElement</code>\uff0c<code class=\"language-javascript\">this.renderedComponent</code> \u548c <code class=\"language-javascript\">this.publicInstance</code>\uff0c\u7528\u4e8e\u66f4\u65b0\u671f\u95f4\u4f7f\u7528\u3002</p>\n<p>\u9700\u8981\u6ce8\u610f\u7684\u662f <code class=\"language-javascript\">CompositeComponent</code> \u7684\u5b9e\u4f8b\u4e0e\u7528\u6237\u63d0\u4f9b\u7684 <code class=\"language-javascript\">element.type</code> \u7684\u5b9e\u4f8b\u662f\u4e0d\u540c\u7684\u4e1c\u897f\u3002<code class=\"language-javascript\">CompositeComponent</code> \u662f\u6211\u4eec\u7684 reconciler \u7684\u5b9e\u73b0\u7ec6\u8282\uff0c\u5e76\u4e14\u6c38\u8fdc\u4e0d\u4f1a\u66b4\u9732\u7ed9\u7528\u6237\u3002\u7528\u6237\u5b9a\u4e49\u7684\u7c7b\u662f\u4ece <code class=\"language-javascript\">element.type</code> \u8bfb\u53d6\u7684\uff0c\u5e76\u4e14 <code class=\"language-javascript\">CompositeComponent</code> \u4f1a\u521b\u5efa\u4e00\u4e2a\u5b83\u7684\u5b9e\u4f8b\u3002</p>\n<p>\u4e3a\u4e86\u907f\u514d\u6df7\u6dc6\uff0c\u6211\u4eec\u628a <code class=\"language-javascript\">CompositeComponent</code> \u548c <code class=\"language-javascript\">DOMComponent</code> \u7684\u5b9e\u4f8b\u53eb\u505a\u201c\u5185\u90e8\u5b9e\u4f8b\u201d\u3002\u7531\u4e8e\u5b83\u4eec\u7684\u5b58\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e9b\u957f\u65f6\u95f4\u5b58\u5728\u7684\u6570\u636e\u5b58\u5165\u5176\u4e2d\u3002\u53ea\u6709 renderer \u548c reconciler \u80fd\u610f\u8bc6\u5230\u5b83\u4eec\u7684\u5b58\u5728\u3002</p>\n<p>\u76f8\u53cd\uff0c\u6211\u4eec\u628a\u7528\u6237\u5b9a\u4e49\u7684\u7c7b\u7684\u5b9e\u4f8b\u53eb\u505a\u201c\u516c\u5171\u5b9e\u4f8b\u201d\u3002\u516c\u5171\u5b9e\u4f8b\u5c31\u662f\u4f60\u5728 <code class=\"language-javascript\">render()</code> \u4e2d\u6240\u89c1\u5230\u7684 <code class=\"language-javascript\">this</code> \u548c\u4f60\u7684\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u4e2d\u7684\u4e00\u4e9b\u5176\u4ed6\u65b9\u6cd5\u3002</p>\n<p><code class=\"language-javascript\">mountHost()</code> \u51fd\u6570\uff0c\u91cd\u6784\u4e3a <code class=\"language-javascript\">DOMComponent</code> \u7c7b\u7684 <code class=\"language-javascript\">mount()</code> \u65b9\u6cd5\uff0c\u770b\u8d77\u6765\u4e5f\u5f88\u719f\u6089\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DOMComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement <span class=\"token operator\">=</span> element<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedChildren <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getPublicInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5bf9\u4e8e DOM \u7ec4\u4ef6\uff0c\u53ea\u516c\u5171 DOM \u8282\u70b9</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> element <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> props <span class=\"token operator\">=</span> element<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> children <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>children <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      children <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>children<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// \u521b\u5efa\u5e76\u4fdd\u5b58\u8282\u70b9</span>\n    <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u8bbe\u7f6e\u5c5e\u6027</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">propName</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>propName <span class=\"token operator\">!==</span> <span class=\"token string\">'children'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        node<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>propName<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u521b\u5efa\u5e76\u4fdd\u5b58\u5305\u542b\u7684\u5b50\u9879</span>\n    <span class=\"token comment\">// \u4ed6\u4eec\u6bcf\u4e2a\u90fd\u53ef\u4ee5\u662f DOMComponent \u6216\u8005\u662f CompositeComponent\uff0c</span>\n    <span class=\"token comment\">// \u53d6\u51b3\u4e8e\u7c7b\u578b\u662f\u5b57\u7b26\u4e32\u8fd8\u662f\u51fd\u6570</span>\n    <span class=\"token keyword\">var</span> renderedChildren <span class=\"token operator\">=</span> children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>instantiateComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedChildren <span class=\"token operator\">=</span> renderedChildren<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u6536\u96c6\u4ed6\u4eec\u5728 mount \u4e0a\u8fd4\u56de\u7684\u8282\u70b9</span>\n    <span class=\"token keyword\">var</span> childNodes <span class=\"token operator\">=</span> renderedChildren<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span> <span class=\"token operator\">=&gt;</span> child<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    childNodes<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">childNode</span> <span class=\"token operator\">=&gt;</span> node<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>childNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// DOM \u8282\u70b9\u4f5c\u4e3a\u6302\u8f7d\u7ed3\u679c\u8fd4\u56de</span>\n    <span class=\"token keyword\">return</span> node<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-javascript\">mountHost()</code> \u91cd\u6784\u540e\u4e3b\u8981\u7684\u533a\u522b\u662f\u6211\u4eec\u4fdd\u5b58\u4e86\u4e0e\u5185\u90e8 DOM \u7ec4\u4ef6\u5b9e\u4f8b\u5173\u8054\u7684 <code class=\"language-javascript\">this.node</code> \u548c <code class=\"language-javascript\">this.renderedChildren</code>\u3002\u5728\u5c06\u6765\u6211\u4eec\u8fd8\u4f7f\u7528\u4ed6\u4eec\u6765\u8fdb\u884c\u975e\u7834\u574f\u6027\u66f4\u65b0\u3002</p>\n<p>\u56e0\u6b64\uff0c\u6bcf\u4e2a\u5185\u90e8\u5b9e\u4f8b\uff0c\u7ec4\u5408\u6216\u8005\u5bbf\u4e3b\uff0c\u73b0\u5728\u90fd\u6307\u5411\u4e86\u5b83\u7684\u5b50\u5185\u90e8\u5b9e\u4f8b\u3002\u4e3a\u5e2e\u4f60\u66f4\u76f4\u89c2\u7684\u4e86\u89e3\uff0c\u5047\u8bbe\u6709\u51fd\u6570\u7ec4\u4ef6 <code class=\"language-javascript\">&lt;App&gt;</code> \u4f1a\u6e32\u67d3\u7c7b\u7ec4\u4ef6 <code class=\"language-javascript\">&lt;Button&gt;</code>\uff0c\u5e76\u4e14 <code class=\"language-javascript\">Button</code> \u6e32\u67d3\u4e00\u4e2a <code class=\"language-javascript\">&lt;div&gt;</code>\uff0c\u5176\u5185\u90e8\u5b9e\u4f8b\u6811\u5c06\u5982\u4e0b\u6240\u793a:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token punctuation\">[</span>object CompositeComponent<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">currentElement</span><span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">publicInstance</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">renderedComponent</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>object CompositeComponent<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">currentElement</span><span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">publicInstance</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>object Button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">renderedComponent</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>object DOMComponent<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">currentElement</span><span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">node</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>object HTMLDivElement<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">renderedChildren</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728 DOM \u4e2d, \u4f60\u53ea\u80fd\u770b\u5230 <code class=\"language-javascript\">&lt;div&gt;</code>\u3002\u4f46\u662f\u5728\u5185\u90e8\u5b9e\u4f8b\u6811\u5305\u542b\u4e86\u7ec4\u5408\u548c\u5bbf\u4e3b\u7684\u5185\u90e8\u5b9e\u4f8b\u3002</p>\n<p>\u7ec4\u5408\u5185\u90e8\u5b9e\u4f8b\u9700\u8981\u5b58\u50a8\uff1a</p>\n<ul>\n<li>\u5f53\u524d\u5143\u7d20\u3002</li>\n<li>\u5982\u679c\u5143\u7d20\u7684\u7c7b\u578b\u662f\u7c7b\u7684\u516c\u5171\u5b9e\u4f8b</li>\n<li>\u5355\u6b21\u6e32\u67d3\u540e\u7684\u5185\u90e8\u5b9e\u4f8b\u3002\u5b83\u53ef\u4ee5\u662f <code class=\"language-javascript\">DOMComponent</code> \u6216 <code class=\"language-javascript\">CompositeComponent</code>\u3002</li>\n</ul>\n<p>\u5bbf\u4e3b\u5185\u90e8\u5b9e\u4f8b\u9700\u8981\u5b58\u50a8\uff1a</p>\n<ul>\n<li>\u5f53\u524d\u5143\u7d20\u3002</li>\n<li>DOM \u8282\u70b9.</li>\n<li>\u6240\u6709\u5b50\u5185\u90e8\u5b9e\u4f8b\u3002\u5b83\u4eec\u4e2d\u7684\u6bcf\u4e00\u4e2a\u90fd\u53ef\u4ee5\u662f <code class=\"language-javascript\">DOMComponent</code> \u6216<code class=\"language-javascript\">CompositeComponent</code>\u3002</li>\n</ul>\n<p>\u5982\u679c\u4f60\u96be\u4ee5\u60f3\u8c61\u5185\u90e8\u5b9e\u4f8b\u6811\u5728\u8f83\u4e3a\u590d\u6742\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u7ed3\u6784\uff0c<a class=\"external-link\" href=\"https://github.com/facebook/react-devtools\">React DevTools</a> \u53ef\u4ee5\u7ed9\u4f60\u4e00\u4e2a\u76f8\u4f3c\u7684\u7ed3\u679c\uff0c\u56e0\u4e3a\u5b83\u7a81\u51fa\u5448\u73b0\u4e86\u7070\u8272\u7684\u5bbf\u4e3b\u5b9e\u4f8b\uff0c\u4ee5\u53ca\u7d2b\u8272\u7684\u7ec4\u5408\u5b9e\u4f8b\u3002</p>\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/d96fec10d250eace9756f09543bf5d58/00d43/implementation-notes-tree.png\">\n<span class=\"gatsby-resp-image-wrapper\">\n<span class=\"gatsby-resp-image-background-image\">\n<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//static/d96fec10d250eace9756f09543bf5d58/1e088/implementation-notes-tree.png\">Image link</a>\n</span>\n</span>\n</a>\n<p>\u4e3a\u4e86\u5b8c\u6210\u91cd\u6784\uff0c\u6211\u4eec\u5c06\u5f15\u5165\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u5c06\u5b8c\u6574\u7684\u6811\u6302\u8f7d\u5230\u5bb9\u5668\u8282\u70b9\u4e2d\u5e76\u8fd4\u56de\u516c\u5171\u5b9e\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> containerNode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u521b\u5efa\u9876\u5c42\u5185\u90e8\u5b9e\u4f8b</span>\n  <span class=\"token keyword\">var</span> rootComponent <span class=\"token operator\">=</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u6302\u8f7d\u9876\u5c42\u7ec4\u4ef6\u5230\u5bb9\u5668\u4e2d</span>\n  <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> rootComponent<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  containerNode<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u8fd4\u56de\u5b83\u63d0\u4f9b\u7684\u516c\u5171\u5b9e\u4f8b</span>\n  <span class=\"token keyword\">var</span> publicInstance <span class=\"token operator\">=</span> rootComponent<span class=\"token punctuation\">.</span><span class=\"token function\">getPublicInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> publicInstance<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> rootEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"unmounting\"><a class=\"anchor\" href=\"/react/implementation-notes#unmounting\"></a>\u5378\u8f7d </h3>\n<p>\u73b0\u5728\uff0c\u6211\u4eec\u6709\u5185\u90e8\u5b9e\u4f8b\uff0c\u4ee5\u4fdd\u7559\u5176\u5b50\u8282\u70b9\u548c DOM \u8282\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u5378\u8f7d\u3002\u5bf9\u4e8e\u7ec4\u5408\u7ec4\u4ef6\uff0c\u5378\u8f7d\u8c03\u7528\u751f\u547d\u5468\u671f\u65b9\u6cd5\u548c\u9012\u5f52\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CompositeComponent</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5982\u679c\u6709\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5c31\u8c03\u7528</span>\n    <span class=\"token keyword\">var</span> publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publicInstance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>publicInstance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>publicInstance<span class=\"token punctuation\">.</span>componentWillUnmount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// \u5378\u8f7d\u5355\u4e2a\u6e32\u67d3\u7684\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">var</span> renderedComponent <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedComponent<span class=\"token punctuation\">;</span>\n    renderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5bf9\u4e8e <code class=\"language-javascript\">DOMComponent</code>\uff0c\u4f1a\u544a\u8bc9\u6bcf\u4e00\u4e2a\u5b50\u9879\u53bb\u5378\u8f7d</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DOMComponent</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u5378\u8f7d\u6240\u6709\u7684\u5b50\u9879</span>\n    <span class=\"token keyword\">var</span> renderedChildren <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedChildren<span class=\"token punctuation\">;</span>\n    renderedChildren<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span> <span class=\"token operator\">=&gt;</span> child<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u5378\u8f7d DOM \u7ec4\u4ef6\u4e5f\u9700\u8981\u5220\u9664\u4e8b\u4ef6\u4fa6\u542c\u5668\u548c\u6e05\u9664\u4e00\u4e9b\u7f13\u5b58\uff0c\u4f46\u6211\u4eec\u5c06\u8df3\u8fc7\u8fd9\u4e9b\u7ec6\u8282\u3002</p>\n<p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u53eb <code class=\"language-javascript\">unmountTree(containerNode)</code> \u9876\u5c42\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u7c7b\u4f3c\u4e8e <code class=\"language-javascript\">ReactDOM.unmountComponentAtNode()</code> \u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">unmountTree</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">containerNode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u4ece DOM \u8282\u70b9\u8bfb\u53d6\u5185\u90e8\u5b9e\u4f8b:</span>\n  <span class=\"token comment\">// (\u8fd9\u8fd8\u4e0d\u8d77\u4f5c\u7528,\u6211\u4eec\u9700\u8981\u66f4\u6539 mountTreeTree() \u6765\u5b58\u50a8\u5b83\u3002)</span>\n  <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> containerNode<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> rootComponent <span class=\"token operator\">=</span> node<span class=\"token punctuation\">.</span>_internalInstance<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u5378\u8f7d\u6811\u5e76\u6e05\u7a7a\u5bb9\u5668</span>\n  rootComponent<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  containerNode<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u4e3a\u4e86\u4f7f\u5176\u5de5\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u4ece DOM \u8282\u70b9\u8bfb\u53d6\u5185\u90e8\u6839\u5b9e\u4f8b\u3002\u6211\u4eec\u5c06\u4fee\u6539 <code class=\"language-javascript\">mountTree()</code> \u4e3a\u5176\u589e\u52a0 <code class=\"language-javascript\">_internalInstance</code> \u5c5e\u6027\u6765\u6dfb\u52a0 DOM \u6839\u8282\u70b9\uff0c\u6211\u4eec\u8fd8\u5c06\u5728 <code class=\"language-javascript\">mountTree()</code> \u4e2d\u5b9e\u73b0\u9500\u6bc1\u4efb\u4f55\u73b0\u6709\u7684\u6811\u7684\u529f\u80fd, \u4ee5\u4fbf\u5b83\u53ef\u4ee5\u88ab\u591a\u6b21\u8c03\u7528:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> containerNode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u9500\u6bc1\u6240\u6709\u73b0\u6709\u7684\u6811</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>containerNode<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">unmountTree</span><span class=\"token punctuation\">(</span>containerNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// \u521b\u5efa\u9876\u5c42\u7684\u5185\u90e8\u5b9e\u4f8b</span>\n  <span class=\"token keyword\">var</span> rootComponent <span class=\"token operator\">=</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u6302\u8f7d\u9876\u5c42\u7ec4\u4ef6\u5230\u5bb9\u5668\u4e2d</span>\n  <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> rootComponent<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  containerNode<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u4fdd\u5b58\u5bf9\u5185\u90e8\u5b9e\u4f8b\u7684\u5f15\u7528</span>\n  node<span class=\"token punctuation\">.</span>_internalInstance <span class=\"token operator\">=</span> rootComponent<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u8fd4\u56de\u5b83\u63d0\u4f9b\u7684\u516c\u5171\u5b9e\u4f8b</span>\n  <span class=\"token keyword\">var</span> publicInstance <span class=\"token operator\">=</span> rootComponent<span class=\"token punctuation\">.</span><span class=\"token function\">getPublicInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> publicInstance<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\uff0c\u8fd0\u884c <code class=\"language-javascript\">unmountTree()</code> \u6216\u91cd\u590d\u8fd0\u884c <code class=\"language-javascript\">mountTree()</code>\uff0c\u90fd\u4f1a\u5220\u9664\u65e7\u6811\u5e76\u5728\u7ec4\u4ef6\u4e0a\u8fd0\u884c <code class=\"language-javascript\">componentWillUnmount()</code> \u751f\u547d\u5468\u671f\u65b9\u6cd5\u3002</p>\n<h3 id=\"updating\"><a class=\"anchor\" href=\"/react/implementation-notes#updating\"></a>\u66f4\u65b0 </h3>\n<p>\u5728\u4e0a\u4e00\u4e2a\u7ae0\u8282\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u5378\u8f7d\u3002\u4f46\u662f\uff0c\u5982\u679c\u6bcf\u4e2a prop \u66f4\u6539\u90fd\u5378\u8f7d\u6574\u68f5\u6811\uff0c\u5e76\u91cd\u65b0\u6302\u8f7d\uff0c\u90a3\u4e48 react \u5c31\u4e0d\u518d\u9ad8\u6548\u4e86\u3002reconciler \u7684\u76ee\u6807\u662f\u5c3d\u53ef\u80fd\u590d\u7528\u73b0\u6709\u5b9e\u4f8b\u6765\u4fdd\u7559 DOM \u548c\u72b6\u6001\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> rootEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \u5e94\u8be5\u590d\u7528\u5df2\u7ecf\u5b58\u5728\u7684 DOM\uff1a</span>\n<span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> rootEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u6211\u4eec\u5c06\u7528\u4e00\u79cd\u65b9\u6cd5\u6269\u5c55\u5185\u90e8\u5b9e\u4f8b\u3002\u9664\u4e86 <code class=\"language-javascript\">mount()</code> \u548c <code class=\"language-javascript\">unmount()</code> \u4e4b\u5916\uff0c<code class=\"language-javascript\">DOMComponent</code> \u548c <code class=\"language-javascript\">CompositeComponent</code> \u90fd\u5c06\u5b9e\u73b0\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">receive(nextElement)</code> \u7684\u65b0\u65b9\u6cd5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CompositeComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DOMComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u5b83\u7684\u5de5\u4f5c\u662f\u5c3d\u4e00\u5207\u53ef\u80fd\u4f7f\u7ec4\u4ef6\uff08\u53ca\u5176\u4efb\u4f55\u5b50\u7ec4\u4ef6\uff09\u4e0e <code class=\"language-javascript\">nextElement</code> \u63d0\u4f9b\u7684\u63cf\u8ff0\u4e00\u8d77\u66f4\u65b0\u3002</p>\n<p>\u8fd9\u901a\u5e38\u88ab\u79f0\u4e3a \u201cvirtual DOM diffing\u201d \u7684\u90e8\u5206\uff0c\u4f46\u5b9e\u9645\u53d1\u751f\u7684\u60c5\u51b5\u662f\uff0c\u6211\u4eec\u9012\u5f52\u904d\u5386\u5185\u90e8\u6811\uff0c\u8ba9\u6bcf\u4e2a\u5185\u90e8\u5b9e\u4f8b\u63a5\u6536\u66f4\u65b0\u3002</p>\n<h3 id=\"updating-composite-components\"><a class=\"anchor\" href=\"/react/implementation-notes#updating-composite-components\"></a>\u66f4\u65b0\u7ec4\u5408\u7ec4\u4ef6 </h3>\n<p>\u5f53\u4e00\u4e2a\u7ec4\u5408\u7ec4\u4ef6\u63a5\u6536\u4e00\u4e2a\u65b0\u7684\u5143\u7d20\u65f6\uff0c\u6211\u4eec\u5c06\u8fd0\u884c\u751f\u547d\u5468\u671f\u65b9\u6cd5 <code class=\"language-javascript\">componentWillUpdate()</code>\u3002</p>\n<p>\u7136\u540e\u6211\u4eec\u4f7f\u7528\u65b0\u7684 prop \u91cd\u65b0\u6e32\u67d3\u7ec4\u4ef6, \u5e76\u83b7\u53d6\u4e0b\u4e00\u6b21\u6e32\u67d3\u7684\u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CompositeComponent</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> prevProps <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> publicInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>publicInstance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> prevRenderedComponent <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedComponent<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> prevRenderedElement <span class=\"token operator\">=</span> prevRenderedComponent<span class=\"token punctuation\">.</span>currentElement<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u66f4\u65b0*\u81ea\u5df1\u7684*\u5143\u7d20</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement <span class=\"token operator\">=</span> nextElement<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> nextElement<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> nextProps <span class=\"token operator\">=</span> nextElement<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u627e\u4e0b\u4e00\u6b21 render() \u8f93\u51fa\u7684\u662f\u4ec0\u4e48</span>\n    <span class=\"token keyword\">var</span> nextRenderedElement<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isClass</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u7c7b\u7ec4\u4ef6</span>\n      <span class=\"token comment\">// \u5982\u679c\u6709\u751f\u547d\u5468\u671f\u65b9\u6cd5\u5c31\u8c03\u7528</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>publicInstance<span class=\"token punctuation\">.</span>componentWillUpdate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">componentWillUpdate</span><span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// \u66f4\u65b0 props </span>\n      publicInstance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> nextProps<span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// \u91cd\u65b0\u6e32\u67d3</span>\n      nextRenderedElement <span class=\"token operator\">=</span> publicInstance<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> type <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u51fd\u6570\u7ec4\u4ef6</span>\n      nextRenderedElement <span class=\"token operator\">=</span> <span class=\"token function\">type</span><span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u4e00\u4e0b\u6e32\u67d3\u5143\u7d20\u7684 <code class=\"language-javascript\">type</code>\u3002\u5982\u679c <code class=\"language-javascript\">type</code> \u81ea\u4e0a\u6b21\u6e32\u67d3\u540e\u6ca1\u6709\u6539\u53d8\uff0c\u4e4b\u540e\u7684\u7ec4\u4ef6\u4e5f\u53ef\u4ee5\u5c31\u5730\u66f4\u65b0\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5982\u679c\u7b2c\u4e00\u6b21\u8fd4\u56de <code class=\"language-javascript\">&lt;Button color=\"red\" /&gt;</code>\uff0c\u7b2c\u4e8c\u6b21\u8fd4\u56de <code class=\"language-javascript\">&lt;Button color=\"blue\" /&gt;</code>\uff0c\u6211\u4eec\u53ef\u4ee5\u53ea\u544a\u8bc9\u76f8\u5e94\u7684\u5185\u90e8\u5b9e\u4f8b <code class=\"language-javascript\">receive()</code> \u4e0b\u4e00\u4e2a\u5143\u7d20\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">// \u5982\u679c\u6e32\u67d3\u5143\u7d20\u7684 type \u6ca1\u6709\u66f4\u6539\uff0c</span>\n    <span class=\"token comment\">// \u91cd\u7528\u5df2\u7ecf\u5b58\u5728\u7ec4\u4ef6\u5b9e\u4f8b\u5e76\u9000\u51fa\u3002</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevRenderedElement<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> nextRenderedElement<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      prevRenderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span>nextRenderedElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u4f46\u662f\uff0c\u5982\u679c\u4e0b\u4e00\u4e2a\u6e32\u67d3\u5143\u7d20\u7684 <code class=\"language-javascript\">type</code> \u4e0e\u5148\u524d\u6e32\u67d3\u7684\u5143\u7d20\u4e0d\u540c\uff0c\u5219\u65e0\u6cd5\u66f4\u65b0\u5185\u90e8\u5b9e\u4f8b\u3002<code class=\"language-javascript\">&lt;button&gt;</code> \u4e0d\u80fd \u201c\u53d8\u6210\u201d <code class=\"language-javascript\">&lt;input&gt;</code>\u3002</p>\n<p>\u76f8\u53cd\uff0c\u6211\u4eec\u5fc5\u987b\u5378\u8f7d\u73b0\u6709\u7684\u5185\u90e8\u5b9e\u4f8b\uff0c\u7136\u540e\u6302\u8f7d\u5e76\u6e32\u67d3\u5143\u7d20 <code class=\"language-javascript\">type</code> \u5bf9\u5e94\u7684\u65b0\u5b9e\u4f8b\u3002\u4f8b\u5982\uff0c\u5f53\u5148\u524d\u6e32\u67d3 <code class=\"language-javascript\">&lt;button /&gt;</code> \u7684\u7ec4\u4ef6\u518d\u6e32\u67d3 <code class=\"language-javascript\">&lt;input /&gt;</code> \u65f6\uff0c\u4f1a\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">// \u5982\u679c\u6211\u4eec\u8fbe\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u9700\u8981\u5378\u8f7d\u4ee5\u524d\u6302\u8f7d\u7684\u7ec4\u4ef6\u3002</span>\n    <span class=\"token comment\">// \u6302\u8f7d\u65b0\u7684\u7ec4\u4ef6\uff0c\u5e76\u4ea4\u6362\u5176\u8282\u70b9\u3002</span>\n\n    <span class=\"token comment\">// \u67e5\u627e\u65e7\u8282\u70b9\uff0c\u56e0\u4e3a\u9700\u8981\u66ff\u6362\u5b83</span>\n    <span class=\"token keyword\">var</span> prevNode <span class=\"token operator\">=</span> prevRenderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">getHostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u5378\u8f7d\u65e7\u7684\u5b50\u7ec4\u4ef6\u5e76\u6302\u8f7d\u65b0\u7684\u5b50\u7ec4\u4ef6</span>\n    prevRenderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> nextRenderedComponent <span class=\"token operator\">=</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span>nextRenderedElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> nextNode <span class=\"token operator\">=</span> nextRenderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u66ff\u6362\u5b50\u7ec4\u4ef6\u7684\u5f15\u7528</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedComponent <span class=\"token operator\">=</span> nextRenderedComponent<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u5c06\u65e7\u8282\u70b9\u66ff\u6362\u4e3a\u65b0\u8282\u70b9</span>\n    <span class=\"token comment\">// \u6ce8\u610f\uff1a\u8fd9\u662f renderer \u7279\u5b9a\u7684\u4ee3\u7801,</span>\n    <span class=\"token comment\">// \u7406\u60f3\u60c5\u51b5\u4e0b\u5e94\u4f4d\u4e8e CompositeComponent \u4e4b\u5916\uff1a</span>\n    prevNode<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">replaceChild</span><span class=\"token punctuation\">(</span>nextNode<span class=\"token punctuation\">,</span> prevNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u5f53\u7ec4\u5408\u7ec4\u4ef6\u6536\u5230\u65b0\u5143\u7d20\u65f6\uff0c\u5b83\u53ef\u4ee5\u5c06\u66f4\u65b0\u59d4\u6d3e\u7ed9\u5176\u6e32\u67d3\u7684\u5185\u90e8\u5b9e\u4f8b\uff0c\u6216\u8005\u5378\u8f7d\u5b83\u5e76\u5728\u5176\u4f4d\u7f6e\u6302\u8f7d\u65b0\u5143\u7d20\u3002</p>\n<p>\u8fd8\u6709\u53e6\u4e00\u79cd\u60c5\u51b5\uff0c\u7ec4\u4ef6\u5c06\u91cd\u65b0\u6302\u8f7d\u800c\u975e\u63a5\u6536\u5143\u7d20\uff0c\u5373\u5143\u7d20\u7684 <code class=\"language-javascript\">key</code> \u5df2\u66f4\u6539\u3002\u5728\u5f53\u524d\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u4e0d\u8ba8\u8bba <code class=\"language-javascript\">key</code> \u5904\u7406\uff0c\u56e0\u4e3a\u5b83\u589e\u52a0\u4e86\u590d\u6742\u6559\u7a0b\u7684\u590d\u6742\u6027\u3002</p>\n<p>\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u9700\u8981\u5411\u5185\u90e8\u5b9e\u4f8b\u6dfb\u52a0\u540d\u4e3a <code class=\"language-javascript\">getHostNode()</code> \u7684\u65b9\u6cd5\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5728\u66f4\u65b0\u671f\u95f4\u627e\u5230\u5e73\u53f0\u7279\u5b9a\u7684\u8282\u70b9\u5e76\u66ff\u6362\u5b83\u3002\u5bf9\u4e8e\u4e24\u4e2a\u7c7b\uff0c\u5176\u5b9e\u73b0\u90fd\u975e\u5e38\u7b80\u5355:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CompositeComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">getHostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u8981\u6c42\u6e32\u67d3\u7ec4\u4ef6\u63d0\u4f9b\u5b83\u3002</span>\n    <span class=\"token comment\">// \u9012\u5f52\u6df1\u5165\u4efb\u610f\u7ec4\u5408\u7ec4\u4ef6\u3002</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedComponent<span class=\"token punctuation\">.</span><span class=\"token function\">getHostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DOMComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">getHostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"updating-host-components\"><a class=\"anchor\" href=\"/react/implementation-notes#updating-host-components\"></a>\u66f4\u65b0\u5bbf\u4e3b\u7ec4\u4ef6 </h3>\n<p>\u5bbf\u4e3b\u7ec4\u4ef6\u5b9e\u73b0\uff0c\u5982<code class=\"language-javascript\">DOMComponent</code>\uff0c\u66f4\u65b0\u65b9\u5f0f\u4e0d\u540c\u3002\u5f53\u4ed6\u4eec\u6536\u5230\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u4ed6\u4eec\u9700\u8981\u66f4\u65b0\u5e73\u53f0\u7279\u5b9a\u7684\u89c6\u56fe\u3002\u5728 React DOM \u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u610f\u5473\u7740\u66f4\u65b0 DOM \u5c5e\u6027:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DOMComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n\n  <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> prevElement <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> prevProps <span class=\"token operator\">=</span> prevElement<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> nextProps <span class=\"token operator\">=</span> nextElement<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>    \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>currentElement <span class=\"token operator\">=</span> nextElement<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u5220\u9664\u65e7\u7684\u5c5e\u6027</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">propName</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>propName <span class=\"token operator\">!==</span> <span class=\"token string\">'children'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>nextProps<span class=\"token punctuation\">.</span><span class=\"token function\">hasOwnProperty</span><span class=\"token punctuation\">(</span>propName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        node<span class=\"token punctuation\">.</span><span class=\"token function\">removeAttribute</span><span class=\"token punctuation\">(</span>propName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \u8bbe\u7f6e\u65b0\u7684\u5c5e\u6027</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>nextProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">propName</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>propName <span class=\"token operator\">!==</span> <span class=\"token string\">'children'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        node<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span>propName<span class=\"token punctuation\">,</span> nextProps<span class=\"token punctuation\">[</span>propName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u7136\u540e\u5bbf\u4e3b\u7ec4\u4ef6\u9700\u8981\u66f4\u65b0\u5176\u5b50\u7ec4\u4ef6\u3002\u4e0e\u7ec4\u5408\u7ec4\u4ef6\u4e0d\u540c\uff0c\u5b83\u4eec\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5b50\u7ec4\u4ef6\u3002</p>\n<p>\u5728\u6b64\u7b80\u5316\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u5185\u90e8\u5b9e\u4f8b\u6570\u7ec4\u5e76\u904d\u5386\u5b83\uff0c\u6839\u636e\u63a5\u6536\u7684 <code class=\"language-javascript\">type</code> \u662f\u5426\u4e0e\u4ee5\u524d\u7684 <code class=\"language-javascript\">type</code> \u5339\u914d\u66f4\u65b0\u6216\u66ff\u6362\u5185\u90e8\u5b9e\u4f8b\u3002\u771f\u6b63\u7684 reconciler \u8fd8\u4f1a\u5728\u63cf\u8ff0\u4e2d\u83b7\u53d6\u5143\u7d20\u7684 <code class=\"language-javascript\">key</code>\uff0c\u5e76\u5b58\u50a8\u548c\u8ddf\u8e2a\u9664\u4e86\u63d2\u5165\u548c\u5220\u9664\u4e4b\u5916\u7684\u79fb\u52a8\uff0c\u4f46\u6211\u4eec\u8fd9\u91cc\u5c06\u7701\u7565\u6b64\u903b\u8f91\u3002</p>\n<p>\u6211\u4eec\u5728\u5217\u8868\u4e2d\u6536\u96c6\u5b50\u7ec4\u4ef6\u7684 DOM \u64cd\u4f5c\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u6279\u91cf\u6267\u884c\u5b83\u4eec:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">// \u8fd9\u4e9b\u662f React \u5143\u7d20\u7684\u6570\u7ec4:</span>\n    <span class=\"token keyword\">var</span> prevChildren <span class=\"token operator\">=</span> prevProps<span class=\"token punctuation\">.</span>children <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>prevChildren<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      prevChildren <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>prevChildren<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">var</span> nextChildren <span class=\"token operator\">=</span> nextProps<span class=\"token punctuation\">.</span>children <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>nextChildren<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      nextChildren <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>nextChildren<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// \u8fd9\u4e9b\u662f\u5185\u90e8\u5b9e\u4f8b\u7684\u6570\u7ec4:</span>\n    <span class=\"token keyword\">var</span> prevRenderedChildren <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedChildren<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> nextRenderedChildren <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u5f53\u6211\u4eec\u8fed\u4ee3\u5b50\u7ec4\u4ef6\u65f6\uff0c\u6211\u4eec\u5c06\u5411\u6570\u7ec4\u6dfb\u52a0\u76f8\u5e94\u64cd\u4f5c\u3002</span>\n    <span class=\"token keyword\">var</span> operationQueue <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u6ce8\u610f\uff1a\u4ee5\u4e0b\u90e8\u5206\u975e\u5e38\u7b80\u5316!</span>\n    <span class=\"token comment\">// \u5b83\u4e0d\u5904\u7406\u91cd\u65b0\u6392\u5e8f\u3001\u5e26\u7a7a\u6d1e\u6216\u6709 key \u7684\u5b50\u7ec4\u4ef6\u3002</span>\n    <span class=\"token comment\">// \u5b83\u7684\u5b58\u5728\u53ea\u662f\u4e3a\u4e86\u8bf4\u660e\u6574\u4e2a\u6d41\u7a0b\uff0c\u800c\u4e0d\u662f\u7ec6\u8282\u3002</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nextChildren<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// \u5c1d\u8bd5\u53bb\u83b7\u53d6\u6b64\u5b50\u7ec4\u4ef6\u73b0\u6709\u7684\u5185\u90e8\u5b9e\u4f8b</span>\n      <span class=\"token keyword\">var</span> prevChild <span class=\"token operator\">=</span> prevRenderedChildren<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// \u5982\u679c\u6b64\u7d22\u5f15\u4e0b\u6ca1\u6709\u5185\u90e8\u5b9e\u4f8b\uff0c</span>\n      <span class=\"token comment\">// \u5219\u5b50\u5b9e\u4f8b\u5df2\u8ffd\u52a0\u5230\u672b\u5c3e\u3002</span>\n      <span class=\"token comment\">// \u521b\u5efa\u65b0\u7684\u5185\u90e8\u5b9e\u4f8b,\u6302\u8f7d\u5b83,\u5e76\u4f7f\u7528\u5176\u8282\u70b9\u3002</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>prevChild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> nextChild <span class=\"token operator\">=</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span>nextChildren<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> nextChild<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// \u8bb0\u5f55\u6211\u4eec\u9700\u8981\u8ffd\u52a0\u7684\u8282\u70b9</span>\n        operationQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'ADD'</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        nextRenderedChildren<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>nextChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// \u4ec5\u5f53\u5b9e\u4f8b\u7684\u5143\u7d20\u7c7b\u578b\u5339\u914d\u65f6\uff0c\u6211\u4eec\u624d\u80fd\u66f4\u65b0\u8be5\u5b9e\u4f8b\u3002</span>\n      <span class=\"token comment\">// \u4f8b\u5982\uff0c&lt;Button size=\"small\" /&gt; \u53ef\u4ee5\u66f4\u65b0\u6210 &lt;Button size=\"large\" /&gt;\uff0c</span>\n      <span class=\"token comment\">// \u4f46\u662f\u4e0d\u80fd\u66f4\u65b0\u6210 &lt;App /&gt;\u3002</span>\n      <span class=\"token keyword\">var</span> canUpdate <span class=\"token operator\">=</span> prevChildren<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> nextChildren<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// \u5982\u679c\u6211\u4eec\u65e0\u6cd5\u66f4\u65b0\u73b0\u6709\u7684\u5b9e\u4f8b\uff0c</span>\n      <span class=\"token comment\">// \u6211\u4eec\u5fc5\u987b\u5378\u8f7d\u5b83\u5e76\u5b89\u88c5\u4e00\u4e2a\u65b0\u5b9e\u4f8b\u53bb\u66ff\u4ee3</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>canUpdate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> prevNode <span class=\"token operator\">=</span> prevChild<span class=\"token punctuation\">.</span><span class=\"token function\">getHostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        prevChild<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">var</span> nextChild <span class=\"token operator\">=</span> <span class=\"token function\">instantiateComponent</span><span class=\"token punctuation\">(</span>nextChildren<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> nextNode <span class=\"token operator\">=</span> nextChild<span class=\"token punctuation\">.</span><span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// \u8bb0\u5f55\u6211\u4eec\u9700\u8981\u66ff\u6362\u7684\u8282\u70b9</span>\n        operationQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'REPLACE'</span><span class=\"token punctuation\">,</span> prevNode<span class=\"token punctuation\">,</span> nextNode<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        nextRenderedChildren<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>nextChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token comment\">// \u5982\u679c\u6211\u4eec\u80fd\u66f4\u65b0\u73b0\u6709\u7684\u5185\u90e8\u5b9e\u4f8b\uff0c</span>\n      <span class=\"token comment\">// \u53ea\u662f\u8ba9\u5b83\u63a5\u6536\u4e0b\u4e00\u4e2a\u5143\u7d20\u5e76\u5904\u7406\u81ea\u5df1\u7684\u66f4\u65b0\u3002</span>\n      prevChild<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span>nextChildren<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      nextRenderedChildren<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>prevChild<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// \u6700\u540e\uff0c\u5378\u8f7d\u4e0d\u5b58\u5728\u7684\u4efb\u4f55\u5b50\u7ec4\u4ef6:</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> j <span class=\"token operator\">=</span> nextChildren<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> prevChildren<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> prevChild <span class=\"token operator\">=</span> prevRenderedChildren<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> node <span class=\"token operator\">=</span> prevChild<span class=\"token punctuation\">.</span><span class=\"token function\">getHostNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      prevChild<span class=\"token punctuation\">.</span><span class=\"token function\">unmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// \u8bb0\u5f55\u6211\u4eec\u9700\u8981\u5220\u9664\u7684\u8282\u70b9</span>\n      operationQueue<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'REMOVE'</span><span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// \u5c06\u6e32\u67d3\u7684\u5b50\u7ea7\u5217\u8868\u6307\u5411\u66f4\u65b0\u7684\u7248\u672c\u3002</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderedChildren <span class=\"token operator\">=</span> nextRenderedChildren<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span></code></pre></div>\n<p>\u6700\u540e\u4e00\u6b65\uff0c\u6211\u4eec\u6267\u884c DOM \u64cd\u4f5c\u3002\u540c\u6837\uff0c\u771f\u6b63\u7684 reconciler \u4ee3\u7801\u66f4\u4e3a\u590d\u6742\uff0c\u56e0\u4e3a\u5b83\u8fd8\u5904\u7406\u79fb\u52a8\u64cd\u4f5c:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">// \u5904\u7406\u64cd\u4f5c\u961f\u5217\u3002</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>operationQueue<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> operation <span class=\"token operator\">=</span> operationQueue<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>operation<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'ADD'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>operation<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'REPLACE'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">replaceChild</span><span class=\"token punctuation\">(</span>operation<span class=\"token punctuation\">.</span>nextNode<span class=\"token punctuation\">,</span> operation<span class=\"token punctuation\">.</span>prevNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'REMOVE'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>operation<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u5c31\u662f\u66f4\u65b0\u5bbf\u4e3b\u7ec4\u4ef6\u3002</p>\n<h3 id=\"top-level-updates\"><a class=\"anchor\" href=\"/react/implementation-notes#top-level-updates\"></a>\u9876\u5c42\u66f4\u65b0 </h3>\n<p>\u73b0\u5728\uff0c<code class=\"language-javascript\">CompositeComponent</code> \u548c <code class=\"language-javascript\">DOMComponent</code> \u90fd\u5b9e\u73b0\u4e86 <code class=\"language-javascript\">receive(nextElement)</code> \u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u6539\u9876\u7ea7\u7684 <code class=\"language-javascript\">mountTree()</code> \u51fd\u6570\uff0c\u4ee5\u4fbf\u5f53\u5143\u7d20\u7684 <code class=\"language-javascript\">type</code> \u4e0e\u4e0a\u6b21\u76f8\u540c\u65f6\u4f7f\u7528\u5b83:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> containerNode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u68c0\u67e5\u73b0\u6709\u7684\u6811</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>containerNode<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> prevNode <span class=\"token operator\">=</span> containerNode<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> prevRootComponent <span class=\"token operator\">=</span> prevNode<span class=\"token punctuation\">.</span>_internalInstance<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> prevElement <span class=\"token operator\">=</span> prevRootComponent<span class=\"token punctuation\">.</span>currentElement<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// \u5982\u679c\u53ef\u4ee5\uff0c\u91cd\u7528\u73b0\u6709\u7684\u6839\u7ec4\u4ef6</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevElement<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> element<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      prevRootComponent<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// \u5426\u5219\uff0c\u5378\u8f7d\u73b0\u6709\u6811</span>\n    <span class=\"token function\">unmountTree</span><span class=\"token punctuation\">(</span>containerNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ...</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u73b0\u5728\u8c03\u7528 <code class=\"language-javascript\">mountTree()</code> \u4e24\u6b21\u76f8\u540c\u7684 <code class=\"language-javascript\">type</code> \u662f\u6ca1\u6709\u7834\u574f\u6027\u7684</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> rootEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> rootEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// \u5e94\u8be5\u91cd\u7528\u5df2\u7ecf\u5b58\u5728\u7684 DOM\uff1a</span>\n<span class=\"token function\">mountTree</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token punctuation\">,</span> rootEl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>\u8fd9\u4e9b\u662f React \u5185\u90e8\u5de5\u4f5c\u539f\u7406\u7684\u57fa\u7840\u77e5\u8bc6\u3002</p>\n<h3 id=\"what-we-left-out\"><a class=\"anchor\" href=\"/react/implementation-notes#what-we-left-out\"></a>\u6211\u4eec\u9057\u6f0f\u4e86\u4ec0\u4e48 </h3>\n<p>\u4e0e\u771f\u5b9e\u4ee3\u7801\u5e93\u76f8\u6bd4\uff0c\u672c\u6587\u6863\u5f97\u5230\u4e86\u7b80\u5316\u3002\u6211\u4eec\u6ca1\u6709\u89e3\u51b3\u51e0\u4e2a\u91cd\u8981\u65b9\u9762\uff1a</p>\n<ul>\n<li>\u7ec4\u4ef6\u53ef\u4ee5\u5448\u73b0 <code class=\"language-javascript\">null</code>\uff0creconciler \u53ef\u4ee5\u5904\u7406\u5728\u6570\u7ec4\u4e2d\u201c\u7a7a\u63d2\u69fd\u201d\u548c\u6e32\u67d3\u8f93\u51fa\u3002</li>\n<li>reconciler \u8fd8\u4ece\u5143\u7d20\u4e2d\u8bfb\u53d6 <code class=\"language-javascript\">key</code>\uff0c\u5e76\u4f7f\u7528\u5b83\u6765\u786e\u5b9a\u54ea\u4e2a\u5185\u90e8\u5b9e\u4f8b\u5bf9\u5e94\u4e8e\u6570\u7ec4\u4e2d\u7684\u54ea\u4e2a\u5143\u7d20\u3002\u5b9e\u9645 React \u5b9e\u73b0\u4e2d\u7684\u5927\u90e8\u5206\u590d\u6742\u6027\u4e0e\u6b64\u76f8\u5173\u3002</li>\n<li>\u9664\u4e86\u7ec4\u5408\u548c\u5bbf\u4e3b\u5185\u90e8\u5b9e\u4f8b\u7c7b\u5916\uff0c\u8fd8\u6709\u7528\u4e8e\u201c\u6587\u672c\u201d\u548c\u201c\u7a7a\u201d\u7ec4\u4ef6\u7684\u7c7b\u3002\u5b83\u4eec\u8868\u793a\u6587\u672c\u8282\u70b9\u548c\u901a\u8fc7\u6e32\u67d3 <code class=\"language-javascript\">null</code> \u83b7\u5f97 \u201c\u7a7a\u63d2\u69fd\u201d\u3002</li>\n<li>renderer \u4f7f\u7528<a href=\"/react/codebase-overview#dynamic-injection\">\u6ce8\u5165</a>\u7684\u65b9\u5f0f\u5c06\u5bbf\u4e3b\u5185\u90e8\u7c7b\u4f20\u9012\u7ed9 reconciler. \u4f8b\u5982\uff0cReact DOM \u544a\u8bc9 reconciler \u4f7f\u7528 <code class=\"language-javascript\">ReactDOMComponent</code> \u4f5c\u4e3a\u5bbf\u4e3b\u5185\u90e8\u5b9e\u4f8b\u5b9e\u73b0\u3002</li>\n<li>\u66f4\u65b0\u5b50\u5217\u8868\u7684\u903b\u8f91\u88ab\u63d0\u53d6\u5230\u4e00\u4e2a\u540d\u4e3a <code class=\"language-javascript\">ReactMultiChild</code> \u7684 mixin \u4e2d\uff0c\u5b83\u7531 React DOM \u548c React Native \u4e2d\u7684\u5bbf\u4e3b\u5185\u90e8\u5b9e\u4f8b\u7c7b\u5b9e\u73b0\u4f7f\u7528\u3002</li>\n<li>reconciler \u8fd8\u5728\u7ec4\u5408\u7ec4\u4ef6\u4e2d\u5b9e\u73b0\u5bf9 <code class=\"language-javascript\">setState()</code> \u7684\u652f\u6301\u3002\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\u5185\u7684\u591a\u4e2a\u66f4\u65b0\u5c06\u88ab\u6279\u5904\u7406\u4e3a\u5355\u4e00\u66f4\u65b0\u3002</li>\n<li>reconciler \u8fd8\u8d1f\u8d23\u5c06 refs \u9644\u52a0\u548c\u5206\u79bb\u5230\u7ec4\u5408\u7ec4\u4ef6\u548c\u5bbf\u4e3b\u8282\u70b9\u3002</li>\n<li>\u5728 DOM \u51c6\u5907\u597d\u4e4b\u540e\u8c03\u7528\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff0c\u4f8b\u5982 <code class=\"language-javascript\">componentDidMount()</code> \u548c <code class=\"language-javascript\">componentDidUpdate()</code>\uff0c\u88ab\u6536\u96c6\u5230\u201c\u56de\u8c03\u961f\u5217\u201d\u4e2d\u5e76\u5728\u4e00\u4e2a\u6279\u5904\u7406\u4e2d\u6267\u884c\u3002</li>\n<li>React \u5c06\u6709\u5173\u5f53\u524d\u66f4\u65b0\u7684\u4fe1\u606f\u653e\u5165\u540d\u4e3a \u201ctransaction\u201d \u7684\u5185\u90e8\u5bf9\u8c61\u4e2d\u3002\u4e8b\u52a1\u53ef\u7528\u4e8e\u8ddf\u8e2a\u6302\u8d77\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5\u7684\u961f\u5217\u3001\u8b66\u544a\u7684\u5f53\u524d DOM \u5d4c\u5957\u4ee5\u53ca\u7279\u5b9a\u66f4\u65b0\u7684\u201c\u5168\u5c40\u201d\u4efb\u4f55\u5176\u4ed6\u5185\u5bb9\u3002\u4e8b\u52a1\u8fd8\u786e\u4fdd\u5728\u66f4\u65b0\u540e\u201c\u6e05\u7406\u6240\u6709\u5185\u5bb9\u201d\u3002\u4f8b\u5982\uff0cReact DOM \u63d0\u4f9b\u7684\u4e8b\u52a1\u7c7b\u5728\u4efb\u4f55\u66f4\u65b0\u540e\u8fd8\u539f input selection\u3002</li>\n</ul>\n<h3 id=\"jumping-into-the-code\"><a class=\"anchor\" href=\"/react/implementation-notes#jumping-into-the-code\"></a>\u8df3\u8f6c\u5230\u4ee3\u7801 </h3>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/dom/client/ReactMount.js\"><code class=\"language-javascript\">ReactMount</code></a> \u5c31\u50cf\u672c\u6559\u7a0b\u4e2d <code class=\"language-javascript\">mountTree()</code> \u548c <code class=\"language-javascript\">unmountTree()</code> \u8fd9\u6837\u7684\u4ee3\u7801\u3002\u5b83\u8d1f\u8d23\u6302\u8f7d\u548c\u5378\u8f7d\u9876\u5c42\u7ec4\u4ef6\u3002<a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/native/ReactNativeMount.js\"><code class=\"language-javascript\">ReactNativeMount</code></a> \u662f React Native \u7684\u6a21\u62df\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/dom/shared/ReactDOMComponent.js\"><code class=\"language-javascript\">ReactDOMComponent</code></a> \u76f8\u5f53\u4e8e\u672c\u6559\u7a0b\u4e2d\u7684 <code class=\"language-javascript\">DOMComponent</code>\u3002\u5b83\u5b9e\u73b0\u4e86React DOM renderer \u7684\u5bbf\u4e3b\u7ec4\u4ef6\u7c7b\u3002<a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/native/ReactNativeBaseComponent.js\"><code class=\"language-javascript\">ReactNativeBaseComponent</code></a> \u662f React Native \u7684\u6a21\u62df\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/ReactCompositeComponent.js\"><code class=\"language-javascript\">ReactCompositeComponent</code></a> \u76f8\u5f53\u4e8e\u672c\u6559\u7a0b\u4e2d\u7684 <code class=\"language-javascript\">CompositeComponent</code>\u3002\u5b83\u5904\u7406\u8c03\u7528\u7528\u6237\u5b9a\u4e49\u7684\u7ec4\u4ef6\u5e76\u7ef4\u62a4\u5176\u72b6\u6001\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/instantiateReactComponent.js\"><code class=\"language-javascript\">instantiateReactComponent</code></a> \u5305\u542b\u9009\u62e9\u8981\u4e3a\u5143\u7d20\u6784\u9020\u7684\u6b63\u786e\u5185\u90e8\u5b9e\u4f8b\u7c7b\u7684\u5f00\u5173\u3002\u5b83\u76f8\u5f53\u4e8e\u672c\u6559\u7a0b\u4e2d\u7684 <code class=\"language-javascript\">instantiateComponent()</code>.</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/Reactreconciler.js\"><code class=\"language-javascript\">ReactReconciler</code></a> \u662f\u4e00\u4e2a\u5305\u542b <code class=\"language-javascript\">mountComponent()</code>\u3001<code class=\"language-javascript\">receiveComponent()</code> \u548c <code class=\"language-javascript\">unmountComponent()</code> \u65b9\u6cd5\u7684\u5305\u88c5\u5668\u3002\u5b83\u8c03\u7528\u5185\u90e8\u5b9e\u4f8b\u4e0a\u7684\u5e95\u5c42\u5b9e\u73b0\uff0c\u4f46\u4e5f\u5305\u62ec\u4e00\u4e9b\u7531\u6240\u6709\u5185\u90e8\u5b9e\u4f8b\u5b9e\u73b0\u5171\u4eab\u7684\u4ee3\u7801\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/ReactChildreconciler.js\"><code class=\"language-javascript\">ReactChildReconciler</code></a> \u5b9e\u73b0\u6839\u636e\u5b50\u5143\u7d20\u7684 <code class=\"language-javascript\">key</code> \u6302\u8f7d\u3001\u66f4\u65b0\u548c\u5378\u8f7d\u5b50\u7ea7\u7684\u903b\u8f91\u3002</li>\n<li><a class=\"external-link\" href=\"https://github.com/facebook/react/blob/83381c1673d14cd16cf747e34c945291e5518a86/src/renderers/shared/stack/reconciler/ReactMultiChild.js\"><code class=\"language-javascript\">ReactMultiChild</code></a> \u5b9e\u73b0\u5bf9\u5b50\u7ec4\u4ef6\u63d2\u5165\u3001\u5220\u9664\u548c\u79fb\u52a8\u64cd\u4f5c\u961f\u5217\u7684\u5904\u7406\uff0c\u72ec\u7acb\u4e8e\u6e32 renderer\u3002</li>\n<li>\u7531\u4e8e\u9057\u7559\u539f\u56e0\uff0c<code class=\"language-javascript\">mount()</code>\u3001 <code class=\"language-javascript\">receive()</code> \u548c <code class=\"language-javascript\">unmount()</code> \u5728 React \u4ee3\u7801\u5e93\u4e2d\u5b9e\u9645\u4e0a\u540d\u5b57\u4e3a <code class=\"language-javascript\">mountComponent()</code>\u3001<code class=\"language-javascript\">receiveComponent()</code> \u548c <code class=\"language-javascript\">unmountComponent()</code>\uff0c\u4f46\u662f\u5b83\u4eec\u63a5\u6536\u5143\u7d20\u3002</li>\n<li>\u5185\u90e8\u5b9e\u4f8b\u7684\u5c5e\u6027\u4ee5\u4e0b\u5212\u7ebf\u5f00\u5934\uff0c\u4f8b\u5982\uff0c<code class=\"language-javascript\">_currentElement</code>\u3002\u5b83\u4eec\u88ab\u8ba4\u4e3a\u662f\u6574\u4e2a\u4ee3\u7801\u5e93\u4e2d\u7684\u53ea\u8bfb\u516c\u5171\u5b57\u6bb5\u3002</li>\n</ul>\n<h3 id=\"future-directions\"><a class=\"anchor\" href=\"/react/implementation-notes#future-directions\"></a>\u672a\u6765\u65b9\u5411 </h3>\n<p>stack reconciler \u5177\u6709\u56fa\u6709\u7684\u5c40\u9650\u6027\uff0c\u4f8b\u5982\u540c\u6b65\u5e76\u4e14\u65e0\u6cd5\u4e2d\u65ad\u5de5\u4f5c\u6216\u5c06\u5176\u62c6\u5206\u4e3a\u5757\u3002<a href=\"/react/codebase-overview#fiber-reconciler\">\u65b0\u7684 Fiber reconciler</a>\u6b63\u5728\u8fdb\u884c\u4e2d\uff0c\u5177\u6709<a class=\"external-link\" href=\"https://github.com/acdlite/react-fiber-architecture\">\u5b8c\u5168\u4e0d\u540c\u7684\u67b6\u6784</a>\u3002\u5728\u672a\u6765\uff0c\u6211\u4eec\u6253\u7b97\u7528\u5b83\u66ff\u6362 stack reconciler\uff0c\u4f46\u76ee\u524d\u5b83\u8fd8\u8fdc\u8fdc\u6ca1\u6709\u8fbe\u5230\u529f\u80fd\u5bf9\u7b49\u3002</p>\n<h3 id=\"next-steps\"><a class=\"anchor\" href=\"/react/implementation-notes#next-steps\"></a>\u4e0b\u4e00\u6b65 </h3>\n<p>\u9605\u8bfb<a href=\"/react/design-principles\">\u4e0b\u4e00\u8282</a> \u4e86\u89e3\u6211\u4eec\u7528\u4e8e\u5f00\u53d1 React \u7684\u6307\u5bfc\u539f\u5219\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/implementation-notes.md\">Edit this page</a></p></div></article>", "path": "/react/implementation-notes", "nav": ["/react/codebase-overview", "/react/design-principles"]}, {"key": "\u8bbe\u8ba1\u7406\u5ff5", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><p>\u7f16\u5199\u8be5\u6587\u6863\u7684\u76ee\u7684\u662f\uff0c\u4f7f\u5f00\u53d1\u8005\u66f4\u6613\u4e8e\u4e86\u89e3\u6211\u4eec\u5982\u4f55\u51b3\u7b56 React\uff08\u5e94\u8be5\u505a\u54ea\u4e9b\uff0c\u4e0d\u5e94\u8be5\u505a\u54ea\u4e9b\uff09\uff0c\u4ee5\u53ca\u6211\u4eec\u7684\u5f00\u53d1\u7406\u5ff5\u3002\u6211\u4eec\u975e\u5e38\u6b22\u8fce\u6765\u81ea\u793e\u533a\u7684\u8d21\u732e\uff0c\u4f46\u5982\u82e5\u8fdd\u80cc\u8fd9\u4e9b\u7406\u5ff5\uff0c\u5b9e\u975e\u6211\u4eec\u6240\u613f\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u6587\u7ae0\u63cf\u8ff0\u4e86 React \u81ea\u8eab\u7684\u8bbe\u8ba1\u539f\u5219\uff0c\u800c\u975e React \u7ec4\u4ef6\u6216\u5e94\u7528\uff0c\u9605\u8bfb\u8005\u9700\u8981\u5bf9 React \u6709\u6df1\u5165\u7684\u7406\u89e3\u3002</p>\n<p>\u5982\u9700 React \u7684\u5165\u95e8\u6587\u6863\uff0c\u67e5\u770b <a href=\"/react/thinking-in-react\">React \u54f2\u5b66</a>\u3002</p>\n</div>\n<h3 id=\"composition\"><a class=\"anchor\" href=\"/react/design-principles#composition\"></a>\u7ec4\u5408 </h3>\n<p>\u7ec4\u4ef6\u4e4b\u95f4\u7684\u7ec4\u5408\u662f React \u7684\u91cd\u8981\u7279\u5f81\u3002\u4e0d\u540c\u5f00\u53d1\u8005\u5199\u7684\u7ec4\u4ef6\u5e94\u8be5\u53ef\u4ee5\u4e00\u8d77\u6b63\u5e38\u6267\u884c\u3002\u7ed9\u4e00\u4e2a\u7ec4\u4ef6\u6dfb\u52a0\u529f\u80fd\uff0c\u800c\u4e0d\u4f1a\u5bf9\u6574\u4e2a\u4ee3\u7801\u5e93\u9020\u6210\u6d9f\u6f2a\u4f3c\u7684\u53d8\u5316\uff0c\u8fd9\u5bf9\u6211\u4eec\u5f88\u91cd\u8981\u3002</p>\n<p>\u6bd4\u5982\uff0c\u5e94\u8be5\u53ef\u4ee5\u5728\u4e0d\u5f71\u54cd\u4efb\u4f55\u4f7f\u7528\u5b83\u7684\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u4e00\u4e9b\u5185\u90e8 state \u5f15\u5165\u8be5\u7ec4\u4ef6\u3002\u7c7b\u4f3c\u7684\uff0c\u5728\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5728\u4efb\u4f55\u7ec4\u4ef6\u91cc\u6dfb\u52a0\u4e00\u4e9b\u521d\u59cb\u5316\u548c\u9500\u6bc1\u7684\u4ee3\u7801\u3002</p>\n<p>\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528 state \u6216\u8005\u751f\u547d\u5468\u671f\u51fd\u6570\u6ca1\u4ec0\u4e48\u201c\u4e0d\u597d\u201d\u3002\u8ddf\u6240\u6709\u5f3a\u5927\u7684\u7279\u6027\u4e00\u6837\uff0c\u5e94\u8be5\u9002\u5ea6\u4f7f\u7528\u5b83\u4eec\uff0c\u6211\u4eec\u5e76\u4e0d\u6253\u7b97\u79fb\u9664\u4ed6\u4eec\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u8ba4\u4e3a\u4ed6\u4eec\u662f React \u4e4b\u6240\u4ee5\u597d\u7528\u7684\u4e00\u90e8\u5206\u3002\u6211\u4eec\u672a\u6765\u4e5f\u8bb8\u4f1a\u542f\u7528<a class=\"external-link\" href=\"https://github.com/reactjs/react-future/tree/master/07%20-%20Returning%20State\">\u66f4\u591a\u51fd\u6570\u6a21\u5f0f</a>\uff0c\u4f46\u5185\u90e8 state \u548c\u751f\u547d\u5468\u671f\u51fd\u6570\u90fd\u4f1a\u5728\u91cc\u9762\u3002</p>\n<p>\u4eba\u4eec\u5e38\u5e38\u8ba4\u4e3a\u7ec4\u4ef6\u201c\u53ea\u662f\u51fd\u6570\u201d\uff0c\u4f46\u5728\u6211\u4eec\u770b\u6765\uff0c\u7ec4\u4ef6\u8981\u597d\u7528\u7684\u8bdd\uff0c\u9700\u8981\u7684\u4e0d\u6b62\u8fd9\u4e9b\u3002\u5728 React \u4e2d\uff0c\u7ec4\u4ef6\u63cf\u8ff0\u4e86\u4efb\u4f55\u53ef\u7ec4\u5408\u7684\u884c\u4e3a\uff0c\u5305\u542b\u6e32\u67d3\u3001\u751f\u547d\u5468\u671f\u548c state\u3002\u4e00\u4e9b\u7c7b\u4f3c <a class=\"external-link\" href=\"https://facebook.github.io/relay/\">Relay</a> \u7684\u5916\u90e8\u5e93\u7ed9\u7ec4\u4ef6\u5e26\u6765\u4e86\u5176\u4ed6\u589e\u5f3a\u529f\u80fd\uff0c\u6bd4\u5982\u63cf\u8ff0\u6570\u636e\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u3002\u6709\u53ef\u80fd\u8fd9\u4e9b\u505a\u6cd5\u4f1a\u4ee5\u67d0\u79cd\u5f62\u5f0f\u56de\u5230 React \u4e2d\u3002</p>\n<h3 id=\"common-abstraction\"><a class=\"anchor\" href=\"/react/design-principles#common-abstraction\"></a>\u5171\u7528\u62bd\u8c61 </h3>\n<p>\u4e00\u822c\u800c\u8a00\u6211\u4eec<a class=\"external-link\" href=\"https://www.youtube.com/watch?v=4anAwXYqLG8\">\u62d2\u7edd\u6dfb\u52a0</a>\u4e00\u4e9b\u5f00\u53d1\u8005\u53ef\u4ee5\u5b9e\u73b0\u7684\u7279\u6027\u3002\u6211\u4eec\u4e0d\u60f3\u56e0\u4e3a\u65e0\u7528\u7684\u5e93\u4ee3\u7801\u4f7f\u5f97\u5927\u5bb6\u7684\u5e94\u7528\u53d8\u7684\u7d2f\u8d58\uff0c\u7136\u800c\u4e5f\u6709\u7279\u4f8b\u3002</p>\n<p>\u6bd4\u5982\uff0c\u5982\u679c React \u4e0d\u652f\u6301\u5185\u90e8 state \u6216\u8005\u751f\u547d\u5468\u671f\u51fd\u6570\uff0c\u5927\u5bb6\u4f1a\u4e3a\u6b64\u521b\u5efa\u81ea\u5df1\u7684\u62bd\u8c61\u3002\u5f53\u6709\u591a\u79cd\u62bd\u8c61\u7ade\u4e89\u7684\u65f6\u5019\uff0cReact \u4e0d\u80fd\u5f3a\u5236\u4f7f\u7528\u6216\u5229\u7528\u8fd9\u4e9b\u62bd\u8c61\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u3002React \u5fc5\u987b\u9009\u62e9\u6700\u57fa\u672c\u7684\u5171\u540c\u70b9\u3002</p>\n<p>\u8fd9\u5c31\u662f\u6211\u4eec\u589e\u52a0 React \u7279\u6027\u7684\u539f\u56e0\u3002\u5982\u679c\u6211\u4eec\u53d1\u73b0\u5f88\u591a\u7ec4\u4ef6\u4ee5\u4e0d\u517c\u5bb9\u6216\u8005\u4e0d\u9ad8\u6548\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e86\u67d0\u4e9b\u7279\u6027\uff0c\u6211\u4eec\u4f1a\u503e\u5411\u5728 React \u4e2d\u5b9e\u73b0\u5b83\u3002\u6211\u4eec\u8f7b\u6613\u4e0d\u8fd9\u6837\u505a\uff0c\u53ea\u6709\u6211\u4eec\u975e\u5e38\u786e\u5b9a\u63d0\u9ad8\u62bd\u8c61\u5c42\u7ea7\u6709\u52a9\u4e8e\u6574\u4e2a\u751f\u6001\u7cfb\u7edf\u65f6\u6211\u4eec\u624d\u4f1a\u8fd9\u6837\u505a\u3002State\u3001\u751f\u547d\u5468\u671f\u51fd\u6570\u3001\u8de8\u6d4f\u89c8\u5668\u4e8b\u4ef6\u7684\u6b63\u89c4\u5316\u90fd\u662f\u5f88\u597d\u7684\u8303\u4f8b\u3002</p>\n<p>\u6211\u4eec\u603b\u662f\u548c\u793e\u533a\u4e00\u8d77\u5546\u8bae\u8fd9\u6837\u7684\u4f18\u5316\u63d0\u8bae\u3002\u4f60\u53ef\u4ee5\u5728 React \u95ee\u9898\u8ddf\u8e2a\u7684 <a class=\"external-link\" href=\"https://github.com/facebook/react/issues?q=is:open+is:issue+label:%22Type:+Big+Picture%22\">\u201cbig picture\u201d</a> \u6807\u7b7e\u4e0a\u627e\u5230\u4e00\u4e9b\u8fd9\u6837\u7684\u8ba8\u8bba\u3002</p>\n<h3 id=\"escape-hatches\"><a class=\"anchor\" href=\"/react/design-principles#escape-hatches\"></a>\u5e94\u6025\u65b9\u6848 </h3>\n<p>React \u662f\u52a1\u5b9e\u7684\uff0cFacebook \u7684\u4ea7\u54c1\u9700\u6c42\u9a71\u4f7f\u5b83\u8fd9\u6837\u3002\u5c3d\u7ba1 React \u53d7\u4e00\u4e9b\u76ee\u524d\u8fd8\u975e\u4e3b\u6d41\u7684\u7f16\u7a0b\u601d\u60f3\u6bd4\u5982\u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u5f71\u54cd\uff0c\u8fd9\u4e2a\u9879\u76ee\u7684\u4e00\u4e2a\u660e\u786e\u76ee\u6807\u662f\u5e7f\u6cdb\u5730\u63a5\u89e6\u5177\u6709\u4e0d\u540c\u6280\u80fd\u548c\u7ecf\u9a8c\u7684\u5f00\u53d1\u8005\u3002</p>\n<p>\u5982\u679c\u8981\u5e9f\u5f03\u67d0\u4e2a\u6211\u4eec\u4e0d\u559c\u6b22\u7684\u6a21\u5f0f\uff0c\u6211\u4eec\u6709\u8d23\u4efb\u5728\u5e9f\u5f03\u4e4b\u524d\uff0c\u8003\u8651\u6240\u6709\u5df2\u77e5\u7684\u7528\u4f8b\u5e76\u4e14\u6559\u80b2\u793e\u533a\u8fd9\u4e9b\u6a21\u5f0f\u7684<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2016/07/13/mixins-considered-harmful.html\">\u66ff\u4ee3\u505a\u6cd5</a>\u3002\u5982\u679c\u67d0\u4e9b\u6709\u52a9\u4e8e\u5f00\u53d1\u5e94\u7528\u7684\u6a21\u5f0f\u5f88\u96be\u4ee5\u58f0\u660e\u5f0f\u7684\u65b9\u5f0f\u8868\u8fbe\uff0c\u6211\u4eec\u4f1a\u63d0\u4f9b\u4e00\u4e2a<a href=\"/react/more-about-refs\">\u547d\u4ee4\u5f0f\u7684 API</a>\u3002\u5982\u679c\u6211\u4eec\u53d1\u73b0\u5f88\u591a\u5e94\u7528\u4e2d\u5fc5\u8981\u7684\u6a21\u5f0f\u6211\u4eec\u627e\u4e0d\u5230\u4e00\u4e2a\u5b8c\u7f8e\u7684API\uff0c\u6211\u4eec\u4f1a<a href=\"/react/legacy-context\">\u63d0\u4f9b\u4e00\u4e2a\u4e34\u65f6\u6b20\u4f73\u7684 API</a>\uff0c\u53ea\u8981\u4ee5\u540e\u53ef\u4ee5\u79fb\u9664\u5b83\u5e76\u4e14\u65b9\u4fbf\u540e\u7eed\u7684\u4f18\u5316\u3002</p>\n<h3 id=\"stability\"><a class=\"anchor\" href=\"/react/design-principles#stability\"></a>\u7a33\u5b9a\u6027 </h3>\n<p>\u6211\u4eec\u91cd\u89c6 API \u7684\u7a33\u5b9a\u6027\u3002\u5728 Facebook\uff0c\u6211\u4eec\u6709\u8d85\u8fc7 5 \u4e07\u591a\u4e2a\u7ec4\u4ef6\u5728\u4f7f\u7528 React\u3002\u5f88\u591a\u5176\u4ed6\u516c\u53f8\uff0c\u5305\u62ec <a class=\"external-link\" href=\"https://twitter.com/\">Twitter</a> \u548c <a class=\"external-link\" href=\"https://www.airbnb.com/\">Airbnb</a> \u4e5f\u662f React \u7684\u91cd\u5ea6\u7528\u6237\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u4e00\u822c\u4e0d\u613f\u610f\u53d8\u66f4\u516c\u5171 API \u6216\u884c\u4e3a\u7684\u539f\u56e0\u3002</p>\n<p>\u7136\u800c\u6211\u4eec\u8ba4\u4e3a\u201c\u6ca1\u6709\u53d8\u66f4\u201d\u7684\u8fd9\u79cd\u7a33\u5b9a\u6027\u88ab\u9ad8\u4f30\u4e86\uff0c\u5b83\u5f88\u5feb\u4f1a\u6f14\u53d8\u6210\u505c\u6ede\u4e0d\u524d\u3002\u6211\u4eec\u504f\u5411\u8fd9\u6837\u7406\u89e3\u7a33\u5b9a\u6027\uff1a\u201c\u5728\u751f\u4ea7\u73af\u5883\u5927\u89c4\u6a21\u4f7f\u7528\uff0c\u5f53\u9700\u8981\u53d8\u66f4\u65f6\u6709\u4e00\u4e2a\u660e\u786e\u7684\uff08\u81ea\u52a8\u5316\u66f4\u597d\uff09\u8fc1\u79fb\u8def\u5f84\u3002\u201d\u3002</p>\n<p>\u5f53\u6211\u4eec\u5e9f\u5f03\u4e00\u4e2a\u6a21\u5f0f\u65f6\uff0c\u6211\u4eec\u4f1a\u7814\u7a76\u5b83\u5728 Facebook \u5185\u90e8\u7684\u4f7f\u7528\u60c5\u51b5\u5e76\u6dfb\u52a0\u5e9f\u5f03\u8b66\u544a\u3002\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u8bc4\u4f30\u53d8\u66f4\u7684\u5f71\u54cd\u8303\u56f4\u3002\u6709\u65f6\u89c9\u5f97\u65f6\u673a\u592a\u65e9\u4e86\uff0c\u6211\u4eec\u5c31\u4e0d\u4f5c\u53d8\u66f4\u3002\u6211\u4eec\u9700\u8981\u66f4\u7b56\u7565\u5316\u7684\u601d\u8003\u6765\u8ba9\u4ee3\u7801\u5e93\u51c6\u5907\u597d\u8fd9\u6837\u7684\u53d8\u66f4\u3002</p>\n<p>\u5982\u679c\u6211\u4eec\u81ea\u4fe1\u5730\u8ba4\u4e3a\u8fd9\u6b21\u6539\u52a8\u7834\u574f\u6027\u4e0d\u662f\u975e\u5e38\u5927\uff0c\u800c\u4e14\u8fc1\u79fb\u7b56\u7565\u5bf9\u6240\u6709\u7528\u6237\u573a\u666f\u90fd\u53ef\u884c\uff0c\u6211\u4eec\u4f1a\u5728\u5f00\u6e90\u793e\u533a\u53d1\u5e03\u5e9f\u5f03\u8b66\u544a\u3002\u6211\u4eec\u548c\u5f88\u591a Facebook \u4ee5\u5916\u7684 React \u7528\u6237\u8054\u7cfb\u7d27\u5bc6\uff0c\u800c\u4e14\u6211\u4eec\u4f1a\u76d1\u63a7\u6d41\u884c\u7684\u5f00\u6e90\u9879\u76ee\u5e76\u6307\u5bfc\u4ed6\u4eec\u89e3\u51b3\u8fd9\u4e9b\u5e9f\u5f03\u8b66\u544a\u3002</p>\n<p>\u53ea\u8003\u8651 Facebook \u91cc\u7684 React \u7684\u4ee3\u7801\u5e93\u5927\u5c0f\uff0c\u6210\u529f\u7684\u5185\u90e8\u8fc1\u79fb\u5f80\u5f80\u662f\u4e2a\u597d\u5146\u5934\uff1a\u5176\u4ed6\u516c\u53f8\u8fc1\u79fb\u4e5f\u4e0d\u4f1a\u6709\u56f0\u96be\u3002\u7136\u800c\u65f6\u4e0d\u65f6\u4f1a\u6709\u4eba\u63d0\u51fa\u6211\u4eec\u6ca1\u6709\u8003\u8651\u5230\u7684\u573a\u666f\uff0c\u6211\u4eec\u4f1a\u7ed9\u4ed6\u4eec\u4e00\u4e2a\u7d27\u6025\u51fa\u8def\uff0c\u6216\u8005\u53cd\u601d\u6211\u4eec\u7684\u505a\u6cd5\u3002</p>\n<p>\u6ca1\u6709\u5145\u5206\u7684\u7406\u7531\u6211\u4eec\u4e0d\u4f1a\u5e9f\u5f03\u4efb\u4f55\u7279\u6027\u3002\u6211\u4eec\u610f\u8bc6\u5230\u6709\u65f6\u5e9f\u5f03\u8b66\u544a\u4f1a\u8ba9\u5f00\u53d1\u8005\u6cae\u4e27\uff0c\u4f46\u6211\u4eec\u6dfb\u52a0\u5e9f\u5f03\u8b66\u544a\u662f\u56e0\u4e3a\u5b83\u4eec\u4e3a\u793e\u533a\u4e2d\u7684\u5f88\u591a\u4eba\u8ba4\u4e3a\u6709\u4ef7\u503c\u7684\u4f18\u5316\u548c\u65b0\u7279\u6027\u626b\u9664\u4e86\u969c\u788d\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6211\u4eec\u5728 React 15.2.0 \u4e2d\u6dfb\u52a0\u4e86\u4e00\u4e2a<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//warnings/unknown-prop.html\">\u672a\u77e5 DOM \u5c5e\u6027\u7684\u8b66\u544a</a>\uff0c\u5f88\u591a\u9879\u76ee\u56e0\u6b64\u53d7\u5230\u5f71\u54cd\u3002\u7136\u800c\u4fee\u590d\u8fd9\u4e9b\u8b66\u544a\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5728 React \u4e2d\u65b0\u589e\u652f\u6301<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/140\">\u81ea\u5b9a\u4e49\u5c5e\u6027</a>\u3002\u4ee5\u5f80\u7684\u6bcf\u4e00\u6b21\u5e9f\u5f03\u8b66\u544a\u90fd\u6709\u50cf\u8fd9\u6837\u7684\u8003\u91cf\u5728\u91cc\u9762\u3002</p>\n<p>\u6211\u4eec\u6dfb\u52a0\u5e9f\u5f03\u8b66\u544a\u65f6\u4f1a\u4fdd\u7559\u5230\u5f53\u524d\u5927\u7248\u672c\uff0c\u5728<a class=\"external-link\" href=\"https://zh-hans.reactjs.org//blog/2016/02/19/new-versioning-scheme.html\">\u4e0b\u4e00\u6b21\u5927\u7248\u672c\u4e2d\u6539\u53d8\u884c\u4e3a</a>\u3002\u5982\u679c\u8fd9\u5176\u4e2d\u6d89\u53ca\u5230\u5927\u91cf\u91cd\u590d\u6027\u7684\u4eba\u529b\u5de5\u4f5c\uff0c\u6211\u4eec\u4f1a\u53d1\u5e03\u4e00\u4e2a<a class=\"external-link\" href=\"https://www.youtube.com/watch?v=d0pOgY8__JM\">\u4ee3\u7801\u66f4\u6539</a>\u811a\u672c\u81ea\u52a8\u5316\u5927\u90e8\u5206\u7684\u6539\u52a8\u3002Codemods \u4f7f\u6211\u4eec\u80fd\u591f\u5728\u5e9e\u5927\u7684\u4ee3\u7801\u5e93\u4e2d\u7ee7\u7eed\u524d\u884c\uff0c\u6211\u4eec\u4e5f\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\u3002</p>\n<p>\u4f60\u53ef\u4ee5\u5728 <a class=\"external-link\" href=\"https://github.com/reactjs/react-codemod\">react-codemod</a> \u4ed3\u5e93\u4e2d\u627e\u5230\u6211\u4eec\u53d1\u5e03\u7684 codemods\u3002</p>\n<h3 id=\"interoperability\"><a class=\"anchor\" href=\"/react/design-principles#interoperability\"></a>\u4e92\u64cd\u4f5c\u6027 </h3>\n<p>\u6211\u4eec\u5f88\u770b\u91cd\u4e0e\u5df2\u6709\u7cfb\u7edf\u7684\u4e92\u64cd\u4f5c\u6027\u548c\u6e10\u8fdb\u5f0f\u7684\u91c7\u7528\u3002Facebook \u6709\u4e00\u4e2a\u5e9e\u5927\u7684\u975e React \u7684\u4ee3\u7801\u5e93\u3002Facebook \u7684\u7f51\u7ad9\u6df7\u5408\u4f7f\u7528\u4e86\u540d\u4e3a XHP \u7684\u670d\u52a1\u7aef\u7ec4\u4ef6\u7cfb\u7edf\u3001React \u4e4b\u524d\u7684\u5185\u90e8 UI \u5e93\u548c React\u3002\u4efb\u4f55\u4ea7\u54c1\u56e2\u961f\u80fd\u591f<a class=\"external-link\" href=\"https://www.youtube.com/watch?v=BF58ZJ1ZQxY\">\u5f00\u59cb\u5728\u5c0f\u529f\u80fd\u4e0a\u4f7f\u7528React</a>\u800c\u4e0d\u662f\u91cd\u5199\u4ed6\u4eec\u7684\u4ee3\u7801\uff0c\u8fd9\u5bf9\u6211\u4eec\u5f88\u91cd\u8981\u3002</p>\n<p>\u8fd9\u5c31\u662f React \u63d0\u4f9b\u5e94\u6025\u65b9\u6848\u7684\u539f\u56e0\uff1a\u8ba9\u4e0d\u540c\u7684\u6a21\u578b\u534f\u540c\u5de5\u4f5c\uff0c\u8ba9\u4e0d\u540c\u7684 UI \u5e93\u534f\u540c\u5de5\u4f5c\u3002\u4f60\u53ef\u4ee5\u628a\u4e00\u4e2a\u5df2\u6709\u7684\u547d\u4ee4\u5f0f UI \u5c01\u88c5\u6210\u58f0\u660e\u5f0f\u7684\u7ec4\u4ef6\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\u8fd9\u5bf9\u6e10\u8fdb\u91c7\u7528\u800c\u8a00\u81f3\u5173\u91cd\u8981\u3002</p>\n<h3 id=\"scheduling\"><a class=\"anchor\" href=\"/react/design-principles#scheduling\"></a>\u8c03\u5ea6 </h3>\n<p>\u5373\u4fbf\u4f60\u7684\u7ec4\u4ef6\u4ee5 function \u7684\u65b9\u5f0f\u58f0\u660e\uff0c\u5728 React \u4e2d\u4f60\u4e5f\u5e76\u4e0d\u4f1a\u76f4\u63a5\u8c03\u7528\u5b83\u4eec\u3002\u6bcf\u4e2a\u7ec4\u4ef6\u8fd4\u56de\u4e00\u4e2a\u8be5\u6e32\u67d3\u4ec0\u4e48\u7684\u63cf\u8ff0\uff0c\u8be5\u63cf\u8ff0\u4f1a\u5305\u542b\u5f00\u53d1\u8005\u5199\u7684\u7ec4\u4ef6\u5982 <code class=\"language-javascript\">&lt;LikeButton&gt;</code> \u548c \u5e73\u53f0\u7279\u5b9a\u7684\u7ec4\u4ef6\u5982 <code class=\"language-javascript\">&lt;div&gt;</code>\u3002\u7531 React \u51b3\u5b9a\u5728\u672a\u6765\u7684\u67d0\u4e2a\u65f6\u95f4\u70b9\u5c55\u5f00 <code class=\"language-javascript\">&lt;LikeButton&gt;</code>\uff0c\u5e76\u6839\u636e\u7ec4\u4ef6\u7684\u6e32\u67d3\u7ed3\u679c\u9012\u5f52\u5730\u628a\u8fd9\u4e9b\u53d8\u66f4\u5b9e\u9645\u5e94\u7528\u5230 UI \u6811\u4e0a\u3002</p>\n<p>\u867d\u7136\u53ea\u662f\u5fae\u5c0f\u7684\u533a\u522b\uff0c\u4f46\u8fd9\u6837\u505a\u610f\u4e49\u91cd\u5927\u3002\u56e0\u4e3a\u4f60\u4e0d\u9700\u8981\u8c03\u7528\u7ec4\u4ef6\u65b9\u6cd5\u800c\u662f\u8ba9 React \u8c03\u7528\u5b83\uff0c\u8fd9\u610f\u5473\u7740\u5982\u679c\u5fc5\u8981 React \u53ef\u4ee5\u5ef6\u8fdf\u8c03\u7528\u3002\u5728 React \u5f53\u524d\u7684\u5b9e\u73b0\u4e2d\uff0cReact \u5728\u5355\u4e2a tick \u5468\u671f\u4e2d\u9012\u5f52\u5730\u8d70\u5b8c\u8fd9\u68f5\u6811\uff0c\u7136\u540e\u8c03\u7528\u6574\u4e2a\u66f4\u65b0\u540e\u6811\u7684\u6e32\u67d3\u65b9\u6cd5\u3002\u4f46\u662f\u4ee5\u540e React \u53ef\u80fd\u4f1a<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/6170\">\u5ef6\u8fdf\u4e00\u4e9b\u66f4\u65b0\u64cd\u4f5c\u6765\u9632\u6b62\u6389\u5e27</a>\u3002</p>\n<p>\u8fd9\u5728 React \u7684\u8bbe\u8ba1\u4e2d\u5f88\u5e38\u89c1\u3002\u6709\u4e00\u4e9b\u6d41\u884c\u7684\u5e93\u5b9e\u73b0\u4e86 \u201cpush\u201d \u6a21\u5f0f\uff0c\u5373\u5f53\u65b0\u6570\u636e\u5230\u8fbe\u65f6\u518d\u8ba1\u7b97\u3002\u7136\u800c React \u575a\u6301 \u201cpull\u201d \u6a21\u5f0f\uff0c\u5373\u8ba1\u7b97\u53ef\u4ee5\u5ef6\u8fdf\u5230\u5fc5\u8981\u65f6\u518d\u6267\u884c\u3002</p>\n<p>React \u4e0d\u662f\u4e00\u4e2a\u5e38\u89c4\u7684\u6570\u636e\u5904\u7406\u5e93\uff0c\u5b83\u662f\u5f00\u53d1\u7528\u6237\u754c\u9762\u7684\u5e93\u3002\u6211\u4eec\u8ba4\u4e3a React \u5728\u4e00\u4e2a\u5e94\u7528\u4e2d\u7684\u4f4d\u7f6e\u5f88\u72ec\u7279\uff0c\u5b83\u77e5\u9053\u5f53\u524d\u54ea\u4e9b\u8ba1\u7b97\u5f53\u524d\u662f\u76f8\u5173\u7684\uff0c\u54ea\u4e9b\u4e0d\u662f\u3002</p>\n<p>\u5982\u679c\u4e0d\u5728\u5f53\u524d\u5c4f\u5e55\uff0c\u6211\u4eec\u53ef\u4ee5\u5ef6\u8fdf\u6267\u884c\u76f8\u5173\u903b\u8f91\u3002\u5982\u679c\u6570\u636e\u6570\u636e\u5230\u8fbe\u7684\u901f\u5ea6\u5feb\u8fc7\u5e27\u901f\uff0c\u6211\u4eec\u53ef\u4ee5\u5408\u5e76\u3001\u6279\u91cf\u66f4\u65b0\u3002\u6211\u4eec\u4f18\u5148\u6267\u884c\u7528\u6237\u4ea4\u4e92\uff08\u4f8b\u5982\u6309\u94ae\u70b9\u51fb\u5f62\u6210\u7684\u52a8\u753b\uff09\u7684\u5de5\u4f5c\uff0c\u5ef6\u540e\u6267\u884c\u76f8\u5bf9\u4e0d\u90a3\u4e48\u91cd\u8981\u7684\u540e\u53f0\u5de5\u4f5c\uff08\u4f8b\u5982\u6e32\u67d3\u521a\u4ece\u7f51\u7edc\u4e0a\u4e0b\u8f7d\u7684\u65b0\u5185\u5bb9\uff09\uff0c\u4ece\u800c\u907f\u514d\u6389\u5e27\u3002</p>\n<p>\u8981\u6e05\u695a\u6211\u4eec\u73b0\u5728\u8fd8\u6ca1\u6709\u5229\u7528\u8c03\u5ea6\u3002\u7136\u800c\uff0c\u6211\u4eec\u4e4b\u6240\u4ee5\u504f\u597d\u81ea\u5df1\u63a7\u5236\u8c03\u5ea6\u4ee5\u53ca\u5f02\u6b65<code class=\"language-javascript\">setState()</code>\uff0c\u662f\u56e0\u4e3a\u62e5\u6709\u4e86\u9009\u62e9\u7684\u81ea\u7531\u5ea6\u3002</p>\n<p>\u5982\u679c\u6211\u4eec\u5141\u8bb8\u7528\u6237\u4f7f\u7528\u5728\u4e00\u4e9b\u53d8\u4f53\u7684<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Functional_reactive_programming\">\u51fd\u6570\u53cd\u5e94\u5f0f\u7f16\u7a0b</a>\u8303\u5f0f\u4e2d\u5e38\u89c1\u7684\u201c\u63a8\u201d\u6a21\u5f0f\u76f4\u63a5\u62fc\u63a5\u89c6\u56fe\uff0c\u6211\u4eec\u5c06\u4f1a\u5f88\u96be\u83b7\u5f97\u8c03\u5ea6\u7684\u63a7\u5236\u6743\u3002</p>\n<p>React \u7684\u4e00\u4e2a\u5173\u952e\u76ee\u6807\u662f\u5728\u628a\u63a7\u5236\u6743\u8f6c\u4ea4\u7ed9 React \u4e4b\u524d\u6267\u884c\u7684\u7528\u6237\u4ee3\u7801\u91cf\u6700\u5c11\u3002\u8fd9\u786e\u4fdd React \u4fdd\u6301\u8c03\u5ea6\u7684\u80fd\u529b\uff0c\u5e76\u6839\u636e\u5b83\u6240\u77e5\u9053\u7684 UI \u7684\u60c5\u51b5\u628a\u5de5\u4f5c\u5207\u5206\u6210\u5c0f\u5757\u5904\u7406\u3002</p>\n<p>\u5728\u56e2\u961f\u5185\u90e8\u6709\u4e2a\u7b11\u8bdd\uff0cReact \u672c\u8be5\u53eb\u505a\u201c\u8c03\u5ea6\u201d\u56e0\u4e3a React \u4e0d\u60f3\u53d8\u5f97\u5b8c\u5168\u201c\u53cd\u5e94\u5f0f\uff08reactive\uff09\u201d\u3002</p>\n<h3 id=\"developer-experience\"><a class=\"anchor\" href=\"/react/design-principles#developer-experience\"></a>\u5f00\u53d1\u8005\u4f53\u9a8c </h3>\n<p>\u63d0\u4f9b\u597d\u7684\u5f00\u53d1\u8005\u4f53\u9a8c\u5bf9\u6211\u4eec\u5f88\u91cd\u8981\u3002</p>\n<p>\u4f8b\u5982\uff0c\u6211\u4eec\u7ef4\u62a4\u4e86 <a class=\"external-link\" href=\"https://github.com/facebook/react/tree/main/packages/react-devtools\">React DevTools</a>\uff0c\u5b83\u8ba9\u5927\u5bb6\u5728 Chrome \u548c Firefox \u6d4f\u89c8\u5668\u4e2d\u53ef\u4ee5\u68c0\u67e5 React \u7ec4\u4ef6\u6811\u3002\u6211\u4eec\u542c\u8bf4\u5b83\u5927\u5e45\u63d0\u9ad8\u4e86 Facebook \u7684\u5de5\u7a0b\u5e08\u548c\u793e\u533a\u7684\u751f\u4ea7\u6548\u7387\u3002</p>\n<p>\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u5bf9\u5f00\u53d1\u6709\u6240\u5e2e\u52a9\u7684\u5f00\u53d1\u8005\u8b66\u544a\u3002\u6bd4\u5982\u4f60\u4ee5\u6d4f\u89c8\u5668\u4e0d\u7406\u89e3\u7684\u65b9\u5f0f\u5d4c\u5957\u6807\u7b7e\u6216\u8005\u4f60\u5728\u7f16\u5199 API \u65f6\u5e38\u89c1\u7684\u9519\u522b\u5b57\uff0cReact \u4f1a\u8b66\u544a\u4f60\u3002\u5f00\u53d1\u8005\u8b66\u544a\u548c\u76f8\u5173\u7684\u68c0\u67e5\u5bfc\u81f4\u4e86 React \u7684\u5f00\u53d1\u7248\u672c\u6bd4\u751f\u4ea7\u7248\u672c\u901f\u5ea6\u6162\u3002</p>\n<p>Facebook \u5185\u90e8\u7684\u4f7f\u7528\u6a21\u5f0f\u5e2e\u52a9\u6211\u4eec\u4e86\u89e3\u5e38\u89c1\u7684\u9519\u8bef\u6709\u54ea\u4e9b\uff0c\u4ee5\u53ca\u5982\u4f55\u63d0\u524d\u9884\u9632\u3002\u5f53\u6211\u4eec\u6dfb\u52a0\u65b0\u7279\u6027\u65f6\uff0c\u6211\u4eec\u5c1d\u8bd5\u53bb\u9884\u6d4b\u53ef\u80fd\u4f1a\u53d1\u751f\u7684\u9519\u8bef\u5e76\u53d1\u51fa\u8b66\u544a\u3002</p>\n<p>\u6211\u4eec\u4e00\u76f4\u5728\u5bfb\u627e\u63d0\u9ad8\u5f00\u53d1\u8005\u4f53\u9a8c\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u5f88\u4e50\u610f\u542c\u53d6\u5927\u5bb6\u7684\u5efa\u8bae\uff0c\u63a5\u53d7\u5927\u5bb6\u7684\u8d21\u732e\uff0c\u628a\u5f00\u53d1\u8005\u4f53\u9a8c\u505a\u7684\u66f4\u597d\u3002</p>\n<h3 id=\"debugging\"><a class=\"anchor\" href=\"/react/design-principles#debugging\"></a>\u8c03\u8bd5 </h3>\n<p>\u5f53\u53d1\u751f\u9519\u8bef\u65f6\uff0c\u4f60\u6709\u4e00\u4e9b\u7ebf\u7d22\u53ef\u4ee5\u8ffd\u6eaf\u5230\u4ee3\u7801\u5e93\u4e2d\u7684\u5177\u4f53\u4ee3\u7801\uff0c\u8fd9\u5f88\u91cd\u8981\u3002\u5728 React \u4e2d\uff0cprops \u548c state \u5c31\u662f\u7ebf\u7d22\u3002</p>\n<p>\u5f53\u4f60\u770b\u5230\u5c4f\u5e55\u4e0a\u51fa\u73b0\u9519\u8bef\u65f6\uff0c\u4f60\u53ef\u4ee5\u6253\u5f00 React \u5f00\u53d1\u8005\u5de5\u5177\uff0c\u627e\u5230\u8d1f\u8d23\u6e32\u67d3\u7684\u7ec4\u4ef6\uff0c\u68c0\u67e5\u5b83\u7684 props \u548c state \u662f\u5426\u6b63\u786e\u3002\u5982\u679c\u6b63\u786e\uff0c\u5c31\u80fd\u5927\u6982\u77e5\u9053\u95ee\u9898\u53ef\u80fd\u51fa\u5728\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">render()</code> \u65b9\u6cd5\uff0c\u6216\u8005\u67d0\u4e2a\u88ab <code class=\"language-javascript\">render()</code> \u8c03\u7528\u7684\u65b9\u6cd5\u3002\u95ee\u9898\u663e\u800c\u6613\u89c1\u3002</p>\n<p>\u5982\u679c state \u53d1\u751f\u9519\u8bef\uff0c\u4f60\u5c31\u77e5\u9053\u95ee\u9898\u5728\u4e8e\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u7684\u67d0\u4e2a <code class=\"language-javascript\">setState()</code> \u8c03\u7528\uff0c\u5b9a\u4f4d\u548c\u4fee\u590d\u4e5f\u76f8\u5bf9\u7b80\u5355\uff0c\u56e0\u4e3a\u5728\u5355\u4e2a\u6587\u4ef6\u4e2d <code class=\"language-javascript\">setState()</code> \u8c03\u7528\u6b21\u6570\u5f88\u5c11\u3002</p>\n<p>\u5982\u679c props \u51fa\u73b0\u9519\u8bef\uff0c\u4f60\u53ef\u4ee5\u5728\u68c0\u67e5\u5668\u4e2d\u6cbf\u7740\u6811\u5411\u4e0a\u6392\u67e5\uff0c\u67e5\u627e\u5230\u7b2c\u4e00\u4e2a\u56e0\u4e3a\u5411\u4e0b\u4f20\u9012\u4e86\u9519\u8bef\u7684 props \u800c\u201c\u6c61\u67d3\u4e86\u8fd9\u53e3\u4e95\u201d\u7684\u7ec4\u4ef6\u3002</p>\n<p>\u80fd\u591f\u4ee5\u5f53\u524d\u7684 props \u548c state \u8fd9\u79cd\u5f62\u5f0f\u8ffd\u6eaf\u5230\u5176\u4ea7\u751f\u7684\u4efb\u4f55 UI\uff0c\u8fd9\u79cd\u80fd\u529b\u5bf9 React \u6765\u8bf4\u975e\u5e38\u91cd\u8981\u3002state \u4e0d\u4f1a\u5305\u88f9\u5728\u95ed\u5305\u548c\u7ec4\u5408\u5b50\u4e2d\uff0c\u5e76\u4e14\u5728 React \u4e2d\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6\uff0c\u8fd9\u662f React \u4e00\u4e2a\u975e\u5e38\u660e\u786e\u7684\u8bbe\u8ba1\u76ee\u6807\u3002</p>\n<p>\u5c3d\u7ba1 UI \u662f\u52a8\u6001\u53d8\u5316\u7684\uff0c\u4f46\u662f\u6211\u4eec\u8ba4\u4e3a state \u548c props \u7684\u540c\u6b65\u6267\u884c\u7684 <code class=\"language-javascript\">render()</code> \u51fd\u6570\u4f7f\u5f97\u8c03\u8bd5\u53d8\u6210\u4e86\u65e0\u804a\u4f46\u662f\u6709\u9650\u7684\u6b65\u9aa4\uff0c\u800c\u4e0d\u662f\u778e\u731c\u3002\u6211\u4eec\u5728 React \u91cc\u4fdd\u7559\u4e86\u8fd9\u4e2a\u9650\u5236\uff0c\u5373\u4f7f\u5b83\u4f7f\u8c03\u8bd5\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u53d8\u5f97\u66f4\u52a0\u56f0\u96be\uff0c\u6bd4\u5982\u590d\u6742\u7684\u52a8\u753b\u3002</p>\n<h3 id=\"configuration\"><a class=\"anchor\" href=\"/react/design-principles#configuration\"></a>\u914d\u7f6e </h3>\n<p>\u6211\u4eec\u53d1\u73b0\u5168\u5c40\u7684\u8fd0\u884c\u65f6\u914d\u7f6e\u4f1a\u9020\u6210\u5f88\u591a\u95ee\u9898\u3002</p>\n<p>\u6bd4\u5982\u6211\u4eec\u65f6\u5e38\u6536\u5230\u8fd9\u6837\u7684\u8bf7\u6c42\uff0c\u5b9e\u73b0\u7c7b\u4f3c\u4e8e <code class=\"language-javascript\">React.configure(options)</code> \u6216\u8005 <code class=\"language-javascript\">React.register(component)</code> \u7684\u65b9\u6cd5\u3002\u7136\u800c\u8fd9\u6837\u505a\u4f1a\u51fa\u73b0\u5f88\u591a\u95ee\u9898\uff0c\u800c\u6211\u4eec\u5bf9\u6b64\u5e76\u6ca1\u6709\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>\n<p>\u5982\u679c\u6709\u4eba\u5728\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u5e93\u4e2d\u8c03\u7528\u4e86\u8fd9\u6837\u7684\u65b9\u6cd5\u600e\u4e48\u529e\uff1f\u5982\u679c\u4e00\u4e2a React \u5e94\u7528\u5185\u5d4c\u4e86\u53e6\u4e00\u4e2a React \u5e94\u7528\uff0c\u800c\u4e14\u4ed6\u4eec\u9700\u8981\u7684\u914d\u7f6e\u4e0d\u517c\u5bb9\u600e\u4e48\u529e\uff1f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u600e\u4e48\u7533\u660e\u5b83\u9700\u8981\u67d0\u4e2a\u7279\u5b9a\u914d\u7f6e\u5462\uff1f\u6211\u4eec\u8ba4\u4e3a\u5168\u5c40\u7684\u914d\u7f6e\u4e0e\u7ec4\u5408\u642d\u914d\u6548\u679c\u4e0d\u597d\u3002\u65e2\u7136\u7ec4\u5408\u662f React \u7684\u6838\u5fc3\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u5728\u4ee3\u7801\u91cc\u63d0\u4f9b\u5168\u5c40\u7684\u914d\u7f6e\u3002</p>\n<p>\u7136\u800c\u6211\u4eec\u5728\u6784\u5efa\u5c42\u9762\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5168\u5c40\u7684\u914d\u7f6e\u3002\u6bd4\u5982\u6211\u4eec\u63d0\u4f9b\u4e86\u72ec\u7acb\u7684\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u7684\u6784\u5efa\u3002\u6211\u4eec\u540e\u9762\u4e5f\u8bb8\u4f1a<a class=\"external-link\" href=\"https://github.com/facebook/react/issues/6627\">\u589e\u52a0\u4e00\u4e2a\u5206\u6790\u6784\u5efa</a>\u3002\u6211\u4eec\u5bf9\u8003\u8651\u4f7f\u7528\u5176\u4ed6\u6784\u5efa\u53c2\u6570\u4fdd\u6301\u5f00\u653e\u6001\u5ea6\u3002</p>\n<h3 id=\"beyond-the-dom\"><a class=\"anchor\" href=\"/react/design-principles#beyond-the-dom\"></a>DOM \u4e4b\u5916 </h3>\n<p>\u6211\u4eec\u8ba4\u4e3a React \u7684\u4ef7\u503c\u5728\u4e8e\u5b83\u4f7f\u6211\u4eec\u5199\u51fa\u66f4\u5c11 bug \u7684\u7ec4\u4ef6\uff0c\u800c\u4e14\u7ec4\u4ef6\u5f88\u65b9\u4fbf\u7ec4\u5408\u3002React \u5f53\u521d\u7684\u6e32\u67d3\u76ee\u6807\u662f DOM\uff0c\u4f46 <a class=\"external-link\" href=\"https://reactnative.dev/\">React Native</a> \u5bf9 Facebook \u548c\u793e\u533a\u6765\u8bf4\u540c\u6837\u91cd\u8981\u3002</p>\n<p>React \u7684\u4e00\u4e2a\u91cd\u8981\u8bbe\u8ba1\u7ea6\u675f\u662f\u8981\u6e32\u67d3\u5f15\u64ce\u65e0\u5173\u3002\u8fd9\u5728\u5185\u90e8\u5448\u73b0\u589e\u52a0\u4e86\u4e00\u4e9b\u5f00\u9500\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u5bf9\u5185\u6838\u7684\u4efb\u4f55\u4f18\u5316\u5c06\u5bf9\u6240\u6709\u5e73\u53f0\u90fd\u6709\u76ca\u3002</p>\n<p>\u5355\u4e00\u7684\u7f16\u7a0b\u6a21\u578b\u4f7f\u6211\u4eec\u80fd\u591f\u56f4\u7ed5\u4ea7\u54c1\u5f62\u6210\u5de5\u7a0b\u56e2\u961f\uff0c\u800c\u4e0d\u662f\u56f4\u7ed5\u5e73\u53f0\u3002\u76ee\u524d\u6765\u770b\u8fd9\u6837\u7684\u53d6\u820d\u5bf9\u6211\u4eec\u6765\u8bf4\u5f88\u503c\u5f97\u3002</p>\n<h3 id=\"implementation\"><a class=\"anchor\" href=\"/react/design-principles#implementation\"></a>\u5b9e\u73b0 </h3>\n<p>\u76f8\u6bd4\u4f18\u96c5\u7684\u5b9e\u73b0\uff0c\u6211\u4eec\u66f4\u60f3\u63d0\u4f9b\u5c3d\u53ef\u80fd\u4f18\u96c5\u7684 API\u3002\u73b0\u5b9e\u662f\u4e0d\u5b8c\u7f8e\u7684\uff0c\u5982\u679c\u80fd\u8ba9\u7528\u6237\u65e0\u9700\u5199\u8fd9\u4e9b\u4ee3\u7801\uff0c\u5728\u5408\u9002\u7684\u8303\u56f4\u5185\uff0c\u6211\u4eec\u504f\u5411\u628a\u4e11\u964b\u7684\u4ee3\u7801\u5199\u5728\u5e93\u91cc\u3002\u6211\u4eec\u8bc4\u4f30\u65b0\u4ee3\u7801\u65f6\uff0c\u6211\u4eec\u770b\u4e2d\u7684\u662f\u6b63\u786e\u5730\u5b9e\u73b0\u3001\u9ad8\u6027\u80fd\u5e76\u4e14\u80fd\u591f\u5e26\u6765\u826f\u597d\u7684\u5f00\u53d1\u4f53\u9a8c\uff0c\u4f18\u96c5\u662f\u7b2c\u4e8c\u4f4d\u7684\u3002</p>\n<p>\u6211\u4eec\u5b81\u53ef\u5199\u65e0\u804a\u7684\u4ee3\u7801\u4e5f\u4e0d\u5199\u800d\u806a\u660e\u7684\u4ee3\u7801\u3002\u4ee3\u7801\u662f\u4e00\u6b21\u6027\u7684\u800c\u4e14\u7ecf\u5e38\u53d8\u66f4\uff0c\u6240\u4ee5<a class=\"external-link\" href=\"https://youtu.be/4anAwXYqLG8?t=13m9s\">\u9664\u975e\u6781\u5ea6\u5fc5\u8981\uff0c\u4e0d\u5f15\u5165\u65b0\u7684\u5185\u90e8\u62bd\u8c61</a>\u5f88\u91cd\u8981\u3002\u5f88\u65b9\u4fbf\u79fb\u52a8\u3001\u6539\u52a8\u548c\u5220\u9664\u7684\u5570\u55e6\u7684\u4ee3\u7801\u6bd4\u8fc7\u65e9\u62bd\u8c61\u4e14\u96be\u4ee5\u53d8\u66f4\u7684\u4f18\u96c5\u7684\u4ee3\u7801\u66f4\u597d\u3002</p>\n<h3 id=\"optimized-for-tooling\"><a class=\"anchor\" href=\"/react/design-principles#optimized-for-tooling\"></a>\u9488\u5bf9\u5de5\u5177\u4f18\u5316 </h3>\n<p>React \u4e00\u4e9b\u5e38\u7528\u7684 API \u540d\u5b57\u5f88\u5197\u957f\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u91c7\u7528 <code class=\"language-javascript\">componentDidMount()</code> \u800c\u975e <code class=\"language-javascript\">didMount()</code> \u6216\u8005 <code class=\"language-javascript\">onMount()</code>\u3002\u8fd9\u662f<a class=\"external-link\" href=\"https://github.com/reactjs/react-future/issues/40#issuecomment-142442124\">\u6709\u610f\u4e3a\u4e4b\u7684</a>\uff0c\u76ee\u7684\u662f\u4f7f\u5f97\u548c React \u7684\u4ea4\u4e92\u70b9\u5177\u6709\u9ad8\u53ef\u89c1\u6027\u3002</p>\n<p>\u5728\u50cf Facebook \u8fd9\u6837\u5e9e\u5927\u7684\u4ee3\u7801\u5e93\u4e2d\uff0c\u80fd\u591f\u641c\u7d22\u67d0\u4e9b\u7279\u5b9a API \u7684\u4f7f\u7528\u5f88\u91cd\u8981\u3002\u6211\u4eec\u91cd\u89c6\u6e05\u6670\u5197\u957f\u7684\u540d\u5b57\uff0c\u7279\u522b\u662f\u5728\u4e00\u4e9b\u9700\u8981\u4fdd\u5b88\u4f7f\u7528\u7684\u7279\u6027\u4e0a\u3002\u6bd4\u5982\uff0c<code class=\"language-javascript\">dangerouslySetInnerHTML</code> \u5728\u4ee3\u7801\u8bc4\u5ba1\u4e2d\u5c31\u5f88\u5bb9\u6613\u88ab\u53d1\u73b0\u3002</p>\n<p>\u9488\u5bf9\u641c\u7d22\u4f18\u5316\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u6211\u4eec\u4f9d\u8d56 <a class=\"external-link\" href=\"https://www.youtube.com/watch?v=d0pOgY8__JM\">codemods</a> \u505a\u4e0d\u517c\u5bb9\u7684\u53d8\u66f4\u3002\u6211\u4eec\u5e0c\u671b\u975e\u5e38\u5bb9\u6613\u3001\u5b89\u5168\u5730\u5728\u4ee3\u7801\u5e93\u4e2d\u5e94\u7528\u5927\u91cf\u81ea\u52a8\u5316\u53d8\u66f4\uff0c\u72ec\u7279\u5197\u957f\u7684\u540d\u5b57\u5e2e\u52a9\u4e86\u6211\u4eec\u3002\u7c7b\u4f3c\u5730\uff0c\u72ec\u7279\u7684\u547d\u540d\u4f7f\u5f97\u7f16\u5199\u81ea\u5b9a\u4e49 React \u7528\u6cd5\u7684<a class=\"external-link\" href=\"https://github.com/yannickcr/eslint-plugin-react\">\u63d0\u793a\u89c4\u5219</a>\u53d8\u5f97\u5f88\u5bb9\u6613\uff0c\u65e0\u9700\u62c5\u5fc3\u6f5c\u5728\u7684\u9519\u8bef\u5339\u914d\u3002</p>\n<p><a href=\"/react/introducing-jsx\">JSX</a> \u4e5f\u7c7b\u4f3c\u8fd9\u6837\u3002\u5c3d\u7ba1 React \u4e0d\u5f3a\u5236\u4f7f\u7528 JSX\uff0c\u5728 Facebook \u6211\u4eec\u5927\u91cf\u4f7f\u7528 JSX\uff0c\u56e0\u4e3a\u5b83\u65e2\u597d\u770b\u53c8\u5b9e\u7528\u3002</p>\n<p>\u5728\u6211\u4eec\u7684\u4ee3\u7801\u5e93\u4e2d\uff0cJSX \u7ed9\u548c React \u5143\u7d20\u6811\u6253\u4ea4\u9053\u7684\u5de5\u5177\u63d0\u4f9b\u4e86\u660e\u786e\u7684\u63d0\u793a\u3002\u8fd9\u4f7f\u5f97\u6784\u5efa\u65f6\u4f18\u5316\u6210\u4e3a\u53ef\u80fd\uff0c\u6bd4\u5982<a class=\"external-link\" href=\"https://babeljs.io/docs/en/babel-plugin-transform-react-constant-elements/\">\u63d0\u5347\u5e38\u91cf\u5143\u7d20</a>\u3001\u5b89\u5168\u5730\u8fdb\u884c\u4ee3\u7801\u63d0\u793a\u3001codemod \u5185\u90e8\u7ec4\u4ef6\u7528\u6cd5\u3001\u5728\u4ee3\u7801\u8b66\u544a\u4e2d<a class=\"external-link\" href=\"https://github.com/facebook/react/pull/6771\">\u5305\u542b JSX \u6e90\u7801\u5b9a\u4f4d</a>.</p>\n<h3 id=\"dogfooding\"><a class=\"anchor\" href=\"/react/design-principles#dogfooding\"></a>\u5185\u90e8\u6d4b\u8bd5 </h3>\n<p>\u6211\u4eec\u5168\u529b\u89e3\u51b3\u793e\u533a\u63d0\u51fa\u7684\u95ee\u9898\u3002\u4f46\u6211\u4eec\u53ef\u80fd\u4f1a\u4f18\u5148\u5904\u7406\u5728 Facebook \u5185\u90e8\u9047\u5230\u7684<em>\u540c\u6837\u7684</em>\u95ee\u9898\u3002\u4e5f\u8bb8\u8fd9\u5f88\u53cd\u76f4\u89c9\uff0c\u4f46\u662f\u6211\u4eec\u8ba4\u4e3a\u8fd9\u662f\u793e\u533a\u76f8\u4fe1 React \u7684\u4e3b\u8981\u539f\u56e0\u3002</p>\n<p>\u5185\u90e8\u7684\u91cd\u5ea6\u4f7f\u7528\u4f7f\u6211\u4eec\u575a\u4fe1 React \u4e0d\u4f1a\u51ed\u7a7a\u6d88\u5931\u3002Facebook \u521b\u5efa\u4e86 React \u662f\u6765\u89e3\u51b3\u5b83\u7684\u95ee\u9898\u7684\u3002React \u7ed9 Facebook \u5e26\u6765\u4e86\u73b0\u5b9e\u7684\u5546\u4e1a\u4ef7\u503c\uff0c\u5e76\u4e14\u5728\u5f88\u591a\u4ea7\u54c1\u4e2d\u4f7f\u7528\u3002\u5728\u5185\u90e8\u6d4b\u8bd5\u610f\u5473\u7740\u6211\u4eec\u7684\u76ee\u5149\u4fdd\u6301\u654f\u9510\uff0c\u6709\u7740\u524d\u8fdb\u7684\u91cd\u70b9\u65b9\u5411\u3002</p>\n<p>\u8fd9\u4e0d\u4ee3\u8868\u6211\u4eec\u4f1a\u5ffd\u89c6\u793e\u533a\u63d0\u51fa\u7684\u95ee\u9898\u3002\u6bd4\u5982\uff0c\u5373\u4fbf\u6211\u4eec\u5185\u90e8\u5e76\u4e0d\u4f9d\u8d56\u4ed6\u4eec\uff0c\u6211\u4eec\u4ecd\u589e\u52a0\u4e86 React \u5bf9 <a href=\"/react/webcomponents\">web components</a> \u548c <a class=\"external-link\" href=\"https://github.com/facebook/react/pull/6243\">SVG</a> \u7684\u652f\u6301\u3002\u6211\u4eec\u503e\u542c\u7740\u5927\u5bb6\u7684\u75db\u70b9\uff0c\u5e76\u5168\u529b\u89e3\u51b3\u4ed6\u4eec\u3002\u662f\u793e\u533a\u4f7f React \u53d8\u5f97\u4e0e\u4f17\u4e0d\u540c\uff0c\u6240\u4ee5\u6211\u4eec\u5f88\u8363\u5e78\u53ef\u4ee5\u56de\u62a5\u793e\u533a\u3002</p>\n<p>\u5728 Facebook \u53d1\u5e03\u4e86\u5f88\u591a\u5f00\u6e90\u7684\u9879\u76ee\u4e4b\u540e\uff0c\u6211\u4eec\u5b66\u5230\u4e86\u8ba9\u5927\u5bb6\u90fd\u5f00\u5fc3\u7684\u505a\u6cd5\u4f1a\u5bfc\u81f4\u9879\u76ee\u6ca1\u6709\u91cd\u70b9\uff0c\u6210\u957f\u4e0d\u8d77\u6765\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u53d1\u73b0\u9009\u62e9\u4e00\u5c0f\u90e8\u5206\u7fa4\u4f53\uff0c\u91cd\u70b9\u5173\u6ce8\u5982\u4f55\u4f7f\u4ed6\u4eec\u5f00\u5fc3\u5e26\u6765\u4e86\u79ef\u6781\u7684\u51c0\u6548\u5e94\u3002\u8fd9\u6b63\u662f React \u7684\u505a\u6cd5\uff0c\u5230\u76ee\u524d\u4e3a\u6b62\u89e3\u51b3 Facebook \u4ea7\u54c1\u56e2\u961f\u7684\u95ee\u9898\u5f88\u597d\u7684\u4f20\u9012\u5230\u4e86\u5f00\u6e90\u793e\u533a\u3002</p>\n<p>\u8fd9\u79cd\u505a\u6cd5\u7684\u4e0d\u597d\u4e4b\u5904\u662f\u6709\u65f6\u5bf9\u4e8e Facebook \u56e2\u961f\u65e0\u9700\u5173\u5fc3\u7684\u4e8b\uff0c\u6bd4\u5982\u201c\u8d77\u6b65\u201d\u7684\u4f53\u9a8c\uff0c\u6211\u4eec\u4e0d\u80fd\u591f\u7ed9\u4e88\u8db3\u591f\u7684\u91cd\u89c6\u3002\u6211\u4eec\u5df2\u7ecf\u89c9\u5bdf\u5230\u4e86\uff0c\u6211\u4eec\u6b63\u5728\u7740\u624b\u601d\u8003\u5982\u4f55\u505a\u624d\u80fd\u4f7f\u793e\u533a\u91cc\u7684\u6bcf\u4e2a\u4eba\u90fd\u53d7\u76ca\uff0c\u4e0d\u91cd\u8e48\u4ee5\u524d\u5f00\u6e90\u9879\u76ee\u7684\u8986\u8f99\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/design-principles.md\">Edit this page</a></p></div></article>", "path": "/react/design-principles", "nav": ["/react/implementation-notes", "/react/faq-ajax"]}]}, {"key": "FAQ", "values": [{"key": "AJAX \u53ca APIs", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"how-can-i-make-an-ajax-call\"><a class=\"anchor\" href=\"/react/faq-ajax#how-can-i-make-an-ajax-call\"></a>\u5982\u4f55\u5728 React \u4e2d\u53d1\u8d77 AJAX \u8bf7\u6c42\uff1f</h3>\n<p>\u5728 React \u5f00\u53d1\u4e2d\uff0c\u4f60\u80fd\u4f7f\u7528\u4efb\u4f55\u4f60\u559c\u6b22\u7684 AJAX \u5e93\uff0c\u6bd4\u5982\u793e\u533a\u6bd4\u8f83\u6d41\u884c\u7684 <a class=\"external-link\" href=\"https://github.com/axios/axios\">Axios</a>\uff0c<a class=\"external-link\" href=\"https://api.jquery.com/jQuery.ajax/\">jQuery AJAX</a>\uff0c\u6216\u8005\u662f\u6d4f\u89c8\u5668\u5185\u7f6e\u7684 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\">window.fetch</a>\u3002</p>\n<h3 id=\"where-in-the-component-lifecycle-should-i-make-an-ajax-call\"><a class=\"anchor\" href=\"/react/faq-ajax#where-in-the-component-lifecycle-should-i-make-an-ajax-call\"></a>\u5e94\u8be5\u5728 React \u7ec4\u4ef6\u7684\u54ea\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u53d1\u8d77 AJAX \u8bf7\u6c42\uff1f</h3>\n<p>\u6211\u4eec\u63a8\u8350\u4f60\u5728 <a href=\"/react/react-component#mounting\"><code class=\"language-javascript\">componentDidMount</code></a> \u8fd9\u4e2a\u751f\u547d\u5468\u671f\u51fd\u6570\u4e2d\u53d1\u8d77 AJAX \u8bf7\u6c42\u3002\u8fd9\u6837\u505a\u4f60\u53ef\u4ee5\u62ff\u5230 AJAX \u8bf7\u6c42\u8fd4\u56de\u7684\u6570\u636e\u5e76\u901a\u8fc7 <code class=\"language-javascript\">setState</code> \u6765\u66f4\u65b0\u7ec4\u4ef6\u3002</p>\n<h3 id=\"example-using-ajax-results-to-set-local-state\"><a class=\"anchor\" href=\"/react/faq-ajax#example-using-ajax-results-to-set-local-state\"></a>\u793a\u4f8b\uff1a\u4f7f\u7528 AJAX \u8bf7\u6c42\u7ed3\u679c\u53bb\u6539\u53d8\u7ec4\u4ef6\u5185\u90e8 state </h3>\n<p>\u4e0b\u9762\u8fd9\u4e2a\u7ec4\u4ef6\u6f14\u793a\u4e86\u5982\u4f55\u5728 <code class=\"language-javascript\">componentDidMount</code> \u4e2d\u53d1\u8d77 AJAX \u8bf7\u6c42\u53bb\u66f4\u65b0\u7ec4\u4ef6\u7684 state \u3002</p>\n<p>\u793a\u4f8b API \u8fd4\u56de\u5982\u4e0b\u7684 JSON \u5bf9\u8c61\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">{\n  \"items\": [\n    { \"id\": 1, \"name\": \"Apples\",  \"price\": \"$2\" },\n    { \"id\": 2, \"name\": \"Peaches\", \"price\": \"$5\" }\n  ] \n}</code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">isLoaded</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://api.example.com/items\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=&gt;</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">isLoaded</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> result<span class=\"token punctuation\">.</span>items\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// \u6ce8\u610f\uff1a\u9700\u8981\u5728\u6b64\u5904\u5904\u7406\u9519\u8bef</span>\n        <span class=\"token comment\">// \u800c\u4e0d\u662f\u4f7f\u7528 catch() \u53bb\u6355\u83b7\u9519\u8bef</span>\n        <span class=\"token comment\">// \u56e0\u4e3a\u4f7f\u7528 catch \u53bb\u6355\u83b7\u5f02\u5e38\u4f1a\u63a9\u76d6\u6389\u7ec4\u4ef6\u672c\u8eab\u53ef\u80fd\u4ea7\u751f\u7684 bug</span>\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">isLoaded</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            error\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> isLoaded<span class=\"token punctuation\">,</span> items <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Error: </span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isLoaded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n              </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u8fd9\u91cc\u4e0e <a href=\"/react/hooks-intro\">Hook</a> \u7684\u5b9e\u73b0\u76f8\u540c\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoaded<span class=\"token punctuation\">,</span> setIsLoaded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">,</span> setItems<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u6ce8\u610f\uff1a\u7a7a\u7684\u4f9d\u8d56\u6570\u7ec4 []</span>\n  <span class=\"token comment\">// \u8868\u793a\u8fd9\u4e2a useEffect</span>\n  <span class=\"token comment\">// \u4e0e componentDidMount() \u7c7b\u4f3c\uff0c\u53ea\u8fd0\u884c\u4e00\u6b21</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://api.example.com/items\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=&gt;</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setIsLoaded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">setItems</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// \u6ce8\u610f\uff1a\u9700\u8981\u5728\u6b64\u5904\u5904\u7406\u9519\u8bef</span>\n        <span class=\"token comment\">// \u800c\u4e0d\u662f\u4f7f\u7528 catch() \u53bb\u6355\u83b7\u9519\u8bef</span>\n        <span class=\"token comment\">// \u56e0\u4e3a\u4f7f\u7528 catch \u53bb\u6355\u83b7\u5f02\u5e38\u4f1a\u63a9\u76d6\u6389\u7ec4\u4ef6\u672c\u8eab\u53ef\u80fd\u4ea7\u751f\u7684 bug</span>\n        <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">setIsLoaded</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Error: </span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isLoaded<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-ajax.md\">Edit this page</a></p></div></article>", "path": "/react/faq-ajax", "nav": ["/react/design-principles", "/react/faq-build"]}, {"key": "Babel, JSX, \u53ca\u6784\u5efa\u8fc7\u7a0b", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"do-i-need-to-use-jsx-with-react\"><a class=\"anchor\" href=\"/react/faq-build#do-i-need-to-use-jsx-with-react\"></a>\u5fc5\u987b\u5728 React \u4e2d\u4f7f\u7528 JSX \u5417\uff1f </h3>\n<p>\u4e0d\u662f\u5fc5\u987b\u7684\uff01\u8bf7\u67e5\u9605 <a href=\"/react/react-without-jsx\">\u201c\u4e0d\u4f7f\u7528 JSX\u201d</a> \u4ee5\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p>\n<h3 id=\"do-i-need-to-use-es6--with-react\"><a class=\"anchor\" href=\"/react/faq-build#do-i-need-to-use-es6--with-react\"></a>\u5fc5\u987b\u5728 React \u4e2d\u4f7f\u7528 ES6 (+) \u5417\uff1f </h3>\n<p>\u4e0d\u662f\u5fc5\u987b\u7684\uff01\u8bf7\u67e5\u9605 <a href=\"/react/react-without-es6\">\u201c\u4e0d\u4f7f\u7528 ES6\u201d</a> \u4ee5\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p>\n<h3 id=\"how-can-i-write-comments-in-jsx\"><a class=\"anchor\" href=\"/react/faq-build#how-can-i-write-comments-in-jsx\"></a>\u600e\u6837\u624d\u80fd\u5728 JSX \u4e2d\u7f16\u5199\u6ce8\u91ca\uff1f </h3>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* \u6ce8\u91ca\u5199\u5728\u8fd9\u91cc */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* \u591a\u884c\u6ce8\u91ca \n  \u4e5f\u540c\u6837\u6709\u6548\u3002 */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">! \n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></code></pre></div></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-build.md\">Edit this page</a></p></div></article>", "path": "/react/faq-build", "nav": ["/react/faq-ajax", "/react/faq-functions"]}, {"key": "\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528\u4e8b\u4ef6\u5904\u7406\u51fd\u6570", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"how-do-i-pass-an-event-handler-like-onclick-to-a-component\"><a class=\"anchor\" href=\"/react/faq-functions#how-do-i-pass-an-event-handler-like-onclick-to-a-component\"></a>\u5982\u4f55\u5c06\u4e8b\u4ef6\u5904\u7406\u5668\uff08\u6bd4\u5982 onClick\uff09\u4f20\u9012\u7ed9\u7ec4\u4ef6\uff1f</h3>\n<p>\u53ef\u4ee5\u5c06\u4e8b\u4ef6\u5904\u7406\u5668\u548c\u5176\u4ed6\u51fd\u6570\u4f5c\u4e3a props \u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span></code></pre></div>\n<p>\u5982\u679c\u9700\u8981\u5728\u4e8b\u4ef6\u5904\u7406\u5668\u4e2d\u8bbf\u95ee\u7236\u7ec4\u4ef6\uff0c\u8fd8\u9700\u8981\u4e3a\u8be5\u51fd\u6570\u7ed1\u5b9a\u7ec4\u4ef6\u5b9e\u4f8b\uff08\u53c2\u89c1\u4e0b\u6587\uff09\u3002</p>\n<h3 id=\"how-do-i-bind-a-function-to-a-component-instance\"><a class=\"anchor\" href=\"/react/faq-functions#how-do-i-bind-a-function-to-a-component-instance\"></a>\u5982\u4f55\u4e3a\u51fd\u6570\u7ed1\u5b9a\u7ec4\u4ef6\u5b9e\u4f8b\uff1f </h3>\n<p>\u6709\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u53ef\u4ee5\u786e\u4fdd\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u7ec4\u4ef6\u5c5e\u6027\uff0c\u6bd4\u5982 <code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">this.state</code>\uff0c\u8fd9\u53d6\u51b3\u4e8e\u4f7f\u7528\u7684\u8bed\u6cd5\u548c\u6784\u5efa\u6b65\u9aa4\u3002</p>\n<h4 id=\"bind-in-constructor-es2015\"><a class=\"anchor\" href=\"/react/faq-functions#bind-in-constructor-es2015\"></a>\u5728\u6784\u9020\u51fd\u6570\u4e2d\u7ed1\u5b9a\uff08ES2015\uff09 </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Click happened'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"class-properties-es2022\"><a class=\"anchor\" href=\"/react/faq-functions#class-properties-es2022\"></a>Class Properties (ES2022) </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Click happened'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"bind-in-render\"><a class=\"anchor\" href=\"/react/faq-functions#bind-in-render\"></a>\u5728 Render \u4e2d\u7684\u7ed1\u5b9a </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Click happened'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 render \u65b9\u6cd5\u4e2d\u4f7f\u7528 <code class=\"language-javascript\">Function.prototype.bind</code> \u4f1a\u5728\u6bcf\u6b21\u7ec4\u4ef6\u6e32\u67d3\u65f6\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd\uff08\u53c2\u89c1\u4e0b\u6587\uff09\u3002</p>\n</div>\n<h4 id=\"arrow-function-in-render\"><a class=\"anchor\" href=\"/react/faq-functions#arrow-function-in-render\"></a>\u5728 Render \u4e2d\u4f7f\u7528\u7bad\u5934\u51fd\u6570 </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Click happened'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u5728 render \u65b9\u6cd5\u4e2d\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u4e5f\u4f1a\u5728\u6bcf\u6b21\u7ec4\u4ef6\u6e32\u67d3\u65f6\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\uff0c\u8fd9\u4f1a\u7834\u574f\u57fa\u4e8e\u6052\u7b49\u6bd4\u8f83\u7684\u6027\u80fd\u4f18\u5316\u3002</p>\n</div>\n<h3 id=\"is-it-ok-to-use-arrow-functions-in-render-methods\"><a class=\"anchor\" href=\"/react/faq-functions#is-it-ok-to-use-arrow-functions-in-render-methods\"></a>\u53ef\u4ee5\u5728 render \u65b9\u6cd5\u4e2d\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u5417\uff1f</h3>\n<p>\u4e00\u822c\u6765\u8bf4\u662f\u53ef\u4ee5\u7684\uff0c\u5e76\u4e14\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u662f\u5411\u56de\u8c03\u51fd\u6570\u4f20\u9012\u53c2\u6570\u7684\u6700\u7b80\u5355\u7684\u529e\u6cd5\u3002</p>\n<p>\u4f46\u662f\u5982\u679c\u9047\u5230\u4e86\u6027\u80fd\u95ee\u9898\uff0c\u4e00\u5b9a\u8981\u8fdb\u884c\u4f18\u5316\uff01</p>\n<h3 id=\"why-is-binding-necessary-at-all\"><a class=\"anchor\" href=\"/react/faq-functions#why-is-binding-necessary-at-all\"></a>\u4e3a\u4ec0\u4e48\u7ed1\u5b9a\u662f\u5fc5\u8981\u7684\uff1f</h3>\n<p>\u5728JavaScript\u4e2d\uff0c\u4ee5\u4e0b\u4e24\u79cd\u5199\u6cd5\u662f<strong>\u4e0d</strong>\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\">obj<span class=\"token punctuation\">.</span><span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> method <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span>method<span class=\"token punctuation\">;</span>\n<span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>bind \u65b9\u6cd5\u786e\u4fdd\u4e86\u7b2c\u4e8c\u79cd\u5199\u6cd5\u4e0e\u7b2c\u4e00\u79cd\u5199\u6cd5\u76f8\u540c\u3002</p>\n<p>\u4f7f\u7528 React\uff0c\u901a\u5e38\u53ea\u9700\u8981\u7ed1\u5b9a<em>\u4f20\u9012</em>\u7ed9\u5176\u4ed6\u7ec4\u4ef6\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c<code class=\"language-javascript\">&lt;button onClick={this.handleClick}&gt;</code> \u662f\u5728\u4f20\u9012 <code class=\"language-javascript\">this.handleClick</code> \uff0c\u6240\u4ee5\u9700\u8981\u7ed1\u5b9a\u5b83\u3002\u4f46\u662f\uff0c\u6ca1\u6709\u5fc5\u8981\u7ed1\u5b9a <code class=\"language-javascript\">render</code> \u65b9\u6cd5\u6216\u751f\u547d\u5468\u671f\u65b9\u6cd5\uff1a\u6211\u4eec\u5e76\u6ca1\u6709\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9\u5176\u4ed6\u7684\u7ec4\u4ef6\u3002</p>\n<p><a class=\"external-link\" href=\"https://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/\">Yehuda Katz \u7684\u6587\u7ae0</a>\u8be6\u7ec6\u89e3\u91ca\u4e86\u4ec0\u4e48\u662f\u7ed1\u5b9a\uff0c\u4ee5\u53ca\u51fd\u6570\u5728 JavaScript \u4e2d\u600e\u4e48\u8d77\u4f5c\u7528\u3002</p>\n<h3 id=\"why-is-my-function-being-called-every-time-the-component-renders\"><a class=\"anchor\" href=\"/react/faq-functions#why-is-my-function-being-called-every-time-the-component-renders\"></a>\u4e3a\u4ec0\u4e48\u6211\u7684\u51fd\u6570\u6bcf\u6b21\u7ec4\u4ef6\u6e32\u67d3\u65f6\u90fd\u4f1a\u88ab\u8c03\u7528\uff1f</h3>\n<p>\u786e\u4fdd\u4f60\u5728\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u7ed9\u7ec4\u4ef6\u65f6\uff0c\u6ca1\u6709<em>\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570</em>\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Wrong: handleClick is called instead of passed as a reference!</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u6b63\u786e\u505a\u6cd5\u662f\uff0c<em>\u4f20\u9012\u51fd\u6570\u672c\u8eab</em>\uff08\u4e0d\u5e26\u62ec\u53f7\uff09\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Correct: handleClick is passed as a reference!</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Click Me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"how-do-i-pass-a-parameter-to-an-event-handler-or-callback\"><a class=\"anchor\" href=\"/react/faq-functions#how-do-i-pass-a-parameter-to-an-event-handler-or-callback\"></a>\u5982\u4f55\u4f20\u9012\u53c2\u6570\u7ed9\u4e8b\u4ef6\u5904\u7406\u5668\u6216\u56de\u8c03\uff1f </h3>\n<p>\u53ef\u4ee5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u5305\u88f9\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u5e76\u4f20\u9012\u53c2\u6570:</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<p>\u4ee5\u4e0a\u4ee3\u7801\u548c\u8c03\u7528 <code class=\"language-javascript\">.bind</code> \u662f\u7b49\u4ef7\u7684\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/&gt;</span></span></code></pre></div>\n<h4 id=\"example-passing-params-using-arrow-functions\"><a class=\"anchor\" href=\"/react/faq-functions#example-passing-params-using-arrow-functions\"></a>\u793a\u4f8b\uff1a\u901a\u8fc7\u7bad\u5934\u51fd\u6570\u4f20\u9012\u53c2\u6570 </h4>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">A</span> <span class=\"token operator\">=</span> <span class=\"token number\">65</span> <span class=\"token comment\">// ASCII character code</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Alphabet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">justClicked</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">letters</span><span class=\"token operator\">:</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> <span class=\"token number\">26</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">fromCharCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">justClicked</span><span class=\"token operator\">:</span> letter <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Just clicked: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>justClicked<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>letters<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter</span> <span class=\"token operator\">=&gt;</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>letter<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>letter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n              </span><span class=\"token punctuation\">{</span>letter<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"example-passing-params-using-data-attributes\"><a class=\"anchor\" href=\"/react/faq-functions#example-passing-params-using-data-attributes\"></a>\u793a\u4f8b\uff1a\u901a\u8fc7 data-attributes \u4f20\u9012\u53c2\u6570 </h4>\n<p>\u540c\u6837\u7684\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 DOM API \u6765\u5b58\u50a8\u4e8b\u4ef6\u5904\u7406\u5668\u9700\u8981\u7684\u6570\u636e\u3002\u5982\u679c\u9700\u8981\u4f18\u5316\u5927\u91cf\u5143\u7d20\u6216\u4f7f\u7528\u4f9d\u8d56\u4e8e <code class=\"language-javascript\">React.PureComponent</code> \u76f8\u7b49\u6027\u68c0\u67e5\u7684\u6e32\u67d3\u6811\uff0c\u8bf7\u8003\u8651\u4f7f\u7528\u6b64\u65b9\u6cd5\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token constant\">A</span> <span class=\"token operator\">=</span> <span class=\"token number\">65</span> <span class=\"token comment\">// ASCII character code</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Alphabet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">justClicked</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">letters</span><span class=\"token operator\">:</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> <span class=\"token number\">26</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">fromCharCode</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">justClicked</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>letter\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        Just clicked: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>justClicked<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>letters<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">letter</span> <span class=\"token operator\">=&gt;</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>letter<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">data-letter</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>letter<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n              </span><span class=\"token punctuation\">{</span>letter<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"how-can-i-prevent-a-function-from-being-called-too-quickly-or-too-many-times-in-a-row\"><a class=\"anchor\" href=\"/react/faq-functions#how-can-i-prevent-a-function-from-being-called-too-quickly-or-too-many-times-in-a-row\"></a>\u600e\u6837\u963b\u6b62\u51fd\u6570\u88ab\u8c03\u7528\u592a\u5feb\u6216\u8005\u592a\u591a\u6b21\uff1f</h3>\n<p>\u5982\u679c\u4f60\u6709\u4e00\u4e2a <code class=\"language-javascript\">onClick</code> \u6216\u8005 <code class=\"language-javascript\">onScroll</code> \u8fd9\u6837\u7684\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u60f3\u8981\u963b\u6b62\u56de\u8c03\u88ab\u89e6\u53d1\u7684\u592a\u5feb\uff0c\u90a3\u4e48\u53ef\u4ee5\u9650\u5236\u6267\u884c\u56de\u8c03\u7684\u901f\u5ea6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u505a\u5230\u8fd9\u70b9\uff1a</p>\n<ul>\n<li><strong>\u8282\u6d41</strong>\uff1a\u57fa\u4e8e\u65f6\u95f4\u7684\u9891\u7387\u6765\u8fdb\u884c\u62bd\u6837\u66f4\u6539 (\u4f8b\u5982 <a class=\"external-link\" href=\"https://lodash.com/docs#throttle\"><code class=\"language-javascript\">_.throttle</code></a>)</li>\n<li><strong>\u9632\u6296</strong>\uff1a\u4e00\u6bb5\u65f6\u95f4\u7684\u4e0d\u6d3b\u52a8\u4e4b\u540e\u53d1\u5e03\u66f4\u6539 (\u4f8b\u5982 <a class=\"external-link\" href=\"https://lodash.com/docs#debounce\"><code class=\"language-javascript\">_.debounce</code></a>)</li>\n<li><strong><code class=\"language-javascript\">requestAnimationFrame</code> \u8282\u6d41</strong>\uff1a\u57fa\u4e8e requestAnimationFrame \u7684\u62bd\u6837\u66f4\u6539 (\u4f8b\u5982 <a class=\"external-link\" href=\"https://github.com/alexreardon/raf-schd\"><code class=\"language-javascript\">raf-schd</code></a>)</li>\n</ul>\n<p>\u53ef\u4ee5\u770b\u8fd9\u4e2a\u6bd4\u8f83 throttle \u548c debounce \u7684<a class=\"external-link\" href=\"http://demo.nimius.net/debounce_throttle/\">\u53ef\u89c6\u5316\u9875\u9762</a></p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p><code class=\"language-javascript\">_.debounce</code>\u3001<code class=\"language-javascript\">_.throttle</code> \u548c <code class=\"language-javascript\">raf-schd</code> \u90fd\u63d0\u4f9b\u4e86\u4e00\u4e2a <code class=\"language-javascript\">cancel</code> \u65b9\u6cd5\u6765\u53d6\u6d88\u5ef6\u8fdf\u56de\u8c03\u3002\u4f60\u9700\u8981\u5728 <code class=\"language-javascript\">componentWillUnmount</code> \u4e2d\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u6216\u8005\u5bf9\u4ee3\u7801\u8fdb\u884c\u68c0\u67e5\u6765\u4fdd\u8bc1\u5728\u5ef6\u8fdf\u51fd\u6570\u6709\u6548\u671f\u95f4\u5185\u7ec4\u4ef6\u59cb\u7ec8\u6302\u8f7d\u3002</p>\n</div>\n<h4 id=\"throttle\"><a class=\"anchor\" href=\"/react/faq-functions#throttle\"></a>\u8282\u6d41 </h4>\n<p>\u8282\u6d41\u963b\u6b62\u51fd\u6570\u5728\u7ed9\u5b9a\u65f6\u95f4\u7a97\u53e3\u5185\u88ab\u8c03\u4e0d\u80fd\u8d85\u8fc7\u4e00\u6b21\u3002\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4f1a\u8282\u6d41 \u201cclick\u201d \u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u4f7f\u5176\u6bcf\u79d2\u949f\u7684\u53ea\u80fd\u8c03\u7528\u4e00\u6b21\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> throttle <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash.throttle'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LoadMoreButton</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClickThrottled <span class=\"token operator\">=</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClickThrottled<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClickThrottled<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Load More</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">loadMore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"debounce\"><a class=\"anchor\" href=\"/react/faq-functions#debounce\"></a>\u9632\u6296 </h4>\n<p>\u9632\u6296\u786e\u4fdd\u51fd\u6570\u4e0d\u4f1a\u5728\u4e0a\u4e00\u6b21\u88ab\u8c03\u7528\u4e4b\u540e\u4e00\u5b9a\u91cf\u7684\u65f6\u95f4\u5185\u88ab\u6267\u884c\u3002\u5f53\u5fc5\u987b\u8fdb\u884c\u4e00\u4e9b\u8d39\u65f6\u7684\u8ba1\u7b97\u6765\u54cd\u5e94\u5feb\u901f\u6d3e\u53d1\u7684\u4e8b\u4ef6\u65f6\uff08\u6bd4\u5982\u9f20\u6807\u6eda\u52a8\u6216\u952e\u76d8\u4e8b\u4ef6\u65f6\uff09\uff0c\u9632\u6296\u662f\u975e\u5e38\u6709\u7528\u7684\u3002\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\u4ee5 250ms \u7684\u5ef6\u8fdf\u6765\u6539\u53d8\u6587\u672c\u8f93\u5165\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> debounce <span class=\"token keyword\">from</span> <span class=\"token string\">'lodash.debounce'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Searchbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>emitChangeDebounced <span class=\"token operator\">=</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>emitChange<span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>emitChangeDebounced<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Search...<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">defaultValue</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">emitChangeDebounced</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">emitChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"requestanimationframe-throttling\"><a class=\"anchor\" href=\"/react/faq-functions#requestanimationframe-throttling\"></a><code class=\"language-javascript\">requestAnimationFrame</code> \u8282\u6d41 </h4>\n<p><a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\"><code class=\"language-javascript\">requestAnimationFrame</code></a> \u662f\u5728\u6d4f\u89c8\u5668\u4e2d\u6392\u961f\u7b49\u5f85\u6267\u884c\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u5b83\u53ef\u4ee5\u5728\u5448\u73b0\u6027\u80fd\u7684\u6700\u4f73\u65f6\u95f4\u6267\u884c\u3002\u4e00\u4e2a\u51fd\u6570\u88ab <code class=\"language-javascript\">requestAnimationFrame</code> \u653e\u5165\u961f\u5217\u540e\u5c06\u4f1a\u5728\u4e0b\u4e00\u5e27\u89e6\u53d1\u3002\u6d4f\u89c8\u5668\u4f1a\u52aa\u529b\u786e\u4fdd\u6bcf\u79d2 60 \u5e27\uff0860fps\uff09\u3002\u7136\u800c\uff0c\u5982\u679c\u6d4f\u89c8\u5668\u65e0\u6cd5\u786e\u4fdd\uff0c\u90a3\u4e48\u81ea\u7136\u4f1a<em>\u9650\u5236</em>\u6bcf\u79d2\u7684\u5e27\u6570\u3002\u4f8b\u5982\uff0c\u67d0\u4e2a\u8bbe\u5907\u53ef\u80fd\u53ea\u80fd\u5904\u7406\u6bcf\u79d2 30 \u5e27\uff0c\u6240\u4ee5\u6bcf\u79d2\u53ea\u80fd\u5f97\u5230 30 \u5e27\u3002\u4f7f\u7528 <code class=\"language-javascript\">requestAnimationFrame</code> \u6765\u8282\u6d41\u662f\u4e00\u79cd\u6709\u7528\u7684\u6280\u672f\uff0c\u5b83\u53ef\u4ee5\u9632\u6b62\u5728\u4e00\u79d2\u4e2d\u8fdb\u884c 60 \u5e27\u4ee5\u4e0a\u7684\u66f4\u65b0\u3002\u5982\u679c\u4e00\u79d2\u949f\u5185\u5b8c\u6210 100 \u6b21\u66f4\u65b0\uff0c\u5219\u4f1a\u4e3a\u6d4f\u89c8\u5668\u5e26\u6765\u989d\u5916\u7684\u8d1f\u62c5\uff0c\u800c\u7528\u6237\u5374\u65e0\u6cd5\u611f\u77e5\u5230\u8fd9\u4e9b\u5de5\u4f5c\u3002</p>\n<div class=\"blockquote\">\n<strong>\u6ce8\u610f\uff1a</strong>\n<p>\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u65f6\u53ea\u80fd\u83b7\u53d6\u67d0\u4e00\u5e27\u4e2d\u6700\u540e\u53d1\u5e03\u7684\u503c\u3002\u4e5f\u53ef\u4ee5\u5728 <a class=\"external-link\" href=\"https://developer.mozilla.org/en-US/docs/Web/Events/scroll\"><code class=\"language-javascript\">MDN</code></a> \u4e2d\u770b\u4f18\u5316\u7684\u793a\u4f8b\u3002</p>\n</div>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> rafSchedule <span class=\"token keyword\">from</span> <span class=\"token string\">'raf-schd'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ScrollListener</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleScroll <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleScroll</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Create a new function to schedule updates.</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scheduleUpdate <span class=\"token operator\">=</span> <span class=\"token function\">rafSchedule</span><span class=\"token punctuation\">(</span>\n      <span class=\"token parameter\">point</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onScroll</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// When we receive a scroll event, schedule an update.</span>\n    <span class=\"token comment\">// If we receive many updates within a frame, we'll only publish the latest value.</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">scheduleUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientY <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Cancel any pending updates since we're unmounting.</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scheduleUpdate<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">'scroll'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onScroll</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleScroll<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/my-huge-image.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4 id=\"testing-your-rate-limiting\"><a class=\"anchor\" href=\"/react/faq-functions#testing-your-rate-limiting\"></a>\u6d4b\u8bd5\u901f\u7387\u9650\u5236 </h4>\n<p>\u5728\u6d4b\u8bd5\u901f\u7387\u9650\u5236\u7684\u4ee3\u7801\u662f\u5426\u6b63\u786e\u5de5\u4f5c\u7684\u65f6\u5019\uff0c\u5982\u679c\u53ef\u4ee5\uff08\u5bf9\u52a8\u753b\u6216\u64cd\u4f5c\uff09\u8fdb\u884c\u5feb\u8fdb\u5c06\u4f1a\u5f88\u6709\u5e2e\u52a9\u3002\u5982\u679c\u6b63\u5728\u4f7f\u7528 <a class=\"external-link\" href=\"https://facebook.github.io/jest/\"><code class=\"language-javascript\">jest</code></a> \uff0c\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528 <a class=\"external-link\" href=\"https://facebook.github.io/jest/docs/en/timer-mocks.html\"><code class=\"language-javascript\">mock timers</code></a> \u6765\u5feb\u8fdb\u3002\u5982\u679c\u6b63\u5728\u4f7f\u7528  <code class=\"language-javascript\">requestAnimationFrame</code> \u8282\u6d41\uff0c\u90a3\u4e48\u5c31\u4f1a\u53d1\u73b0 <a class=\"external-link\" href=\"https://github.com/alexreardon/raf-stub\"><code class=\"language-javascript\">raf-stub</code></a> \u662f\u4e00\u4e2a\u63a7\u5236\u52a8\u753b\u5e27\u7684\u5341\u5206\u6709\u7528\u7684\u5de5\u5177\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-functions.md\">Edit this page</a></p></div></article>", "path": "/react/faq-functions", "nav": ["/react/faq-build", "/react/faq-state"]}, {"key": "\u7ec4\u4ef6\u72b6\u6001", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"what-does-setstate-do\"><a class=\"anchor\" href=\"/react/faq-state#what-does-setstate-do\"></a><code class=\"language-javascript\">setState</code> \u5b9e\u9645\u505a\u4e86\u4ec0\u4e48\uff1f </h3>\n<p><code class=\"language-javascript\">setState()</code> \u4f1a\u5bf9\u4e00\u4e2a\u7ec4\u4ef6\u7684 <code class=\"language-javascript\">state</code> \u5bf9\u8c61\u5b89\u6392\u4e00\u6b21\u66f4\u65b0\u3002\u5f53 state \u6539\u53d8\u4e86\uff0c\u8be5\u7ec4\u4ef6\u5c31\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002</p>\n<h3 id=\"what-is-the-difference-between-state-and-props\"><a class=\"anchor\" href=\"/react/faq-state#what-is-the-difference-between-state-and-props\"></a><code class=\"language-javascript\">state</code> \u548c <code class=\"language-javascript\">props</code> \u4e4b\u95f4\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f  </h3>\n<p><a href=\"/react/components-and-props\"><code class=\"language-javascript\">props</code></a>\uff08\u201cproperties\u201d \u7684\u7f29\u5199\uff09\u548c <a href=\"/react/state-and-lifecycle\"><code class=\"language-javascript\">state</code></a> \u90fd\u662f\u666e\u901a\u7684 JavaScript \u5bf9\u8c61\u3002\u5b83\u4eec\u90fd\u662f\u7528\u6765\u4fdd\u5b58\u4fe1\u606f\u7684\uff0c\u8fd9\u4e9b\u4fe1\u606f\u53ef\u4ee5\u63a7\u5236\u7ec4\u4ef6\u7684\u6e32\u67d3\u8f93\u51fa\uff0c\u800c\u5b83\u4eec\u7684\u4e00\u4e2a\u91cd\u8981\u7684\u4e0d\u540c\u70b9\u5c31\u662f\uff1a<code class=\"language-javascript\">props</code> \u662f\u4f20\u9012<em>\u7ed9</em>\u7ec4\u4ef6\u7684\uff08\u7c7b\u4f3c\u4e8e\u51fd\u6570\u7684\u5f62\u53c2\uff09\uff0c\u800c <code class=\"language-javascript\">state</code> \u662f\u5728\u7ec4\u4ef6<em>\u5185</em>\u88ab\u7ec4\u4ef6\u81ea\u5df1\u7ba1\u7406\u7684\uff08\u7c7b\u4f3c\u4e8e\u5728\u4e00\u4e2a\u51fd\u6570\u5185\u58f0\u660e\u7684\u53d8\u91cf\uff09\u3002</p>\n<p>\u4e0b\u9762\u662f\u4e00\u4e9b\u4e0d\u9519\u7684\u8d44\u6e90\uff0c\u53ef\u4ee5\u7528\u6765\u8fdb\u4e00\u6b65\u4e86\u89e3\u4f7f\u7528 <code class=\"language-javascript\">props</code> \u6216 <code class=\"language-javascript\">state</code> \u7684\u6700\u4f73\u65f6\u673a\uff1a</p>\n<ul>\n<li><a class=\"external-link\" href=\"https://github.com/uberVU/react-guide/blob/master/props-vs-state.md\">Props vs State</a></li>\n<li><a class=\"external-link\" href=\"https://lucybain.com/blog/2016/react-state-vs-pros/\">ReactJS: Props vs. State</a></li>\n</ul>\n<h3 id=\"why-is-setstate-giving-me-the-wrong-value\"><a class=\"anchor\" href=\"/react/faq-state#why-is-setstate-giving-me-the-wrong-value\"></a>\u4e3a\u4ec0\u4e48 <code class=\"language-javascript\">setState</code> \u7ed9\u4e86\u6211\u4e00\u4e2a\u9519\u8bef\u7684\u503c\uff1f </h3>\n<p>\u5728 React \u4e2d\uff0c<code class=\"language-javascript\">this.props</code> \u548c <code class=\"language-javascript\">this.state</code> \u90fd\u4ee3\u8868\u7740<em>\u5df2\u7ecf\u88ab\u6e32\u67d3\u4e86\u7684</em>\u503c\uff0c\u5373\u5f53\u524d\u5c4f\u5e55\u4e0a\u663e\u793a\u7684\u503c\u3002</p>\n<p>\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u5176\u5b9e\u662f\u5f02\u6b65\u7684 \u2014\u2014 \u4e0d\u8981\u6307\u671b\u5728\u8c03\u7528 <code class=\"language-javascript\">setState</code> \u4e4b\u540e\uff0c<code class=\"language-javascript\">this.state</code> \u4f1a\u7acb\u5373\u6620\u5c04\u4e3a\u65b0\u7684\u503c\u3002\u5982\u679c\u4f60\u9700\u8981\u57fa\u4e8e\u5f53\u524d\u7684 state \u6765\u8ba1\u7b97\u51fa\u65b0\u7684\u503c\uff0c\u90a3\u4f60\u5e94\u8be5\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61\uff08\u8be6\u60c5\u89c1\u4e0b\u6587\uff09\u3002</p>\n<p>\u4ee3\u7801<em>\u4e0d\u4f1a</em>\u50cf\u9884\u671f\u90a3\u6837\u8fd0\u884c\u7684\u793a\u4f8b\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u6ce8\u610f\uff1a\u8fd9\u6837 *\u4e0d\u4f1a* \u50cf\u9884\u671f\u7684\u90a3\u6837\u5de5\u4f5c\u3002</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">handleSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u5047\u8bbe `this.state.count` \u4ece 0 \u5f00\u59cb\u3002</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// \u5f53 React \u91cd\u65b0\u6e32\u67d3\u8be5\u7ec4\u4ef6\u65f6\uff0c`this.state.count` \u4f1a\u53d8\u4e3a 1\uff0c\u800c\u4e0d\u662f\u4f60\u671f\u671b\u7684 3\u3002</span>\n\n  <span class=\"token comment\">// \u8fd9\u662f\u56e0\u4e3a\u4e0a\u9762\u7684 `incrementCount()` \u51fd\u6570\u662f\u4ece `this.state.count` \u4e2d\u8bfb\u53d6\u6570\u636e\u7684\uff0c</span>\n  <span class=\"token comment\">// \u4f46\u662f React \u4e0d\u4f1a\u66f4\u65b0 `this.state.count`\uff0c\u76f4\u5230\u8be5\u7ec4\u4ef6\u88ab\u91cd\u65b0\u6e32\u67d3\u3002</span>\n  <span class=\"token comment\">// \u6240\u4ee5\u6700\u7ec8 `incrementCount()` \u6bcf\u6b21\u8bfb\u53d6 `this.state.count` \u7684\u503c\u90fd\u662f 0\uff0c\u5e76\u5c06\u5b83\u8bbe\u4e3a 1\u3002</span>\n\n  <span class=\"token comment\">// \u95ee\u9898\u7684\u4fee\u590d\u53c2\u89c1\u4e0b\u9762\u7684\u8bf4\u660e\u3002</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>\u53c2\u89c1\u4e0b\u9762\u7684\u8bf4\u660e\u6765\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002</p>\n<h3 id=\"how-do-i-update-state-with-values-that-depend-on-the-current-state\"><a class=\"anchor\" href=\"/react/faq-state#how-do-i-update-state-with-values-that-depend-on-the-current-state\"></a>\u6211\u5e94\u8be5\u5982\u4f55\u66f4\u65b0\u90a3\u4e9b\u4f9d\u8d56\u4e8e\u5f53\u524d\u7684 state \u7684 state \u5462\uff1f </h3>\n<p>\u7ed9 <code class=\"language-javascript\">setState</code> \u4f20\u9012\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u786e\u4fdd\u6bcf\u6b21\u7684\u8c03\u7528\u90fd\u662f\u4f7f\u7528\u6700\u65b0\u7248\u7684 state\uff08\u89c1\u4e0b\u9762\u7684\u8bf4\u660e\uff09\u3002</p>\n<h3 id=\"what-is-the-difference-between-passing-an-object-or-a-function-in-setstate\"><a class=\"anchor\" href=\"/react/faq-state#what-is-the-difference-between-passing-an-object-or-a-function-in-setstate\"></a>\u7ed9 <code class=\"language-javascript\">setState</code> \u4f20\u9012\u4e00\u4e2a\u5bf9\u8c61\u4e0e\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f </h3>\n<p>\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u8ba9\u4f60\u5728\u51fd\u6570\u5185\u8bbf\u95ee\u5230\u5f53\u524d\u7684 state \u7684\u503c\u3002\u56e0\u4e3a <code class=\"language-javascript\">setState</code> \u7684\u8c03\u7528\u662f\u5206\u6279\u7684\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u94fe\u5f0f\u5730\u8fdb\u884c\u66f4\u65b0\uff0c\u5e76\u786e\u4fdd\u5b83\u4eec\u662f\u4e00\u4e2a\u5efa\u7acb\u5728\u53e6\u4e00\u4e2a\u4e4b\u4e0a\u7684\uff0c\u8fd9\u6837\u624d\u4e0d\u4f1a\u53d1\u751f\u51b2\u7a81\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// \u91cd\u8981\uff1a\u5728\u66f4\u65b0\u7684\u65f6\u5019\u8bfb\u53d6 `state`\uff0c\u800c\u4e0d\u662f `this.state`\u3002</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">handleSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// \u5047\u8bbe `this.state.count` \u4ece 0 \u5f00\u59cb\u3002</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">incrementCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// \u5982\u679c\u4f60\u73b0\u5728\u5728\u8fd9\u91cc\u8bfb\u53d6 `this.state.count`\uff0c\u5b83\u8fd8\u662f\u4f1a\u4e3a 0\u3002</span>\n  <span class=\"token comment\">// \u4f46\u662f\uff0c\u5f53 React \u91cd\u65b0\u6e32\u67d3\u8be5\u7ec4\u4ef6\u65f6\uff0c\u5b83\u4f1a\u53d8\u4e3a 3\u3002</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"/react/react-component#setstate\">\u5b66\u4e60\u66f4\u591a\u6709\u5173 setState \u7684\u5185\u5bb9</a></p>\n<h3 id=\"when-is-setstate-asynchronous\"><a class=\"anchor\" href=\"/react/faq-state#when-is-setstate-asynchronous\"></a><code class=\"language-javascript\">setState</code> \u4ec0\u4e48\u65f6\u5019\u662f\u5f02\u6b65\u7684\uff1f </h3>\n<p>\u76ee\u524d\uff0c\u5728\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5185\u90e8\u7684 <code class=\"language-javascript\">setState</code> \u662f\u5f02\u6b65\u7684\u3002</p>\n<p>\u4f8b\u5982\uff0c\u5982\u679c <code class=\"language-javascript\">Parent</code> \u548c <code class=\"language-javascript\">Child</code> \u5728\u540c\u4e00\u4e2a click \u4e8b\u4ef6\u4e2d\u90fd\u8c03\u7528\u4e86 <code class=\"language-javascript\">setState</code> \uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u786e\u4fdd <code class=\"language-javascript\">Child</code> \u4e0d\u4f1a\u88ab\u91cd\u65b0\u6e32\u67d3\u4e24\u6b21\u3002\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\uff0cReact \u4f1a\u5c06\u8be5 state \u201c\u51b2\u6d17\u201d \u5230\u6d4f\u89c8\u5668\u4e8b\u4ef6\u7ed3\u675f\u7684\u65f6\u5019\uff0c\u518d\u7edf\u4e00\u5730\u8fdb\u884c\u66f4\u65b0\u3002\u8fd9\u79cd\u673a\u5236\u53ef\u4ee5\u5728\u5927\u578b\u5e94\u7528\u4e2d\u5f97\u5230\u5f88\u597d\u7684\u6027\u80fd\u63d0\u5347\u3002</p>\n<p>\u8fd9\u53ea\u662f\u4e00\u4e2a\u5b9e\u73b0\u7684\u7ec6\u8282\uff0c\u6240\u4ee5\u8bf7\u4e0d\u8981\u76f4\u63a5\u4f9d\u8d56\u4e8e\u8fd9\u79cd\u673a\u5236\u3002\u5728\u4ee5\u540e\u7684\u7248\u672c\u5f53\u4e2d\uff0cReact \u4f1a\u5728\u66f4\u591a\u7684\u60c5\u51b5\u4e0b\u9759\u9ed8\u5730\u4f7f\u7528 state \u7684\u6279\u66f4\u65b0\u673a\u5236\u3002</p>\n<h3 id=\"why-doesnt-react-update-thisstate-synchronously\"><a class=\"anchor\" href=\"/react/faq-state#why-doesnt-react-update-thisstate-synchronously\"></a>\u4e3a\u4ec0\u4e48 React \u4e0d\u540c\u6b65\u5730\u66f4\u65b0 <code class=\"language-javascript\">this.state</code>\uff1f </h3>\n<p>\u5982\u524d\u9762\u7ae0\u8282\u89e3\u91ca\u7684\u90a3\u6837\uff0c\u5728\u5f00\u59cb\u91cd\u65b0\u6e32\u67d3\u4e4b\u524d\uff0cReact \u4f1a\u6709\u610f\u5730\u8fdb\u884c\u201c\u7b49\u5f85\u201d\uff0c\u76f4\u5230\u6240\u6709\u5728\u7ec4\u4ef6\u7684\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u5185\u8c03\u7528\u7684 <code class=\"language-javascript\">setState()</code> \u5b8c\u6210\u4e4b\u540e\u3002\u8fd9\u6837\u53ef\u4ee5\u901a\u8fc7\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u65b0\u6e32\u67d3\u6765\u63d0\u5347\u6027\u80fd\u3002</p>\n<p>\u4f46\u662f\uff0c\u4f60\u53ef\u80fd\u8fd8\u662f\u4f1a\u60f3\uff0c\u4e3a\u4ec0\u4e48 React \u4e0d\u80fd\u7acb\u5373\u66f4\u65b0 <code class=\"language-javascript\">this.state</code>\uff0c\u800c\u4e0d\u5bf9\u7ec4\u4ef6\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3\u5462\u3002</p>\n<p>\u4e3b\u8981\u6709\u4e24\u4e2a\u539f\u56e0\uff1a</p>\n<ul>\n<li>\u8fd9\u6837\u4f1a\u7834\u574f\u6389 <code class=\"language-javascript\">props</code> \u548c <code class=\"language-javascript\">state</code> \u4e4b\u95f4\u7684\u4e00\u81f4\u6027\uff0c\u9020\u6210\u4e00\u4e9b\u96be\u4ee5 debug \u7684\u95ee\u9898\u3002</li>\n<li>\u8fd9\u6837\u4f1a\u8ba9\u4e00\u4e9b\u6211\u4eec\u6b63\u5728\u5b9e\u73b0\u7684\u65b0\u529f\u80fd\u53d8\u5f97\u65e0\u6cd5\u5b9e\u73b0\u3002</li>\n</ul>\n<p>\u8fd9\u4e2a <a class=\"external-link\" href=\"https://github.com/facebook/react/issues/11527#issuecomment-360199710\">GitHub \u8bc4\u8bba</a> \u6df1\u5165\u4e86\u8be5\u7279\u6b8a\u793a\u4f8b\u3002</p>\n<h3 id=\"should-i-use-a-state-management-library-like-redux-or-mobx\"><a class=\"anchor\" href=\"/react/faq-state#should-i-use-a-state-management-library-like-redux-or-mobx\"></a>\u6211\u5e94\u8be5\u4f7f\u7528\u4e00\u4e2a\u50cf Redux \u6216 MobX \u90a3\u6837\u7684 state \u7ba1\u7406\u5e93\u5417\uff1f </h3>\n<p><a class=\"external-link\" href=\"https://redux.js.org/faq/general#when-should-i-use-redux\">\u6216\u8bb8\u9700\u8981\u3002</a></p>\n<p>\u5728\u6dfb\u52a0\u989d\u5916\u7684\u5e93\u4e4b\u524d\uff0c\u6700\u597d\u5148\u4e86\u89e3\u6e05\u695a React \u80fd\u5e72\u4ec0\u4e48\u3002\u4f60\u4e5f\u53ef\u4ee5\u53ea\u4f7f\u7528 React \u6765\u6784\u5efa\u51fa\u4e00\u4e2a\u6bd4\u8f83\u590d\u6742\u7684\u5e94\u7528\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-state.md\">Edit this page</a></p></div></article>", "path": "/react/faq-state", "nav": ["/react/faq-functions", "/react/faq-styling"]}, {"key": "\u6837\u5f0f\u53ca CSS", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"how-do-i-add-css-classes-to-components\"><a class=\"anchor\" href=\"/react/faq-styling#how-do-i-add-css-classes-to-components\"></a>\u5982\u4f55\u4e3a\u7ec4\u4ef6\u6dfb\u52a0 CSS \u7684 class\uff1f </h3>\n<p>\u4f20\u9012\u4e00\u4e2a\u5b57\u7b26\u4e32\u4f5c\u4e3a <code class=\"language-javascript\">className</code> \u5c5e\u6027\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>menu navigation-menu<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Menu</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>CSS \u7684 class \u4f9d\u8d56\u7ec4\u4ef6\u7684 props \u6216 state \u7684\u60c5\u51b5\u5f88\u5e38\u89c1\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-jsx\"><code class=\"language-javascript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> className <span class=\"token operator\">=</span> <span class=\"token string\">'menu'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>isActive<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    className <span class=\"token operator\">+=</span> <span class=\"token string\">' menu-active'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>className<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token plain-text\">Menu</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"blockquote\">\n<strong>\u63d0\u793a</strong>\n<p>\u5982\u679c\u4f60\u7ecf\u5e38\u53d1\u73b0\u81ea\u5df1\u5199\u7c7b\u4f3c\u8fd9\u6837\u7684\u4ee3\u7801\uff0c<a class=\"external-link\" href=\"https://www.npmjs.com/package/classnames#usage-with-reactjs\">classnames</a> \u7684 package \u53ef\u4ee5\u7b80\u5316\u8fd9\u4e00\u8fc7\u7a0b\u3002</p>\n</div>\n<h3 id=\"can-i-use-inline-styles\"><a class=\"anchor\" href=\"/react/faq-styling#can-i-use-inline-styles\"></a>\u53ef\u4ee5\u4f7f\u7528\u884c\u5185\u6837\u5f0f\u5417\uff1f </h3>\n<p>\u53ef\u4ee5\uff0c\u5728<a href=\"/react/dom-elements#style\">\u6b64\u5904</a>\u67e5\u770b\u5173\u4e8e\u6837\u5f0f\u7684\u6587\u6863\u3002</p>\n<h3 id=\"are-inline-styles-bad\"><a class=\"anchor\" href=\"/react/faq-styling#are-inline-styles-bad\"></a>\u884c\u5185\u6837\u5f0f\u4e0d\u597d (bad) \u5417\uff1f </h3>\n<p>\u4ece\u6027\u80fd\u89d2\u5ea6\u6765\u8bf4\uff0cCSS \u7684 class \u901a\u5e38\u6bd4\u884c\u5185\u6837\u5f0f\u66f4\u597d\u3002</p>\n<h3 id=\"what-is-css-in-js\"><a class=\"anchor\" href=\"/react/faq-styling#what-is-css-in-js\"></a>\u4ec0\u4e48\u662f CSS-in-JS? </h3>\n<p>\u201cCSS-in-JS\u201d \u662f\u6307\u4e00\u79cd\u6a21\u5f0f\uff0c\u5176\u4e2d CSS \u7531 JavaScript \u751f\u6210\u800c\u4e0d\u662f\u5728\u5916\u90e8\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002</p>\n<p><em>\u6ce8\u610f\u6b64\u529f\u80fd\u5e76\u4e0d\u662f React \u7684\u4e00\u90e8\u5206\uff0c\u800c\u662f\u7531\u7b2c\u4e09\u65b9\u5e93\u63d0\u4f9b\u3002</em> React \u5bf9\u6837\u5f0f\u5982\u4f55\u5b9a\u4e49\u5e76\u6ca1\u6709\u660e\u786e\u6001\u5ea6\uff1b\u5982\u679c\u5b58\u5728\u7591\u60d1\uff0c\u6bd4\u8f83\u597d\u7684\u65b9\u5f0f\u662f\u548c\u5e73\u65f6\u4e00\u6837\uff0c\u5728\u4e00\u4e2a\u5355\u72ec\u7684 <code class=\"language-javascript\">*.css</code> \u6587\u4ef6\u5b9a\u4e49\u4f60\u7684\u6837\u5f0f\uff0c\u5e76\u4e14\u901a\u8fc7 <a href=\"/react/dom-elements#classname\"><code class=\"language-javascript\">className</code></a> \u6307\u5b9a\u5b83\u4eec\u3002</p>\n<h3 id=\"can-i-do-animations-in-react\"><a class=\"anchor\" href=\"/react/faq-styling#can-i-do-animations-in-react\"></a>\u53ef\u4ee5\u5728 React \u4e2d\u5b9e\u73b0\u52a8\u753b\u6548\u679c\u5417\uff1f </h3>\n<p>React \u53ef\u4ee5\u88ab\u7528\u6765\u5b9e\u73b0\u5f3a\u5927\u7684\u52a8\u753b\u6548\u679c\u3002\u53c2\u89c1 <a class=\"external-link\" href=\"https://reactcommunity.org/react-transition-group/\">React Transition Group</a>\u3001<a class=\"external-link\" href=\"https://github.com/chenglou/react-motion\">React Motion</a> \u4ee5\u53ca <a class=\"external-link\" href=\"https://github.com/react-spring/react-spring\">React Spring</a> \u7b49\u793a\u4f8b\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-styling.md\">Edit this page</a></p></div></article>", "path": "/react/faq-styling", "nav": ["/react/faq-state", "/react/faq-structure"]}, {"key": "\u9879\u76ee\u6587\u4ef6\u7ed3\u6784", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"is-there-a-recommended-way-to-structure-react-projects\"><a class=\"anchor\" href=\"/react/faq-structure#is-there-a-recommended-way-to-structure-react-projects\"></a>\u662f\u5426\u6709\u4e00\u79cd\u63a8\u8350\u7684\u65b9\u5f0f\u6765\u7ec4\u7ec7 React \u7684\u9879\u76ee\u6587\u4ef6\u7ed3\u6784\u5462\uff1f </h3>\n<p>React \u5bf9\u5982\u4f55\u5c06\u6587\u4ef6\u653e\u5165\u6587\u4ef6\u5939\u4e2d\u6ca1\u6709\u610f\u89c1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003\u4f7f\u7528\u751f\u6001\u7cfb\u7edf\u4e2d\u4e00\u4e9b\u5e38\u89c1\u7684\u7ec4\u7ec7\u9879\u76ee\u6587\u4ef6\u7ed3\u6784\u7684\u65b9\u5f0f\u3002</p>\n<h4 id=\"grouping-by-features-or-routes\"><a class=\"anchor\" href=\"/react/faq-structure#grouping-by-features-or-routes\"></a>\u6309\u529f\u80fd\u6216\u8def\u7531\u7ec4\u7ec7 </h4>\n<p>\u7ec4\u7ec7\u9879\u76ee\u6587\u4ef6\u7ed3\u6784\u7684\u4e00\u79cd\u5e38\u89c1\u65b9\u6cd5\u662f\u5c06 CSS\u3001JS \u548c\u6d4b\u8bd5\u6587\u4ef6\u4e00\u8d77\u6309\u7167\u529f\u80fd\u6216\u8def\u7531\u8fdb\u884c\u7ec4\u7ec7\u3002</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">common/\n  Avatar.js\n  Avatar.css\n  APIUtils.js\n  APIUtils.test.js\nfeed/\n  index.js\n  Feed.js\n  Feed.css\n  FeedStory.js\n  FeedStory.test.js\n  FeedAPI.js\nprofile/\n  index.js\n  Profile.js\n  ProfileHeader.js\n  ProfileHeader.css\n  ProfileAPI.js</code></pre></div>\n<p>\u4e00\u4e2a\u201c\u529f\u80fd\u201d\u7684\u5b9a\u4e49\u56e0\u4eba\u800c\u5f02\uff0c\u4f60\u53ef\u4ee5\u81ea\u884c\u9009\u62e9\u5176\u7c92\u5ea6\u3002\u5982\u679c\u4f60\u60f3\u4e0d\u51fa\u5982\u4f55\u8bbe\u8ba1\u9876\u5c42\u76ee\u5f55\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5411\u4ea7\u54c1\u7528\u6237\u8be2\u95ee\u8fd9\u4e2a\u4ea7\u54c1\u6240\u5305\u542b\u7684\u4e3b\u8981\u90e8\u5206\uff0c\u5e76\u5c06\u53cd\u9988\u7684\u60f3\u6cd5\u7528\u4f5c\u8bbe\u8ba1\u84dd\u672c\u3002</p>\n<h4 id=\"grouping-by-file-type\"><a class=\"anchor\" href=\"/react/faq-structure#grouping-by-file-type\"></a>\u6309\u6587\u4ef6\u7c7b\u578b\u7ec4\u7ec7 </h4>\n<p>\u53e6\u4e00\u79cd\u7ec4\u7ec7\u9879\u76ee\u6587\u4ef6\u7ed3\u6784\u7684\u5e38\u7528\u65b9\u6cd5\u662f\u5c06\u7c7b\u4f3c\u7684\u6587\u4ef6\u7ec4\u7ec7\u5728\u4e00\u8d77\uff0c\u4f8b\u5982\uff1a</p>\n<div class=\"gatsby-highlight\"><pre class=\"gatsby-code-text\"><code class=\"language-javascript\">api/\n  APIUtils.js\n  APIUtils.test.js\n  ProfileAPI.js\n  UserAPI.js\ncomponents/\n  Avatar.js\n  Avatar.css\n  Feed.js\n  Feed.css\n  FeedStory.js\n  FeedStory.test.js\n  Profile.js\n  ProfileHeader.js\n  ProfileHeader.css</code></pre></div>\n<p>\u4e00\u4e9b\u4eba\u8fd8\u559c\u6b22\u66f4\u8fdb\u4e00\u6b65\uff0c\u4ed6\u4eec\u6839\u636e\u7ec4\u4ef6\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u89d2\u8272\u5c06\u7ec4\u4ef6\u6587\u4ef6\u7ec4\u7ec7\u5230\u4e0d\u540c\u7684\u76ee\u5f55\u4e2d\u53bb\u3002\u4f8b\u5982\uff0c<a class=\"external-link\" href=\"http://bradfrost.com/blog/post/atomic-web-design/\">\u539f\u5b50\u8bbe\u8ba1</a>\u5c31\u662f\u4e00\u79cd\u57fa\u4e8e\u6b64\u539f\u7406\u7684\u8bbe\u8ba1\u65b9\u6cd5\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5c06\u8fd9\u4e9b\u65b9\u6cd5\u4f5c\u4e3a\u6709\u7528\u7684\u793a\u4f8b\u800c\u975e\u5fc5\u987b\u4e25\u683c\u9075\u5b88\u7684\u89c4\u5219\uff0c\u901a\u5e38\u4f1a\u66f4\u5bcc\u6210\u6548\u3002</p>\n<h4 id=\"avoid-too-much-nesting\"><a class=\"anchor\" href=\"/react/faq-structure#avoid-too-much-nesting\"></a>\u907f\u514d\u591a\u5c42\u5d4c\u5957 </h4>\n<p>JavaScript \u9879\u76ee\u4e2d\u7684\u6df1\u5c42\u76ee\u5f55\u5d4c\u5957\u4f1a\u5e26\u6765\u8bb8\u591a\u75db\u70b9\u3002\u5728\u7f16\u5199\u76f8\u5bf9\u8def\u5f84\u5bfc\u5165\uff0c\u6216\u662f\u5728\u6587\u4ef6\u79fb\u52a8\u540e\u66f4\u65b0\u8fd9\u4e9b\u5bfc\u5165\u5c06\u53d8\u5f97\u66f4\u52a0\u56f0\u96be\u3002\u9664\u975e\u4f60\u6709\u975e\u5e38\u4ee4\u4eba\u4fe1\u670d\u7684\u7406\u7531\u6765\u4f7f\u7528\u6df1\u5c42\u76ee\u5f55\u5d4c\u5957\uff0c\u5426\u5219\u8bf7\u8003\u8651\u5c06\u5355\u4e2a\u9879\u76ee\u4e2d\u7684\u76ee\u5f55\u5d4c\u5957\u63a7\u5236\u5728\u6700\u591a\u4e09\u5230\u56db\u4e2a\u5c42\u7ea7\u5185\u3002\u5f53\u7136\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u5efa\u8bae\uff0c\u5b83\u53ef\u80fd\u4e0e\u4f60\u7684\u9879\u76ee\u65e0\u5173\u3002</p>\n<h4 id=\"dont-overthink-it\"><a class=\"anchor\" href=\"/react/faq-structure#dont-overthink-it\"></a>\u4e0d\u8981\u8fc7\u5ea6\u601d\u8003 </h4>\n<p>\u5982\u679c\u4f60\u521a\u521a\u5f00\u59cb\u4e00\u4e2a\u9879\u76ee\uff0c<a class=\"external-link\" href=\"https://en.wikipedia.org/wiki/Analysis_paralysis\">\u4e0d\u8981\u82b1\u8d85\u8fc7\u4e94\u5206\u949f</a>\u5728\u9009\u62e9\u9879\u76ee\u6587\u4ef6\u7ec4\u7ec7\u7ed3\u6784\u4e0a\u3002\u9009\u62e9\u4e0a\u8ff0\u4efb\u4f55\u65b9\u5f0f\uff08\u6216\u63d0\u51fa\u81ea\u5df1\u7684\u65b9\u5f0f\uff09\u5e76\u5f00\u59cb\u7f16\u5199\u4ee3\u7801\uff01\u56e0\u4e3a\uff0c\u5728\u4f60\u7f16\u5199\u4e86\u4e00\u4e9b\u771f\u6b63\u7684\u4ee3\u7801\u4e4b\u540e\uff0c\u4f60\u5c06\u5f88\u6709\u53ef\u80fd\u4f1a\u91cd\u65b0\u8003\u8651\u5b83\u3002</p>\n<p>\u5982\u679c\u60a8\u611f\u89c9\u5b8c\u5168\u5361\u4f4f\uff0c\u8bf7\u5148\u5c06\u6240\u6709\u6587\u4ef6\u4fdd\u5b58\u5728\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e2d\u3002\u5b83\u6700\u7ec8\u4f1a\u53d8\u5f97\u8db3\u591f\u5927\uff0c\u4ee5\u81f3\u4e8e\u8ba9\u4f60\u60f3\u8981\u5c06\u5176\u4e2d\u4e00\u4e9b\u6587\u4ef6\u62c6\u5206\u51fa\u53bb\u3002\u5230\u90a3\u65f6\uff0c\u4f60\u5c06\u6709\u8db3\u591f\u7684\u77e5\u8bc6\u53bb\u533a\u5206\u4f60\u6700\u9891\u7e41\u7f16\u8f91\u7684\u6587\u4ef6\u3002\u901a\u5e38\uff0c\u5c06\u7ecf\u5e38\u4e00\u8d77\u53d8\u5316\u7684\u6587\u4ef6\u7ec4\u7ec7\u5728\u4e00\u8d77\u662f\u4e2a\u597d\u4e3b\u610f\u3002\u8fd9\u4e2a\u539f\u5219\u88ab\u79f0\u4e3a \u201ccolocation\u201d\u3002</p>\n<p>\u968f\u7740\u9879\u76ee\u89c4\u6a21\u7684\u6269\u5927\uff0c\u4eba\u4eec\u901a\u5e38\u4f1a\u5728\u5b9e\u8df5\u4e2d\u6df7\u642d\u4f7f\u7528\u4e0a\u8ff0\u8fd9\u4e9b\u65b9\u5f0f\u3002\u56e0\u6b64\uff0c\u5728\u5f00\u59cb\u65f6\u9009\u62e9\u201c\u6b63\u786e\u201d\u7684\u90a3\u4e2a\u65b9\u5f0f\u5e76\u4e0d\u662f\u5f88\u91cd\u8981\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-structure.md\">Edit this page</a></p></div></article>", "path": "/react/faq-structure", "nav": ["/react/faq-styling", "/react/faq-internals"]}, {"key": "Virtual DOM \u53ca\u5185\u6838", "value": "<article class=\"css-174qq1k\"><div class=\"css-124oy3v\"><div class=\"css-6nf64v\"><h3 id=\"what-is-the-virtual-dom\"><a class=\"anchor\" href=\"/react/faq-internals#what-is-the-virtual-dom\"></a>\u4ec0\u4e48\u662f Virtual DOM\uff1f </h3>\n<p>Virtual DOM \u662f\u4e00\u79cd\u7f16\u7a0b\u6982\u5ff5\u3002\u5728\u8fd9\u4e2a\u6982\u5ff5\u91cc\uff0c UI \u4ee5\u4e00\u79cd\u7406\u60f3\u5316\u7684\uff0c\u6216\u8005\u8bf4\u201c\u865a\u62df\u7684\u201d\u8868\u73b0\u5f62\u5f0f\u88ab\u4fdd\u5b58\u4e8e\u5185\u5b58\u4e2d\uff0c\u5e76\u901a\u8fc7\u5982 ReactDOM \u7b49\u7c7b\u5e93\u4f7f\u4e4b\u4e0e\u201c\u771f\u5b9e\u7684\u201d DOM \u540c\u6b65\u3002\u8fd9\u4e00\u8fc7\u7a0b\u53eb\u505a<a href=\"/react/reconciliation\">\u534f\u8c03</a>\u3002</p>\n<p>\u8fd9\u79cd\u65b9\u5f0f\u8d4b\u4e88\u4e86 React \u58f0\u660e\u5f0f\u7684 API\uff1a\u60a8\u544a\u8bc9 React \u5e0c\u671b\u8ba9 UI \u662f\u4ec0\u4e48\u72b6\u6001\uff0cReact \u5c31\u786e\u4fdd DOM \u5339\u914d\u8be5\u72b6\u6001\u3002\u8fd9\u4f7f\u60a8\u53ef\u4ee5\u4ece\u5c5e\u6027\u64cd\u4f5c\u3001\u4e8b\u4ef6\u5904\u7406\u548c\u624b\u52a8 DOM \u66f4\u65b0\u8fd9\u4e9b\u5728\u6784\u5efa\u5e94\u7528\u7a0b\u5e8f\u65f6\u5fc5\u8981\u7684\u64cd\u4f5c\u4e2d\u89e3\u653e\u51fa\u6765\u3002</p>\n<p>\u4e0e\u5176\u5c06 \u201cVirtual DOM\u201d \u89c6\u4e3a\u4e00\u79cd\u6280\u672f\uff0c\u4e0d\u5982\u8bf4\u5b83\u662f\u4e00\u79cd\u6a21\u5f0f\uff0c\u4eba\u4eec\u63d0\u5230\u5b83\u65f6\u7ecf\u5e38\u662f\u8981\u8868\u8fbe\u4e0d\u540c\u7684\u4e1c\u897f\u3002\u5728 React \u7684\u4e16\u754c\u91cc\uff0c\u672f\u8bed \u201cVirtual DOM\u201d \u901a\u5e38\u4e0e <a href=\"/react/rendering-elements\">React \u5143\u7d20</a>\u5173\u8054\u5728\u4e00\u8d77\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u4ee3\u8868\u4e86\u7528\u6237\u754c\u9762\u7684\u5bf9\u8c61\u3002\u800c React \u4e5f\u4f7f\u7528\u4e00\u4e2a\u540d\u4e3a \u201cfibers\u201d \u7684\u5185\u90e8\u5bf9\u8c61\u6765\u5b58\u653e\u7ec4\u4ef6\u6811\u7684\u9644\u52a0\u4fe1\u606f\u3002\u4e0a\u8ff0\u4e8c\u8005\u4e5f\u88ab\u8ba4\u4e3a\u662f React \u4e2d \u201cVirtual DOM\u201d \u5b9e\u73b0\u7684\u4e00\u90e8\u5206\u3002</p>\n<h3 id=\"is-the-shadow-dom-the-same-as-the-virtual-dom\"><a class=\"anchor\" href=\"/react/faq-internals#is-the-shadow-dom-the-same-as-the-virtual-dom\"></a>Shadow DOM \u548c Virtual DOM \u662f\u4e00\u56de\u4e8b\u5417\uff1f </h3>\n<p>\u4e0d\uff0c\u4ed6\u4eec\u4e0d\u4e00\u6837\u3002Shadow DOM \u662f\u4e00\u79cd\u6d4f\u89c8\u5668\u6280\u672f\uff0c\u4e3b\u8981\u7528\u4e8e\u5728 web \u7ec4\u4ef6\u4e2d\u5c01\u88c5\u53d8\u91cf\u548c CSS\u3002Virtual DOM \u5219\u662f\u4e00\u79cd\u7531 Javascript \u7c7b\u5e93\u57fa\u4e8e\u6d4f\u89c8\u5668 API \u5b9e\u73b0\u7684\u6982\u5ff5\u3002</p>\n<h3 id=\"what-is-react-fiber\"><a class=\"anchor\" href=\"/react/faq-internals#what-is-react-fiber\"></a>\u4ec0\u4e48\u662f \u201cReact Fiber\u201d\uff1f </h3>\n<p>Fiber \u662f React 16 \u4e2d\u65b0\u7684\u534f\u8c03\u5f15\u64ce\u3002\u5b83\u7684\u4e3b\u8981\u76ee\u7684\u662f\u4f7f Virtual DOM \u53ef\u4ee5\u8fdb\u884c\u589e\u91cf\u5f0f\u6e32\u67d3\u3002<a class=\"external-link\" href=\"https://github.com/acdlite/react-fiber-architecture\">\u4e86\u89e3\u66f4\u591a</a>\u3002</p></div><p><a class=\"external-link\" href=\"https://github.com/reactjs/zh-hans.reactjs.org/tree/main/content/docs/faq-internals.md\">Edit this page</a></p></div></article>", "path": "/react/faq-internals", "nav": ["/react/faq-structure"]}]}]